var cF=Object.defineProperty;var uF=(e,t,r)=>t in e?cF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Vt=(e,t,r)=>uF(e,typeof t!="symbol"?t+"":t,r);function dF(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var fF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ts(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jC={exports:{}},My={},SC={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=Symbol.for("react.element"),hF=Symbol.for("react.portal"),pF=Symbol.for("react.fragment"),mF=Symbol.for("react.strict_mode"),gF=Symbol.for("react.profiler"),vF=Symbol.for("react.provider"),yF=Symbol.for("react.context"),xF=Symbol.for("react.forward_ref"),bF=Symbol.for("react.suspense"),wF=Symbol.for("react.memo"),_F=Symbol.for("react.lazy"),gN=Symbol.iterator;function jF(e){return e===null||typeof e!="object"?null:(e=gN&&e[gN]||e["@@iterator"],typeof e=="function"?e:null)}var NC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kC=Object.assign,AC={};function Wd(e,t,r){this.props=e,this.context=t,this.refs=AC,this.updater=r||NC}Wd.prototype.isReactComponent={};Wd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function EC(){}EC.prototype=Wd.prototype;function l_(e,t,r){this.props=e,this.context=t,this.refs=AC,this.updater=r||NC}var c_=l_.prototype=new EC;c_.constructor=l_;kC(c_,Wd.prototype);c_.isPureReactComponent=!0;var vN=Array.isArray,PC=Object.prototype.hasOwnProperty,u_={current:null},CC={key:!0,ref:!0,__self:!0,__source:!0};function OC(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)PC.call(t,n)&&!CC.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:bp,type:e,key:a,ref:s,props:i,_owner:u_.current}}function SF(e,t){return{$$typeof:bp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function d_(e){return typeof e=="object"&&e!==null&&e.$$typeof===bp}function NF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yN=/\/+/g;function e1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NF(""+e.key):t.toString(36)}function Ig(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case bp:case hF:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+e1(s,0):n,vN(i)?(r="",e!=null&&(r=e.replace(yN,"$&/")+"/"),Ig(i,t,r,"",function(u){return u})):i!=null&&(d_(i)&&(i=SF(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(yN,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",vN(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+e1(a,o);s+=Ig(a,t,r,c,i)}else if(c=jF(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+e1(a,o++),s+=Ig(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Fm(e,t,r){if(e==null)return e;var n=[],i=0;return Ig(e,n,"","",function(a){return t.call(r,a,i++)}),n}function kF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bi={current:null},Lg={transition:null},AF={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:Lg,ReactCurrentOwner:u_};function TC(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:Fm,forEach:function(e,t,r){Fm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fm(e,function(){t++}),t},toArray:function(e){return Fm(e,function(t){return t})||[]},only:function(e){if(!d_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};It.Component=Wd;It.Fragment=pF;It.Profiler=gF;It.PureComponent=l_;It.StrictMode=mF;It.Suspense=bF;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AF;It.act=TC;It.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=kC({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=u_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)PC.call(t,c)&&!CC.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:bp,type:e.type,key:i,ref:a,props:n,_owner:s}};It.createContext=function(e){return e={$$typeof:yF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vF,_context:e},e.Consumer=e};It.createElement=OC;It.createFactory=function(e){var t=OC.bind(null,e);return t.type=e,t};It.createRef=function(){return{current:null}};It.forwardRef=function(e){return{$$typeof:xF,render:e}};It.isValidElement=d_;It.lazy=function(e){return{$$typeof:_F,_payload:{_status:-1,_result:e},_init:kF}};It.memo=function(e,t){return{$$typeof:wF,type:e,compare:t===void 0?null:t}};It.startTransition=function(e){var t=Lg.transition;Lg.transition={};try{e()}finally{Lg.transition=t}};It.unstable_act=TC;It.useCallback=function(e,t){return bi.current.useCallback(e,t)};It.useContext=function(e){return bi.current.useContext(e)};It.useDebugValue=function(){};It.useDeferredValue=function(e){return bi.current.useDeferredValue(e)};It.useEffect=function(e,t){return bi.current.useEffect(e,t)};It.useId=function(){return bi.current.useId()};It.useImperativeHandle=function(e,t,r){return bi.current.useImperativeHandle(e,t,r)};It.useInsertionEffect=function(e,t){return bi.current.useInsertionEffect(e,t)};It.useLayoutEffect=function(e,t){return bi.current.useLayoutEffect(e,t)};It.useMemo=function(e,t){return bi.current.useMemo(e,t)};It.useReducer=function(e,t,r){return bi.current.useReducer(e,t,r)};It.useRef=function(e){return bi.current.useRef(e)};It.useState=function(e){return bi.current.useState(e)};It.useSyncExternalStore=function(e,t,r){return bi.current.useSyncExternalStore(e,t,r)};It.useTransition=function(){return bi.current.useTransition()};It.version="18.3.1";SC.exports=It;var b=SC.exports;const wp=Ts(b),IC=dF({__proto__:null,default:wp},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EF=b,PF=Symbol.for("react.element"),CF=Symbol.for("react.fragment"),OF=Object.prototype.hasOwnProperty,TF=EF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IF={key:!0,ref:!0,__self:!0,__source:!0};function LC(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)OF.call(t,n)&&!IF.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:PF,type:e,key:a,ref:s,props:i,_owner:TF.current}}My.Fragment=CF;My.jsx=LC;My.jsxs=LC;jC.exports=My;var l=jC.exports,Ib={},DC={exports:{}},ta={},RC={exports:{}},MC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,B){var le=W.length;W.push(B);e:for(;0<le;){var G=le-1>>>1,R=W[G];if(0<i(R,B))W[G]=B,W[le]=R,le=G;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var B=W[0],le=W.pop();if(le!==B){W[0]=le;e:for(var G=0,R=W.length,z=R>>>1;G<z;){var J=2*(G+1)-1,ie=W[J],ae=J+1,ue=W[ae];if(0>i(ie,le))ae<R&&0>i(ue,ie)?(W[G]=ue,W[ae]=le,G=ae):(W[G]=ie,W[J]=le,G=J);else if(ae<R&&0>i(ue,le))W[G]=ue,W[ae]=le,G=ae;else break e}}return B}function i(W,B){var le=W.sortIndex-B.sortIndex;return le!==0?le:W.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,p=3,h=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=W)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function j(W){if(g=!1,S(W),!y)if(r(c)!==null)y=!0,re(N);else{var B=r(u);B!==null&&te(j,B.startTime-W)}}function N(W,B){y=!1,g&&(g=!1,v(E),E=-1),h=!0;var le=p;try{for(S(B),f=r(c);f!==null&&(!(f.expirationTime>B)||W&&!T());){var G=f.callback;if(typeof G=="function"){f.callback=null,p=f.priorityLevel;var R=G(f.expirationTime<=B);B=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(c)&&n(c),S(B)}else n(c);f=r(c)}if(f!==null)var z=!0;else{var J=r(u);J!==null&&te(j,J.startTime-B),z=!1}return z}finally{f=null,p=le,h=!1}}var A=!1,I=null,E=-1,C=5,D=-1;function T(){return!(e.unstable_now()-D<C)}function O(){if(I!==null){var W=e.unstable_now();D=W;var B=!0;try{B=I(!0,W)}finally{B?q():(A=!1,I=null)}}else A=!1}var q;if(typeof _=="function")q=function(){_(O)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=O,q=function(){ne.postMessage(null)}}else q=function(){x(O,0)};function re(W){I=W,A||(A=!0,q())}function te(W,B){E=x(function(){W(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){y||h||(y=!0,re(N))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(W){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var le=p;p=B;try{return W()}finally{p=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,B){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var le=p;p=W;try{return B()}finally{p=le}},e.unstable_scheduleCallback=function(W,B,le){var G=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?G+le:G):le=G,W){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=le+R,W={id:d++,callback:B,priorityLevel:W,startTime:le,expirationTime:R,sortIndex:-1},le>G?(W.sortIndex=le,t(u,W),r(c)===null&&W===r(u)&&(g?(v(E),E=-1):g=!0,te(j,le-G))):(W.sortIndex=R,t(c,W),y||h||(y=!0,re(N))),W},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(W){var B=p;return function(){var le=p;p=B;try{return W.apply(this,arguments)}finally{p=le}}}})(MC);RC.exports=MC;var LF=RC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DF=b,Zi=LF;function Re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FC=new Set,Ch={};function iu(e,t){Ad(e,t),Ad(e+"Capture",t)}function Ad(e,t){for(Ch[e]=t,e=0;e<t.length;e++)FC.add(t[e])}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lb=Object.prototype.hasOwnProperty,RF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xN={},bN={};function MF(e){return Lb.call(bN,e)?!0:Lb.call(xN,e)?!1:RF.test(e)?bN[e]=!0:(xN[e]=!0,!1)}function FF(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $F(e,t,r,n){if(t===null||typeof t>"u"||FF(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wi(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gn[e]=new wi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gn[t]=new wi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gn[e]=new wi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gn[e]=new wi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gn[e]=new wi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gn[e]=new wi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gn[e]=new wi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gn[e]=new wi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gn[e]=new wi(e,5,!1,e.toLowerCase(),null,!1,!1)});var f_=/[\-:]([a-z])/g;function h_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f_,h_);Gn[t]=new wi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f_,h_);Gn[t]=new wi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f_,h_);Gn[t]=new wi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gn[e]=new wi(e,1,!1,e.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gn[e]=new wi(e,1,!1,e.toLowerCase(),null,!0,!0)});function p_(e,t,r,n){var i=Gn.hasOwnProperty(t)?Gn[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($F(t,r,i,n)&&(r=null),n||i===null?MF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Po=DF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$m=Symbol.for("react.element"),Xu=Symbol.for("react.portal"),Zu=Symbol.for("react.fragment"),m_=Symbol.for("react.strict_mode"),Db=Symbol.for("react.profiler"),$C=Symbol.for("react.provider"),BC=Symbol.for("react.context"),g_=Symbol.for("react.forward_ref"),Rb=Symbol.for("react.suspense"),Mb=Symbol.for("react.suspense_list"),v_=Symbol.for("react.memo"),il=Symbol.for("react.lazy"),UC=Symbol.for("react.offscreen"),wN=Symbol.iterator;function Bf(e){return e===null||typeof e!="object"?null:(e=wN&&e[wN]||e["@@iterator"],typeof e=="function"?e:null)}var Tr=Object.assign,t1;function oh(e){if(t1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);t1=t&&t[1]||""}return`
`+t1+e}var r1=!1;function n1(e,t){if(!e||r1)return"";r1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{r1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?oh(e):""}function BF(e){switch(e.tag){case 5:return oh(e.type);case 16:return oh("Lazy");case 13:return oh("Suspense");case 19:return oh("SuspenseList");case 0:case 2:case 15:return e=n1(e.type,!1),e;case 11:return e=n1(e.type.render,!1),e;case 1:return e=n1(e.type,!0),e;default:return""}}function Fb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zu:return"Fragment";case Xu:return"Portal";case Db:return"Profiler";case m_:return"StrictMode";case Rb:return"Suspense";case Mb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case BC:return(e.displayName||"Context")+".Consumer";case $C:return(e._context.displayName||"Context")+".Provider";case g_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case v_:return t=e.displayName||null,t!==null?t:Fb(e.type)||"Memo";case il:t=e._payload,e=e._init;try{return Fb(e(t))}catch{}}return null}function UF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fb(t);case 8:return t===m_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qF(e){var t=qC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bm(e){e._valueTracker||(e._valueTracker=qF(e))}function zC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=qC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function iv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $b(e,t){var r=t.checked;return Tr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _N(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Pl(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WC(e,t){t=t.checked,t!=null&&p_(e,"checked",t,!1)}function Bb(e,t){WC(e,t);var r=Pl(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ub(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ub(e,t.type,Pl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jN(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ub(e,t,r){(t!=="number"||iv(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var lh=Array.isArray;function hd(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Pl(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function qb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Tr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SN(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Re(92));if(lh(r)){if(1<r.length)throw Error(Re(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Pl(r)}}function HC(e,t){var r=Pl(t.value),n=Pl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function NN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function VC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Um,KC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Um=Um||document.createElement("div"),Um.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Um.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var mh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zF=["Webkit","ms","Moz","O"];Object.keys(mh).forEach(function(e){zF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mh[t]=mh[e]})});function GC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||mh.hasOwnProperty(e)&&mh[e]?(""+t).trim():t+"px"}function YC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=GC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var WF=Tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wb(e,t){if(t){if(WF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function Hb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vb=null;function y_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kb=null,pd=null,md=null;function kN(e){if(e=Sp(e)){if(typeof Kb!="function")throw Error(Re(280));var t=e.stateNode;t&&(t=qy(t),Kb(e.stateNode,e.type,t))}}function JC(e){pd?md?md.push(e):md=[e]:pd=e}function XC(){if(pd){var e=pd,t=md;if(md=pd=null,kN(e),t)for(e=0;e<t.length;e++)kN(t[e])}}function ZC(e,t){return e(t)}function QC(){}var i1=!1;function eO(e,t,r){if(i1)return e(t,r);i1=!0;try{return ZC(e,t,r)}finally{i1=!1,(pd!==null||md!==null)&&(QC(),XC())}}function Th(e,t){var r=e.stateNode;if(r===null)return null;var n=qy(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Re(231,t,typeof r));return r}var Gb=!1;if(vo)try{var Uf={};Object.defineProperty(Uf,"passive",{get:function(){Gb=!0}}),window.addEventListener("test",Uf,Uf),window.removeEventListener("test",Uf,Uf)}catch{Gb=!1}function HF(e,t,r,n,i,a,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var gh=!1,av=null,sv=!1,Yb=null,VF={onError:function(e){gh=!0,av=e}};function KF(e,t,r,n,i,a,s,o,c){gh=!1,av=null,HF.apply(VF,arguments)}function GF(e,t,r,n,i,a,s,o,c){if(KF.apply(this,arguments),gh){if(gh){var u=av;gh=!1,av=null}else throw Error(Re(198));sv||(sv=!0,Yb=u)}}function au(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function AN(e){if(au(e)!==e)throw Error(Re(188))}function YF(e){var t=e.alternate;if(!t){if(t=au(e),t===null)throw Error(Re(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return AN(i),e;if(a===n)return AN(i),t;a=a.sibling}throw Error(Re(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(Re(189))}}if(r.alternate!==n)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?e:t}function rO(e){return e=YF(e),e!==null?nO(e):null}function nO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nO(e);if(t!==null)return t;e=e.sibling}return null}var iO=Zi.unstable_scheduleCallback,EN=Zi.unstable_cancelCallback,JF=Zi.unstable_shouldYield,XF=Zi.unstable_requestPaint,Xr=Zi.unstable_now,ZF=Zi.unstable_getCurrentPriorityLevel,x_=Zi.unstable_ImmediatePriority,aO=Zi.unstable_UserBlockingPriority,ov=Zi.unstable_NormalPriority,QF=Zi.unstable_LowPriority,sO=Zi.unstable_IdlePriority,Fy=null,js=null;function e$(e){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(Fy,e,void 0,(e.current.flags&128)===128)}catch{}}var Va=Math.clz32?Math.clz32:n$,t$=Math.log,r$=Math.LN2;function n$(e){return e>>>=0,e===0?32:31-(t$(e)/r$|0)|0}var qm=64,zm=4194304;function ch(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lv(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=ch(o):(a&=s,a!==0&&(n=ch(a)))}else s=r&~i,s!==0?n=ch(s):a!==0&&(n=ch(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Va(t),i=1<<r,n|=e[r],t&=~i;return n}function i$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a$(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Va(a),o=1<<s,c=i[s];c===-1?(!(o&r)||o&n)&&(i[s]=i$(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Jb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oO(){var e=qm;return qm<<=1,!(qm&4194240)&&(qm=64),e}function a1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _p(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Va(t),e[t]=r}function s$(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Va(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function b_(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Va(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var tr=0;function lO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cO,w_,uO,dO,fO,Xb=!1,Wm=[],yl=null,xl=null,bl=null,Ih=new Map,Lh=new Map,cl=[],o$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PN(e,t){switch(e){case"focusin":case"focusout":yl=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":Ih.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lh.delete(t.pointerId)}}function qf(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Sp(t),t!==null&&w_(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function l$(e,t,r,n,i){switch(t){case"focusin":return yl=qf(yl,e,t,r,n,i),!0;case"dragenter":return xl=qf(xl,e,t,r,n,i),!0;case"mouseover":return bl=qf(bl,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Ih.set(a,qf(Ih.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Lh.set(a,qf(Lh.get(a)||null,e,t,r,n,i)),!0}return!1}function hO(e){var t=wc(e.target);if(t!==null){var r=au(t);if(r!==null){if(t=r.tag,t===13){if(t=tO(r),t!==null){e.blockedOn=t,fO(e.priority,function(){uO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Vb=n,r.target.dispatchEvent(n),Vb=null}else return t=Sp(r),t!==null&&w_(t),e.blockedOn=r,!1;t.shift()}return!0}function CN(e,t,r){Dg(e)&&r.delete(t)}function c$(){Xb=!1,yl!==null&&Dg(yl)&&(yl=null),xl!==null&&Dg(xl)&&(xl=null),bl!==null&&Dg(bl)&&(bl=null),Ih.forEach(CN),Lh.forEach(CN)}function zf(e,t){e.blockedOn===t&&(e.blockedOn=null,Xb||(Xb=!0,Zi.unstable_scheduleCallback(Zi.unstable_NormalPriority,c$)))}function Dh(e){function t(i){return zf(i,e)}if(0<Wm.length){zf(Wm[0],e);for(var r=1;r<Wm.length;r++){var n=Wm[r];n.blockedOn===e&&(n.blockedOn=null)}}for(yl!==null&&zf(yl,e),xl!==null&&zf(xl,e),bl!==null&&zf(bl,e),Ih.forEach(t),Lh.forEach(t),r=0;r<cl.length;r++)n=cl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<cl.length&&(r=cl[0],r.blockedOn===null);)hO(r),r.blockedOn===null&&cl.shift()}var gd=Po.ReactCurrentBatchConfig,cv=!0;function u$(e,t,r,n){var i=tr,a=gd.transition;gd.transition=null;try{tr=1,__(e,t,r,n)}finally{tr=i,gd.transition=a}}function d$(e,t,r,n){var i=tr,a=gd.transition;gd.transition=null;try{tr=4,__(e,t,r,n)}finally{tr=i,gd.transition=a}}function __(e,t,r,n){if(cv){var i=Zb(e,t,r,n);if(i===null)m1(e,t,n,uv,r),PN(e,n);else if(l$(i,e,t,r,n))n.stopPropagation();else if(PN(e,n),t&4&&-1<o$.indexOf(e)){for(;i!==null;){var a=Sp(i);if(a!==null&&cO(a),a=Zb(e,t,r,n),a===null&&m1(e,t,n,uv,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else m1(e,t,n,null,r)}}var uv=null;function Zb(e,t,r,n){if(uv=null,e=y_(n),e=wc(e),e!==null)if(t=au(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uv=e,null}function pO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZF()){case x_:return 1;case aO:return 4;case ov:case QF:return 16;case sO:return 536870912;default:return 16}default:return 16}}var hl=null,j_=null,Rg=null;function mO(){if(Rg)return Rg;var e,t=j_,r=t.length,n,i="value"in hl?hl.value:hl.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return Rg=i.slice(e,1<n?1-n:void 0)}function Mg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hm(){return!0}function ON(){return!1}function ra(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Hm:ON,this.isPropagationStopped=ON,this}return Tr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hm)},persist:function(){},isPersistent:Hm}),t}var Hd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S_=ra(Hd),jp=Tr({},Hd,{view:0,detail:0}),f$=ra(jp),s1,o1,Wf,$y=Tr({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wf&&(Wf&&e.type==="mousemove"?(s1=e.screenX-Wf.screenX,o1=e.screenY-Wf.screenY):o1=s1=0,Wf=e),s1)},movementY:function(e){return"movementY"in e?e.movementY:o1}}),TN=ra($y),h$=Tr({},$y,{dataTransfer:0}),p$=ra(h$),m$=Tr({},jp,{relatedTarget:0}),l1=ra(m$),g$=Tr({},Hd,{animationName:0,elapsedTime:0,pseudoElement:0}),v$=ra(g$),y$=Tr({},Hd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),x$=ra(y$),b$=Tr({},Hd,{data:0}),IN=ra(b$),w$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=j$[e])?!!t[e]:!1}function N_(){return S$}var N$=Tr({},jp,{key:function(e){if(e.key){var t=w$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N_,charCode:function(e){return e.type==="keypress"?Mg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k$=ra(N$),A$=Tr({},$y,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LN=ra(A$),E$=Tr({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N_}),P$=ra(E$),C$=Tr({},Hd,{propertyName:0,elapsedTime:0,pseudoElement:0}),O$=ra(C$),T$=Tr({},$y,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),I$=ra(T$),L$=[9,13,27,32],k_=vo&&"CompositionEvent"in window,vh=null;vo&&"documentMode"in document&&(vh=document.documentMode);var D$=vo&&"TextEvent"in window&&!vh,gO=vo&&(!k_||vh&&8<vh&&11>=vh),DN=" ",RN=!1;function vO(e,t){switch(e){case"keyup":return L$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qu=!1;function R$(e,t){switch(e){case"compositionend":return yO(t);case"keypress":return t.which!==32?null:(RN=!0,DN);case"textInput":return e=t.data,e===DN&&RN?null:e;default:return null}}function M$(e,t){if(Qu)return e==="compositionend"||!k_&&vO(e,t)?(e=mO(),Rg=j_=hl=null,Qu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gO&&t.locale!=="ko"?null:t.data;default:return null}}var F$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F$[e.type]:t==="textarea"}function xO(e,t,r,n){JC(n),t=dv(t,"onChange"),0<t.length&&(r=new S_("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var yh=null,Rh=null;function $$(e){CO(e,0)}function By(e){var t=rd(e);if(zC(t))return e}function B$(e,t){if(e==="change")return t}var bO=!1;if(vo){var c1;if(vo){var u1="oninput"in document;if(!u1){var FN=document.createElement("div");FN.setAttribute("oninput","return;"),u1=typeof FN.oninput=="function"}c1=u1}else c1=!1;bO=c1&&(!document.documentMode||9<document.documentMode)}function $N(){yh&&(yh.detachEvent("onpropertychange",wO),Rh=yh=null)}function wO(e){if(e.propertyName==="value"&&By(Rh)){var t=[];xO(t,Rh,e,y_(e)),eO($$,t)}}function U$(e,t,r){e==="focusin"?($N(),yh=t,Rh=r,yh.attachEvent("onpropertychange",wO)):e==="focusout"&&$N()}function q$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return By(Rh)}function z$(e,t){if(e==="click")return By(t)}function W$(e,t){if(e==="input"||e==="change")return By(t)}function H$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:H$;function Mh(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Lb.call(t,i)||!Ya(e[i],t[i]))return!1}return!0}function BN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function UN(e,t){var r=BN(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BN(r)}}function _O(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_O(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jO(){for(var e=window,t=iv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=iv(e.document)}return t}function A_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function V$(e){var t=jO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_O(r.ownerDocument.documentElement,r)){if(n!==null&&A_(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=UN(r,a);var s=UN(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K$=vo&&"documentMode"in document&&11>=document.documentMode,ed=null,Qb=null,xh=null,e2=!1;function qN(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;e2||ed==null||ed!==iv(n)||(n=ed,"selectionStart"in n&&A_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xh&&Mh(xh,n)||(xh=n,n=dv(Qb,"onSelect"),0<n.length&&(t=new S_("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ed)))}function Vm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var td={animationend:Vm("Animation","AnimationEnd"),animationiteration:Vm("Animation","AnimationIteration"),animationstart:Vm("Animation","AnimationStart"),transitionend:Vm("Transition","TransitionEnd")},d1={},SO={};vo&&(SO=document.createElement("div").style,"AnimationEvent"in window||(delete td.animationend.animation,delete td.animationiteration.animation,delete td.animationstart.animation),"TransitionEvent"in window||delete td.transitionend.transition);function Uy(e){if(d1[e])return d1[e];if(!td[e])return e;var t=td[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in SO)return d1[e]=t[r];return e}var NO=Uy("animationend"),kO=Uy("animationiteration"),AO=Uy("animationstart"),EO=Uy("transitionend"),PO=new Map,zN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(e,t){PO.set(e,t),iu(t,[e])}for(var f1=0;f1<zN.length;f1++){var h1=zN[f1],G$=h1.toLowerCase(),Y$=h1[0].toUpperCase()+h1.slice(1);Rl(G$,"on"+Y$)}Rl(NO,"onAnimationEnd");Rl(kO,"onAnimationIteration");Rl(AO,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(EO,"onTransitionEnd");Ad("onMouseEnter",["mouseout","mouseover"]);Ad("onMouseLeave",["mouseout","mouseover"]);Ad("onPointerEnter",["pointerout","pointerover"]);Ad("onPointerLeave",["pointerout","pointerover"]);iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J$=new Set("cancel close invalid load scroll toggle".split(" ").concat(uh));function WN(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,GF(n,t,void 0,e),e.currentTarget=null}function CO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;WN(i,o,u),a=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;WN(i,o,u),a=c}}}if(sv)throw e=Yb,sv=!1,Yb=null,e}function vr(e,t){var r=t[a2];r===void 0&&(r=t[a2]=new Set);var n=e+"__bubble";r.has(n)||(OO(t,e,2,!1),r.add(n))}function p1(e,t,r){var n=0;t&&(n|=4),OO(r,e,n,t)}var Km="_reactListening"+Math.random().toString(36).slice(2);function Fh(e){if(!e[Km]){e[Km]=!0,FC.forEach(function(r){r!=="selectionchange"&&(J$.has(r)||p1(r,!1,e),p1(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Km]||(t[Km]=!0,p1("selectionchange",!1,t))}}function OO(e,t,r,n){switch(pO(t)){case 1:var i=u$;break;case 4:i=d$;break;default:i=__}r=i.bind(null,t,r,e),i=void 0,!Gb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function m1(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;o!==null;){if(s=wc(o),s===null)return;if(c=s.tag,c===5||c===6){n=a=s;continue e}o=o.parentNode}}n=n.return}eO(function(){var u=a,d=y_(r),f=[];e:{var p=PO.get(e);if(p!==void 0){var h=S_,y=e;switch(e){case"keypress":if(Mg(r)===0)break e;case"keydown":case"keyup":h=k$;break;case"focusin":y="focus",h=l1;break;case"focusout":y="blur",h=l1;break;case"beforeblur":case"afterblur":h=l1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=TN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=p$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=P$;break;case NO:case kO:case AO:h=v$;break;case EO:h=O$;break;case"scroll":h=f$;break;case"wheel":h=I$;break;case"copy":case"cut":case"paste":h=x$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=LN}var g=(t&4)!==0,x=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var _=u,S;_!==null;){S=_;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,v!==null&&(j=Th(_,v),j!=null&&g.push($h(_,j,S)))),x)break;_=_.return}0<g.length&&(p=new h(p,y,null,r,d),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==Vb&&(y=r.relatedTarget||r.fromElement)&&(wc(y)||y[yo]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(y=r.relatedTarget||r.toElement,h=u,y=y?wc(y):null,y!==null&&(x=au(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=u),h!==y)){if(g=TN,j="onMouseLeave",v="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(g=LN,j="onPointerLeave",v="onPointerEnter",_="pointer"),x=h==null?p:rd(h),S=y==null?p:rd(y),p=new g(j,_+"leave",h,r,d),p.target=x,p.relatedTarget=S,j=null,wc(d)===u&&(g=new g(v,_+"enter",y,r,d),g.target=S,g.relatedTarget=x,j=g),x=j,h&&y)t:{for(g=h,v=y,_=0,S=g;S;S=Ou(S))_++;for(S=0,j=v;j;j=Ou(j))S++;for(;0<_-S;)g=Ou(g),_--;for(;0<S-_;)v=Ou(v),S--;for(;_--;){if(g===v||v!==null&&g===v.alternate)break t;g=Ou(g),v=Ou(v)}g=null}else g=null;h!==null&&HN(f,p,h,g,!1),y!==null&&x!==null&&HN(f,x,y,g,!0)}}e:{if(p=u?rd(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var N=B$;else if(MN(p))if(bO)N=W$;else{N=q$;var A=U$}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=z$);if(N&&(N=N(e,u))){xO(f,N,r,d);break e}A&&A(e,p,u),e==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Ub(p,"number",p.value)}switch(A=u?rd(u):window,e){case"focusin":(MN(A)||A.contentEditable==="true")&&(ed=A,Qb=u,xh=null);break;case"focusout":xh=Qb=ed=null;break;case"mousedown":e2=!0;break;case"contextmenu":case"mouseup":case"dragend":e2=!1,qN(f,r,d);break;case"selectionchange":if(K$)break;case"keydown":case"keyup":qN(f,r,d)}var I;if(k_)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Qu?vO(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(gO&&r.locale!=="ko"&&(Qu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Qu&&(I=mO()):(hl=d,j_="value"in hl?hl.value:hl.textContent,Qu=!0)),A=dv(u,E),0<A.length&&(E=new IN(E,e,null,r,d),f.push({event:E,listeners:A}),I?E.data=I:(I=yO(r),I!==null&&(E.data=I)))),(I=D$?R$(e,r):M$(e,r))&&(u=dv(u,"onBeforeInput"),0<u.length&&(d=new IN("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=I))}CO(f,t)})}function $h(e,t,r){return{instance:e,listener:t,currentTarget:r}}function dv(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Th(e,r),a!=null&&n.unshift($h(e,a,i)),a=Th(e,t),a!=null&&n.push($h(e,a,i))),e=e.return}return n}function Ou(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function HN(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=Th(r,a),c!=null&&s.unshift($h(r,c,o))):i||(c=Th(r,a),c!=null&&s.push($h(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var X$=/\r\n?/g,Z$=/\u0000|\uFFFD/g;function VN(e){return(typeof e=="string"?e:""+e).replace(X$,`
`).replace(Z$,"")}function Gm(e,t,r){if(t=VN(t),VN(e)!==t&&r)throw Error(Re(425))}function fv(){}var t2=null,r2=null;function n2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i2=typeof setTimeout=="function"?setTimeout:void 0,Q$=typeof clearTimeout=="function"?clearTimeout:void 0,KN=typeof Promise=="function"?Promise:void 0,eB=typeof queueMicrotask=="function"?queueMicrotask:typeof KN<"u"?function(e){return KN.resolve(null).then(e).catch(tB)}:i2;function tB(e){setTimeout(function(){throw e})}function g1(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Dh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Dh(t)}function wl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function GN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vd=Math.random().toString(36).slice(2),ys="__reactFiber$"+Vd,Bh="__reactProps$"+Vd,yo="__reactContainer$"+Vd,a2="__reactEvents$"+Vd,rB="__reactListeners$"+Vd,nB="__reactHandles$"+Vd;function wc(e){var t=e[ys];if(t)return t;for(var r=e.parentNode;r;){if(t=r[yo]||r[ys]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=GN(e);e!==null;){if(r=e[ys])return r;e=GN(e)}return t}e=r,r=e.parentNode}return null}function Sp(e){return e=e[ys]||e[yo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function qy(e){return e[Bh]||null}var s2=[],nd=-1;function Ml(e){return{current:e}}function br(e){0>nd||(e.current=s2[nd],s2[nd]=null,nd--)}function hr(e,t){nd++,s2[nd]=e.current,e.current=t}var Cl={},li=Ml(Cl),Pi=Ml(!1),Dc=Cl;function Ed(e,t){var r=e.type.contextTypes;if(!r)return Cl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ci(e){return e=e.childContextTypes,e!=null}function hv(){br(Pi),br(li)}function YN(e,t,r){if(li.current!==Cl)throw Error(Re(168));hr(li,t),hr(Pi,r)}function TO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Re(108,UF(e)||"Unknown",i));return Tr({},r,n)}function pv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cl,Dc=li.current,hr(li,e),hr(Pi,Pi.current),!0}function JN(e,t,r){var n=e.stateNode;if(!n)throw Error(Re(169));r?(e=TO(e,t,Dc),n.__reactInternalMemoizedMergedChildContext=e,br(Pi),br(li),hr(li,e)):br(Pi),hr(Pi,r)}var io=null,zy=!1,v1=!1;function IO(e){io===null?io=[e]:io.push(e)}function iB(e){zy=!0,IO(e)}function Fl(){if(!v1&&io!==null){v1=!0;var e=0,t=tr;try{var r=io;for(tr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}io=null,zy=!1}catch(i){throw io!==null&&(io=io.slice(e+1)),iO(x_,Fl),i}finally{tr=t,v1=!1}}return null}var id=[],ad=0,mv=null,gv=0,ga=[],va=0,Rc=null,lo=1,co="";function dc(e,t){id[ad++]=gv,id[ad++]=mv,mv=e,gv=t}function LO(e,t,r){ga[va++]=lo,ga[va++]=co,ga[va++]=Rc,Rc=e;var n=lo;e=co;var i=32-Va(n)-1;n&=~(1<<i),r+=1;var a=32-Va(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,lo=1<<32-Va(t)+i|r<<i|n,co=a+e}else lo=1<<a|r<<i|n,co=e}function E_(e){e.return!==null&&(dc(e,1),LO(e,1,0))}function P_(e){for(;e===mv;)mv=id[--ad],id[ad]=null,gv=id[--ad],id[ad]=null;for(;e===Rc;)Rc=ga[--va],ga[va]=null,co=ga[--va],ga[va]=null,lo=ga[--va],ga[va]=null}var Ji=null,Ki=null,Ar=!1,qa=null;function DO(e,t){var r=ya(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function XN(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ji=e,Ki=wl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ji=e,Ki=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rc!==null?{id:lo,overflow:co}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ya(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ji=e,Ki=null,!0):!1;default:return!1}}function o2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function l2(e){if(Ar){var t=Ki;if(t){var r=t;if(!XN(e,t)){if(o2(e))throw Error(Re(418));t=wl(r.nextSibling);var n=Ji;t&&XN(e,t)?DO(n,r):(e.flags=e.flags&-4097|2,Ar=!1,Ji=e)}}else{if(o2(e))throw Error(Re(418));e.flags=e.flags&-4097|2,Ar=!1,Ji=e}}}function ZN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ji=e}function Ym(e){if(e!==Ji)return!1;if(!Ar)return ZN(e),Ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!n2(e.type,e.memoizedProps)),t&&(t=Ki)){if(o2(e))throw RO(),Error(Re(418));for(;t;)DO(e,t),t=wl(t.nextSibling)}if(ZN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ki=wl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ki=null}}else Ki=Ji?wl(e.stateNode.nextSibling):null;return!0}function RO(){for(var e=Ki;e;)e=wl(e.nextSibling)}function Pd(){Ki=Ji=null,Ar=!1}function C_(e){qa===null?qa=[e]:qa.push(e)}var aB=Po.ReactCurrentBatchConfig;function Hf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var n=r.stateNode}if(!n)throw Error(Re(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,e))}return e}function Jm(e,t){throw e=Object.prototype.toString.call(t),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function QN(e){var t=e._init;return t(e._payload)}function MO(e){function t(v,_){if(e){var S=v.deletions;S===null?(v.deletions=[_],v.flags|=16):S.push(_)}}function r(v,_){if(!e)return null;for(;_!==null;)t(v,_),_=_.sibling;return null}function n(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Nl(v,_),v.index=0,v.sibling=null,v}function a(v,_,S){return v.index=S,e?(S=v.alternate,S!==null?(S=S.index,S<_?(v.flags|=2,_):S):(v.flags|=2,_)):(v.flags|=1048576,_)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,_,S,j){return _===null||_.tag!==6?(_=S1(S,v.mode,j),_.return=v,_):(_=i(_,S),_.return=v,_)}function c(v,_,S,j){var N=S.type;return N===Zu?d(v,_,S.props.children,j,S.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===il&&QN(N)===_.type)?(j=i(_,S.props),j.ref=Hf(v,_,S),j.return=v,j):(j=Wg(S.type,S.key,S.props,null,v.mode,j),j.ref=Hf(v,_,S),j.return=v,j)}function u(v,_,S,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=N1(S,v.mode,j),_.return=v,_):(_=i(_,S.children||[]),_.return=v,_)}function d(v,_,S,j,N){return _===null||_.tag!==7?(_=Cc(S,v.mode,j,N),_.return=v,_):(_=i(_,S),_.return=v,_)}function f(v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=S1(""+_,v.mode,S),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $m:return S=Wg(_.type,_.key,_.props,null,v.mode,S),S.ref=Hf(v,null,_),S.return=v,S;case Xu:return _=N1(_,v.mode,S),_.return=v,_;case il:var j=_._init;return f(v,j(_._payload),S)}if(lh(_)||Bf(_))return _=Cc(_,v.mode,S,null),_.return=v,_;Jm(v,_)}return null}function p(v,_,S,j){var N=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:o(v,_,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $m:return S.key===N?c(v,_,S,j):null;case Xu:return S.key===N?u(v,_,S,j):null;case il:return N=S._init,p(v,_,N(S._payload),j)}if(lh(S)||Bf(S))return N!==null?null:d(v,_,S,j,null);Jm(v,S)}return null}function h(v,_,S,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(S)||null,o(_,v,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case $m:return v=v.get(j.key===null?S:j.key)||null,c(_,v,j,N);case Xu:return v=v.get(j.key===null?S:j.key)||null,u(_,v,j,N);case il:var A=j._init;return h(v,_,S,A(j._payload),N)}if(lh(j)||Bf(j))return v=v.get(S)||null,d(_,v,j,N,null);Jm(_,j)}return null}function y(v,_,S,j){for(var N=null,A=null,I=_,E=_=0,C=null;I!==null&&E<S.length;E++){I.index>E?(C=I,I=null):C=I.sibling;var D=p(v,I,S[E],j);if(D===null){I===null&&(I=C);break}e&&I&&D.alternate===null&&t(v,I),_=a(D,_,E),A===null?N=D:A.sibling=D,A=D,I=C}if(E===S.length)return r(v,I),Ar&&dc(v,E),N;if(I===null){for(;E<S.length;E++)I=f(v,S[E],j),I!==null&&(_=a(I,_,E),A===null?N=I:A.sibling=I,A=I);return Ar&&dc(v,E),N}for(I=n(v,I);E<S.length;E++)C=h(I,v,E,S[E],j),C!==null&&(e&&C.alternate!==null&&I.delete(C.key===null?E:C.key),_=a(C,_,E),A===null?N=C:A.sibling=C,A=C);return e&&I.forEach(function(T){return t(v,T)}),Ar&&dc(v,E),N}function g(v,_,S,j){var N=Bf(S);if(typeof N!="function")throw Error(Re(150));if(S=N.call(S),S==null)throw Error(Re(151));for(var A=N=null,I=_,E=_=0,C=null,D=S.next();I!==null&&!D.done;E++,D=S.next()){I.index>E?(C=I,I=null):C=I.sibling;var T=p(v,I,D.value,j);if(T===null){I===null&&(I=C);break}e&&I&&T.alternate===null&&t(v,I),_=a(T,_,E),A===null?N=T:A.sibling=T,A=T,I=C}if(D.done)return r(v,I),Ar&&dc(v,E),N;if(I===null){for(;!D.done;E++,D=S.next())D=f(v,D.value,j),D!==null&&(_=a(D,_,E),A===null?N=D:A.sibling=D,A=D);return Ar&&dc(v,E),N}for(I=n(v,I);!D.done;E++,D=S.next())D=h(I,v,E,D.value,j),D!==null&&(e&&D.alternate!==null&&I.delete(D.key===null?E:D.key),_=a(D,_,E),A===null?N=D:A.sibling=D,A=D);return e&&I.forEach(function(O){return t(v,O)}),Ar&&dc(v,E),N}function x(v,_,S,j){if(typeof S=="object"&&S!==null&&S.type===Zu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $m:e:{for(var N=S.key,A=_;A!==null;){if(A.key===N){if(N=S.type,N===Zu){if(A.tag===7){r(v,A.sibling),_=i(A,S.props.children),_.return=v,v=_;break e}}else if(A.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===il&&QN(N)===A.type){r(v,A.sibling),_=i(A,S.props),_.ref=Hf(v,A,S),_.return=v,v=_;break e}r(v,A);break}else t(v,A);A=A.sibling}S.type===Zu?(_=Cc(S.props.children,v.mode,j,S.key),_.return=v,v=_):(j=Wg(S.type,S.key,S.props,null,v.mode,j),j.ref=Hf(v,_,S),j.return=v,v=j)}return s(v);case Xu:e:{for(A=S.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(v,_.sibling),_=i(_,S.children||[]),_.return=v,v=_;break e}else{r(v,_);break}else t(v,_);_=_.sibling}_=N1(S,v.mode,j),_.return=v,v=_}return s(v);case il:return A=S._init,x(v,_,A(S._payload),j)}if(lh(S))return y(v,_,S,j);if(Bf(S))return g(v,_,S,j);Jm(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(v,_.sibling),_=i(_,S),_.return=v,v=_):(r(v,_),_=S1(S,v.mode,j),_.return=v,v=_),s(v)):r(v,_)}return x}var Cd=MO(!0),FO=MO(!1),vv=Ml(null),yv=null,sd=null,O_=null;function T_(){O_=sd=yv=null}function I_(e){var t=vv.current;br(vv),e._currentValue=t}function c2(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vd(e,t){yv=e,O_=sd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ki=!0),e.firstContext=null)}function wa(e){var t=e._currentValue;if(O_!==e)if(e={context:e,memoizedValue:t,next:null},sd===null){if(yv===null)throw Error(Re(308));sd=e,yv.dependencies={lanes:0,firstContext:e}}else sd=sd.next=e;return t}var _c=null;function L_(e){_c===null?_c=[e]:_c.push(e)}function $O(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,L_(t)):(r.next=i.next,i.next=r),t.interleaved=r,xo(e,n)}function xo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var al=!1;function D_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function po(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _l(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Bt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,xo(e,r)}return i=n.interleaved,i===null?(t.next=t,L_(n)):(t.next=i.next,i.next=t),n.interleaved=t,xo(e,r)}function Fg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,b_(e,r)}}function ek(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function xv(e,t,r,n){var i=e.updateQueue;al=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?a=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;s=0,d=u=c=null,o=a;do{var p=o.lane,h=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,g=o;switch(p=t,h=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(h,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(h,f,p):y,p==null)break e;f=Tr({},f,p);break e;case 2:al=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Fc|=s,e.lanes=s,e.memoizedState=f}}function tk(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Re(191,i));i.call(n)}}}var Np={},Ss=Ml(Np),Uh=Ml(Np),qh=Ml(Np);function jc(e){if(e===Np)throw Error(Re(174));return e}function R_(e,t){switch(hr(qh,t),hr(Uh,e),hr(Ss,Np),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zb(t,e)}br(Ss),hr(Ss,t)}function Od(){br(Ss),br(Uh),br(qh)}function UO(e){jc(qh.current);var t=jc(Ss.current),r=zb(t,e.type);t!==r&&(hr(Uh,e),hr(Ss,r))}function M_(e){Uh.current===e&&(br(Ss),br(Uh))}var Cr=Ml(0);function bv(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var y1=[];function F_(){for(var e=0;e<y1.length;e++)y1[e]._workInProgressVersionPrimary=null;y1.length=0}var $g=Po.ReactCurrentDispatcher,x1=Po.ReactCurrentBatchConfig,Mc=0,Or=null,xn=null,Pn=null,wv=!1,bh=!1,zh=0,sB=0;function Zn(){throw Error(Re(321))}function $_(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ya(e[r],t[r]))return!1;return!0}function B_(e,t,r,n,i,a){if(Mc=a,Or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$g.current=e===null||e.memoizedState===null?uB:dB,e=r(n,i),bh){a=0;do{if(bh=!1,zh=0,25<=a)throw Error(Re(301));a+=1,Pn=xn=null,t.updateQueue=null,$g.current=fB,e=r(n,i)}while(bh)}if($g.current=_v,t=xn!==null&&xn.next!==null,Mc=0,Pn=xn=Or=null,wv=!1,t)throw Error(Re(300));return e}function U_(){var e=zh!==0;return zh=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Or.memoizedState=Pn=e:Pn=Pn.next=e,Pn}function _a(){if(xn===null){var e=Or.alternate;e=e!==null?e.memoizedState:null}else e=xn.next;var t=Pn===null?Or.memoizedState:Pn.next;if(t!==null)Pn=t,xn=e;else{if(e===null)throw Error(Re(310));xn=e,e={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Pn===null?Or.memoizedState=Pn=e:Pn=Pn.next=e}return Pn}function Wh(e,t){return typeof t=="function"?t(e):t}function b1(e){var t=_a(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=e;var n=xn,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,c=null,u=a;do{var d=u.lane;if((Mc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,Or.lanes|=d,Fc|=d}u=u.next}while(u!==null&&u!==a);c===null?s=n:c.next=o,Ya(n,t.memoizedState)||(ki=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Or.lanes|=a,Fc|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function w1(e){var t=_a(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Ya(a,t.memoizedState)||(ki=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function qO(){}function zO(e,t){var r=Or,n=_a(),i=t(),a=!Ya(n.memoizedState,i);if(a&&(n.memoizedState=i,ki=!0),n=n.queue,q_(VO.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Pn!==null&&Pn.memoizedState.tag&1){if(r.flags|=2048,Hh(9,HO.bind(null,r,n,i,t),void 0,null),Tn===null)throw Error(Re(349));Mc&30||WO(r,t,i)}return i}function WO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function HO(e,t,r,n){t.value=r,t.getSnapshot=n,KO(t)&&GO(e)}function VO(e,t,r){return r(function(){KO(t)&&GO(e)})}function KO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ya(e,r)}catch{return!0}}function GO(e){var t=xo(e,1);t!==null&&Ka(t,e,1,-1)}function rk(e){var t=gs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wh,lastRenderedState:e},t.queue=e,e=e.dispatch=cB.bind(null,Or,e),[t.memoizedState,e]}function Hh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function YO(){return _a().memoizedState}function Bg(e,t,r,n){var i=gs();Or.flags|=e,i.memoizedState=Hh(1|t,r,void 0,n===void 0?null:n)}function Wy(e,t,r,n){var i=_a();n=n===void 0?null:n;var a=void 0;if(xn!==null){var s=xn.memoizedState;if(a=s.destroy,n!==null&&$_(n,s.deps)){i.memoizedState=Hh(t,r,a,n);return}}Or.flags|=e,i.memoizedState=Hh(1|t,r,a,n)}function nk(e,t){return Bg(8390656,8,e,t)}function q_(e,t){return Wy(2048,8,e,t)}function JO(e,t){return Wy(4,2,e,t)}function XO(e,t){return Wy(4,4,e,t)}function ZO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QO(e,t,r){return r=r!=null?r.concat([e]):null,Wy(4,4,ZO.bind(null,t,e),r)}function z_(){}function e6(e,t){var r=_a();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$_(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function t6(e,t){var r=_a();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$_(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function r6(e,t,r){return Mc&21?(Ya(r,t)||(r=oO(),Or.lanes|=r,Fc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ki=!0),e.memoizedState=r)}function oB(e,t){var r=tr;tr=r!==0&&4>r?r:4,e(!0);var n=x1.transition;x1.transition={};try{e(!1),t()}finally{tr=r,x1.transition=n}}function n6(){return _a().memoizedState}function lB(e,t,r){var n=Sl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},i6(e))a6(t,r);else if(r=$O(e,t,r,n),r!==null){var i=vi();Ka(r,e,n,i),s6(r,t,n)}}function cB(e,t,r){var n=Sl(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(i6(e))a6(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Ya(o,s)){var c=t.interleaved;c===null?(i.next=i,L_(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=$O(e,t,i,n),r!==null&&(i=vi(),Ka(r,e,n,i),s6(r,t,n))}}function i6(e){var t=e.alternate;return e===Or||t!==null&&t===Or}function a6(e,t){bh=wv=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function s6(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,b_(e,r)}}var _v={readContext:wa,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},uB={readContext:wa,useCallback:function(e,t){return gs().memoizedState=[e,t===void 0?null:t],e},useContext:wa,useEffect:nk,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bg(4194308,4,ZO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bg(4,2,e,t)},useMemo:function(e,t){var r=gs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=lB.bind(null,Or,e),[n.memoizedState,e]},useRef:function(e){var t=gs();return e={current:e},t.memoizedState=e},useState:rk,useDebugValue:z_,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=rk(!1),t=e[0];return e=oB.bind(null,e[1]),gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Or,i=gs();if(Ar){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=t(),Tn===null)throw Error(Re(349));Mc&30||WO(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,nk(VO.bind(null,n,a,e),[e]),n.flags|=2048,Hh(9,HO.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=gs(),t=Tn.identifierPrefix;if(Ar){var r=co,n=lo;r=(n&~(1<<32-Va(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=sB++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dB={readContext:wa,useCallback:e6,useContext:wa,useEffect:q_,useImperativeHandle:QO,useInsertionEffect:JO,useLayoutEffect:XO,useMemo:t6,useReducer:b1,useRef:YO,useState:function(){return b1(Wh)},useDebugValue:z_,useDeferredValue:function(e){var t=_a();return r6(t,xn.memoizedState,e)},useTransition:function(){var e=b1(Wh)[0],t=_a().memoizedState;return[e,t]},useMutableSource:qO,useSyncExternalStore:zO,useId:n6,unstable_isNewReconciler:!1},fB={readContext:wa,useCallback:e6,useContext:wa,useEffect:q_,useImperativeHandle:QO,useInsertionEffect:JO,useLayoutEffect:XO,useMemo:t6,useReducer:w1,useRef:YO,useState:function(){return w1(Wh)},useDebugValue:z_,useDeferredValue:function(e){var t=_a();return xn===null?t.memoizedState=e:r6(t,xn.memoizedState,e)},useTransition:function(){var e=w1(Wh)[0],t=_a().memoizedState;return[e,t]},useMutableSource:qO,useSyncExternalStore:zO,useId:n6,unstable_isNewReconciler:!1};function $a(e,t){if(e&&e.defaultProps){t=Tr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function u2(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Tr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hy={isMounted:function(e){return(e=e._reactInternals)?au(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vi(),i=Sl(e),a=po(n,i);a.payload=t,r!=null&&(a.callback=r),t=_l(e,a,i),t!==null&&(Ka(t,e,i,n),Fg(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vi(),i=Sl(e),a=po(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=_l(e,a,i),t!==null&&(Ka(t,e,i,n),Fg(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vi(),n=Sl(e),i=po(r,n);i.tag=2,t!=null&&(i.callback=t),t=_l(e,i,n),t!==null&&(Ka(t,e,n,r),Fg(t,e,n))}};function ik(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Mh(r,n)||!Mh(i,a):!0}function o6(e,t,r){var n=!1,i=Cl,a=t.contextType;return typeof a=="object"&&a!==null?a=wa(a):(i=Ci(t)?Dc:li.current,n=t.contextTypes,a=(n=n!=null)?Ed(e,i):Cl),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hy,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ak(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Hy.enqueueReplaceState(t,t.state,null)}function d2(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},D_(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=wa(a):(a=Ci(t)?Dc:li.current,i.context=Ed(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(u2(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hy.enqueueReplaceState(i,i.state,null),xv(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Td(e,t){try{var r="",n=t;do r+=BF(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function _1(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function f2(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hB=typeof WeakMap=="function"?WeakMap:Map;function l6(e,t,r){r=po(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Sv||(Sv=!0,_2=n),f2(e,t)},r}function c6(e,t,r){r=po(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){f2(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){f2(e,t),typeof n!="function"&&(jl===null?jl=new Set([this]):jl.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function sk(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new hB;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=AB.bind(null,e,t,r),t.then(e,e))}function ok(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lk(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=po(-1,1),t.tag=2,_l(r,t,1))),r.lanes|=1),e)}var pB=Po.ReactCurrentOwner,ki=!1;function pi(e,t,r,n){t.child=e===null?FO(t,null,r,n):Cd(t,e.child,r,n)}function ck(e,t,r,n,i){r=r.render;var a=t.ref;return vd(t,i),n=B_(e,t,r,n,a,i),r=U_(),e!==null&&!ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,bo(e,t,i)):(Ar&&r&&E_(t),t.flags|=1,pi(e,t,n,i),t.child)}function uk(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!X_(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,u6(e,t,a,n,i)):(e=Wg(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Mh,r(s,n)&&e.ref===t.ref)return bo(e,t,i)}return t.flags|=1,e=Nl(a,n),e.ref=t.ref,e.return=t,t.child=e}function u6(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Mh(a,n)&&e.ref===t.ref)if(ki=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(ki=!0);else return t.lanes=e.lanes,bo(e,t,i)}return h2(e,t,r,n,i)}function d6(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(ld,Hi),Hi|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hr(ld,Hi),Hi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,hr(ld,Hi),Hi|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,hr(ld,Hi),Hi|=n;return pi(e,t,i,r),t.child}function f6(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function h2(e,t,r,n,i){var a=Ci(r)?Dc:li.current;return a=Ed(t,a),vd(t,i),r=B_(e,t,r,n,a,i),n=U_(),e!==null&&!ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,bo(e,t,i)):(Ar&&n&&E_(t),t.flags|=1,pi(e,t,r,i),t.child)}function dk(e,t,r,n,i){if(Ci(r)){var a=!0;pv(t)}else a=!1;if(vd(t,i),t.stateNode===null)Ug(e,t),o6(t,r,n),d2(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=wa(u):(u=Ci(r)?Dc:li.current,u=Ed(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&ak(t,s,n,u),al=!1;var p=t.memoizedState;s.state=p,xv(t,n,s,i),c=t.memoizedState,o!==n||p!==c||Pi.current||al?(typeof d=="function"&&(u2(t,r,d,n),c=t.memoizedState),(o=al||ik(t,r,o,n,p,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,BO(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:$a(t.type,o),s.props=u,f=t.pendingProps,p=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=wa(c):(c=Ci(r)?Dc:li.current,c=Ed(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==c)&&ak(t,s,n,c),al=!1,p=t.memoizedState,s.state=p,xv(t,n,s,i);var y=t.memoizedState;o!==f||p!==y||Pi.current||al?(typeof h=="function"&&(u2(t,r,h,n),y=t.memoizedState),(u=al||ik(t,r,u,n,p,y,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,y,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),s.props=n,s.state=y,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return p2(e,t,r,n,a,i)}function p2(e,t,r,n,i,a){f6(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&JN(t,r,!1),bo(e,t,a);n=t.stateNode,pB.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Cd(t,e.child,null,a),t.child=Cd(t,null,o,a)):pi(e,t,o,a),t.memoizedState=n.state,i&&JN(t,r,!0),t.child}function h6(e){var t=e.stateNode;t.pendingContext?YN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&YN(e,t.context,!1),R_(e,t.containerInfo)}function fk(e,t,r,n,i){return Pd(),C_(i),t.flags|=256,pi(e,t,r,n),t.child}var m2={dehydrated:null,treeContext:null,retryLane:0};function g2(e){return{baseLanes:e,cachePool:null,transitions:null}}function p6(e,t,r){var n=t.pendingProps,i=Cr.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),hr(Cr,i&1),e===null)return l2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Gy(s,n,0,null),e=Cc(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=g2(r),t.memoizedState=m2,e):W_(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return mB(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Nl(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Nl(o,a):(a=Cc(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?g2(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=m2,n}return a=e.child,e=a.sibling,n=Nl(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function W_(e,t){return t=Gy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xm(e,t,r,n){return n!==null&&C_(n),Cd(t,e.child,null,r),e=W_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mB(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=_1(Error(Re(422))),Xm(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Gy({mode:"visible",children:n.children},i,0,null),a=Cc(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Cd(t,e.child,null,s),t.child.memoizedState=g2(s),t.memoizedState=m2,a);if(!(t.mode&1))return Xm(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(Re(419)),n=_1(a,n,void 0),Xm(e,t,s,n)}if(o=(s&e.childLanes)!==0,ki||o){if(n=Tn,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,xo(e,i),Ka(n,e,i,-1))}return J_(),n=_1(Error(Re(421))),Xm(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=EB.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ki=wl(i.nextSibling),Ji=t,Ar=!0,qa=null,e!==null&&(ga[va++]=lo,ga[va++]=co,ga[va++]=Rc,lo=e.id,co=e.overflow,Rc=t),t=W_(t,n.children),t.flags|=4096,t)}function hk(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),c2(e.return,t,r)}function j1(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function m6(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(pi(e,t,n.children,r),n=Cr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hk(e,r,t);else if(e.tag===19)hk(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(hr(Cr,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&bv(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),j1(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bv(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}j1(t,!0,r,null,a);break;case"together":j1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ug(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Re(153));if(t.child!==null){for(e=t.child,r=Nl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Nl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gB(e,t,r){switch(t.tag){case 3:h6(t),Pd();break;case 5:UO(t);break;case 1:Ci(t.type)&&pv(t);break;case 4:R_(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;hr(vv,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(hr(Cr,Cr.current&1),t.flags|=128,null):r&t.child.childLanes?p6(e,t,r):(hr(Cr,Cr.current&1),e=bo(e,t,r),e!==null?e.sibling:null);hr(Cr,Cr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return m6(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hr(Cr,Cr.current),n)break;return null;case 22:case 23:return t.lanes=0,d6(e,t,r)}return bo(e,t,r)}var g6,v2,v6,y6;g6=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};v2=function(){};v6=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,jc(Ss.current);var a=null;switch(r){case"input":i=$b(e,i),n=$b(e,n),a=[];break;case"select":i=Tr({},i,{value:void 0}),n=Tr({},n,{value:void 0}),a=[];break;case"textarea":i=qb(e,i),n=qb(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=fv)}Wb(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ch.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ch.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&vr("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};y6=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vf(e,t){if(!Ar)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function vB(e,t,r){var n=t.pendingProps;switch(P_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(t),null;case 1:return Ci(t.type)&&hv(),Qn(t),null;case 3:return n=t.stateNode,Od(),br(Pi),br(li),F_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ym(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qa!==null&&(N2(qa),qa=null))),v2(e,t),Qn(t),null;case 5:M_(t);var i=jc(qh.current);if(r=t.type,e!==null&&t.stateNode!=null)v6(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Re(166));return Qn(t),null}if(e=jc(Ss.current),Ym(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ys]=t,n[Bh]=a,e=(t.mode&1)!==0,r){case"dialog":vr("cancel",n),vr("close",n);break;case"iframe":case"object":case"embed":vr("load",n);break;case"video":case"audio":for(i=0;i<uh.length;i++)vr(uh[i],n);break;case"source":vr("error",n);break;case"img":case"image":case"link":vr("error",n),vr("load",n);break;case"details":vr("toggle",n);break;case"input":_N(n,a),vr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},vr("invalid",n);break;case"textarea":SN(n,a),vr("invalid",n)}Wb(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Gm(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Gm(n.textContent,o,e),i=["children",""+o]):Ch.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&vr("scroll",n)}switch(r){case"input":Bm(n),jN(n,a,!0);break;case"textarea":Bm(n),NN(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=fv)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=VC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[ys]=t,e[Bh]=n,g6(e,t,!1,!1),t.stateNode=e;e:{switch(s=Hb(r,n),r){case"dialog":vr("cancel",e),vr("close",e),i=n;break;case"iframe":case"object":case"embed":vr("load",e),i=n;break;case"video":case"audio":for(i=0;i<uh.length;i++)vr(uh[i],e);i=n;break;case"source":vr("error",e),i=n;break;case"img":case"image":case"link":vr("error",e),vr("load",e),i=n;break;case"details":vr("toggle",e),i=n;break;case"input":_N(e,n),i=$b(e,n),vr("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Tr({},n,{value:void 0}),vr("invalid",e);break;case"textarea":SN(e,n),i=qb(e,n),vr("invalid",e);break;default:i=n}Wb(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?YC(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&KC(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Oh(e,c):typeof c=="number"&&Oh(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ch.hasOwnProperty(a)?c!=null&&a==="onScroll"&&vr("scroll",e):c!=null&&p_(e,a,c,s))}switch(r){case"input":Bm(e),jN(e,n,!1);break;case"textarea":Bm(e),NN(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Pl(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?hd(e,!!n.multiple,a,!1):n.defaultValue!=null&&hd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=fv)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qn(t),null;case 6:if(e&&t.stateNode!=null)y6(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Re(166));if(r=jc(qh.current),jc(Ss.current),Ym(t)){if(n=t.stateNode,r=t.memoizedProps,n[ys]=t,(a=n.nodeValue!==r)&&(e=Ji,e!==null))switch(e.tag){case 3:Gm(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gm(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ys]=t,t.stateNode=n}return Qn(t),null;case 13:if(br(Cr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ar&&Ki!==null&&t.mode&1&&!(t.flags&128))RO(),Pd(),t.flags|=98560,a=!1;else if(a=Ym(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Re(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Re(317));a[ys]=t}else Pd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qn(t),a=!1}else qa!==null&&(N2(qa),qa=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Cr.current&1?wn===0&&(wn=3):J_())),t.updateQueue!==null&&(t.flags|=4),Qn(t),null);case 4:return Od(),v2(e,t),e===null&&Fh(t.stateNode.containerInfo),Qn(t),null;case 10:return I_(t.type._context),Qn(t),null;case 17:return Ci(t.type)&&hv(),Qn(t),null;case 19:if(br(Cr),a=t.memoizedState,a===null)return Qn(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)Vf(a,!1);else{if(wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=bv(e),s!==null){for(t.flags|=128,Vf(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return hr(Cr,Cr.current&1|2),t.child}e=e.sibling}a.tail!==null&&Xr()>Id&&(t.flags|=128,n=!0,Vf(a,!1),t.lanes=4194304)}else{if(!n)if(e=bv(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ar)return Qn(t),null}else 2*Xr()-a.renderingStartTime>Id&&r!==1073741824&&(t.flags|=128,n=!0,Vf(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xr(),t.sibling=null,r=Cr.current,hr(Cr,n?r&1|2:r&1),t):(Qn(t),null);case 22:case 23:return Y_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Hi&1073741824&&(Qn(t),t.subtreeFlags&6&&(t.flags|=8192)):Qn(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function yB(e,t){switch(P_(t),t.tag){case 1:return Ci(t.type)&&hv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Od(),br(Pi),br(li),F_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return M_(t),null;case 13:if(br(Cr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));Pd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return br(Cr),null;case 4:return Od(),null;case 10:return I_(t.type._context),null;case 22:case 23:return Y_(),null;case 24:return null;default:return null}}var Zm=!1,ai=!1,xB=typeof WeakSet=="function"?WeakSet:Set,$e=null;function od(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qr(e,t,n)}else r.current=null}function y2(e,t,r){try{r()}catch(n){qr(e,t,n)}}var pk=!1;function bB(e,t){if(t2=cv,e=jO(),A_(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===i&&(o=s),p===a&&++d===n&&(c=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(r2={focusedElem:e,selectionRange:r},cv=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:$a(t.type,g),x);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(j){qr(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return y=pk,pk=!1,y}function wh(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&y2(t,r,a)}i=i.next}while(i!==n)}}function Vy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function x2(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function x6(e){var t=e.alternate;t!==null&&(e.alternate=null,x6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ys],delete t[Bh],delete t[a2],delete t[rB],delete t[nB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function b6(e){return e.tag===5||e.tag===3||e.tag===4}function mk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||b6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function b2(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=fv));else if(n!==4&&(e=e.child,e!==null))for(b2(e,t,r),e=e.sibling;e!==null;)b2(e,t,r),e=e.sibling}function w2(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(w2(e,t,r),e=e.sibling;e!==null;)w2(e,t,r),e=e.sibling}var Hn=null,Ba=!1;function tl(e,t,r){for(r=r.child;r!==null;)w6(e,t,r),r=r.sibling}function w6(e,t,r){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(Fy,r)}catch{}switch(r.tag){case 5:ai||od(r,t);case 6:var n=Hn,i=Ba;Hn=null,tl(e,t,r),Hn=n,Ba=i,Hn!==null&&(Ba?(e=Hn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Hn.removeChild(r.stateNode));break;case 18:Hn!==null&&(Ba?(e=Hn,r=r.stateNode,e.nodeType===8?g1(e.parentNode,r):e.nodeType===1&&g1(e,r),Dh(e)):g1(Hn,r.stateNode));break;case 4:n=Hn,i=Ba,Hn=r.stateNode.containerInfo,Ba=!0,tl(e,t,r),Hn=n,Ba=i;break;case 0:case 11:case 14:case 15:if(!ai&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&y2(r,t,s),i=i.next}while(i!==n)}tl(e,t,r);break;case 1:if(!ai&&(od(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){qr(r,t,o)}tl(e,t,r);break;case 21:tl(e,t,r);break;case 22:r.mode&1?(ai=(n=ai)||r.memoizedState!==null,tl(e,t,r),ai=n):tl(e,t,r);break;default:tl(e,t,r)}}function gk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xB),t.forEach(function(n){var i=PB.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ra(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Hn=o.stateNode,Ba=!1;break e;case 3:Hn=o.stateNode.containerInfo,Ba=!0;break e;case 4:Hn=o.stateNode.containerInfo,Ba=!0;break e}o=o.return}if(Hn===null)throw Error(Re(160));w6(a,s,i),Hn=null,Ba=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){qr(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_6(t,e),t=t.sibling}function _6(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ra(t,e),us(e),n&4){try{wh(3,e,e.return),Vy(3,e)}catch(g){qr(e,e.return,g)}try{wh(5,e,e.return)}catch(g){qr(e,e.return,g)}}break;case 1:Ra(t,e),us(e),n&512&&r!==null&&od(r,r.return);break;case 5:if(Ra(t,e),us(e),n&512&&r!==null&&od(r,r.return),e.flags&32){var i=e.stateNode;try{Oh(i,"")}catch(g){qr(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&WC(i,a),Hb(o,s);var u=Hb(o,a);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?YC(i,f):d==="dangerouslySetInnerHTML"?KC(i,f):d==="children"?Oh(i,f):p_(i,d,f,u)}switch(o){case"input":Bb(i,a);break;case"textarea":HC(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?hd(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?hd(i,!!a.multiple,a.defaultValue,!0):hd(i,!!a.multiple,a.multiple?[]:"",!1))}i[Bh]=a}catch(g){qr(e,e.return,g)}}break;case 6:if(Ra(t,e),us(e),n&4){if(e.stateNode===null)throw Error(Re(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){qr(e,e.return,g)}}break;case 3:if(Ra(t,e),us(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dh(t.containerInfo)}catch(g){qr(e,e.return,g)}break;case 4:Ra(t,e),us(e);break;case 13:Ra(t,e),us(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(K_=Xr())),n&4&&gk(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ai=(u=ai)||d,Ra(t,e),ai=u):Ra(t,e),us(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for($e=e,d=e.child;d!==null;){for(f=$e=d;$e!==null;){switch(p=$e,h=p.child,p.tag){case 0:case 11:case 14:case 15:wh(4,p,p.return);break;case 1:od(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){qr(n,r,g)}}break;case 5:od(p,p.return);break;case 22:if(p.memoizedState!==null){yk(f);continue}}h!==null?(h.return=p,$e=h):yk(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=GC("display",s))}catch(g){qr(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){qr(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ra(t,e),us(e),n&4&&gk(e);break;case 21:break;default:Ra(t,e),us(e)}}function us(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(b6(r)){var n=r;break e}r=r.return}throw Error(Re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Oh(i,""),n.flags&=-33);var a=mk(e);w2(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=mk(e);b2(e,o,s);break;default:throw Error(Re(161))}}catch(c){qr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wB(e,t,r){$e=e,j6(e)}function j6(e,t,r){for(var n=(e.mode&1)!==0;$e!==null;){var i=$e,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Zm;if(!s){var o=i.alternate,c=o!==null&&o.memoizedState!==null||ai;o=Zm;var u=ai;if(Zm=s,(ai=c)&&!u)for($e=i;$e!==null;)s=$e,c=s.child,s.tag===22&&s.memoizedState!==null?xk(i):c!==null?(c.return=s,$e=c):xk(i);for(;a!==null;)$e=a,j6(a),a=a.sibling;$e=i,Zm=o,ai=u}vk(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,$e=a):vk(e)}}function vk(e){for(;$e!==null;){var t=$e;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ai||Vy(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ai)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:$a(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&tk(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tk(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}ai||t.flags&512&&x2(t)}catch(p){qr(t,t.return,p)}}if(t===e){$e=null;break}if(r=t.sibling,r!==null){r.return=t.return,$e=r;break}$e=t.return}}function yk(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$e=r;break}$e=t.return}}function xk(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vy(4,t)}catch(c){qr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){qr(t,i,c)}}var a=t.return;try{x2(t)}catch(c){qr(t,a,c)}break;case 5:var s=t.return;try{x2(t)}catch(c){qr(t,s,c)}}}catch(c){qr(t,t.return,c)}if(t===e){$e=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$e=o;break}$e=t.return}}var _B=Math.ceil,jv=Po.ReactCurrentDispatcher,H_=Po.ReactCurrentOwner,ba=Po.ReactCurrentBatchConfig,Bt=0,Tn=null,on=null,Kn=0,Hi=0,ld=Ml(0),wn=0,Vh=null,Fc=0,Ky=0,V_=0,_h=null,Ni=null,K_=0,Id=1/0,ro=null,Sv=!1,_2=null,jl=null,Qm=!1,pl=null,Nv=0,jh=0,j2=null,qg=-1,zg=0;function vi(){return Bt&6?Xr():qg!==-1?qg:qg=Xr()}function Sl(e){return e.mode&1?Bt&2&&Kn!==0?Kn&-Kn:aB.transition!==null?(zg===0&&(zg=oO()),zg):(e=tr,e!==0||(e=window.event,e=e===void 0?16:pO(e.type)),e):1}function Ka(e,t,r,n){if(50<jh)throw jh=0,j2=null,Error(Re(185));_p(e,r,n),(!(Bt&2)||e!==Tn)&&(e===Tn&&(!(Bt&2)&&(Ky|=r),wn===4&&ul(e,Kn)),Oi(e,n),r===1&&Bt===0&&!(t.mode&1)&&(Id=Xr()+500,zy&&Fl()))}function Oi(e,t){var r=e.callbackNode;a$(e,t);var n=lv(e,e===Tn?Kn:0);if(n===0)r!==null&&EN(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&EN(r),t===1)e.tag===0?iB(bk.bind(null,e)):IO(bk.bind(null,e)),eB(function(){!(Bt&6)&&Fl()}),r=null;else{switch(lO(n)){case 1:r=x_;break;case 4:r=aO;break;case 16:r=ov;break;case 536870912:r=sO;break;default:r=ov}r=O6(r,S6.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function S6(e,t){if(qg=-1,zg=0,Bt&6)throw Error(Re(327));var r=e.callbackNode;if(yd()&&e.callbackNode!==r)return null;var n=lv(e,e===Tn?Kn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=kv(e,n);else{t=n;var i=Bt;Bt|=2;var a=k6();(Tn!==e||Kn!==t)&&(ro=null,Id=Xr()+500,Pc(e,t));do try{NB();break}catch(o){N6(e,o)}while(!0);T_(),jv.current=a,Bt=i,on!==null?t=0:(Tn=null,Kn=0,t=wn)}if(t!==0){if(t===2&&(i=Jb(e),i!==0&&(n=i,t=S2(e,i))),t===1)throw r=Vh,Pc(e,0),ul(e,n),Oi(e,Xr()),r;if(t===6)ul(e,n);else{if(i=e.current.alternate,!(n&30)&&!jB(i)&&(t=kv(e,n),t===2&&(a=Jb(e),a!==0&&(n=a,t=S2(e,a))),t===1))throw r=Vh,Pc(e,0),ul(e,n),Oi(e,Xr()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Re(345));case 2:fc(e,Ni,ro);break;case 3:if(ul(e,n),(n&130023424)===n&&(t=K_+500-Xr(),10<t)){if(lv(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){vi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=i2(fc.bind(null,e,Ni,ro),t);break}fc(e,Ni,ro);break;case 4:if(ul(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Va(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=Xr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_B(n/1960))-n,10<n){e.timeoutHandle=i2(fc.bind(null,e,Ni,ro),n);break}fc(e,Ni,ro);break;case 5:fc(e,Ni,ro);break;default:throw Error(Re(329))}}}return Oi(e,Xr()),e.callbackNode===r?S6.bind(null,e):null}function S2(e,t){var r=_h;return e.current.memoizedState.isDehydrated&&(Pc(e,t).flags|=256),e=kv(e,t),e!==2&&(t=Ni,Ni=r,t!==null&&N2(t)),e}function N2(e){Ni===null?Ni=e:Ni.push.apply(Ni,e)}function jB(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Ya(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ul(e,t){for(t&=~V_,t&=~Ky,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Va(t),n=1<<r;e[r]=-1,t&=~n}}function bk(e){if(Bt&6)throw Error(Re(327));yd();var t=lv(e,0);if(!(t&1))return Oi(e,Xr()),null;var r=kv(e,t);if(e.tag!==0&&r===2){var n=Jb(e);n!==0&&(t=n,r=S2(e,n))}if(r===1)throw r=Vh,Pc(e,0),ul(e,t),Oi(e,Xr()),r;if(r===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fc(e,Ni,ro),Oi(e,Xr()),null}function G_(e,t){var r=Bt;Bt|=1;try{return e(t)}finally{Bt=r,Bt===0&&(Id=Xr()+500,zy&&Fl())}}function $c(e){pl!==null&&pl.tag===0&&!(Bt&6)&&yd();var t=Bt;Bt|=1;var r=ba.transition,n=tr;try{if(ba.transition=null,tr=1,e)return e()}finally{tr=n,ba.transition=r,Bt=t,!(Bt&6)&&Fl()}}function Y_(){Hi=ld.current,br(ld)}function Pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Q$(r)),on!==null)for(r=on.return;r!==null;){var n=r;switch(P_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hv();break;case 3:Od(),br(Pi),br(li),F_();break;case 5:M_(n);break;case 4:Od();break;case 13:br(Cr);break;case 19:br(Cr);break;case 10:I_(n.type._context);break;case 22:case 23:Y_()}r=r.return}if(Tn=e,on=e=Nl(e.current,null),Kn=Hi=t,wn=0,Vh=null,V_=Ky=Fc=0,Ni=_h=null,_c!==null){for(t=0;t<_c.length;t++)if(r=_c[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}_c=null}return e}function N6(e,t){do{var r=on;try{if(T_(),$g.current=_v,wv){for(var n=Or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wv=!1}if(Mc=0,Pn=xn=Or=null,bh=!1,zh=0,H_.current=null,r===null||r.return===null){wn=1,Vh=t,on=null;break}e:{var a=e,s=r.return,o=r,c=t;if(t=Kn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ok(s);if(h!==null){h.flags&=-257,lk(h,s,o,a,t),h.mode&1&&sk(a,u,t),t=h,c=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){sk(a,u,t),J_();break e}c=Error(Re(426))}}else if(Ar&&o.mode&1){var x=ok(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),lk(x,s,o,a,t),C_(Td(c,o));break e}}a=c=Td(c,o),wn!==4&&(wn=2),_h===null?_h=[a]:_h.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=l6(a,c,t);ek(a,v);break e;case 1:o=c;var _=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jl===null||!jl.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=c6(a,o,t);ek(a,j);break e}}a=a.return}while(a!==null)}E6(r)}catch(N){t=N,on===r&&r!==null&&(on=r=r.return);continue}break}while(!0)}function k6(){var e=jv.current;return jv.current=_v,e===null?_v:e}function J_(){(wn===0||wn===3||wn===2)&&(wn=4),Tn===null||!(Fc&268435455)&&!(Ky&268435455)||ul(Tn,Kn)}function kv(e,t){var r=Bt;Bt|=2;var n=k6();(Tn!==e||Kn!==t)&&(ro=null,Pc(e,t));do try{SB();break}catch(i){N6(e,i)}while(!0);if(T_(),Bt=r,jv.current=n,on!==null)throw Error(Re(261));return Tn=null,Kn=0,wn}function SB(){for(;on!==null;)A6(on)}function NB(){for(;on!==null&&!JF();)A6(on)}function A6(e){var t=C6(e.alternate,e,Hi);e.memoizedProps=e.pendingProps,t===null?E6(e):on=t,H_.current=null}function E6(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=yB(r,t),r!==null){r.flags&=32767,on=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wn=6,on=null;return}}else if(r=vB(r,t,Hi),r!==null){on=r;return}if(t=t.sibling,t!==null){on=t;return}on=t=e}while(t!==null);wn===0&&(wn=5)}function fc(e,t,r){var n=tr,i=ba.transition;try{ba.transition=null,tr=1,kB(e,t,r,n)}finally{ba.transition=i,tr=n}return null}function kB(e,t,r,n){do yd();while(pl!==null);if(Bt&6)throw Error(Re(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(s$(e,a),e===Tn&&(on=Tn=null,Kn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qm||(Qm=!0,O6(ov,function(){return yd(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ba.transition,ba.transition=null;var s=tr;tr=1;var o=Bt;Bt|=4,H_.current=null,bB(e,r),_6(r,e),V$(r2),cv=!!t2,r2=t2=null,e.current=r,wB(r),XF(),Bt=o,tr=s,ba.transition=a}else e.current=r;if(Qm&&(Qm=!1,pl=e,Nv=i),a=e.pendingLanes,a===0&&(jl=null),e$(r.stateNode),Oi(e,Xr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Sv)throw Sv=!1,e=_2,_2=null,e;return Nv&1&&e.tag!==0&&yd(),a=e.pendingLanes,a&1?e===j2?jh++:(jh=0,j2=e):jh=0,Fl(),null}function yd(){if(pl!==null){var e=lO(Nv),t=ba.transition,r=tr;try{if(ba.transition=null,tr=16>e?16:e,pl===null)var n=!1;else{if(e=pl,pl=null,Nv=0,Bt&6)throw Error(Re(331));var i=Bt;for(Bt|=4,$e=e.current;$e!==null;){var a=$e,s=a.child;if($e.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for($e=u;$e!==null;){var d=$e;switch(d.tag){case 0:case 11:case 15:wh(8,d,a)}var f=d.child;if(f!==null)f.return=d,$e=f;else for(;$e!==null;){d=$e;var p=d.sibling,h=d.return;if(x6(d),d===u){$e=null;break}if(p!==null){p.return=h,$e=p;break}$e=h}}}var y=a.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}$e=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,$e=s;else e:for(;$e!==null;){if(a=$e,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wh(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,$e=v;break e}$e=a.return}}var _=e.current;for($e=_;$e!==null;){s=$e;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,$e=S;else e:for(s=_;$e!==null;){if(o=$e,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Vy(9,o)}}catch(N){qr(o,o.return,N)}if(o===s){$e=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,$e=j;break e}$e=o.return}}if(Bt=i,Fl(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(Fy,e)}catch{}n=!0}return n}finally{tr=r,ba.transition=t}}return!1}function wk(e,t,r){t=Td(r,t),t=l6(e,t,1),e=_l(e,t,1),t=vi(),e!==null&&(_p(e,1,t),Oi(e,t))}function qr(e,t,r){if(e.tag===3)wk(e,e,r);else for(;t!==null;){if(t.tag===3){wk(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jl===null||!jl.has(n))){e=Td(r,e),e=c6(t,e,1),t=_l(t,e,1),e=vi(),t!==null&&(_p(t,1,e),Oi(t,e));break}}t=t.return}}function AB(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vi(),e.pingedLanes|=e.suspendedLanes&r,Tn===e&&(Kn&r)===r&&(wn===4||wn===3&&(Kn&130023424)===Kn&&500>Xr()-K_?Pc(e,0):V_|=r),Oi(e,t)}function P6(e,t){t===0&&(e.mode&1?(t=zm,zm<<=1,!(zm&130023424)&&(zm=4194304)):t=1);var r=vi();e=xo(e,t),e!==null&&(_p(e,t,r),Oi(e,r))}function EB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),P6(e,r)}function PB(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Re(314))}n!==null&&n.delete(t),P6(e,r)}var C6;C6=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pi.current)ki=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ki=!1,gB(e,t,r);ki=!!(e.flags&131072)}else ki=!1,Ar&&t.flags&1048576&&LO(t,gv,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ug(e,t),e=t.pendingProps;var i=Ed(t,li.current);vd(t,r),i=B_(null,t,n,e,i,r);var a=U_();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ci(n)?(a=!0,pv(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,D_(t),i.updater=Hy,t.stateNode=i,i._reactInternals=t,d2(t,n,e,r),t=p2(null,t,n,!0,a,r)):(t.tag=0,Ar&&a&&E_(t),pi(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ug(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=OB(n),e=$a(n,e),i){case 0:t=h2(null,t,n,e,r);break e;case 1:t=dk(null,t,n,e,r);break e;case 11:t=ck(null,t,n,e,r);break e;case 14:t=uk(null,t,n,$a(n.type,e),r);break e}throw Error(Re(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:$a(n,i),h2(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:$a(n,i),dk(e,t,n,i,r);case 3:e:{if(h6(t),e===null)throw Error(Re(387));n=t.pendingProps,a=t.memoizedState,i=a.element,BO(e,t),xv(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Td(Error(Re(423)),t),t=fk(e,t,n,r,i);break e}else if(n!==i){i=Td(Error(Re(424)),t),t=fk(e,t,n,r,i);break e}else for(Ki=wl(t.stateNode.containerInfo.firstChild),Ji=t,Ar=!0,qa=null,r=FO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Pd(),n===i){t=bo(e,t,r);break e}pi(e,t,n,r)}t=t.child}return t;case 5:return UO(t),e===null&&l2(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,n2(n,i)?s=null:a!==null&&n2(n,a)&&(t.flags|=32),f6(e,t),pi(e,t,s,r),t.child;case 6:return e===null&&l2(t),null;case 13:return p6(e,t,r);case 4:return R_(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Cd(t,null,n,r):pi(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:$a(n,i),ck(e,t,n,i,r);case 7:return pi(e,t,t.pendingProps,r),t.child;case 8:return pi(e,t,t.pendingProps.children,r),t.child;case 12:return pi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,hr(vv,n._currentValue),n._currentValue=s,a!==null)if(Ya(a.value,s)){if(a.children===i.children&&!Pi.current){t=bo(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=po(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),c2(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Re(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),c2(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}pi(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,vd(t,r),i=wa(i),n=n(i),t.flags|=1,pi(e,t,n,r),t.child;case 14:return n=t.type,i=$a(n,t.pendingProps),i=$a(n.type,i),uk(e,t,n,i,r);case 15:return u6(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:$a(n,i),Ug(e,t),t.tag=1,Ci(n)?(e=!0,pv(t)):e=!1,vd(t,r),o6(t,n,i),d2(t,n,i,r),p2(null,t,n,!0,e,r);case 19:return m6(e,t,r);case 22:return d6(e,t,r)}throw Error(Re(156,t.tag))};function O6(e,t){return iO(e,t)}function CB(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(e,t,r,n){return new CB(e,t,r,n)}function X_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function OB(e){if(typeof e=="function")return X_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g_)return 11;if(e===v_)return 14}return 2}function Nl(e,t){var r=e.alternate;return r===null?(r=ya(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Wg(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")X_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Zu:return Cc(r.children,i,a,t);case m_:s=8,i|=8;break;case Db:return e=ya(12,r,t,i|2),e.elementType=Db,e.lanes=a,e;case Rb:return e=ya(13,r,t,i),e.elementType=Rb,e.lanes=a,e;case Mb:return e=ya(19,r,t,i),e.elementType=Mb,e.lanes=a,e;case UC:return Gy(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $C:s=10;break e;case BC:s=9;break e;case g_:s=11;break e;case v_:s=14;break e;case il:s=16,n=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return t=ya(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Cc(e,t,r,n){return e=ya(7,e,n,t),e.lanes=r,e}function Gy(e,t,r,n){return e=ya(22,e,n,t),e.elementType=UC,e.lanes=r,e.stateNode={isHidden:!1},e}function S1(e,t,r){return e=ya(6,e,null,t),e.lanes=r,e}function N1(e,t,r){return t=ya(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TB(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a1(0),this.expirationTimes=a1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a1(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Z_(e,t,r,n,i,a,s,o,c){return e=new TB(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ya(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},D_(a),e}function IB(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xu,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function T6(e){if(!e)return Cl;e=e._reactInternals;e:{if(au(e)!==e||e.tag!==1)throw Error(Re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ci(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(e.tag===1){var r=e.type;if(Ci(r))return TO(e,r,t)}return t}function I6(e,t,r,n,i,a,s,o,c){return e=Z_(r,n,!0,e,i,a,s,o,c),e.context=T6(null),r=e.current,n=vi(),i=Sl(r),a=po(n,i),a.callback=t??null,_l(r,a,i),e.current.lanes=i,_p(e,i,n),Oi(e,n),e}function Yy(e,t,r,n){var i=t.current,a=vi(),s=Sl(i);return r=T6(r),t.context===null?t.context=r:t.pendingContext=r,t=po(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=_l(i,t,s),e!==null&&(Ka(e,i,s,a),Fg(e,i,s)),s}function Av(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _k(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Q_(e,t){_k(e,t),(e=e.alternate)&&_k(e,t)}function LB(){return null}var L6=typeof reportError=="function"?reportError:function(e){console.error(e)};function e5(e){this._internalRoot=e}Jy.prototype.render=e5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Re(409));Yy(e,t,null,null)};Jy.prototype.unmount=e5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$c(function(){Yy(null,e,null,null)}),t[yo]=null}};function Jy(e){this._internalRoot=e}Jy.prototype.unstable_scheduleHydration=function(e){if(e){var t=dO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cl.length&&t!==0&&t<cl[r].priority;r++);cl.splice(r,0,e),r===0&&hO(e)}};function t5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jk(){}function DB(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Av(s);a.call(u)}}var s=I6(t,n,e,0,null,!1,!1,"",jk);return e._reactRootContainer=s,e[yo]=s.current,Fh(e.nodeType===8?e.parentNode:e),$c(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Av(c);o.call(u)}}var c=Z_(e,0,!1,null,null,!1,!1,"",jk);return e._reactRootContainer=c,e[yo]=c.current,Fh(e.nodeType===8?e.parentNode:e),$c(function(){Yy(t,c,r,n)}),c}function Zy(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var c=Av(s);o.call(c)}}Yy(t,s,e,i)}else s=DB(r,t,e,i,n);return Av(s)}cO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ch(t.pendingLanes);r!==0&&(b_(t,r|1),Oi(t,Xr()),!(Bt&6)&&(Id=Xr()+500,Fl()))}break;case 13:$c(function(){var n=xo(e,1);if(n!==null){var i=vi();Ka(n,e,1,i)}}),Q_(e,1)}};w_=function(e){if(e.tag===13){var t=xo(e,134217728);if(t!==null){var r=vi();Ka(t,e,134217728,r)}Q_(e,134217728)}};uO=function(e){if(e.tag===13){var t=Sl(e),r=xo(e,t);if(r!==null){var n=vi();Ka(r,e,t,n)}Q_(e,t)}};dO=function(){return tr};fO=function(e,t){var r=tr;try{return tr=e,t()}finally{tr=r}};Kb=function(e,t,r){switch(t){case"input":if(Bb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=qy(n);if(!i)throw Error(Re(90));zC(n),Bb(n,i)}}}break;case"textarea":HC(e,r);break;case"select":t=r.value,t!=null&&hd(e,!!r.multiple,t,!1)}};ZC=G_;QC=$c;var RB={usingClientEntryPoint:!1,Events:[Sp,rd,qy,JC,XC,G_]},Kf={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MB={bundleType:Kf.bundleType,version:Kf.version,rendererPackageName:Kf.rendererPackageName,rendererConfig:Kf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rO(e),e===null?null:e.stateNode},findFiberByHostInstance:Kf.findFiberByHostInstance||LB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{Fy=eg.inject(MB),js=eg}catch{}}ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RB;ta.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t5(t))throw Error(Re(200));return IB(e,t,null,r)};ta.createRoot=function(e,t){if(!t5(e))throw Error(Re(299));var r=!1,n="",i=L6;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Z_(e,1,!1,null,null,r,!1,n,i),e[yo]=t.current,Fh(e.nodeType===8?e.parentNode:e),new e5(t)};ta.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=rO(t),e=e===null?null:e.stateNode,e};ta.flushSync=function(e){return $c(e)};ta.hydrate=function(e,t,r){if(!Xy(t))throw Error(Re(200));return Zy(null,e,t,!0,r)};ta.hydrateRoot=function(e,t,r){if(!t5(e))throw Error(Re(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=L6;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=I6(t,null,e,1,r??null,i,!1,a,s),e[yo]=t.current,Fh(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Jy(t)};ta.render=function(e,t,r){if(!Xy(t))throw Error(Re(200));return Zy(null,e,t,!1,r)};ta.unmountComponentAtNode=function(e){if(!Xy(e))throw Error(Re(40));return e._reactRootContainer?($c(function(){Zy(null,null,e,!1,function(){e._reactRootContainer=null,e[yo]=null})}),!0):!1};ta.unstable_batchedUpdates=G_;ta.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xy(r))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return Zy(e,t,r,!1,n)};ta.version="18.3.1-next-f1338f8080-20240426";function D6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D6)}catch(e){console.error(e)}}D6(),DC.exports=ta;var Qy=DC.exports,Sk=Qy;Ib.createRoot=Sk.createRoot,Ib.hydrateRoot=Sk.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kh.apply(this,arguments)}var ml;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ml||(ml={}));const Nk="popstate";function FB(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return k2("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ev(i)}return BB(t,r,null,e)}function tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function r5(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $B(){return Math.random().toString(36).substr(2,8)}function kk(e,t){return{usr:e.state,key:e.key,idx:t}}function k2(e,t,r,n){return r===void 0&&(r=null),Kh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Kd(t):t,{state:r,key:t&&t.key||n||$B()})}function Ev(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Kd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function BB(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=ml.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(Kh({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=ml.Pop;let x=d(),v=x==null?null:x-u;u=x,c&&c({action:o,location:g.location,delta:v})}function p(x,v){o=ml.Push;let _=k2(g.location,x,v);u=d()+1;let S=kk(_,u),j=g.createHref(_);try{s.pushState(S,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(j)}a&&c&&c({action:o,location:g.location,delta:1})}function h(x,v){o=ml.Replace;let _=k2(g.location,x,v);u=d();let S=kk(_,u),j=g.createHref(_);s.replaceState(S,"",j),a&&c&&c({action:o,location:g.location,delta:0})}function y(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof x=="string"?x:Ev(x);return _=_.replace(/ $/,"%20"),tn(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let g={get action(){return o},get location(){return e(i,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Nk,f),c=x,()=>{i.removeEventListener(Nk,f),c=null}},createHref(x){return t(i,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:h,go(x){return s.go(x)}};return g}var Ak;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ak||(Ak={}));function UB(e,t,r){return r===void 0&&(r="/"),qB(e,t,r)}function qB(e,t,r,n){let i=typeof t=="string"?Kd(t):t,a=n5(i.pathname||"/",r);if(a==null)return null;let s=R6(e);zB(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=t9(a);o=ZB(s[c],u)}return o}function R6(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(tn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=kl([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(tn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),R6(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:JB(u,a.index),routesMeta:d})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of M6(a.path))i(a,s,c)}),t}function M6(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=M6(n.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function zB(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:XB(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const WB=/^:[\w-]+$/,HB=3,VB=2,KB=1,GB=10,YB=-2,Ek=e=>e==="*";function JB(e,t){let r=e.split("/"),n=r.length;return r.some(Ek)&&(n+=YB),t&&(n+=VB),r.filter(i=>!Ek(i)).reduce((i,a)=>i+(WB.test(a)?HB:a===""?KB:GB),n)}function XB(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function ZB(e,t,r){let{routesMeta:n}=e,i={},a="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=QB({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:kl([a,f.pathname]),pathnameBase:s9(kl([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=kl([a,f.pathnameBase]))}return s}function QB(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=e9(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let g=o[f]||"";s=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const y=o[f];return h&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:e}}function e9(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),r5(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function t9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return r5(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function n5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const r9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n9=e=>r9.test(e);function i9(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Kd(e):e,a;if(r)if(n9(r))a=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),r5(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?a=Pk(r.substring(1),"/"):a=Pk(r,t)}else a=t;return{pathname:a,search:o9(n),hash:l9(i)}}function Pk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function k1(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a9(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function i5(e,t){let r=a9(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function a5(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Kd(e):(i=Kh({},e),tn(!i.pathname||!i.pathname.includes("?"),k1("?","pathname","search",i)),tn(!i.pathname||!i.pathname.includes("#"),k1("#","pathname","hash",i)),tn(!i.search||!i.search.includes("#"),k1("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=i9(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const kl=e=>e.join("/").replace(/\/\/+/g,"/"),s9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),o9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,l9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function c9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const F6=["post","put","patch","delete"];new Set(F6);const u9=["get",...F6];new Set(u9);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gh.apply(this,arguments)}const s5=b.createContext(null),d9=b.createContext(null),$l=b.createContext(null),e0=b.createContext(null),Is=b.createContext({outlet:null,matches:[],isDataRoute:!1}),$6=b.createContext(null);function f9(e,t){let{relative:r}=t===void 0?{}:t;Gd()||tn(!1);let{basename:n,navigator:i}=b.useContext($l),{hash:a,pathname:s,search:o}=U6(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:kl([n,s])),i.createHref({pathname:c,search:o,hash:a})}function Gd(){return b.useContext(e0)!=null}function su(){return Gd()||tn(!1),b.useContext(e0).location}function B6(e){b.useContext($l).static||b.useLayoutEffect(e)}function _i(){let{isDataRoute:e}=b.useContext(Is);return e?A9():h9()}function h9(){Gd()||tn(!1);let e=b.useContext(s5),{basename:t,future:r,navigator:n}=b.useContext($l),{matches:i}=b.useContext(Is),{pathname:a}=su(),s=JSON.stringify(i5(i,r.v7_relativeSplatPath)),o=b.useRef(!1);return B6(()=>{o.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=a5(u,JSON.parse(s),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:kl([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,a,e])}const p9=b.createContext(null);function m9(e){let t=b.useContext(Is).outlet;return t&&b.createElement(p9.Provider,{value:e},t)}function ou(){let{matches:e}=b.useContext(Is),t=e[e.length-1];return t?t.params:{}}function U6(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=b.useContext($l),{matches:i}=b.useContext(Is),{pathname:a}=su(),s=JSON.stringify(i5(i,n.v7_relativeSplatPath));return b.useMemo(()=>a5(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function g9(e,t){return v9(e,t)}function v9(e,t,r,n){Gd()||tn(!1);let{navigator:i}=b.useContext($l),{matches:a}=b.useContext(Is),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=su(),d;if(t){var f;let x=typeof t=="string"?Kd(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||tn(!1),d=x}else d=u;let p=d.pathname||"/",h=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=UB(e,{pathname:h}),g=_9(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:kl([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:kl([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,n);return t&&g?b.createElement(e0.Provider,{value:{location:Gh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ml.Pop}},g):g}function y9(){let e=k9(),t=c9(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:i},r):null,null)}const x9=b.createElement(y9,null);class b9 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(Is.Provider,{value:this.props.routeContext},b.createElement($6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w9(e){let{routeContext:t,match:r,children:n}=e,i=b.useContext(s5);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(Is.Provider,{value:t},n)}function _9(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||tn(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=r,y=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let h,y=!1,g=null,x=null;r&&(h=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||x9,c&&(u<0&&p===0?(E9("route-fallback"),y=!0,x=null):u===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,p+1)),_=()=>{let S;return h?S=g:y?S=x:f.route.Component?S=b.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,b.createElement(w9,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?b.createElement(b9,{location:r.location,revalidation:r.revalidation,component:g,error:h,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var q6=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(q6||{}),z6=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(z6||{});function j9(e){let t=b.useContext(s5);return t||tn(!1),t}function S9(e){let t=b.useContext(d9);return t||tn(!1),t}function N9(e){let t=b.useContext(Is);return t||tn(!1),t}function W6(e){let t=N9(),r=t.matches[t.matches.length-1];return r.route.id||tn(!1),r.route.id}function k9(){var e;let t=b.useContext($6),r=S9(),n=W6();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function A9(){let{router:e}=j9(q6.UseNavigateStable),t=W6(z6.UseNavigateStable),r=b.useRef(!1);return B6(()=>{r.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Gh({fromRouteId:t},a)))},[e,t])}const Ck={};function E9(e,t,r){Ck[e]||(Ck[e]=!0)}function P9(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function A2(e){let{to:t,replace:r,state:n,relative:i}=e;Gd()||tn(!1);let{future:a,static:s}=b.useContext($l),{matches:o}=b.useContext(Is),{pathname:c}=su(),u=_i(),d=a5(t,i5(o,a.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:i}),[u,f,i,r,n]),null}function H6(e){return m9(e.context)}function Dt(e){tn(!1)}function C9(e){let{basename:t="/",children:r=null,location:n,navigationType:i=ml.Pop,navigator:a,static:s=!1,future:o}=e;Gd()&&tn(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:s,future:Gh({v7_relativeSplatPath:!1},o)}),[c,o,a,s]);typeof n=="string"&&(n=Kd(n));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:y="default"}=n,g=b.useMemo(()=>{let x=n5(d,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:y},navigationType:i}},[c,d,f,p,h,y,i]);return g==null?null:b.createElement($l.Provider,{value:u},b.createElement(e0.Provider,{children:r,value:g}))}function O9(e){let{children:t,location:r}=e;return g9(E2(t),r)}new Promise(()=>{});function E2(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,i)=>{if(!b.isValidElement(n))return;let a=[...t,i];if(n.type===b.Fragment){r.push.apply(r,E2(n.props.children,a));return}n.type!==Dt&&tn(!1),!n.props.index||!n.props.children||tn(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=E2(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function P2(){return P2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P2.apply(this,arguments)}function T9(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function I9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function L9(e,t){return e.button===0&&(!t||t==="_self")&&!I9(e)}function C2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function D9(e,t){let r=C2(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}const R9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],M9="6";try{window.__reactRouterVersion=M9}catch{}const F9="startTransition",Ok=IC[F9];function $9(e){let{basename:t,children:r,future:n,window:i}=e,a=b.useRef();a.current==null&&(a.current=FB({window:i,v5Compat:!0}));let s=a.current,[o,c]=b.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=b.useCallback(f=>{u&&Ok?Ok(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>s.listen(d),[s,d]),b.useEffect(()=>P9(n),[n]),b.createElement(C9,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const B9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pr=b.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=T9(t,R9),{basename:h}=b.useContext($l),y,g=!1;if(typeof u=="string"&&U9.test(u)&&(y=u,B9))try{let S=new URL(window.location.href),j=u.startsWith("//")?new URL(S.protocol+u):new URL(u),N=n5(j.pathname,h);j.origin===S.origin&&N!=null?u=N+j.search+j.hash:g=!0}catch{}let x=f9(u,{relative:i}),v=q9(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:f});function _(S){n&&n(S),S.defaultPrevented||v(S)}return b.createElement("a",P2({},p,{href:y||x,onClick:g||a?n:_,ref:r,target:c}))});var Tk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tk||(Tk={}));var Ik;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ik||(Ik={}));function q9(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}=t===void 0?{}:t,c=_i(),u=su(),d=U6(e,{relative:s});return b.useCallback(f=>{if(L9(f,r)){f.preventDefault();let p=n!==void 0?n:Ev(u)===Ev(d);c(e,{replace:p,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,c,d,n,i,r,e,a,s,o])}function z9(e){let t=b.useRef(C2(e)),r=b.useRef(!1),n=su(),i=b.useMemo(()=>D9(n.search,r.current?null:t.current),[n.search]),a=_i(),s=b.useCallback((o,c)=>{const u=C2(typeof o=="function"?o(i):o);r.current=!0,a("?"+u,c)},[a,i]);return[i,s]}function t0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function W9(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}const H9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class o5 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class V9 extends o5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lk extends o5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Dk extends o5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var O2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(O2||(O2={}));class K9{constructor(t,{headers:r={},customFetch:n,region:i=O2.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=H9(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return W9(this,arguments,void 0,function*(r,n={}){var i;let a,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let p={},{region:h}=n;h||(h=this.region);const y=new URL(`${this.url}/${r}`);h&&h!=="any"&&(p["x-region"]=h,y.searchParams.set("forceFunctionRegion",h));let g;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(p["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(p["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let x=d;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const v=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:g,signal:x}).catch(N=>{throw new V9(N)}),_=v.headers.get("x-relay-error");if(_&&_==="true")throw new Lk(v);if(!v.ok)throw new Dk(v);let S=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield v.json():S==="application/octet-stream"||S==="application/pdf"?j=yield v.blob():S==="text/event-stream"?j=v:S==="multipart/form-data"?j=yield v.formData():j=yield v.text(),{data:j,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof Dk||o instanceof Lk?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var G9=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Y9=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let s=null,o=null,c=null,u=a.status,d=a.statusText;if(a.ok){var f,p;if(r.method!=="HEAD"){var h;const v=await a.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?o=v:o=JSON.parse(v))}const g=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(p=a.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");g&&x&&x.length>1&&(c=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,u=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var y;const g=await a.text();try{s=JSON.parse(g),Array.isArray(s)&&a.status===404&&(o=[],s=null,u=200,d="OK")}catch{a.status===404&&g===""?(u=204,d="No Content"):s={message:g}}if(s&&r.isMaybeSingle&&(!(s==null||(y=s.details)===null||y===void 0)&&y.includes("0 rows"))&&(s=null,u=200,d="OK"),s&&r.shouldThrowOnError)throw new G9(s)}return{error:s,data:o,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(i=i.catch(a=>{var s;let o="";const c=a==null?void 0:a.cause;if(c){var u,d,f,p;const y=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";o=`${(f=a==null?void 0:a.name)!==null&&f!==void 0?f:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${y}`,g&&(o+=` (${g})`),c!=null&&c.stack&&(o+=`
${c.stack}`)}else{var h;o=(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},J9=class extends Y9{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var s;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Rk=new RegExp("[,()]");var Hu=class extends J9{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Rk.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Rk.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},X9=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},i=r?"HEAD":"GET";let a=!1;const s=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:o,headers:c}=this.cloneRequestState();return o.searchParams.set("select",s),n&&c.append("Prefer",`count=${n}`),new Hu({method:i,url:o,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const i="POST",{url:a,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),r||s.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new Hu({method:i,url:a,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;const s="POST",{url:o,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);o.searchParams.set("columns",d.join(","))}}return new Hu({method:s,url:o,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Hu({method:n,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Hu({method:r,url:n,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Z9=class V6{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new X9(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new V6(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var s;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(d)),f=n&&Object.values(r).some(d);f?(o="POST",u=r):n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([h,y])=>y!==void 0).map(([h,y])=>[h,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([h,y])=>{c.searchParams.append(h,y)})):(o="POST",u=r);const p=new Headers(this.headers);return f?p.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&p.set("Prefer",`count=${a}`),new Hu({method:o,url:c,headers:p,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};class Q9{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const eU="2.93.2",tU=`realtime-js/${eU}`,rU="1.0.0",K6="2.0.0",Mk=K6,T2=1e4,nU=1e3,iU=100;var sl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(sl||(sl={}));var yn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yn||(yn={}));var Ua;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ua||(Ua={}));var I2;(function(e){e.websocket="websocket"})(I2||(I2={}));var yc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yc||(yc={}));class aU{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var i,a;const s=t.topic,o=(i=t.ref)!==null&&i!==void 0?i:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let y=new DataView(h),g=0;y.setUint8(g++,this.KINDS.userBroadcastPush),y.setUint8(g++,c.length),y.setUint8(g++,o.length),y.setUint8(g++,s.length),y.setUint8(g++,u.length),y.setUint8(g++,f.length),y.setUint8(g++,r),Array.from(c,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(s,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(f,v=>y.setUint8(g++,v.charCodeAt(0)));var x=new Uint8Array(h.byteLength+n.byteLength);return x.set(new Uint8Array(h),0),x.set(new Uint8Array(n),h.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,a,s,o,c]=n;return r({join_ref:i,ref:a,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+i));c=c+i;const d=n.decode(t.slice(c,c+a));c=c+a;const f=n.decode(t.slice(c,c+s));c=c+s;const p=t.slice(c,t.byteLength),h=o===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,y={type:this.BROADCAST_EVENT,event:d,payload:h};return s>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class G6{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(dr||(dr={}));const Fk=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=sU(s,e,t,i),a),{}):{}},sU=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?Y6(a,s):L2(s)},Y6=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return uU(t,r)}switch(e){case dr.bool:return oU(t);case dr.float4:case dr.float8:case dr.int2:case dr.int4:case dr.int8:case dr.numeric:case dr.oid:return lU(t);case dr.json:case dr.jsonb:return cU(t);case dr.timestamp:return dU(t);case dr.abstime:case dr.date:case dr.daterange:case dr.int4range:case dr.int8range:case dr.money:case dr.reltime:case dr.text:case dr.time:case dr.timestamptz:case dr.timetz:case dr.tsrange:case dr.tstzrange:return L2(t);default:return L2(t)}},L2=e=>e,oU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},uU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>Y6(t,o))}return e},dU=e=>typeof e=="string"?e.replace(" ","T"):e,J6=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class A1{constructor(t,r,n={},i=T2){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $k;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($k||($k={}));class Sh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sh.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=Sh.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Sh.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(a,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=a[u];if(f){const p=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),y=d.filter(x=>h.indexOf(x.presence_ref)<0),g=f.filter(x=>p.indexOf(x.presence_ref)<0);y.length>0&&(o[u]=y),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);t[o].unshift(...p)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bk||(Bk={}));var Nh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nh||(Nh={}));var no;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(no||(no={}));class cd{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new A1(this,Ua.join,this.params,this.timeout),this.rejoinTimer=new G6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ua.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Sh(this),this.broadcastEndpointURL=J6(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==yn.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Nh.PRESENCE]&&this.bindings[Nh.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(no.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(no.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(no.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let _=0;_<x;_++){const S=g[_],{filter:{event:j,schema:N,table:A,filter:I}}=S,E=h&&h[_];if(E&&E.event===j&&cd.isFilterValueEqual(E.schema,N)&&cd.isFilterValueEqual(E.table,A)&&cd.isFilterValueEqual(E.filter,I))v.push(Object.assign(Object.assign({},S),{id:E.id}));else{this.unsubscribe(),this.state=yn.errored,t==null||t(no.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(no.SUBSCRIBED);return}}).receive("error",h=>{this.state=yn.errored,t==null||t(no.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(no.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===yn.joined&&t===Nh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ua.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new A1(this,Ua.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new A1(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>iU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=Ua;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let p=this._onMessage(s,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var y,g,x;return((y=h.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(g=h.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(p,n)):(a=this.bindings[s])===null||a===void 0||a.filter(h=>{var y,g,x,v,_,S;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const j=h.id,N=(y=h.filter)===null||y===void 0?void 0:y.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(_=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return j==="*"||j===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:x,commit_timestamp:v,type:_,errors:S}=y;p=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:v,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(y))}h.callback(p,n)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&cd.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ua.close,{},t)}_onError(t){this._on(Ua.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Fk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Fk(t.columns,t.old_record)),r}}const E1=()=>{},tg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fU=[1e3,2e3,5e3,1e4],hU=1e4,pU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=T2,this.transport=null,this.heartbeatIntervalMs=tg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=E1,this.ref=0,this.reconnectTimer=null,this.vsn=Mk,this.logger=E1,this.conn=null,this.sendBuffer=[],this.serializer=new aU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${I2.websocket}`,this.httpEndpoint=J6(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Q9.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case sl.connecting:return yc.Connecting;case sl.open:return yc.Open;case sl.closing:return yc.Closing;default:return yc.Closed}}isConnected(){return this.connectionState()===yc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new cd(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(nU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},tg.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:a,ref:s}=r,o=s?`(${s})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===sl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===sl.open||this.conn.readyState===sl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ua.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([pU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:tU};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Ua.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new G6(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},tg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,o,c,u,d,f,p,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:T2,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:tg.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:E1,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Mk,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>fU[y-1]||hU,this.vsn){case rU:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,g)=>g(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,g)=>g(JSON.parse(y));break;case K6:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Yh=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function gU(e,t,r){const n=new URL(t,e);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function vU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function yU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:s}){const o=gU(e.baseUrl,n,i),c=await vU(e.auth),u=await t(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...s},body:a?JSON.stringify(a):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&d?JSON.parse(d):d;if(!u.ok){const h=f?p:void 0,y=h==null?void 0:h.error;throw new Yh((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function rg(e){return e.join("")}var xU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:rg(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rg(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rg(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rg(e.namespace)}`}),!0}catch(t){if(t instanceof Yh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Yh&&r.status===409)return;throw r}}};function Tu(e){return e.join("")}var bU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Tu(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Tu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Tu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Tu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Yh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Yh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},wU=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=yU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new xU(this.client,t),this.tableOps=new bU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},r0=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function n0(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ng=class extends r0{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},X6=class extends r0{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const _U=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),jU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},D2=e=>{if(Array.isArray(e))return e.map(r=>D2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=D2(n)}),t},SU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function NU(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kU(e){var t=NU(e,"string");return Jh(t)=="symbol"?t:t+""}function AU(e,t,r){return(t=kU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const qk=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},EU=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e,a=i.status||500;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new ng(qk(s),a,o,n))}).catch(()=>{if(n==="vectors"){const s=a+"";t(new ng(i.statusText||`HTTP ${a} error`,a,s,n))}else{const s=a+"";t(new ng(i.statusText||`HTTP ${a} error`,a,s,n))}});else{const s=a+"";t(new ng(i.statusText||`HTTP ${a} error`,a,s,n))}}else t(new X6(qk(e),e,n))},PU=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?pt(pt({},i),r):(jU(n)?(i.headers=pt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),pt(pt({},i),r))};async function Gf(e,t,r,n,i,a,s){return new Promise((o,c)=>{e(r,PU(t,n,i,a)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(s==="vectors"){const d=u.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>o(u)).catch(u=>EU(u,c,n,s))})}function CU(e="storage"){return{get:async(t,r,n,i)=>Gf(t,"GET",r,n,i,void 0,e),post:async(t,r,n,i,a)=>Gf(t,"POST",r,i,a,n,e),put:async(t,r,n,i,a)=>Gf(t,"PUT",r,i,a,n,e),head:async(t,r,n,i)=>Gf(t,"HEAD",r,pt(pt({},n),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,r,n,i,a)=>Gf(t,"DELETE",r,i,a,n,e)}}const OU=CU("storage"),{get:Xh,post:Nr,put:R2,head:TU,remove:l5}=OU;var Yd=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=_U(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(n0(r))return{data:null,error:r};throw r}}},IU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(n0(t))return{data:null,error:t};throw t}}};let Z6;Z6=Symbol.toStringTag;var LU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Z6]="BlobDownloadBuilder",this.promise=null}asStream(){return new IU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(n0(t))return{data:null,error:t};throw t}}};const DU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var RU=class extends Yd{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var i=this;return i.handleOperation(async()=>{let a;const s=pt(pt({},zk),n);let o=pt(pt({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",i.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),c&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(c))):(a=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),n!=null&&n.headers&&(o=pt(pt({},o),n.headers));const u=i._removeEmptyFolders(t),d=i._getFinalPath(u),f=await(e=="PUT"?R2:Nr)(i.fetch,`${i.url}/object/${d}`,a,pt({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var i=this;const a=i._removeEmptyFolders(e),s=i._getFinalPath(a),o=new URL(i.url+`/object/upload/sign/${s}`);return o.searchParams.set("token",t),i.handleOperation(async()=>{let c;const u=pt({upsert:zk.upsert},n),d=pt(pt({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:a,fullPath:(await R2(i.fetch,o.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const i=pt({},r.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=await Nr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(r.url+a.url),o=s.searchParams.get("token");if(!o)throw new r0("No token returned by API");return{signedUrl:s.toString(),path:e,token:o}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Nr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Nr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e),a=await Nr(n.fetch,`${n.url}/object/sign/${i}`,pt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${s}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const i=await Nr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i.map(s=>pt(pt({},s),{},{signedUrl:s.signedURL?encodeURI(`${n.url}${s.signedURL}${a}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=n?`?${n}`:"",a=this._getFinalPath(e),s=()=>Xh(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new LU(s,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>D2(await Xh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await TU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(n0(n)&&n instanceof X6){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});s!==""&&n.push(s);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await l5(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const i=pt(pt(pt({},DU),t),{},{prefix:e||""});return await Nr(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=pt({},e);return await Nr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const MU="2.93.2",kp={"X-Client-Info":`storage-js/${MU}`};var FU=class extends Yd{constructor(e,t={},r,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),s=pt(pt({},kp),t);super(a,s,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Xh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Xh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await R2(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await l5(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},$U=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=pt(pt({},kp),t);super(n,i,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Xh(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await l5(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!SU(e))throw new r0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new wU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const s=i[a];return typeof s!="function"?s:async(...o)=>{try{return{data:await s.apply(i,o),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},BU=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=pt(pt({},kp),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},UU=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=pt(pt({},kp),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},qU=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=pt(pt({},kp),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},zU=class extends qU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new WU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},WU=class extends BU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new HU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},HU=class extends UU{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,pt(pt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},VU=class extends FU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new RU(this.url,this.headers,e,this.fetch)}get vectors(){return new zU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $U(this.url+"/iceberg",this.headers,this.fetch)}};const Q6="2.93.2",Vu=30*1e3,M2=3,P1=M2*Vu,KU="http://localhost:9999",GU="supabase.auth.token",YU={"X-Client-Info":`gotrue-js/${Q6}`},F2="X-Supabase-Api-Version",eT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XU=10*60*1e3;class Zh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ZU extends Zh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function QU(e){return nt(e)&&e.name==="AuthApiError"}class xc extends Zh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Co extends Zh{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Wi extends Co{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function C1(e){return nt(e)&&e.name==="AuthSessionMissingError"}class Iu extends Co{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ig extends Co{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ag extends Co{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eq(e){return nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Wk extends Co{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tq extends Co{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class $2 extends Co{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function O1(e){return nt(e)&&e.name==="AuthRetryableFetchError"}class Hk extends Co{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class B2 extends Co{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vk=` 	
\r=`.split(""),rq=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vk.length;t+=1)e[Vk[t].charCodeAt(0)]=-2;for(let t=0;t<Pv.length;t+=1)e[Pv[t].charCodeAt(0)]=t;return e})();function Kk(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Pv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Pv[n]),t.queuedBits-=6}}function tT(e,t,r){const n=rq[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Gk(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{aq(s,n,r)};for(let s=0;s<e.length;s+=1)tT(e.charCodeAt(s),i,a);return t.join("")}function nq(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function iq(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}nq(n,t)}}function aq(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function xd(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)tT(e.charCodeAt(i),r,n);return new Uint8Array(t)}function sq(e){const t=[];return iq(e,r=>t.push(r)),new Uint8Array(t)}function Sc(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Kk(i,r,n)),Kk(null,r,n),t.join("")}function oq(e){return Math.round(Date.now()/1e3)+e}function lq(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",lc={tested:!1,writable:!1},rT=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lc.tested)return lc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lc.tested=!0,lc.writable=!0}catch{lc.tested=!0,lc.writable=!1}return lc.writable};function cq(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const nT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uq=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ku=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},cc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qn=async(e,t)=>{await e.removeItem(t)};class i0{constructor(){this.promise=new i0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}i0.promiseConstructor=Promise;function sg(e){const t=e.split(".");if(t.length!==3)throw new B2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!JU.test(t[n]))throw new B2("JWT not in base64url format");return{header:JSON.parse(Gk(t[0])),payload:JSON.parse(Gk(t[1])),signature:xd(t[2]),raw:{header:t[0],payload:t[1]}}}async function dq(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function fq(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function hq(e){return("0"+e.toString(16)).substr(-2)}function pq(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,hq).join("")}async function mq(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function gq(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mq(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lu(e,t,r=!1){const n=pq();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ku(e,`${t}-code-verifier`,i);const a=await gq(n);return[a,n===a?"plain":"s256"]}const vq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yq(e){const t=e.headers.get(F2);if(!t||!t.match(vq))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function xq(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function bq(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Du(e){if(!wq.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function T1(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _q(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function Yk(e){return JSON.parse(JSON.stringify(e))}const hc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jq=[502,503,504];async function Jk(e){var t;if(!uq(e))throw new $2(hc(e),0);if(jq.includes(e.status))throw new $2(hc(e),e.status);let r;try{r=await e.json()}catch(a){throw new xc(hc(a),a)}let n;const i=yq(e);if(i&&i.getTime()>=eT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hk(hc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Wi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Hk(hc(r),e.status,r.weak_password.reasons);throw new ZU(hc(r),e.status||500,n)}const Sq=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function dt(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[F2]||(a[F2]=eT["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await Nq(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Nq(e,t,r,n,i,a){const s=Sq(t,n,i,a);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new $2(hc(c),0)}if(o.ok||await Jk(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Jk(c)}}function Fa(e){var t;let r=null;Eq(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=oq(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Xk(e){const t=Fa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function dl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kq(e){return{data:e,error:null}}function Aq(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=t0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function Zk(e){return e}function Eq(e){return e.access_token&&e.refresh_token&&e.expires_in}const I1=["global","local","others"];class Pq{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=nT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=I1[0]){if(I1.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${I1.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:dl})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=t0(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Aq,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dl})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Zk});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(nt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Du(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dl})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Du(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:dl})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Du(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:dl})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Du(t.userId);try{const{data:r,error:n}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Du(t.userId),Du(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Zk});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(nt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function Qk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ru={debug:!!(globalThis&&rT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Cq extends iT{}async function Oq(e,t,r){Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Cq(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ru.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Tq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Iq(e){return parseInt(e,16)}function Lq(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Dq(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=aT(e.address),y=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",x=`${y} wants you to sign in with your Ethereum account:
${h}

${g}`;let v=`URI: ${f}
Version: ${p}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),o&&(v+=`
Not Before: ${o.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let _=`
Resources:`;for(const S of u){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);_+=`
- ${S}`}v+=_}return`${x}
${v}`}class sn extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Cv extends sn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Rq({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(sT(s)){if(a.rp.id!==s)return new sn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Mq({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(sT(n)){if(r.rpId!==n)return new sn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Fq{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const $q=new Fq;function Bq(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=t0(e,["challenge","user","excludeCredentials"]),a=xd(t).buffer,s=Object.assign(Object.assign({},r),{id:xd(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:xd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Uq(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=t0(e,["challenge","allowCredentials"]),i=xd(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:xd(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function qq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Sc(new Uint8Array(e.response.attestationObject)),clientDataJSON:Sc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function zq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Sc(new Uint8Array(i.authenticatorData)),clientDataJSON:Sc(new Uint8Array(i.clientDataJSON)),signature:Sc(new Uint8Array(i.signature)),userHandle:i.userHandle?Sc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function sT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function eA(){var e,t;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Wq(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cv("Browser returned unexpected credential type",t)}:{data:null,error:new Cv("Empty credential response",t)}}catch(t){return{data:null,error:Rq({error:t,options:e})}}}async function Hq(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cv("Browser returned unexpected credential type",t)}:{data:null,error:new Cv("Empty credential response",t)}}catch(t){return{data:null,error:Mq({error:t,options:e})}}}const Vq={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Kq={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ov(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const o=n[a];t(o)?n[a]=Ov(o,s):n[a]=Ov(s)}else n[a]=s}return n}function Gq(e,t){return Ov(Vq,e,t||{})}function Yq(e,t){return Ov(Kq,e,t||{})}class Jq{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=i??$q.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=Gq(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:f}=await Wq({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=Yq(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:f}=await Hq(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Zh("rpId is required for WebAuthn authentication")};try{if(!eA())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Zh("rpId is required for WebAuthn registration")};try{if(!eA())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in register",s)}}}}Tq();const Xq={url:KU,storageKey:GU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function tA(e,t,r){return await r()}const Mu={};class Qh{get jwks(){var t,r;return(r=(t=Mu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Mu[this.storageKey]=Object.assign(Object.assign({},Mu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Mu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Mu[this.storageKey]=Object.assign(Object.assign({},Mu[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Xq),t);if(this.storageKey=a.storageKey,this.instanceID=(r=Qh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&zn()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Pq({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=nT(a.fetch),this.lock=a.lock||tA,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&zn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Oq:this.lock=tA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:rT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qk(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Qk(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s);try{await this._notifyAllSubscribers(s.data.event,s.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(s=>{this._debug("#initialize()","error",s)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Q6}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(zn()&&(r=cq(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),zn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),eq(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?this._returnResult({error:r}):this._returnResult({error:new xc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Fa}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(nt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:d,password:f,options:p}=t;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await Lu(this.storage,this.storageKey)),a=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:y},xform:Fa})}else if("phone"in t){const{phone:d,password:f,options:p}=t;a=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Fa})}else throw new ig("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await qn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:o}=t;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xk})}else if("phone"in t){const{phone:a,password:s,options:o}=t;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xk})}else throw new ig("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Iu;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,o,c,u,d,f,p;let h,y;if("message"in t)h=t.message,y=t.signature;else{const{chain:g,wallet:x,statement:v,options:_}=t;let S;if(zn())if(typeof x=="object")S=x;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")S=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const j=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href),N=await S.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=aT(N[0]);let I=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const C=await S.request({method:"eth_chainId"});I=Iq(C)}const E={domain:j.host,address:A,statement:v,uri:j.href,version:"1",chainId:I,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=Dq(E),y=await S.request({method:"personal_sign",params:[Lq(h),A]})}try{const{data:g,error:x}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Fa});if(x)throw x;if(!g||!g.session||!g.user){const v=new Iu;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:x})}catch(g){if(nt(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,i,a,s,o,c,u,d,f,p,h;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:x,wallet:v,statement:_,options:S}=t;let j;if(zn())if(typeof v=="object")j=v;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))j=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=v}const N=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const A=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),_?{statement:_}:null));let I;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")I=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)I=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)y=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),g=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(d=S==null?void 0:S.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const A=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:x,error:v}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Sc(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Fa});if(v)throw v;if(!x||!x.session||!x.user){const _=new Iu;return this._returnResult({data:{user:null,session:null},error:_})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(nt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await cc(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new tq;const{data:a,error:s}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Fa});if(await qn(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new Iu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,o=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Fa}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Iu;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Lu(this.storage,this.storageKey));const{error:f}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new ig("You must provide either an email or phone number.")}catch(o){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Fa});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,a,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Lu(this.storage,this.storageKey));const u=await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:kq});return!((a=u.data)===null||a===void 0)&&a.url&&zn()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Wi;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(nt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:o}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new ig("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await cc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<P1:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await cc(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=T1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=_q(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dl}):await this._useSession(async r=>{var n,i,a;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wi}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:dl})})}catch(r){if(nt(r))return C1(r)&&(await this._removeSession(),await qn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Wi;const s=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Lu(this.storage,this.storageKey));const{data:u,error:d}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:dl});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wi;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=sg(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(nt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Wi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!zn())throw new ag("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ag(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Wk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ag("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wk("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!s||!u)throw new ag("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;c&&(p=parseInt(c));const h=p-d;h*1e3<=Vu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const y=p-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,d);const{data:g,error:x}=await this._getUser(a);if(x)throw x;const v={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:p,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(nt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await cc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a&&!C1(a))return this._returnResult({error:a});const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(QU(o)&&(o.status===404||o.status===401||o.status===403)||C1(o)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await qn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=lq(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Lu(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,o,c,u,d;const{data:f,error:p}=a;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return zn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(nt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Fa}),{data:p,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Iu}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(i){if(await qn(this.storage,`${this.storageKey}-code-verifier`),nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await fq(async i=>(i>0&&await dq(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Fa})),(i,a)=>{const s=200*Math.pow(2,i);return a&&O1(a)&&Date.now()+s-n<Vu})}catch(n){if(this._debug(r,"error",n),nt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),zn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await cc(this.storage,this.storageKey);if(i&&this.userStorage){let s=await cc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Ku(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:T1()}else if(i&&!i.user&&!i.user){const s=await cc(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await qn(this.storage,this.storageKey+"-user"),await Ku(this.storage,this.storageKey,i)):i.user=T1()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<P1;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${P1}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),O1(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new i0;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new Wi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),nt(a)){const s={data:null,error:a};return O1(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ku(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Yk(i);await Ku(this.storage,this.storageKey,a)}else{const i=Yk(r);await Ku(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await qn(this.storage,this.storageKey),await qn(this.storage,this.storageKey+"-code-verifier"),await qn(this.storage,this.storageKey+"-user"),this.userStorage&&await qn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Vu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vu}ms, refresh threshold is ${M2} ticks`),i<=M2&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await Lu(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?qq(t.webauthn.credential_response):zq(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Bq(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Uq(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,i,a;if(t)try{const{payload:h}=sg(t);let y=null;h.aal&&(y=h.aal);let g=y;const{data:{user:x},error:v}=await this.getUser(t);if(v)return this._returnResult({data:null,error:v});((n=(r=x==null?void 0:x.factors)===null||r===void 0?void 0:r.filter(j=>j.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const S=h.amr||[];return{data:{currentLevel:y,nextLevel:g,currentAuthenticationMethods:S},error:null}}catch(h){if(nt(h))return this._returnResult({data:null,error:h});throw h}const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=sg(s.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((a=(i=s.user.factors)===null||i===void 0?void 0:i.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Wi})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Wi});const s=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&zn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Wi});const s=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&zn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await dt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Wi})})}catch(t){if(nt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await dt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Wi})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+XU>i)return n;const{data:a,error:s}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:y}=await this.getSession();if(y||!h.session)return this._returnResult({data:null,error:y});n=h.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:c}}=sg(n);r!=null&&r.allowExpired||xq(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:a,header:i,signature:s},error:null}}const d=bq(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,sq(`${o}.${c}`)))throw new B2("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}}Qh.nextInstanceID={};const Zq=Qh,Qq="2.93.2";let dh="";typeof Deno<"u"?dh="deno":typeof document<"u"?dh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dh="react-native":dh="node";const ez={"X-Client-Info":`supabase-js-${dh}/${Qq}`},tz={headers:ez},rz={schema:"public"},nz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iz={};function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function az(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sz(e){var t=az(e,"string");return ep(t)=="symbol"?t:t+""}function oz(e,t,r){return(t=sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(r),!0).forEach(function(n){oz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const lz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cz=()=>Headers,uz=(e,t,r)=>{const n=lz(r),i=cz();return async(a,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,$r($r({},s),{},{headers:u}))}};function dz(e){return e.endsWith("/")?e:e+"/"}function fz(e,t){var r,n;const{db:i,auth:a,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,p={db:$r($r({},c),i),auth:$r($r({},u),a),realtime:$r($r({},d),s),storage:{},global:$r($r($r({},f),o),{},{headers:$r($r({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function hz(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dz(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var pz=class extends Zq{constructor(e){super(e)}},mz=class{constructor(e,t,r){var n,i;this.supabaseUrl=e,this.supabaseKey=t;const a=hz(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:rz,realtime:iz,auth:$r($r({},nz),{},{storageKey:s}),global:tz},c=fz(r??{},o);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=uz(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient($r({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Z9(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new VU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new K9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:s,lock:o,debug:c,throwOnError:u},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pz({url:this.authUrl.href,headers:$r($r({},p),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:s,lock:o,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mU(this.realtimeUrl.href,$r($r({},e),{},{params:$r($r({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gz=(e,t,r)=>new mz(e,t,r);function vz(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}vz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yz="https://eqlhtuchgmucreolcvzq.supabase.co",xz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxbGh0dWNoZ211Y3Jlb2xjdnpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1OTU5ODQsImV4cCI6MjA4NTE3MTk4NH0.SLBgwtAENJlbE_CRpit5doYbXMvV6FgwPouosI742U0",ve=gz(yz,xz,{auth:{persistSession:!0,autoRefreshToken:!0}});async function bz(e){const{data:t,error:r}=await ve.auth.signInWithPassword({email:e.email,password:e.password});if(r)throw new Error(r.message);if(!t.user)throw new Error("Login failed. No user data returned.");const{data:n,error:i}=await ve.from("user_profiles").select("*").eq("id",t.user.id).single();if(i||!n)throw new Error("User profile not found. Please contact support.");if(!n.is_active)throw await ve.auth.signOut(),new Error("Your account has been deactivated. Please contact admin.");await ve.from("user_profiles").update({last_login:new Date().toISOString()}).eq("id",t.user.id);let a=[],s=null;if(n.role==="admin"||n.role==="accountant"){const{data:o,error:c}=await ve.from("outlets").select("*").eq("is_active",!0).order("name");c?console.error("Error fetching outlets:",c):o&&(a=o)}else if(n.role==="manager"){const{data:o,error:c}=await ve.from("user_outlet_assignments").select("outlet_id, outlets(*)").eq("user_id",t.user.id);c?console.error("Error fetching outlet assignments:",c):o&&o.length>0&&(a=o.map(u=>u.outlets).filter(u=>u!==null&&u.is_active),a.length===1&&(s=a[0].id))}return{profile:n,outlets:a,selectedOutlet:s}}async function wz(){const{error:e}=await ve.auth.signOut();if(e)throw new Error(e.message)}async function _z(){const{data:{session:e},error:t}=await ve.auth.getSession();if(t)throw new Error(t.message);return e}async function L1(){const e=await _z();if(!(e!=null&&e.user))return null;const{data:t,error:r}=await ve.from("user_profiles").select("*").eq("id",e.user.id).single();if(r||!t)return null;let n=[],i=null;if(t.role==="admin"||t.role==="accountant"){const{data:a,error:s}=await ve.from("outlets").select("*").eq("is_active",!0).order("name");s?console.error("Error fetching outlets:",s):a&&(n=a)}else if(t.role==="manager"){const{data:a}=await ve.from("user_outlet_assignments").select("outlet_id, outlets(*)").eq("user_id",e.user.id);a&&a.length>0&&(n=a.map(s=>s.outlets).filter(s=>s!==null&&s.is_active),n.length===1&&(i=n[0].id))}return{profile:t,outlets:n,selectedOutlet:i}}const oT=b.createContext(void 0),jz={user:null,profile:null,outlets:[],selectedOutlet:null,isLoading:!0,isAuthenticated:!1,isAdmin:!1,isManager:!1,isAccountant:!1},Qs={user:null,profile:null,outlets:[],selectedOutlet:null,isLoading:!1,isAuthenticated:!1,isAdmin:!1,isManager:!1,isAccountant:!1};function Sz({children:e}){const t=_i(),[r,n]=b.useState(jz),i=b.useRef(!0),a=b.useRef(!1),s=(p,h,y)=>({user:{id:p.id,email:p.email,full_name:p.full_name,role:p.role,is_active:p.is_active},profile:p,outlets:h,selectedOutlet:y,isLoading:!1,isAuthenticated:!0,isAdmin:p.role==="admin",isManager:p.role==="manager",isAccountant:p.role==="accountant"});b.useEffect(()=>{if(i.current=!0,a.current){console.log("[AuthContext] Already initialized, skipping");return}a.current=!0;const p=setTimeout(()=>{i.current&&r.isLoading&&(console.warn("[AuthContext] Safety timeout triggered - resolving loading state"),ve.auth.getSession().then(({data:{session:x}})=>{i.current&&(x?(console.warn("[AuthContext] Session exists but profile load timed out - NOT logging out"),n(v=>({...v,isLoading:!1,isAuthenticated:!0}))):n(Qs))}).catch(()=>{i.current&&n(x=>({...x,isLoading:!1}))}))},1e4);function h(x){var N,A;if(!x)return!1;const v=x,_=v.status||v.statusCode||v.code;if(_===401||_===403)return!0;const S=((N=v.message)==null?void 0:N.toLowerCase())||"";if(S.includes("jwt")||S.includes("token")||S.includes("session")||S.includes("not authenticated")||S.includes("invalid refresh token")||S.includes("auth"))return!0;const j=((A=v.code)==null?void 0:A.toLowerCase())||"";return j.includes("pgrst")||j==="pgrst116",!1}async function y(){console.log("[AuthContext] Initializing...");try{const{data:{session:x},error:v}=await ve.auth.getSession();if(v){console.error("[AuthContext] Session error:",v),i.current&&n(Qs);return}if(!x){console.log("[AuthContext] No session found"),i.current&&n(Qs);return}console.log("[AuthContext] Session found, loading profile...");try{const _=await L1();if(!i.current)return;if(_&&_.profile)console.log("[AuthContext] Profile loaded successfully"),n(s(_.profile,_.outlets,_.selectedOutlet));else{console.warn("[AuthContext] Profile load returned null - checking if auth error");const{data:{session:S}}=await ve.auth.getSession();S?(console.warn("[AuthContext] Session still valid but profile failed - NOT logging out"),n(j=>({...j,isLoading:!1,isAuthenticated:!0}))):n(Qs)}}catch(_){if(console.error("[AuthContext] Profile load error:",_),!i.current)return;h(_)?(console.log("[AuthContext] Auth error detected - logging out"),n(Qs)):(console.warn("[AuthContext] Data error detected - NOT logging out"),n(S=>({...S,isLoading:!1,isAuthenticated:!0})))}}catch(x){if(console.error("[AuthContext] Initialization error:",x),!i.current)return;h(x)?n(Qs):(console.warn("[AuthContext] Non-auth initialization error - NOT logging out"),n(v=>({...v,isLoading:!1})))}}y();const{data:g}=ve.auth.onAuthStateChange(async(x,v)=>{if(console.log("[AuthContext] Auth event:",x),x==="INITIAL_SESSION"){console.log("[AuthContext] Skipping INITIAL_SESSION (handled by init)");return}if(i.current){if(x==="SIGNED_OUT"){console.log("[AuthContext] Signed out event received"),n(Qs);return}if(!v){console.warn("[AuthContext] Session null - verifying...");const{data:{session:_}}=await ve.auth.getSession();_?console.log("[AuthContext] Session still valid - ignoring null event"):(console.log("[AuthContext] Verified no session - logging out"),n(Qs));return}if(x==="SIGNED_IN"||x==="TOKEN_REFRESHED"){console.log("[AuthContext] Session updated, reloading profile...");try{const _=await L1();i.current&&_&&_.profile&&n(s(_.profile,_.outlets,_.selectedOutlet))}catch(_){console.error("[AuthContext] Profile reload error:",_)}}}});return()=>{console.log("[AuthContext] Unmounting..."),i.current=!1,clearTimeout(p),g==null||g.subscription.unsubscribe()}},[]);const o=b.useCallback(async(p,h)=>{const y=await bz({email:p,password:h});n(s(y.profile,y.outlets,y.selectedOutlet)),t("/dashboard")},[t]),c=b.useCallback(async()=>{try{await wz()}catch(p){console.error("[AuthContext] Logout error:",p)}n(Qs),t("/login")},[t]),u=b.useCallback(p=>{n(h=>({...h,selectedOutlet:p}))},[]),d=b.useCallback(async()=>{try{const p=await L1();p&&p.profile&&n(h=>({...s(p.profile,p.outlets,p.selectedOutlet),selectedOutlet:p.selectedOutlet||h.selectedOutlet}))}catch(p){console.error("[AuthContext] Refresh profile error:",p)}},[]),f={...r,login:o,logout:c,setSelectedOutlet:u,refreshProfile:d};return l.jsx(oT.Provider,{value:f,children:e})}function Wt(){const e=b.useContext(oT);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function lT(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=lT(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ut(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=lT(e))&&(n&&(n+=" "),n+=t);return n}function As(...e){return Ut(e)}function Hr({size:e="md",className:t}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("svg",{className:As("animate-spin text-brand-primary",r[e],t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}function Zt({children:e,allowedRoles:t}){const{isLoading:r,isAuthenticated:n,user:i}=Wt();return r?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(Hr,{size:"lg"})}):n?t&&i&&!t.includes(i.role)?l.jsx(A2,{to:"/unauthorized",replace:!0}):l.jsx(l.Fragment,{children:e}):l.jsx(A2,{to:"/login",replace:!0})}function Nz(){return l.jsx("div",{className:"min-h-screen bg-brand-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("img",{src:"/logo.png",alt:"Hybits",className:"h-20 mx-auto mb-4"}),l.jsx("p",{className:"text-brand-text/70 mt-2",children:"Production B2B Billing System"})]}),l.jsx(H6,{})]})})}/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pt=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>b.createElement("svg",{ref:d,...kz,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Az(e)}`,o].join(" "),...u},[...t.map(([f,p])=>b.createElement(f,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Pt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=Pt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=Pt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Pt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=Pt("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=Pt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=Pt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=Pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=Pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=Pt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=Pt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Pt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=Pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=Pt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=Pt("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=Pt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=Pt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=Pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=Pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=Pt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Pt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Pt("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=Pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=Pt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=Pt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Pt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=Pt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=Pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=Pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=Pt("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=Pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=Pt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gz=[{to:"/dashboard",icon:Fz,label:"Dashboard",roles:["admin","manager"]},{to:"/clients",icon:s0,label:"Clients",roles:["admin","manager","accountant"]},{to:"/subscriptions",icon:zz,label:"Subscriptions",roles:["admin","manager","accountant"]},{to:"/events",icon:Pz,label:"Events",roles:["admin","manager","accountant"]},{to:"/invoices",icon:z2,label:"Invoices",roles:["admin","manager","accountant"]},{to:"/payments",icon:Iz,label:"Payments",roles:["admin","manager","accountant"]},{to:"/reports",icon:Hz,label:"Reports",roles:["admin","manager","accountant"]},{to:"/reports/gst-working",icon:z2,label:"GST Working",roles:["admin","manager","accountant"]},{to:"/inventory",icon:Dd,label:"Inventory",roles:["admin","manager","accountant"]}],aA=[{to:"/admin/users",icon:Vz,label:"Users",roles:["admin"]},{to:"/admin/outlets",icon:uT,label:"Outlets",roles:["admin"]},{to:"/admin/access-matrix",icon:fT,label:"Access Matrix",roles:["admin","accountant"]},{to:"/admin/activity-logs",icon:cT,label:"Activity Logs",roles:["admin","manager","accountant"]},{to:"/admin/settings",icon:dT,label:"Settings",roles:["admin"]}];function Yz(){const e=su(),{user:t,logout:r}=Wt(),n=async()=>{try{await r()}catch(i){console.error("Logout error:",i)}};return l.jsxs("div",{className:"flex flex-col h-screen w-64 bg-brand-deep text-white/90",children:[l.jsx("div",{className:"flex items-center justify-center h-16 border-b border-white/10 px-4",children:l.jsx("img",{src:"/logo.png",alt:"Hybits",className:"h-10 w-auto"})}),l.jsxs("div",{className:"px-4 py-4 border-b border-white/10",children:[l.jsx("div",{className:"text-sm font-medium text-white",children:t==null?void 0:t.full_name}),l.jsx("div",{className:"text-xs text-white/70 capitalize",children:t==null?void 0:t.role})]}),l.jsxs("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:[l.jsx("div",{className:"space-y-1 mb-6",children:Gz.map(i=>{if(!i.roles.includes((t==null?void 0:t.role)||""))return null;const a=i.icon,s=e.pathname===i.to;return l.jsxs(pr,{to:i.to,className:As("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",s?"bg-brand-primary text-white":"text-white/90 hover:bg-white/10 hover:text-white"),children:[l.jsx(a,{className:"h-5 w-5"}),i.label]},i.to)})}),aA.some(i=>i.roles.includes((t==null?void 0:t.role)||""))&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Admin"}),l.jsx("div",{className:"space-y-1",children:aA.map(i=>{if(!i.roles.includes((t==null?void 0:t.role)||""))return null;const a=i.icon,s=e.pathname===i.to;return l.jsxs(pr,{to:i.to,className:As("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",s?"bg-brand-primary text-white":"text-white/90 hover:bg-white/10 hover:text-white"),children:[l.jsx(a,{className:"h-5 w-5"}),i.label]},i.to)})})]})]}),l.jsx("div",{className:"px-3 py-4 border-t border-white/10",children:l.jsxs("button",{onClick:n,className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm font-medium text-white/90 hover:bg-white/10 hover:text-white transition-colors",children:[l.jsx(Bz,{className:"h-5 w-5"}),"Logout"]})})]})}function Jz(){return l.jsxs("div",{className:"flex h-screen bg-brand-bg",children:[l.jsx(Yz,{}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"container mx-auto px-6 py-8",children:l.jsx(H6,{})})})]})}const ze=wp.forwardRef(({label:e,error:t,helperText:r,className:n,id:i,...a},s)=>{const o=i||`input-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[e&&l.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-brand-text mb-1",children:[e,a.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsx("input",{ref:s,id:o,className:As("block w-full px-3 py-2 border rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent","disabled:bg-brand-bg disabled:cursor-not-allowed",t?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500":"border-brand-border text-brand-text placeholder-brand-text/50",n),...a}),t&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&l.jsx("p",{className:"mt-1 text-sm text-brand-text/70",children:r})]})});ze.displayName="Input";function Ee({children:e,variant:t="primary",size:r="md",isLoading:n=!1,className:i,disabled:a,...s}){const o="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed focus:ring-offset-brand-bg",c={primary:"bg-brand-primary text-white hover:bg-brand-primaryDark focus:ring-brand-primary",secondary:"border border-brand-primary text-brand-primary hover:bg-brand-primary/10 focus:ring-brand-primary",outline:"border border-brand-primary text-brand-primary hover:bg-brand-primary/10 focus:ring-brand-primary",default:"border border-brand-primary text-brand-primary hover:bg-brand-primary/10 focus:ring-brand-primary",danger:"bg-brand-deep text-white hover:opacity-90 focus:ring-brand-deep",destructive:"bg-brand-deep text-white hover:opacity-90 focus:ring-brand-deep",ghost:"bg-transparent text-brand-text hover:bg-brand-border/50 focus:ring-brand-text"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return l.jsxs("button",{className:As(o,c[t]??c.primary,u[r],i),disabled:a||n,...s,children:[n&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}function we({children:e,className:t,padding:r="md"}){const n={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return l.jsx("div",{className:As("bg-white rounded-lg border border-brand-border shadow-sm",n[r],t),children:e})}function ft({children:e,variant:t="info",className:r}){const n={success:"bg-brand-primary/10 text-brand-primary border-brand-primary/30",error:"bg-red-50 text-red-800 border-red-200",warning:"bg-brand-primary/10 text-brand-text border-brand-border",info:"bg-brand-primary/10 text-brand-primary border-brand-primary/30"},a={success:Oz,error:Kz,warning:U2,info:Mz}[t];return l.jsxs("div",{className:As("flex items-start gap-3 p-4 rounded-lg border",n[t],r),children:[l.jsx(a,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),l.jsx("div",{className:"flex-1",children:e})]})}function Xz(){const{login:e}=Wt(),[t,r]=b.useState(""),[n,i]=b.useState(""),[a,s]=b.useState(""),[o,c]=b.useState(!1),u=async d=>{d.preventDefault(),s(""),c(!0);try{await e(t,n)}catch(f){s(f.message||"Login failed. Please try again.")}finally{c(!1)}};return l.jsx(we,{children:l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Sign In"}),l.jsx("p",{className:"text-sm text-brand-text/70 mt-1",children:"Enter your credentials to access your account"})]}),a&&l.jsx(ft,{variant:"error",children:a}),l.jsx(ze,{type:"email",label:"Email Address",value:t,onChange:d=>r(d.target.value),placeholder:"Enter your email",required:!0,autoComplete:"email"}),l.jsx(ze,{type:"password",label:"Password",value:n,onChange:d=>i(d.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password"}),l.jsx(Ee,{type:"submit",className:"w-full",isLoading:o,disabled:!t||!n,children:o?"Signing in...":"Sign In"})]})})}function Wr(e){return Math.round(e*100)/100}const u5=.05;function hT(e){return Math.abs(e)<=u5}function Hg(e){const t=Wr(e);return hT(t)?0:t}const Zz="INR",D1={INR:{locale:"en-IN",symbol:""},USD:{locale:"en-US",symbol:"$"},EUR:{locale:"de-DE",symbol:""},GBP:{locale:"en-GB",symbol:""},AED:{locale:"ar-AE",symbol:"AED"},SGD:{locale:"en-SG",symbol:"S$"}};function Qz(e,t=Zz){const r=Wr(e),n=D1[t]||D1.INR;return new Intl.NumberFormat(n.locale,{style:"currency",currency:t in D1?t:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}function Ie(e){return Qz(e,"INR")}async function eW(e){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),[i,a,s,o,c]=await Promise.all([ve.from("clients").select("id",{count:"exact",head:!0}).eq("is_active",!0),ve.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active").eq("is_active",!0),ve.from("invoices").select("id",{count:"exact",head:!0}).eq("status","issued"),ve.from("invoices_with_payment_status").select("balance_due").gt("balance_due",0),ve.from("invoices").select("grand_total").eq("status","issued").gte("issued_at",n)]);i.error&&console.error("Dashboard: clients error",i.error),a.error&&console.error("Dashboard: subscriptions error",a.error),s.error&&console.error("Dashboard: invoices error",s.error),o.error&&console.error("Dashboard: outstanding error",o.error),c.error&&console.error("Dashboard: revenue error",c.error);const u=o.data?Wr(o.data.reduce((f,p)=>f+(p.balance_due||0),0)):0,d=c.data?Wr(c.data.reduce((f,p)=>f+(p.grand_total||0),0)):0;return{totalClients:i.count??0,activeSubscriptions:a.count??0,totalInvoices:s.count??0,outstandingAmount:u,currentMonthRevenue:d}}function tW(){const{user:e}=Wt(),[t,r]=b.useState(null),[n,i]=b.useState(!0),[a,s]=b.useState(null);b.useEffect(()=>{async function u(){if(e!=null&&e.id)try{i(!0),s(null);const d=await eW(e.id);r(d)}catch(d){console.error("Failed to load dashboard stats:",d),s(d instanceof Error?d.message:"Failed to load dashboard statistics")}finally{i(!1)}}u()},[e==null?void 0:e.id]);const o=u=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),c=u=>new Intl.NumberFormat("en-IN").format(u);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Dashboard"}),l.jsxs("p",{className:"text-brand-text/70 mt-1",children:["Welcome back, ",e==null?void 0:e.full_name]})]}),a&&l.jsx(ft,{variant:"error",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(U2,{className:"h-4 w-4"}),l.jsx("span",{children:a})]})}),n&&l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Hr,{size:"lg"})}),!n&&t&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:[l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Total Clients"}),l.jsx("p",{className:"text-3xl font-bold text-brand-primary mt-2",children:c(t.totalClients)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Active clients"})]}),l.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg",children:l.jsx(s0,{className:"h-6 w-6 text-brand-primary"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Active Subscriptions"}),l.jsx("p",{className:"text-3xl font-bold text-brand-primary mt-2",children:c(t.activeSubscriptions)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Recurring billing"})]}),l.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:l.jsx(Cz,{className:"h-6 w-6 text-green-500"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Total Invoices"}),l.jsx("p",{className:"text-3xl font-bold text-brand-primary mt-2",children:c(t.totalInvoices)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Issued invoices"})]}),l.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:l.jsx(z2,{className:"h-6 w-6 text-blue-500"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Outstanding"}),l.jsx("p",{className:"text-3xl font-bold text-orange-500 mt-2",children:o(t.outstandingAmount)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Pending collection"})]}),l.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:l.jsx(U2,{className:"h-6 w-6 text-orange-500"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"This Month"}),l.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o(t.currentMonthRevenue)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Revenue (invoiced)"})]}),l.jsx("div",{className:"p-2 bg-green-600/10 rounded-lg",children:l.jsx(Rz,{className:"h-6 w-6 text-green-600"})})]})})]})]})}function o0(e){if(!e||e.trim()==="")return{valid:!0};const t=e.trim().toUpperCase();return t.length!==15?{valid:!1,error:"GSTIN must be exactly 15 characters"}:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(t)?{valid:!0}:{valid:!1,error:"Invalid GSTIN format. Example: 27AABCU9603R1ZV"}}function l0(e){if(!e||e.trim()==="")return{valid:!1,error:"Phone number is required"};const t=e.replace(/[\s\-()]/g,"");return[/^[6-9]\d{9}$/,/^\+91[6-9]\d{9}$/,/^91[6-9]\d{9}$/].some(i=>i.test(t))?{valid:!0}:{valid:!1,error:"Invalid phone number. Must be 10 digits starting with 6-9"}}async function Jd(e,t={}){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=ve.from("clients").select(`
      *,
      outlets (
        id,
        name,
        code,
        city
      )
    `).eq("is_active",t.is_active??!0).order("created_at",{ascending:!1});if(r.role==="manager"){const{data:s}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}if(t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.client_type&&(n=n.eq("client_type",t.client_type)),t.search&&t.search.trim()!==""){const s=`%${t.search.trim()}%`;n=n.or(`name.ilike.${s},phone.ilike.${s}`)}const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Ap(e){const{data:t,error:r}=await ve.from("clients").select(`
      *,
      outlets (
        id,
        name,
        code,
        city,
        state,
        gstin
      )
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function rW(e,t){var s;const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create clients");if(!t.name||t.name.trim().length<2)throw new Error("Client name must be at least 2 characters");if(!t.phone)throw new Error("Phone number is required");const n=l0(t.phone);if(!n.valid)throw new Error(n.error);if(t.gstin){const o=o0(t.gstin);if(!o.valid)throw new Error(o.error)}if(r.role==="manager"){const{data:o}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((o==null?void 0:o.map(u=>u.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create clients for your assigned outlets")}const{data:i,error:a}=await ve.from("clients").insert({...t,gstin:((s=t.gstin)==null?void 0:s.toUpperCase())||null}).select(`
      *,
      outlets (
        id,
        name,
        code,
        city
      )
    `).single();if(a)throw new Error(a.message);return i}async function nW(e,t,r){const{data:n}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update clients");if(n.role==="manager"){if(r.client_type!==void 0)throw new Error("Only admins can change client type");if(r.outlet_id!==void 0)throw new Error("Only admins can change outlet assignment")}if(r.phone){const s=l0(r.phone);if(!s.valid)throw new Error(s.error)}if(r.gstin){const s=o0(r.gstin);if(!s.valid)throw new Error(s.error)}const{data:i,error:a}=await ve.from("clients").update({...r,gstin:r.gstin?r.gstin.toUpperCase():void 0}).eq("id",t).select(`
      *,
      outlets (
        id,
        name,
        code,
        city
      )
    `).single();if(a)throw new Error(a.message);return i}async function iW(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to deactivate clients");const{error:n}=await ve.from("clients").update({is_active:!1}).eq("id",t);if(n)throw new Error(n.message)}async function aW(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to reactivate clients");const{error:n}=await ve.from("clients").update({is_active:!0}).eq("id",t);if(n)throw new Error(n.message)}const ot=wp.forwardRef(({label:e,error:t,helperText:r,options:n,className:i,id:a,children:s,...o},c)=>{const u=a||`select-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[e&&l.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-brand-text mb-1",children:[e,o.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsx("select",{ref:c,id:u,className:As("block w-full px-3 py-2 border rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent","disabled:bg-brand-bg disabled:cursor-not-allowed",t?"border-red-300 text-red-900 focus:ring-red-500":"border-brand-border text-brand-text",i),...o,children:n&&Array.isArray(n)?n.map(d=>l.jsx("option",{value:d.value,children:d.label},d.value)):s}),t&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&l.jsx("p",{className:"mt-1 text-sm text-brand-text/70",children:r})]})});ot.displayName="Select";function Yt({children:e,variant:t="default",className:r}){const n={success:"bg-brand-primary/20 text-brand-primary border-brand-primary/30",warning:"bg-brand-primary/20 text-brand-text border-brand-border",danger:"bg-red-100 text-red-800 border-red-200",destructive:"bg-red-100 text-red-800 border-red-200",info:"bg-brand-primary/20 text-brand-primary border-brand-primary/30",default:"bg-brand-border/50 text-brand-text border-brand-border",secondary:"bg-brand-border/50 text-brand-text border-brand-border"};return l.jsx("span",{className:As("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",n[t]??n.default,r),children:e})}function sW(){const{user:e,isAccountant:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(""),[c,u]=b.useState({is_active:!0});b.useEffect(()=>{d()},[c]);const d=async()=>{if(e){a(!0),o("");try{const f=await Jd(e.id,c);n(f)}catch(f){o(f.message||"Failed to load clients")}finally{a(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Clients"}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage your client database"})]}),!t&&l.jsx(pr,{to:"/clients/new",children:l.jsxs(Ee,{children:[l.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Add Client"]})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(ze,{placeholder:"Search by name or phone...",value:c.search||"",onChange:f=>u({...c,search:f.target.value})}),l.jsx(ot,{value:c.client_type||"",onChange:f=>u({...c,client_type:f.target.value}),options:[{value:"",label:"All Types"},{value:"corporate",label:"Corporate"},{value:"event",label:"Event"}]}),l.jsx(ot,{value:c.is_active?"true":"false",onChange:f=>u({...c,is_active:f.target.value==="true"}),options:[{value:"true",label:"Active"},{value:"false",label:"Inactive"}]})]})}),s&&l.jsx(ft,{variant:"error",children:s}),i&&l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Hr,{size:"lg"})}),!i&&!s&&l.jsx(we,{padding:"none",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-brand-border",children:r.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"px-6 py-8 text-center text-brand-text/70",children:["No clients found. ",!t&&"Create your first client to get started."]})}):r.map(f=>{var p;return l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm font-medium text-brand-text",children:f.name}),f.contact_person&&l.jsx("div",{className:"text-sm text-brand-text/70",children:f.contact_person})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(Yt,{variant:f.client_type==="corporate"?"info":"warning",children:f.client_type})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:f.phone}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((p=f.outlets)==null?void 0:p.name)||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(Yt,{variant:f.is_active?"success":"danger",children:f.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[l.jsx(pr,{to:`/clients/${f.id}`,className:"text-brand-primary hover:text-brand-primaryDark",children:"View"}),!t&&l.jsx(pr,{to:`/clients/${f.id}/edit`,className:"text-brand-primary hover:text-brand-primaryDark",children:"Edit"})]})]},f.id)})})]})})})]})}function oW(){var S;const e=_i(),{user:t,isAdmin:r,isManager:n,outlets:i,selectedOutlet:a}=Wt(),[s,o]=b.useState({outlet_id:n&&a?a:"",client_type:"corporate",name:"",contact_person:"",phone:"",email:"",gstin:"",billing_address:""}),[c,u]=b.useState([]),[d,f]=b.useState({}),[p,h]=b.useState(""),[y,g]=b.useState(!1);b.useEffect(()=>{r?x():n&&u(i)},[r,n,i]);const x=async()=>{const{data:j}=await ve.from("outlets").select("*").eq("is_active",!0);j&&u(j)},v=()=>{const j={};if((!s.name||s.name.trim().length<2)&&(j.name="Client name must be at least 2 characters"),!s.phone)j.phone="Phone number is required";else{const N=l0(s.phone);N.valid||(j.phone=N.error)}if(s.gstin&&s.gstin.trim()){const N=o0(s.gstin);N.valid||(j.gstin=N.error)}return s.outlet_id||(j.outlet_id="Please select an outlet"),f(j),Object.keys(j).length===0},_=async j=>{if(j.preventDefault(),!(!t||!v())){h(""),g(!0);try{await rW(t.id,s),e("/clients")}catch(N){h(N.message||"Failed to create client")}finally{g(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>e("/clients"),children:l.jsx(Ld,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Add Client"}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Create a new client record"})]})]}),p&&l.jsx(ft,{variant:"error",children:p}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-brand-text mb-2",children:["Client Type ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"corporate",checked:s.client_type==="corporate",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Corporate (Subscriptions)"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"event",checked:s.client_type==="event",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Event (One-time)"})]})]})]}),r?l.jsx("div",{className:"md:col-span-2",children:l.jsx(ot,{label:"Outlet",required:!0,value:s.outlet_id,onChange:j=>o({...s,outlet_id:j.target.value}),error:d.outlet_id,options:[{value:"",label:"Select outlet"},...c.map(j=>({value:j.id,label:j.name}))]})}):l.jsx("div",{className:"md:col-span-2",children:l.jsx(ze,{label:"Outlet",value:((S=c.find(j=>j.id===s.outlet_id))==null?void 0:S.name)||"",disabled:!0})}),l.jsx(ze,{label:"Client Name",required:!0,value:s.name,onChange:j=>o({...s,name:j.target.value}),error:d.name,placeholder:"Enter client name"}),l.jsx(ze,{label:"Contact Person",value:s.contact_person,onChange:j=>o({...s,contact_person:j.target.value}),placeholder:"Enter contact person name"}),l.jsx(ze,{label:"Phone Number",required:!0,type:"tel",value:s.phone,onChange:j=>o({...s,phone:j.target.value}),error:d.phone,placeholder:"+91 98765 43210"}),l.jsx(ze,{label:"Email",type:"email",value:s.email,onChange:j=>o({...s,email:j.target.value}),placeholder:"client@example.com"}),s.client_type==="corporate"&&l.jsx("div",{className:"md:col-span-2",children:l.jsx(ze,{label:"GSTIN",value:s.gstin,onChange:j=>o({...s,gstin:j.target.value.toUpperCase()}),error:d.gstin,placeholder:"27AABCU9603R1ZV",helperText:"15-character GST number (optional)"})}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-brand-text mb-1",children:"Billing Address"}),l.jsx("textarea",{value:s.billing_address,onChange:j=>o({...s,billing_address:j.target.value}),rows:3,className:"block w-full px-3 py-2 border border-brand-border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Enter billing address"})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(Ee,{type:"button",variant:"secondary",onClick:()=>e("/clients"),children:"Cancel"}),l.jsx(Ee,{type:"submit",isLoading:y,children:"Create Client"})]})]})})]})}function lW(){var x;const{id:e}=ou(),t=_i(),{user:r,isAccountant:n}=Wt(),[i,a]=b.useState(null),[s,o]=b.useState(!0),[c,u]=b.useState(""),[d,f]=b.useState(!1),[p,h]=b.useState(!1);b.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e){o(!0),u("");try{const v=await Ap(e);v?a(v):u("Client not found or you do not have access")}catch(v){u(v.message||"Failed to load client")}finally{o(!1)}}},g=async()=>{if(!(!r||!i||!e)){f(!0),u("");try{i.is_active?await iW(r.id,e):await aW(r.id,e),await y(),h(!1)}catch(v){u(v.message||"Failed to update client status")}finally{f(!1)}}};return s?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Hr,{size:"lg"})}):c||!i?l.jsxs("div",{className:"space-y-6",children:[l.jsx(ft,{variant:"error",children:c||"Client not found"}),l.jsxs(Ee,{variant:"ghost",onClick:()=>t("/clients"),children:[l.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Back to Clients"]})]}):l.jsxs("div",{className:"space-y-6",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-brand-text mb-2",children:i.is_active?"Deactivate Client?":"Reactivate Client?"}),l.jsx("p",{className:"text-brand-text/70 mb-4",children:i.is_active?"This client will be marked as inactive. They will not appear in active client lists and cannot be used for new subscriptions or events.":"This client will be marked as active again and can be used for subscriptions and events."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(Ee,{variant:"outline",onClick:()=>h(!1),disabled:d,children:"Cancel"}),l.jsx(Ee,{variant:i.is_active?"danger":"primary",onClick:g,disabled:d,children:d?"Processing...":i.is_active?"Deactivate":"Reactivate"})]})]})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>t("/clients"),children:l.jsx(Ld,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:i.name}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Client Details"})]})]}),!n&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(pr,{to:`/clients/${i.id}/edit`,children:l.jsxs(Ee,{children:[l.jsx(a0,{className:"h-4 w-4 mr-2"}),"Edit"]})}),l.jsx(Ee,{variant:i.is_active?"outline":"primary",onClick:()=>h(!0),title:i.is_active?"Deactivate client":"Reactivate client",children:i.is_active?l.jsxs(l.Fragment,{children:[l.jsx(tp,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):l.jsxs(l.Fragment,{children:[l.jsx(Wz,{className:"h-4 w-4 mr-2"}),"Reactivate"]})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Basic Information"}),l.jsxs("dl",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Client Type"}),l.jsx("dd",{className:"mt-1",children:l.jsx(Yt,{variant:i.client_type==="corporate"?"info":"warning",children:i.client_type})})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Status"}),l.jsx("dd",{className:"mt-1",children:l.jsx(Yt,{variant:i.is_active?"success":"danger",children:i.is_active?"Active":"Inactive"})})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Outlet"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:((x=i.outlets)==null?void 0:x.name)||"-"})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Created At"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:new Date(i.created_at).toLocaleDateString()})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Contact Information"}),l.jsxs("dl",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Contact Person"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:i.contact_person||"-"})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Phone"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:i.phone})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Email"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:i.email||"-"})]}),i.gstin&&l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"GSTIN"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text font-mono",children:i.gstin})]})]})]}),i.billing_address&&l.jsxs(we,{className:"md:col-span-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Billing Address"}),l.jsx("p",{className:"text-sm text-brand-text whitespace-pre-line",children:i.billing_address})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Related Records"}),l.jsx("p",{className:"text-sm text-brand-text/70",children:"Subscriptions, events, and invoices will appear here in future phases."})]})]})}function cW(){var S;const{id:e}=ou(),t=_i(),{user:r,isAdmin:n}=Wt(),[i,a]=b.useState(null),[s,o]=b.useState({}),[c,u]=b.useState({}),[d,f]=b.useState(""),[p,h]=b.useState(!0),[y,g]=b.useState(!1);b.useEffect(()=>{e&&x()},[e]);const x=async()=>{if(e){h(!0);try{const j=await Ap(e);j&&(a(j),o({name:j.name,contact_person:j.contact_person||"",phone:j.phone,email:j.email||"",gstin:j.gstin||"",billing_address:j.billing_address||"",gst_type:j.gst_type||null}))}catch(j){f(j.message||"Failed to load client")}finally{h(!1)}}},v=()=>{var N,A;const j={};if(s.name&&((N=s.name)==null?void 0:N.trim().length)<2&&(j.name="Client name must be at least 2 characters"),s.phone){const I=l0(s.phone);I.valid||(j.phone=I.error)}if(s.gstin&&((A=s.gstin)!=null&&A.trim())){const I=o0(s.gstin);I.valid||(j.gstin=I.error)}return u(j),Object.keys(j).length===0},_=async j=>{if(j.preventDefault(),!(!r||!e||!v())){f(""),g(!0);try{await nW(r.id,e,s),t(`/clients/${e}`)}catch(N){f(N.message||"Failed to update client")}finally{g(!1)}}};return p?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Hr,{size:"lg"})}):i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>t(`/clients/${e}`),children:l.jsx(Ld,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Edit Client"}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:i.name})]})]}),d&&l.jsx(ft,{variant:"error",children:d}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-brand-text mb-2",children:["Client Type",!n&&l.jsx("span",{className:"ml-2 text-xs text-brand-text/70",children:"(Admin only)"})]}),n?l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"corporate",checked:(s.client_type||i.client_type)==="corporate",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Corporate (Subscriptions)"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"event",checked:(s.client_type||i.client_type)==="event",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Event (One-time)"})]})]}):l.jsx("div",{className:"px-3 py-2 bg-brand-bg border border-brand-border rounded-lg text-sm capitalize",children:i.client_type})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx(ze,{label:`Outlet ${n?"":"(Admin only)"}`,value:((S=i.outlets)==null?void 0:S.name)||"",disabled:!0})}),l.jsx(ze,{label:"Client Name",required:!0,value:s.name,onChange:j=>o({...s,name:j.target.value}),error:c.name}),l.jsx(ze,{label:"Contact Person",value:s.contact_person,onChange:j=>o({...s,contact_person:j.target.value})}),l.jsx(ze,{label:"Phone Number",required:!0,type:"tel",value:s.phone,onChange:j=>o({...s,phone:j.target.value}),error:c.phone}),l.jsx(ze,{label:"Email",type:"email",value:s.email,onChange:j=>o({...s,email:j.target.value})}),(s.client_type||i.client_type)==="corporate"&&l.jsx("div",{className:"md:col-span-2",children:l.jsx(ze,{label:"GSTIN",value:s.gstin,onChange:j=>o({...s,gstin:j.target.value.toUpperCase()}),error:c.gstin,placeholder:"27AABCU9603R1ZV"})}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs(ot,{label:"GST Type (for Reports)",value:s.gst_type||"",onChange:j=>o({...s,gst_type:j.target.value||null}),children:[l.jsx("option",{value:"",children:"-- Select GST Type --"}),l.jsx("option",{value:"domestic",children:"Domestic"}),l.jsx("option",{value:"sez",children:"SEZ"}),l.jsx("option",{value:"export",children:"Export"})]}),l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Used for GST Working Reports. Select based on client's GST classification."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-brand-text mb-1",children:"Billing Address"}),l.jsx("textarea",{value:s.billing_address,onChange:j=>o({...s,billing_address:j.target.value}),rows:3,className:"block w-full px-3 py-2 border border-brand-border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-primary"})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(Ee,{type:"button",variant:"secondary",onClick:()=>t(`/clients/${e}`),children:"Cancel"}),l.jsx(Ee,{type:"submit",isLoading:y,children:"Save Changes"})]})]})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsx(ft,{variant:"error",children:"Client not found or you do not have access"}),l.jsxs(Ee,{variant:"ghost",onClick:()=>t("/clients"),children:[l.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Back to Clients"]})]})}function d5(e,t,r){const n=typeof e=="string"?new Date(e):new Date(e);switch(t){case"daily":n.setDate(n.getDate()+1);break;case"weekly":n.setDate(n.getDate()+7);break;case"monthly":if(!r||r<1||r>28)throw new Error("Billing day must be between 1 and 28 for monthly billing");n.setMonth(n.getMonth()+1),n.setDate(r);break;default:throw new Error(`Invalid billing cycle: ${t}`)}return n.toISOString().split("T")[0]}function uW(e,t){return d5(new Date,e,t)}function pT(e,t){switch(e){case"daily":return"Daily";case"weekly":return"Weekly";case"monthly":return t?`Monthly (Day ${t})`:"Monthly";default:return e}}function dW(e){const t=typeof e=="string"?new Date(e):e,r=new Date;return r.setHours(0,0,0,0),t.setHours(0,0,0,0),t<r}function Iv(){return new Date().toISOString().split("T")[0]}function Ns(e,t="short"){const r=typeof e=="string"?new Date(e):e;return t==="long"?r.toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):r.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}async function fW(e,t={}){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=ve.from("subscriptions").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city
      )
    `).order("created_at",{ascending:!1});if(r.role==="manager"){const{data:s}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.status&&(n=n.eq("status",t.status)),t.client_id&&(n=n.eq("client_id",t.client_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Xd(e){const{data:t,error:r}=await ve.from("subscriptions").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        email,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city,
        state
      )
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function hW(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create subscriptions");if(!t.client_id)throw new Error("Client is required");if(!t.billing_cycle)throw new Error("Billing cycle is required");if(!t.start_date)throw new Error("Start date is required");if(!t.quantity||t.quantity<=0)throw new Error("Quantity must be greater than 0");if(t.price_per_unit===void 0||t.price_per_unit<0)throw new Error("Price per unit is required and must be 0 or greater");if(!t.notes||t.notes.trim().length===0)throw new Error("Notes/reason is required for pricing justification");if(t.billing_cycle==="monthly"&&(!t.billing_day||t.billing_day<1||t.billing_day>28))throw new Error("Billing day must be between 1 and 28 for monthly billing");if(r.role==="manager"&&dW(t.start_date))throw new Error("Managers cannot create subscriptions with past start dates");const n=await Ap(t.client_id);if(!n)throw new Error("Client not found");if(n.client_type!=="corporate")throw new Error("Only corporate clients can have subscriptions. This client is an event client.");if(n.outlet_id!==t.outlet_id)throw new Error("Client does not belong to the selected outlet");if(r.role==="manager"){const{data:o}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((o==null?void 0:o.map(u=>u.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create subscriptions for your assigned outlets")}const i=d5(t.start_date,t.billing_cycle,t.billing_day),{data:a,error:s}=await ve.from("subscriptions").insert({outlet_id:t.outlet_id,client_id:t.client_id,billing_cycle:t.billing_cycle,billing_day:t.billing_day||null,start_date:t.start_date,quantity:t.quantity,price_per_unit:t.price_per_unit,next_billing_date:i,notes:t.notes.trim(),questionnaire:t.questionnaire||null,status:"active"}).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(s)throw new Error(s.message);if(t.inventoryItems&&t.inventoryItems.length>0){const o=t.inventoryItems.filter(c=>c.quantity>0).map(c=>({outlet_id:t.outlet_id,inventory_item_id:c.inventoryItemId,reference_type:"subscription",reference_id:a.id,allocated_quantity:c.quantity,is_active:!0}));if(o.length>0){const{error:c}=await ve.from("inventory_allocations").insert(o);c&&console.warn("Failed to create inventory allocations:",c.message)}}return a}async function pW(e,t,r){const{data:n}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update subscriptions");if(n.role==="manager"){if(r.outlet_id!==void 0)throw new Error("Only admins can change outlet assignment");if(r.client_id!==void 0)throw new Error("Only admins can change client assignment")}const i=await Xd(t);if(!i)throw new Error("Subscription not found");if(r.price_per_unit!==void 0&&r.price_per_unit!==i.price_per_unit){const{count:d,error:f}=await ve.from("invoices").select("id",{count:"exact",head:!0}).eq("invoice_type","subscription").eq("client_id",i.client_id).eq("status","issued");if(f)throw new Error(`Failed to check invoices: ${f.message}`);if(d&&d>0)throw new Error("Cannot change price: issued invoices exist for this subscription. Price changes are only allowed before invoices are issued.");if(!r.price_change_reason||r.price_change_reason.trim().length===0)throw new Error("Price change reason is required when updating the price")}let s;if(r.billing_cycle||r.billing_day!==void 0){const d=r.billing_cycle||i.billing_cycle,f=r.billing_day!==void 0?r.billing_day:i.billing_day;s=d5(i.next_billing_date,d,f||void 0)}const o={...r};s&&(o.next_billing_date=s),o.price_change_reason&&(o.price_change_reason=o.price_change_reason.trim());const{data:c,error:u}=await ve.from("subscriptions").update(o).eq("id",t).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(u)throw new Error(u.message);return c}async function mT(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to pause subscriptions");const n=await Xd(t);if(!n)throw new Error("Subscription not found");if(n.status!=="active")throw new Error("Only active subscriptions can be paused");const{error:i}=await ve.from("subscriptions").update({status:"paused"}).eq("id",t);if(i)throw new Error(i.message)}async function gT(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to resume subscriptions");const n=await Xd(t);if(!n)throw new Error("Subscription not found");if(n.status!=="paused")throw new Error("Only paused subscriptions can be resumed");const i=uW(n.billing_cycle,n.billing_day||void 0),{error:a}=await ve.from("subscriptions").update({status:"active",next_billing_date:i}).eq("id",t);if(a)throw new Error(a.message)}async function vT(e,t,r){const{data:n}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to cancel subscriptions");const i=await Xd(t);if(!i)throw new Error("Subscription not found");if(i.status==="cancelled")throw new Error("Subscription is already cancelled");const a=Iv(),{error:s}=await ve.from("subscriptions").update({status:"cancelled",end_date:a}).eq("id",t);if(s)throw new Error(s.message)}async function mW(e){const{data:t,error:r}=await ve.from("subscription_price_history").select(`
      *,
      user_profiles!subscription_price_history_changed_by_fkey (
        full_name
      )
    `).eq("subscription_id",e).order("created_at",{ascending:!1});if(r)throw new Error(`Failed to fetch price history: ${r.message}`);return(t||[]).map(n=>{var i;return{id:n.id,subscription_id:n.subscription_id,old_price:n.old_price,new_price:n.new_price,changed_by:n.changed_by,reason:n.reason,created_at:n.created_at,changed_by_name:((i=n.user_profiles)==null?void 0:i.full_name)||null}})}function gW(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(null),[g,x]=b.useState(null),[v,_]=b.useState(null);b.useEffect(()=>{S()},[e==null?void 0:e.id,u,f]);async function S(){if(e!=null&&e.id)try{s(!0),c(null);const A={};u&&(A.client_id=u),f&&(A.status=f);const[I,E]=await Promise.all([fW(e.id,A),Jd(e.id,{client_type:"corporate"})]);r(I),i(E)}catch(A){c(A instanceof Error?A.message:"Failed to load subscriptions")}finally{s(!1)}}async function j(A,I){if(e!=null&&e.id)try{y(I),x(null),A==="pause"?await mT(e.id,I):A==="resume"?await gT(e.id,I):A==="cancel"&&await vT(e.id,I),_(null),await S()}catch(E){x(E instanceof Error?E.message:`Failed to ${A} subscription`)}finally{y(null)}}function N(A){const I={active:"success",paused:"warning",cancelled:"secondary"};return l.jsx(Yt,{variant:I[A],children:A.toUpperCase()})}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Subscriptions"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage corporate client subscriptions"})]}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/subscriptions/add",children:l.jsx(Ee,{children:"+ Add Subscription"})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(ot,{label:"Client",value:u,onChange:A=>d(A.target.value),children:[l.jsx("option",{value:"",children:"All Clients"}),n.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))]}),l.jsxs(ot,{label:"Status",value:f,onChange:A=>p(A.target.value),children:[l.jsx("option",{value:"",children:"All Statuses"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"paused",children:"Paused"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(u||f)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Ee,{variant:"outline",onClick:()=>{d(""),p("")},children:"Clear Filters"})})]})}),o&&l.jsx(ft,{variant:"error",children:o}),g&&l.jsx(ft,{variant:"error",children:g}),l.jsx(we,{children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-muted-foreground",children:"No subscriptions found"}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/subscriptions/add",children:l.jsx(Ee,{variant:"outline",className:"mt-4",children:"Create First Subscription"})})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Billing Cycle"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Quantity"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Price/Unit"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Total"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Next Billing"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(A=>{var I,E;return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/subscriptions/${A.id}`,className:"text-primary hover:underline font-medium",children:((I=A.clients)==null?void 0:I.name)||"Unknown Client"})}),l.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((E=A.outlets)==null?void 0:E.name)||"Unknown Outlet"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:pT(A.billing_cycle,A.billing_day)}),l.jsx("td",{className:"py-3 px-4 text-right",children:A.quantity}),l.jsx("td",{className:"py-3 px-4 text-right",children:Ie(A.price_per_unit)}),l.jsx("td",{className:"py-3 px-4 text-right font-semibold",children:Ie(A.quantity*A.price_per_unit)}),l.jsx("td",{className:"py-3 px-4 text-sm",children:A.status==="active"?Ns(A.next_billing_date):"-"}),l.jsx("td",{className:"py-3 px-4",children:N(A.status)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(e==null?void 0:e.role)!=="accountant"&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/subscriptions/${A.id}/edit`,children:l.jsx(Ee,{variant:"outline",size:"sm",children:"Edit"})}),A.status==="active"&&l.jsxs(l.Fragment,{children:[l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{var C;return _({type:"pause",subscriptionId:A.id,subscriptionName:((C=A.clients)==null?void 0:C.name)||"Unknown"})},disabled:h===A.id,children:"Pause"}),l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{var C;return _({type:"cancel",subscriptionId:A.id,subscriptionName:((C=A.clients)==null?void 0:C.name)||"Unknown"})},disabled:h===A.id,children:"Cancel"})]}),A.status==="paused"&&l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{var C;return _({type:"resume",subscriptionId:A.id,subscriptionName:((C=A.clients)==null?void 0:C.name)||"Unknown"})},disabled:h===A.id,children:"Resume"})]}),l.jsx(pr,{to:`/subscriptions/${A.id}`,children:l.jsx(Ee,{variant:"ghost",size:"sm",children:"View"})})]})})]},A.id)})})]})})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",v.type.charAt(0).toUpperCase()+v.type.slice(1)]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",v.type," the subscription for"," ",l.jsx("strong",{children:v.subscriptionName}),"?",v.type==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive",children:"This action cannot be undone. The subscription will be permanently cancelled."}),v.type==="resume"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Billing will resume from today with a new billing cycle."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>_(null),disabled:!!h,children:"Cancel"}),l.jsx(Ee,{variant:v.type==="cancel"?"destructive":"default",onClick:()=>j(v.type,v.subscriptionId),disabled:!!h,children:h?"Processing...":`Yes, ${v.type}`})]})]})})]})}async function Ep(e){const{data:t}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");return t.role}async function vW(e,t={}){let r=ve.from("inventory_movements_with_details").select("*").order("created_at",{ascending:!1});t.outlet_id&&(r=r.eq("outlet_id",t.outlet_id)),t.inventory_item_id&&(r=r.eq("inventory_item_id",t.inventory_item_id)),t.movement_type&&(r=r.eq("movement_type",t.movement_type)),t.reference_type&&(r=r.eq("reference_type",t.reference_type)),t.reference_id&&(r=r.eq("reference_id",t.reference_id)),t.date_from&&(r=r.gte("created_at",t.date_from)),t.date_to&&(r=r.lte("created_at",t.date_to));const{data:n,error:i}=await r;if(i)throw new Error(i.message);return n||[]}async function yW(e,t){if(await Ep(e)==="accountant")throw new Error("Accountants cannot create stock movements");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");const{data:n,error:i}=await ve.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"stock_in",quantity:t.quantity,reference_type:"manual",reference_id:null,notes:t.notes||null,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function xW(e,t){if(await Ep(e)==="accountant")throw new Error("Accountants cannot allocate inventory");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await ve.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"allocation",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes||null,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function bW(e,t){if(await Ep(e)==="accountant")throw new Error("Accountants cannot return inventory");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await ve.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"return",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes||null,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function wW(e,t){if(await Ep(e)==="accountant")throw new Error("Accountants cannot mark damage");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!t.notes||t.notes.trim()==="")throw new Error("Notes are required when marking damage");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await ve.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"damage",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function _W(e,t){if(await Ep(e)==="accountant")throw new Error("Accountants cannot mark loss");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!t.notes||t.notes.trim()==="")throw new Error("Notes are required when marking loss");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await ve.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"loss",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function Pp(e){const{data:t}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}async function lu(e,t={}){await Pp(e);let r=ve.from("inventory_items").select(`
      *,
      outlets:outlet_id (
        name,
        code
      )
    `).order("name");t.outlet_id&&(r=r.eq("outlet_id",t.outlet_id)),t.category&&(r=r.eq("category",t.category)),t.is_active!==void 0?r=r.eq("is_active",t.is_active):r=r.eq("is_active",!0);const{data:n,error:i}=await r;if(i)throw new Error(i.message);return(n||[]).map(a=>{var s,o;return{...a,outlet_name:(s=a.outlets)==null?void 0:s.name,outlet_code:(o=a.outlets)==null?void 0:o.code}})}async function Lv(e,t){var i,a;const{data:r,error:n}=await ve.from("inventory_items").select(`
      *,
      outlets:outlet_id (
        name,
        code
      )
    `).eq("id",t).single();if(n)throw new Error(n.message);if(!r)throw new Error("Inventory item not found");return{...r,outlet_name:(i=r.outlets)==null?void 0:i.name,outlet_code:(a=r.outlets)==null?void 0:a.code}}async function jW(e,t){const r=await Pp(e);if(r.role==="accountant")throw new Error("Accountants cannot create inventory items");if(r.role==="manager"&&(!r.outletIds||!r.outletIds.includes(t.outlet_id)))throw new Error("You can only create items for your assigned outlets");if(t.initial_stock<0)throw new Error("Initial stock cannot be negative");const{data:n,error:i}=await ve.from("inventory_items").insert({outlet_id:t.outlet_id,name:t.name,category:t.category,material:t.material||null,unit:t.unit||"pcs",total_quantity:0,available_quantity:0,allocated_quantity:0,damaged_quantity:0,lost_quantity:0,created_by:e}).select().single();if(i)throw new Error(i.message);return t.initial_stock>0&&await yW(e,{outlet_id:t.outlet_id,inventory_item_id:n.id,quantity:t.initial_stock,notes:"Initial stock"}),Lv(e,n.id)}async function SW(e,t,r){const n=await Pp(e);if(n.role==="accountant")throw new Error("Accountants cannot update inventory items");const i=await Lv(e,t);if(n.role==="manager"&&(!n.outletIds||!n.outletIds.includes(i.outlet_id)))throw new Error("You can only update items for your assigned outlets");const{error:a}=await ve.from("inventory_items").update({name:r.name,category:r.category,material:r.material,unit:r.unit}).eq("id",t).select().single();if(a)throw new Error(a.message);return Lv(e,t)}async function NW(e,t){const r=await Pp(e);if(r.role==="accountant")throw new Error("Accountants cannot deactivate inventory items");const n=await Lv(e,t);if(r.role==="manager"&&(!r.outletIds||!r.outletIds.includes(n.outlet_id)))throw new Error("You can only deactivate items for your assigned outlets");const{error:i}=await ve.from("inventory_items").update({is_active:!1}).eq("id",t);if(i)throw new Error(i.message)}async function kW(e){const t=await Pp(e);let r=ve.from("inventory_items").select("category").eq("is_active",!0);if(t.role==="manager"&&t.outletIds)if(t.outletIds.length>0)r=r.in("outlet_id",t.outletIds);else return[];const{data:n,error:i}=await r;if(i)throw new Error(i.message);return[...new Set((n==null?void 0:n.map(s=>s.category))||[])].sort()}function AW(){var W;const e=_i(),{user:t,outlets:r}=Wt(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState(!1),[h,y]=b.useState(!1),[g,x]=b.useState([]),[v,_]=b.useState(!1),[S,j]=b.useState([]),[N,A]=b.useState({outlet_id:"",client_id:"",billing_cycle:"monthly",start_date:Iv(),quantity:1,price_per_unit:0,notes:""}),[I,E]=b.useState({}),C=r||[];b.useEffect(()=>{D(),(t==null?void 0:t.role)==="manager"&&r&&r.length===1&&A(B=>({...B,outlet_id:r[0].id}))},[t,r]),b.useEffect(()=>{N.outlet_id&&(D(),T())},[N.outlet_id]);async function D(){if(!(t!=null&&t.id)){s(!1);return}try{s(!0);const B=await Jd(t.id,{client_type:"corporate"}),le=N.outlet_id?B.filter(G=>G.outlet_id===N.outlet_id):B;i(le)}catch(B){d(B instanceof Error?B.message:"Failed to load clients")}finally{s(!1)}}async function T(){if(!(t!=null&&t.id)||!N.outlet_id){x([]);return}try{_(!0);const B=await lu(t.id,{outlet_id:N.outlet_id,is_active:!0});x(B)}catch(B){console.warn("Failed to load inventory items:",B),x([])}finally{_(!1)}}function O(B){const le=g.find(G=>G.id===B);le&&(S.some(G=>G.inventoryItemId===B)||j(G=>[...G,{inventoryItemId:B,itemName:le.name,quantity:1}]))}function q(B,le){j(G=>G.map(R=>R.inventoryItemId===B?{...R,quantity:Math.max(1,le)}:R))}function K(B){j(le=>le.filter(G=>G.inventoryItemId!==B))}function ne(B,le){A(G=>({...G,[B]:le})),I[B]&&E(G=>{const R={...G};return delete R[B],R})}function re(){const B={};return N.outlet_id||(B.outlet_id="Outlet is required"),N.client_id||(B.client_id="Client is required"),N.billing_cycle||(B.billing_cycle="Billing cycle is required"),N.billing_cycle==="monthly"&&(!N.billing_day||N.billing_day<1||N.billing_day>28)&&(B.billing_day="Billing day must be between 1 and 28"),N.start_date||(B.start_date="Start date is required"),(!N.quantity||N.quantity<=0)&&(B.quantity="Quantity must be greater than 0"),(N.price_per_unit===void 0||N.price_per_unit<0)&&(B.price_per_unit="Price must be 0 or greater"),(!N.notes||N.notes.trim().length===0)&&(B.notes="Notes/reason is required for pricing justification"),E(B),Object.keys(B).length===0}async function te(B){if(B.preventDefault(),!(!re()||!(t!=null&&t.id)))try{c(!0),d(null);const le={...N,inventoryItems:S.length>0?S.map(G=>({inventoryItemId:G.inventoryItemId,quantity:G.quantity})):void 0};await hW(t.id,le),e("/subscriptions")}catch(le){d(le instanceof Error?le.message:"Failed to create subscription")}finally{c(!1)}}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Add Subscription"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new subscription for a corporate client"})]}),u&&l.jsx(ft,{variant:"error",children:u}),C.length===0&&l.jsxs(ft,{variant:"warning",children:[l.jsx("strong",{children:"No outlets found!"}),l.jsx("p",{className:"mt-2",children:(t==null?void 0:t.role)==="admin"?"You need to create at least one outlet before you can create subscriptions. Please go to Outlets page to create one.":"No outlets have been assigned to you. Please contact your administrator."})]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:te,className:"space-y-6",children:[(t==null?void 0:t.role)==="admin"?l.jsxs(ot,{label:"Outlet",value:N.outlet_id,onChange:B=>ne("outlet_id",B.target.value),error:I.outlet_id,required:!0,children:[l.jsx("option",{value:"",children:"Select Outlet"}),C.map(B=>l.jsxs("option",{value:B.id,children:[B.name," (",B.code,")"]},B.id))]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Outlet"}),l.jsx(ze,{value:((W=C[0])==null?void 0:W.name)||"No outlet assigned",disabled:!0})]}),l.jsxs(ot,{label:"Client",value:N.client_id,onChange:B=>ne("client_id",B.target.value),error:I.client_id,required:!0,disabled:!N.outlet_id,children:[l.jsx("option",{value:"",children:N.outlet_id?"Select Client":"Select outlet first"}),n.map(B=>l.jsxs("option",{value:B.id,children:[B.name," - ",B.phone]},B.id))]}),n.length===0&&N.outlet_id&&l.jsx(ft,{variant:"warning",children:"No corporate clients found for this outlet. Please create a client first."}),l.jsxs(ot,{label:"Billing Cycle",value:N.billing_cycle,onChange:B=>ne("billing_cycle",B.target.value),error:I.billing_cycle,required:!0,children:[l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"monthly",children:"Monthly"})]}),N.billing_cycle==="monthly"&&l.jsx(ze,{label:"Billing Day (1-28)",type:"number",min:1,max:28,value:N.billing_day||"",onChange:B=>ne("billing_day",parseInt(B.target.value)||void 0),error:I.billing_day,placeholder:"Enter day of month (1-28)",required:!0,helperText:"Day of the month when invoice will be generated (1-28 works for all months)"}),l.jsx(ze,{label:"Start Date",type:"date",value:N.start_date,onChange:B=>ne("start_date",B.target.value),error:I.start_date,min:(t==null?void 0:t.role)==="manager"?Iv():void 0,required:!0,helperText:(t==null?void 0:t.role)==="manager"?"Cannot select past dates":"Admins can create past-dated subscriptions for migration purposes"}),l.jsx(ze,{label:"Quantity",type:"number",min:1,value:N.quantity,onChange:B=>ne("quantity",parseInt(B.target.value)||0),error:I.quantity,required:!0}),l.jsx(ze,{label:"Price Per Unit",type:"number",min:0,step:"0.01",value:N.price_per_unit,onChange:B=>ne("price_per_unit",parseFloat(B.target.value)||0),error:I.price_per_unit,required:!0}),N.quantity>0&&N.price_per_unit>0&&l.jsx("div",{className:"p-4 bg-muted rounded-lg",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium",children:"Total per billing cycle:"}),l.jsxs("span",{className:"text-2xl font-bold",children:["",(N.quantity*N.price_per_unit).toFixed(2)]})]})}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Pricing Notes / Justification ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{value:N.notes||"",onChange:B=>ne("notes",B.target.value),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${I.notes?"border-red-500":""}`,placeholder:"Explain the pricing basis: negotiations, ESG goals, client size, special terms, etc.",required:!0}),I.notes&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:I.notes}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Document the rationale for this pricing for audit and reference."})]}),l.jsxs("div",{className:"border rounded-lg",children:[l.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between p-4 text-left hover:bg-muted/50 transition-colors",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Client Questionnaire (Optional)"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Additional reference data for ops planning and ESG reporting"})]}),f?l.jsx(iA,{className:"h-5 w-5 text-muted-foreground"}):l.jsx(nA,{className:"h-5 w-5 text-muted-foreground"})]}),f&&l.jsxs("div",{className:"border-t p-4 space-y-4 bg-muted/30",children:[l.jsx("p",{className:"text-sm text-muted-foreground italic",children:"This data is for reference only. It does NOT affect pricing calculations."}),l.jsx(ze,{label:"Daily Usage Volume (approximate)",type:"number",min:0,placeholder:"e.g., 500 meals/day",onChange:B=>ne("questionnaire",{...N.questionnaire,daily_volume:parseInt(B.target.value)||0})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Peak Time Challenges"}),l.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Describe any peak hour challenges...",onChange:B=>ne("questionnaire",{...N.questionnaire,peak_challenges:B.target.value})})]}),l.jsxs(ot,{label:"Washing Facility Available?",onChange:B=>ne("questionnaire",{...N.questionnaire,has_washing_facility:B.target.value==="yes"}),children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"yes",children:"Yes - On-site washing"}),l.jsx("option",{value:"no",children:"No - Need pickup/delivery"})]}),l.jsxs(ot,{label:"ESG Priority Level",onChange:B=>ne("questionnaire",{...N.questionnaire,esg_priority:B.target.value}),children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"high",children:"High - Key sustainability initiative"}),l.jsx("option",{value:"medium",children:"Medium - Part of broader goals"}),l.jsx("option",{value:"low",children:"Low - Cost-driven decision"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Additional Context"}),l.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Any other relevant information...",onChange:B=>ne("questionnaire",{...N.questionnaire,additional_context:B.target.value})})]})]})]}),l.jsxs("div",{className:"border rounded-lg",children:[l.jsxs("button",{type:"button",onClick:()=>y(!h),className:"w-full flex items-center justify-between p-4 text-left hover:bg-muted/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Dd,{className:"h-5 w-5 text-muted-foreground"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Standard Dishware Kit (Optional)"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Define inventory items for this subscription"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[S.length>0&&l.jsxs("span",{className:"text-sm bg-primary text-primary-foreground px-2 py-1 rounded-full",children:[S.length," items"]}),h?l.jsx(iA,{className:"h-5 w-5 text-muted-foreground"}):l.jsx(nA,{className:"h-5 w-5 text-muted-foreground"})]})]}),h&&l.jsxs("div",{className:"border-t p-4 space-y-4 bg-muted/30",children:[l.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Select dishware items for operational planning. This does NOT affect pricing."}),N.outlet_id?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex gap-2",children:l.jsxs(ot,{className:"flex-1",onChange:B=>{B.target.value&&(O(B.target.value),B.target.value="")},disabled:v,children:[l.jsx("option",{value:"",children:v?"Loading items...":"Select an item to add..."}),g.filter(B=>!S.some(le=>le.inventoryItemId===B.id)).map(B=>l.jsxs("option",{value:B.id,children:[B.name," (",B.category,") - ",B.available_quantity," available"]},B.id))]})}),S.length>0?l.jsx("div",{className:"space-y-2",children:S.map(B=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border",children:[l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:"font-medium",children:B.itemName})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-muted-foreground",children:"Qty:"}),l.jsx(ze,{type:"number",min:1,value:B.quantity,onChange:le=>q(B.inventoryItemId,parseInt(le.target.value)||1),className:"w-20"})]}),l.jsx(Ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>K(B.inventoryItemId),className:"text-destructive hover:bg-destructive/10",children:l.jsx(c5,{className:"h-4 w-4"})})]},B.inventoryItemId))}):l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No items selected. Add items from the dropdown above."}),g.length===0&&!v&&l.jsx("p",{className:"text-sm text-amber-600 text-center py-2",children:"No inventory items found for this outlet. Create items in Inventory first."})]}):l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select an outlet first to see available inventory items."})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:()=>e("/subscriptions"),disabled:o,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:o,children:o?"Creating...":"Create Subscription"})]})]})})]})}function EW(){var te,W,B,le;const{id:e}=ou(),t=_i(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState(!1),[h,y]=b.useState(!0),[g,x]=b.useState(!1),[v,_]=b.useState(""),[S,j]=b.useState(0),[N,A]=b.useState({}),[I,E]=b.useState({});b.useEffect(()=>{C()},[e]);async function C(){if(e)try{s(!0);const G=await Xd(e);if(!G){d("Subscription not found");return}i(G),j(G.price_per_unit),A({billing_cycle:G.billing_cycle,billing_day:G.billing_day||void 0,quantity:G.quantity,price_per_unit:G.price_per_unit,notes:G.notes||""}),await D(G.client_id)}catch(G){d(G instanceof Error?G.message:"Failed to load subscription")}finally{s(!1)}}async function D(G){try{y(!0);const{count:R,error:z}=await ve.from("invoices").select("id",{count:"exact",head:!0}).eq("invoice_type","subscription").eq("client_id",G).eq("status","issued");!z&&R!==null&&R>0&&p(!0)}catch{p(!0)}finally{y(!1)}}function T(G,R){if(G==="price_per_unit"&&f){d("Cannot change price: issued invoices exist for this subscription.");return}A(z=>({...z,[G]:R})),I[G]&&E(z=>{const J={...z};return delete J[G],J}),u&&d(null)}function O(){const G={};return N.billing_cycle==="monthly"&&(!N.billing_day||N.billing_day<1||N.billing_day>28)&&(G.billing_day="Billing day must be between 1 and 28"),N.quantity!==void 0&&N.quantity<=0&&(G.quantity="Quantity must be greater than 0"),N.price_per_unit!==void 0&&N.price_per_unit<0&&(G.price_per_unit="Price must be 0 or greater"),E(G),Object.keys(G).length===0}function q(G){if(G.preventDefault(),!O())return;N.price_per_unit!==void 0&&N.price_per_unit!==S?x(!0):K()}async function K(G){if(!(!(r!=null&&r.id)||!e))try{c(!0),d(null);const R={...N};G&&(R.price_change_reason=G),await pW(r.id,e,R),t(`/subscriptions/${e}`)}catch(R){d(R instanceof Error?R.message:"Failed to update subscription"),x(!1)}finally{c(!1)}}function ne(){v.trim()&&(x(!1),K(v.trim()))}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});if(!n)return l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(ft,{variant:"error",children:"Subscription not found"})});const re=N.price_per_unit!==void 0&&N.price_per_unit!==S;return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx(q2,{className:"h-6 w-6 text-amber-500 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Price Change Confirmation"}),l.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["You are changing the subscription price from"," ",l.jsxs("strong",{children:["",S.toFixed(2)]})," to"," ",l.jsxs("strong",{children:["",(te=N.price_per_unit)==null?void 0:te.toFixed(2)]}),"."]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Reason for Price Change ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{value:v,onChange:G=>_(G.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Explain why this price is being changed (e.g., contract renegotiation, volume adjustment, error correction)...",autoFocus:!0}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This reason will be recorded in the audit trail."})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(Ee,{variant:"outline",onClick:()=>{x(!1),_("")},disabled:o,children:"Cancel"}),l.jsx(Ee,{onClick:ne,disabled:!v.trim()||o,children:o?"Saving...":"Confirm Price Change"})]})]})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Edit Subscription"}),l.jsxs("p",{className:"text-muted-foreground mt-1",children:["Update subscription for ",(W=n.clients)==null?void 0:W.name]})]}),u&&l.jsx(ft,{variant:"error",children:u}),n.status==="cancelled"&&l.jsx(ft,{variant:"warning",children:"This subscription has been cancelled and cannot be modified."}),f&&!h&&l.jsxs(ft,{variant:"info",children:[l.jsx("strong",{children:"Price Locked:"})," Issued invoices exist for this subscription. Price changes are not allowed to maintain billing integrity."]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:q,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4 p-4 bg-muted rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Subscription Info (Read-only)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client"}),l.jsx("p",{className:"text-sm",children:(B=n.clients)==null?void 0:B.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Outlet"}),l.jsx("p",{className:"text-sm",children:(le=n.outlets)==null?void 0:le.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),l.jsx("p",{className:"text-sm",children:new Date(n.start_date).toLocaleDateString()})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),l.jsx("p",{className:"text-sm capitalize",children:n.status})]}),n.status==="active"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Next Billing Date"}),l.jsx("p",{className:"text-sm",children:new Date(n.next_billing_date).toLocaleDateString()}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"(Auto-calculated, cannot be manually edited)"})]})]})]}),n.status!=="cancelled"&&l.jsxs(l.Fragment,{children:[l.jsxs(ot,{label:"Billing Cycle",value:N.billing_cycle,onChange:G=>T("billing_cycle",G.target.value),error:I.billing_cycle,required:!0,children:[l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"monthly",children:"Monthly"})]}),N.billing_cycle==="monthly"&&l.jsx(ze,{label:"Billing Day (1-28)",type:"number",min:1,max:28,value:N.billing_day||"",onChange:G=>T("billing_day",parseInt(G.target.value)||void 0),error:I.billing_day,required:!0,helperText:"Day of the month when invoice will be generated"}),l.jsx(ze,{label:"Quantity",type:"number",min:1,value:N.quantity,onChange:G=>T("quantity",parseInt(G.target.value)||0),error:I.quantity,required:!0,helperText:"Changes affect future invoices only"}),l.jsxs("div",{children:[l.jsx(ze,{label:"Price Per Unit",type:"number",min:0,step:"0.01",value:N.price_per_unit,onChange:G=>T("price_per_unit",parseFloat(G.target.value)||0),error:I.price_per_unit,required:!0,disabled:f,helperText:f?"Locked - issued invoices exist":"Changes affect future invoices only"}),re&&!f&&l.jsxs("p",{className:"text-amber-600 text-sm mt-1 flex items-center gap-1",children:[l.jsx(q2,{className:"h-4 w-4"}),"Price changed from ",S.toFixed(2),". You'll be asked for a reason."]})]}),N.quantity&&N.price_per_unit!==void 0&&l.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium",children:"Total per billing cycle:"}),l.jsxs("span",{className:"text-2xl font-bold",children:["",(N.quantity*N.price_per_unit).toFixed(2)]})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Price/quantity changes apply to future invoices only. Past invoices remain unchanged."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Notes ",l.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),l.jsx("textarea",{value:N.notes||"",onChange:G=>T("notes",G.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this subscription"})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:()=>t(`/subscriptions/${e}`),disabled:o,children:"Cancel"}),n.status!=="cancelled"&&l.jsx(Ee,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})]})]})})]})}function PW(){var _,S,j,N,A;const{id:e}=ou(),t=_i(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(null),[h,y]=b.useState([]);b.useEffect(()=>{g()},[e]);async function g(){if(e)try{s(!0);const I=await Xd(e);if(!I){c("Subscription not found or you do not have access");return}i(I);try{const E=await mW(e);y(E)}catch{console.warn("Could not load price history")}}catch(I){c(I instanceof Error?I.message:"Failed to load subscription")}finally{s(!1)}}async function x(I){if(!(!(r!=null&&r.id)||!e))try{d(!0),c(null),I==="pause"?await mT(r.id,e):I==="resume"?await gT(r.id,e):I==="cancel"&&await vT(r.id,e),p(null),await g()}catch(E){c(E instanceof Error?E.message:`Failed to ${I} subscription`)}finally{d(!1)}}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});if(!n)return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(ft,{variant:"error",children:o||"Subscription not found"}),l.jsx("div",{className:"mt-4",children:l.jsx(Ee,{variant:"outline",onClick:()=>t("/subscriptions"),children:"Back to Subscriptions"})})]});const v={active:"success",paused:"warning",cancelled:"secondary"};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Subscription Details"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"View subscription information"})]}),l.jsx("div",{className:"flex gap-2",children:(r==null?void 0:r.role)!=="accountant"&&n.status!=="cancelled"&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/subscriptions/${e}/edit`,children:l.jsx(Ee,{variant:"outline",children:"Edit"})}),n.status==="active"&&l.jsxs(l.Fragment,{children:[l.jsx(Ee,{variant:"outline",onClick:()=>p("pause"),disabled:u,children:"Pause"}),l.jsx(Ee,{variant:"destructive",onClick:()=>p("cancel"),disabled:u,children:"Cancel"})]}),n.status==="paused"&&l.jsx(Ee,{onClick:()=>p("resume"),disabled:u,children:"Resume"})]})})]}),o&&l.jsx(ft,{variant:"error",children:o}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Subscription Information"}),l.jsx(Yt,{variant:v[n.status],children:n.status.toUpperCase()})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Client"}),l.jsx(pr,{to:`/clients/${n.client_id}`,className:"text-primary hover:underline font-medium",children:(_=n.clients)==null?void 0:_.name}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(S=n.clients)==null?void 0:S.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Outlet"}),l.jsx("p",{className:"font-medium",children:(j=n.outlets)==null?void 0:j.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[(N=n.outlets)==null?void 0:N.code,"  ",(A=n.outlets)==null?void 0:A.city]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Billing Cycle"}),l.jsx("p",{className:"font-medium",children:pT(n.billing_cycle,n.billing_day)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Start Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.start_date,"long")})]}),n.end_date&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"End Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.end_date,"long")})]}),n.status==="active"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Next Billing Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.next_billing_date,"long")})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Pricing"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center py-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"Quantity"}),l.jsx("span",{className:"font-medium",children:n.quantity})]}),l.jsxs("div",{className:"flex justify-between items-center py-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"Price per Unit"}),l.jsx("span",{className:"font-medium",children:Ie(n.price_per_unit)})]}),l.jsx("div",{className:"border-t pt-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-lg font-semibold",children:"Total per Billing Cycle"}),l.jsx("span",{className:"text-2xl font-bold text-primary",children:Ie(n.quantity*n.price_per_unit)})]})})]})]}),h.length>0&&l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Tv,{className:"h-5 w-5 text-muted-foreground"}),l.jsx("h2",{className:"text-xl font-semibold",children:"Price Change History"})]}),l.jsx("div",{className:"space-y-3",children:h.map(I=>l.jsxs("div",{className:"p-3 bg-muted rounded-lg border-l-4 border-amber-500",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-muted-foreground line-through",children:Ie(I.old_price)}),l.jsx("span",{className:"text-muted-foreground",children:""}),l.jsx("span",{className:"font-semibold text-primary",children:Ie(I.new_price)})]}),l.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(I.created_at).toLocaleString()})]}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.jsx("strong",{children:"Reason:"})," ",I.reason]}),I.changed_by_name&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Changed by: ",I.changed_by_name]})]},I.id))})]}),n.notes&&l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pricing Notes / Justification"}),l.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.notes})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Audit Trail"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.updated_at).toLocaleString()})]})]})]}),l.jsxs(we,{className:"bg-muted",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Related Invoices"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice history will be available after Phase 5 (Invoices) is implemented."})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",f.charAt(0).toUpperCase()+f.slice(1)]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",f," this subscription?",f==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive font-medium",children:"This action cannot be undone. The subscription will be permanently cancelled."}),f==="resume"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Billing will resume from today with a new billing cycle."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>p(null),disabled:u,children:"Cancel"}),l.jsx(Ee,{variant:f==="cancel"?"destructive":"default",onClick:()=>x(f),disabled:u,children:u?"Processing...":`Yes, ${f}`})]})]})})]})}async function yT(e,t={}){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=ve.from("events").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city
      )
    `).order("event_date",{ascending:!1});if(r.role==="manager"){const{data:s}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.status&&(n=n.eq("status",t.status)),t.client_id&&(n=n.eq("client_id",t.client_id)),t.date_from&&(n=n.gte("event_date",t.date_from)),t.date_to&&(n=n.lte("event_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Cp(e){const{data:t,error:r}=await ve.from("events").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        email,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city,
        state
      )
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function CW(e,t){var s,o;const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create events");if(!t.client_id)throw new Error("Client is required");if(!t.event_name||t.event_name.trim()==="")throw new Error("Event name is required");if(!t.event_date)throw new Error("Event date is required");if(t.guest_count!==void 0&&t.guest_count<=0)throw new Error("Guest count must be greater than 0");const n=await Ap(t.client_id);if(!n)throw new Error("Client not found");if(n.client_type!=="event")throw new Error("Only event clients can have events. This client is a corporate client.");if(n.outlet_id!==t.outlet_id)throw new Error("Client does not belong to the selected outlet");if(r.role==="manager"){const{data:c}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((c==null?void 0:c.map(d=>d.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create events for your assigned outlets")}const{data:i,error:a}=await ve.from("events").insert({outlet_id:t.outlet_id,client_id:t.client_id,event_name:t.event_name.trim(),event_type:((s=t.event_type)==null?void 0:s.trim())||null,event_date:t.event_date,guest_count:t.guest_count||null,notes:((o=t.notes)==null?void 0:o.trim())||null,status:"planned"}).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(a)throw new Error(a.message);return i}async function OW(e,t,r){var o,c;const{data:n}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update events");if(n.role==="manager"){if(r.outlet_id!==void 0)throw new Error("Only admins can change outlet assignment");if(r.client_id!==void 0)throw new Error("Only admins can change client assignment")}if(r.guest_count!==void 0&&r.guest_count<=0)throw new Error("Guest count must be greater than 0");const i={};r.event_name!==void 0&&(i.event_name=r.event_name.trim()),r.event_type!==void 0&&(i.event_type=((o=r.event_type)==null?void 0:o.trim())||null),r.event_date!==void 0&&(i.event_date=r.event_date),r.guest_count!==void 0&&(i.guest_count=r.guest_count),r.notes!==void 0&&(i.notes=((c=r.notes)==null?void 0:c.trim())||null),r.status!==void 0&&(i.status=r.status),r.outlet_id!==void 0&&(i.outlet_id=r.outlet_id),r.client_id!==void 0&&(i.client_id=r.client_id);const{data:a,error:s}=await ve.from("events").update(i).eq("id",t).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(s)throw new Error(s.message);return a}async function xT(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to complete events");const n=await Cp(t);if(!n)throw new Error("Event not found");if(n.status!=="planned")throw new Error("Only planned events can be completed");const{error:i}=await ve.from("events").update({status:"completed"}).eq("id",t);if(i)throw new Error(i.message)}async function bT(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to cancel events");const n=await Cp(t);if(!n)throw new Error("Event not found");if(n.status==="cancelled")throw new Error("Event is already cancelled");if(n.status==="completed")throw new Error("Cannot cancel a completed event");const{error:i}=await ve.from("events").update({status:"cancelled"}).eq("id",t);if(i)throw new Error(i.message)}function TW(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(null),[g,x]=b.useState(null),[v,_]=b.useState(null);b.useEffect(()=>{S()},[e==null?void 0:e.id,u,f]);async function S(){if(e!=null&&e.id)try{s(!0),c(null);const A={};u&&(A.client_id=u),f&&(A.status=f);const[I,E]=await Promise.all([yT(e.id,A),Jd(e.id,{client_type:"event"})]);r(I),i(E)}catch(A){c(A instanceof Error?A.message:"Failed to load events")}finally{s(!1)}}async function j(A,I){if(e!=null&&e.id)try{y(I),x(null),A==="complete"?await xT(e.id,I):A==="cancel"&&await bT(e.id,I),_(null),await S()}catch(E){x(E instanceof Error?E.message:`Failed to ${A} event`)}finally{y(null)}}function N(A){const I={planned:"default",completed:"success",cancelled:"secondary"};return l.jsx(Yt,{variant:I[A],children:A.toUpperCase()})}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Events"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage one-time event bookings"})]}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/events/add",children:l.jsx(Ee,{children:"+ Add Event"})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(ot,{label:"Client",value:u,onChange:A=>d(A.target.value),children:[l.jsx("option",{value:"",children:"All Clients"}),n.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))]}),l.jsxs(ot,{label:"Status",value:f,onChange:A=>p(A.target.value),children:[l.jsx("option",{value:"",children:"All Statuses"}),l.jsx("option",{value:"planned",children:"Planned"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(u||f)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Ee,{variant:"outline",onClick:()=>{d(""),p("")},children:"Clear Filters"})})]})}),o&&l.jsx(ft,{variant:"error",children:o}),g&&l.jsx(ft,{variant:"error",children:g}),l.jsx(we,{children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-muted-foreground",children:"No events found"}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/events/add",children:l.jsx(Ee,{variant:"outline",className:"mt-4",children:"Create First Event"})})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Event Name"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Event Type"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Event Date"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Guests"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(A=>{var I,E;return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/events/${A.id}`,className:"text-primary hover:underline font-medium",children:A.event_name})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:((I=A.clients)==null?void 0:I.name)||"Unknown Client"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:A.event_type||"-"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:Ns(A.event_date)}),l.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((E=A.outlets)==null?void 0:E.name)||"Unknown Outlet"}),l.jsx("td",{className:"py-3 px-4 text-right text-sm",children:A.guest_count||"-"}),l.jsx("td",{className:"py-3 px-4",children:N(A.status)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(e==null?void 0:e.role)!=="accountant"&&l.jsx(l.Fragment,{children:A.status==="planned"&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/events/${A.id}/edit`,children:l.jsx(Ee,{variant:"outline",size:"sm",children:"Edit"})}),l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>_({type:"complete",eventId:A.id,eventName:A.event_name}),disabled:h===A.id,children:"Complete"}),l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>_({type:"cancel",eventId:A.id,eventName:A.event_name}),disabled:h===A.id,children:"Cancel"})]})}),l.jsx(pr,{to:`/events/${A.id}`,children:l.jsx(Ee,{variant:"ghost",size:"sm",children:"View"})})]})})]},A.id)})})]})})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",v.type==="complete"?"Complete":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",v.type," the event"," ",l.jsx("strong",{children:v.eventName}),"?",v.type==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive",children:"This action cannot be undone. The event will be marked as cancelled."}),v.type==="complete"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"The event will be marked as completed and ready for invoicing."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>_(null),disabled:!!h,children:"Cancel"}),l.jsx(Ee,{variant:v.type==="cancel"?"destructive":"default",onClick:()=>j(v.type,v.eventId),disabled:!!h,children:h?"Processing...":`Yes, ${v.type}`})]})]})})]})}function IW(){var j;const e=_i(),{user:t,outlets:r}=Wt(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState({outlet_id:"",client_id:"",event_name:"",event_type:"",event_date:Iv(),guest_count:void 0,notes:""}),[h,y]=b.useState({}),g=r||[];b.useEffect(()=>{x(),(t==null?void 0:t.role)==="manager"&&r&&r.length===1&&p(N=>({...N,outlet_id:r[0].id}))},[t,r]),b.useEffect(()=>{f.outlet_id&&x()},[f.outlet_id]);async function x(){if(!(t!=null&&t.id)){s(!1);return}try{s(!0);const N=await Jd(t.id,{client_type:"event"}),A=f.outlet_id?N.filter(I=>I.outlet_id===f.outlet_id):N;i(A)}catch(N){d(N instanceof Error?N.message:"Failed to load clients")}finally{s(!1)}}function v(N,A){p(I=>({...I,[N]:A})),h[N]&&y(I=>{const E={...I};return delete E[N],E})}function _(){const N={};return f.outlet_id||(N.outlet_id="Outlet is required"),f.client_id||(N.client_id="Client is required"),(!f.event_name||f.event_name.trim()==="")&&(N.event_name="Event name is required"),f.event_date||(N.event_date="Event date is required"),f.guest_count!==void 0&&f.guest_count<=0&&(N.guest_count="Guest count must be greater than 0"),y(N),Object.keys(N).length===0}async function S(N){if(N.preventDefault(),!(!_()||!(t!=null&&t.id)))try{c(!0),d(null),await CW(t.id,f),e("/events")}catch(A){d(A instanceof Error?A.message:"Failed to create event")}finally{c(!1)}}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Add Event"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new event booking"})]}),u&&l.jsx(ft,{variant:"error",children:u}),g.length===0&&l.jsxs(ft,{variant:"warning",children:[l.jsx("strong",{children:"No outlets found!"}),l.jsx("p",{className:"mt-2",children:(t==null?void 0:t.role)==="admin"?"You need to create at least one outlet before you can create events.":"No outlets have been assigned to you. Please contact your administrator."})]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[(t==null?void 0:t.role)==="admin"?l.jsxs(ot,{label:"Outlet",value:f.outlet_id,onChange:N=>v("outlet_id",N.target.value),error:h.outlet_id,required:!0,children:[l.jsx("option",{value:"",children:"Select Outlet"}),g.map(N=>l.jsxs("option",{value:N.id,children:[N.name," (",N.code,")"]},N.id))]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Outlet"}),l.jsx(ze,{value:((j=g[0])==null?void 0:j.name)||"No outlet assigned",disabled:!0})]}),l.jsxs(ot,{label:"Client",value:f.client_id,onChange:N=>v("client_id",N.target.value),error:h.client_id,required:!0,disabled:!f.outlet_id,children:[l.jsx("option",{value:"",children:f.outlet_id?"Select Client":"Select outlet first"}),n.map(N=>l.jsxs("option",{value:N.id,children:[N.name," - ",N.phone]},N.id))]}),n.length===0&&f.outlet_id&&l.jsx(ft,{variant:"warning",children:"No event clients found for this outlet. Please create a client first."}),l.jsx(ze,{label:"Event Name",value:f.event_name,onChange:N=>v("event_name",N.target.value),error:h.event_name,placeholder:"e.g., Kumar-Priya Wedding",required:!0}),l.jsx(ze,{label:"Event Type (Optional)",value:f.event_type,onChange:N=>v("event_type",N.target.value),placeholder:"e.g., Wedding, Birthday, Corporate Event"}),l.jsx(ze,{label:"Event Date",type:"date",value:f.event_date,onChange:N=>v("event_date",N.target.value),error:h.event_date,required:!0}),l.jsx(ze,{label:"Guest Count (Optional)",type:"number",min:1,value:f.guest_count||"",onChange:N=>v("guest_count",parseInt(N.target.value)||void 0),error:h.guest_count,placeholder:"Expected number of guests"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:f.notes||"",onChange:N=>v("notes",N.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this event"})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:()=>e("/events"),disabled:o,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:o,children:o?"Creating...":"Create Event"})]})]})})]})}function LW(){var j,N;const{id:e}=ou(),t=_i(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState({}),[h,y]=b.useState({});b.useEffect(()=>{g()},[e]);async function g(){if(e)try{s(!0);const A=await Cp(e);if(!A){d("Event not found");return}i(A),p({event_name:A.event_name,event_type:A.event_type||"",event_date:A.event_date,guest_count:A.guest_count||void 0,notes:A.notes||""})}catch(A){d(A instanceof Error?A.message:"Failed to load event")}finally{s(!1)}}function x(A,I){p(E=>({...E,[A]:I})),h[A]&&y(E=>{const C={...E};return delete C[A],C})}function v(){const A={};return f.event_name!==void 0&&f.event_name.trim()===""&&(A.event_name="Event name is required"),f.guest_count!==void 0&&f.guest_count<=0&&(A.guest_count="Guest count must be greater than 0"),y(A),Object.keys(A).length===0}async function _(A){if(A.preventDefault(),!(!v()||!(r!=null&&r.id)||!e))try{c(!0),d(null),await OW(r.id,e,f),t(`/events/${e}`)}catch(I){d(I instanceof Error?I.message:"Failed to update event")}finally{c(!1)}}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});if(!n)return l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(ft,{variant:"error",children:"Event not found"})});const S=n.status==="planned";return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Edit Event"}),l.jsxs("p",{className:"text-muted-foreground mt-1",children:["Update event: ",n.event_name]})]}),u&&l.jsx(ft,{variant:"error",children:u}),!S&&l.jsxs(ft,{variant:"warning",children:["This event cannot be edited because it is ",n.status,"."]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4 p-4 bg-muted rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Event Info (Read-only)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client"}),l.jsx("p",{className:"text-sm",children:(j=n.clients)==null?void 0:j.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Outlet"}),l.jsx("p",{className:"text-sm",children:(N=n.outlets)==null?void 0:N.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),l.jsx("p",{className:"text-sm capitalize",children:n.status})]})]})]}),S&&l.jsxs(l.Fragment,{children:[l.jsx(ze,{label:"Event Name",value:f.event_name,onChange:A=>x("event_name",A.target.value),error:h.event_name,required:!0}),l.jsx(ze,{label:"Event Type (Optional)",value:f.event_type,onChange:A=>x("event_type",A.target.value)}),l.jsx(ze,{label:"Event Date",type:"date",value:f.event_date,onChange:A=>x("event_date",A.target.value),required:!0}),l.jsx(ze,{label:"Guest Count (Optional)",type:"number",min:1,value:f.guest_count||"",onChange:A=>x("guest_count",parseInt(A.target.value)||void 0),error:h.guest_count}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:f.notes||"",onChange:A=>x("notes",A.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this event"})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:()=>t(`/events/${e}`),disabled:o,children:"Cancel"}),S&&l.jsx(Ee,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})]})]})})]})}function DW(){var v,_,S,j,N;const{id:e}=ou(),t=_i(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(null);b.useEffect(()=>{h()},[e]);async function h(){if(e)try{s(!0);const A=await Cp(e);if(!A){c("Event not found or you do not have access");return}i(A)}catch(A){c(A instanceof Error?A.message:"Failed to load event")}finally{s(!1)}}async function y(A){if(!(!(r!=null&&r.id)||!e))try{d(!0),c(null),A==="complete"?await xT(r.id,e):A==="cancel"&&await bT(r.id,e),p(null),await h()}catch(I){c(I instanceof Error?I.message:`Failed to ${A} event`)}finally{d(!1)}}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});if(!n)return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(ft,{variant:"error",children:o||"Event not found"}),l.jsx("div",{className:"mt-4",children:l.jsx(Ee,{variant:"outline",onClick:()=>t("/events"),children:"Back to Events"})})]});const g={planned:"default",completed:"success",cancelled:"secondary"},x=n.status==="planned";return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Event Details"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"View event information"})]}),l.jsx("div",{className:"flex gap-2",children:(r==null?void 0:r.role)!=="accountant"&&x&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/events/${e}/edit`,children:l.jsx(Ee,{variant:"outline",children:"Edit"})}),l.jsx(Ee,{variant:"outline",onClick:()=>p("complete"),disabled:u,children:"Complete"}),l.jsx(Ee,{variant:"destructive",onClick:()=>p("cancel"),disabled:u,children:"Cancel Event"})]})})]}),o&&l.jsx(ft,{variant:"error",children:o}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Event Information"}),l.jsx(Yt,{variant:g[n.status],children:n.status.toUpperCase()})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Event Name"}),l.jsx("p",{className:"font-medium text-lg",children:n.event_name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Event Type"}),l.jsx("p",{className:"font-medium",children:n.event_type||"-"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Client"}),l.jsx(pr,{to:`/clients/${n.client_id}`,className:"text-primary hover:underline font-medium",children:(v=n.clients)==null?void 0:v.name}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(_=n.clients)==null?void 0:_.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Outlet"}),l.jsx("p",{className:"font-medium",children:(S=n.outlets)==null?void 0:S.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[(j=n.outlets)==null?void 0:j.code,"  ",(N=n.outlets)==null?void 0:N.city]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Event Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.event_date,"long")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Expected Guests"}),l.jsx("p",{className:"font-medium",children:n.guest_count||"Not specified"})]})]})]}),n.notes&&l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Notes"}),l.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.notes})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Audit Trail"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.updated_at).toLocaleString()})]})]})]}),n.status==="completed"&&l.jsxs(we,{className:"bg-muted",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Invoice"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice generation will be available after Phase 5 (Invoices) is implemented."})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",f==="complete"?"Complete":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",f," this event?",f==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive font-medium",children:"This action cannot be undone. The event will be marked as cancelled."}),f==="complete"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"The event will be marked as completed and ready for invoicing."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>p(null),disabled:u,children:"Cancel"}),l.jsx(Ee,{variant:f==="cancel"?"destructive":"default",onClick:()=>y(f),disabled:u,children:u?"Processing...":`Yes, ${f}`})]})]})})]})}const sA=[0,5,12,18],oA=18;function RW(e){const t=Wr(e.quantity*e.unit_price),r=Wr(t*(e.tax_rate/100));return{...e,line_total:t,tax_amount:r}}function MW(e){const t=e.map(RW),r=Wr(t.reduce((a,s)=>a+s.line_total,0)),n=Wr(t.reduce((a,s)=>a+s.tax_amount,0)),i=Wr(r+n);return{subtotal:r,tax_total:n,grand_total:i,items:t}}async function FW(e,t={}){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=ve.from("invoices").select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city),
      events (id, event_name, event_date)
    `).order("created_at",{ascending:!1});if(r.role==="manager"){const{data:s}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.invoice_type&&(n=n.eq("invoice_type",t.invoice_type)),t.status&&(n=n.eq("status",t.status)),t.client_id&&(n=n.eq("client_id",t.client_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Dv(e){const{data:t,error:r}=await ve.from("invoices").select(`
      *,
      clients (id, name, client_type, phone, email, gstin, billing_address),
      outlets (id, name, code, city, state, address, gstin, phone, email),
      events (id, event_name, event_date, event_type)
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}const{data:n,error:i}=await ve.from("invoice_items").select("*").eq("invoice_id",e).order("created_at",{ascending:!0});if(i)throw new Error(i.message);return{...t,invoice_items:n||[]}}async function $W(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create invoices");if(!t.client_id)throw new Error("Client is required");if(!t.outlet_id)throw new Error("Outlet is required");if(!t.items||t.items.length===0)throw new Error("At least one invoice item is required");if(t.items.filter(f=>!sA.includes(f.tax_rate)).length>0)throw new Error(`Invalid GST rate. Allowed rates are: ${sA.join("%, ")}%`);const i=await Ap(t.client_id);if(!i)throw new Error("Client not found");if(i.outlet_id!==t.outlet_id)throw new Error("Client does not belong to the selected outlet");if(t.invoice_type==="event"){if(!t.event_id)throw new Error("Event invoices must have an event");const f=await Cp(t.event_id);if(!f)throw new Error("Event not found");if(f.status!=="completed")throw new Error("Only completed events can be invoiced");if(f.outlet_id!==t.outlet_id)throw new Error("Event does not belong to the selected outlet");if(f.client_id!==t.client_id)throw new Error("Event does not belong to the selected client")}if(t.invoice_type==="subscription"&&t.event_id)throw new Error("Subscription invoices cannot have an event");if(r.role==="manager"){const{data:f}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((f==null?void 0:f.map(h=>h.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create invoices for your assigned outlets")}const a=MW(t.items),{data:s,error:o}=await ve.from("invoices").insert({invoice_type:t.invoice_type,client_id:t.client_id,outlet_id:t.outlet_id,event_id:t.event_id||null,status:"draft",subtotal:a.subtotal,tax_total:a.tax_total,grand_total:a.grand_total}).select().single();if(o)throw new Error(o.message);const c=a.items.map(f=>({invoice_id:s.id,description:f.description,quantity:f.quantity,unit_price:f.unit_price,line_total:f.line_total,tax_rate:f.tax_rate,tax_amount:f.tax_amount})),{error:u}=await ve.from("invoice_items").insert(c);if(u)throw await ve.from("invoices").delete().eq("id",s.id),new Error(u.message);const d=await Dv(s.id);if(!d)throw new Error("Failed to fetch created invoice");return d}async function wT(e,t,r){const{data:n}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update invoices");const i=await Dv(t);if(!i)throw new Error("Invoice not found");if(i.status==="issued"&&r.status!=="cancelled")throw new Error("Issued invoices cannot be modified");if(i.status==="cancelled"&&r.status==="issued")throw new Error("Cancelled invoices cannot be issued");const{error:a}=await ve.from("invoices").update(r).eq("id",t).select().single();if(a)throw new Error(a.message);const s=await Dv(t);if(!s)throw new Error("Failed to fetch updated invoice");return s}async function _T(e,t){await wT(e,t,{status:"issued"})}async function jT(e,t){await wT(e,t,{status:"cancelled"})}function BW(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(null),[h,y]=b.useState(null),[g,x]=b.useState(null);b.useEffect(()=>{v()},[e==null?void 0:e.id,o,u]);async function v(){if(e!=null&&e.id)try{i(!0),s(null);const N={};o&&(N.invoice_type=o),u&&(N.status=u);const A=await FW(e.id,N);r(A)}catch(N){s(N instanceof Error?N.message:"Failed to load invoices")}finally{i(!1)}}async function _(N,A){if(e!=null&&e.id)try{p(A),y(null),N==="issue"?await _T(e.id,A):N==="cancel"&&await jT(e.id,A),x(null),await v()}catch(I){y(I instanceof Error?I.message:`Failed to ${N} invoice`)}finally{p(null)}}function S(N){const A={draft:"default",issued:"success",cancelled:"secondary"};return l.jsx(Yt,{variant:A[N],children:N.toUpperCase()})}function j(N){const A={subscription:"bg-brand-primary/20 text-brand-primary",event:"bg-purple-100 text-purple-800"};return l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${A[N]}`,children:N.toUpperCase()})}return n?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Invoices"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage subscription and event invoices"})]}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/invoices/create",children:l.jsx(Ee,{children:"+ Create Invoice"})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(ot,{label:"Invoice Type",value:o,onChange:N=>c(N.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),l.jsxs(ot,{label:"Status",value:u,onChange:N=>d(N.target.value),children:[l.jsx("option",{value:"",children:"All Statuses"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"issued",children:"Issued"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(o||u)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Ee,{variant:"outline",onClick:()=>{c(""),d("")},children:"Clear Filters"})})]})}),a&&l.jsx(ft,{variant:"error",children:a}),h&&l.jsx(ft,{variant:"error",children:h}),l.jsx(we,{children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-muted-foreground",children:"No invoices found"}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/invoices/create",children:l.jsx(Ee,{variant:"outline",className:"mt-4",children:"Create First Invoice"})})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Invoice #"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Event"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Subtotal"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Tax"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Total"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(N=>{var A,I;return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/invoices/${N.id}`,className:"text-primary hover:underline font-medium",children:N.invoice_number})}),l.jsx("td",{className:"py-3 px-4",children:j(N.invoice_type)}),l.jsx("td",{className:"py-3 px-4 text-sm",children:((A=N.clients)==null?void 0:A.name)||"Unknown Client"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:((I=N.events)==null?void 0:I.event_name)||"-"}),l.jsx("td",{className:"py-3 px-4 text-right",children:Ie(N.subtotal)}),l.jsx("td",{className:"py-3 px-4 text-right",children:Ie(N.tax_total)}),l.jsx("td",{className:"py-3 px-4 text-right font-semibold",children:Ie(N.grand_total)}),l.jsx("td",{className:"py-3 px-4",children:S(N.status)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(e==null?void 0:e.role)!=="accountant"&&N.status==="draft"&&l.jsxs(l.Fragment,{children:[l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>x({type:"issue",invoiceId:N.id,invoiceNumber:N.invoice_number}),disabled:f===N.id,children:"Issue"}),l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>x({type:"cancel",invoiceId:N.id,invoiceNumber:N.invoice_number}),disabled:f===N.id,children:"Cancel"})]}),l.jsx(pr,{to:`/invoices/${N.id}`,children:l.jsx(Ee,{variant:"ghost",size:"sm",children:"View"})})]})})]},N.id)})})]})})}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",g.type==="issue"?"Issue":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",g.type," invoice"," ",l.jsx("strong",{children:g.invoiceNumber}),"?",g.type==="issue"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Once issued, the invoice cannot be edited."}),g.type==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive",children:"This action cannot be undone. The invoice will be marked as cancelled."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>x(null),disabled:!!f,children:"Cancel"}),l.jsx(Ee,{variant:g.type==="cancel"?"destructive":"default",onClick:()=>_(g.type,g.invoiceId),disabled:!!f,children:f?"Processing...":`Yes, ${g.type}`})]})]})})]})}function UW(){var ne;const e=_i(),{user:t,outlets:r}=Wt(),[n,i]=b.useState([]),[a,s]=b.useState([]),[o,c]=b.useState(!0),[u,d]=b.useState(!1),[f,p]=b.useState(null),[h,y]=b.useState("subscription"),[g,x]=b.useState(""),[v,_]=b.useState(""),[S,j]=b.useState(""),[N,A]=b.useState([{description:"",quantity:1,unit_price:0,tax_rate:oA}]),I=r||[];b.useEffect(()=>{(t==null?void 0:t.role)==="manager"&&r&&r.length===1&&x(r[0].id),c(!1)},[t,r]),b.useEffect(()=>{g&&E()},[g,h]);async function E(){if(!(!(t!=null&&t.id)||!g))try{const re=h==="subscription"?"corporate":"event",W=(await Jd(t.id,{client_type:re})).filter(B=>B.outlet_id===g);if(i(W),h==="event"){const B=await yT(t.id,{status:"completed",outlet_id:g});s(B)}}catch(re){p(re instanceof Error?re.message:"Failed to load data")}}function C(){A([...N,{description:"",quantity:1,unit_price:0,tax_rate:oA}])}function D(re){N.length>1&&A(N.filter((te,W)=>W!==re))}function T(re,te,W){const B=[...N];B[re]={...B[re],[te]:W},A(B)}function O(){let re=0,te=0;return N.forEach(W=>{const B=Math.round(W.quantity*W.unit_price*100)/100,le=Math.round(B*(W.tax_rate/100)*100)/100;re+=B,te+=le}),{subtotal:Math.round(re*100)/100,taxTotal:Math.round(te*100)/100,grandTotal:Math.round((re+te)*100)/100}}async function q(re){if(re.preventDefault(),!!(t!=null&&t.id)){if(!g){p("Outlet is required");return}if(!v){p("Client is required");return}if(h==="event"&&!S){p("Event is required for event invoices");return}if(N.some(te=>!te.description.trim())){p("All items must have a description");return}try{d(!0),p(null);const te={invoice_type:h,client_id:v,outlet_id:g,event_id:h==="event"?S:null,items:N};await $W(t.id,te),e("/invoices")}catch(te){p(te instanceof Error?te.message:"Failed to create invoice")}finally{d(!1)}}}if(o)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});const K=O();return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Create Invoice"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate a new invoice"})]}),f&&l.jsx(ft,{variant:"error",children:f}),I.length===0&&l.jsxs(ft,{variant:"warning",children:[l.jsx("strong",{children:"No outlets found!"}),l.jsx("p",{className:"mt-2",children:(t==null?void 0:t.role)==="admin"?"You need to create at least one outlet.":"No outlets assigned. Contact your administrator."})]}),l.jsxs("form",{onSubmit:q,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(ot,{label:"Invoice Type",value:h,onChange:re=>{y(re.target.value),_(""),j("")},required:!0,children:[l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),(t==null?void 0:t.role)==="admin"?l.jsxs(ot,{label:"Outlet",value:g,onChange:re=>{x(re.target.value),_(""),j("")},required:!0,children:[l.jsx("option",{value:"",children:"Select Outlet"}),I.map(re=>l.jsxs("option",{value:re.id,children:[re.name," (",re.code,")"]},re.id))]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Outlet"}),l.jsx(ze,{value:((ne=I[0])==null?void 0:ne.name)||"No outlet",disabled:!0})]}),l.jsxs(ot,{label:"Client",value:v,onChange:re=>_(re.target.value),required:!0,disabled:!g,children:[l.jsx("option",{value:"",children:g?"Select Client":"Select outlet first"}),n.map(re=>l.jsx("option",{value:re.id,children:re.name},re.id))]}),h==="event"&&l.jsxs(ot,{label:"Event",value:S,onChange:re=>j(re.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Select Event"}),a.map(re=>l.jsxs("option",{value:re.id,children:[re.event_name," - ",re.event_date]},re.id))]})]}),n.length===0&&g&&l.jsxs(ft,{variant:"warning",className:"mt-4",children:["No ",h==="subscription"?"corporate":"event"," clients found for this outlet."]}),h==="event"&&a.length===0&&g&&l.jsx(ft,{variant:"warning",className:"mt-4",children:"No completed events found for this outlet."})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Invoice Items"}),l.jsx(Ee,{type:"button",variant:"outline",size:"sm",onClick:C,children:"+ Add Item"})]}),l.jsx("div",{className:"space-y-4",children:N.map((re,te)=>l.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end border-b pb-4",children:[l.jsx("div",{className:"col-span-12 md:col-span-5",children:l.jsx(ze,{label:"Description",value:re.description,onChange:W=>T(te,"description",W.target.value),placeholder:"Item description",required:!0})}),l.jsx("div",{className:"col-span-4 md:col-span-2",children:l.jsx(ze,{label:"Qty",type:"number",min:"0.01",step:"0.01",value:re.quantity,onChange:W=>T(te,"quantity",parseFloat(W.target.value)||0),required:!0})}),l.jsx("div",{className:"col-span-4 md:col-span-2",children:l.jsx(ze,{label:"Price",type:"number",min:"0",step:"0.01",value:re.unit_price,onChange:W=>T(te,"unit_price",parseFloat(W.target.value)||0),required:!0})}),l.jsx("div",{className:"col-span-3 md:col-span-2",children:l.jsxs(ot,{label:"Tax %",value:re.tax_rate.toString(),onChange:W=>T(te,"tax_rate",parseFloat(W.target.value)),required:!0,children:[l.jsx("option",{value:"0",children:"0%"}),l.jsx("option",{value:"5",children:"5%"}),l.jsx("option",{value:"12",children:"12%"}),l.jsx("option",{value:"18",children:"18%"})]})}),l.jsx("div",{className:"col-span-1",children:N.length>1&&l.jsx(Ee,{type:"button",variant:"destructive",size:"sm",onClick:()=>D(te),children:""})})]},te))})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Summary"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{className:"font-medium",children:Ie(K.subtotal)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Tax Total:"}),l.jsx("span",{className:"font-medium",children:Ie(K.taxTotal)})]}),l.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[l.jsx("span",{children:"Grand Total:"}),l.jsx("span",{className:"text-primary",children:Ie(K.grandTotal)})]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:()=>e("/invoices"),disabled:u,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:u,children:u?"Creating...":"Create Invoice"})]})]})]})}async function qW(e,t={}){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=ve.from("payments_with_details").select("*").order("payment_date",{ascending:!1});if(r.role==="manager"){const{data:s}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(u=>u.outlet_id),{data:c}=await ve.from("invoices").select("id").in("outlet_id",o);if(c&&c.length>0){const u=c.map(d=>d.id);n=n.in("invoice_id",u)}else return[]}else return[]}if(t.outlet_id&&["admin","accountant"].includes(r.role)){const{data:s}=await ve.from("invoices").select("id").eq("outlet_id",t.outlet_id);if(s&&s.length>0){const o=s.map(c=>c.id);n=n.in("invoice_id",o)}else return[]}t.invoice_id&&(n=n.eq("invoice_id",t.invoice_id)),t.payment_method&&(n=n.eq("payment_method",t.payment_method)),t.date_from&&(n=n.gte("payment_date",t.date_from)),t.date_to&&(n=n.lte("payment_date",t.date_to)),t.is_active!==void 0?n=n.eq("is_active",t.is_active):n=n.eq("is_active",!0);const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function ST(e){const{data:t,error:r}=await ve.from("payments_with_details").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function zW(e){const{data:t,error:r}=await ve.from("payments_with_details").select("*").eq("invoice_id",e).order("payment_date",{ascending:!1});if(r)throw new Error(r.message);return t||[]}async function NT(e){const{data:t,error:r}=await ve.from("invoices_with_payment_status").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function WW(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(!t.invoice_id)throw new Error("Invoice is required");if(!t.amount||t.amount<=0)throw new Error("Payment amount must be greater than zero");if(!t.payment_method)throw new Error("Payment method is required");if(!t.payment_date)throw new Error("Payment date is required");const n=new Date(t.payment_date),i=new Date;if(i.setHours(0,0,0,0),n>i)throw new Error("Payment date cannot be in the future");const a=await NT(t.invoice_id);if(!a)throw new Error("Invoice not found");if(a.status==="draft")throw new Error("Cannot record payment for draft invoice. Issue the invoice first.");if(a.status==="cancelled")throw new Error("Cannot record payment for cancelled invoice");if(t.amount>a.balance_due+u5)throw new Error(`Payment amount (${t.amount}) exceeds balance due (${a.balance_due})`);if(r.role==="manager"){const{data:d}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((d==null?void 0:d.map(p=>p.outlet_id))||[]).includes(a.outlet_id))throw new Error("You can only record payments for your assigned outlets")}const s=Wr(t.amount),{data:o,error:c}=await ve.from("payments").insert({invoice_id:t.invoice_id,amount:s,payment_method:t.payment_method,payment_date:t.payment_date,reference_number:t.reference_number||null,notes:t.notes||null}).select().single();if(c)throw new Error(c.message);const u=await ST(o.id);if(!u)throw new Error("Failed to fetch created payment");return u}async function HW(e,t){const{data:r}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");const n=await ST(t);if(!n)throw new Error("Payment not found");if(!n.is_active)throw new Error("Payment is already deleted");const{data:i}=await ve.from("invoices").select("outlet_id").eq("id",n.invoice_id).single();if(!i)throw new Error("Invoice not found");if(r.role==="manager"){const{data:s}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((s==null?void 0:s.map(c=>c.outlet_id))||[]).includes(i.outlet_id))throw new Error("You can only delete payments for your assigned outlets")}const{error:a}=await ve.from("payments").update({is_active:!1}).eq("id",t);if(a)throw new Error(a.message)}async function VW(e){const t=await NT(e);if(!t)throw new Error("Invoice not found");const n=(await zW(e)).filter(i=>i.is_active);return{invoice_total:t.grand_total,amount_paid:t.amount_paid,balance_due:t.balance_due,payment_status:t.payment_status,payment_count:n.length,payments:n}}const KW="modulepreload",GW=function(e){return"/"+e},lA={},R1=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=GW(c),c in lA)return;lA[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":KW,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};function er(e){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(e)}var Ja=Uint8Array,Gi=Uint16Array,f5=Int32Array,h5=new Ja([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p5=new Ja([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cA=new Ja([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kT=function(e,t){for(var r=new Gi(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new f5(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},AT=kT(h5,2),YW=AT.b,W2=AT.r;YW[28]=258,W2[258]=28;var JW=kT(p5,0),uA=JW.r,H2=new Gi(32768);for(var xr=0;xr<32768;++xr){var rl=(xr&43690)>>1|(xr&21845)<<1;rl=(rl&52428)>>2|(rl&13107)<<2,rl=(rl&61680)>>4|(rl&3855)<<4,H2[xr]=((rl&65280)>>8|(rl&255)<<8)>>1}var kh=function(e,t,r){for(var n=e.length,i=0,a=new Gi(t);i<n;++i)e[i]&&++a[e[i]-1];var s=new Gi(t);for(i=1;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(r){o=new Gi(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],f=s[e[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[H2[f]>>c]=u}else for(o=new Gi(n),i=0;i<n;++i)e[i]&&(o[i]=H2[s[e[i]-1]++]>>15-e[i]);return o},Uc=new Ja(288);for(var xr=0;xr<144;++xr)Uc[xr]=8;for(var xr=144;xr<256;++xr)Uc[xr]=9;for(var xr=256;xr<280;++xr)Uc[xr]=7;for(var xr=280;xr<288;++xr)Uc[xr]=8;var Rv=new Ja(32);for(var xr=0;xr<32;++xr)Rv[xr]=5;var XW=kh(Uc,9,0),ZW=kh(Rv,5,0),ET=function(e){return(e+7)/8|0},QW=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Ja(e.subarray(t,r))},eo=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Jf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},M1=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return{t:CT,l:0};if(i==1){var s=new Ja(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(N,A){return N.f-A.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=i-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var p=a[0].s,n=1;n<i;++n)a[n].s>p&&(p=a[n].s);var h=new Gi(p+1),y=V2(r[d-1],h,0);if(y>t){var n=0,g=0,x=y-t,v=1<<x;for(a.sort(function(A,I){return h[I.s]-h[A.s]||A.f-I.f});n<i;++n){var _=a[n].s;if(h[_]>t)g+=v-(1<<y-h[_]),h[_]=t;else break}for(g>>=x;g>0;){var S=a[n].s;h[S]<t?g-=1<<t-h[S]++-1:++n}for(;n>=0&&g;--n){var j=a[n].s;h[j]==t&&(--h[j],++g)}y=t}return{t:new Ja(h),l:y}},V2=function(e,t,r){return e.s==-1?Math.max(V2(e.l,t,r+1),V2(e.r,t,r+1)):t[e.s]=r},dA=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Gi(++t),n=0,i=e[0],a=1,s=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return{c:r.subarray(0,n),n:t}},Xf=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},PT=function(e,t,r){var n=r.length,i=ET(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},fA=function(e,t,r,n,i,a,s,o,c,u,d){eo(t,d++,r),++i[256];for(var f=M1(i,15),p=f.t,h=f.l,y=M1(a,15),g=y.t,x=y.l,v=dA(p),_=v.c,S=v.n,j=dA(g),N=j.c,A=j.n,I=new Gi(19),E=0;E<_.length;++E)++I[_[E]&31];for(var E=0;E<N.length;++E)++I[N[E]&31];for(var C=M1(I,7),D=C.t,T=C.l,O=19;O>4&&!D[cA[O-1]];--O);var q=u+5<<3,K=Xf(i,Uc)+Xf(a,Rv)+s,ne=Xf(i,p)+Xf(a,g)+s+14+3*O+Xf(I,D)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&q<=K&&q<=ne)return PT(t,d,e.subarray(c,c+u));var re,te,W,B;if(eo(t,d,1+(ne<K)),d+=2,ne<K){re=kh(p,h,0),te=p,W=kh(g,x,0),B=g;var le=kh(D,T,0);eo(t,d,S-257),eo(t,d+5,A-1),eo(t,d+10,O-4),d+=14;for(var E=0;E<O;++E)eo(t,d+3*E,D[cA[E]]);d+=3*O;for(var G=[_,N],R=0;R<2;++R)for(var z=G[R],E=0;E<z.length;++E){var J=z[E]&31;eo(t,d,le[J]),d+=D[J],J>15&&(eo(t,d,z[E]>>5&127),d+=z[E]>>12)}}else re=XW,te=Uc,W=ZW,B=Rv;for(var E=0;E<o;++E){var ie=n[E];if(ie>255){var J=ie>>18&31;Jf(t,d,re[J+257]),d+=te[J+257],J>7&&(eo(t,d,ie>>23&31),d+=h5[J]);var ae=ie&31;Jf(t,d,W[ae]),d+=B[ae],ae>3&&(Jf(t,d,ie>>5&8191),d+=p5[ae])}else Jf(t,d,re[ie]),d+=te[ie]}return Jf(t,d,re[256]),d+te[256]},eH=new f5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),CT=new Ja(0),tH=function(e,t,r,n,i,a){var s=a.z||e.length,o=new Ja(n+s+5*(1+Math.ceil(s/7e3))+i),c=o.subarray(n,o.length-i),u=a.l,d=(a.r||0)&7;if(t){d&&(c[0]=a.r>>3);for(var f=eH[t-1],p=f>>13,h=f&8191,y=(1<<r)-1,g=a.p||new Gi(32768),x=a.h||new Gi(y+1),v=Math.ceil(r/3),_=2*v,S=function(Pe){return(e[Pe]^e[Pe+1]<<v^e[Pe+2]<<_)&y},j=new f5(25e3),N=new Gi(288),A=new Gi(32),I=0,E=0,C=a.i||0,D=0,T=a.w||0,O=0;C+2<s;++C){var q=S(C),K=C&32767,ne=x[q];if(g[K]=ne,x[q]=K,T<=C){var re=s-C;if((I>7e3||D>24576)&&(re>423||!u)){d=fA(e,c,0,j,N,A,E,D,O,C-O,d),D=I=E=0,O=C;for(var te=0;te<286;++te)N[te]=0;for(var te=0;te<30;++te)A[te]=0}var W=2,B=0,le=h,G=K-ne&32767;if(re>2&&q==S(C-G))for(var R=Math.min(p,re)-1,z=Math.min(32767,C),J=Math.min(258,re);G<=z&&--le&&K!=ne;){if(e[C+W]==e[C+W-G]){for(var ie=0;ie<J&&e[C+ie]==e[C+ie-G];++ie);if(ie>W){if(W=ie,B=G,ie>R)break;for(var ae=Math.min(G,ie-2),ue=0,te=0;te<ae;++te){var pe=C-G+te&32767,ee=g[pe],he=pe-ee&32767;he>ue&&(ue=he,ne=pe)}}}K=ne,ne=g[K],G+=K-ne&32767}if(B){j[D++]=268435456|W2[W]<<18|uA[B];var oe=W2[W]&31,de=uA[B]&31;E+=h5[oe]+p5[de],++N[257+oe],++A[de],T=C+W,++I}else j[D++]=e[C],++N[e[C]]}}for(C=Math.max(C,T);C<s;++C)j[D++]=e[C],++N[e[C]];d=fA(e,c,u,j,N,A,E,D,O,C-O,d),u||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=x,a.p=g,a.i=C,a.w=T)}else{for(var C=a.w||0;C<s+u;C+=65535){var Ce=C+65535;Ce>=s&&(c[d/8|0]=u,Ce=s),d=PT(c,d+1,e.subarray(C,Ce))}a.i=s}return QW(o,0,n+ET(d)+i)},OT=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,a=r.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=r[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},rH=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new Ja(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return tH(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},TT=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},nH=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=OT();i.p(t.dictionary),TT(e,2,i.d())}};function K2(e,t){t||(t={});var r=OT();r.p(e);var n=rH(e,t,t.dictionary?6:2,4);return nH(n,t),TT(n,n.length-4,r.d()),n}var iH=typeof TextDecoder<"u"&&new TextDecoder,aH=0;try{iH.decode(CT,{stream:!0}),aH=1}catch{}function sH(e){if(Array.isArray(e))return e}function oH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function hA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lH(e,t){if(e){if(typeof e=="string")return hA(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hA(e,t):void 0}}function cH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pA(e,t){return sH(e)||oH(e,t)||lH(e,t)||cH()}function mA(e,t="utf8"){return new TextDecoder(t).decode(e)}const uH=new TextEncoder;function dH(e){return uH.encode(e)}const fH=1024*8,hH=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),F1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class m5{constructor(t=fH,r={}){Vt(this,"buffer");Vt(this,"byteLength");Vt(this,"byteOffset");Vt(this,"length");Vt(this,"offset");Vt(this,"lastWrittenByte");Vt(this,"littleEndian");Vt(this,"_data");Vt(this,"_mark");Vt(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,a=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof m5)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=F1[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===hH&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const c=new F1[r](o.buffer);return this.offset+=n,c.reverse(),c}const s=new F1[r](a);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return mA(this.readBytes(t))}decodeText(t=1,r="utf8"){return mA(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(dH(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Zd(e){let t=e.length;for(;--t>=0;)e[t]=0}const pH=3,mH=258,IT=29,gH=256,vH=gH+1+IT,LT=30,yH=512,xH=new Array((vH+2)*2);Zd(xH);const bH=new Array(LT*2);Zd(bH);const wH=new Array(yH);Zd(wH);const _H=new Array(mH-pH+1);Zd(_H);const jH=new Array(IT);Zd(jH);const SH=new Array(LT);Zd(SH);const NH=(e,t,r,n)=>{let i=e&65535|0,a=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var G2=NH;const kH=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},AH=new Uint32Array(kH()),EH=(e,t,r,n)=>{const i=AH,a=n+r;e^=-1;for(let s=n;s<a;s++)e=e>>>8^i[(e^t[s])&255];return e^-1};var ds=EH,Y2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},DT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const PH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var CH=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)PH(r,n)&&(e[n]=r[n])}}return e},OH=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let s=e[n];r.set(s,i),i+=s.length}return r},RT={assign:CH,flattenChunks:OH};let MT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{MT=!1}const rp=new Uint8Array(256);for(let e=0;e<256;e++)rp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;rp[254]=rp[254]=1;var TH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,s=e.length,o=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),a=0,i=0;a<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const IH=(e,t)=>{if(t<65534&&e.subarray&&MT)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var LH=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let s=e[n++];if(s<128){a[i++]=s;continue}let o=rp[s];if(o>4){a[i++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<r;)s=s<<6|e[n++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return IH(a,i)},DH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+rp[e[r]]>t?r:t},J2={string2buf:TH,buf2string:LH,utf8border:DH};function RH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var MH=RH;const og=16209,FH=16191;var $H=function(t,r){let n,i,a,s,o,c,u,d,f,p,h,y,g,x,v,_,S,j,N,A,I,E,C,D;const T=t.state;n=t.next_in,C=t.input,i=n+(t.avail_in-5),a=t.next_out,D=t.output,s=a-(r-t.avail_out),o=a+(t.avail_out-257),c=T.dmax,u=T.wsize,d=T.whave,f=T.wnext,p=T.window,h=T.hold,y=T.bits,g=T.lencode,x=T.distcode,v=(1<<T.lenbits)-1,_=(1<<T.distbits)-1;e:do{y<15&&(h+=C[n++]<<y,y+=8,h+=C[n++]<<y,y+=8),S=g[h&v];t:for(;;){if(j=S>>>24,h>>>=j,y-=j,j=S>>>16&255,j===0)D[a++]=S&65535;else if(j&16){N=S&65535,j&=15,j&&(y<j&&(h+=C[n++]<<y,y+=8),N+=h&(1<<j)-1,h>>>=j,y-=j),y<15&&(h+=C[n++]<<y,y+=8,h+=C[n++]<<y,y+=8),S=x[h&_];r:for(;;){if(j=S>>>24,h>>>=j,y-=j,j=S>>>16&255,j&16){if(A=S&65535,j&=15,y<j&&(h+=C[n++]<<y,y+=8,y<j&&(h+=C[n++]<<y,y+=8)),A+=h&(1<<j)-1,A>c){t.msg="invalid distance too far back",T.mode=og;break e}if(h>>>=j,y-=j,j=a-s,A>j){if(j=A-j,j>d&&T.sane){t.msg="invalid distance too far back",T.mode=og;break e}if(I=0,E=p,f===0){if(I+=u-j,j<N){N-=j;do D[a++]=p[I++];while(--j);I=a-A,E=D}}else if(f<j){if(I+=u+f-j,j-=f,j<N){N-=j;do D[a++]=p[I++];while(--j);if(I=0,f<N){j=f,N-=j;do D[a++]=p[I++];while(--j);I=a-A,E=D}}}else if(I+=f-j,j<N){N-=j;do D[a++]=p[I++];while(--j);I=a-A,E=D}for(;N>2;)D[a++]=E[I++],D[a++]=E[I++],D[a++]=E[I++],N-=3;N&&(D[a++]=E[I++],N>1&&(D[a++]=E[I++]))}else{I=a-A;do D[a++]=D[I++],D[a++]=D[I++],D[a++]=D[I++],N-=3;while(N>2);N&&(D[a++]=D[I++],N>1&&(D[a++]=D[I++]))}}else if(j&64){t.msg="invalid distance code",T.mode=og;break e}else{S=x[(S&65535)+(h&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){T.mode=FH;break e}else{t.msg="invalid literal/length code",T.mode=og;break e}else{S=g[(S&65535)+(h&(1<<j)-1)];continue t}break}}while(n<i&&a<o);N=y>>3,n-=N,y-=N<<3,h&=(1<<y)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<o?257+(o-a):257-(a-o),T.hold=h,T.bits=y};const Fu=15,gA=852,vA=592,yA=0,$1=1,xA=2,BH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),UH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),WH=(e,t,r,n,i,a,s,o)=>{const c=o.bits;let u=0,d=0,f=0,p=0,h=0,y=0,g=0,x=0,v=0,_=0,S,j,N,A,I,E=null,C;const D=new Uint16Array(Fu+1),T=new Uint16Array(Fu+1);let O=null,q,K,ne;for(u=0;u<=Fu;u++)D[u]=0;for(d=0;d<n;d++)D[t[r+d]]++;for(h=c,p=Fu;p>=1&&D[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&D[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=Fu;u++)if(x<<=1,x-=D[u],x<0)return-1;if(x>0&&(e===yA||p!==1))return-1;for(T[1]=0,u=1;u<Fu;u++)T[u+1]=T[u]+D[u];for(d=0;d<n;d++)t[r+d]!==0&&(s[T[t[r+d]]++]=d);if(e===yA?(E=O=s,C=20):e===$1?(E=BH,O=UH,C=257):(E=qH,O=zH,C=0),_=0,d=0,u=f,I=a,y=h,g=0,N=-1,v=1<<h,A=v-1,e===$1&&v>gA||e===xA&&v>vA)return 1;for(;;){q=u-g,s[d]+1<C?(K=0,ne=s[d]):s[d]>=C?(K=O[s[d]-C],ne=E[s[d]-C]):(K=96,ne=0),S=1<<u-g,j=1<<y,f=j;do j-=S,i[I+(_>>g)+j]=q<<24|K<<16|ne|0;while(j!==0);for(S=1<<u-1;_&S;)S>>=1;if(S!==0?(_&=S-1,_+=S):_=0,d++,--D[u]===0){if(u===p)break;u=t[r+s[d]]}if(u>h&&(_&A)!==N){for(g===0&&(g=h),I+=f,y=u-g,x=1<<y;y+g<p&&(x-=D[y+g],!(x<=0));)y++,x<<=1;if(v+=1<<y,e===$1&&v>gA||e===xA&&v>vA)return 1;N=_&A,i[N]=h<<24|y<<16|I-a|0}}return _!==0&&(i[I+_]=u-g<<24|64<<16|0),o.bits=h,0};var Ah=WH;const HH=0,FT=1,$T=2,{Z_FINISH:bA,Z_BLOCK:VH,Z_TREES:lg,Z_OK:qc,Z_STREAM_END:KH,Z_NEED_DICT:GH,Z_STREAM_ERROR:ja,Z_DATA_ERROR:BT,Z_MEM_ERROR:UT,Z_BUF_ERROR:YH,Z_DEFLATED:wA}=DT,c0=16180,_A=16181,jA=16182,SA=16183,NA=16184,kA=16185,AA=16186,EA=16187,PA=16188,CA=16189,Mv=16190,to=16191,B1=16192,OA=16193,U1=16194,TA=16195,IA=16196,LA=16197,DA=16198,cg=16199,ug=16200,RA=16201,MA=16202,FA=16203,$A=16204,BA=16205,q1=16206,UA=16207,qA=16208,jr=16209,qT=16210,zT=16211,JH=852,XH=592,ZH=15,QH=ZH,zA=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function eV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<c0||t.mode>zT?1:0},WT=e=>{if(cu(e))return ja;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=c0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(JH),t.distcode=t.distdyn=new Int32Array(XH),t.sane=1,t.back=-1,qc},HT=e=>{if(cu(e))return ja;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,WT(e)},VT=(e,t)=>{let r;if(cu(e))return ja;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ja:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,HT(e))},KT=(e,t)=>{if(!e)return ja;const r=new eV;e.state=r,r.strm=e,r.window=null,r.mode=c0;const n=VT(e,t);return n!==qc&&(e.state=null),n},tV=e=>KT(e,QH);let WA=!0,z1,W1;const rV=e=>{if(WA){z1=new Int32Array(512),W1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ah(FT,e.lens,0,288,z1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ah($T,e.lens,0,32,W1,0,e.work,{bits:5}),WA=!1}e.lencode=z1,e.lenbits=9,e.distcode=W1,e.distbits=5},GT=(e,t,r,n)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},nV=(e,t)=>{let r,n,i,a,s,o,c,u,d,f,p,h,y,g,x=0,v,_,S,j,N,A,I,E;const C=new Uint8Array(4);let D,T;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cu(e)||!e.output||!e.input&&e.avail_in!==0)return ja;r=e.state,r.mode===to&&(r.mode=B1),s=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,f=o,p=c,E=qc;e:for(;;)switch(r.mode){case c0:if(r.wrap===0){r.mode=B1;break}for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,C[0]=u&255,C[1]=u>>>8&255,r.check=ds(r.check,C,2,0),u=0,d=0,r.mode=_A;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=jr;break}if((u&15)!==wA){e.msg="unknown compression method",r.mode=jr;break}if(u>>>=4,d-=4,I=(u&15)+8,r.wbits===0&&(r.wbits=I),I>15||I>r.wbits){e.msg="invalid window size",r.mode=jr;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?CA:to,u=0,d=0;break;case _A:for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==wA){e.msg="unknown compression method",r.mode=jr;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=jr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=ds(r.check,C,2,0)),u=0,d=0,r.mode=jA;case jA:for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,r.check=ds(r.check,C,4,0)),u=0,d=0,r.mode=SA;case SA:for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=ds(r.check,C,2,0)),u=0,d=0,r.mode=NA;case NA:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=ds(r.check,C,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=kA;case kA:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),I)),r.flags&512&&r.wrap&4&&(r.check=ds(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=AA;case AA:if(r.flags&2048){if(o===0)break e;h=0;do I=n[a+h++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I));while(I&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=ds(r.check,n,h,a)),o-=h,a+=h,I)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=EA;case EA:if(r.flags&4096){if(o===0)break e;h=0;do I=n[a+h++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I));while(I&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=ds(r.check,n,h,a)),o-=h,a+=h,I)break e}else r.head&&(r.head.comment=null);r.mode=PA;case PA:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=jr;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=to;break;case CA:for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}e.adler=r.check=zA(u),u=0,d=0,r.mode=Mv;case Mv:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=o,r.hold=u,r.bits=d,GH;e.adler=r.check=1,r.mode=to;case to:if(t===VH||t===lg)break e;case B1:if(r.last){u>>>=d&7,d-=d&7,r.mode=q1;break}for(;d<3;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=OA;break;case 1:if(rV(r),r.mode=cg,t===lg){u>>>=2,d-=2;break e}break;case 2:r.mode=IA;break;case 3:e.msg="invalid block type",r.mode=jr}u>>>=2,d-=2;break;case OA:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=jr;break}if(r.length=u&65535,u=0,d=0,r.mode=U1,t===lg)break e;case U1:r.mode=TA;case TA:if(h=r.length,h){if(h>o&&(h=o),h>c&&(h=c),h===0)break e;i.set(n.subarray(a,a+h),s),o-=h,a+=h,c-=h,s+=h,r.length-=h;break}r.mode=to;break;case IA:for(;d<14;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=jr;break}r.have=0,r.mode=LA;case LA:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.lens[O[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},E=Ah(HH,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,E){e.msg="invalid code lengths set",r.mode=jr;break}r.have=0,r.mode=DA;case DA:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],v=x>>>24,_=x>>>16&255,S=x&65535,!(v<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(S<16)u>>>=v,d-=v,r.lens[r.have++]=S;else{if(S===16){for(T=v+2;d<T;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(u>>>=v,d-=v,r.have===0){e.msg="invalid bit length repeat",r.mode=jr;break}I=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(S===17){for(T=v+3;d<T;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=v,d-=v,I=0,h=3+(u&7),u>>>=3,d-=3}else{for(T=v+7;d<T;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=v,d-=v,I=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=jr;break}for(;h--;)r.lens[r.have++]=I}}if(r.mode===jr)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=jr;break}if(r.lenbits=9,D={bits:r.lenbits},E=Ah(FT,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,E){e.msg="invalid literal/lengths set",r.mode=jr;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},E=Ah($T,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,E){e.msg="invalid distances set",r.mode=jr;break}if(r.mode=cg,t===lg)break e;case cg:r.mode=ug;case ug:if(o>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=o,r.hold=u,r.bits=d,$H(e,p),s=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,r.mode===to&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],v=x>>>24,_=x>>>16&255,S=x&65535,!(v<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(_&&!(_&240)){for(j=v,N=_,A=S;x=r.lencode[A+((u&(1<<j+N)-1)>>j)],v=x>>>24,_=x>>>16&255,S=x&65535,!(j+v<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=v,d-=v,r.back+=v,r.length=S,_===0){r.mode=BA;break}if(_&32){r.back=-1,r.mode=to;break}if(_&64){e.msg="invalid literal/length code",r.mode=jr;break}r.extra=_&15,r.mode=RA;case RA:if(r.extra){for(T=r.extra;d<T;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=MA;case MA:for(;x=r.distcode[u&(1<<r.distbits)-1],v=x>>>24,_=x>>>16&255,S=x&65535,!(v<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(!(_&240)){for(j=v,N=_,A=S;x=r.distcode[A+((u&(1<<j+N)-1)>>j)],v=x>>>24,_=x>>>16&255,S=x&65535,!(j+v<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=v,d-=v,r.back+=v,_&64){e.msg="invalid distance code",r.mode=jr;break}r.offset=S,r.extra=_&15,r.mode=FA;case FA:if(r.extra){for(T=r.extra;d<T;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=jr;break}r.mode=$A;case $A:if(c===0)break e;if(h=p-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=jr;break}h>r.wnext?(h-=r.wnext,y=r.wsize-h):y=r.wnext-h,h>r.length&&(h=r.length),g=r.window}else g=i,y=s-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do i[s++]=g[y++];while(--h);r.length===0&&(r.mode=ug);break;case BA:if(c===0)break e;i[s++]=r.length,c--,r.mode=ug;break;case q1:if(r.wrap){for(;d<32;){if(o===0)break e;o--,u|=n[a++]<<d,d+=8}if(p-=c,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?ds(r.check,i,p,s-p):G2(r.check,i,p,s-p)),p=c,r.wrap&4&&(r.flags?u:zA(u))!==r.check){e.msg="incorrect data check",r.mode=jr;break}u=0,d=0}r.mode=UA;case UA:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=jr;break}u=0,d=0}r.mode=qA;case qA:E=KH;break e;case jr:E=BT;break e;case qT:return UT;case zT:default:return ja}return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=o,r.hold=u,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<jr&&(r.mode<q1||t!==bA))&&GT(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?ds(r.check,i,p,e.next_out-p):G2(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===to?128:0)+(r.mode===cg||r.mode===U1?256:0),(f===0&&p===0||t===bA)&&E===qc&&(E=YH),E},iV=e=>{if(cu(e))return ja;let t=e.state;return t.window&&(t.window=null),e.state=null,qc},aV=(e,t)=>{if(cu(e))return ja;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,qc):ja},sV=(e,t)=>{const r=t.length;let n,i,a;return cu(e)||(n=e.state,n.wrap!==0&&n.mode!==Mv)?ja:n.mode===Mv&&(i=1,i=G2(i,t,r,0),i!==n.check)?BT:(a=GT(e,t,r,r),a?(n.mode=qT,UT):(n.havedict=1,qc))};var oV=HT,lV=VT,cV=WT,uV=tV,dV=KT,fV=nV,hV=iV,pV=aV,mV=sV,gV="pako inflate (from Nodeca project)",ao={inflateReset:oV,inflateReset2:lV,inflateResetKeep:cV,inflateInit:uV,inflateInit2:dV,inflate:fV,inflateEnd:hV,inflateGetHeader:pV,inflateSetDictionary:mV,inflateInfo:gV};function vV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var yV=vV;const YT=Object.prototype.toString,{Z_NO_FLUSH:xV,Z_FINISH:bV,Z_OK:np,Z_STREAM_END:H1,Z_NEED_DICT:V1,Z_STREAM_ERROR:wV,Z_DATA_ERROR:HA,Z_MEM_ERROR:_V}=DT;function Op(e){this.options=RT.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new MH,this.strm.avail_out=0;let r=ao.inflateInit2(this.strm,t.windowBits);if(r!==np)throw new Error(Y2[r]);if(this.header=new yV,ao.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=J2.string2buf(t.dictionary):YT.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=ao.inflateSetDictionary(this.strm,t.dictionary),r!==np)))throw new Error(Y2[r])}Op.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?bV:xV,YT.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=ao.inflate(r,s),a===V1&&i&&(a=ao.inflateSetDictionary(r,i),a===np?a=ao.inflate(r,s):a===HA&&(a=V1));r.avail_in>0&&a===H1&&r.state.wrap>0&&e[r.next_in]!==0;)ao.inflateReset(r),a=ao.inflate(r,s);switch(a){case wV:case HA:case V1:case _V:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||a===H1))if(this.options.to==="string"){let c=J2.utf8border(r.output,r.next_out),u=r.next_out-c,d=J2.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===np&&o===0)){if(a===H1)return a=ao.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Op.prototype.onData=function(e){this.chunks.push(e)};Op.prototype.onEnd=function(e){e===np&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=RT.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function jV(e,t){const r=new Op(t);if(r.push(e),r.err)throw r.msg||Y2[r.err];return r.result}var SV=Op,NV=jV,kV={Inflate:SV,inflate:NV};const{Inflate:AV,inflate:EV}=kV;var VA=AV,PV=EV;const JT=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;JT[e]=t}const KA=4294967295;function CV(e,t,r){let n=e;for(let i=0;i<r;i++)n=JT[(n^t[i])&255]^n>>>8;return n}function OV(e,t){return(CV(KA,e,t)^KA)>>>0}function GA(e,t,r){const n=e.readUint32(),i=OV(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function XT(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function ZT(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function QT(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function eI(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-i]+r[a]>>1)&255}}function tI(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+r[a]&255;for(;a<n;a++)t[a]=e[a]+TV(t[a-i],r[a],r[a-i])&255}}function TV(e,t,r){const n=e+t-r,i=Math.abs(n-e),a=Math.abs(n-t),s=Math.abs(n-r);return i<=a&&i<=s?e:a<=s?t:r}function IV(e,t,r,n,i,a){switch(e){case 0:XT(t,r,i);break;case 1:ZT(t,r,i,a);break;case 2:QT(t,r,n,i);break;case 3:eI(t,r,n,i,a);break;case 4:tI(t,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const LV=new Uint16Array([255]),DV=new Uint8Array(LV.buffer),RV=DV[0]===255;function MV(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,c=new Uint8Array(n*r*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(p<=0||h<=0)continue;const y=p*o,g=new Uint8Array(y);for(let x=0;x<h;x++){const v=t[u++],_=t.subarray(u,u+y);u+=y;const S=new Uint8Array(y);IV(v,_,S,g,y,o),g.set(S);for(let j=0;j<p;j++){const N=f.x+j*f.xStep,A=f.y+x*f.yStep;if(!(N>=r||A>=n))for(let I=0;I<o;I++)c[(A*r+N)*o+I]=S[j*o+I]}}}if(a===16){const d=new Uint16Array(c.buffer);if(RV)for(let f=0;f<d.length;f++)d[f]=FV(d[f]);return d}else return c}function FV(e){return(e&255)<<8|e>>8&255}const $V=new Uint16Array([255]),BV=new Uint8Array($V.buffer),UV=BV[0]===255,qV=new Uint8Array(0);function YA(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*r),c=new Uint8Array(n*o);let u=qV,d=0,f,p;for(let h=0;h<n;h++){switch(f=t.subarray(d+1,d+1+o),p=c.subarray(h*o,(h+1)*o),t[d]){case 0:XT(f,p,o);break;case 1:ZT(f,p,o,s);break;case 2:QT(f,p,u,o);break;case 3:eI(f,p,u,o,s);break;case 4:tI(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=p,d+=o+1}if(a===16){const h=new Uint16Array(c.buffer);if(UV)for(let y=0;y<h.length;y++)h[y]=zV(h[y]);return h}else return c}function zV(e){return(e&255)<<8|e>>8&255}const Vg=Uint8Array.of(137,80,78,71,13,10,26,10);function JA(e){if(!WV(e.readBytes(Vg.length)))throw new Error("wrong PNG signature")}function WV(e){if(e.length<Vg.length)return!1;for(let t=0;t<Vg.length;t++)if(e[t]!==Vg[t])return!1;return!0}const HV="tEXt",VV=0,rI=new TextDecoder("latin1");function KV(e){if(YV(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const GV=/^[\u0000-\u00FF]*$/;function YV(e){if(!GV.test(e))throw new Error("invalid latin1 text")}function JV(e,t,r){const n=nI(t);e[n]=XV(t,r-n.length-1)}function nI(e){for(e.mark();e.readByte()!==VV;);const t=e.offset;e.reset();const r=rI.decode(e.readBytes(t-e.offset-1));return e.skip(1),KV(r),r}function XV(e,t){return rI.decode(e.readBytes(t))}const zi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},K1={UNKNOWN:-1,DEFLATE:0},XA={UNKNOWN:-1,ADAPTIVE:0},G1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},dg={NONE:0,BACKGROUND:1,PREVIOUS:2},Y1={SOURCE:0,OVER:1};class ZV extends m5{constructor(r,n={}){super(r);Vt(this,"_checkCrc");Vt(this,"_inflator");Vt(this,"_png");Vt(this,"_apng");Vt(this,"_end");Vt(this,"_hasPalette");Vt(this,"_palette");Vt(this,"_hasTransparency");Vt(this,"_transparency");Vt(this,"_compressionMethod");Vt(this,"_filterMethod");Vt(this,"_interlaceMethod");Vt(this,"_colorType");Vt(this,"_isAnimated");Vt(this,"_numberOfFrames");Vt(this,"_numberOfPlays");Vt(this,"_frames");Vt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new VA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=K1.UNKNOWN,this._filterMethod=XA.UNKNOWN,this._interlaceMethod=G1.UNKNOWN,this._colorType=zi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(JA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(JA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case HV:JV(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?GA(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?GA(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=QV(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case zi.GREYSCALE:i=1;break;case zi.TRUECOLOUR:i=3;break;case zi.INDEXED_COLOUR:i=1;break;case zi.GREYSCALE_ALPHA:i=2;break;case zi.TRUECOLOUR_ALPHA:i=4;break;case zi.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==K1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case zi.GREYSCALE:case zi.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case zi.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case zi.UNKNOWN:case zi.GREYSCALE_ALPHA:case zi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=nI(this),i=this.readUint8();if(i!==K1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:PV(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=YA({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case dg.NONE:break;case dg.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*r.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[o+c]=0}break;case dg.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(s,o)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(s*n.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case Y1.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case Y1.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*p+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==XA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===G1.NO_INTERLACE)this._png.data=YA({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===G1.ADAM7)this._png.data=MV({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:dg.NONE,blendOp:Y1.SOURCE,data:r}),this._inflator=new VA,this._writingDataChunks=!1}}function QV(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var ZA;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(ZA||(ZA={}));function eK(e,t){return new ZV(e,t).decode()}var vt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function J1(){vt.console&&typeof vt.console.log=="function"&&vt.console.log.apply(vt.console,arguments)}var ar={log:J1,warn:function(e){vt.console&&(typeof vt.console.warn=="function"?vt.console.warn.apply(vt.console,arguments):J1.call(null,arguments))},error:function(e){vt.console&&(typeof vt.console.error=="function"?vt.console.error.apply(vt.console,arguments):J1(e))}};function X1(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){pc(n.response,t,r)},n.onerror=function(){ar.error("could not download file")},n.send()}function QA(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function fg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var pc=vt.saveAs||((typeof window>"u"?"undefined":er(window))!=="object"||window!==vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=vt.URL||vt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?QA(i.href)?X1(e,t,r):fg(i,i.target="_blank"):fg(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){fg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(QA(e))X1(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){fg(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:er(a)!=="object"&&(ar.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return X1(e,t,r);var i=e.type==="application/octet-stream",a=/constructor/i.test(vt.HTMLElement)||vt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":er(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=vt.URL||vt.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function iI(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,s=i.exec(e);s&&(t=a(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}var Kg=vt.atob.bind(vt),e4=vt.btoa.bind(vt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z1(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];r=ei(r,n,i,a,t[0],7,-680876936),a=ei(a,r,n,i,t[1],12,-389564586),i=ei(i,a,r,n,t[2],17,606105819),n=ei(n,i,a,r,t[3],22,-1044525330),r=ei(r,n,i,a,t[4],7,-176418897),a=ei(a,r,n,i,t[5],12,1200080426),i=ei(i,a,r,n,t[6],17,-1473231341),n=ei(n,i,a,r,t[7],22,-45705983),r=ei(r,n,i,a,t[8],7,1770035416),a=ei(a,r,n,i,t[9],12,-1958414417),i=ei(i,a,r,n,t[10],17,-42063),n=ei(n,i,a,r,t[11],22,-1990404162),r=ei(r,n,i,a,t[12],7,1804603682),a=ei(a,r,n,i,t[13],12,-40341101),i=ei(i,a,r,n,t[14],17,-1502002290),r=ti(r,n=ei(n,i,a,r,t[15],22,1236535329),i,a,t[1],5,-165796510),a=ti(a,r,n,i,t[6],9,-1069501632),i=ti(i,a,r,n,t[11],14,643717713),n=ti(n,i,a,r,t[0],20,-373897302),r=ti(r,n,i,a,t[5],5,-701558691),a=ti(a,r,n,i,t[10],9,38016083),i=ti(i,a,r,n,t[15],14,-660478335),n=ti(n,i,a,r,t[4],20,-405537848),r=ti(r,n,i,a,t[9],5,568446438),a=ti(a,r,n,i,t[14],9,-1019803690),i=ti(i,a,r,n,t[3],14,-187363961),n=ti(n,i,a,r,t[8],20,1163531501),r=ti(r,n,i,a,t[13],5,-1444681467),a=ti(a,r,n,i,t[2],9,-51403784),i=ti(i,a,r,n,t[7],14,1735328473),r=ri(r,n=ti(n,i,a,r,t[12],20,-1926607734),i,a,t[5],4,-378558),a=ri(a,r,n,i,t[8],11,-2022574463),i=ri(i,a,r,n,t[11],16,1839030562),n=ri(n,i,a,r,t[14],23,-35309556),r=ri(r,n,i,a,t[1],4,-1530992060),a=ri(a,r,n,i,t[4],11,1272893353),i=ri(i,a,r,n,t[7],16,-155497632),n=ri(n,i,a,r,t[10],23,-1094730640),r=ri(r,n,i,a,t[13],4,681279174),a=ri(a,r,n,i,t[0],11,-358537222),i=ri(i,a,r,n,t[3],16,-722521979),n=ri(n,i,a,r,t[6],23,76029189),r=ri(r,n,i,a,t[9],4,-640364487),a=ri(a,r,n,i,t[12],11,-421815835),i=ri(i,a,r,n,t[15],16,530742520),r=ni(r,n=ri(n,i,a,r,t[2],23,-995338651),i,a,t[0],6,-198630844),a=ni(a,r,n,i,t[7],10,1126891415),i=ni(i,a,r,n,t[14],15,-1416354905),n=ni(n,i,a,r,t[5],21,-57434055),r=ni(r,n,i,a,t[12],6,1700485571),a=ni(a,r,n,i,t[3],10,-1894986606),i=ni(i,a,r,n,t[10],15,-1051523),n=ni(n,i,a,r,t[1],21,-2054922799),r=ni(r,n,i,a,t[8],6,1873313359),a=ni(a,r,n,i,t[15],10,-30611744),i=ni(i,a,r,n,t[6],15,-1560198380),n=ni(n,i,a,r,t[13],21,1309151649),r=ni(r,n,i,a,t[4],6,-145523070),a=ni(a,r,n,i,t[11],10,-1120210379),i=ni(i,a,r,n,t[2],15,718787259),n=ni(n,i,a,r,t[9],21,-343485551),e[0]=gl(r,e[0]),e[1]=gl(n,e[1]),e[2]=gl(i,e[2]),e[3]=gl(a,e[3])}function u0(e,t,r,n,i,a){return t=gl(gl(t,e),gl(n,a)),gl(t<<i|t>>>32-i,r)}function ei(e,t,r,n,i,a,s){return u0(t&r|~t&n,e,t,i,a,s)}function ti(e,t,r,n,i,a,s){return u0(t&n|r&~n,e,t,i,a,s)}function ri(e,t,r,n,i,a,s){return u0(t^r^n,e,t,i,a,s)}function ni(e,t,r,n,i,a,s){return u0(r^(t|~n),e,t,i,a,s)}function aI(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Z1(n,tK(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Z1(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,Z1(n,i),n}function tK(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var t4="0123456789abcdef".split("");function rK(e){for(var t="",r=0;r<4;r++)t+=t4[e>>8*r+4&15]+t4[e>>8*r&15];return t}function nK(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function X2(e){return aI(e).map(nK).join("")}var iK=function(e){for(var t=0;t<e.length;t++)e[t]=rK(e[t]);return e.join("")}(aI("hello"))!="5d41402abc4b2a76b9719d911017c592";function gl(e,t){if(iK){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Z2(e,t){var r,n,i,a;if(e!==r){for(var s=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+s.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,p=0,h=0,y="";for(c=0;c<f;c++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],y+=String.fromCharCode(t.charCodeAt(c)^s);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var r4={print:4,modify:8,copy:16,"annot-forms":32};function Gu(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(o){if(r4.perm!==void 0)throw new Error("Invalid permission: "+o);i+=r4[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=X2(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Z2(this.encryptionKey,this.padding)}function Yu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function n4(e){if(er(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[r]){var s=t[r][a];try{s[0].apply(e,n)}catch(o){vt.console&&ar.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Fv(e){if(!(this instanceof Fv))return new Fv(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function sI(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function bc(e,t,r,n,i){if(!(this instanceof bc))return new bc(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,sI.call(this,n,i)}function ud(e,t,r,n,i){if(!(this instanceof ud))return new ud(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,sI.call(this,n,i)}function at(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,c=16,u="S",d=null;er(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,a=e.compress||e.compressPdf||a,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=n4;var y="1.3",g=h.__private__.getPdfVersion=function(){return y};h.__private__.setPdfVersion=function(k){y=k};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var v=h.__private__.getPageFormat=function(k){return x[k]};i=i||"a4";var _="compat",S="advanced",j=_;function N(){this.saveGraphicsState(),V(new ut(bt,0,0,-bt,0,Zl()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",j=S}function A(){this.restoreGraphicsState(),u="S",j=_}var I=h.__private__.combineFontStyleAndFontWeight=function(k,M){if(k=="bold"&&M=="normal"||k=="bold"&&M==400||k=="normal"&&M=="italic"||k=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(k=M==400||M==="normal"?k==="italic"?"italic":"normal":M!=700&&M!=="bold"||k!=="normal"?(M==700?"bold":M)+""+k:"bold"),k};h.advancedAPI=function(k){var M=j===_;return M&&N.call(this),typeof k!="function"||(k(this),M&&A.call(this)),this},h.compatAPI=function(k){var M=j===S;return M&&A.call(this),typeof k!="function"||(k(this),M&&N.call(this)),this},h.isAdvancedAPI=function(){return j===S};var E,C=function(k){if(j!==S)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=h.roundToPrecision=h.__private__.roundToPrecision=function(k,M){var Q=t||M;if(isNaN(k)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Q).replace(/0+$/,"")};E=h.hpf=h.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return D(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return D(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return D(k,16)};var T=h.f2=h.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return D(k,2)},O=h.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return D(k,3)},q=h.scale=h.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return j===_?k*bt:j===S?k:void 0},K=function(k){return q(function(M){return j===_?Zl()-M:j===S?M:void 0}(k))};h.__private__.setPrecision=h.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var ne,re="00000000000000000000000000000000",te=h.__private__.getFileId=function(){return re},W=h.__private__.setFileId=function(k){return re=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(fn=new Gu(d.userPermissions,d.userPassword,d.ownerPassword,re)),re};h.setFileId=function(k){return W(k),this},h.getFileId=function(){return te()};var B=h.__private__.convertDateToPDFDate=function(k){var M=k.getTimezoneOffset(),Q=M<0?"+":"-",se=Math.floor(Math.abs(M/60)),me=Math.abs(M%60),ke=[Q,J(se),"'",J(me),"'"].join("");return["D:",k.getFullYear(),J(k.getMonth()+1),J(k.getDate()),J(k.getHours()),J(k.getMinutes()),J(k.getSeconds()),ke].join("")},le=h.__private__.convertPDFDateToDate=function(k){var M=parseInt(k.substr(2,4),10),Q=parseInt(k.substr(6,2),10)-1,se=parseInt(k.substr(8,2),10),me=parseInt(k.substr(10,2),10),ke=parseInt(k.substr(12,2),10),Oe=parseInt(k.substr(14,2),10);return new Date(M,Q,se,me,ke,Oe,0)},G=h.__private__.setCreationDate=function(k){var M;if(k===void 0&&(k=new Date),k instanceof Date)M=B(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=k}return ne=M},R=h.__private__.getCreationDate=function(k){var M=ne;return k==="jsDate"&&(M=le(ne)),M};h.setCreationDate=function(k){return G(k),this},h.getCreationDate=function(k){return R(k)};var z,J=h.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},ie=h.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ae=0,ue=[],pe=[],ee=0,he=[],oe=[],de=!1,Ce=pe;h.__private__.setCustomOutputDestination=function(k){de=!0,Ce=k};var Pe=function(k){de||(Ce=k)};h.__private__.resetCustomOutputDestination=function(){de=!1,Ce=pe};var V=h.__private__.out=function(k){return k=k.toString(),ee+=k.length+1,Ce.push(k),Ce},je=h.__private__.write=function(k){return V(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Je=h.__private__.getArrayBuffer=function(k){for(var M=k.length,Q=new ArrayBuffer(M),se=new Uint8Array(Q);M--;)se[M]=k.charCodeAt(M);return Q},De=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return De};var Se=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(k){return Se=j===S?k/bt:k,this};var et,Fe=h.__private__.getFontSize=h.getFontSize=function(){return j===_?Se:Se*bt},Ke=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(k){return Ke=k,this},h.__private__.getR2L=h.getR2L=function(){return Ke};var tt,mt=h.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))et=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');et=k}else et=parseInt(k,10)};h.__private__.getZoomMode=function(){return et};var gt,Xe=h.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');tt=k};h.__private__.getPageMode=function(){return tt};var lt=h.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');gt=k};h.__private__.getLayoutMode=function(){return gt},h.__private__.setDisplayMode=h.setDisplayMode=function(k,M,Q){return mt(k),lt(M),Xe(Q),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(k){if(Object.keys(yt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[k]},h.__private__.getDocumentProperties=function(){return yt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(k){for(var M in yt)yt.hasOwnProperty(M)&&k[M]&&(yt[M]=k[M]);return this},h.__private__.setDocumentProperty=function(k,M){if(Object.keys(yt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[k]=M};var Ge,bt,We,qt,Ct,Nt={},Ot={},wr=[],st={},lr={},ht={},jt={},_r=null,Tt=0,ct=[],Kt=new n4(h),Wl=e.hotfixes||[],Jn={},Ds={},ts=[],ut=function k(M,Q,se,me,ke,Oe){if(!(this instanceof k))return new k(M,Q,se,me,ke,Oe);isNaN(M)&&(M=1),isNaN(Q)&&(Q=0),isNaN(se)&&(se=0),isNaN(me)&&(me=1),isNaN(ke)&&(ke=0),isNaN(Oe)&&(Oe=0),this._matrix=[M,Q,se,me,ke,Oe]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ut.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(k)},ut.prototype.multiply=function(k){var M=k.sx*this.sx+k.shy*this.shx,Q=k.sx*this.shy+k.shy*this.sy,se=k.shx*this.sx+k.sy*this.shx,me=k.shx*this.shy+k.sy*this.sy,ke=k.tx*this.sx+k.ty*this.shx+this.tx,Oe=k.tx*this.shy+k.ty*this.sy+this.ty;return new ut(M,Q,se,me,ke,Oe)},ut.prototype.decompose=function(){var k=this.sx,M=this.shy,Q=this.shx,se=this.sy,me=this.tx,ke=this.ty,Oe=Math.sqrt(k*k+M*M),Ye=(k/=Oe)*Q+(M/=Oe)*se;Q-=k*Ye,se-=M*Ye;var rt=Math.sqrt(Q*Q+se*se);return Ye/=rt,k*(se/=rt)<M*(Q/=rt)&&(k=-k,M=-M,Ye=-Ye,Oe=-Oe),{scale:new ut(Oe,0,0,rt,0,0),translate:new ut(1,0,0,1,me,ke),rotate:new ut(k,M,-M,k,0,0),skew:new ut(1,0,Ye,1,0,0)}},ut.prototype.toString=function(k){return this.join(" ")},ut.prototype.inversed=function(){var k=this.sx,M=this.shy,Q=this.shx,se=this.sy,me=this.tx,ke=this.ty,Oe=1/(k*se-M*Q),Ye=se*Oe,rt=-M*Oe,xt=-Q*Oe,kt=k*Oe;return new ut(Ye,rt,xt,kt,-Ye*me-xt*ke,-rt*me-kt*ke)},ut.prototype.applyToPoint=function(k){var M=k.x*this.sx+k.y*this.shx+this.tx,Q=k.x*this.shy+k.y*this.sy+this.ty;return new qs(M,Q)},ut.prototype.applyToRectangle=function(k){var M=this.applyToPoint(k),Q=this.applyToPoint(new qs(k.x+k.w,k.y+k.h));return new bf(M.x,M.y,Q.x-M.x,Q.y-M.y)},ut.prototype.clone=function(){var k=this.sx,M=this.shy,Q=this.shx,se=this.sy,me=this.tx,ke=this.ty;return new ut(k,M,Q,se,me,ke)},h.Matrix=ut;var Rs=h.matrixMult=function(k,M){return M.multiply(k)},Ms=new ut(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ms;var na=function(k,M){if(!lr[k]){var Q=(M instanceof bc?"Sh":"P")+(Object.keys(st).length+1).toString(10);M.id=Q,lr[k]=Q,st[Q]=M,Kt.publish("addPattern",M)}};h.ShadingPattern=bc,h.TilingPattern=ud,h.addShadingPattern=function(k,M){return C("addShadingPattern()"),na(k,M),this},h.beginTilingPattern=function(k){C("beginTilingPattern()"),wf(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},h.endTilingPattern=function(k,M){C("endTilingPattern()"),M.stream=oe[z].join(`
`),na(k,M),Kt.publish("endTilingPattern",M),ts.pop().restore()};var ia,Dr=h.__private__.newObject=function(){var k=Nn();return Rn(k,!0),k},Nn=h.__private__.newObjectDeferred=function(){return ae++,ue[ae]=function(){return ee},ae},Rn=function(k,M){return M=typeof M=="boolean"&&M,ue[k]=ee,M&&V(k+" 0 obj"),k},Hl=h.__private__.newAdditionalObject=function(){var k={objId:Nn(),content:""};return he.push(k),k},$o=Nn(),Ea=Nn(),rs=h.__private__.decodeColorString=function(k){var M=k.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var Q=parseFloat(M[0]);M=[Q,Q,Q,"r"]}for(var se="#",me=0;me<3;me++)se+=("0"+Math.floor(255*parseFloat(M[me])).toString(16)).slice(-2);return se},Pa=h.__private__.encodeColorString=function(k){var M;typeof k=="string"&&(k={ch1:k});var Q=k.ch1,se=k.ch2,me=k.ch3,ke=k.ch4,Oe=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var Ye=new iI(Q);if(Ye.ok)Q=Ye.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var rt=parseInt(Q.substr(1),16);Q=rt>>16&255,se=rt>>8&255,me=255&rt}if(se===void 0||ke===void 0&&Q===se&&se===me)M=typeof Q=="string"?Q+" "+Oe[0]:k.precision===2?T(Q/255)+" "+Oe[0]:O(Q/255)+" "+Oe[0];else if(ke===void 0||er(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",Oe[1]].join(" ");M=typeof Q=="string"?[Q,se,me,Oe[1]].join(" "):k.precision===2?[T(Q/255),T(se/255),T(me/255),Oe[1]].join(" "):[O(Q/255),O(se/255),O(me/255),Oe[1]].join(" ")}else M=typeof Q=="string"?[Q,se,me,ke,Oe[2]].join(" "):k.precision===2?[T(Q),T(se),T(me),T(ke),Oe[2]].join(" "):[O(Q),O(se),O(me),O(ke),Oe[2]].join(" ");return M},Ca=h.__private__.getFilters=function(){return s},aa=h.__private__.putStream=function(k){var M=(k=k||{}).data||"",Q=k.filters||Ca(),se=k.alreadyAppliedFilters||[],me=k.addLength1||!1,ke=M.length,Oe=k.objectId,Ye=function(hn){return hn};if(d!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ye=fn.encryptor(Oe,0));var rt={};Q===!0&&(Q=["FlateEncode"]);var xt=k.additionalKeyValues||[],kt=(rt=at.API.processDataByFilters!==void 0?at.API.processDataByFilters(M,Q):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(rt.data.length!==0&&(xt.push({key:"Length",value:rt.data.length}),me===!0&&xt.push({key:"Length1",value:ke})),kt.length!=0)if(kt.split("/").length-1==1)xt.push({key:"Filter",value:kt});else{xt.push({key:"Filter",value:"["+kt+"]"});for(var Ft=0;Ft<xt.length;Ft+=1)if(xt[Ft].key==="DecodeParms"){for(var Pr=[],nn=0;nn<rt.reverseChain.split("/").length-1;nn+=1)Pr.push("null");Pr.push(xt[Ft].value),xt[Ft].value="["+Pr.join(" ")+"]"}}V("<<");for(var cr=0;cr<xt.length;cr++)V("/"+xt[cr].key+" "+xt[cr].value);V(">>"),rt.data.length!==0&&(V("stream"),V(Ye(rt.data)),V("endstream"))},Vl=h.__private__.putPage=function(k){var M=k.number,Q=k.data,se=k.objId,me=k.contentsObjId;Rn(se,!0),V("<</Type /Page"),V("/Parent "+k.rootDictionaryObjId+" 0 R"),V("/Resources "+k.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(E(k.mediaBox.bottomLeftX))+" "+parseFloat(E(k.mediaBox.bottomLeftY))+" "+E(k.mediaBox.topRightX)+" "+E(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&V("/CropBox ["+E(k.cropBox.bottomLeftX)+" "+E(k.cropBox.bottomLeftY)+" "+E(k.cropBox.topRightX)+" "+E(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&V("/BleedBox ["+E(k.bleedBox.bottomLeftX)+" "+E(k.bleedBox.bottomLeftY)+" "+E(k.bleedBox.topRightX)+" "+E(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&V("/TrimBox ["+E(k.trimBox.bottomLeftX)+" "+E(k.trimBox.bottomLeftY)+" "+E(k.trimBox.topRightX)+" "+E(k.trimBox.topRightY)+"]"),k.artBox!==null&&V("/ArtBox ["+E(k.artBox.bottomLeftX)+" "+E(k.artBox.bottomLeftY)+" "+E(k.artBox.topRightX)+" "+E(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&V("/UserUnit "+k.userUnit),Kt.publish("putPage",{objId:se,pageContext:ct[M],pageNumber:M,page:Q}),V("/Contents "+me+" 0 R"),V(">>"),V("endobj");var ke=Q.join(`
`);return j===S&&(ke+=`
Q`),Rn(me,!0),aa({data:ke,filters:Ca(),objectId:me}),V("endobj"),se},ns=h.__private__.putPages=function(){var k,M,Q=[];for(k=1;k<=Tt;k++)ct[k].objId=Nn(),ct[k].contentsObjId=Nn();for(k=1;k<=Tt;k++)Q.push(Vl({number:k,data:oe[k],objId:ct[k].objId,contentsObjId:ct[k].contentsObjId,mediaBox:ct[k].mediaBox,cropBox:ct[k].cropBox,bleedBox:ct[k].bleedBox,trimBox:ct[k].trimBox,artBox:ct[k].artBox,userUnit:ct[k].userUnit,rootDictionaryObjId:$o,resourceDictionaryObjId:Ea}));Rn($o,!0),V("<</Type /Pages");var se="/Kids [";for(M=0;M<Tt;M++)se+=Q[M]+" 0 R ";V(se+"]"),V("/Count "+Tt),V(">>"),V("endobj"),Kt.publish("postPutPages")},Kl=function(k){Kt.publish("putFont",{font:k,out:V,newObject:Dr,putStream:aa}),k.isAlreadyPutted!==!0&&(k.objectNumber=Dr(),V("<<"),V("/Type /Font"),V("/BaseFont /"+Yu(k.postScriptName)),V("/Subtype /Type1"),typeof k.encoding=="string"&&V("/Encoding /"+k.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},yu=function(k){k.objectNumber=Dr();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[E(k.x),E(k.y),E(k.x+k.width),E(k.y+k.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Q=k.pages[1].join(`
`);aa({data:Q,additionalKeyValues:M,objectId:k.objectNumber}),V("endobj")},xu=function(k,M){M||(M=21);var Q=Dr(),se=function(Oe,Ye){var rt,xt=[],kt=1/(Ye-1);for(rt=0;rt<1;rt+=kt)xt.push(rt);if(xt.push(1),Oe[0].offset!=0){var Ft={offset:0,color:Oe[0].color};Oe.unshift(Ft)}if(Oe[Oe.length-1].offset!=1){var Pr={offset:1,color:Oe[Oe.length-1].color};Oe.push(Pr)}for(var nn="",cr=0,hn=0;hn<xt.length;hn++){for(rt=xt[hn];rt>Oe[cr+1].offset;)cr++;var an=Oe[cr].offset,Mn=(rt-an)/(Oe[cr+1].offset-an),Hs=Oe[cr].color,Ta=Oe[cr+1].color;nn+=ie(Math.round((1-Mn)*Hs[0]+Mn*Ta[0]).toString(16))+ie(Math.round((1-Mn)*Hs[1]+Mn*Ta[1]).toString(16))+ie(Math.round((1-Mn)*Hs[2]+Mn*Ta[2]).toString(16))}return nn.trim()}(k.colors,M),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+M+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),aa({data:se,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),V("endobj"),k.objectNumber=Dr(),V("<< /ShadingType "+k.type),V("/ColorSpace /DeviceRGB");var ke="/Coords ["+E(parseFloat(k.coords[0]))+" "+E(parseFloat(k.coords[1]))+" ";k.type===2?ke+=E(parseFloat(k.coords[2]))+" "+E(parseFloat(k.coords[3])):ke+=E(parseFloat(k.coords[2]))+" "+E(parseFloat(k.coords[3]))+" "+E(parseFloat(k.coords[4]))+" "+E(parseFloat(k.coords[5])),V(ke+="]"),k.matrix&&V("/Matrix ["+k.matrix.toString()+"]"),V("/Function "+Q+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},bu=function(k,M){var Q=Nn(),se=Dr();M.push({resourcesOid:Q,objectOid:se}),k.objectNumber=se;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+k.boundingBox.map(E).join(" ")+"]"}),me.push({key:"XStep",value:E(k.xStep)}),me.push({key:"YStep",value:E(k.yStep)}),me.push({key:"Resources",value:Q+" 0 R"}),k.matrix&&me.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),aa({data:k.stream,additionalKeyValues:me,objectId:k.objectNumber}),V("endobj")},_x=function(k){for(var M in k.objectNumber=Dr(),V("<<"),k)switch(M){case"opacity":V("/ca "+T(k[M]));break;case"stroke-opacity":V("/CA "+T(k[M]))}V(">>"),V("endobj")},ff=function(k){Rn(k.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var M in V("/Font <<"),Nt)Nt.hasOwnProperty(M)&&(f===!1||f===!0&&p.hasOwnProperty(M))&&V("/"+M+" "+Nt[M].objectNumber+" 0 R");V(">>")}(),function(){if(Object.keys(st).length>0){for(var M in V("/Shading <<"),st)st.hasOwnProperty(M)&&st[M]instanceof bc&&st[M].objectNumber>=0&&V("/"+M+" "+st[M].objectNumber+" 0 R");Kt.publish("putShadingPatternDict"),V(">>")}}(),function(M){if(Object.keys(st).length>0){for(var Q in V("/Pattern <<"),st)st.hasOwnProperty(Q)&&st[Q]instanceof h.TilingPattern&&st[Q].objectNumber>=0&&st[Q].objectNumber<M&&V("/"+Q+" "+st[Q].objectNumber+" 0 R");Kt.publish("putTilingPatternDict"),V(">>")}}(k.objectOid),function(){if(Object.keys(ht).length>0){var M;for(M in V("/ExtGState <<"),ht)ht.hasOwnProperty(M)&&ht[M].objectNumber>=0&&V("/"+M+" "+ht[M].objectNumber+" 0 R");Kt.publish("putGStateDict"),V(">>")}}(),function(){for(var M in V("/XObject <<"),Jn)Jn.hasOwnProperty(M)&&Jn[M].objectNumber>=0&&V("/"+M+" "+Jn[M].objectNumber+" 0 R");Kt.publish("putXobjectDict"),V(">>")}(),V(">>"),V("endobj")},rm=function(k){Ot[k.fontName]=Ot[k.fontName]||{},Ot[k.fontName][k.fontStyle]=k.id},nm=function(k,M,Q,se,me){var ke={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:k,fontName:M,fontStyle:Q,encoding:se,isStandardFont:me||!1,metadata:{}};return Kt.publish("addFont",{font:ke,instance:this}),Nt[ke.id]=ke,rm(ke),ke.id},sa=h.__private__.pdfEscape=h.pdfEscape=function(k,M){return function(Q,se){var me,ke,Oe,Ye,rt,xt,kt,Ft,Pr;if(Oe=(se=se||{}).sourceEncoding||"Unicode",rt=se.outputEncoding,(se.autoencode||rt)&&Nt[Ge].metadata&&Nt[Ge].metadata[Oe]&&Nt[Ge].metadata[Oe].encoding&&(Ye=Nt[Ge].metadata[Oe].encoding,!rt&&Nt[Ge].encoding&&(rt=Nt[Ge].encoding),!rt&&Ye.codePages&&(rt=Ye.codePages[0]),typeof rt=="string"&&(rt=Ye[rt]),rt)){for(kt=!1,xt=[],me=0,ke=Q.length;me<ke;me++)(Ft=rt[Q.charCodeAt(me)])?xt.push(String.fromCharCode(Ft)):xt.push(Q[me]),xt[me].charCodeAt(0)>>8&&(kt=!0);Q=xt.join("")}for(me=Q.length;kt===void 0&&me!==0;)Q.charCodeAt(me-1)>>8&&(kt=!0),me--;if(!kt)return Q;for(xt=se.noBOM?[]:[254,255],me=0,ke=Q.length;me<ke;me++){if((Pr=(Ft=Q.charCodeAt(me))>>8)>>8)throw new Error("Character at position "+me+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xt.push(Pr),xt.push(Ft-(Pr<<8))}return String.fromCharCode.apply(void 0,xt)}(k,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hf=h.__private__.beginPage=function(k){oe[++Tt]=[],ct[Tt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},am(Tt),Pe(oe[z])},im=function(k,M){var Q,se,me;switch(r=M||r,typeof k=="string"&&(Q=v(k.toLowerCase()),Array.isArray(Q)&&(se=Q[0],me=Q[1])),Array.isArray(k)&&(se=k[0]*bt,me=k[1]*bt),isNaN(se)&&(se=i[0],me=i[1]),(se>14400||me>14400)&&(ar.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),me=Math.min(14400,me)),i=[se,me],r.substr(0,1)){case"l":me>se&&(i=[me,se]);break;case"p":se>me&&(i=[me,se])}hf(i),wt(gf),V(Su),yf!==0&&V(yf+" J"),xf!==0&&V(xf+" j"),Kt.publish("addPage",{pageNumber:Tt})},pf=function(k){k>0&&k<=Tt&&(oe.splice(k,1),ct.splice(k,1),Tt--,z>Tt&&(z=Tt),this.setPage(z))},am=function(k){k>0&&k<=Tt&&(z=k)},sm=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return oe.length-1},om=function(k,M,Q){var se,me=void 0;return Q=Q||{},k=k!==void 0?k:Nt[Ge].fontName,M=M!==void 0?M:Nt[Ge].fontStyle,se=k.toLowerCase(),Ot[se]!==void 0&&Ot[se][M]!==void 0?me=Ot[se][M]:Ot[k]!==void 0&&Ot[k][M]!==void 0?me=Ot[k][M]:Q.disableWarning===!1&&ar.warn("Unable to look up font label for font '"+k+"', '"+M+"'. Refer to getFontList() for available fonts."),me||Q.noFallback||(me=Ot.times[M])==null&&(me=Ot.times.normal),me},is=h.__private__.putInfo=function(){var k=Dr(),M=function(se){return se};for(var Q in d!==null&&(M=fn.encryptor(k,0)),V("<<"),V("/Producer ("+sa(M("jsPDF "+at.version))+")"),yt)yt.hasOwnProperty(Q)&&yt[Q]&&V("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+sa(M(yt[Q]))+")");V("/CreationDate ("+sa(M(ne))+")"),V(">>"),V("endobj")},wu=h.__private__.putCatalog=function(k){var M=(k=k||{}).rootDictionaryObjId||$o;switch(Dr(),V("<<"),V("/Type /Catalog"),V("/Pages "+M+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+et;Q.substr(Q.length-1)==="%"&&(et=parseInt(et)/100),typeof et=="number"&&V("/OpenAction [3 0 R /XYZ null null "+T(et)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}tt&&V("/PageMode /"+tt),Kt.publish("putCatalog"),V(">>"),V("endobj")},jx=h.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(ae+1)),V("/Root "+ae+" 0 R"),V("/Info "+(ae-1)+" 0 R"),d!==null&&V("/Encrypt "+fn.oid+" 0 R"),V("/ID [ <"+re+"> <"+re+"> ]"),V(">>")},rn=h.__private__.putHeader=function(){V("%PDF-"+y),V("%")},lm=h.__private__.putXRef=function(){var k="0000000000";V("xref"),V("0 "+(ae+1)),V("0000000000 65535 f ");for(var M=1;M<=ae;M++)typeof ue[M]=="function"?V((k+ue[M]()).slice(-10)+" 00000 n "):ue[M]!==void 0?V((k+ue[M]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},as=h.__private__.buildDocument=function(){var k;ae=0,ee=0,pe=[],ue=[],he=[],$o=Nn(),Ea=Nn(),Pe(pe),Kt.publish("buildDocument"),rn(),ns(),function(){Kt.publish("putAdditionalObjects");for(var Q=0;Q<he.length;Q++){var se=he[Q];Rn(se.objId,!0),V(se.content),V("endobj")}Kt.publish("postPutAdditionalObjects")}(),k=[],function(){for(var Q in Nt)Nt.hasOwnProperty(Q)&&(f===!1||f===!0&&p.hasOwnProperty(Q))&&Kl(Nt[Q])}(),function(){var Q;for(Q in ht)ht.hasOwnProperty(Q)&&_x(ht[Q])}(),function(){for(var Q in Jn)Jn.hasOwnProperty(Q)&&yu(Jn[Q])}(),function(Q){var se;for(se in st)st.hasOwnProperty(se)&&(st[se]instanceof bc?xu(st[se]):st[se]instanceof ud&&bu(st[se],Q))}(k),Kt.publish("putResources"),k.forEach(ff),ff({resourcesOid:Ea,objectOid:Number.MAX_SAFE_INTEGER}),Kt.publish("postPutResources"),d!==null&&(fn.oid=Dr(),V("<<"),V("/Filter /Standard"),V("/V "+fn.v),V("/R "+fn.r),V("/U <"+fn.toHexString(fn.U)+">"),V("/O <"+fn.toHexString(fn.O)+">"),V("/P "+fn.P),V(">>"),V("endobj")),is(),wu();var M=ee;return lm(),jx(),V("startxref"),V(""+M),V("%%EOF"),Pe(oe[z]),pe.join(`
`)},_u=h.__private__.getBlob=function(k){return new Blob([Je(k)],{type:"application/pdf"})},cm=h.output=h.__private__.output=(ia=function(k,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",k){case void 0:return as();case"save":h.save(M.filename);break;case"arraybuffer":return Je(as());case"blob":return _u(as());case"bloburi":case"bloburl":if(vt.URL!==void 0&&typeof vt.URL.createObjectURL=="function")return vt.URL&&vt.URL.createObjectURL(_u(as()))||void 0;ar.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",se=as();try{Q=e4(se)}catch{Q=e4(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+M.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(me=M.pdfObjectUrl,ke="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",Ye=vt.open();return Ye!==null&&Ye.document.write(Oe),Ye}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',xt=vt.open();if(xt!==null){xt.document.write(rt);var kt=this;xt.document.documentElement.querySelector("#pdfViewer").onload=function(){xt.document.title=M.filename,xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(kt.output("bloburl"))}}return xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',Pr=vt.open();if(Pr!==null&&(Pr.document.write(Ft),Pr.document.title=M.filename),Pr||typeof safari>"u")return Pr;break;case"datauri":case"dataurl":return vt.document.location.href=this.output("datauristring",M);default:return null}},ia.foo=function(){try{return ia.apply(this,arguments)}catch(Q){var k=Q.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var M="Error in function "+k.split(`
`)[0].split("<")[0]+": "+Q.message;if(!vt.console)throw new Error(M);vt.console.error(M,Q),vt.alert&&alert(M)}},ia.foo.bar=ia,ia.foo),oa=function(k){return Array.isArray(Wl)===!0&&Wl.indexOf(k)>-1};switch(n){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=oa("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);bt=n}var fn=null;G(),W();var Fs=h.__private__.getPageInfo=h.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ct[k].objId,pageNumber:k,pageContext:ct[k]}},um=h.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in ct)if(ct[M].objId===k)break;return Fs(M)},Sx=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:ct[z].objId,pageNumber:z,pageContext:ct[z]}};h.addPage=function(){return im.apply(this,arguments),this},h.setPage=function(){return am.apply(this,arguments),Pe.call(this,oe[z]),this},h.insertPage=function(k){return this.addPage(),this.movePage(z,k),this},h.movePage=function(k,M){var Q,se;if(k>M){Q=oe[k],se=ct[k];for(var me=k;me>M;me--)oe[me]=oe[me-1],ct[me]=ct[me-1];oe[M]=Q,ct[M]=se,this.setPage(M)}else if(k<M){Q=oe[k],se=ct[k];for(var ke=k;ke<M;ke++)oe[ke]=oe[ke+1],ct[ke]=ct[ke+1];oe[M]=Q,ct[M]=se,this.setPage(M)}return this},h.deletePage=function(){return pf.apply(this,arguments),this},h.__private__.text=h.text=function(k,M,Q,se,me){var ke,Oe,Ye,rt,xt,kt,Ft,Pr,nn,cr=(se=se||{}).scope||this;if(typeof k=="number"&&typeof M=="number"&&(typeof Q=="string"||Array.isArray(Q))){var hn=Q;Q=M,M=k,k=hn}if(arguments[3]instanceof ut==0?(Ye=arguments[4],rt=arguments[5],er(Ft=arguments[3])==="object"&&Ft!==null||(typeof Ye=="string"&&(rt=Ye,Ye=null),typeof Ft=="string"&&(rt=Ft,Ft=null),typeof Ft=="number"&&(Ye=Ft,Ft=null),se={flags:Ft,angle:Ye,align:rt})):(C("The transform parameter of text() with a Matrix value"),nn=me),isNaN(M)||isNaN(Q)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return cr;var an,Mn="",Hs=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:Yl,Ta=cr.internal.scaleFactor;function Vs(Gt){return Gt=Gt.split("	").join(Array(se.TabLen||9).join(" ")),sa(Gt,Ft)}function jf(Gt){for(var nr,Gr=Gt.concat(),pn=[],Ys=Gr.length;Ys--;)typeof(nr=Gr.shift())=="string"?pn.push(nr):Array.isArray(Gt)&&(nr.length===1||nr[1]===void 0&&nr[2]===void 0)?pn.push(nr[0]):pn.push([nr[0],nr[1],nr[2]]);return pn}function ku(Gt,nr){var Gr;if(typeof Gt=="string")Gr=nr(Gt)[0];else if(Array.isArray(Gt)){for(var pn,Ys,If=Gt.concat(),Pu=[],wm=If.length;wm--;)typeof(pn=If.shift())=="string"?Pu.push(nr(pn)[0]):Array.isArray(pn)&&typeof pn[0]=="string"&&(Ys=nr(pn[0],pn[1],pn[2]),Pu.push([Ys[0],Ys[1],Ys[2]]));Gr=Pu}return Gr}var Bo=!1,Ql=!0;if(typeof k=="string")Bo=!0;else if(Array.isArray(k)){var ec=k.concat();Oe=[];for(var Uo,Fn=ec.length;Fn--;)(typeof(Uo=ec.shift())!="string"||Array.isArray(Uo)&&typeof Uo[0]!="string")&&(Ql=!1);Bo=Ql}if(Bo===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var tc=Se/cr.internal.scaleFactor,rc=tc*(Hs-1);switch(se.baseline){case"bottom":Q-=rc;break;case"top":Q+=tc-rc;break;case"hanging":Q+=tc-2*rc;break;case"middle":Q+=tc/2-rc}if((kt=se.maxWidth||0)>0&&(typeof k=="string"?k=cr.splitTextToSize(k,kt):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Gt,nr){return Gt.concat(cr.splitTextToSize(nr,kt))},[]))),ke={text:k,x:M,y:Q,options:se,mutex:{pdfEscape:sa,activeFontKey:Ge,fonts:Nt,activeFontSize:Se}},Kt.publish("preProcessText",ke),k=ke.text,Ye=(se=ke.options).angle,nn instanceof ut==0&&Ye&&typeof Ye=="number"){Ye*=Math.PI/180,se.rotationDirection===0&&(Ye=-Ye),j===S&&(Ye=-Ye);var Sf=Math.cos(Ye),Nf=Math.sin(Ye);nn=new ut(Sf,Nf,-Nf,Sf,0,0)}else Ye&&Ye instanceof ut&&(nn=Ye);j!==S||nn||(nn=Ms),(xt=se.charSpace||Us)!==void 0&&(Mn+=E(q(xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pr=se.horizontalScale)!==void 0&&(Mn+=E(100*Pr)+` Tz
`),se.lang;var ui=-1,Ks=se.renderingMode!==void 0?se.renderingMode:se.stroke,Au=cr.internal.getCurrentPageInfo().pageContext;switch(Ks){case 0:case!1:case"fill":ui=0;break;case 1:case!0:case"stroke":ui=1;break;case 2:case"fillThenStroke":ui=2;break;case 3:case"invisible":ui=3;break;case 4:case"fillAndAddForClipping":ui=4;break;case 5:case"strokeAndAddPathForClipping":ui=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ui=6;break;case 7:case"addToPathForClipping":ui=7}var xm=Au.usedRenderingMode!==void 0?Au.usedRenderingMode:-1;ui!==-1?Mn+=ui+` Tr
`:xm!==-1&&(Mn+=`0 Tr
`),ui!==-1&&(Au.usedRenderingMode=ui),rt=se.align||"left";var la,nc=Se*Hs,kf=cr.internal.pageSize.getWidth(),Af=Nt[Ge];xt=se.charSpace||Us,kt=se.maxWidth||0,Ft=Object.assign({autoencode:!0,noBOM:!0},se.flags);var qo=[],ic=function(Gt){return cr.getStringUnitWidth(Gt,{font:Af,charSpace:xt,fontSize:Se,doKerning:!1})*Se/Ta};if(Object.prototype.toString.call(k)==="[object Array]"){var Di;Oe=jf(k),rt!=="left"&&(la=Oe.map(ic));var Ri,zo=0;if(rt==="right"){M-=la[0],k=[],Fn=Oe.length;for(var Gs=0;Gs<Fn;Gs++)Gs===0?(Ri=$s(M),Di=Bs(Q)):(Ri=q(zo-la[Gs]),Di=-nc),k.push([Oe[Gs],Ri,Di]),zo=la[Gs]}else if(rt==="center"){M-=la[0]/2,k=[],Fn=Oe.length;for(var Wo=0;Wo<Fn;Wo++)Wo===0?(Ri=$s(M),Di=Bs(Q)):(Ri=q((zo-la[Wo])/2),Di=-nc),k.push([Oe[Wo],Ri,Di]),zo=la[Wo]}else if(rt==="left"){k=[],Fn=Oe.length;for(var Ef=0;Ef<Fn;Ef++)k.push(Oe[Ef])}else if(rt==="justify"&&Af.encoding==="Identity-H"){k=[],Fn=Oe.length,kt=kt!==0?kt:kf;for(var Eu=0,Kr=0;Kr<Fn;Kr++)if(Di=Kr===0?Bs(Q):-nc,Ri=Kr===0?$s(M):Eu,Kr<Fn-1){var bm=q((kt-la[Kr])/(Oe[Kr].split(" ").length-1)),os=Oe[Kr].split(" ");k.push([os[0]+" ",Ri,Di]),Eu=0;for(var ls=1;ls<os.length;ls++){var Pf=(ic(os[ls-1]+" "+os[ls])-ic(os[ls]))*Ta+bm;ls==os.length-1?k.push([os[ls],Pf,0]):k.push([os[ls]+" ",Pf,0]),Eu-=Pf}}else k.push([Oe[Kr],Ri,Di]);k.push(["",Eu,0])}else{if(rt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Fn=Oe.length,kt=kt!==0?kt:kf,Kr=0;Kr<Fn;Kr++){Di=Kr===0?Bs(Q):-nc,Ri=Kr===0?$s(M):0;var Cf=Oe[Kr].split(" ").length-1,Of=Cf>0?(kt-la[Kr])/Cf:0;Kr<Fn-1?qo.push(E(q(Of))):qo.push(0),k.push([Oe[Kr],Ri,Di])}}}(typeof se.R2L=="boolean"?se.R2L:Ke)===!0&&(k=ku(k,function(Gt,nr,Gr){return[Gt.split("").reverse().join(""),nr,Gr]})),ke={text:k,x:M,y:Q,options:se,mutex:{pdfEscape:sa,activeFontKey:Ge,fonts:Nt,activeFontSize:Se}},Kt.publish("postProcessText",ke),k=ke.text,an=ke.mutex.isHex||!1;var Tf=Nt[Ge].encoding;Tf!=="WinAnsiEncoding"&&Tf!=="StandardEncoding"||(k=ku(k,function(Gt,nr,Gr){return[Vs(Gt),nr,Gr]})),Oe=jf(k),k=[];for(var Ho,Vo,Ko,ac=Array.isArray(Oe[0])?1:0,Go="",sc=function(Gt,nr,Gr){var pn="";return Gr instanceof ut?(Gr=typeof se.angle=="number"?Rs(Gr,new ut(1,0,0,1,Gt,nr)):Rs(new ut(1,0,0,1,Gt,nr),Gr),j===S&&(Gr=Rs(new ut(1,0,0,-1,0,0),Gr)),pn=Gr.join(" ")+` Tm
`):pn=E(Gt)+" "+E(nr)+` Td
`,pn},ca=0;ca<Oe.length;ca++){switch(Go="",ac){case 1:Ko=(an?"<":"(")+Oe[ca][0]+(an?">":")"),Ho=parseFloat(Oe[ca][1]),Vo=parseFloat(Oe[ca][2]);break;case 0:Ko=(an?"<":"(")+Oe[ca]+(an?">":")"),Ho=$s(M),Vo=Bs(Q)}qo!==void 0&&qo[ca]!==void 0&&(Go=qo[ca]+` Tw
`),ca===0?k.push(Go+sc(Ho,Vo,nn)+Ko):ac===0?k.push(Go+Ko):ac===1&&k.push(Go+sc(Ho,Vo,nn)+Ko)}k=ac===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var cs=`BT
/`;return cs+=Ge+" "+Se+` Tf
`,cs+=E(Se*Hs)+` TL
`,cs+=Jl+`
`,cs+=Mn,cs+=k,V(cs+="ET"),p[Ge]=!0,cr};var Nx=h.__private__.clip=h.clip=function(k){return V(k==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Nx("evenodd")},h.__private__.discardPath=h.discardPath=function(){return V("n"),this};var ss=h.__private__.isValidStyle=function(k){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(M=!0),M};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(k){return ss(k)&&(u=k),this};var dm=h.__private__.getStyle=h.getStyle=function(k){var M=u;switch(k){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=k}return M},fm=h.close=function(){return V("h"),this};h.stroke=function(){return V("S"),this},h.fill=function(k){return ju("f",k),this},h.fillEvenOdd=function(k){return ju("f*",k),this},h.fillStroke=function(k){return ju("B",k),this},h.fillStrokeEvenOdd=function(k){return ju("B*",k),this};var ju=function(k,M){er(M)==="object"?Ax(M,k):V(k)},Gl=function(k){k===null||j===S&&k===void 0||(k=dm(k),V(k))};function kx(k,M,Q,se,me){var ke=new ud(M||this.boundingBox,Q||this.xStep,se||this.yStep,this.gState,me||this.matrix);ke.stream=this.stream;var Oe=k+"$$"+this.cloneIndex+++"$$";return na(Oe,ke),ke}var Ax=function(k,M){var Q=lr[k.key],se=st[Q];if(se instanceof bc)V("q"),V(Ex(M)),se.gState&&h.setGState(se.gState),V(k.matrix.toString()+" cm"),V("/"+Q+" sh"),V("Q");else if(se instanceof ud){var me=new ut(1,0,0,-1,0,Zl());k.matrix&&(me=me.multiply(k.matrix||Ms),Q=kx.call(se,k.key,k.boundingBox,k.xStep,k.yStep,me).id),V("q"),V("/Pattern cs"),V("/"+Q+" scn"),se.gState&&h.setGState(se.gState),V(M),V("Q")}},Ex=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},mf=h.moveTo=function(k,M){return V(E(q(k))+" "+E(K(M))+" m"),this},hm=h.lineTo=function(k,M){return V(E(q(k))+" "+E(K(M))+" l"),this},Oa=h.curveTo=function(k,M,Q,se,me,ke){return V([E(q(k)),E(K(M)),E(q(Q)),E(K(se)),E(q(me)),E(K(ke)),"c"].join(" ")),this};h.__private__.line=h.line=function(k,M,Q,se,me){if(isNaN(k)||isNaN(M)||isNaN(Q)||isNaN(se)||!ss(me))throw new Error("Invalid arguments passed to jsPDF.line");return j===_?this.lines([[Q-k,se-M]],k,M,[1,1],me||"S"):this.lines([[Q-k,se-M]],k,M,[1,1]).stroke()},h.__private__.lines=h.lines=function(k,M,Q,se,me,ke){var Oe,Ye,rt,xt,kt,Ft,Pr,nn,cr,hn,an,Mn;if(typeof k=="number"&&(Mn=Q,Q=M,M=k,k=Mn),se=se||[1,1],ke=ke||!1,isNaN(M)||isNaN(Q)||!Array.isArray(k)||!Array.isArray(se)||!ss(me)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mf(M,Q),Oe=se[0],Ye=se[1],xt=k.length,hn=M,an=Q,rt=0;rt<xt;rt++)(kt=k[rt]).length===2?(hn=kt[0]*Oe+hn,an=kt[1]*Ye+an,hm(hn,an)):(Ft=kt[0]*Oe+hn,Pr=kt[1]*Ye+an,nn=kt[2]*Oe+hn,cr=kt[3]*Ye+an,hn=kt[4]*Oe+hn,an=kt[5]*Ye+an,Oa(Ft,Pr,nn,cr,hn,an));return ke&&fm(),Gl(me),this},h.path=function(k){for(var M=0;M<k.length;M++){var Q=k[M],se=Q.c;switch(Q.op){case"m":mf(se[0],se[1]);break;case"l":hm(se[0],se[1]);break;case"c":Oa.apply(this,se);break;case"h":fm()}}return this},h.__private__.rect=h.rect=function(k,M,Q,se,me){if(isNaN(k)||isNaN(M)||isNaN(Q)||isNaN(se)||!ss(me))throw new Error("Invalid arguments passed to jsPDF.rect");return j===_&&(se=-se),V([E(q(k)),E(K(M)),E(q(Q)),E(q(se)),"re"].join(" ")),Gl(me),this},h.__private__.triangle=h.triangle=function(k,M,Q,se,me,ke,Oe){if(isNaN(k)||isNaN(M)||isNaN(Q)||isNaN(se)||isNaN(me)||isNaN(ke)||!ss(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-k,se-M],[me-Q,ke-se],[k-me,M-ke]],k,M,[1,1],Oe,!0),this},h.__private__.roundedRect=h.roundedRect=function(k,M,Q,se,me,ke,Oe){if(isNaN(k)||isNaN(M)||isNaN(Q)||isNaN(se)||isNaN(me)||isNaN(ke)||!ss(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ye=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*Q),ke=Math.min(ke,.5*se),this.lines([[Q-2*me,0],[me*Ye,0,me,ke-ke*Ye,me,ke],[0,se-2*ke],[0,ke*Ye,-me*Ye,ke,-me,ke],[2*me-Q,0],[-me*Ye,0,-me,-ke*Ye,-me,-ke],[0,2*ke-se],[0,-ke*Ye,me*Ye,-ke,me,-ke]],k+me,M,[1,1],Oe,!0),this},h.__private__.ellipse=h.ellipse=function(k,M,Q,se,me){if(isNaN(k)||isNaN(M)||isNaN(Q)||isNaN(se)||!ss(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*Q,Oe=4/3*(Math.SQRT2-1)*se;return mf(k+Q,M),Oa(k+Q,M-Oe,k+ke,M-se,k,M-se),Oa(k-ke,M-se,k-Q,M-Oe,k-Q,M),Oa(k-Q,M+Oe,k-ke,M+se,k,M+se),Oa(k+ke,M+se,k+Q,M+Oe,k+Q,M),Gl(me),this},h.__private__.circle=h.circle=function(k,M,Q,se){if(isNaN(k)||isNaN(M)||isNaN(Q)||!ss(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,M,Q,Q,se)},h.setFont=function(k,M,Q){return Q&&(M=I(M,Q)),Ge=om(k,M,{disableWarning:!1}),this};var Px=h.__private__.getFont=h.getFont=function(){return Nt[om.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var k,M,Q={};for(k in Ot)if(Ot.hasOwnProperty(k))for(M in Q[k]=[],Ot[k])Ot[k].hasOwnProperty(M)&&Q[k].push(M);return Q},h.addFont=function(k,M,Q,se,me){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(Q=I(Q,se)),nm.call(this,k,M,Q,me=me||"Identity-H")};var Yl,gf=e.lineWidth||.200025,Cx=h.__private__.getLineWidth=h.getLineWidth=function(){return gf},wt=h.__private__.setLineWidth=h.setLineWidth=function(k){return gf=k,V(E(q(k))+" w"),this};h.__private__.setLineDash=at.API.setLineDash=at.API.setLineDashPattern=function(k,M){if(k=k||[],M=M||0,isNaN(M)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Q){return E(q(Q))}).join(" "),M=E(q(M)),V("["+k+"] "+M+" d"),this};var Ox=h.__private__.getLineHeight=h.getLineHeight=function(){return Se*Yl};h.__private__.getLineHeight=h.getLineHeight=function(){return Se*Yl};var Tx=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(Yl=k),this},Ix=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Yl};Tx(e.lineHeight);var $s=h.__private__.getHorizontalCoordinate=function(k){return q(k)},Bs=h.__private__.getVerticalCoordinate=function(k){return j===S?k:ct[z].mediaBox.topRightY-ct[z].mediaBox.bottomLeftY-q(k)},Lx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(k){return E($s(k))},Dx=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(k){return E(Bs(k))},Su=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return rs(Su)},h.__private__.setStrokeColor=h.setDrawColor=function(k,M,Q,se){return Su=Pa({ch1:k,ch2:M,ch3:Q,ch4:se,pdfColorType:"draw",precision:2}),V(Su),this};var vf=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return rs(vf)},h.__private__.setFillColor=h.setFillColor=function(k,M,Q,se){return vf=Pa({ch1:k,ch2:M,ch3:Q,ch4:se,pdfColorType:"fill",precision:2}),V(vf),this};var Jl=e.textColor||"0 g",Rx=h.__private__.getTextColor=h.getTextColor=function(){return rs(Jl)};h.__private__.setTextColor=h.setTextColor=function(k,M,Q,se){return Jl=Pa({ch1:k,ch2:M,ch3:Q,ch4:se,pdfColorType:"text",precision:3}),this};var Us=e.charSpace,Mx=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Us||0)};h.__private__.setCharSpace=h.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Us=k,this};var yf=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(k){var M=h.CapJoinStyles[k];if(M===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yf=M,V(M+" J"),this};var xf=0;h.__private__.setLineJoin=h.setLineJoin=function(k){var M=h.CapJoinStyles[k];if(M===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xf=M,V(M+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(E(q(k))+" M"),this},h.GState=Fv,h.setGState=function(k){(k=typeof k=="string"?ht[jt[k]]:pm(null,k)).equals(_r)||(V("/"+k.id+" gs"),_r=k)};var pm=function(k,M){if(!k||!jt[k]){var Q=!1;for(var se in ht)if(ht.hasOwnProperty(se)&&ht[se].equals(M)){Q=!0;break}if(Q)M=ht[se];else{var me="GS"+(Object.keys(ht).length+1).toString(10);ht[me]=M,M.id=me}return k&&(jt[k]=M.id),Kt.publish("addGState",M),M}};h.addGState=function(k,M){return pm(k,M),this},h.saveGraphicsState=function(){return V("q"),wr.push({key:Ge,size:Se,color:Jl}),this},h.restoreGraphicsState=function(){V("Q");var k=wr.pop();return Ge=k.key,Se=k.size,Jl=k.color,_r=null,this},h.setCurrentTransformationMatrix=function(k){return V(k.toString()+" cm"),this},h.comment=function(k){return V("#"+k),this};var qs=function(k,M){var Q=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(ke){isNaN(ke)||(Q=parseFloat(ke))}});var se=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(ke){isNaN(ke)||(se=parseFloat(ke))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(ke){me=ke.toString()}}),this},bf=function(k,M,Q,se){qs.call(this,k,M),this.type="rect";var me=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Oe){isNaN(Oe)||(me=parseFloat(Oe))}});var ke=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(Oe){isNaN(Oe)||(ke=parseFloat(Oe))}}),this},Nu=function(){this.page=Tt,this.currentPage=z,this.pages=oe.slice(0),this.pagesContext=ct.slice(0),this.x=We,this.y=qt,this.matrix=Ct,this.width=_f(z),this.height=gm(z),this.outputDestination=Ce,this.id="",this.objectNumber=-1};Nu.prototype.restore=function(){Tt=this.page,z=this.currentPage,ct=this.pagesContext,oe=this.pages,We=this.x,qt=this.y,Ct=this.matrix,mm(z,this.width),zs(z,this.height),Ce=this.outputDestination};var wf=function(k,M,Q,se,me){ts.push(new Nu),Tt=z=0,oe=[],We=k,qt=M,Ct=me,hf([Q,se])};for(var Xl in h.beginFormObject=function(k,M,Q,se,me){return wf(k,M,Q,se,me),this},h.endFormObject=function(k){return function(M){if(Ds[M])ts.pop().restore();else{var Q=new Nu,se="Xo"+(Object.keys(Jn).length+1).toString(10);Q.id=se,Ds[M]=se,Jn[se]=Q,Kt.publish("addFormObject",Q),ts.pop().restore()}}(k),this},h.doFormObject=function(k,M){var Q=Jn[Ds[k]];return V("q"),V(M.toString()+" cm"),V("/"+Q.id+" Do"),V("Q"),this},h.getFormObject=function(k){var M=Jn[Ds[k]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},h.save=function(k,M){return k=k||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(pc(_u(as()),k),typeof pc.unload=="function"&&vt.setTimeout&&setTimeout(pc.unload,911),this):new Promise(function(Q,se){try{var me=pc(_u(as()),k);typeof pc.unload=="function"&&vt.setTimeout&&setTimeout(pc.unload,911),Q(me)}catch(ke){se(ke.message)}})},at.API)at.API.hasOwnProperty(Xl)&&(Xl==="events"&&at.API.events.length?function(k,M){var Q,se,me;for(me=M.length-1;me!==-1;me--)Q=M[me][0],se=M[me][1],k.subscribe.apply(k,[Q].concat(typeof se=="function"?[se]:se))}(Kt,at.API.events):h[Xl]=at.API[Xl]);function _f(k){return ct[k].mediaBox.topRightX-ct[k].mediaBox.bottomLeftX}function mm(k,M){ct[k].mediaBox.topRightX=M+ct[k].mediaBox.bottomLeftX}function gm(k){return ct[k].mediaBox.topRightY-ct[k].mediaBox.bottomLeftY}function zs(k,M){ct[k].mediaBox.topRightY=M+ct[k].mediaBox.bottomLeftY}var Ws=h.getPageWidth=function(k){return _f(k=k||z)/bt},vm=h.setPageWidth=function(k,M){mm(k,M*bt)},Zl=h.getPageHeight=function(k){return gm(k=k||z)/bt},ym=h.setPageHeight=function(k,M){zs(k,M*bt)};return h.internal={pdfEscape:sa,getStyle:dm,getFont:Px,getFontSize:Fe,getCharSpace:Mx,getTextColor:Rx,getLineHeight:Ox,getLineHeightFactor:Ix,getLineWidth:Cx,write:je,getHorizontalCoordinate:$s,getVerticalCoordinate:Bs,getCoordinateString:Lx,getVerticalCoordinateString:Dx,collections:{},newObject:Dr,newAdditionalObject:Hl,newObjectDeferred:Nn,newObjectDeferredBegin:Rn,getFilters:Ca,putStream:aa,events:Kt,scaleFactor:bt,pageSize:{getWidth:function(){return Ws(z)},setWidth:function(k){vm(z,k)},getHeight:function(){return Zl(z)},setHeight:function(k){ym(z,k)}},encryptionOptions:d,encryption:fn,getEncryptor:function(k){return d!==null?fn.encryptor(k,0):function(M){return M}},output:cm,getNumberOfPages:sm,get pages(){return oe},out:V,f2:T,f3:O,getPageInfo:Fs,getPageInfoByObjId:um,getCurrentPageInfo:Sx,getPDFVersion:g,Point:qs,Rectangle:bf,Matrix:ut,hasHotfix:oa},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Ws(z)},set:function(k){vm(z,k)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Zl(z)},set:function(k){ym(z,k)},enumerable:!0,configurable:!0}),(function(k){for(var M=0,Q=De.length;M<Q;M++){var se=nm.call(this,k[M][0],k[M][1],k[M][2],De[M][3],!0);f===!1&&(p[se]=!0);var me=k[M][0].split("-");rm({id:se,fontName:me[0],fontStyle:me[1]||""})}Kt.publish("addFonts",{fonts:Nt,dictionary:Ot})}).call(h,De),Ge="F1",im(i,r),Kt.publish("initialized"),h}Gu.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Gu.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gu.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Gu.prototype.processOwnerPassword=function(e,t){return Z2(X2(t).substr(0,5),e)},Gu.prototype.encryptor=function(e,t){var r=X2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Z2(r,n)}},Fv.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||er(e)!==er(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},at.API={events:[]},at.version="4.0.0";var Fr=at.API,g5=1,uu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$u=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_t=function(e){return e.toFixed(2)},nl=function(e){return e.toFixed(5)};Fr.__acroform__={};var Ti=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},i4=function(e){return e*g5},ms=function(e){var t=new lI,r=He.internal.getHeight(e)||0,n=He.internal.getWidth(e)||0;return t.BBox=[0,0,Number(_t(n)),Number(_t(r))],t},aK=Fr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},sK=Fr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},oK=Fr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Zr=Fr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oK(e,t-1)},Qr=Fr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aK(e,t-1)},en=Fr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sK(e,t-1)},lK=Fr.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],a=e[1],s=e[2],o=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(a+o)||0,c.upperRight_X=r(i+s)||0,c.upperRight_Y=n(a)||0,[Number(_t(c.lowerLeft_X)),Number(_t(c.lowerLeft_Y)),Number(_t(c.upperRight_X)),Number(_t(c.upperRight_Y))]},cK=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Q2(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+_t(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=ms(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},Q2=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var a=r,s=He.internal.getHeight(e)||0;s=s<0?-s:s;var o=He.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(T,O,q){if(T+1<i.length){var K=O+" "+i[T+1][0];return hg(K,e,q).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var u,d,f=hg("3",e,a).height,p=e.multiline?s-a:(s-f)/2,h=p+=2,y=0,g=0,x=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+hg(t,e,a=12).width+", FieldWidth:"+o+`
`;break}for(var v="",_=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var j=!1;if(i[S].length!==1&&x!==i[S].length-1){if((f+2)*(_+2)+2>s)continue e;v+=i[S][x],j=!0,g=S,S--}else{v=(v+=i[S][x]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var N=parseInt(S),A=c(N,v,a),I=S>=i.length-1;if(A&&!I){v+=" ",x=0;continue}if(A||I){if(I)g=N;else if(e.multiline&&(f+2)*(_+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(_+2)+2>s)continue e;g=N}}for(var E="",C=y;C<=g;C++){var D=i[C];if(e.multiline){if(C===g){E+=D[x]+" ",x=(x+1)%D.length;continue}if(C===y){E+=D[D.length-1]+" ";continue}}E+=D[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=hg(E,e,a).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}t+=_t(u)+" "+_t(h)+` Td
`,t+="("+uu(E)+`) Tj
`,t+=-_t(u)+` 0 Td
`,h=-(a+2),d=0,y=j?g:g+1,_++,v=""}break}return n.text=t,n.fontSize=a,n},hg=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},uK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dK=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},fK=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Za.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(uK)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");g5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new cI,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&dK(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],c=[],u=o.Rect;if(o.Rect&&(o.Rect=lK(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=He.createDefaultAppearanceStream(o),er(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=cK(o);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var y=h[s];typeof y=="function"&&(y=y.call(i,o)),f+="/"+s+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=h)=="function"&&(y=y.call(i,o)),f+="/"+s+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}a&&function(g,x){for(var v in g)if(g.hasOwnProperty(v)){var _=v,S=g[v];x.internal.newObjectDeferredBegin(S.objId,!0),er(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete g[_]}}(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},oI=Fr.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),er(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+uu(n(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Q1=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+uu(n(e))+")"},bs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bs.prototype.toString=function(){return this.objId+" 0 R"},bs.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},bs.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:oI(i,this.objId,this.scope)}):i instanceof bs?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var lI=function(){bs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ti(lI,bs);var cI=function(){bs.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+uu(r(e))+")"}},set:function(r){e=r}})};Ti(cI,bs);var Za=function e(){bs.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Zr(t,3)},set:function(v){v?this.F=Qr(t,3):this.F=en(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof $v)return;a="FieldObject"+e.FieldNum++}var v=function(_){return _};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+uu(v(a))+")"},set:function(v){a=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(v){a=v}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(v){s=v}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/g5:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof $v||this instanceof Oc))return Q1(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Cn==0?Q1(p,this.objId,this.scope):p},set:function(v){v=v.toString(),p=this instanceof Cn==0?v.substr(0,1)==="("?$u(v.substr(1,v.length-2)):$u(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cn==1?$u(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof Cn==1?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Cn==0?Q1(h,this.objId,this.scope):h},set:function(v){v=v.toString(),h=this instanceof Cn==0?v.substr(0,1)==="("?$u(v.substr(1,v.length-2)):$u(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cn==1?$u(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof Cn==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(v){y=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,1)},set:function(v){v?this.Ff=Qr(this.Ff,1):this.Ff=en(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,2)},set:function(v){v?this.Ff=Qr(this.Ff,2):this.Ff=en(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,3)},set:function(v){v?this.Ff=Qr(this.Ff,3):this.Ff=en(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');x=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(x){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};Ti(Za,bs);var bd=function(){Za.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return oI(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,s,o){o||(o=1);for(var c,u=[];c=s.exec(a);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,18)},set:function(r){r?this.Ff=Qr(this.Ff,18):this.Ff=en(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Qr(this.Ff,19):this.Ff=en(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,20)},set:function(r){r?(this.Ff=Qr(this.Ff,20),t.sort()):this.Ff=en(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,22)},set:function(r){r?this.Ff=Qr(this.Ff,22):this.Ff=en(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,23)},set:function(r){r?this.Ff=Qr(this.Ff,23):this.Ff=en(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,27)},set:function(r){r?this.Ff=Qr(this.Ff,27):this.Ff=en(this.Ff,27)}}),this.hasAppearanceStream=!1};Ti(bd,Za);var wd=function(){bd.call(this),this.fontName="helvetica",this.combo=!1};Ti(wd,bd);var _d=function(){wd.call(this),this.combo=!0};Ti(_d,wd);var Gg=function(){_d.call(this),this.edit=!0};Ti(Gg,_d);var Cn=function(){Za.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,15)},set:function(r){r?this.Ff=Qr(this.Ff,15):this.Ff=en(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,16)},set:function(r){r?this.Ff=Qr(this.Ff,16):this.Ff=en(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,17)},set:function(r){r?this.Ff=Qr(this.Ff,17):this.Ff=en(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,26)},set:function(r){r?this.Ff=Qr(this.Ff,26):this.Ff=en(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+uu(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){er(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ti(Cn,Za);var Yg=function(){Cn.call(this),this.pushButton=!0};Ti(Yg,Cn);var jd=function(){Cn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ti(jd,Cn);var $v=function(){var e,t;Za.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+uu(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){er(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=He.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ti($v,Za),jd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},jd.prototype.createOption=function(e){var t=new $v;return t.Parent=this,t.optionName=e,this.Kids.push(t),hK.call(this.scope,t),t};var Jg=function(){Cn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=He.CheckBox.createAppearanceStream()};Ti(Jg,Cn);var Oc=function(){Za.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,13)},set:function(t){t?this.Ff=Qr(this.Ff,13):this.Ff=en(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,21)},set:function(t){t?this.Ff=Qr(this.Ff,21):this.Ff=en(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,23)},set:function(t){t?this.Ff=Qr(this.Ff,23):this.Ff=en(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,24)},set:function(t){t?this.Ff=Qr(this.Ff,24):this.Ff=en(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,25)},set:function(t){t?this.Ff=Qr(this.Ff,25):this.Ff=en(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,26)},set:function(t){t?this.Ff=Qr(this.Ff,26):this.Ff=en(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ti(Oc,Za);var Xg=function(){Oc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,14)},set:function(e){e?this.Ff=Qr(this.Ff,14):this.Ff=en(this.Ff,14)}}),this.password=!0};Ti(Xg,Oc);var He={CheckBox:{createAppearanceStream:function(){return{N:{On:He.CheckBox.YesNormal},D:{On:He.CheckBox.YesPushDown,Off:He.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=Q2(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+_t(He.internal.getWidth(e))+" "+_t(He.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+_t(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ms(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],a=He.internal.getHeight(e),s=He.internal.getWidth(e),o=Q2(e,e.caption);return i.push("1 g"),i.push("0 0 "+_t(s)+" "+_t(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+_t(s-1)+" "+_t(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+_t(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_t(He.internal.getWidth(e))+" "+_t(He.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:He.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=He.RadioButton.Circle.YesNormal,t.D[e]=He.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=He.internal.getWidth(e)<=He.internal.getHeight(e)?He.internal.getWidth(e)/4:He.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=He.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(e)/2)+" "+nl(He.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=He.internal.getWidth(e)<=He.internal.getHeight(e)?He.internal.getWidth(e)/4:He.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*He.internal.Bezier_C).toFixed(5)),s=Number((n*He.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(e)/2)+" "+nl(He.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(e)/2)+" "+nl(He.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=He.internal.getWidth(e)<=He.internal.getHeight(e)?He.internal.getWidth(e)/4:He.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*He.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(e)/2)+" "+nl(He.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:He.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=He.RadioButton.Cross.YesNormal,t.D[e]=He.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=He.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+_t(He.internal.getWidth(e)-2)+" "+_t(He.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(_t(n.x1.x)+" "+_t(n.x1.y)+" m"),r.push(_t(n.x2.x)+" "+_t(n.x2.y)+" l"),r.push(_t(n.x4.x)+" "+_t(n.x4.y)+" m"),r.push(_t(n.x3.x)+" "+_t(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=He.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+_t(He.internal.getWidth(e))+" "+_t(He.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+_t(He.internal.getWidth(e)-2)+" "+_t(He.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(_t(r.x1.x)+" "+_t(r.x1.y)+" m"),n.push(_t(r.x2.x)+" "+_t(r.x2.y)+" l"),n.push(_t(r.x4.x)+" "+_t(r.x4.y)+" m"),n.push(_t(r.x3.x)+" "+_t(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_t(He.internal.getWidth(e))+" "+_t(He.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};He.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=He.internal.getWidth(e),r=He.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},He.internal.getWidth=function(e){var t=0;return er(e)==="object"&&(t=i4(e.Rect[2])),t},He.internal.getHeight=function(e){var t=0;return er(e)==="object"&&(t=i4(e.Rect[3])),t};var hK=Fr.addField=function(e){if(fK(this,e),!(e instanceof Za))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Fr.AcroFormChoiceField=bd,Fr.AcroFormListBox=wd,Fr.AcroFormComboBox=_d,Fr.AcroFormEditBox=Gg,Fr.AcroFormButton=Cn,Fr.AcroFormPushButton=Yg,Fr.AcroFormRadioButton=jd,Fr.AcroFormCheckBox=Jg,Fr.AcroFormTextField=Oc,Fr.AcroFormPasswordField=Xg,Fr.AcroFormAppearance=He,Fr.AcroForm={ChoiceField:bd,ListBox:wd,ComboBox:_d,EditBox:Gg,Button:Cn,PushButton:Yg,RadioButton:jd,CheckBox:Jg,TextField:Oc,PasswordField:Xg,Appearance:He},at.AcroForm={ChoiceField:bd,ListBox:wd,ComboBox:_d,EditBox:Gg,Button:Cn,PushButton:Yg,RadioButton:jd,CheckBox:Jg,TextField:Oc,PasswordField:Xg,Appearance:He};at.AcroForm;function uI(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(T,O){var q,K,ne,re,te,W=r;if((O=O||r)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(A(T))for(te in n)for(ne=n[te],q=0;q<ne.length;q+=1){for(re=!0,K=0;K<ne[q].length;K+=1)if(ne[q][K]!==void 0&&ne[q][K]!==T[K]){re=!1;break}if(re===!0){W=te;break}}else for(te in n)for(ne=n[te],q=0;q<ne.length;q+=1){for(re=!0,K=0;K<ne[q].length;K+=1)if(ne[q][K]!==void 0&&ne[q][K]!==T.charCodeAt(K)){re=!1;break}if(re===!0){W=te;break}}return W===r&&O!==r&&(W=O),W},a=function T(O){for(var q=this.internal.write,K=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:O.width}),re.push({key:"Height",value:O.height}),O.colorSpace===v.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===v.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var te="",W=0,B=O.transparency.length;W<B;W++)te+=O.transparency[W]+" "+O.transparency[W]+" ";re.push({key:"Mask",value:"["+te+"]"})}O.sMask!==void 0&&re.push({key:"SMask",value:O.objectId+1+" 0 R"});var le=O.filter!==void 0?["/"+O.filter]:void 0;if(K({data:O.data,additionalKeyValues:re,alreadyAppliedFilters:le,objectId:O.objectId}),q("endobj"),"sMask"in O&&O.sMask!==void 0){var G,R=(G=O.sMaskBitsPerComponent)!==null&&G!==void 0?G:O.bitsPerComponent,z={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:O.sMask};"filter"in O&&(z.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(O.width),z.filter=O.filter),T.call(this,z)}if(O.colorSpace===v.INDEXED){var J=this.internal.newObject();K({data:E(new Uint8Array(O.palette)),objectId:J}),q("endobj")}},s=function(){var T=this.internal.collections[t+"images"];for(var O in T)a.call(this,T[O])},o=function(){var T,O=this.internal.collections[t+"images"],q=this.internal.write;for(var K in O)q("/I"+(T=O[K]).index,T.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var T=this.internal.collections[t+"images"];return c.call(this),T},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(T){return typeof e["process"+T.toUpperCase()]=="function"},p=function(T){return er(T)==="object"&&T.nodeType===1},h=function(T,O){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var q=""+T.getAttribute("src");if(q.indexOf("data:image/")===0)return Kg(unescape(q).split("base64,").pop());var K=e.loadFile(q,!0);if(K!==void 0)return K}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var ne;switch(O){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;default:ne="image/jpeg"}return Kg(T.toDataURL(ne,1).split("base64,").pop())}},y=function(T){var O=this.internal.collections[t+"images"];if(O){for(var q in O)if(T===O[q].alias)return O[q]}},g=function(T,O,q){return T||O||(T=-96,O=-96),T<0&&(T=-1*q.width*72/T/this.internal.scaleFactor),O<0&&(O=-1*q.height*72/O/this.internal.scaleFactor),T===0&&(T=O*q.width/q.height),O===0&&(O=T*q.height/q.width),[T,O]},x=function(T,O,q,K,ne,re){var te=g.call(this,q,K,ne),W=this.internal.getCoordinateString,B=this.internal.getVerticalCoordinateString,le=u.call(this);if(q=te[0],K=te[1],le[ne.index]=ne,re){re*=Math.PI/180;var G=Math.cos(re),R=Math.sin(re),z=function(ie){return ie.toFixed(4)},J=[z(G),z(R),z(-1*R),z(G),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,W(T),B(O+K),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([W(q),"0","0",W(K),"0","0","cm"].join(" "))):this.internal.write([W(q),"0","0",W(K),W(T),B(O+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(T){var O,q,K=0;if(typeof T=="string")for(q=T.length,O=0;O<q;O++)K=(K<<5)-K+T.charCodeAt(O),K|=0;else if(A(T))for(q=T.byteLength/2,O=0;O<q;O++)K=(K<<5)-K+T[O],K|=0;return K},j=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var O=!0;return T.length===0&&(O=!1),T.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(O=!1),O},N=e.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var O=T.indexOf(",");return O<0?null:T.substring(0,O).trim().endsWith("base64")?T.substring(O+1):null};e.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},I=e.__addimage__.binaryStringToUint8Array=function(T){for(var O=T.length,q=new Uint8Array(O),K=0;K<O;K++)q[K]=T.charCodeAt(K);return q},E=e.__addimage__.arrayBufferToBinaryString=function(T){for(var O="",q=A(T)?T:new Uint8Array(T),K=0;K<q.length;K+=8192)O+=String.fromCharCode.apply(null,q.subarray(K,K+8192));return O};e.addImage=function(){var T,O,q,K,ne,re,te,W,B;if(typeof arguments[1]=="number"?(O=r,q=arguments[1],K=arguments[2],ne=arguments[3],re=arguments[4],te=arguments[5],W=arguments[6],B=arguments[7]):(O=arguments[1],q=arguments[2],K=arguments[3],ne=arguments[4],re=arguments[5],te=arguments[6],W=arguments[7],B=arguments[8]),er(T=arguments[0])==="object"&&!p(T)&&"imageData"in T){var le=T;T=le.imageData,O=le.format||O||r,q=le.x||q||0,K=le.y||K||0,ne=le.w||le.width||ne,re=le.h||le.height||re,te=le.alias||te,W=le.compression||W,B=le.rotation||le.angle||B}var G=this.internal.getFilters();if(W===void 0&&G.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(q)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var R=C.call(this,T,O,te,W);return x.call(this,q,K,ne,re,R,B),this};var C=function(T,O,q,K){var ne,re,te;if(typeof T=="string"&&i(T)===r){T=unescape(T);var W=D(T,!1);(W!==""||(W=e.loadFile(T,!0))!==void 0)&&(T=W)}if(p(T)&&(T=h(T,O)),O=i(T,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((te=q)==null||te.length===0)&&(q=function(B){return typeof B=="string"||A(B)?S(B):A(B.data)?S(B.data):null}(T)),(ne=y.call(this,q))||(T instanceof Uint8Array||O==="RGBA"||(re=T,T=I(T)),ne=this["process"+O.toUpperCase()](T,d.call(this),q,function(B){return B&&typeof B=="string"&&(B=B.toUpperCase()),B in e.image_compression?B:_.NONE}(K),re)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},D=e.__addimage__.convertBase64ToBinaryString=function(T,O){O=typeof O!="boolean"||O;var q,K="";if(typeof T=="string"){var ne;q=(ne=N(T))!==null&&ne!==void 0?ne:T;try{K=Kg(q)}catch(re){if(O)throw j(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(T){var O,q,K="";if(p(T)&&(T=h(T)),typeof T=="string"&&i(T)===r&&((K=D(T,!1))===""&&(K=e.loadFile(T)||""),T=K),q=i(T),!f(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(T instanceof Uint8Array||(T=I(T)),!(O=this["process"+q.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=q,O}})(at.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};at.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var h=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),_=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",a+=" /Popup "+x.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+h(v(_))+") >>",g.content=a;var S=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(a+=" /Open true"),a+=" >>",x.content=a,this.internal.write(g.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var A=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,a,s){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+i),h:u(n+a)},options:s,type:"link"})},e.textWithLink=function(r,n,i,a){var s,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;s=Math.ceil(u*d)}else o=c,s=u;return this.text(r,n,i,a),i+=.2*u,a.align==="center"&&(n-=c/2),a.align==="right"&&(n-=c),this.link(n,i-u,o,s,a),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(at.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=e.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&a(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&i.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&a(g)&&t[g.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&a(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&a(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&a(g)&&t[g.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(g){var x=0,v=r,_="",S=0;for(x=0;x<g.length;x+=1)v[g.charCodeAt(x)]!==void 0?(S++,typeof(v=v[g.charCodeAt(x)])=="number"&&(_+=String.fromCharCode(v),v=r,S=0),x===g.length-1&&(v=r,_+=g.charAt(x-(S-1)),x-=S-1,S=0)):(v=r,_+=g.charAt(x-S),x-=S,S=0);return _};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(g,x,v){return s(g)?a(g)===!1?-1:!u(g)||!s(x)&&!s(v)||!s(v)&&o(x)||o(g)&&!s(x)||o(g)&&c(x)||o(g)&&o(x)?0:d(g)&&s(x)&&!o(x)&&s(v)&&u(v)?3:o(g)||!s(v)?1:2:-1},h=function(g){var x=0,v=0,_=0,S="",j="",N="",A=(g=g||"").split("\\s+"),I=[];for(x=0;x<A.length;x+=1){for(I.push(""),v=0;v<A[x].length;v+=1)S=A[x][v],j=A[x][v-1],N=A[x][v+1],s(S)?(_=p(S,j,N),I[x]+=_!==-1?String.fromCharCode(t[S.charCodeAt(0)][_]):S):I[x]+=S;I[x]=f(I[x])}return I.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var g,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(x)){var _=0;for(v=[],_=0;_<x.length;_+=1)Array.isArray(x[_])?v.push([h(x[_][0]),x[_][1],x[_][2]]):v.push([h(x[_])]);g=v}else g=h(x);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",y])}(at.API),at.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(at.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(g){y=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,y=0,g=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,j){return S.concat(x.splitTextToSize(j,v))},[])):c=Array.isArray(c)?c:[c];for(var _=0;_<c.length;_++)h<(g=this.getStringUnitWidth(c[_],{font:f})*d)&&(h=g);return h!==0&&(y=c.length),{w:h/=p,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,y,g,x,v=[],_=[],S=[],j={},N={},A=[],I=[],E=(p=p||{}).autoSize||!1,C=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,T=p.margins||Object.assign({width:this.getPageWidth()},t),O=typeof p.padding=="number"?p.padding:3,q=p.headerBackgroundColor||"#c8c8c8",K=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=K,this.setFontSize(D),f==null)_=v=Object.keys(d[0]),S=v.map(function(){return"left"});else if(Array.isArray(f)&&er(f[0])==="object")for(v=f.map(function(le){return le.name}),_=f.map(function(le){return le.prompt||le.name||""}),S=f.map(function(le){return le.align||"left"}),h=0;h<f.length;h+=1)N[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(_=v=f,S=v.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<v.length;h+=1){for(j[x=v[h]]=d.map(function(le){return le[x]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(_[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=j[x],this.setFont(void 0,"normal"),g=0;g<y.length;g+=1)A.push(this.getTextDimensions(y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[x]=Math.max.apply(null,A)+O+O,A=[]}if(C){var ne={};for(h=0;h<v.length;h+=1)ne[v[h]]={},ne[v[h]].text=_[h],ne[v[h]].align=S[h];var re=o.call(this,ne,N);I=v.map(function(le){return new a(c,u,N[le],re,ne[le].text,void 0,ne[le].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var te=f.reduce(function(le,G){return le[G.name]=G.align,le},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var W=o.call(this,d[h],N);for(g=0;g<v.length;g+=1){var B=d[h][v[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:g,data:B},this),s.call(this,new a(c,u,N[v[g]],W,B,h+2,te[v[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var y=c[h];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,y){return Math.max(h,y)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(at.API);var dI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ew=uI(fI),hI=[100,200,300,400,500,600,700,800,900],pK=uI(hI);function eb(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return dI[a=a||"normal"]?a:"normal"}(e.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),i=function(a){return typeof ew[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function a4(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var mK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},s4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o4(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function l4(e){return e.trimLeft()}function gK(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function vK(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var pg,c4,u4,Bu,mg,d4,f4,h4,tb=["times"];function p4(e,t,r,n,i){var a=4,s=g4;switch(i){case at.API.image_compression.FAST:a=1,s=m4;break;case at.API.image_compression.MEDIUM:a=6,s=v4;break;case at.API.image_compression.SLOW:a=9,s=y4}e=function(c,u,d,f){for(var p,h=c.length/u,y=new Uint8Array(c.length+h),g=[yK,m4,g4,v4,y4],x=0;x<h;x+=1){var v=x*u,_=c.subarray(v,v+u);if(f)y.set(f(_,d,p),v+x);else{for(var S=g.length,j=[],N=0;N<S;N+=1)j[N]=g[N](_,d,p);var A=bK(j.concat());y.set(j[A],v+x)}p=_}return y}(e,t,Math.ceil(r*n/8),s);var o=K2(e,{level:a});return at.API.__addimage__.arrayBufferToBinaryString(o)}function yK(e){var t=Array.apply([],e);return t.unshift(0),t}function m4(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=e[i-t]||0;n[i+1]=e[i]-a+256&255}return n}function g4(e,t,r){var n=e.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var s=r&&r[a]||0;i[a+1]=e[a]-s+256&255}return i}function v4(e,t,r){var n=e.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var s=e[a-t]||0,o=r&&r[a]||0;i[a+1]=e[a]+256-(s+o>>>1)&255}return i}function y4(e,t,r){var n=e.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var s=xK(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);i[a+1]=e[a]-s+256&255}return i}function xK(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),a=Math.abs(e+t-r-r);return n<=i&&n<=a?e:i<=a?t:r}function bK(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function rb(e,t,r){var n=t*r,i=Math.floor(n/8),a=16-(n-8*i+r),s=(1<<r)-1;return pI(e,i)>>a&s}function x4(e,t,r,n){var i=r*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1,c=(t&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(e,a,pI(e,a)&~(o<<s)&65535|c)}function pI(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function wK(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,s=1<<1+(7&i);e[t++],e[t++];var o=null,c=null;a&&(o=t,c=s,t+=3*s);var u=!0,d=[],f=0,p=null,h=0,y=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],1&g||(p=null),h=g>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,j=e[t++],N=j>>6&1,A=1<<1+(7&j),I=o,E=c,C=!1;j>>7&&(C=!0,I=t,E=A,t+=3*A);var D=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}d.push({x,y:v,width:_,height:S,has_local_palette:C,palette_offset:I,palette_size:E,data_offset:D,data_length:t-D,transparent_index:p,interlaced:!!N,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,q){var K=this.frameInfo(O),ne=K.width*K.height,re=new Uint8Array(ne);b4(e,K.data_offset,re,ne);var te=K.palette_offset,W=K.transparent_index;W===null&&(W=256);var B=K.width,le=r-B,G=B,R=4*(K.y*r+K.x),z=4*((K.y+K.height)*r+K.x),J=R,ie=4*le;K.interlaced===!0&&(ie+=4*r*7);for(var ae=8,ue=0,pe=re.length;ue<pe;++ue){var ee=re[ue];if(G===0&&(G=B,(J+=ie)>=z&&(ie=4*le+4*r*(ae-1),J=R+(B+le)*(ae<<1),ae>>=1)),ee===W)J+=4;else{var he=e[te+3*ee],oe=e[te+3*ee+1],de=e[te+3*ee+2];q[J++]=de,q[J++]=oe,q[J++]=he,q[J++]=255}--G}},this.decodeAndBlitFrameRGBA=function(O,q){var K=this.frameInfo(O),ne=K.width*K.height,re=new Uint8Array(ne);b4(e,K.data_offset,re,ne);var te=K.palette_offset,W=K.transparent_index;W===null&&(W=256);var B=K.width,le=r-B,G=B,R=4*(K.y*r+K.x),z=4*((K.y+K.height)*r+K.x),J=R,ie=4*le;K.interlaced===!0&&(ie+=4*r*7);for(var ae=8,ue=0,pe=re.length;ue<pe;++ue){var ee=re[ue];if(G===0&&(G=B,(J+=ie)>=z&&(ie=4*le+4*r*(ae-1),J=R+(B+le)*(ae<<1),ae>>=1)),ee===W)J+=4;else{var he=e[te+3*ee],oe=e[te+3*ee+1],de=e[te+3*ee+2];q[J++]=he,q[J++]=oe,q[J++]=de,q[J++]=255}--G}}}function b4(e,t,r,n){for(var i=e[t++],a=1<<i,s=a+1,o=s+1,c=i+1,u=(1<<c)-1,d=0,f=0,p=0,h=e[t++],y=new Int32Array(4096),g=null;;){for(;d<16&&h!==0;)f|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==a){if(x===s)break;for(var v=x<o?x:g,_=0,S=v;S>a;)S=y[S]>>8,++_;var j=S;if(p+_+(v!==x?1:0)>n)return void ar.log("Warning, gif stream longer than expected.");r[p++]=j;var N=p+=_;for(v!==x&&(r[p++]=j),S=v;_--;)S=y[S],r[--N]=255&S,S>>=8;g!==null&&o<4096&&(y[o++]=g<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),g=x}else o=s+1,u=(1<<(c=i+1))-1,g=null}return p!==n&&ar.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nb(e){var t,r,n,i,a,s=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),y=new Array(64),g=[],x=0,v=7,_=new Array(64),S=new Array(64),j=new Array(64),N=new Array(256),A=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(R,z){for(var J=0,ie=0,ae=new Array,ue=1;ue<=16;ue++){for(var pe=1;pe<=R[ue];pe++)ae[z[ie]]=[],ae[z[ie]][0]=J,ae[z[ie]][1]=ue,ie++,J++;J*=2}return ae}function te(R){for(var z=R[0],J=R[1]-1;J>=0;)z&1<<J&&(x|=1<<v),J--,--v<0&&(x==255?(W(255),W(0)):W(x),v=7,x=0)}function W(R){g.push(R)}function B(R){W(R>>8&255),W(255&R)}function le(R,z,J,ie,ae){for(var ue,pe=ae[0],ee=ae[240],he=function(Se,et){var Fe,Ke,tt,mt,gt,Xe,lt,yt,Ge,bt,We=0;for(Ge=0;Ge<8;++Ge){Fe=Se[We],Ke=Se[We+1],tt=Se[We+2],mt=Se[We+3],gt=Se[We+4],Xe=Se[We+5],lt=Se[We+6];var qt=Fe+(yt=Se[We+7]),Ct=Fe-yt,Nt=Ke+lt,Ot=Ke-lt,wr=tt+Xe,st=tt-Xe,lr=mt+gt,ht=mt-gt,jt=qt+lr,_r=qt-lr,Tt=Nt+wr,ct=Nt-wr;Se[We]=jt+Tt,Se[We+4]=jt-Tt;var Kt=.707106781*(ct+_r);Se[We+2]=_r+Kt,Se[We+6]=_r-Kt;var Wl=.382683433*((jt=ht+st)-(ct=Ot+Ct)),Jn=.5411961*jt+Wl,Ds=1.306562965*ct+Wl,ts=.707106781*(Tt=st+Ot),ut=Ct+ts,Rs=Ct-ts;Se[We+5]=Rs+Jn,Se[We+3]=Rs-Jn,Se[We+1]=ut+Ds,Se[We+7]=ut-Ds,We+=8}for(We=0,Ge=0;Ge<8;++Ge){Fe=Se[We],Ke=Se[We+8],tt=Se[We+16],mt=Se[We+24],gt=Se[We+32],Xe=Se[We+40],lt=Se[We+48];var Ms=Fe+(yt=Se[We+56]),na=Fe-yt,ia=Ke+lt,Dr=Ke-lt,Nn=tt+Xe,Rn=tt-Xe,Hl=mt+gt,$o=mt-gt,Ea=Ms+Hl,rs=Ms-Hl,Pa=ia+Nn,Ca=ia-Nn;Se[We]=Ea+Pa,Se[We+32]=Ea-Pa;var aa=.707106781*(Ca+rs);Se[We+16]=rs+aa,Se[We+48]=rs-aa;var Vl=.382683433*((Ea=$o+Rn)-(Ca=Dr+na)),ns=.5411961*Ea+Vl,Kl=1.306562965*Ca+Vl,yu=.707106781*(Pa=Rn+Dr),xu=na+yu,bu=na-yu;Se[We+40]=bu+ns,Se[We+24]=bu-ns,Se[We+8]=xu+Kl,Se[We+56]=xu-Kl,We++}for(Ge=0;Ge<64;++Ge)bt=Se[Ge]*et[Ge],h[Ge]=bt>0?bt+.5|0:bt-.5|0;return h}(R,z),oe=0;oe<64;++oe)y[I[oe]]=he[oe];var de=y[0]-J;J=y[0],de==0?te(ie[0]):(te(ie[p[ue=32767+de]]),te(f[ue]));for(var Ce=63;Ce>0&&y[Ce]==0;)Ce--;if(Ce==0)return te(pe),J;for(var Pe,V=1;V<=Ce;){for(var je=V;y[V]==0&&V<=Ce;)++V;var Je=V-je;if(Je>=16){Pe=Je>>4;for(var De=1;De<=Pe;++De)te(ee);Je&=15}ue=32767+y[V],te(ae[(Je<<4)+p[ue]]),te(f[ue]),V++}return Ce!=63&&te(pe),J}function G(R){R=Math.min(Math.max(R,1),100),a!=R&&(function(z){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ae=s((J[ie]*z+50)/100);ae=Math.min(Math.max(ae,1),255),o[I[ie]]=ae}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var ee=s((ue[pe]*z+50)/100);ee=Math.min(Math.max(ee,1),255),c[I[pe]]=ee}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],oe=0,de=0;de<8;de++)for(var Ce=0;Ce<8;Ce++)u[oe]=1/(o[I[oe]]*he[de]*he[Ce]*8),d[oe]=1/(c[I[oe]]*he[de]*he[Ce]*8),oe++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),a=R)}this.encode=function(R,z){z&&G(z),g=new Array,x=0,v=7,B(65496),B(65504),B(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),B(1),B(1),W(0),W(0),function(){B(65499),B(132),W(0);for(var Ke=0;Ke<64;Ke++)W(o[Ke]);W(1);for(var tt=0;tt<64;tt++)W(c[tt])}(),function(Ke,tt){B(65472),B(17),W(8),B(tt),B(Ke),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(R.width,R.height),function(){B(65476),B(418),W(0);for(var Ke=0;Ke<16;Ke++)W(E[Ke+1]);for(var tt=0;tt<=11;tt++)W(C[tt]);W(16);for(var mt=0;mt<16;mt++)W(D[mt+1]);for(var gt=0;gt<=161;gt++)W(T[gt]);W(1);for(var Xe=0;Xe<16;Xe++)W(O[Xe+1]);for(var lt=0;lt<=11;lt++)W(q[lt]);W(17);for(var yt=0;yt<16;yt++)W(K[yt+1]);for(var Ge=0;Ge<=161;Ge++)W(ne[Ge])}(),B(65498),B(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var J=0,ie=0,ae=0;x=0,v=7,this.encode.displayName="_encode_";for(var ue,pe,ee,he,oe,de,Ce,Pe,V,je=R.data,Je=R.width,De=R.height,Se=4*Je,et=0;et<De;){for(ue=0;ue<Se;){for(oe=Se*et+ue,Ce=-1,Pe=0,V=0;V<64;V++)de=oe+(Pe=V>>3)*Se+(Ce=4*(7&V)),et+Pe>=De&&(de-=Se*(et+1+Pe-De)),ue+Ce>=Se&&(de-=ue+Ce-Se+4),pe=je[de++],ee=je[de++],he=je[de++],_[V]=(A[pe]+A[ee+256|0]+A[he+512|0]>>16)-128,S[V]=(A[pe+768|0]+A[ee+1024|0]+A[he+1280|0]>>16)-128,j[V]=(A[pe+1280|0]+A[ee+1536|0]+A[he+1792|0]>>16)-128;J=le(_,u,J,t,n),ie=le(S,d,ie,r,i),ae=le(j,d,ae,r,i),ue+=32}et+=8}if(v>=0){var Fe=[];Fe[1]=v+1,Fe[0]=(1<<v+1)-1,te(Fe)}return B(65497),new Uint8Array(g)},e=e||50,function(){for(var R=String.fromCharCode,z=0;z<256;z++)N[z]=R(z)}(),t=re(E,C),r=re(O,q),n=re(D,T),i=re(K,ne),function(){for(var R=1,z=2,J=1;J<=15;J++){for(var ie=R;ie<z;ie++)p[32767+ie]=J,f[32767+ie]=[],f[32767+ie][1]=J,f[32767+ie][0]=ie;for(var ae=-(z-1);ae<=-R;ae++)p[32767+ae]=J,f[32767+ae]=[],f[32767+ae][1]=J,f[32767+ae][0]=z-1+ae;R<<=1,z<<=1}}(),function(){for(var R=0;R<256;R++)A[R]=19595*R,A[R+256|0]=38470*R,A[R+512|0]=7471*R+32768,A[R+768|0]=-11059*R,A[R+1024|0]=-21709*R,A[R+1280|0]=32768*R+8421375,A[R+1536|0]=-27439*R,A[R+1792|0]=-5329*R}(),G(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ma(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function w4(e){function t(C){if(!C)throw Error("assert :P")}function r(C,D,T){for(var O=0;4>O;O++)if(C[D+O]!=T.charCodeAt(O))return!0;return!1}function n(C,D,T,O,q){for(var K=0;K<q;K++)C[D+K]=T[O+K]}function i(C,D,T,O){for(var q=0;q<O;q++)C[D+q]=T}function a(C){return new Int32Array(C)}function s(C,D){for(var T=[],O=0;O<C;O++)T.push(new D);return T}function o(C,D){var T=[];return function O(q,K,ne){for(var re=ne[K],te=0;te<re&&(q.push(ne.length>K+1?[]:new D),!(ne.length<K+1));te++)O(q[te],K+1,ne)}(T,0,C),T}var c=function(){var C=this;function D(m,w){for(var P=1<<w-1>>>0;m&P;)P>>>=1;return P?(m&P-1)+P:m}function T(m,w,P,L,F){t(!(L%P));do m[w+(L-=P)]=F;while(0<L)}function O(m,w,P,L,F){if(t(2328>=F),512>=F)var $=a(512);else if(($=a(F))==null)return 0;return function(U,H,Y,X,ce,be){var Z,fe,ge=H,_e=1<<Y,xe=a(16),Ne=a(16);for(t(ce!=0),t(X!=null),t(U!=null),t(0<Y),fe=0;fe<ce;++fe){if(15<X[fe])return 0;++xe[X[fe]]}if(xe[0]==ce)return 0;for(Ne[1]=0,Z=1;15>Z;++Z){if(xe[Z]>1<<Z)return 0;Ne[Z+1]=Ne[Z]+xe[Z]}for(fe=0;fe<ce;++fe)Z=X[fe],0<X[fe]&&(be[Ne[Z]++]=fe);if(Ne[15]==1)return(X=new q).g=0,X.value=be[0],T(U,ge,1,_e,X),_e;var Ae,Le=-1,Te=_e-1,it=0,qe=1,At=1,Ze=1<<Y;for(fe=0,Z=1,ce=2;Z<=Y;++Z,ce<<=1){if(qe+=At<<=1,0>(At-=xe[Z]))return 0;for(;0<xe[Z];--xe[Z])(X=new q).g=Z,X.value=be[fe++],T(U,ge+it,ce,Ze,X),it=D(it,Z)}for(Z=Y+1,ce=2;15>=Z;++Z,ce<<=1){if(qe+=At<<=1,0>(At-=xe[Z]))return 0;for(;0<xe[Z];--xe[Z]){if(X=new q,(it&Te)!=Le){for(ge+=Ze,Ae=1<<(Le=Z)-Y;15>Le&&!(0>=(Ae-=xe[Le]));)++Le,Ae<<=1;_e+=Ze=1<<(Ae=Le-Y),U[H+(Le=it&Te)].g=Ae+Y,U[H+Le].value=ge-H-Le}X.g=Z-Y,X.value=be[fe++],T(U,ge+(it>>Y),ce,Ze,X),it=D(it,Z)}}return qe!=2*Ne[15]-1?0:_e}(m,w,P,L,F,$)}function q(){this.value=this.g=0}function K(){this.value=this.g=0}function ne(){this.G=s(5,q),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(ic,K)}function re(m,w,P,L){t(m!=null),t(w!=null),t(2147483648>L),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=w,m.pa=P,m.Jd=w,m.Yc=P+L,m.Zc=4<=L?P+L-4+1:P,pe(m)}function te(m,w){for(var P=0;0<w--;)P|=he(m,128)<<w;return P}function W(m,w){var P=te(m,w);return ee(m)?-P:P}function B(m,w,P,L){var F,$=0;for(t(m!=null),t(w!=null),t(4294967288>L),m.Sb=L,m.Ra=0,m.u=0,m.h=0,4<L&&(L=4),F=0;F<L;++F)$+=w[P+F]<<8*F;m.Ra=$,m.bb=L,m.oa=w,m.pa=P}function le(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<zo-8>>>0,++m.bb,m.u-=8;ie(m)&&(m.h=1,m.u=0)}function G(m,w){if(t(0<=w),!m.h&&w<=Ri){var P=J(m)&Di[w];return m.u+=w,le(m),P}return m.h=1,m.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(m){return m.Ra>>>(m.u&zo-1)>>>0}function ie(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>zo}function ae(m,w){m.u=w,m.h=ie(m)}function ue(m){m.u>=Gs&&(t(m.u>=Gs),le(m))}function pe(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ee(m){return te(m,1)}function he(m,w){var P=m.Ca;0>m.b&&pe(m);var L=m.b,F=P*w>>>8,$=(m.I>>>L>F)+0;for($?(P-=F,m.I-=F+1<<L>>>0):P=F+1,L=P,F=0;256<=L;)F+=8,L>>=8;return L=7^F+Wo[L],m.b-=L,m.Ca=(P<<L)-1,$}function oe(m,w,P){m[w+0]=P>>24&255,m[w+1]=P>>16&255,m[w+2]=P>>8&255,m[w+3]=255&P}function de(m,w){return m[w+0]|m[w+1]<<8}function Ce(m,w){return de(m,w)|m[w+2]<<16}function Pe(m,w){return de(m,w)|de(m,w+2)<<16}function V(m,w){var P=1<<w;return t(m!=null),t(0<w),m.X=a(P),m.X==null?0:(m.Mb=32-w,m.Xa=w,1)}function je(m,w){t(m!=null),t(w!=null),t(m.Xa==w.Xa),n(w.X,0,m.X,0,1<<w.Xa)}function Je(){this.X=[],this.Xa=this.Mb=0}function De(m,w,P,L){t(P!=null),t(L!=null);var F=P[0],$=L[0];return F==0&&(F=(m*$+w/2)/w),$==0&&($=(w*F+m/2)/m),0>=F||0>=$?0:(P[0]=F,L[0]=$,1)}function Se(m,w){return m+(1<<w)-1>>>w}function et(m,w){return((4278255360&m)+(4278255360&w)>>>0&4278255360)+((16711935&m)+(16711935&w)>>>0&16711935)>>>0}function Fe(m,w){C[w]=function(P,L,F,$,U,H,Y){var X;for(X=0;X<U;++X){var ce=C[m](H[Y+X-1],F,$+X);H[Y+X]=et(P[L+X],ce)}}}function Ke(){this.ud=this.hd=this.jd=0}function tt(m,w){return((4278124286&(m^w))>>>1)+(m&w)>>>0}function mt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function gt(m,w){return mt(m+(m-w+.5>>1))}function Xe(m,w,P){return Math.abs(w-P)-Math.abs(m-P)}function lt(m,w,P,L,F,$,U){for(L=$[U-1],P=0;P<F;++P)$[U+P]=L=et(m[w+P],L)}function yt(m,w,P,L,F){var $;for($=0;$<P;++$){var U=m[w+$],H=U>>8&255,Y=16711935&(Y=(Y=16711935&U)+((H<<16)+H));L[F+$]=(4278255360&U)+Y>>>0}}function Ge(m,w){w.jd=255&m,w.hd=m>>8&255,w.ud=m>>16&255}function bt(m,w,P,L,F,$){var U;for(U=0;U<L;++U){var H=w[P+U],Y=H>>>8,X=H,ce=255&(ce=(ce=H>>>16)+((m.jd<<24>>24)*(Y<<24>>24)>>>5));X=255&(X=(X+=(m.hd<<24>>24)*(Y<<24>>24)>>>5)+((m.ud<<24>>24)*(ce<<24>>24)>>>5)),F[$+U]=(4278255360&H)+(ce<<16)+X}}function We(m,w,P,L,F){C[w]=function($,U,H,Y,X,ce,be,Z,fe){for(Y=be;Y<Z;++Y)for(be=0;be<fe;++be)X[ce++]=F(H[L($[U++])])},C[m]=function($,U,H,Y,X,ce,be){var Z=8>>$.b,fe=$.Ea,ge=$.K[0],_e=$.w;if(8>Z)for($=(1<<$.b)-1,_e=(1<<Z)-1;U<H;++U){var xe,Ne=0;for(xe=0;xe<fe;++xe)xe&$||(Ne=L(Y[X++])),ce[be++]=F(ge[Ne&_e]),Ne>>=Z}else C["VP8LMapColor"+P](Y,X,ge,_e,ce,be,U,H,fe)}}function qt(m,w,P,L,F){for(P=w+P;w<P;){var $=m[w++];L[F++]=$>>16&255,L[F++]=$>>8&255,L[F++]=255&$}}function Ct(m,w,P,L,F){for(P=w+P;w<P;){var $=m[w++];L[F++]=$>>16&255,L[F++]=$>>8&255,L[F++]=255&$,L[F++]=$>>24&255}}function Nt(m,w,P,L,F){for(P=w+P;w<P;){var $=(U=m[w++])>>16&240|U>>12&15,U=240&U|U>>28&15;L[F++]=$,L[F++]=U}}function Ot(m,w,P,L,F){for(P=w+P;w<P;){var $=(U=m[w++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;L[F++]=$,L[F++]=U}}function wr(m,w,P,L,F){for(P=w+P;w<P;){var $=m[w++];L[F++]=255&$,L[F++]=$>>8&255,L[F++]=$>>16&255}}function st(m,w,P,L,F,$){if($==0)for(P=w+P;w<P;)oe(L,(($=m[w++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),F+=32;else n(L,F,m,w,P)}function lr(m,w){C[w][0]=C[m+"0"],C[w][1]=C[m+"1"],C[w][2]=C[m+"2"],C[w][3]=C[m+"3"],C[w][4]=C[m+"4"],C[w][5]=C[m+"5"],C[w][6]=C[m+"6"],C[w][7]=C[m+"7"],C[w][8]=C[m+"8"],C[w][9]=C[m+"9"],C[w][10]=C[m+"10"],C[w][11]=C[m+"11"],C[w][12]=C[m+"12"],C[w][13]=C[m+"13"],C[w][14]=C[m+"0"],C[w][15]=C[m+"0"]}function ht(m){return m==Bx||m==Ux||m==Am||m==qx}function jt(){this.eb=[],this.size=this.A=this.fb=0}function _r(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jt,this.f.kb=new _r,this.sd=null}function ct(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Wl(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Jn(m,w){var P=m.T,L=w.ba.f.RGBA,F=L.eb,$=L.fb+m.ka*L.A,U=da[w.ba.S],H=m.y,Y=m.O,X=m.f,ce=m.N,be=m.ea,Z=m.W,fe=w.cc,ge=w.dc,_e=w.Mc,xe=w.Nc,Ne=m.ka,Ae=m.ka+m.T,Le=m.U,Te=Le+1>>1;for(Ne==0?U(H,Y,null,null,X,ce,be,Z,X,ce,be,Z,F,$,null,null,Le):(U(w.ec,w.fc,H,Y,fe,ge,_e,xe,X,ce,be,Z,F,$-L.A,F,$,Le),++P);Ne+2<Ae;Ne+=2)fe=X,ge=ce,_e=be,xe=Z,ce+=m.Rc,Z+=m.Rc,$+=2*L.A,U(H,(Y+=2*m.fa)-m.fa,H,Y,fe,ge,_e,xe,X,ce,be,Z,F,$-L.A,F,$,Le);return Y+=m.fa,m.j+Ae<m.o?(n(w.ec,w.fc,H,Y,Le),n(w.cc,w.dc,X,ce,Te),n(w.Mc,w.Nc,be,Z,Te),P--):1&Ae||U(H,Y,null,null,X,ce,be,Z,X,ce,be,Z,F,$+L.A,null,null,Le),P}function Ds(m,w,P){var L=m.F,F=[m.J];if(L!=null){var $=m.U,U=w.ba.S,H=U==km||U==Am;w=w.ba.f.RGBA;var Y=[0],X=m.ka;Y[0]=m.T,m.Kb&&(X==0?--Y[0]:(--X,F[0]-=m.width),m.j+m.ka+m.T==m.o&&(Y[0]=m.o-m.j-X));var ce=w.eb;X=w.fb+X*w.A,m=BS(L,F[0],m.width,$,Y,ce,X+(H?0:3),w.A),t(P==Y),m&&ht(U)&&Lf(ce,X,H,$,Y,w.A)}return 0}function ts(m){var w=m.ma,P=w.ba.S,L=11>P,F=P==Sm||P==Nm||P==km||P==$x||P==12||ht(P);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!kf(w.Oa,m,F?11:12))return 0;if(F&&ht(P)&&jf(),m.da)alert("todo:use_scaling");else{if(L){if(w.Ib=Wl,m.Kb){if(P=m.U+1>>1,w.memory=a(m.U+2*P),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+m.U,w.Mc=w.cc,w.Nc=w.dc+P,w.Ib=Jn,jf()}}else alert("todo:EmitYUV");F&&(w.Jb=Ds,L&&Ta())}if(L&&!rN){for(m=0;256>m;++m)WM[m]=89858*(m-128)+Pm>>Em,KM[m]=-22014*(m-128)+Pm,VM[m]=-45773*(m-128),HM[m]=113618*(m-128)+Pm>>Em;for(m=Rf;m<Hx;++m)w=76283*(m-16)+Pm>>Em,GM[m-Rf]=is(w,255),YM[m-Rf]=is(w+8>>4,15);rN=1}return 1}function ut(m){var w=m.ma,P=m.U,L=m.T;return t(!(1&m.ka)),0>=P||0>=L?0:(P=w.Ib(m,w),w.Jb!=null&&w.Jb(m,w,P),w.Dc+=P,1)}function Rs(m){m.ma.memory=null}function Ms(m,w,P,L){return G(m,8)!=47?0:(w[0]=G(m,14)+1,P[0]=G(m,14)+1,L[0]=G(m,1),G(m,3)!=0?0:!m.h)}function na(m,w){if(4>m)return m+1;var P=m-2>>1;return(2+(1&m)<<P)+G(w,P)+1}function ia(m,w){return 120<w?w-120:1<=(P=((P=CM[w-1])>>4)*m+(8-(15&P)))?P:1;var P}function Dr(m,w,P){var L=J(P),F=m[w+=255&L].g-8;return 0<F&&(ae(P,P.u+8),L=J(P),w+=m[w].value,w+=L&(1<<F)-1),ae(P,P.u+m[w].g),m[w].value}function Nn(m,w,P){return P.g+=m.g,P.value+=m.value<<w>>>0,t(8>=P.g),m.g}function Rn(m,w,P){var L=m.xc;return t((w=L==0?0:m.vc[m.md*(P>>L)+(w>>L)])<m.Wb),m.Ya[w]}function Hl(m,w,P,L){var F=m.ab,$=m.c*w,U=m.C;w=U+w;var H=P,Y=L;for(L=m.Ta,P=m.Ua;0<F--;){var X=m.gc[F],ce=U,be=w,Z=H,fe=Y,ge=(Y=L,H=P,X.Ea);switch(t(ce<be),t(be<=X.nc),X.hc){case 2:Kr(Z,fe,(be-ce)*ge,Y,H);break;case 0:var _e=ce,xe=be,Ne=Y,Ae=H,Le=(Ze=X).Ea;_e==0&&(Ef(Z,fe,null,null,1,Ne,Ae),lt(Z,fe+1,0,0,Le-1,Ne,Ae+1),fe+=Le,Ae+=Le,++_e);for(var Te=1<<Ze.b,it=Te-1,qe=Se(Le,Ze.b),At=Ze.K,Ze=Ze.w+(_e>>Ze.b)*qe;_e<xe;){var Lt=At,mn=Ze,Et=1;for(Eu(Z,fe,Ne,Ae-Le,1,Ne,Ae);Et<Le;){var Qe=(Et&~it)+Te;Qe>Le&&(Qe=Le),(0,Cf[Lt[mn++]>>8&15])(Z,fe+ +Et,Ne,Ae+Et-Le,Qe-Et,Ne,Ae+Et),Et=Qe}fe+=Le,Ae+=Le,++_e&it||(Ze+=qe)}be!=X.nc&&n(Y,H-ge,Y,H+(be-ce-1)*ge,ge);break;case 1:for(ge=Z,xe=fe,Le=(Z=X.Ea)-(Ae=Z&~(Ne=(fe=1<<X.b)-1)),_e=Se(Z,X.b),Te=X.K,X=X.w+(ce>>X.b)*_e;ce<be;){for(it=Te,qe=X,At=new Ke,Ze=xe+Ae,Lt=xe+Z;xe<Ze;)Ge(it[qe++],At),Of(At,ge,xe,fe,Y,H),xe+=fe,H+=fe;xe<Lt&&(Ge(it[qe++],At),Of(At,ge,xe,Le,Y,H),xe+=Le,H+=Le),++ce&Ne||(X+=_e)}break;case 3:if(Z==Y&&fe==H&&0<X.b){for(xe=Y,Z=ge=H+(be-ce)*ge-(Ae=(be-ce)*Se(X.Ea,X.b)),fe=Y,Ne=H,_e=[],Ae=(Le=Ae)-1;0<=Ae;--Ae)_e[Ae]=fe[Ne+Ae];for(Ae=Le-1;0<=Ae;--Ae)xe[Z+Ae]=_e[Ae];bm(X,ce,be,Y,ge,Y,H)}else bm(X,ce,be,Z,fe,Y,H)}H=L,Y=P}Y!=P&&n(L,P,H,Y,$)}function $o(m,w){var P=m.V,L=m.Ba+m.c*m.C,F=w-m.C;if(t(w<=m.l.o),t(16>=F),0<F){var $=m.l,U=m.Ta,H=m.Ua,Y=$.width;if(Hl(m,F,P,L),F=H=[H],t((P=m.C)<(L=w)),t($.v<$.va),L>$.o&&(L=$.o),P<$.j){var X=$.j-P;P=$.j,F[0]+=X*Y}if(P>=L?P=0:(F[0]+=4*$.v,$.ka=P-$.j,$.U=$.va-$.v,$.T=L-P,P=1),P){if(H=H[0],11>(P=m.ca).S){var ce=P.f.RGBA,be=(L=P.S,F=$.U,$=$.T,X=ce.eb,ce.A),Z=$;for(ce=ce.fb+m.Ma*ce.A;0<Z--;){var fe=U,ge=H,_e=F,xe=X,Ne=ce;switch(L){case jm:Tf(fe,ge,_e,xe,Ne);break;case Sm:Ho(fe,ge,_e,xe,Ne);break;case Bx:Ho(fe,ge,_e,xe,Ne),Lf(xe,Ne,0,_e,1,0);break;case KS:ac(fe,ge,_e,xe,Ne);break;case Nm:st(fe,ge,_e,xe,Ne,1);break;case Ux:st(fe,ge,_e,xe,Ne,1),Lf(xe,Ne,0,_e,1,0);break;case km:st(fe,ge,_e,xe,Ne,0);break;case Am:st(fe,ge,_e,xe,Ne,0),Lf(xe,Ne,1,_e,1,0);break;case $x:Vo(fe,ge,_e,xe,Ne);break;case qx:Vo(fe,ge,_e,xe,Ne),$S(xe,Ne,_e,1,0);break;case GS:Ko(fe,ge,_e,xe,Ne);break;default:t(0)}H+=Y,ce+=be}m.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=P.height)}}m.C=w,t(m.C<=m.i)}function Ea(m){var w;if(0<m.ua)return 0;for(w=0;w<m.Wb;++w){var P=m.Ya[w].G,L=m.Ya[w].H;if(0<P[1][L[1]+0].g||0<P[2][L[2]+0].g||0<P[3][L[3]+0].g)return 0}return 1}function rs(m,w,P,L,F,$){if(m.Z!=0){var U=m.qd,H=m.rd;for(t(Jo[m.Z]!=null);w<P;++w)Jo[m.Z](U,H,L,F,L,F,$),U=L,H=F,F+=$;m.qd=U,m.rd=H}}function Pa(m,w){var P=m.l.ma,L=P.Z==0||P.Z==1?m.l.j:m.C;if(L=m.C<L?L:m.C,t(w<=m.l.o),w>L){var F=m.l.width,$=P.ca,U=P.tb+F*L,H=m.V,Y=m.Ba+m.c*L,X=m.gc;t(m.ab==1),t(X[0].hc==3),ls(X[0],L,w,H,Y,$,U),rs(P,L,w,$,U,F)}m.C=m.Ma=w}function Ca(m,w,P,L,F,$,U){var H=m.$/L,Y=m.$%L,X=m.m,ce=m.s,be=P+m.$,Z=be;F=P+L*F;var fe=P+L*$,ge=280+ce.ua,_e=m.Pb?H:16777216,xe=0<ce.ua?ce.Wa:null,Ne=ce.wc,Ae=be<fe?Rn(ce,Y,H):null;t(m.C<$),t(fe<=F);var Le=!1;e:for(;;){for(;Le||be<fe;){var Te=0;if(H>=_e){var it=be-P;t((_e=m).Pb),_e.wd=_e.m,_e.xd=it,0<_e.s.ua&&je(_e.s.Wa,_e.s.vb),_e=H+TM}if(Y&Ne||(Ae=Rn(ce,Y,H)),t(Ae!=null),Ae.Qb&&(w[be]=Ae.qb,Le=!0),!Le)if(ue(X),Ae.jc){Te=X,it=w;var qe=be,At=Ae.pd[J(Te)&ic-1];t(Ae.jc),256>At.g?(ae(Te,Te.u+At.g),it[qe]=At.value,Te=0):(ae(Te,Te.u+At.g-256),t(256<=At.value),Te=At.value),Te==0&&(Le=!0)}else Te=Dr(Ae.G[0],Ae.H[0],X);if(X.h)break;if(Le||256>Te){if(!Le)if(Ae.nd)w[be]=(Ae.qb|Te<<8)>>>0;else{if(ue(X),Le=Dr(Ae.G[1],Ae.H[1],X),ue(X),it=Dr(Ae.G[2],Ae.H[2],X),qe=Dr(Ae.G[3],Ae.H[3],X),X.h)break;w[be]=(qe<<24|Le<<16|Te<<8|it)>>>0}if(Le=!1,++be,++Y>=L&&(Y=0,++H,U!=null&&H<=$&&!(H%16)&&U(m,H),xe!=null))for(;Z<be;)Te=w[Z++],xe.X[(506832829*Te&4294967295)>>>xe.Mb]=Te}else if(280>Te){if(Te=na(Te-256,X),it=Dr(Ae.G[4],Ae.H[4],X),ue(X),it=ia(L,it=na(it,X)),X.h)break;if(be-P<it||F-be<Te)break e;for(qe=0;qe<Te;++qe)w[be+qe]=w[be+qe-it];for(be+=Te,Y+=Te;Y>=L;)Y-=L,++H,U!=null&&H<=$&&!(H%16)&&U(m,H);if(t(be<=F),Y&Ne&&(Ae=Rn(ce,Y,H)),xe!=null)for(;Z<be;)Te=w[Z++],xe.X[(506832829*Te&4294967295)>>>xe.Mb]=Te}else{if(!(Te<ge))break e;for(Le=Te-280,t(xe!=null);Z<be;)Te=w[Z++],xe.X[(506832829*Te&4294967295)>>>xe.Mb]=Te;Te=be,t(!(Le>>>(it=xe).Xa)),w[Te]=it.X[Le],Le=!0}Le||t(X.h==ie(X))}if(m.Pb&&X.h&&be<F)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&je(m.s.vb,m.s.Wa);else{if(X.h)break e;U!=null&&U(m,H>$?$:H),m.a=0,m.$=be-P}return 1}return m.a=3,0}function aa(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var w=m.Wa;w!=null&&(w.X=null),m.vb=null,t(m!=null)}function Vl(){var m=new xt;return m==null?null:(m.a=0,m.xb=XS,lr("Predictor","VP8LPredictors"),lr("Predictor","VP8LPredictors_C"),lr("PredictorAdd","VP8LPredictorsAdd"),lr("PredictorAdd","VP8LPredictorsAdd_C"),Kr=yt,Of=bt,Tf=qt,Ho=Ct,Vo=Nt,Ko=Ot,ac=wr,C.VP8LMapColor32b=os,C.VP8LMapColor8b=Pf,m)}function ns(m,w,P,L,F){var $=1,U=[m],H=[w],Y=L.m,X=L.s,ce=null,be=0;e:for(;;){if(P)for(;$&&G(Y,1);){var Z=U,fe=H,ge=L,_e=1,xe=ge.m,Ne=ge.gc[ge.ab],Ae=G(xe,2);if(ge.Oc&1<<Ae)$=0;else{switch(ge.Oc|=1<<Ae,Ne.hc=Ae,Ne.Ea=Z[0],Ne.nc=fe[0],Ne.K=[null],++ge.ab,t(4>=ge.ab),Ae){case 0:case 1:Ne.b=G(xe,3)+2,_e=ns(Se(Ne.Ea,Ne.b),Se(Ne.nc,Ne.b),0,ge,Ne.K),Ne.K=Ne.K[0];break;case 3:var Le,Te=G(xe,8)+1,it=16<Te?0:4<Te?1:2<Te?2:3;if(Z[0]=Se(Ne.Ea,it),Ne.b=it,Le=_e=ns(Te,1,0,ge,Ne.K)){var qe,At=Te,Ze=Ne,Lt=1<<(8>>Ze.b),mn=a(Lt);if(mn==null)Le=0;else{var Et=Ze.K[0],Qe=Ze.w;for(mn[0]=Ze.K[0][0],qe=1;qe<1*At;++qe)mn[qe]=et(Et[Qe+qe],mn[qe-1]);for(;qe<4*Lt;++qe)mn[qe]=0;Ze.K[0]=null,Ze.K[0]=mn,Le=1}}_e=Le;break;case 2:break;default:t(0)}$=_e}}if(U=U[0],H=H[0],$&&G(Y,1)&&!($=1<=(be=G(Y,4))&&11>=be)){L.a=3;break e}var Me;if(Me=$)t:{var Yr,St,Mt,gr=L,$n=U,di=H,Rr=be,Xn=P,fi=gr.m,gn=gr.s,$t=[null],Jt=1,Mr=0,Xt=OM[Rr];r:for(;;){if(Xn&&G(fi,1)){var Bn=G(fi,3)+2,La=Se($n,Bn),Jr=Se(di,Bn),ji=La*Jr;if(!ns(La,Jr,0,gr,$t))break r;for($t=$t[0],gn.xc=Bn,Yr=0;Yr<ji;++Yr){var ir=$t[Yr]>>8&65535;$t[Yr]=ir,ir>=Jt&&(Jt=ir+1)}}if(fi.h)break r;for(St=0;5>St;++St){var vn=YS[St];!St&&0<Rr&&(vn+=1<<Rr),Mr<vn&&(Mr=vn)}var Fi=s(Jt*Xt,q),hi=Jt,$i=s(hi,ne);if($i==null)var Bi=null;else t(65536>=hi),Bi=$i;var Si=a(Mr);if(Bi==null||Si==null||Fi==null){gr.a=1;break r}var Ui=Fi;for(Yr=Mt=0;Yr<Jt;++Yr){var ur=Bi[Yr],qi=ur.G,Da=ur.H,oc=0,Xs=1,Un=0;for(St=0;5>St;++St){vn=YS[St],qi[St]=Ui,Da[St]=Mt,!St&&0<Rr&&(vn+=1<<Rr);i:{var Om,Vx=vn,Tm=gr,Mf=Si,ZM=Ui,QM=Mt,Kx=0,Xo=Tm.m,eF=G(Xo,1);if(i(Mf,0,0,Vx),eF){var tF=G(Xo,1)+1,rF=G(Xo,1),aN=G(Xo,rF==0?1:8);Mf[aN]=1,tF==2&&(Mf[aN=G(Xo,8)]=1);var Im=1}else{var sN=a(19),oN=G(Xo,4)+4;if(19<oN){Tm.a=3;var Lm=0;break i}for(Om=0;Om<oN;++Om)sN[PM[Om]]=G(Xo,3);var Gx=void 0,Ff=void 0,lN=Tm,nF=sN,Dm=Vx,cN=Mf,Yx=0,Zo=lN.m,uN=8,dN=s(128,q);n:for(;O(dN,0,7,nF,19);){if(G(Zo,1)){var iF=2+2*G(Zo,3);if((Gx=2+G(Zo,iF))>Dm)break n}else Gx=Dm;for(Ff=0;Ff<Dm&&Gx--;){ue(Zo);var fN=dN[0+(127&J(Zo))];ae(Zo,Zo.u+fN.g);var Cu=fN.value;if(16>Cu)cN[Ff++]=Cu,Cu!=0&&(uN=Cu);else{var aF=Cu==16,hN=Cu-16,sF=AM[hN],pN=G(Zo,kM[hN])+sF;if(Ff+pN>Dm)break n;for(var oF=aF?uN:0;0<pN--;)cN[Ff++]=oF}}Yx=1;break n}Yx||(lN.a=3),Im=Yx}(Im=Im&&!Xo.h)&&(Kx=O(ZM,QM,8,Mf,Vx)),Im&&Kx!=0?Lm=Kx:(Tm.a=3,Lm=0)}if(Lm==0)break r;if(Xs&&EM[St]==1&&(Xs=Ui[Mt].g==0),oc+=Ui[Mt].g,Mt+=Lm,3>=St){var $f,Jx=Si[0];for($f=1;$f<vn;++$f)Si[$f]>Jx&&(Jx=Si[$f]);Un+=Jx}}if(ur.nd=Xs,ur.Qb=0,Xs&&(ur.qb=(qi[3][Da[3]+0].value<<24|qi[1][Da[1]+0].value<<16|qi[2][Da[2]+0].value)>>>0,oc==0&&256>qi[0][Da[0]+0].value&&(ur.Qb=1,ur.qb+=qi[0][Da[0]+0].value<<8)),ur.jc=!ur.Qb&&6>Un,ur.jc){var Rm,Zs=ur;for(Rm=0;Rm<ic;++Rm){var Qo=Rm,el=Zs.pd[Qo],Mm=Zs.G[0][Zs.H[0]+Qo];256<=Mm.value?(el.g=Mm.g+256,el.value=Mm.value):(el.g=0,el.value=0,Qo>>=Nn(Mm,8,el),Qo>>=Nn(Zs.G[1][Zs.H[1]+Qo],16,el),Qo>>=Nn(Zs.G[2][Zs.H[2]+Qo],0,el),Nn(Zs.G[3][Zs.H[3]+Qo],24,el))}}}gn.vc=$t,gn.Wb=Jt,gn.Ya=Bi,gn.yc=Fi,Me=1;break t}Me=0}if(!($=Me)){L.a=3;break e}if(0<be){if(X.ua=1<<be,!V(X.Wa,be)){L.a=1,$=0;break e}}else X.ua=0;var Xx=L,mN=U,lF=H,Zx=Xx.s,Qx=Zx.xc;if(Xx.c=mN,Xx.i=lF,Zx.md=Se(mN,Qx),Zx.wc=Qx==0?-1:(1<<Qx)-1,P){L.xb=$M;break e}if((ce=a(U*H))==null){L.a=1,$=0;break e}$=($=Ca(L,ce,0,U,H,H,null))&&!Y.h;break e}return $?(F!=null?F[0]=ce:(t(ce==null),t(P)),L.$=0,P||aa(X)):aa(X),$}function Kl(m,w){var P=m.c*m.i,L=P+w+16*w;return t(m.c<=w),m.V=a(L),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+P+w,1)}function yu(m,w){var P=m.C,L=w-P,F=m.V,$=m.Ba+m.c*P;for(t(w<=m.l.o);0<L;){var U=16<L?16:L,H=m.l.ma,Y=m.l.width,X=Y*U,ce=H.ca,be=H.tb+Y*P,Z=m.Ta,fe=m.Ua;Hl(m,U,F,$),US(Z,fe,ce,be,X),rs(H,P,P+U,ce,be,Y),L-=U,F+=U*m.c,P+=U}t(P==w),m.C=m.Ma=w}function xu(){this.ub=this.yd=this.td=this.Rb=0}function bu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _x(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ff(){this.Yb=function(){var m=[];return function w(P,L,F){for(var $=F[L],U=0;U<$&&(P.push(F.length>L+1?[]:0),!(F.length<L+1));U++)w(P[U],L+1,F)}(m,0,[3,11]),m}()}function rm(){this.jb=a(3),this.Wc=o([4,8],ff),this.Xc=o([4,17],ff)}function nm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function sa(){this.ld=this.La=this.dd=this.tc=0}function hf(){this.Na=this.la=0}function im(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pf(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function am(){this.uc=this.M=this.Nb=0,this.wa=Array(new sa),this.Y=0,this.ya=Array(new pf),this.aa=0,this.l=new wu}function sm(){this.y=a(16),this.f=a(8),this.ea=a(8)}function om(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new xu,this.Kc=new bu,this.ed=new nm,this.Qa=new _x,this.Ic=this.$c=this.Aa=0,this.D=new am,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,R),this.ia=0,this.pb=s(4,im),this.Pa=new rm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new sm),this.Hd=0,this.rb=Array(new hf),this.sb=0,this.wa=Array(new sa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pf),this.L=this.aa=0,this.gd=o([4,2],sa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function is(m,w){return 0>m?0:m>w?w:m}function wu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jx(){var m=new om;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Df||(Df=_u)),m}function rn(m,w,P){return m.a==0&&(m.a=w,m.sc=P,m.cb=0),0}function lm(m,w,P){return 3<=P&&m[w+0]==157&&m[w+1]==1&&m[w+2]==42}function as(m,w){if(m==null)return 0;if(m.a=0,m.sc="OK",w==null)return rn(m,2,"null VP8Io passed to VP8GetHeaders()");var P=w.data,L=w.w,F=w.ha;if(4>F)return rn(m,7,"Truncated header.");var $=P[L+0]|P[L+1]<<8|P[L+2]<<16,U=m.Od;if(U.Rb=!(1&$),U.td=$>>1&7,U.yd=$>>4&1,U.ub=$>>5,3<U.td)return rn(m,3,"Incorrect keyframe parameters.");if(!U.yd)return rn(m,4,"Frame not displayable.");L+=3,F-=3;var H=m.Kc;if(U.Rb){if(7>F)return rn(m,7,"cannot parse picture header");if(!lm(P,L,F))return rn(m,3,"Bad code word");H.c=16383&(P[L+4]<<8|P[L+3]),H.Td=P[L+4]>>6,H.i=16383&(P[L+6]<<8|P[L+5]),H.Ud=P[L+6]>>6,L+=7,F-=7,m.za=H.c+15>>4,m.Ub=H.i+15>>4,w.width=H.c,w.height=H.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i(($=m.Pa).jb,0,255,$.jb.length),t(($=m.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(U.ub>F)return rn(m,7,"bad partition length");re($=m.m,P,L,U.ub),L+=U.ub,F-=U.ub,U.Rb&&(H.Ld=ee($),H.Kd=ee($)),H=m.Qa;var Y,X=m.Pa;if(t($!=null),t(H!=null),H.Cb=ee($),H.Cb){if(H.Bb=ee($),ee($)){for(H.Fb=ee($),Y=0;4>Y;++Y)H.Zb[Y]=ee($)?W($,7):0;for(Y=0;4>Y;++Y)H.Lb[Y]=ee($)?W($,6):0}if(H.Bb)for(Y=0;3>Y;++Y)X.jb[Y]=ee($)?te($,8):255}else H.Bb=0;if($.Ka)return rn(m,3,"cannot parse segment header");if((H=m.ed).zd=ee($),H.Tb=te($,6),H.wb=te($,3),H.Pc=ee($),H.Pc&&ee($)){for(X=0;4>X;++X)ee($)&&(H.vd[X]=W($,6));for(X=0;4>X;++X)ee($)&&(H.od[X]=W($,6))}if(m.L=H.Tb==0?0:H.zd?1:2,$.Ka)return rn(m,3,"cannot parse filter header");var ce=F;if(F=Y=L,L=Y+ce,H=ce,m.Xb=(1<<te(m.m,2))-1,ce<3*(X=m.Xb))P=7;else{for(Y+=3*X,H-=3*X,ce=0;ce<X;++ce){var be=P[F+0]|P[F+1]<<8|P[F+2]<<16;be>H&&(be=H),re(m.Jc[+ce],P,Y,be),Y+=be,H-=be,F+=3}re(m.Jc[+X],P,Y,H),P=Y<L?0:5}if(P!=0)return rn(m,P,"cannot parse partitions");for(P=te(Y=m.m,7),F=ee(Y)?W(Y,4):0,L=ee(Y)?W(Y,4):0,H=ee(Y)?W(Y,4):0,X=ee(Y)?W(Y,4):0,Y=ee(Y)?W(Y,4):0,ce=m.Qa,be=0;4>be;++be){if(ce.Cb){var Z=ce.Zb[be];ce.Fb||(Z+=P)}else{if(0<be){m.pb[be]=m.pb[0];continue}Z=P}var fe=m.pb[be];fe.Sc[0]=zx[is(Z+F,127)],fe.Sc[1]=Wx[is(Z+0,127)],fe.Eb[0]=2*zx[is(Z+L,127)],fe.Eb[1]=101581*Wx[is(Z+H,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=zx[is(Z+X,117)],fe.Qc[1]=Wx[is(Z+Y,127)],fe.lc=Z+Y}if(!U.Rb)return rn(m,4,"Not a key frame.");for(ee($),U=m.Pa,P=0;4>P;++P){for(F=0;8>F;++F)for(L=0;3>L;++L)for(H=0;11>H;++H)X=he($,MM[P][F][L][H])?te($,8):DM[P][F][L][H],U.Wc[P][F].Yb[L][H]=X;for(F=0;17>F;++F)U.Xc[P][F]=U.Wc[P][FM[F]]}return m.kc=ee($),m.kc&&(m.Bd=te($,8)),m.cb=1}function _u(m,w,P,L,F,$,U){var H=w[F].Yb[P];for(P=0;16>F;++F){if(!he(m,H[P+0]))return F;for(;!he(m,H[P+1]);)if(H=w[++F].Yb[0],P=0,F==16)return 16;var Y=w[F+1].Yb;if(he(m,H[P+2])){var X=m,ce=0;if(he(X,(Z=H)[(be=P)+3]))if(he(X,Z[be+6])){for(H=0,be=2*(ce=he(X,Z[be+8]))+(Z=he(X,Z[be+9+ce])),ce=0,Z=IM[be];Z[H];++H)ce+=ce+he(X,Z[H]);ce+=3+(8<<be)}else he(X,Z[be+7])?(ce=7+2*he(X,165),ce+=he(X,145)):ce=5+he(X,159);else ce=he(X,Z[be+4])?3+he(X,Z[be+5]):2;H=Y[2]}else ce=1,H=Y[1];Y=U+LM[F],0>(X=m).b&&pe(X);var be,Z=X.b,fe=(be=X.Ca>>1)-(X.I>>Z)>>31;--X.b,X.Ca+=fe,X.Ca|=1,X.I-=(be+1&fe)<<Z,$[Y]=((ce^fe)-fe)*L[(0<F)+0]}return 16}function cm(m){var w=m.rb[m.sb-1];w.la=0,w.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function oa(m,w,P,L,F){F=m[w+P+32*L]+(F>>3),m[w+P+32*L]=-256&F?0>F?0:255:F}function fn(m,w,P,L,F,$){oa(m,w,0,P,L+F),oa(m,w,1,P,L+$),oa(m,w,2,P,L-$),oa(m,w,3,P,L-F)}function Fs(m){return(20091*m>>16)+m}function um(m,w,P,L){var F,$=0,U=a(16);for(F=0;4>F;++F){var H=m[w+0]+m[w+8],Y=m[w+0]-m[w+8],X=(35468*m[w+4]>>16)-Fs(m[w+12]),ce=Fs(m[w+4])+(35468*m[w+12]>>16);U[$+0]=H+ce,U[$+1]=Y+X,U[$+2]=Y-X,U[$+3]=H-ce,$+=4,w++}for(F=$=0;4>F;++F)H=(m=U[$+0]+4)+U[$+8],Y=m-U[$+8],X=(35468*U[$+4]>>16)-Fs(U[$+12]),oa(P,L,0,0,H+(ce=Fs(U[$+4])+(35468*U[$+12]>>16))),oa(P,L,1,0,Y+X),oa(P,L,2,0,Y-X),oa(P,L,3,0,H-ce),$++,L+=32}function Sx(m,w,P,L){var F=m[w+0]+4,$=35468*m[w+4]>>16,U=Fs(m[w+4]),H=35468*m[w+1]>>16;fn(P,L,0,F+U,m=Fs(m[w+1]),H),fn(P,L,1,F+$,m,H),fn(P,L,2,F-$,m,H),fn(P,L,3,F-U,m,H)}function Nx(m,w,P,L,F){um(m,w,P,L),F&&um(m,w+16,P,L+4)}function ss(m,w,P,L){sc(m,w+0,P,L,1),sc(m,w+32,P,L+128,1)}function dm(m,w,P,L){var F;for(m=m[w+0]+4,F=0;4>F;++F)for(w=0;4>w;++w)oa(P,L,w,F,m)}function fm(m,w,P,L){m[w+0]&&Gt(m,w+0,P,L),m[w+16]&&Gt(m,w+16,P,L+4),m[w+32]&&Gt(m,w+32,P,L+128),m[w+48]&&Gt(m,w+48,P,L+128+4)}function ju(m,w,P,L){var F,$=a(16);for(F=0;4>F;++F){var U=m[w+0+F]+m[w+12+F],H=m[w+4+F]+m[w+8+F],Y=m[w+4+F]-m[w+8+F],X=m[w+0+F]-m[w+12+F];$[0+F]=U+H,$[8+F]=U-H,$[4+F]=X+Y,$[12+F]=X-Y}for(F=0;4>F;++F)U=(m=$[0+4*F]+3)+$[3+4*F],H=$[1+4*F]+$[2+4*F],Y=$[1+4*F]-$[2+4*F],X=m-$[3+4*F],P[L+0]=U+H>>3,P[L+16]=X+Y>>3,P[L+32]=U-H>>3,P[L+48]=X-Y>>3,L+=64}function Gl(m,w,P){var L,F=w-32,$=Mi,U=255-m[F-1];for(L=0;L<P;++L){var H,Y=$,X=U+m[w-1];for(H=0;H<P;++H)m[w+H]=Y[X+m[F+H]];w+=32}}function kx(m,w){Gl(m,w,4)}function Ax(m,w){Gl(m,w,8)}function Ex(m,w){Gl(m,w,16)}function mf(m,w){var P;for(P=0;16>P;++P)n(m,w+32*P,m,w-32,16)}function hm(m,w){var P;for(P=16;0<P;--P)i(m,w,m[w-1],16),w+=32}function Oa(m,w,P){var L;for(L=0;16>L;++L)i(w,P+32*L,m,16)}function Px(m,w){var P,L=16;for(P=0;16>P;++P)L+=m[w-1+32*P]+m[w+P-32];Oa(L>>5,m,w)}function Yl(m,w){var P,L=8;for(P=0;16>P;++P)L+=m[w-1+32*P];Oa(L>>4,m,w)}function gf(m,w){var P,L=8;for(P=0;16>P;++P)L+=m[w+P-32];Oa(L>>4,m,w)}function Cx(m,w){Oa(128,m,w)}function wt(m,w,P){return m+2*w+P+2>>2}function Ox(m,w){var P,L=w-32;for(L=new Uint8Array([wt(m[L-1],m[L+0],m[L+1]),wt(m[L+0],m[L+1],m[L+2]),wt(m[L+1],m[L+2],m[L+3]),wt(m[L+2],m[L+3],m[L+4])]),P=0;4>P;++P)n(m,w+32*P,L,0,L.length)}function Tx(m,w){var P=m[w-1],L=m[w-1+32],F=m[w-1+64],$=m[w-1+96];oe(m,w+0,16843009*wt(m[w-1-32],P,L)),oe(m,w+32,16843009*wt(P,L,F)),oe(m,w+64,16843009*wt(L,F,$)),oe(m,w+96,16843009*wt(F,$,$))}function Ix(m,w){var P,L=4;for(P=0;4>P;++P)L+=m[w+P-32]+m[w-1+32*P];for(L>>=3,P=0;4>P;++P)i(m,w+32*P,L,4)}function $s(m,w){var P=m[w-1+0],L=m[w-1+32],F=m[w-1+64],$=m[w-1-32],U=m[w+0-32],H=m[w+1-32],Y=m[w+2-32],X=m[w+3-32];m[w+0+96]=wt(L,F,m[w-1+96]),m[w+1+96]=m[w+0+64]=wt(P,L,F),m[w+2+96]=m[w+1+64]=m[w+0+32]=wt($,P,L),m[w+3+96]=m[w+2+64]=m[w+1+32]=m[w+0+0]=wt(U,$,P),m[w+3+64]=m[w+2+32]=m[w+1+0]=wt(H,U,$),m[w+3+32]=m[w+2+0]=wt(Y,H,U),m[w+3+0]=wt(X,Y,H)}function Bs(m,w){var P=m[w+1-32],L=m[w+2-32],F=m[w+3-32],$=m[w+4-32],U=m[w+5-32],H=m[w+6-32],Y=m[w+7-32];m[w+0+0]=wt(m[w+0-32],P,L),m[w+1+0]=m[w+0+32]=wt(P,L,F),m[w+2+0]=m[w+1+32]=m[w+0+64]=wt(L,F,$),m[w+3+0]=m[w+2+32]=m[w+1+64]=m[w+0+96]=wt(F,$,U),m[w+3+32]=m[w+2+64]=m[w+1+96]=wt($,U,H),m[w+3+64]=m[w+2+96]=wt(U,H,Y),m[w+3+96]=wt(H,Y,Y)}function Lx(m,w){var P=m[w-1+0],L=m[w-1+32],F=m[w-1+64],$=m[w-1-32],U=m[w+0-32],H=m[w+1-32],Y=m[w+2-32],X=m[w+3-32];m[w+0+0]=m[w+1+64]=$+U+1>>1,m[w+1+0]=m[w+2+64]=U+H+1>>1,m[w+2+0]=m[w+3+64]=H+Y+1>>1,m[w+3+0]=Y+X+1>>1,m[w+0+96]=wt(F,L,P),m[w+0+64]=wt(L,P,$),m[w+0+32]=m[w+1+96]=wt(P,$,U),m[w+1+32]=m[w+2+96]=wt($,U,H),m[w+2+32]=m[w+3+96]=wt(U,H,Y),m[w+3+32]=wt(H,Y,X)}function Dx(m,w){var P=m[w+0-32],L=m[w+1-32],F=m[w+2-32],$=m[w+3-32],U=m[w+4-32],H=m[w+5-32],Y=m[w+6-32],X=m[w+7-32];m[w+0+0]=P+L+1>>1,m[w+1+0]=m[w+0+64]=L+F+1>>1,m[w+2+0]=m[w+1+64]=F+$+1>>1,m[w+3+0]=m[w+2+64]=$+U+1>>1,m[w+0+32]=wt(P,L,F),m[w+1+32]=m[w+0+96]=wt(L,F,$),m[w+2+32]=m[w+1+96]=wt(F,$,U),m[w+3+32]=m[w+2+96]=wt($,U,H),m[w+3+64]=wt(U,H,Y),m[w+3+96]=wt(H,Y,X)}function Su(m,w){var P=m[w-1+0],L=m[w-1+32],F=m[w-1+64],$=m[w-1+96];m[w+0+0]=P+L+1>>1,m[w+2+0]=m[w+0+32]=L+F+1>>1,m[w+2+32]=m[w+0+64]=F+$+1>>1,m[w+1+0]=wt(P,L,F),m[w+3+0]=m[w+1+32]=wt(L,F,$),m[w+3+32]=m[w+1+64]=wt(F,$,$),m[w+3+64]=m[w+2+64]=m[w+0+96]=m[w+1+96]=m[w+2+96]=m[w+3+96]=$}function vf(m,w){var P=m[w-1+0],L=m[w-1+32],F=m[w-1+64],$=m[w-1+96],U=m[w-1-32],H=m[w+0-32],Y=m[w+1-32],X=m[w+2-32];m[w+0+0]=m[w+2+32]=P+U+1>>1,m[w+0+32]=m[w+2+64]=L+P+1>>1,m[w+0+64]=m[w+2+96]=F+L+1>>1,m[w+0+96]=$+F+1>>1,m[w+3+0]=wt(H,Y,X),m[w+2+0]=wt(U,H,Y),m[w+1+0]=m[w+3+32]=wt(P,U,H),m[w+1+32]=m[w+3+64]=wt(L,P,U),m[w+1+64]=m[w+3+96]=wt(F,L,P),m[w+1+96]=wt($,F,L)}function Jl(m,w){var P;for(P=0;8>P;++P)n(m,w+32*P,m,w-32,8)}function Rx(m,w){var P;for(P=0;8>P;++P)i(m,w,m[w-1],8),w+=32}function Us(m,w,P){var L;for(L=0;8>L;++L)i(w,P+32*L,m,8)}function Mx(m,w){var P,L=8;for(P=0;8>P;++P)L+=m[w+P-32]+m[w-1+32*P];Us(L>>4,m,w)}function yf(m,w){var P,L=4;for(P=0;8>P;++P)L+=m[w+P-32];Us(L>>3,m,w)}function xf(m,w){var P,L=4;for(P=0;8>P;++P)L+=m[w-1+32*P];Us(L>>3,m,w)}function pm(m,w){Us(128,m,w)}function qs(m,w,P){var L=m[w-P],F=m[w+0],$=3*(F-L)+Fx[1020+m[w-2*P]-m[w+P]],U=_m[112+($+4>>3)];m[w-P]=Mi[255+L+_m[112+($+3>>3)]],m[w+0]=Mi[255+F-U]}function bf(m,w,P,L){var F=m[w+0],$=m[w+P];return ua[255+m[w-2*P]-m[w-P]]>L||ua[255+$-F]>L}function Nu(m,w,P,L){return 4*ua[255+m[w-P]-m[w+0]]+ua[255+m[w-2*P]-m[w+P]]<=L}function wf(m,w,P,L,F){var $=m[w-3*P],U=m[w-2*P],H=m[w-P],Y=m[w+0],X=m[w+P],ce=m[w+2*P],be=m[w+3*P];return 4*ua[255+H-Y]+ua[255+U-X]>L?0:ua[255+m[w-4*P]-$]<=F&&ua[255+$-U]<=F&&ua[255+U-H]<=F&&ua[255+be-ce]<=F&&ua[255+ce-X]<=F&&ua[255+X-Y]<=F}function Xl(m,w,P,L){var F=2*L+1;for(L=0;16>L;++L)Nu(m,w+L,P,F)&&qs(m,w+L,P)}function _f(m,w,P,L){var F=2*L+1;for(L=0;16>L;++L)Nu(m,w+L*P,1,F)&&qs(m,w+L*P,1)}function mm(m,w,P,L){var F;for(F=3;0<F;--F)Xl(m,w+=4*P,P,L)}function gm(m,w,P,L){var F;for(F=3;0<F;--F)_f(m,w+=4,P,L)}function zs(m,w,P,L,F,$,U,H){for($=2*$+1;0<F--;){if(wf(m,w,P,$,U))if(bf(m,w,P,H))qs(m,w,P);else{var Y=m,X=w,ce=P,be=Y[X-2*ce],Z=Y[X-ce],fe=Y[X+0],ge=Y[X+ce],_e=Y[X+2*ce],xe=27*(Ae=Fx[1020+3*(fe-Z)+Fx[1020+be-ge]])+63>>7,Ne=18*Ae+63>>7,Ae=9*Ae+63>>7;Y[X-3*ce]=Mi[255+Y[X-3*ce]+Ae],Y[X-2*ce]=Mi[255+be+Ne],Y[X-ce]=Mi[255+Z+xe],Y[X+0]=Mi[255+fe-xe],Y[X+ce]=Mi[255+ge-Ne],Y[X+2*ce]=Mi[255+_e-Ae]}w+=L}}function Ws(m,w,P,L,F,$,U,H){for($=2*$+1;0<F--;){if(wf(m,w,P,$,U))if(bf(m,w,P,H))qs(m,w,P);else{var Y=m,X=w,ce=P,be=Y[X-ce],Z=Y[X+0],fe=Y[X+ce],ge=_m[112+(4+(_e=3*(Z-be))>>3)],_e=_m[112+(_e+3>>3)],xe=ge+1>>1;Y[X-2*ce]=Mi[255+Y[X-2*ce]+xe],Y[X-ce]=Mi[255+be+_e],Y[X+0]=Mi[255+Z-ge],Y[X+ce]=Mi[255+fe-xe]}w+=L}}function vm(m,w,P,L,F,$){zs(m,w,P,1,16,L,F,$)}function Zl(m,w,P,L,F,$){zs(m,w,1,P,16,L,F,$)}function ym(m,w,P,L,F,$){var U;for(U=3;0<U;--U)Ws(m,w+=4*P,P,1,16,L,F,$)}function k(m,w,P,L,F,$){var U;for(U=3;0<U;--U)Ws(m,w+=4,1,P,16,L,F,$)}function M(m,w,P,L,F,$,U,H){zs(m,w,F,1,8,$,U,H),zs(P,L,F,1,8,$,U,H)}function Q(m,w,P,L,F,$,U,H){zs(m,w,1,F,8,$,U,H),zs(P,L,1,F,8,$,U,H)}function se(m,w,P,L,F,$,U,H){Ws(m,w+4*F,F,1,8,$,U,H),Ws(P,L+4*F,F,1,8,$,U,H)}function me(m,w,P,L,F,$,U,H){Ws(m,w+4,1,F,8,$,U,H),Ws(P,L+4,1,F,8,$,U,H)}function ke(){this.ba=new Tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Oe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ye(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rt(){this.ua=0,this.Wa=new Je,this.vb=new Je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ne,this.yc=new q}function xt(){this.xb=this.a=0,this.l=new wu,this.ca=new Tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rt,this.ab=0,this.gc=s(4,Ye),this.Oc=0}function kt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ft(m,w,P,L,F,$,U){for(m=m==null?0:m[w+0],w=0;w<U;++w)F[$+w]=m+P[L+w]&255,m=F[$+w]}function Pr(m,w,P,L,F,$,U){var H;if(m==null)Ft(null,null,P,L,F,$,U);else for(H=0;H<U;++H)F[$+H]=m[w+H]+P[L+H]&255}function nn(m,w,P,L,F,$,U){if(m==null)Ft(null,null,P,L,F,$,U);else{var H,Y=m[w+0],X=Y,ce=Y;for(H=0;H<U;++H)X=ce+(Y=m[w+H])-X,ce=P[L+H]+(-256&X?0>X?0:255:X)&255,X=Y,F[$+H]=ce}}function cr(m,w,P,L){var F=w.width,$=w.o;if(t(m!=null&&w!=null),0>P||0>=L||P+L>$)return null;if(!m.Cc){if(m.ga==null){var U;if(m.ga=new kt,(U=m.ga==null)||(U=w.width*w.o,t(m.Gb.length==0),m.Gb=a(U),m.Uc=0,m.Gb==null?U=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,U=1),U=!U),!U){U=m.ga;var H=m.Fa,Y=m.P,X=m.qc,ce=m.mb,be=m.nb,Z=Y+1,fe=X-1,ge=U.l;if(t(H!=null&&ce!=null&&w!=null),Jo[0]=null,Jo[1]=Ft,Jo[2]=Pr,Jo[3]=nn,U.ca=ce,U.tb=be,U.c=w.width,U.i=w.height,t(0<U.c&&0<U.i),1>=X)w=0;else if(U.$a=3&H[Y+0],U.Z=H[Y+0]>>2&3,U.Lc=H[Y+0]>>4&3,Y=H[Y+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||Y)w=0;else if(ge.put=ut,ge.ac=ts,ge.bc=Rs,ge.ma=U,ge.width=w.width,ge.height=w.height,ge.Da=w.Da,ge.v=w.v,ge.va=w.va,ge.j=w.j,ge.o=w.o,U.$a)e:{t(U.$a==1),w=Vl();t:for(;;){if(w==null){w=0;break e}if(t(U!=null),U.mc=w,w.c=U.c,w.i=U.i,w.l=U.l,w.l.ma=U,w.l.width=U.c,w.l.height=U.i,w.a=0,B(w.m,H,Z,fe),!ns(U.c,U.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Ea(w.s)?(U.ic=1,H=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(H),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(U.ic=0,w=Kl(w,U.c)),!w))break t;w=1;break e}U.mc=null,w=0}else w=fe>=U.c*U.i;U=!w}if(U)return null;m.ga.Lc!=1?m.Ga=0:L=$-P}t(m.ga!=null),t(P+L<=$);e:{if(w=(H=m.ga).c,$=H.l.o,H.$a==0){if(Z=m.rc,fe=m.Vc,ge=m.Fa,Y=m.P+1+P*w,X=m.mb,ce=m.nb+P*w,t(Y<=m.P+m.qc),H.Z!=0)for(t(Jo[H.Z]!=null),U=0;U<L;++U)Jo[H.Z](Z,fe,ge,Y,X,ce,w),Z=X,fe=ce,ce+=w,Y+=w;else for(U=0;U<L;++U)n(X,ce,ge,Y,w),Z=X,fe=ce,ce+=w,Y+=w;m.rc=Z,m.Vc=fe}else{if(t(H.mc!=null),w=P+L,t((U=H.mc)!=null),t(w<=U.i),U.C>=w)w=1;else if(H.ic||Ta(),H.ic){H=U.V,Z=U.Ba,fe=U.c;var _e=U.i,xe=(ge=1,Y=U.$/fe,X=U.$%fe,ce=U.m,be=U.s,U.$),Ne=fe*_e,Ae=fe*w,Le=be.wc,Te=xe<Ae?Rn(be,X,Y):null;t(xe<=Ne),t(w<=_e),t(Ea(be));t:for(;;){for(;!ce.h&&xe<Ae;){if(X&Le||(Te=Rn(be,X,Y)),t(Te!=null),ue(ce),256>(_e=Dr(Te.G[0],Te.H[0],ce)))H[Z+xe]=_e,++xe,++X>=fe&&(X=0,++Y<=w&&!(Y%16)&&Pa(U,Y));else{if(!(280>_e)){ge=0;break t}_e=na(_e-256,ce);var it,qe=Dr(Te.G[4],Te.H[4],ce);if(ue(ce),!(xe>=(qe=ia(fe,qe=na(qe,ce)))&&Ne-xe>=_e)){ge=0;break t}for(it=0;it<_e;++it)H[Z+xe+it]=H[Z+xe+it-qe];for(xe+=_e,X+=_e;X>=fe;)X-=fe,++Y<=w&&!(Y%16)&&Pa(U,Y);xe<Ae&&X&Le&&(Te=Rn(be,X,Y))}t(ce.h==ie(ce))}Pa(U,Y>w?w:Y);break t}!ge||ce.h&&xe<Ne?(ge=0,U.a=ce.h?5:3):U.$=xe,w=ge}else w=Ca(U,U.V,U.Ba,U.c,U.i,w,yu);if(!w){L=0;break e}}P+L>=$&&(m.Cc=1),L=1}if(!L)return null;if(m.Cc&&((L=m.ga)!=null&&(L.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+P*F}function hn(m,w,P,L,F,$){for(;0<F--;){var U,H=m,Y=w+(P?1:0),X=m,ce=w+(P?0:3);for(U=0;U<L;++U){var be=X[ce+4*U];be!=255&&(be*=32897,H[Y+4*U+0]=H[Y+4*U+0]*be>>23,H[Y+4*U+1]=H[Y+4*U+1]*be>>23,H[Y+4*U+2]=H[Y+4*U+2]*be>>23)}w+=$}}function an(m,w,P,L,F){for(;0<L--;){var $;for($=0;$<P;++$){var U=m[w+2*$+0],H=15&(X=m[w+2*$+1]),Y=4369*H,X=(240&X|X>>4)*Y>>16;m[w+2*$+0]=(240&U|U>>4)*Y>>16&240|(15&U|U<<4)*Y>>16>>4&15,m[w+2*$+1]=240&X|H}w+=F}}function Mn(m,w,P,L,F,$,U,H){var Y,X,ce=255;for(X=0;X<F;++X){for(Y=0;Y<L;++Y){var be=m[w+Y];$[U+4*Y]=be,ce&=be}w+=P,U+=H}return ce!=255}function Hs(m,w,P,L,F){var $;for($=0;$<F;++$)P[L+$]=m[w+$]>>8}function Ta(){Lf=hn,$S=an,BS=Mn,US=Hs}function Vs(m,w,P){C[m]=function(L,F,$,U,H,Y,X,ce,be,Z,fe,ge,_e,xe,Ne,Ae,Le){var Te,it=Le-1>>1,qe=H[Y+0]|X[ce+0]<<16,At=be[Z+0]|fe[ge+0]<<16;t(L!=null);var Ze=3*qe+At+131074>>2;for(w(L[F+0],255&Ze,Ze>>16,_e,xe),$!=null&&(Ze=3*At+qe+131074>>2,w($[U+0],255&Ze,Ze>>16,Ne,Ae)),Te=1;Te<=it;++Te){var Lt=H[Y+Te]|X[ce+Te]<<16,mn=be[Z+Te]|fe[ge+Te]<<16,Et=qe+Lt+At+mn+524296,Qe=Et+2*(Lt+At)>>3;Ze=Qe+qe>>1,qe=(Et=Et+2*(qe+mn)>>3)+Lt>>1,w(L[F+2*Te-1],255&Ze,Ze>>16,_e,xe+(2*Te-1)*P),w(L[F+2*Te-0],255&qe,qe>>16,_e,xe+(2*Te-0)*P),$!=null&&(Ze=Et+At>>1,qe=Qe+mn>>1,w($[U+2*Te-1],255&Ze,Ze>>16,Ne,Ae+(2*Te-1)*P),w($[U+2*Te+0],255&qe,qe>>16,Ne,Ae+(2*Te+0)*P)),qe=Lt,At=mn}1&Le||(Ze=3*qe+At+131074>>2,w(L[F+Le-1],255&Ze,Ze>>16,_e,xe+(Le-1)*P),$!=null&&(Ze=3*At+qe+131074>>2,w($[U+Le-1],255&Ze,Ze>>16,Ne,Ae+(Le-1)*P)))}}function jf(){da[jm]=BM,da[Sm]=ZS,da[KS]=UM,da[Nm]=QS,da[km]=eN,da[$x]=tN,da[GS]=qM,da[Bx]=ZS,da[Ux]=QS,da[Am]=eN,da[qx]=tN}function ku(m){return m&-16384?0>m?0:255:m>>zM}function Bo(m,w){return ku((19077*m>>8)+(26149*w>>8)-14234)}function Ql(m,w,P){return ku((19077*m>>8)-(6419*w>>8)-(13320*P>>8)+8708)}function ec(m,w){return ku((19077*m>>8)+(33050*w>>8)-17685)}function Uo(m,w,P,L,F){L[F+0]=Bo(m,P),L[F+1]=Ql(m,w,P),L[F+2]=ec(m,w)}function Fn(m,w,P,L,F){L[F+0]=ec(m,w),L[F+1]=Ql(m,w,P),L[F+2]=Bo(m,P)}function tc(m,w,P,L,F){var $=Ql(m,w,P);w=$<<3&224|ec(m,w)>>3,L[F+0]=248&Bo(m,P)|$>>5,L[F+1]=w}function rc(m,w,P,L,F){var $=240&ec(m,w)|15;L[F+0]=240&Bo(m,P)|Ql(m,w,P)>>4,L[F+1]=$}function Sf(m,w,P,L,F){L[F+0]=255,Uo(m,w,P,L,F+1)}function Nf(m,w,P,L,F){Fn(m,w,P,L,F),L[F+3]=255}function ui(m,w,P,L,F){Uo(m,w,P,L,F),L[F+3]=255}function Ks(m,w,P){C[m]=function(L,F,$,U,H,Y,X,ce,be){for(var Z=ce+(-2&be)*P;ce!=Z;)w(L[F+0],$[U+0],H[Y+0],X,ce),w(L[F+1],$[U+0],H[Y+0],X,ce+P),F+=2,++U,++Y,ce+=2*P;1&be&&w(L[F+0],$[U+0],H[Y+0],X,ce)}}function Au(m,w,P){return P==0?m==0?w==0?6:5:w==0?4:0:P}function xm(m,w,P,L,F){switch(m>>>30){case 3:sc(w,P,L,F,0);break;case 2:ca(w,P,L,F);break;case 1:Gt(w,P,L,F)}}function la(m,w){var P,L,F=w.M,$=w.Nb,U=m.oc,H=m.pc+40,Y=m.oc,X=m.pc+584,ce=m.oc,be=m.pc+600;for(P=0;16>P;++P)U[H+32*P-1]=129;for(P=0;8>P;++P)Y[X+32*P-1]=129,ce[be+32*P-1]=129;for(0<F?U[H-1-32]=Y[X-1-32]=ce[be-1-32]=129:(i(U,H-32-1,127,21),i(Y,X-32-1,127,9),i(ce,be-32-1,127,9)),L=0;L<m.za;++L){var Z=w.ya[w.aa+L];if(0<L){for(P=-1;16>P;++P)n(U,H+32*P-4,U,H+32*P+12,4);for(P=-1;8>P;++P)n(Y,X+32*P-4,Y,X+32*P+4,4),n(ce,be+32*P-4,ce,be+32*P+4,4)}var fe=m.Gd,ge=m.Hd+L,_e=Z.ad,xe=Z.Hc;if(0<F&&(n(U,H-32,fe[ge].y,0,16),n(Y,X-32,fe[ge].f,0,8),n(ce,be-32,fe[ge].ea,0,8)),Z.Za){var Ne=U,Ae=H-32+16;for(0<F&&(L>=m.za-1?i(Ne,Ae,fe[ge].y[15],4):n(Ne,Ae,fe[ge+1].y,0,4)),P=0;4>P;P++)Ne[Ae+128+P]=Ne[Ae+256+P]=Ne[Ae+384+P]=Ne[Ae+0+P];for(P=0;16>P;++P,xe<<=2)Ne=U,Ae=H+nN[P],Ia[Z.Ob[P]](Ne,Ae),xm(xe,_e,16*+P,Ne,Ae)}else if(Ne=Au(L,F,Z.Ob[0]),Yo[Ne](U,H),xe!=0)for(P=0;16>P;++P,xe<<=2)xm(xe,_e,16*+P,U,H+nN[P]);for(P=Z.Gc,Ne=Au(L,F,Z.Dd),Js[Ne](Y,X),Js[Ne](ce,be),xe=_e,Ne=Y,Ae=X,255&(Z=0|P)&&(170&Z?cs(xe,256,Ne,Ae):nr(xe,256,Ne,Ae)),Z=ce,xe=be,255&(P>>=8)&&(170&P?cs(_e,320,Z,xe):nr(_e,320,Z,xe)),F<m.Ub-1&&(n(fe[ge].y,0,U,H+480,16),n(fe[ge].f,0,Y,X+224,8),n(fe[ge].ea,0,ce,be+224,8)),P=8*$*m.B,fe=m.sa,ge=m.ta+16*L+16*$*m.R,_e=m.qa,Z=m.ra+8*L+P,xe=m.Ha,Ne=m.Ia+8*L+P,P=0;16>P;++P)n(fe,ge+P*m.R,U,H+32*P,16);for(P=0;8>P;++P)n(_e,Z+P*m.B,Y,X+32*P,8),n(xe,Ne+P*m.B,ce,be+32*P,8)}}function nc(m,w,P,L,F,$,U,H,Y){var X=[0],ce=[0],be=0,Z=Y!=null?Y.kd:0,fe=Y??new Oe;if(m==null||12>P)return 7;fe.data=m,fe.w=w,fe.ha=P,w=[w],P=[P],fe.gb=[fe.gb];e:{var ge=w,_e=P,xe=fe.gb;if(t(m!=null),t(_e!=null),t(xe!=null),xe[0]=0,12<=_e[0]&&!r(m,ge[0],"RIFF")){if(r(m,ge[0]+8,"WEBP")){xe=3;break e}var Ne=Pe(m,ge[0]+4);if(12>Ne||4294967286<Ne){xe=3;break e}if(Z&&Ne>_e[0]-8){xe=7;break e}xe[0]=Ne,ge[0]+=12,_e[0]-=12}xe=0}if(xe!=0)return xe;for(Ne=0<fe.gb[0],P=P[0];;){e:{var Ae=m;_e=w,xe=P;var Le=X,Te=ce,it=ge=[0];if((Ze=be=[be])[0]=0,8>xe[0])xe=7;else{if(!r(Ae,_e[0],"VP8X")){if(Pe(Ae,_e[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var qe=Pe(Ae,_e[0]+8),At=1+Ce(Ae,_e[0]+12);if(2147483648<=At*(Ae=1+Ce(Ae,_e[0]+15))){xe=3;break e}it!=null&&(it[0]=qe),Le!=null&&(Le[0]=At),Te!=null&&(Te[0]=Ae),_e[0]+=18,xe[0]-=18,Ze[0]=1}xe=0}}if(be=be[0],ge=ge[0],xe!=0)return xe;if(_e=!!(2&ge),!Ne&&be)return 3;if($!=null&&($[0]=!!(16&ge)),U!=null&&(U[0]=_e),H!=null&&(H[0]=0),U=X[0],ge=ce[0],be&&_e&&Y==null){xe=0;break}if(4>P){xe=7;break}if(Ne&&be||!Ne&&!be&&!r(m,w[0],"ALPH")){P=[P],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{qe=m,xe=w,Ne=P;var Ze=fe.gb;Le=fe.na,Te=fe.P,it=fe.Sa,At=22,t(qe!=null),t(Ne!=null),Ae=xe[0];var Lt=Ne[0];for(t(Le!=null),t(it!=null),Le[0]=null,Te[0]=null,it[0]=0;;){if(xe[0]=Ae,Ne[0]=Lt,8>Lt){xe=7;break e}var mn=Pe(qe,Ae+4);if(4294967286<mn){xe=3;break e}var Et=8+mn+1&-2;if(At+=Et,0<Ze&&At>Ze){xe=3;break e}if(!r(qe,Ae,"VP8 ")||!r(qe,Ae,"VP8L")){xe=0;break e}if(Lt[0]<Et){xe=7;break e}r(qe,Ae,"ALPH")||(Le[0]=qe,Te[0]=Ae+8,it[0]=mn),Ae+=Et,Lt-=Et}}if(P=P[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],xe!=0)break}P=[P],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(Ze=m,xe=w,Ne=P,Le=fe.gb[0],Te=fe.Ja,it=fe.xa,qe=xe[0],Ae=!r(Ze,qe,"VP8 "),At=!r(Ze,qe,"VP8L"),t(Ze!=null),t(Ne!=null),t(Te!=null),t(it!=null),8>Ne[0])xe=7;else{if(Ae||At){if(Ze=Pe(Ze,qe+4),12<=Le&&Ze>Le-12){xe=3;break e}if(Z&&Ze>Ne[0]-8){xe=7;break e}Te[0]=Ze,xe[0]+=8,Ne[0]-=8,it[0]=At}else it[0]=5<=Ne[0]&&Ze[qe+0]==47&&!(Ze[qe+4]>>5),Te[0]=Ne[0];xe=0}if(P=P[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],w=w[0],xe!=0)break;if(4294967286<fe.Ja)return 3;if(H==null||_e||(H[0]=fe.xa?2:1),U=[U],ge=[ge],fe.xa){if(5>P){xe=7;break}H=U,Z=ge,_e=$,m==null||5>P?m=0:5<=P&&m[w+0]==47&&!(m[w+4]>>5)?(Ne=[0],Ze=[0],Le=[0],B(Te=new z,m,w,P),Ms(Te,Ne,Ze,Le)?(H!=null&&(H[0]=Ne[0]),Z!=null&&(Z[0]=Ze[0]),_e!=null&&(_e[0]=Le[0]),m=1):m=0):m=0}else{if(10>P){xe=7;break}H=ge,m==null||10>P||!lm(m,w+3,P-3)?m=0:(Z=m[w+0]|m[w+1]<<8|m[w+2]<<16,_e=16383&(m[w+7]<<8|m[w+6]),m=16383&(m[w+9]<<8|m[w+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=fe.Ja||!_e||!m?m=0:(U&&(U[0]=_e),H&&(H[0]=m),m=1))}if(!m||(U=U[0],ge=ge[0],be&&(X[0]!=U||ce[0]!=ge)))return 3;Y!=null&&(Y[0]=fe,Y.offset=w-Y.w,t(4294967286>w-Y.w),t(Y.offset==Y.ha-P));break}return xe==0||xe==7&&be&&Y==null?($!=null&&($[0]|=fe.na!=null&&0<fe.na.length),L!=null&&(L[0]=U),F!=null&&(F[0]=ge),0):xe}function kf(m,w,P){var L=w.width,F=w.height,$=0,U=0,H=L,Y=F;if(w.Da=m!=null&&0<m.Da,w.Da&&(H=m.cd,Y=m.bd,$=m.v,U=m.j,11>P||($&=-2,U&=-2),0>$||0>U||0>=H||0>=Y||$+H>L||U+Y>F))return 0;if(w.v=$,w.j=U,w.va=$+H,w.o=U+Y,w.U=H,w.T=Y,w.da=m!=null&&0<m.da,w.da){if(!De(H,Y,P=[m.ib],$=[m.hb]))return 0;w.ib=P[0],w.hb=$[0]}return w.ob=m!=null&&m.ob,w.Kb=m==null||!m.Sd,w.da&&(w.ob=w.ib<3*L/4&&w.hb<3*F/4,w.Kb=0),1}function Af(m){if(m==null)return 2;if(11>m.S){var w=m.f.RGBA;w.fb+=(m.height-1)*w.A,w.A=-w.A}else w=m.f.kb,m=m.height,w.O+=(m-1)*w.fa,w.fa=-w.fa,w.N+=(m-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(m-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(m-1)*w.lb,w.lb=-w.lb);return 0}function qo(m,w,P,L){if(L==null||0>=m||0>=w)return 2;if(P!=null){if(P.Da){var F=P.cd,$=P.bd,U=-2&P.v,H=-2&P.j;if(0>U||0>H||0>=F||0>=$||U+F>m||H+$>w)return 2;m=F,w=$}if(P.da){if(!De(m,w,F=[P.ib],$=[P.hb]))return 2;m=F[0],w=$[0]}}L.width=m,L.height=w;e:{var Y=L.width,X=L.height;if(m=L.S,0>=Y||0>=X||!(m>=jm&&13>m))m=2;else{if(0>=L.Rd&&L.sd==null){U=$=F=w=0;var ce=(H=Y*iN[m])*X;if(11>m||($=(X+1)/2*(w=(Y+1)/2),m==12&&(U=(F=Y)*X)),(X=a(ce+2*$+U))==null){m=1;break e}L.sd=X,11>m?((Y=L.f.RGBA).eb=X,Y.fb=0,Y.A=H,Y.size=ce):((Y=L.f.kb).y=X,Y.O=0,Y.fa=H,Y.Fd=ce,Y.f=X,Y.N=0+ce,Y.Ab=w,Y.Cd=$,Y.ea=X,Y.W=0+ce+$,Y.Db=w,Y.Ed=$,m==12&&(Y.F=X,Y.J=0+ce+2*$),Y.Tc=U,Y.lb=F)}if(w=1,F=L.S,$=L.width,U=L.height,F>=jm&&13>F)if(11>F)m=L.f.RGBA,w&=(H=Math.abs(m.A))*(U-1)+$<=m.size,w&=H>=$*iN[F],w&=m.eb!=null;else{m=L.f.kb,H=($+1)/2,ce=(U+1)/2,Y=Math.abs(m.fa),X=Math.abs(m.Ab);var be=Math.abs(m.Db),Z=Math.abs(m.lb),fe=Z*(U-1)+$;w&=Y*(U-1)+$<=m.Fd,w&=X*(ce-1)+H<=m.Cd,w=(w&=be*(ce-1)+H<=m.Ed)&Y>=$&X>=H&be>=H,w&=m.y!=null,w&=m.f!=null,w&=m.ea!=null,F==12&&(w&=Z>=$,w&=fe<=m.Tc,w&=m.F!=null)}else w=0;m=w?0:2}}return m!=0||P!=null&&P.fd&&(m=Af(L)),m}var ic=64,Di=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ri=24,zo=32,Gs=8,Wo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Fe("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(m){return m},C.Predictor2=function(m,w,P){return w[P+0]},C.Predictor3=function(m,w,P){return w[P+1]},C.Predictor4=function(m,w,P){return w[P-1]},C.Predictor5=function(m,w,P){return tt(tt(m,w[P+1]),w[P+0])},C.Predictor6=function(m,w,P){return tt(m,w[P-1])},C.Predictor7=function(m,w,P){return tt(m,w[P+0])},C.Predictor8=function(m,w,P){return tt(w[P-1],w[P+0])},C.Predictor9=function(m,w,P){return tt(w[P+0],w[P+1])},C.Predictor10=function(m,w,P){return tt(tt(m,w[P-1]),tt(w[P+0],w[P+1]))},C.Predictor11=function(m,w,P){var L=w[P+0];return 0>=Xe(L>>24&255,m>>24&255,(w=w[P-1])>>24&255)+Xe(L>>16&255,m>>16&255,w>>16&255)+Xe(L>>8&255,m>>8&255,w>>8&255)+Xe(255&L,255&m,255&w)?L:m},C.Predictor12=function(m,w,P){var L=w[P+0];return(mt((m>>24&255)+(L>>24&255)-((w=w[P-1])>>24&255))<<24|mt((m>>16&255)+(L>>16&255)-(w>>16&255))<<16|mt((m>>8&255)+(L>>8&255)-(w>>8&255))<<8|mt((255&m)+(255&L)-(255&w)))>>>0},C.Predictor13=function(m,w,P){var L=w[P-1];return(gt((m=tt(m,w[P+0]))>>24&255,L>>24&255)<<24|gt(m>>16&255,L>>16&255)<<16|gt(m>>8&255,L>>8&255)<<8|gt(255&m,255&L))>>>0};var Ef=C.PredictorAdd0;C.PredictorAdd1=lt,Fe("Predictor2","PredictorAdd2"),Fe("Predictor3","PredictorAdd3"),Fe("Predictor4","PredictorAdd4"),Fe("Predictor5","PredictorAdd5"),Fe("Predictor6","PredictorAdd6"),Fe("Predictor7","PredictorAdd7"),Fe("Predictor8","PredictorAdd8"),Fe("Predictor9","PredictorAdd9"),Fe("Predictor10","PredictorAdd10"),Fe("Predictor11","PredictorAdd11"),Fe("Predictor12","PredictorAdd12"),Fe("Predictor13","PredictorAdd13");var Eu=C.PredictorAdd2;We("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),We("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Kr,bm=C.ColorIndexInverseTransform,os=C.MapARGB,ls=C.VP8LColorIndexInverseTransformAlpha,Pf=C.MapAlpha,Cf=C.VP8LPredictorsAdd=[];Cf.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Of,Tf,Ho,Vo,Ko,ac,Go,sc,ca,cs,Gt,nr,Gr,pn,Ys,If,Pu,wm,IS,LS,DS,RS,MS,FS,Lf,$S,BS,US,qS=a(511),zS=a(2041),WS=a(225),HS=a(767),VS=0,Fx=zS,_m=WS,Mi=HS,ua=qS,jm=0,Sm=1,KS=2,Nm=3,km=4,$x=5,GS=6,Bx=7,Ux=8,Am=9,qx=10,kM=[2,3,7],AM=[3,3,11],YS=[280,256,256,256,40],EM=[0,1,1,1,0],PM=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],CM=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],OM=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],TM=8,zx=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Wx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Df=null,IM=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],LM=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],JS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],DM=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],RM=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],MM=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],FM=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Yo=[],Ia=[],Js=[],$M=1,XS=2,Jo=[],da=[];Vs("UpsampleRgbLinePair",Uo,3),Vs("UpsampleBgrLinePair",Fn,3),Vs("UpsampleRgbaLinePair",ui,4),Vs("UpsampleBgraLinePair",Nf,4),Vs("UpsampleArgbLinePair",Sf,4),Vs("UpsampleRgba4444LinePair",rc,2),Vs("UpsampleRgb565LinePair",tc,2);var BM=C.UpsampleRgbLinePair,UM=C.UpsampleBgrLinePair,ZS=C.UpsampleRgbaLinePair,QS=C.UpsampleBgraLinePair,eN=C.UpsampleArgbLinePair,tN=C.UpsampleRgba4444LinePair,qM=C.UpsampleRgb565LinePair,Em=16,Pm=1<<Em-1,Rf=-227,Hx=482,zM=6,rN=0,WM=a(256),HM=a(256),VM=a(256),KM=a(256),GM=a(Hx-Rf),YM=a(Hx-Rf);Ks("YuvToRgbRow",Uo,3),Ks("YuvToBgrRow",Fn,3),Ks("YuvToRgbaRow",ui,4),Ks("YuvToBgraRow",Nf,4),Ks("YuvToArgbRow",Sf,4),Ks("YuvToRgba4444Row",rc,2),Ks("YuvToRgb565Row",tc,2);var nN=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cm=[0,2,8],JM=[8,7,6,4,4,2,2,2,1,1,1,1],XM=1;this.WebPDecodeRGBA=function(m,w,P,L,F){var $=Sm,U=new ke,H=new Tt;U.ba=H,H.S=$,H.width=[H.width],H.height=[H.height];var Y=H.width,X=H.height,ce=new ct;if(ce==null||m==null)var be=2;else t(ce!=null),be=nc(m,w,P,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(be!=0?Y=0:(Y!=null&&(Y[0]=ce.width[0]),X!=null&&(X[0]=ce.height[0]),Y=1),Y){H.width=H.width[0],H.height=H.height[0],L!=null&&(L[0]=H.width),F!=null&&(F[0]=H.height);e:{if(L=new wu,(F=new Oe).data=m,F.w=w,F.ha=P,F.kd=1,w=[0],t(F!=null),((m=nc(F.data,F.w,F.ha,null,null,null,w,null,F))==0||m==7)&&w[0]&&(m=4),(w=m)==0){if(t(U!=null),L.data=F.data,L.w=F.w+F.offset,L.ha=F.ha-F.offset,L.put=ut,L.ac=ts,L.bc=Rs,L.ma=U,F.xa){if((m=Vl())==null){U=1;break e}if(function(Z,fe){var ge=[0],_e=[0],xe=[0];t:for(;;){if(Z==null)return 0;if(fe==null)return Z.a=2,0;if(Z.l=fe,Z.a=0,B(Z.m,fe.data,fe.w,fe.ha),!Ms(Z.m,ge,_e,xe)){Z.a=3;break t}if(Z.xb=XS,fe.width=ge[0],fe.height=_e[0],!ns(ge[0],_e[0],1,Z,null))break t;return 1}return t(Z.a!=0),0}(m,L)){if(L=(w=qo(L.width,L.height,U.Oa,U.ba))==0){t:{L=m;r:for(;;){if(L==null){L=0;break t}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((P=L.l)!=null),t((F=P.ma)!=null),L.xb!=0){if(L.ca=F.ba,L.tb=F.tb,t(L.ca!=null),!kf(F.Oa,P,Nm)){L.a=2;break r}if(!Kl(L,P.width)||P.da)break r;if((P.da||ht(L.ca.S))&&Ta(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Ta()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!V(L.s.vb,L.s.Wa.Xa)){L.a=1;break r}L.xb=0}if(!Ca(L,L.V,L.Ba,L.c,L.i,P.o,$o))break r;F.Dc=L.Ma,L=1;break t}t(L.a!=0),L=0}L=!L}L&&(w=m.a)}else w=m.a}else{if((m=new jx)==null){U=1;break e}if(m.Fa=F.na,m.P=F.P,m.qc=F.Sa,as(m,L)){if((w=qo(L.width,L.height,U.Oa,U.ba))==0){if(m.Aa=0,P=U.Oa,t((F=m)!=null),P!=null){if(0<(Y=0>(Y=P.Md)?0:100<Y?255:255*Y/100)){for(X=ce=0;4>X;++X)12>(be=F.pb[X]).lc&&(be.ia=Y*JM[0>be.lc?0:be.lc]>>3),ce|=be.ia;ce&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=P.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}(function(Z,fe){if(Z==null)return 0;if(fe==null)return rn(Z,2,"NULL VP8Io parameter in VP8Decode().");if(!Z.cb&&!as(Z,fe))return 0;if(t(Z.cb),fe.ac==null||fe.ac(fe)){fe.ob&&(Z.L=0);var ge=Cm[Z.L];if(Z.L==2?(Z.yb=0,Z.zb=0):(Z.yb=fe.v-ge>>4,Z.zb=fe.j-ge>>4,0>Z.yb&&(Z.yb=0),0>Z.zb&&(Z.zb=0)),Z.Va=fe.o+15+ge>>4,Z.Hb=fe.va+15+ge>>4,Z.Hb>Z.za&&(Z.Hb=Z.za),Z.Va>Z.Ub&&(Z.Va=Z.Ub),0<Z.L){var _e=Z.ed;for(ge=0;4>ge;++ge){var xe;if(Z.Qa.Cb){var Ne=Z.Qa.Lb[ge];Z.Qa.Fb||(Ne+=_e.Tb)}else Ne=_e.Tb;for(xe=0;1>=xe;++xe){var Ae=Z.gd[ge][xe],Le=Ne;if(_e.Pc&&(Le+=_e.vd[0],xe&&(Le+=_e.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var Te=Le;0<_e.wb&&(Te=4<_e.wb?Te>>2:Te>>1)>9-_e.wb&&(Te=9-_e.wb),1>Te&&(Te=1),Ae.dd=Te,Ae.tc=2*Le+Te,Ae.ld=40<=Le?2:15<=Le?1:0}else Ae.tc=0;Ae.La=xe}}}ge=0}else rn(Z,6,"Frame setup failed"),ge=Z.a;if(ge=ge==0){if(ge){Z.$c=0,0<Z.Aa||(Z.Ic=XM);t:{ge=Z.Ic,_e=4*(Te=Z.za);var it=32*Te,qe=Te+1,At=0<Z.L?Te*(0<Z.Aa?2:1):0,Ze=(Z.Aa==2?2:1)*Te;if((Ae=_e+832+(xe=3*(16*ge+Cm[Z.L])/2*it)+(Ne=Z.Fa!=null&&0<Z.Fa.length?Z.Kc.c*Z.Kc.i:0))!=Ae)ge=0;else{if(Ae>Z.Vb){if(Z.Vb=0,Z.Ec=a(Ae),Z.Fc=0,Z.Ec==null){ge=rn(Z,1,"no memory during frame initialization.");break t}Z.Vb=Ae}Ae=Z.Ec,Le=Z.Fc,Z.Ac=Ae,Z.Bc=Le,Le+=_e,Z.Gd=s(it,sm),Z.Hd=0,Z.rb=s(qe+1,hf),Z.sb=1,Z.wa=At?s(At,sa):null,Z.Y=0,Z.D.Nb=0,Z.D.wa=Z.wa,Z.D.Y=Z.Y,0<Z.Aa&&(Z.D.Y+=Te),t(!0),Z.oc=Ae,Z.pc=Le,Le+=832,Z.ya=s(Ze,pf),Z.aa=0,Z.D.ya=Z.ya,Z.D.aa=Z.aa,Z.Aa==2&&(Z.D.aa+=Te),Z.R=16*Te,Z.B=8*Te,Te=(it=Cm[Z.L])*Z.R,it=it/2*Z.B,Z.sa=Ae,Z.ta=Le+Te,Z.qa=Z.sa,Z.ra=Z.ta+16*ge*Z.R+it,Z.Ha=Z.qa,Z.Ia=Z.ra+8*ge*Z.B+it,Z.$c=0,Le+=xe,Z.mb=Ne?Ae:null,Z.nb=Ne?Le:null,t(Le+Ne<=Z.Fc+Z.Vb),cm(Z),i(Z.Ac,Z.Bc,0,_e),ge=1}}if(ge){if(fe.ka=0,fe.y=Z.sa,fe.O=Z.ta,fe.f=Z.qa,fe.N=Z.ra,fe.ea=Z.Ha,fe.Vd=Z.Ia,fe.fa=Z.R,fe.Rc=Z.B,fe.F=null,fe.J=0,!VS){for(ge=-255;255>=ge;++ge)qS[255+ge]=0>ge?-ge:ge;for(ge=-1020;1020>=ge;++ge)zS[1020+ge]=-128>ge?-128:127<ge?127:ge;for(ge=-112;112>=ge;++ge)WS[112+ge]=-16>ge?-16:15<ge?15:ge;for(ge=-255;510>=ge;++ge)HS[255+ge]=0>ge?0:255<ge?255:ge;VS=1}Go=ju,sc=Nx,cs=ss,Gt=dm,nr=fm,ca=Sx,Gr=vm,pn=Zl,Ys=M,If=Q,Pu=ym,wm=k,IS=se,LS=me,DS=Xl,RS=_f,MS=mm,FS=gm,Ia[0]=Ix,Ia[1]=kx,Ia[2]=Ox,Ia[3]=Tx,Ia[4]=$s,Ia[5]=Lx,Ia[6]=Bs,Ia[7]=Dx,Ia[8]=vf,Ia[9]=Su,Yo[0]=Px,Yo[1]=Ex,Yo[2]=mf,Yo[3]=hm,Yo[4]=Yl,Yo[5]=gf,Yo[6]=Cx,Js[0]=Mx,Js[1]=Ax,Js[2]=Jl,Js[3]=Rx,Js[4]=xf,Js[5]=yf,Js[6]=pm,ge=1}else ge=0}ge&&(ge=function(Lt,mn){for(Lt.M=0;Lt.M<Lt.Va;++Lt.M){var Et,Qe=Lt.Jc[Lt.M&Lt.Xb],Me=Lt.m,Yr=Lt;for(Et=0;Et<Yr.za;++Et){var St=Me,Mt=Yr,gr=Mt.Ac,$n=Mt.Bc+4*Et,di=Mt.zc,Rr=Mt.ya[Mt.aa+Et];if(Mt.Qa.Bb?Rr.$b=he(St,Mt.Pa.jb[0])?2+he(St,Mt.Pa.jb[2]):he(St,Mt.Pa.jb[1]):Rr.$b=0,Mt.kc&&(Rr.Ad=he(St,Mt.Bd)),Rr.Za=!he(St,145)+0,Rr.Za){var Xn=Rr.Ob,fi=0;for(Mt=0;4>Mt;++Mt){var gn,$t=di[0+Mt];for(gn=0;4>gn;++gn){$t=RM[gr[$n+gn]][$t];for(var Jt=JS[he(St,$t[0])];0<Jt;)Jt=JS[2*Jt+he(St,$t[Jt])];$t=-Jt,gr[$n+gn]=$t}n(Xn,fi,gr,$n,4),fi+=4,di[0+Mt]=$t}}else $t=he(St,156)?he(St,128)?1:3:he(St,163)?2:0,Rr.Ob[0]=$t,i(gr,$n,$t,4),i(di,0,$t,4);Rr.Dd=he(St,142)?he(St,114)?he(St,183)?1:3:2:0}if(Yr.m.Ka)return rn(Lt,7,"Premature end-of-partition0 encountered.");for(;Lt.ja<Lt.za;++Lt.ja){if(Yr=Qe,St=(Me=Lt).rb[Me.sb-1],gr=Me.rb[Me.sb+Me.ja],Et=Me.ya[Me.aa+Me.ja],$n=Me.kc?Et.Ad:0)St.la=gr.la=0,Et.Za||(St.Na=gr.Na=0),Et.Hc=0,Et.Gc=0,Et.ia=0;else{var Mr,Xt;if(St=gr,gr=Yr,$n=Me.Pa.Xc,di=Me.ya[Me.aa+Me.ja],Rr=Me.pb[di.$b],Mt=di.ad,Xn=0,fi=Me.rb[Me.sb-1],$t=gn=0,i(Mt,Xn,0,384),di.Za)var Bn=0,La=$n[3];else{Jt=a(16);var Jr=St.Na+fi.Na;if(Jr=Df(gr,$n[1],Jr,Rr.Eb,0,Jt,0),St.Na=fi.Na=(0<Jr)+0,1<Jr)Go(Jt,0,Mt,Xn);else{var ji=Jt[0]+3>>3;for(Jt=0;256>Jt;Jt+=16)Mt[Xn+Jt]=ji}Bn=1,La=$n[0]}var ir=15&St.la,vn=15&fi.la;for(Jt=0;4>Jt;++Jt){var Fi=1&vn;for(ji=Xt=0;4>ji;++ji)ir=ir>>1|(Fi=(Jr=Df(gr,La,Jr=Fi+(1&ir),Rr.Sc,Bn,Mt,Xn))>Bn)<<7,Xt=Xt<<2|(3<Jr?3:1<Jr?2:Mt[Xn+0]!=0),Xn+=16;ir>>=4,vn=vn>>1|Fi<<7,gn=(gn<<8|Xt)>>>0}for(La=ir,Bn=vn>>4,Mr=0;4>Mr;Mr+=2){for(Xt=0,ir=St.la>>4+Mr,vn=fi.la>>4+Mr,Jt=0;2>Jt;++Jt){for(Fi=1&vn,ji=0;2>ji;++ji)Jr=Fi+(1&ir),ir=ir>>1|(Fi=0<(Jr=Df(gr,$n[2],Jr,Rr.Qc,0,Mt,Xn)))<<3,Xt=Xt<<2|(3<Jr?3:1<Jr?2:Mt[Xn+0]!=0),Xn+=16;ir>>=2,vn=vn>>1|Fi<<5}$t|=Xt<<4*Mr,La|=ir<<4<<Mr,Bn|=(240&vn)<<Mr}St.la=La,fi.la=Bn,di.Hc=gn,di.Gc=$t,di.ia=43690&$t?0:Rr.ia,$n=!(gn|$t)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[Et.$b][Et.Za],Me.wa[Me.Y+Me.ja].La|=!$n),Yr.Ka)return rn(Lt,7,"Premature end-of-file encountered.")}if(cm(Lt),Me=mn,Yr=1,Et=(Qe=Lt).D,St=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)t:{if(Et.M=Qe.M,Et.uc=St,la(Qe,Et),Yr=1,Et=(Xt=Qe.D).Nb,St=($t=Cm[Qe.L])*Qe.R,gr=$t/2*Qe.B,Jt=16*Et*Qe.R,ji=8*Et*Qe.B,$n=Qe.sa,di=Qe.ta-St+Jt,Rr=Qe.qa,Mt=Qe.ra-gr+ji,Xn=Qe.Ha,fi=Qe.Ia-gr+ji,vn=(ir=Xt.M)==0,gn=ir>=Qe.Va-1,Qe.Aa==2&&la(Qe,Xt),Xt.uc)for(Fi=(Jr=Qe).D.M,t(Jr.D.uc),Xt=Jr.yb;Xt<Jr.Hb;++Xt){Bn=Xt,La=Fi;var hi=($i=(Un=Jr).D).Nb;Mr=Un.R;var $i=$i.wa[$i.Y+Bn],Bi=Un.sa,Si=Un.ta+16*hi*Mr+16*Bn,Ui=$i.dd,ur=$i.tc;if(ur!=0)if(t(3<=ur),Un.L==1)0<Bn&&RS(Bi,Si,Mr,ur+4),$i.La&&FS(Bi,Si,Mr,ur),0<La&&DS(Bi,Si,Mr,ur+4),$i.La&&MS(Bi,Si,Mr,ur);else{var qi=Un.B,Da=Un.qa,oc=Un.ra+8*hi*qi+8*Bn,Xs=Un.Ha,Un=Un.Ia+8*hi*qi+8*Bn;hi=$i.ld,0<Bn&&(pn(Bi,Si,Mr,ur+4,Ui,hi),If(Da,oc,Xs,Un,qi,ur+4,Ui,hi)),$i.La&&(wm(Bi,Si,Mr,ur,Ui,hi),LS(Da,oc,Xs,Un,qi,ur,Ui,hi)),0<La&&(Gr(Bi,Si,Mr,ur+4,Ui,hi),Ys(Da,oc,Xs,Un,qi,ur+4,Ui,hi)),$i.La&&(Pu(Bi,Si,Mr,ur,Ui,hi),IS(Da,oc,Xs,Un,qi,ur,Ui,hi))}}if(Qe.ia&&alert("todo:DitherRow"),Me.put!=null){if(Xt=16*ir,ir=16*(ir+1),vn?(Me.y=Qe.sa,Me.O=Qe.ta+Jt,Me.f=Qe.qa,Me.N=Qe.ra+ji,Me.ea=Qe.Ha,Me.W=Qe.Ia+ji):(Xt-=$t,Me.y=$n,Me.O=di,Me.f=Rr,Me.N=Mt,Me.ea=Xn,Me.W=fi),gn||(ir-=$t),ir>Me.o&&(ir=Me.o),Me.F=null,Me.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Xt<ir&&(Me.J=cr(Qe,Me,Xt,ir-Xt),Me.F=Qe.mb,Me.F==null&&Me.F.length==0)){Yr=rn(Qe,3,"Could not decode alpha data.");break t}Xt<Me.j&&($t=Me.j-Xt,Xt=Me.j,t(!(1&$t)),Me.O+=Qe.R*$t,Me.N+=Qe.B*($t>>1),Me.W+=Qe.B*($t>>1),Me.F!=null&&(Me.J+=Me.width*$t)),Xt<ir&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=Xt-Me.j,Me.U=Me.va-Me.v,Me.T=ir-Xt,Yr=Me.put(Me))}Et+1!=Qe.Ic||gn||(n(Qe.sa,Qe.ta-St,$n,di+16*Qe.R,St),n(Qe.qa,Qe.ra-gr,Rr,Mt+8*Qe.B,gr),n(Qe.Ha,Qe.Ia-gr,Xn,fi+8*Qe.B,gr))}if(!Yr)return rn(Lt,6,"Output aborted.")}return 1}(Z,fe)),fe.bc!=null&&fe.bc(fe),ge&=1}return ge?(Z.cb=0,ge):0})(m,L)||(w=m.a)}}else w=m.a}w==0&&U.Oa!=null&&U.Oa.fd&&(w=Af(U.ba))}U=w}$=U!=0?null:11>$?H.f.RGBA.eb:H.f.kb.y}else $=null;return $};var iN=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,D){for(var T="",O=0;O<4;O++)T+=String.fromCharCode(C[D++]);return T}function d(C,D){return C[D+0]|C[D+1]<<8}function f(C,D){return(C[D+0]|C[D+1]<<8|C[D+2]<<16)>>>0}function p(C,D){return(C[D+0]|C[D+1]<<8|C[D+2]<<16|C[D+3]<<24)>>>0}new c;var h=[0],y=[0],g=[],x=new c,v=e,_=function(C,D){var T={},O=0,q=!1,K=0,ne=0;if(T.frames=[],!function(R,z){for(var J=0;J<4;J++)if(R[z+J]!="RIFF".charCodeAt(J))return!0;return!1}(C,D)){for(p(C,D+=4),D+=8;D<C.length;){var re=u(C,D),te=p(C,D+=4);D+=4;var W=te+(1&te);switch(re){case"VP8 ":case"VP8L":T.frames[O]===void 0&&(T.frames[O]={}),(G=T.frames[O]).src_off=q?ne:D-8,G.src_size=K+te+8,O++,q&&(q=!1,K=0,ne=0);break;case"VP8X":(G=T.header={}).feature_flags=C[D];var B=D+4;G.canvas_width=1+f(C,B),B+=3,G.canvas_height=1+f(C,B),B+=3;break;case"ALPH":q=!0,K=W+8,ne=D-8;break;case"ANIM":(G=T.header).bgcolor=p(C,D),B=D+4,G.loop_count=d(C,B),B+=2;break;case"ANMF":var le,G;(G=T.frames[O]={}).offset_x=2*f(C,D),D+=3,G.offset_y=2*f(C,D),D+=3,G.width=1+f(C,D),D+=3,G.height=1+f(C,D),D+=3,G.duration=f(C,D),D+=3,le=C[D++],G.dispose=1&le,G.blend=le>>1&1}re!="ANMF"&&(D+=W)}return T}}(v,0);_.response=v,_.rgbaoutput=!0,_.dataurl=!1;var S=_.header?_.header:null,j=_.frames?_.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],y=[S.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var A=j[0],I=x.WebPDecodeRGBA(v,A.src_off,A.src_size,y,h);A.rgba=I,A.imgwidth=y[0],A.imgheight=h[0];for(var E=0;E<y[0]*h[0]*4;E++)g[E]=I[E];return this.width=y,this.height=h,this.data=g,this}(function(e){var t,r,n,i,a,s,o,c,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new s,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new s,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=R;Object.defineProperty(this,"pdf",{get:function(){return z}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(V){J=!!V}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(V){ie=!!V}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(V){isNaN(V)||(ae=V)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(V){isNaN(V)||(ue=V)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(V){var je;typeof V=="number"?je=[V,V,V,V]:((je=new Array(4))[0]=V[0],je[1]=V.length>=2?V[1]:je[0],je[2]=V.length>=3?V[2]:je[0],je[3]=V.length>=4?V[3]:je[1]),u.margin=je}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(V){pe=V}});var ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return ee},set:function(V){ee=V}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(V){he=V}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(V){V instanceof d&&(u=V)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(V){u.path=V}});var oe=[];Object.defineProperty(this,"ctxStack",{get:function(){return oe},set:function(V){oe=V}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(V){var je;je=p(V),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(V){var je=p(V);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(V){["butt","round","square"].indexOf(V)!==-1&&(this.ctx.lineCap=V,this.pdf.setLineCap(V))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(V){isNaN(V)||(this.ctx.lineWidth=V,this.pdf.setLineWidth(V))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(V){["bevel","round","miter"].indexOf(V)!==-1&&(this.ctx.lineJoin=V,this.pdf.setLineJoin(V))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(V){isNaN(V)||(this.ctx.miterLimit=V,this.pdf.setMiterLimit(V))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(V){this.ctx.textBaseline=V}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(V){["right","end","center","left","start"].indexOf(V)!==-1&&(this.ctx.textAlign=V)}});var de=null,Ce=null,Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(V){de=null,Ce=null,Pe=V}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(V){var je;if(this.ctx.font=V,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(V))!==null){var Je=je[1];je[2];var De=je[3],Se=je[4];je[5];var et=je[6],Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Se)[2];Se=Math.floor(Fe==="px"?parseFloat(Se)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(Se)*this.pdf.getFontSize():parseFloat(Se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Se);var Ke=function(We){var qt,Ct,Nt=[],Ot=We.trim();if(Ot==="")return tb;if(Ot in s4)return[s4[Ot]];for(;Ot!=="";){switch(Ct=null,qt=(Ot=l4(Ot)).charAt(0)){case'"':case"'":Ct=gK(Ot.substring(1),qt);break;default:Ct=vK(Ot)}if(Ct===null||(Nt.push(Ct[0]),(Ot=l4(Ct[1]))!==""&&Ot.charAt(0)!==","))return tb;Ot=Ot.replace(/^,/,"")}return Nt}(et);if(this.fontFaces){var tt=function(We,qt){var Ct=We.getFontList(),Nt=JSON.stringify(Ct);if(de===null||Ce!==Nt){var Ot=function(wr){var st=[];return Object.keys(wr).forEach(function(lr){wr[lr].forEach(function(ht){var jt=null;switch(ht){case"bold":jt={family:lr,weight:"bold"};break;case"italic":jt={family:lr,style:"italic"};break;case"bolditalic":jt={family:lr,weight:"bold",style:"italic"};break;case"":case"normal":jt={family:lr}}jt!==null&&(jt.ref={name:lr,style:ht},st.push(jt))})}),st}(Ct);de=function(wr){for(var st={},lr=0;lr<wr.length;++lr){var ht=eb(wr[lr]),jt=ht.family,_r=ht.stretch,Tt=ht.style,ct=ht.weight;st[jt]=st[jt]||{},st[jt][_r]=st[jt][_r]||{},st[jt][_r][Tt]=st[jt][_r][Tt]||{},st[jt][_r][Tt][ct]=ht}return st}(Ot.concat(qt)),Ce=Nt}return de}(this.pdf,this.fontFaces),mt=Ke.map(function(We){return{family:We,stretch:"normal",weight:De,style:Je}}),gt=function(We,qt,Ct){for(var Nt=(Ct=Ct||{}).defaultFontFamily||"times",Ot=Object.assign({},mK,Ct.genericFontFamilies||{}),wr=null,st=null,lr=0;lr<qt.length;++lr)if(Ot[(wr=eb(qt[lr])).family]&&(wr.family=Ot[wr.family]),We.hasOwnProperty(wr.family)){st=We[wr.family];break}if(!(st=st||We[Nt]))throw new Error("Could not find a font-family for the rule '"+o4(wr)+"' and default family '"+Nt+"'.");if(st=function(ht,jt){if(jt[ht])return jt[ht];var _r=ew[ht],Tt=_r<=ew.normal?-1:1,ct=a4(jt,fI,_r,Tt);if(!ct)throw new Error("Could not find a matching font-stretch value for "+ht);return ct}(wr.stretch,st),st=function(ht,jt){if(jt[ht])return jt[ht];for(var _r=dI[ht],Tt=0;Tt<_r.length;++Tt)if(jt[_r[Tt]])return jt[_r[Tt]];throw new Error("Could not find a matching font-style for "+ht)}(wr.style,st),!(st=function(ht,jt){if(jt[ht])return jt[ht];if(ht===400&&jt[500])return jt[500];if(ht===500&&jt[400])return jt[400];var _r=pK[ht],Tt=a4(jt,hI,_r,ht<400?-1:1);if(!Tt)throw new Error("Could not find a matching font-weight for value "+ht);return Tt}(wr.weight,st)))throw new Error("Failed to resolve a font for the rule '"+o4(wr)+"'.");return st}(tt,mt);this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var Xe="";(De==="bold"||parseInt(De,10)>=700||Je==="bold")&&(Xe="bold"),Je==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var lt="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ge=0;Ge<Ke.length;Ge++){if(this.pdf.internal.getFont(Ke[Ge],Xe,{noFallback:!0,disableWarning:!0})!==void 0){lt=Ke[Ge];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(Ke[Ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)lt=Ke[Ge],Xe="bold";else if(this.pdf.internal.getFont(Ke[Ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){lt=Ke[Ge],Xe="normal";break}}if(lt===""){for(var bt=0;bt<Ke.length;bt++)if(yt[Ke[bt]]){lt=yt[Ke[bt]];break}}lt=lt===""?"Times":lt,this.pdf.setFont(lt,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(V){this.ctx.globalCompositeOperation=V}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(V){this.ctx.globalAlpha=V}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(V){this.ctx.lineDashOffset=V,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(V){this.ctx.lineDash=V,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(V){this.ctx.ignoreClearRect=!!V}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(R,z));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(R,z)},f.prototype.closePath=function(){var R=new s(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&er(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){R=new s(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(R.x,R.y)},f.prototype.lineTo=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(R,z));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,z,J,ie){if(isNaN(J)||isNaN(ie)||isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(J,ie)),ue=this.ctx.transform.applyToPoint(new s(R,z));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},f.prototype.bezierCurveTo=function(R,z,J,ie,ae,ue){if(isNaN(ae)||isNaN(ue)||isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie))throw ar.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new s(ae,ue)),ee=this.ctx.transform.applyToPoint(new s(R,z)),he=this.ctx.transform.applyToPoint(new s(J,ie));this.path.push({type:"bct",x1:ee.x,y1:ee.y,x2:he.x,y2:he.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new s(pe.x,pe.y)},f.prototype.arc=function(R,z,J,ie,ae,ue){if(isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie)||isNaN(ae))throw ar.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new s(R,z));R=pe.x,z=pe.y;var ee=this.ctx.transform.applyToPoint(new s(0,J)),he=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(ee.x-he.x,2)+Math.pow(ee.y-he.y,2))}Math.abs(ae-ie)>=2*Math.PI&&(ie=0,ae=2*Math.PI),this.path.push({type:"arc",x:R,y:z,radius:J,startAngle:ie,endAngle:ae,counterclockwise:ue})},f.prototype.arcTo=function(R,z,J,ie,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,z,J,ie){if(isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie))throw ar.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,z),this.lineTo(R+J,z),this.lineTo(R+J,z+ie),this.lineTo(R,z+ie),this.lineTo(R,z),this.lineTo(R+J,z),this.lineTo(R,z)},f.prototype.fillRect=function(R,z,J,ie){if(isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie))throw ar.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,z,J,ie),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(R,z,J,ie){if(isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie))throw ar.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(R,z,J,ie),this.stroke())},f.prototype.clearRect=function(R,z,J,ie){if(isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie))throw ar.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,z,J,ie))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(z),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(R){var z,J,ie,ae;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))z=0,J=0,ie=0,ae=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(ue!==null)z=parseInt(ue[1]),J=parseInt(ue[2]),ie=parseInt(ue[3]),ae=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)z=parseInt(ue[1]),J=parseInt(ue[2]),ie=parseInt(ue[3]),ae=parseFloat(ue[4]);else{if(ae=1,typeof R=="string"&&R.charAt(0)!=="#"){var pe=new iI(R);R=pe.ok?pe.toHex():"#000000"}R.length===4?(z=R.substring(1,2),z+=z,J=R.substring(2,3),J+=J,ie=R.substring(3,4),ie+=ie):(z=R.substring(1,3),J=R.substring(3,5),ie=R.substring(5,7)),z=parseInt(z,16),J=parseInt(J,16),ie=parseInt(ie,16)}}return{r:z,g:J,b:ie,a:ae,style:R}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,z,J,ie){if(isNaN(z)||isNaN(J)||typeof R!="string")throw ar.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!h.call(this)){var ae=W(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;O.call(this,{text:R,x:z,y:J,scale:ue,angle:ae,align:this.textAlign,maxWidth:ie})}},f.prototype.strokeText=function(R,z,J,ie){if(isNaN(z)||isNaN(J)||typeof R!="string")throw ar.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ie=isNaN(ie)?void 0:ie;var ae=W(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;O.call(this,{text:R,x:z,y:J,scale:ue,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ie})}},f.prototype.measureText=function(R){if(typeof R!="string")throw ar.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,J=this.pdf.internal.scaleFactor,ie=z.internal.getFontSize(),ae=z.getStringUnitWidth(R)*ie/z.internal.scaleFactor;return new function(ue){var pe=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this}({width:ae*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(R,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(R){if(isNaN(R))throw ar.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.translate=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,R,z);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(R,z,J,ie,ae,ue){if(isNaN(R)||isNaN(z)||isNaN(J)||isNaN(ie)||isNaN(ae)||isNaN(ue))throw ar.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new c(R,z,J,ie,ae,ue);this.ctx.transform=this.ctx.transform.multiply(pe)},f.prototype.setTransform=function(R,z,J,ie,ae,ue){R=isNaN(R)?1:R,z=isNaN(z)?0:z,J=isNaN(J)?0:J,ie=isNaN(ie)?1:ie,ae=isNaN(ae)?0:ae,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(R,z,J,ie,ae,ue)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,z,J,ie,ae,ue,pe,ee,he){var oe=this.pdf.getImageProperties(R),de=1,Ce=1,Pe=1,V=1;ie!==void 0&&ee!==void 0&&(Pe=ee/ie,V=he/ae,de=oe.width/ie*ee/ie,Ce=oe.height/ae*he/ae),ue===void 0&&(ue=z,pe=J,z=0,J=0),ie!==void 0&&ee===void 0&&(ee=ie,he=ae),ie===void 0&&ee===void 0&&(ee=oe.width,he=oe.height);var je=this.ctx.transform.decompose(),Je=W(je.rotate.shx),De=new c,Se=(De=(De=(De=De.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(ue-z*Pe,pe-J*V,ie*de,ae*Ce));if(this.autoPaging){for(var et,Fe=x.call(this,Se),Ke=[],tt=0;tt<Fe.length;tt+=1)Ke.indexOf(Fe[tt])===-1&&Ke.push(Fe[tt]);S(Ke);for(var mt=Ke[0],gt=Ke[Ke.length-1],Xe=mt;Xe<gt+1;Xe++){this.pdf.setPage(Xe);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=Xe===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Xe===1?0:Ge+(Xe-2)*bt;if(this.ctx.clip_path.length!==0){var qt=this.path;et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(et,this.posX+this.margin[3],-We+yt+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=qt}var Ct=JSON.parse(JSON.stringify(Se));Ct=_([Ct],this.posX+this.margin[3],-We+yt+this.ctx.prevPageLastElemOffset)[0];var Nt=(Xe>mt||Xe<gt)&&g.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,bt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,Je),Nt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",Se.x,Se.y,Se.w,Se.h,null,null,Je)};var x=function(R,z,J){var ie=[];z=z||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":ie.push(Math.floor((R.y+ae)/J)+1);break;case"arc":ie.push(Math.floor((R.y+ae-R.radius)/J)+1),ie.push(Math.floor((R.y+ae+R.radius)/J)+1);break;case"qct":var ue=B(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);ie.push(Math.floor((ue.y+ae)/J)+1),ie.push(Math.floor((ue.y+ue.h+ae)/J)+1);break;case"bct":var pe=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);ie.push(Math.floor((pe.y+ae)/J)+1),ie.push(Math.floor((pe.y+pe.h+ae)/J)+1);break;case"rect":ie.push(Math.floor((R.y+ae)/J)+1),ie.push(Math.floor((R.y+R.h+ae)/J)+1)}for(var ee=0;ee<ie.length;ee+=1)for(;this.pdf.internal.getNumberOfPages()<ie[ee];)v.call(this);return ie},v=function(){var R=this.fillStyle,z=this.strokeStyle,J=this.font,ie=this.lineCap,ae=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=z,this.font=J,this.lineCap=ie,this.lineWidth=ae,this.lineJoin=ue},_=function(R,z,J){for(var ie=0;ie<R.length;ie++)switch(R[ie].type){case"bct":R[ie].x2+=z,R[ie].y2+=J;case"qct":R[ie].x1+=z,R[ie].y1+=J;default:R[ie].x+=z,R[ie].y+=J}return R},S=function(R){return R.sort(function(z,J){return z-J})},j=function(R,z){var J=this.fillStyle,ie=this.strokeStyle,ae=this.lineCap,ue=this.lineWidth,pe=Math.abs(ue*this.ctx.transform.scaleX),ee=this.lineJoin;if(this.autoPaging){for(var he,oe,de=JSON.parse(JSON.stringify(this.path)),Ce=JSON.parse(JSON.stringify(this.path)),Pe=[],V=0;V<Ce.length;V++)if(Ce[V].x!==void 0)for(var je=x.call(this,Ce[V]),Je=0;Je<je.length;Je+=1)Pe.indexOf(je[Je])===-1&&Pe.push(je[Je]);for(var De=0;De<Pe.length;De++)for(;this.pdf.internal.getNumberOfPages()<Pe[De];)v.call(this);S(Pe);for(var Se=Pe[0],et=Pe[Pe.length-1],Fe=Se;Fe<et+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=J,this.strokeStyle=ie,this.lineCap=ae,this.lineWidth=pe,this.lineJoin=ee;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Fe===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Fe===1?0:mt+(Fe-2)*gt;if(this.ctx.clip_path.length!==0){var lt=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(he,this.posX+this.margin[3],-Xe+tt+this.ctx.prevPageLastElemOffset),N.call(this,R,!0),this.path=lt}if(oe=JSON.parse(JSON.stringify(de)),this.path=_(oe,this.posX+this.margin[3],-Xe+tt+this.ctx.prevPageLastElemOffset),z===!1||Fe===0){var yt=(Fe>Se||Fe<et)&&g.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,gt,null).clip().discardPath()),N.call(this,R,z),yt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}this.path=de}else this.lineWidth=pe,N.call(this,R,z),this.lineWidth=ue},N=function(R,z){if((R!=="stroke"||z||!y.call(this))&&(R==="stroke"||z||!h.call(this))){for(var J,ie,ae=[],ue=this.path,pe=0;pe<ue.length;pe++){var ee=ue[pe];switch(ee.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ee,deltas:[],abs:[]});break;case"lt":var he=ae.length;if(ue[pe-1]&&!isNaN(ue[pe-1].x)&&(J=[ee.x-ue[pe-1].x,ee.y-ue[pe-1].y],he>0)){for(;he>=0;he--)if(ae[he-1].close!==!0&&ae[he-1].begin!==!0){ae[he-1].deltas.push(J),ae[he-1].abs.push(ee);break}}break;case"bct":J=[ee.x1-ue[pe-1].x,ee.y1-ue[pe-1].y,ee.x2-ue[pe-1].x,ee.y2-ue[pe-1].y,ee.x-ue[pe-1].x,ee.y-ue[pe-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var oe=ue[pe-1].x+2/3*(ee.x1-ue[pe-1].x),de=ue[pe-1].y+2/3*(ee.y1-ue[pe-1].y),Ce=ee.x+2/3*(ee.x1-ee.x),Pe=ee.y+2/3*(ee.y1-ee.y),V=ee.x,je=ee.y;J=[oe-ue[pe-1].x,de-ue[pe-1].y,Ce-ue[pe-1].x,Pe-ue[pe-1].y,V-ue[pe-1].x,je-ue[pe-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ee)}}ie=z?null:R==="stroke"?"stroke":"fill";for(var Je=!1,De=0;De<ae.length;De++)if(ae[De].arc)for(var Se=ae[De].abs,et=0;et<Se.length;et++){var Fe=Se[et];Fe.type==="arc"?E.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,z,!Je):q.call(this,Fe.x,Fe.y),Je=!0}else if(ae[De].close===!0)this.pdf.internal.out("h"),Je=!1;else if(ae[De].begin!==!0){var Ke=ae[De].start.x,tt=ae[De].start.y;K.call(this,ae[De].deltas,Ke,tt),Je=!0}ie&&C.call(this,ie),z&&D.call(this)}},A=function(R){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-J;case"top":return R+z-J;case"hanging":return R+z-2*J;case"middle":return R+z/2-J;default:return R}},I=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(z,J){this.colorStops.push([z,J])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(R,z,J,ie,ae,ue,pe,ee,he){for(var oe=re.call(this,J,ie,ae,ue),de=0;de<oe.length;de++){var Ce=oe[de];de===0&&(he?T.call(this,Ce.x1+R,Ce.y1+z):q.call(this,Ce.x1+R,Ce.y1+z)),ne.call(this,R,z,Ce.x2,Ce.y2,Ce.x3,Ce.y3,Ce.x4,Ce.y4)}ee?D.call(this):C.call(this,pe)},C=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(R,z){this.pdf.internal.out(r(R)+" "+n(z)+" m")},O=function(R){var z;switch(R.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var J,ie,ae,ue=this.pdf.getTextDimensions(R.text),pe=A.call(this,R.y),ee=I.call(this,pe)-ue.h,he=this.ctx.transform.applyToPoint(new s(R.x,pe));if(this.autoPaging){var oe=this.ctx.transform.decompose(),de=new c;de=(de=(de=de.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var Ce=this.ctx.transform.applyToRectangle(new o(R.x,pe,ue.w,ue.h)),Pe=de.applyToRectangle(new o(R.x,ee,ue.w,ue.h)),V=x.call(this,Pe),je=[],Je=0;Je<V.length;Je+=1)je.indexOf(V[Je])===-1&&je.push(V[Je]);S(je);for(var De=je[0],Se=je[je.length-1],et=De;et<Se+1;et++){this.pdf.setPage(et);var Fe=et===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],mt=tt-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],Xe=gt-this.margin[3],lt=et===1?0:Ke+(et-2)*mt;if(this.ctx.clip_path.length!==0){var yt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(J,this.posX+this.margin[3],-1*lt+Fe),N.call(this,"fill",!0),this.path=yt}var Ge=_([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-lt+Fe+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*R.scale),ae=this.lineWidth,this.lineWidth=ae*R.scale);var bt=this.autoPaging!=="text";if(bt||Ge.y+Ge.h<=tt){if(bt||Ge.y>=Fe&&Ge.x<=gt){var We=bt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||gt-Ge.x)[0],qt=_([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-lt+Fe+this.ctx.prevPageLastElemOffset)[0],Ct=bt&&(et>De||et<Se)&&g.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,mt,null).clip().discardPath()),this.pdf.text(We,qt.x,qt.y,{angle:R.angle,align:z,renderingMode:R.renderingMode}),Ct&&this.pdf.restoreGraphicsState()}}else Ge.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Ge.y);R.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ae)}}else R.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*R.scale),ae=this.lineWidth,this.lineWidth=ae*R.scale),this.pdf.text(R.text,he.x+this.posX,he.y+this.posY,{angle:R.angle,align:z,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ae)},q=function(R,z,J,ie){J=J||0,ie=ie||0,this.pdf.internal.out(r(R+J)+" "+n(z+ie)+" l")},K=function(R,z,J){return this.pdf.lines(R,z,J,null,null)},ne=function(R,z,J,ie,ae,ue,pe,ee){this.pdf.internal.out([t(i(J+R)),t(a(ie+z)),t(i(ae+R)),t(a(ue+z)),t(i(pe+R)),t(a(ee+z)),"c"].join(" "))},re=function(R,z,J,ie){for(var ae=2*Math.PI,ue=Math.PI/2;z>J;)z-=ae;var pe=Math.abs(J-z);pe<ae&&ie&&(pe=ae-pe);for(var ee=[],he=ie?-1:1,oe=z;pe>1e-5;){var de=oe+he*Math.min(pe,ue);ee.push(te.call(this,R,oe,de)),pe-=Math.abs(de-oe),oe=de}return ee},te=function(R,z,J){var ie=(J-z)/2,ae=R*Math.cos(ie),ue=R*Math.sin(ie),pe=ae,ee=-ue,he=pe*pe+ee*ee,oe=he+pe*ae+ee*ue,de=4/3*(Math.sqrt(2*he*oe)-oe)/(pe*ue-ee*ae),Ce=pe-de*ee,Pe=ee+de*pe,V=Ce,je=-Pe,Je=ie+z,De=Math.cos(Je),Se=Math.sin(Je);return{x1:R*Math.cos(z),y1:R*Math.sin(z),x2:Ce*De-Pe*Se,y2:Ce*Se+Pe*De,x3:V*De-je*Se,y3:V*Se+je*De,x4:R*Math.cos(J),y4:R*Math.sin(J)}},W=function(R){return 180*R/Math.PI},B=function(R,z,J,ie,ae,ue){var pe=R+.5*(J-R),ee=z+.5*(ie-z),he=ae+.5*(J-ae),oe=ue+.5*(ie-ue),de=Math.min(R,ae,pe,he),Ce=Math.max(R,ae,pe,he),Pe=Math.min(z,ue,ee,oe),V=Math.max(z,ue,ee,oe);return new o(de,Pe,Ce-de,V-Pe)},le=function(R,z,J,ie,ae,ue,pe,ee){var he,oe,de,Ce,Pe,V,je,Je,De,Se,et,Fe,Ke,tt,mt=J-R,gt=ie-z,Xe=ae-J,lt=ue-ie,yt=pe-ae,Ge=ee-ue;for(oe=0;oe<41;oe++)De=(je=(de=R+(he=oe/40)*mt)+he*((Pe=J+he*Xe)-de))+he*(Pe+he*(ae+he*yt-Pe)-je),Se=(Je=(Ce=z+he*gt)+he*((V=ie+he*lt)-Ce))+he*(V+he*(ue+he*Ge-V)-Je),oe==0?(et=De,Fe=Se,Ke=De,tt=Se):(et=Math.min(et,De),Fe=Math.min(Fe,Se),Ke=Math.max(Ke,De),tt=Math.max(tt,Se));return new o(Math.round(et),Math.round(Fe),Math.round(Ke-et),Math.round(tt-Fe))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,z,J=(R=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:z}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(at.API),function(e){var t=function(s){var o,c,u,d,f,p,h,y,g,x;for(c=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(g=f%85))/85)-(y=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,y+33,g+33,x+33)):c.push(122);return function(v,_){for(var S=_;S>0;S--)v.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var o,c,u,d,f,p=String,h="length",y=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[x](s[h]%5||5))[h];f>d;d+=5)c=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),u.push(y&c>>24,y&c>>16,y&c>>8,y&c);return function(_,S){for(var j=S;j>0;j--)_.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},a=function(s){for(var o=new Uint8Array(s.length),c=s.length;c--;)o[c]=s.charCodeAt(c);return(o=K2(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var c=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(at.API),function(e){e.loadFile=function(t,r,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,p=0,h=function(y){var g=y.length,x=[],v=String.fromCharCode;for(p=0;p<g;p+=1)x.push(v(255&y.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(t,r,n)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}(at.API),function(e){function t(){return(vt.html2canvas?Promise.resolve(vt.html2canvas):R1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(vt.DOMPurify?Promise.resolve(vt.DOMPurify):R1(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=er(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(o,c){var u=document.createElement(o);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},a=function o(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},s=function o(c){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,c){return o.__proto__=c||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var y=d[h],g=y.src.find(function(x){return x.format==="truetype"});g&&u.addFont(g.url,y.ref.name,y.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},s.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(o,c){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return c?c(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||at.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,c,u,d){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,c,u,d){return this.setProgress(o?this.progress.val+o:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,c){var u=this;return this.thenCore(o,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,c,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,c);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},s.prototype.thenList=function(o){var c=this;return o.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return s.convert(c,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,at.getPageSize=function(o,c,u){if(er(o)==="object"){var d=o;o=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var y,g=0,x=0;if(h.hasOwnProperty(p))g=h[p][1]/f,x=h[p][0]/f;else try{g=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",x>g&&(y=x,x=g,g=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(y=x,x=g,g=y)}return{width:x,height:g,unit:c,k:f,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(eb):null;var u=new s(c);return c.worker?u:u.from(o).doCallback()}}(at.API),at.API.addJS=function(e){return u4=e,this.internal.events.subscribe("postPutResources",function(){pg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),c4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+u4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){pg!==void 0&&c4!==void 0&&this.internal.out("/Names <</JavaScript "+pg+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var f=r.internal.newObject();d.push(f);var p=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(at.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,a,s,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,g={width:0,height:0,numcomponents:1},x=4;x<y;x+=2){if(x+=h,t.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),g={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return d}}(at.API),at.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=eK(e,{checkCrc:!0}),s=a.width,o=a.height,c=a.channels,u=a.palette,d=a.depth;i=u&&c===1?function(E){for(var C=E.width,D=E.height,T=E.data,O=E.palette,q=E.depth,K=!1,ne=[],re=[],te=void 0,W=!1,B=0,le=0;le<O.length;le++){var G=pA(O[le],4),R=G[0],z=G[1],J=G[2],ie=G[3];ne.push(R,z,J),ie!=null&&(ie===0?(B++,re.length<1&&re.push(le)):ie<255&&(W=!0))}if(W||B>1){K=!0,re=void 0;var ae=C*D;te=new Uint8Array(ae);for(var ue=new DataView(T.buffer),pe=0;pe<ae;pe++){var ee=rb(ue,pe,q),he=pA(O[ee],4)[3];te[pe]=he}}else B===0&&(re=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:K?8:void 0,colorBytes:T,alphaBytes:te,needSMask:K,palette:ne,mask:re}}(a):c===2||c===4?function(E){for(var C=E.data,D=E.width,T=E.height,O=E.channels,q=E.depth,K=O===2?"DeviceGray":"DeviceRGB",ne=O-1,re=D*T,te=ne,W=re*te,B=1*re,le=Math.ceil(W*q/8),G=Math.ceil(B*q/8),R=new Uint8Array(le),z=new Uint8Array(G),J=new DataView(C.buffer),ie=new DataView(R.buffer),ae=new DataView(z.buffer),ue=!1,pe=0;pe<re;pe++){for(var ee=pe*O,he=0;he<te;he++)x4(ie,rb(J,ee+he,q),pe*te+he,q);var oe=rb(J,ee+te,q);oe<(1<<q)-1&&(ue=!0),x4(ae,oe,1*pe,q)}return{colorSpace:K,colorsPerPixel:ne,sMaskBitsPerComponent:ue?q:void 0,colorBytes:R,alphaBytes:z,needSMask:ue}}(a):function(E){var C=E.data,D=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:D,colorsPerPixel:D==="DeviceGray"?1:3,colorBytes:C instanceof Uint16Array?function(T){for(var O=T.length,q=new Uint8Array(2*O),K=new DataView(q.buffer,q.byteOffset,q.byteLength),ne=0;ne<O;ne++)K.setUint16(2*ne,T[ne],!1);return q}(C):C,needSMask:!1}}(a);var f,p,h,y=i,g=y.colorSpace,x=y.colorsPerPixel,v=y.sMaskBitsPerComponent,_=y.colorBytes,S=y.alphaBytes,j=y.needSMask,N=y.palette,A=y.mask,I=null;return n!==at.API.image_compression.NONE&&typeof K2=="function"?(I=function(E){var C;switch(E){case at.API.image_compression.FAST:C=11;break;case at.API.image_compression.MEDIUM:C=13;break;case at.API.image_compression.SLOW:C=14;break;default:C=12}return C}(n),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(I," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=p4(_,Math.ceil(s*x*d/8),x,d,n),j&&(h=p4(S,Math.ceil(s*v/8),1,v,n))):(f=void 0,p=void 0,e=_,j&&(h=S)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:p,transparency:A,palette:N,sMask:h,predictor:I,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:g}}},function(e){e.processGIF89A=function(t,r,n,i){var a=new wK(t),s=a.width,o=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:o},d=new nb(100).encode(u,100);return e.processJPEG.call(this,d,r,n,i)},e.processGIF87A=e.processGIF89A}(at.API),Ma.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ma.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ar.log("bit decode error:"+r)}},Ma.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[a>>7-o&1];this.data[s+4*o]=c.blue,this.data[s+4*o+1]=c.green,this.data[s+4*o+2]=c.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ma.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,c=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Ma.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Ma.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,u=a>>15?255:0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},Ma.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Ma.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Ma.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},Ma.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,i){var a=new Ma(t,!1),s=a.width,o=a.height,c={data:a.getData(),width:s,height:o},u=new nb(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)}}(at.API),w4.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,i){var a=new w4(t),s=a.width,o=a.height,c={data:a.getData(),width:s,height:o},u=new nb(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)}}(at.API),at.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var d=n[u],f=n[u+1],p=n[u+2],h=n[u+3];a[o++]=d,a[o++]=f,a[o++]=p,s[c++]=h}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},at.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bu=at.API,mg=Bu.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,p=0,h=e.length,y=0,g=o[0]||c,x=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(p=f&&er(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/d:0,x.push((o[n]||g)/c+p)),y=n;return x},d4=Bu.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Bu.processArabic&&(e=Bu.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:mg.apply(this,arguments).reduce(function(a,s){return a+s},0)},f4=function(e,t,r,n){for(var i=[],a=0,s=e.length,o=0;a!==s&&o+t[a]<r;)o+=t[a],a++;i.push(e.slice(0,a));var c=a;for(o=0;a!==s;)o+t[a]>n&&(i.push(e.slice(c,a)),o=0,c=a),o+=t[a],a++;return c!==a&&i.push(e.slice(c,a)),i},h4=function(e,t,r){r||(r={});var n,i,a,s,o,c,u,d=[],f=[d],p=r.textIndent||0,h=0,y=0,g=e.split(" "),x=mg.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),_=[];g.map(function(j){(j=j.split(/\s*\n/)).length>1?_=_.concat(j.map(function(N,A){return(A&&N.length?`
`:"")+N})):_.push(j[0])}),g=_,c=d4.apply(this,[v,r])}for(a=0,s=g.length;a<s;a++){var S=0;if(n=g[a],c&&n[0]==`
`&&(n=n.substr(1),S=1),p+h+(y=(i=mg.apply(this,[n,r])).reduce(function(j,N){return j+N},0))>t||S){if(y>t){for(o=f4.apply(this,[n,i,t-(p+h),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);y=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,N){return j+N},0)}else d=[n];f.push(d),p=y+c,h=x}else d.push(n),p+=h+y,h=x}return u=c?function(j,N){return(N?v:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},Bu.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(h4.apply(this,[n[o],s,a]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=t[a],i[t[a]]=r[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=e.__fontmetrics__.compress=function(p){var h,y,g,x,v=["{"];for(var _ in p){if(h=p[_],isNaN(parseInt(_,10))?y="'"+_+"'":(_=parseInt(_,10),y=(y=s(_).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+i[g.slice(-1)];else{if(er(h)!=="object")throw new Error("Don't know what to do with value type "+er(h)+".");g=o(h)}v.push(y+g)}return v.push("}"),v.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,y,g,x,v={},_=1,S=v,j=[],N="",A="",I=p.length-1,E=1;E<I;E+=1)(x=p[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(j.push([S,g]),S={},g=void 0):x=="}"?((y=j.pop())[0][y[1]]=S,g=void 0,S=y[0]):x=="-"?_=-1:g===void 0?n.hasOwnProperty(x)?(N+=n[x],g=parseInt(N,16)*_,_=1,N=""):N+=x:n.hasOwnProperty(x)?(A+=n[x],S[g]=parseInt(A,16)*_,_=1,g=void 0,A=""):A+=x;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var h=p.font,y=f.Unicode[h.postScriptName];y&&(h.metadata.Unicode={},h.metadata.Unicode.widths=y.widths,h.metadata.Unicode.kerning=y.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(at.API),function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Kg(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(at),at.API.addSvgAsImage=function(e,t,r,n,i,a,s,o){if(isNaN(t)||isNaN(r))throw ar.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw ar.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(vt.canvg?Promise.resolve(vt.canvg):R1(()=>import("./index.es-CkKeKGMO.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,i,s,o)})},at.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},at.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),c=[],u=0,d=0,f=0;function p(y,g){var x,v=!1;for(x=0;x<y.length;x+=1)y[x]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=o.length;for(f=0;f<h;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(er(e)==="object"){for(i in e)if(a=e[i],p(o,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&p(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,g=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?g.push("/"+y+" /"+r[y].value):g.push("/"+y+" "+r[y].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(at.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,s){for(var o,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=a.length;f<p;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(a){var s,o,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(o=Object.keys(a).sort(function(h,y){return h-y})).length;f<p;f++)s=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",y=0;y<p.length;y++)h+=String.fromCharCode(p[y]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Yu(o.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var _=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Yu(o.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Yu(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+_+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var y=u();d({data:p,addLength1:!0,objectId:y}),c("endobj");var g=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Yu(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var v=0;v<o.metadata.hmtx.widths.length;v++)o.metadata.hmtx.widths[v]=parseInt(o.metadata.hmtx.widths[v]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Yu(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",c=a.x,u=a.y,d=a.options||{},f=a.mutex||{},p=f.pdfEscape,h=f.activeFontKey,y=f.fonts,g=h,x="",v=0,_="",S=y[g].encoding;if(y[g].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(_=o,g=h,Array.isArray(o)&&(_=o[0]),v=0;v<_.length;v+=1)y[g].metadata.hasOwnProperty("cmap")&&(s=y[g].metadata.cmap.unicode.codeMap[_[v].charCodeAt(0)]),s||_[v].charCodeAt(0)<256&&y[g].metadata.hasOwnProperty("Unicode")?x+=_[v]:x+="";var j="";return parseInt(g.slice(1))<14||S==="WinAnsiEncoding"?j=p(x,g).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(j=r(x,y[g])),f.isHex=!0,{text:j,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(a){var s=a.text||"",o=[],c={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([i(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(i(Object.assign({},c,{text:s[u]})).text);a.text=o}else a.text=i(Object.assign({},c,{text:s})).text}])}(at),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(at.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,a,s,o,c,u,d,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var j=function(T){var O=T.charCodeAt(),q=O>>8,K=g[q];return K!==void 0?f[256*K+(255&O)]:q===252||q===253?"AL":v.test(q)?"L":q===8?"R":"N"},N=function(T){for(var O,q=0;q<T.length;q++){if((O=j(T.charAt(q)))==="L")return!1;if(O==="R")return!0}return!1},A=function(T,O,q,K){var ne,re,te,W,B=O[K];switch(B){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"N":case"AN":break;case"EN":_&&(B="AN");break;case"AL":_=!0,B="R";break;case"WS":case"BN":B="N";break;case"CS":K<1||K+1>=O.length||(ne=q[K-1])!=="EN"&&ne!=="AN"||(re=O[K+1])!=="EN"&&re!=="AN"?B="N":_&&(re="AN"),B=re===ne?re:"N";break;case"ES":B=(ne=K>0?q[K-1]:"B")==="EN"&&K+1<O.length&&O[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&q[K-1]==="EN"){B="EN";break}if(_){B="N";break}for(te=K+1,W=O.length;te<W&&O[te]==="ET";)te++;B=te<W&&O[te]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(W=O.length,te=K+1;te<W&&O[te]==="NSM";)te++;if(te<W){var le=T[K],G=le>=1425&&le<=2303||le===64286;if(ne=O[te],G&&(ne==="R"||ne==="AL")){B="R";break}}}B=K<1||(ne=O[K-1])==="B"?"N":q[K-1];break;case"B":_=!1,i=!0,B=S;break;case"S":a=!0,B="N"}return B},I=function(T,O,q){var K=T.split("");return q&&E(K,q,{hiLevel:S}),K.reverse(),O&&O.reverse(),K.join("")},E=function(T,O,q){var K,ne,re,te,W,B=-1,le=T.length,G=0,R=[],z=S?h:p,J=[];for(_=!1,i=!1,a=!1,ne=0;ne<le;ne++)J[ne]=j(T[ne]);for(re=0;re<le;re++){if(W=G,R[re]=A(T,J,R,re),K=240&(G=z[W][y[R[re]]]),G&=15,O[re]=te=z[G][5],K>0)if(K===16){for(ne=B;ne<re;ne++)O[ne]=1;B=-1}else B=-1;if(z[G][6])B===-1&&(B=re);else if(B>-1){for(ne=B;ne<re;ne++)O[ne]=te;B=-1}J[re]==="B"&&(O[re]=0),q.hiLevel|=te}a&&function(ie,ae,ue){for(var pe=0;pe<ue;pe++)if(ie[pe]==="S"){ae[pe]=S;for(var ee=pe-1;ee>=0&&ie[ee]==="WS";ee--)ae[ee]=S}}(J,O,le)},C=function(T,O,q,K,ne){if(!(ne.hiLevel<T)){if(T===1&&S===1&&!i)return O.reverse(),void(q&&q.reverse());for(var re,te,W,B,le=O.length,G=0;G<le;){if(K[G]>=T){for(W=G+1;W<le&&K[W]>=T;)W++;for(B=G,te=W-1;B<te;B++,te--)re=O[B],O[B]=O[te],O[te]=re,q&&(re=q[B],q[B]=q[te],q[te]=re);G=W}G++}}},D=function(T,O,q){var K=T.split(""),ne={hiLevel:S};return q||(q=[]),E(K,q,ne),function(re,te,W){if(W.hiLevel!==0&&d)for(var B,le=0;le<re.length;le++)te[le]===1&&(B=x.indexOf(re[le]))>=0&&(re[le]=x[B+1])}(K,q,ne),C(2,K,O,q,ne),C(1,K,O,q,ne),K.join("")};return this.__bidiEngine__.doBidiReorder=function(T,O,q){if(function(ne,re){if(re)for(var te=0;te<ne.length;te++)re[te]=te;o===void 0&&(o=N(ne)),u===void 0&&(u=N(ne))}(T,O),s||!c||u)if(s&&c&&o^u)S=o?1:0,T=I(T,O,q);else if(!s&&c&&u)S=o?1:0,T=D(T,O,q),T=I(T,O);else if(!s||o||c||u){if(s&&!c&&o^u)T=I(T,O),o?(S=0,T=D(T,O,q)):(S=1,T=D(T,O,q),T=I(T,O));else if(s&&o&&!c&&u)S=1,T=D(T,O,q),T=I(T,O);else if(!s&&!c&&o^u){var K=d;o?(S=1,T=D(T,O,q),S=0,d=!1,T=D(T,O,q),d=K):(S=0,T=D(T,O,q),T=I(T,O),S=1,d=!1,T=D(T,O,q),d=K,T=I(T,O))}}else S=0,T=D(T,O,q);else S=o?1:0,T=D(T,O,q);return T},this.__bidiEngine__.setOptions=function(T){T&&(s=T.isInputVisual,c=T.isOutputVisual,o=T.isInputRtl,u=T.isOutputRtl,d=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([r.doBidiReorder(i[o])]);n.text=s}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(at),at.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Ol(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new RK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new _K(this.contents),this.head=new SK(this),this.name=new PK(this),this.cmap=new mI(this),this.toUnicode={},this.hhea=new NK(this),this.maxp=new CK(this),this.hmtx=new OK(this),this.post=new AK(this),this.os2=new kK(this),this.loca=new DK(this),this.glyf=new TK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,c,u;for(u=[],s=0,o=(c=this.bbox).length;s<o;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,a,s,o;for(s=0,a=0,o=(t=""+t).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=t.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Qa,Ol=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,a,s,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)r=t[n],a.push(this.writeByte(r));return a},e}(),_K=function(){var e;function t(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,a,s,o,c,u,d,f,p,h,y,g;for(g in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),s=Math.floor(f/c),d=16*h-f,(i=new Ol).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(d),a=16*h,u=i.pos+a,o=null,y=[],r)for(p=r[g],i.writeString(g),i.writeInt(e(p)),i.writeInt(u),i.writeInt(p.length),y=y.concat(p),g==="head"&&(o=u),u+=p.length;u%4;)y.push(0),u++;return i.write(y),n=2981146554-e(i.data),i.pos=o+8,i.writeUInt32(n),i.data},e=function(r){var n,i,a,s;for(r=gI.call(r);r.length%4;)r.push(0);for(a=new Ol(r),i=0,n=0,s=r.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),jK={}.hasOwnProperty,Ls=function(e,t){for(var r in t)jK.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Qa=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var SK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ol).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),_4=function(){function e(t,r){var n,i,a,s,o,c,u,d,f,p,h,y,g,x,v,_,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,a=function(){var j,N;for(N=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)N.push(t.readUInt16());return N}(),t.pos+=2,g=function(){var j,N;for(N=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)N.push(t.readUInt16());return N}(),u=function(){var j,N;for(N=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)N.push(t.readUInt16());return N}(),d=function(){var j,N;for(N=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)N.push(t.readUInt16());return N}(),i=(this.length-t.pos+this.offset)/2,o=function(){var j,N;for(N=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)N.push(t.readUInt16());return N}(),c=v=0,S=a.length;v<S;c=++v)for(x=a[c],n=_=y=g[c];y<=x?_<=x:_>=x;n=y<=x?++_:--_)d[c]===0?s=n+u[c]:(s=o[d[c]/2+(n-y)-(p-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,i,a,s,o,c,u,d,f,p,h,y,g,x,v,_,S,j,N,A,I,E,C,D,T,O,q,K,ne,re,te,W,B,le,G,R,z,J,ie,ae,ue,pe,ee,he,oe,de;switch(K=new Ol,s=Object.keys(t).sort(function(Ce,Pe){return Ce-Pe}),r){case"macroman":for(g=0,x=function(){var Ce=[];for(y=0;y<256;++y)Ce.push(0);return Ce}(),_={0:0},a={},ne=0,B=s.length;ne<B;ne++)_[ee=t[i=s[ne]]]==null&&(_[ee]=++g),a[i]={old:t[i],new:_[t[i]]},x[i]=_[t[i]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(x),{charMap:a,subtable:K.data,maxGlyphID:g+1};case"unicode":for(O=[],f=[],S=0,_={},n={},v=u=null,re=0,le=s.length;re<le;re++)_[N=t[i=s[re]]]==null&&(_[N]=++S),n[i]={old:N,new:_[N]},o=_[N]-i,v!=null&&o===u||(v&&f.push(v),O.push(i),u=o),v=i;for(v&&f.push(v),f.push(65535),O.push(65535),D=2*(C=O.length),E=2*Math.pow(Math.log(C)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,I=2*C-E,c=[],A=[],h=[],y=te=0,G=O.length;te<G;y=++te){if(T=O[y],d=f[y],T===65535){c.push(0),A.push(0);break}if(T-(q=n[T].new)>=32768)for(c.push(0),A.push(2*(h.length+C-y)),i=W=T;T<=d?W<=d:W>=d;i=T<=d?++W:--W)h.push(n[i].new);else c.push(q-T),A.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*C+2*h.length),K.writeUInt16(0),K.writeUInt16(D),K.writeUInt16(E),K.writeUInt16(p),K.writeUInt16(I),ue=0,R=f.length;ue<R;ue++)i=f[ue],K.writeUInt16(i);for(K.writeUInt16(0),pe=0,z=O.length;pe<z;pe++)i=O[pe],K.writeUInt16(i);for(he=0,J=c.length;he<J;he++)o=c[he],K.writeUInt16(o);for(oe=0,ie=A.length;oe<ie;oe++)j=A[oe],K.writeUInt16(j);for(de=0,ae=h.length;de<ae;de++)g=h[de],K.writeUInt16(g);return{charMap:n,subtable:K.data,maxGlyphID:S+1}}},e}(),mI=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new _4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=_4.encode(t,r),(i=new Ol).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),NK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),kK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),AK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var s,o,c;for(c=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)c.push(t.readUInt32());return c}).call(this)}},e}(),EK=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},PK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,a,s,o,c,u,d,f,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},a=d=0,f=n.length;d<f;a=++d)i=n[a],t.pos=i.offset,u=t.readString(i.length),s=new EK(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),CK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),OK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,a,s,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)a=f[u],p.push(a.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),gI=[].slice,TK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,a,s,o,c,u,d,f;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(o=new Ol(r.read(i))).readShort(),u=o.readShort(),f=o.readShort(),c=o.readShort(),d=o.readShort(),this.cache[t]=s===-1?new LK(o,u,f,c,d):new IK(o,s,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,a,s,o,c;for(s=[],a=[],o=0,c=r.length;o<c;o++)i=t[r[o]],a.push(s.length),i&&(s=s.concat(i.encode(n)));return a.push(s.length),{table:s,offsets:a}},e}(),IK=function(){function e(t,r,n,i,a,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),LK=function(){function e(t,r,n,i,a){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Ol(gI.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),DK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Qa),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<n.length;++s)if(n[s]=i,a<r.length&&r[a]==s){++a,n[s]=i;var o=this.offsets[s],c=this.offsets[s+1]-o;c>0&&(i+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),RK=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,a,s,o,c;for(i={},s=0,o=t.length;s<o;s++)i[a=t[s]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))n=c[a],i[a]=n;return i},e.prototype.encode=function(t,r){var n,i,a,s,o,c,u,d,f,p,h,y,g,x,v;for(i in n=mI.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},v=n.charMap)h[(c=v[i]).old]=c.new;for(y in p=n.maxGlyphID,s)y in h||(h[y]=p++);return d=function(_){var S,j;for(S in j={},_)j[_[S]]=S;return j}(h),f=Object.keys(d).sort(function(_,S){return _-S}),g=function(){var _,S,j;for(j=[],_=0,S=f.length;_<S;_++)o=f[_],j.push(d[o]);return j}(),a=this.font.glyf.encode(s,g,h),u=this.font.loca.encode(a.offsets,g),x={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();at.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,a,s;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)s=r[i],a.push("/"+i+" "+t.convert(s));return a.push(">>"),a.join(`
`)}return""+r},t}();function vI(e,t,r,n,i){n=n||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,c=i.getLineHeightFactor?i.getLineHeightFactor():a,u=o*c,d=/\r\n|\r|\n/g,f="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,p=f.length||1),r+=o*(2-a),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),f&&p>=1){for(var y=0;y<f.length;y++)i.text(f[y],t-i.getStringUnitWidth(f[y])*h,r),r+=u;return i}t-=i.getStringUnitWidth(e)*h}return n.halign==="justify"?i.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(e,t,r),i}var j4={},Sd=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:j4=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,i,a;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=e.unifyColor(t.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,i,a){return this.jsPDFDocument.rect(t,r,n,i,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return j4||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),tw=function(e,t){return tw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},tw(e,t)};function yI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var xI=function(e){yI(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function MK(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function FK(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Bv(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],i=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function bI(e,t,r,n){var i=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:a});var s=wI(i,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function wI(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function d0(e,t){var r,n,i,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function _I(e,t){var r=d0(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function $K(e,t,r,n,i){var a={},s=1.3333333333333333,o=ib(t,function(S){return i.getComputedStyle(S).backgroundColor});o!=null&&(a.fillColor=o);var c=ib(t,function(S){return i.getComputedStyle(S).color});c!=null&&(a.textColor=c);var u=UK(n,r);u&&(a.cellPadding=u);var d="borderTopColor",f=s*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var y=ib(t,function(S){return i.getComputedStyle(S)[d]});y!=null&&(a.lineColor=y);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(a.fontSize=x/s);var v=BK(n);v&&(a.fontStyle=v);var _=(n.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(a.font=_),a}function BK(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function ib(e,t){var r=jI(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function jI(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:jI(e.parentElement,t):r}function UK(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(o){return parseInt(o||"0")/n}),s=d0(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function SI(e,t,r,n,i){var a,s;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var y=o.rows[h],g=(s=(a=y==null?void 0:y.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=qK(c,u,r,y,n,i);x&&(g==="thead"?d.push(x):g==="tfoot"?p.push(x):f.push(x))}return{head:d,body:f,foot:p}}function qK(e,t,r,n,i,a){for(var s=new xI(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(i||u.display!=="none"){var d=void 0;a&&(d=$K(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:zK(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(i||f.display!=="none"))return s}function zK(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function WK(e,t,r){for(var n=0,i=[e,t,r];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function uo(e,t,r,n,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a}function NI(e,t){var r=new Sd(e),n=r.getDocumentOptions(),i=r.getGlobalOptions();WK(i,n,t);var a=uo({},i,n,t),s;typeof window<"u"&&(s=window);var o=HK(i,n,t),c=VK(i,n,t),u=KK(r,a),d=YK(r,a,s);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function HK(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=uo({},u,d,f)}else{var p=[e,t,r],h=p.map(function(y){return y[c]||{}});n[c]=uo({},h[0],h[1],h[2])}},a=0,s=Object.keys(n);a<s.length;a++){var o=s[a];i(o)}return n}function VK(e,t,r){for(var n=[e,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=n;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function KK(e,t){var r,n,i,a,s,o,c,u,d,f,p,h,y=d0(t.margin,40/e.scaleFactor()),g=(r=GK(e,t.startY))!==null&&r!==void 0?r:y.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var v;t.showHead===!0?v="everyPage":t.showHead===!1?v="never":v=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var _=(a=t.useCss)!==null&&a!==void 0?a:!1,S=t.theme||(_?"plain":"striped"),j=!!t.horizontalPageBreak,N=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:_,theme:S,startY:g,margin:y,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:v,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:j,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function GK(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),i=e.pageNumber(),a=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;a=s===i}return typeof t=="number"?t:(t==null||t===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function YK(e,t,r){var n=t.head||[],i=t.body||[],a=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=SI(e,t.html,r,s,t.useCss)||{};n=o.head||n,i=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||JK(n,i,a);return{columns:c,head:n,body:i,foot:a}}function JK(e,t,r){var n=e[0]||t[0]||r[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=i.length:u=a+(c>0?"_".concat(c):"");var d={dataKey:u};i.push(d)}}),i}var rw=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),XK=function(e){yI(t,e);function t(r,n,i,a,s,o){var c=e.call(this,r,n,o)||this;return c.cell=i,c.row=a,c.column=s,c.section=a.section,c}return t}(rw),ZK=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,i,a,s){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new XK(t,this,n,i,a,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new rw(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new rw(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),kI=function(){function e(t,r,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof xI&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,i){var a;return Math.max(n,((a=r.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(i,a){var s=n.cells[a.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+o;return u>i?u:i},0)},e}(),AI=function(){function e(t,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=d0(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),QK=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,i=t.allRows();n<i.length;n++){var a=i[n],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function eG(e,t){tG(e,t);var r=[],n=0;t.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(t);s?a.width=s:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var i=t.getWidth(e.pageSize().width)-n;i&&(i=nw(r,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=nw(r,i,function(a){return a.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),nG(t),iG(t,e),rG(t)}function tG(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,i=_I(e,t);t.allRows().forEach(function(a){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=a.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,a,c,null);var f=u.padding("horizontal");u.contentWidth=Bv(u.text,u.styles,e)+f;var p=Bv(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(a){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=a.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function nw(e,t,r){for(var n=t,i=e.reduce(function(h,y){return h+y.wrappedWidth},0),a=0;a<e.length;a++){var s=e[a],o=s.wrappedWidth/i,c=n*o,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(h){return t<0?h.width>r(h):!0});p.length&&(t=nw(p,t,r))}return t}function rG(e){for(var t={},r=1,n=e.allRows(),i=0;i<n.length;i++)for(var a=n[i],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=t[c.index];if(r>1)r--,delete a.cells[c.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var f=n.length-i,p=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:p,row:a}}}}}function nG(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],i=null,a=0,s=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(s-=1,s>1&&e.columns[o+1])a+=c.width,delete n.cells[c.index];else if(i){var u=i;delete n.cells[c.index],i=null,u.width=c.width+a}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,a=0,u.colSpan>1){i=u,a+=c.width;continue}u.width=c.width+a}}}function iG(e,t){for(var r={count:0,height:0},n=0,i=e.allRows();n<i.length;n++){for(var a=i[n],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=a.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=S4(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=S4(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>a.height&&(a.height=p)}}r.count--}}function S4(e,t,r,n,i){return e.map(function(a){return aG(a,t,r,n,i)})}function aG(e,t,r,n,i){var a=1e4*n.scaleFactor();if(t=Math.ceil(t*a)/a,t>=Bv(e,r,n))return e;for(;t<Bv(e+i,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function EI(e,t){var r=new Sd(e),n=sG(t,r.scaleFactor()),i=new ZK(t,n);return eG(r,i),r.applyStyles(r.userStyles),i}function sG(e,t){var r=e.content,n=lG(r.columns);if(r.head.length===0){var i=N4(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=N4(n,"foot");i&&r.foot.push(i)}var a=e.settings.theme,s=e.styles;return{columns:n,head:ab("head",r.head,n,s,a,t),body:ab("body",r.body,n,s,a,t),foot:ab("foot",r.foot,n,s,a,t)}}function ab(e,t,r,n,i,a){var s={},o=t.map(function(c,u){for(var d=0,f={},p=0,h=0,y=0,g=r;y<g.length;y++){var x=g[y];if(s[x.index]==null||s[x.index].left===0)if(h===0){var v=void 0;Array.isArray(c)?v=c[x.index-p-d]:v=c[x.dataKey];var _={};typeof v=="object"&&!Array.isArray(v)&&(_=(v==null?void 0:v.styles)||{});var S=cG(e,x,u,i,n,a,_),j=new AI(v,S,e);f[x.dataKey]=j,f[x.index]=j,h=j.colSpan-1,s[x.index]={left:j.rowSpan-1,times:h}}else h--,p++;else s[x.index].left--,h=s[x.index].times,d++}return new kI(c,u,e,f)});return o}function N4(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var i=oG(t,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function oG(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function lG(e){return e.map(function(t,r){var n,i;return typeof t=="object"?i=(n=t.dataKey)!==null&&n!==void 0?n:r:i=r,new QK(i,t,r)})}function cG(e,t,r,n,i,a,s){var o=FK(n),c;e==="head"?c=i.headStyles:e==="body"?c=i.bodyStyles:e==="foot"&&(c=i.footStyles);var u=uo({},o.table,o[e],i.styles,c),d=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},f=e==="body"?d:{},p=e==="body"&&r%2===0?uo({},o.alternateRow,i.alternateRowStyles):{},h=MK(a),y=uo({},h,u,p,f);return uo(y,s)}function uG(e,t,r){var n;r===void 0&&(r={});var i=_I(e,t),a=new Map,s=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var h=t.columns.find(function(y){return y.dataKey===p||y.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(t.columns[h.index]),i-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(a.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||i>=f)u=!1,s.push(d),o.push(t.columns[d]),i-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function dG(e,t){for(var r=[],n=0;n<t.columns.length;n++){var i=uG(e,t,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function PI(e,t){var r=t.settings,n=r.startY,i=r.margin,a={x:i.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+i.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(p,h){return p+h.height},0);o+=u}var d=new Sd(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(OI(d),a.y=i.top),t.callWillDrawPageHooks(d,a);var f=uo({},a);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?fG(d,t,f,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return wo(d,t,p,a,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(p,h){var y=h===t.body.length-1;Uv(d,t,p,y,f,a,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return wo(d,t,p,a,t.columns)})),bI(d,t,f,a),t.callEndPageHooks(d,a),t.finalY=a.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function fG(e,t,r,n){var i=dG(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Eh(e,t,r,n,u.columns,!0):k4(e,t,n,u.columns),hG(e,t,r,n,u.columns),sb(e,t,n,u.columns)});else for(var s=-1,o=i[0],c=function(){var u=s;if(o){e.applyStyles(e.userStyles);var d=o.columns;s>=0?Eh(e,t,r,n,d,!0):k4(e,t,n,d),u=A4(e,t,s+1,n,d),sb(e,t,n,d)}var f=u-s;i.slice(1).forEach(function(p){e.applyStyles(e.userStyles),Eh(e,t,r,n,p.columns,!0),A4(e,t,s+1,n,p.columns,f),sb(e,t,n,p.columns)}),s=u};s<t.body.length-1;)c()}function k4(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(a){return wo(e,t,a,r,n)})}function hG(e,t,r,n,i){e.applyStyles(e.userStyles),t.body.forEach(function(a,s){var o=s===t.body.length-1;Uv(e,t,a,o,r,n,i)})}function A4(e,t,r,n,i,a){e.applyStyles(e.userStyles),a=a??t.body.length;var s=Math.min(r+a,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=CI(e,t,d,n);c.canEntireRowFit(f,i)&&(wo(e,t,c,n,i),o=r+u)}),o}function sb(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(a){return wo(e,t,a,r,n)})}function pG(e,t,r){var n=r.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),a=Math.floor((t-i)/n);return Math.max(0,a)}function mG(e,t,r,n){var i={};e.spansMultiplePages=!0,e.height=0;for(var a=0,s=0,o=r.columns;s<o.length;s++){var c=o[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new AI(u.raw,u.styles,u.section);d=uo(d,u),d.text=[];var f=pG(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var y=new kI(e.raw,-1,e.section,i,!0);y.height=a;for(var g=0,x=r.columns;g<x.length;g++){var c=x[g],d=y.cells[c.index];d&&(d.height=y.height);var u=e.cells[c.index];u&&(u.height=e.height)}return y}function gG(e,t,r,n){var i=e.pageSize().height,a=n.settings.margin,s=a.top+a.bottom,o=i-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.log("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.log("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Uv(e,t,r,n,i,a,s){var o=CI(e,t,n,a);if(r.canEntireRowFit(o,s))wo(e,t,r,a,s);else if(gG(e,r,o,t)){var c=mG(r,o,t,e);wo(e,t,r,a,s),Eh(e,t,i,a,s),Uv(e,t,c,n,i,a,s)}else Eh(e,t,i,a,s),Uv(e,t,r,n,i,a,s)}function wo(e,t,r,n,i){n.x=t.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}vG(e,c,n);var d=c.getTextPos();vI(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function vG(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=wI(n.lineWidth,n.fillColor);i&&e.rect(t.x,r.y,t.width,t.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),yG(e,t,r,n.lineWidth))}function yG(e,t,r,n){var i,a,s,o;n.top&&(i=r.x,a=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,a,s,o)),n.bottom&&(i=r.x,a=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,a,s,o)),n.left&&(i=r.x,a=r.y,s=r.x,o=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,i,a,s,o)),n.right&&(i=r.x+t.width,a=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,i,a,s,o));function c(u,d,f,p,h){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,p,h,"S")}}function CI(e,t,r,n){var i=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-i}function Eh(e,t,r,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(o){return wo(e,t,o,n,i)}),t.callEndPageHooks(e,n);var s=t.settings.margin;bI(e,t,r,n),OI(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return wo(e,t,o,n,i)}),e.applyStyles(e.userStyles))}function OI(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function xG(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=NI(this,n),a=EI(this,i);return PI(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,i){vI(t,r,n,i,this)},e.API.autoTableSetDefaults=function(t){return Sd.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Sd.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Sd(this),a=SI(i,t,window,r,!1),s=a.head,o=a.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var ob;function bG(e,t){var r=NI(e,t),n=EI(e,r);PI(e,n)}try{if(typeof window<"u"&&window){var E4=window,P4=E4.jsPDF||((ob=E4.jspdf)===null||ob===void 0?void 0:ob.jsPDF);P4&&xG(P4)}}catch(e){console.error("Could not apply autoTable plugin",e)}const C4={INR:{prefix:"Rs.",locale:"en-IN"},USD:{prefix:"$",locale:"en-US"},EUR:{prefix:"EUR",locale:"de-DE"},GBP:{prefix:"GBP",locale:"en-GB"},AED:{prefix:"AED",locale:"ar-AE"},SGD:{prefix:"S$",locale:"en-SG"}};function wG(e,t="INR"){const r=C4[t]||C4.INR,n=new Intl.NumberFormat(r.locale,{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return`${r.prefix} ${n}`}function O4(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"}function _G(e){switch(e){case"domestic":return"Domestic (Intra-State)";case"sez":return"SEZ (Special Economic Zone)";case"export":return"Export";default:return"Domestic (Default)"}}function jG(e,t){return t==="sez"||t==="export"?{cgst:0,sgst:0,igst:e}:{cgst:Math.round(e/2*100)/100,sgst:Math.round(e/2*100)/100,igst:0}}function SG(e){var x,v,_,S,j;const{invoice:t,companyDetails:r}=e,n=new at,i=r.currency||"INR",a=N=>wG(N,i),s=n.internal.pageSize.getWidth();let o=20;n.setFontSize(18),n.setFont("helvetica","bold"),n.text(r.name,14,o),o+=8,n.setFontSize(10),n.setFont("helvetica","normal"),n.text(r.address,14,o),o+=5,n.text(`GSTIN: ${r.gstin}`,14,o),o+=5,n.text(`Phone: ${r.phone} | Email: ${r.email}`,14,o),o+=15,n.setFontSize(14),n.setFont("helvetica","bold"),n.text("TAX INVOICE",s/2,o,{align:"center"}),n.setFontSize(10),n.setFont("helvetica","normal");const c=[`Invoice No: ${t.invoice_number}`,`Date: ${O4(t.issued_at||t.created_at)}`,`Type: ${t.invoice_type.charAt(0).toUpperCase()+t.invoice_type.slice(1)}`];let u=o-20;c.forEach(N=>{u+=6,n.text(N,s-14,u,{align:"right"})}),o+=15,n.setDrawColor(200,200,200),n.line(14,o,s-14,o),o+=10,n.setFontSize(11),n.setFont("helvetica","bold"),n.text("Bill To:",14,o),o+=7,n.setFontSize(10),n.setFont("helvetica","normal"),n.text(((x=t.clients)==null?void 0:x.name)||"N/A",14,o),(v=t.clients)!=null&&v.billing_address&&(o+=5,n.splitTextToSize(t.clients.billing_address,80).forEach(A=>{n.text(A,14,o),o+=5})),(_=t.clients)!=null&&_.gstin&&(n.text(`GSTIN: ${t.clients.gstin}`,14,o),o+=5),(S=t.clients)!=null&&S.phone&&(n.text(`Phone: ${t.clients.phone}`,14,o),o+=5);const d=(j=t.clients)==null?void 0:j.gst_type;o+=2,n.setFont("helvetica","bold"),n.text(`GST Type: ${_G(d)}`,14,o),n.setFont("helvetica","normal"),t.invoice_type==="event"&&t.events&&(o+=10,n.setFont("helvetica","bold"),n.text("Event Details:",14,o),o+=5,n.setFont("helvetica","normal"),n.text(`${t.events.event_name} - ${O4(t.events.event_date)}`,14,o),o+=5),o+=10;const p=(t.invoice_items||[]).map((N,A)=>[(A+1).toString(),N.description,N.quantity.toString(),a(N.unit_price),a(N.line_total),`${N.tax_rate}%`,a(N.tax_amount),a(Wr(N.line_total+N.tax_amount))]);bG(n,{startY:o,head:[["#","Description","Qty","Rate","Amount","Tax %","Tax","Total"]],body:p,theme:"grid",headStyles:{fillColor:[60,60,60],textColor:[255,255,255],fontStyle:"bold",halign:"center"},columnStyles:{0:{halign:"center",cellWidth:10},1:{cellWidth:50},2:{halign:"center",cellWidth:15},3:{halign:"right",cellWidth:22},4:{halign:"right",cellWidth:22},5:{halign:"center",cellWidth:18},6:{halign:"right",cellWidth:22},7:{halign:"right",cellWidth:25}},styles:{fontSize:9,cellPadding:3},margin:{left:14,right:14}}),o=n.lastAutoTable.finalY+10;const h=s-80,y=s-14,g=jG(t.tax_total,d);return n.setFontSize(10),n.text("Subtotal:",h,o),n.text(a(t.subtotal),y,o,{align:"right"}),o+=6,g.igst>0?(n.text("IGST:",h,o),n.text(a(g.igst),y,o,{align:"right"})):(n.text("CGST:",h,o),n.text(a(g.cgst),y,o,{align:"right"}),o+=6,n.text("SGST:",h,o),n.text(a(g.sgst),y,o,{align:"right"})),o+=6,n.text("Total Tax:",h,o),n.text(a(t.tax_total),y,o,{align:"right"}),o+=8,n.setDrawColor(0,0,0),n.line(h-5,o-2,y,o-2),n.setFontSize(12),n.setFont("helvetica","bold"),n.text("Grand Total:",h,o+5),n.text(a(t.grand_total),y,o+5,{align:"right"}),o+=25,n.setFontSize(9),n.setFont("helvetica","italic"),n.setTextColor(100,100,100),n.text("This is a system generated invoice.",14,o),o+=5,n.text("No signature required.",14,o),n}function NG(e){var n,i,a,s,o,c,u,d,f;const t={name:((n=e.outlets)==null?void 0:n.name)||"Company Name",address:[(i=e.outlets)==null?void 0:i.address,(a=e.outlets)==null?void 0:a.city,(s=e.outlets)==null?void 0:s.state,(o=e.outlets)==null?void 0:o.pincode].filter(Boolean).join(", ")||"Address not available",gstin:((c=e.outlets)==null?void 0:c.gstin)||"GSTIN not available",phone:((u=e.outlets)==null?void 0:u.phone)||"-",email:((d=e.outlets)==null?void 0:d.email)||"-",currency:((f=e.outlets)==null?void 0:f.currency)||"INR"};SG({invoice:e,companyDetails:t}).save(`Invoice_${e.invoice_number}.pdf`)}function kG({invoice:e,maxAmount:t,onClose:r,onSuccess:n}){var j;const{user:i}=Wt(),[a,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,p]=b.useState("cash"),[h,y]=b.useState(new Date().toISOString().split("T")[0]),[g,x]=b.useState(""),[v,_]=b.useState("");async function S(N){if(N.preventDefault(),!(i!=null&&i.id))return;const A=Wr(parseFloat(u));if(!A||A<=0){c("Please enter a valid payment amount");return}if(A>t+u5){c(`Payment amount cannot exceed balance due (${Ie(Hg(t))})`);return}try{s(!0),c(null),await WW(i.id,{invoice_id:e.id,amount:A,payment_method:f,payment_date:h,reference_number:g||void 0,notes:v||void 0}),n()}catch(I){c(I instanceof Error?I.message:"Failed to record payment")}finally{s(!1)}}return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs(we,{className:"max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Record Payment"}),l.jsx("div",{className:"bg-muted p-4 rounded-md mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Invoice"}),l.jsx("p",{className:"font-semibold",children:e.invoice_number})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Client"}),l.jsx("p",{className:"font-semibold",children:(j=e.clients)==null?void 0:j.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Invoice Total"}),l.jsx("p",{className:"font-semibold",children:Ie(e.grand_total)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Balance Due"}),l.jsx("p",{className:"font-semibold text-orange-600",children:Ie(Hg(t))})]})]})}),o&&l.jsx(ft,{variant:"error",className:"mb-4",children:o}),l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsx(ze,{label:"Payment Amount",type:"number",min:"0.01",step:"0.01",max:t,value:u,onChange:N=>d(N.target.value),placeholder:"0.00",required:!0,helperText:`Maximum: ${Ie(Hg(t))}`}),l.jsxs(ot,{label:"Payment Method",value:f,onChange:N=>p(N.target.value),required:!0,children:[l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"upi",children:"UPI"}),l.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),l.jsx("option",{value:"card",children:"Card"}),l.jsx("option",{value:"cheque",children:"Cheque"})]}),l.jsx(ze,{label:"Payment Date",type:"date",value:h,onChange:N=>y(N.target.value),max:new Date().toISOString().split("T")[0],required:!0}),l.jsx(ze,{label:"Reference Number",value:g,onChange:N=>x(N.target.value),placeholder:"Transaction ID, Cheque number, etc.",helperText:"Optional"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),l.jsx("textarea",{className:"w-full border rounded-md p-2 min-h-[80px]",value:v,onChange:N=>_(N.target.value),placeholder:"Additional notes (optional)"})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:a,children:a?"Recording...":"Record Payment"})]})]})]})})}function AG(){var C,D,T,O,q,K,ne,re,te,W,B,le,G,R,z,J,ie,ae,ue,pe,ee,he;const{id:e}=ou(),t=_i(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(null),[h,y]=b.useState([]),[g,x]=b.useState(null),[v,_]=b.useState(!1);b.useEffect(()=>{S(),j()},[e]);async function S(){if(e)try{s(!0);const oe=await Dv(e);if(!oe){c("Invoice not found or you do not have access");return}i(oe)}catch(oe){c(oe instanceof Error?oe.message:"Failed to load invoice")}finally{s(!1)}}async function j(){if(e)try{const oe=await VW(e);y(oe.payments),x({amount_paid:oe.amount_paid,balance_due:oe.balance_due,payment_status:oe.payment_status})}catch(oe){console.error("Failed to load payments:",oe)}}async function N(oe){if(!(!(r!=null&&r.id)||!e))try{d(!0),c(null),oe==="issue"?await _T(r.id,e):oe==="cancel"&&await jT(r.id,e),p(null),await S()}catch(de){c(de instanceof Error?de.message:`Failed to ${oe} invoice`)}finally{d(!1)}}function A(){_(!1),j()}function I(oe){const de={unpaid:"destructive",partially_paid:"default",paid:"success"};return l.jsx(Yt,{variant:de[oe],children:oe.replace("_"," ").toUpperCase()})}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});if(!n)return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(ft,{variant:"error",children:o||"Invoice not found"}),l.jsx("div",{className:"mt-4",children:l.jsx(Ee,{variant:"outline",onClick:()=>t("/invoices"),children:"Back to Invoices"})})]});const E={draft:"default",issued:"success",cancelled:"secondary"};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold",children:["Invoice ",n.invoice_number]}),l.jsxs("p",{className:"text-muted-foreground mt-1 capitalize",children:[n.invoice_type," Invoice"]})]}),l.jsxs("div",{className:"flex gap-2",children:[n.status==="issued"&&l.jsxs(Ee,{variant:"outline",onClick:()=>NG(n),children:[l.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),(r==null?void 0:r.role)!=="accountant"&&n.status==="draft"&&l.jsxs(l.Fragment,{children:[l.jsx(Ee,{variant:"outline",onClick:()=>p("issue"),disabled:u,children:"Issue Invoice"}),l.jsx(Ee,{variant:"destructive",onClick:()=>p("cancel"),disabled:u,children:"Cancel"})]})]})]}),o&&l.jsx(ft,{variant:"error",children:o}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Status"}),l.jsx(Yt,{variant:E[n.status],className:"mt-2",children:n.status.toUpperCase()})]}),n.issued_at&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Issued On"}),l.jsx("p",{className:"font-medium",children:Ns(n.issued_at,"long")})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Bill To"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-lg",children:(C=n.clients)==null?void 0:C.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(D=n.clients)==null?void 0:D.phone}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(T=n.clients)==null?void 0:T.email}),((O=n.clients)==null?void 0:O.gstin)&&l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"GSTIN:"})," ",(q=n.clients)==null?void 0:q.gstin]}),((K=n.clients)==null?void 0:K.billing_address)&&l.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:(ne=n.clients)==null?void 0:ne.billing_address}),l.jsxs("p",{className:"text-sm mt-2",children:[l.jsx("span",{className:"font-medium",children:"GST Type:"})," ",l.jsx(Yt,{variant:((re=n.clients)==null?void 0:re.gst_type)==="sez"?"default":((te=n.clients)==null?void 0:te.gst_type)==="export"?"secondary":"success",children:((B=(W=n.clients)==null?void 0:W.gst_type)==null?void 0:B.toUpperCase())||"DOMESTIC"})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"From"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-lg",children:(le=n.outlets)==null?void 0:le.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(G=n.outlets)==null?void 0:G.code}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(R=n.outlets)==null?void 0:R.phone}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(z=n.outlets)==null?void 0:z.email}),((J=n.outlets)==null?void 0:J.gstin)&&l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"GSTIN:"})," ",(ie=n.outlets)==null?void 0:ie.gstin]}),((ae=n.outlets)==null?void 0:ae.address)&&l.jsxs("p",{className:"text-sm text-muted-foreground",children:[(ue=n.outlets)==null?void 0:ue.address,", ",(pe=n.outlets)==null?void 0:pe.city,", ",(ee=n.outlets)==null?void 0:ee.state]})]})]})]}),n.invoice_type==="event"&&n.events&&l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Event Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Name"}),l.jsx("p",{className:"font-medium",children:n.events.event_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.events.event_date,"long")})]}),n.events.event_type&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Type"}),l.jsx("p",{className:"font-medium",children:n.events.event_type})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Description"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Qty"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Unit Price"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Amount"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Tax %"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Tax"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"})]})}),l.jsx("tbody",{children:(he=n.invoice_items)==null?void 0:he.map(oe=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2",children:oe.description}),l.jsx("td",{className:"text-right py-2 px-2",children:oe.quantity}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(oe.unit_price)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(oe.line_total)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[oe.tax_rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(oe.tax_amount)}),l.jsx("td",{className:"text-right py-2 px-2 font-medium",children:Ie(Wr(oe.line_total+oe.tax_amount))})]},oe.id))})]})}),l.jsxs("div",{className:"mt-6 space-y-2 border-t pt-4",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{className:"font-medium",children:Ie(n.subtotal)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Tax Total:"}),l.jsx("span",{className:"font-medium",children:Ie(n.tax_total)})]}),l.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-2",children:[l.jsx("span",{children:"Grand Total:"}),l.jsx("span",{className:"font-bold",children:Ie(n.grand_total)})]})]})]}),n.status==="issued"&&l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Payments Received"}),g&&l.jsx("div",{className:"flex items-center gap-2 mt-1",children:I(g.payment_status)})]}),(r==null?void 0:r.role)!=="accountant"&&g&&!hT(g.balance_due)&&l.jsx(Ee,{onClick:()=>_(!0),children:"Record Payment"})]}),g&&l.jsx("div",{className:"bg-muted p-4 rounded-md mb-4",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Paid"}),l.jsx("p",{className:"text-lg font-semibold text-green-600",children:Ie(g.amount_paid)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Balance Due"}),l.jsx("p",{className:"text-lg font-semibold text-orange-600",children:Ie(Hg(g.balance_due))})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice Total"}),l.jsx("p",{className:"text-lg font-semibold",children:Ie(n.grand_total)})]})]})}),h.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Method"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Amount"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Balance After"})]})}),l.jsx("tbody",{children:h.map((oe,de)=>{const Ce=h.slice(de),Pe=Wr(Ce.reduce((je,Je)=>je+Je.amount,0)),V=Wr(n.grand_total-Pe);return l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:Ns(oe.payment_date,"short")}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:oe.payment_method.replace("_"," ")}),l.jsx("td",{className:"text-right py-2 px-2 font-medium text-green-600",children:Ie(oe.amount)}),l.jsx("td",{className:"py-2 px-2 text-sm text-muted-foreground",children:oe.reference_number||"-"}),l.jsx("td",{className:"text-right py-2 px-2 font-medium",children:Ie(V)})]},oe.id)})})]})}):l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No payments recorded yet"})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Audit Trail"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.updated_at).toLocaleString()})]})]})]}),v&&n&&l.jsx(kG,{invoice:n,maxAmount:(g==null?void 0:g.balance_due)||0,onClose:()=>_(!1),onSuccess:A}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",f==="issue"?"Issue":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",f," this invoice?",f==="issue"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Once issued, the invoice cannot be edited."}),f==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive font-medium",children:"This action cannot be undone. The invoice will be marked as cancelled."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>p(null),disabled:u,children:"Cancel"}),l.jsx(Ee,{variant:f==="cancel"?"destructive":"default",onClick:()=>N(f),disabled:u,children:u?"Processing...":`Yes, ${f}`})]})]})})]})}function EG(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(!1),[g,x]=b.useState(null),[v,_]=b.useState(null);b.useEffect(()=>{S()},[e==null?void 0:e.id,o,u,f,h]);async function S(){if(e!=null&&e.id)try{i(!0),s(null);const D={is_active:h?void 0:!0};o&&(D.payment_method=o),u&&(D.date_from=u),f&&(D.date_to=f);const T=await qW(e.id,D);r(T)}catch(D){s(D instanceof Error?D.message:"Failed to load payments")}finally{i(!1)}}async function j(D){if(e!=null&&e.id)try{x(D),s(null),await HW(e.id,D),_(null),await S()}catch(T){s(T instanceof Error?T.message:"Failed to delete payment")}finally{x(null)}}function N(){c(""),d(""),p("")}if(n)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})});const A=t.filter(D=>D.is_active),I=A.reduce((D,T)=>D+T.amount,0),E=A.filter(D=>D.payment_date===new Date().toISOString().split("T")[0]),C=E.reduce((D,T)=>D+T.amount,0);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Payments"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and manage payments received"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Today's Payments"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(C)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.length," transactions"]})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total (Filtered)"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(I)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.length," payments"]})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"All Records"}),l.jsx("p",{className:"text-2xl font-bold",children:t.length}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.filter(D=>!D.is_active).length," deleted"]})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs(ot,{label:"Payment Method",value:o,onChange:D=>c(D.target.value),children:[l.jsx("option",{value:"",children:"All Methods"}),l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"upi",children:"UPI"}),l.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),l.jsx("option",{value:"card",children:"Card"}),l.jsx("option",{value:"cheque",children:"Cheque"})]}),l.jsx(ze,{label:"From Date",type:"date",value:u,onChange:D=>d(D.target.value)}),l.jsx(ze,{label:"To Date",type:"date",value:f,onChange:D=>p(D.target.value)}),l.jsxs("div",{className:"flex flex-col justify-between",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:h,onChange:D=>y(D.target.checked),className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:"Show deleted"})]}),(o||u||f)&&l.jsx(Ee,{variant:"outline",size:"sm",onClick:N,children:"Clear Filters"})]})]})}),a&&l.jsx(ft,{variant:"error",children:a}),l.jsx(we,{children:t.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-muted-foreground",children:"No payments found"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Invoice #"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Method"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Amount"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Reference"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(D=>l.jsxs("tr",{className:`border-b hover:bg-muted/50 ${D.is_active?"":"opacity-50"}`,children:[l.jsx("td",{className:"py-3 px-4 text-sm",children:Ns(D.payment_date,"short")}),l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/invoices/${D.invoice_id}`,className:"text-primary hover:underline font-medium",children:D.invoice_number})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:D.client_name}),l.jsx("td",{className:"py-3 px-4 text-sm capitalize",children:D.payment_method.replace("_"," ")}),l.jsx("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:Ie(D.amount)}),l.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:D.reference_number||"-"}),l.jsx("td",{className:"py-3 px-4",children:D.is_active?l.jsx(Yt,{variant:"success",children:"Active"}):l.jsx(Yt,{variant:"secondary",children:"Deleted"})}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("div",{className:"flex items-center justify-center gap-2",children:(e==null?void 0:e.role)!=="accountant"&&D.is_active&&l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>_({id:D.id,amount:D.amount,invoiceNumber:D.invoice_number||"Unknown"}),disabled:g===D.id,children:"Delete"})})})]},D.id))})]})})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirm Delete"}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to delete this payment?",l.jsxs("span",{className:"block mt-2 font-medium",children:["Amount: ",Ie(v.amount)]}),l.jsxs("span",{className:"block",children:["Invoice: ",v.invoiceNumber]}),l.jsx("span",{className:"block mt-2 text-orange-600",children:"This will mark the payment as inactive. The invoice balance will be recalculated."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Ee,{variant:"outline",onClick:()=>_(null),disabled:!!g,children:"Cancel"}),l.jsx(Ee,{variant:"destructive",onClick:()=>j(v.id),disabled:!!g,children:g?"Deleting...":"Yes, Delete"})]})]})})]})}async function du(e){const{data:t}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}function Qd(e,t,r){if(t.role==="manager"&&t.outletIds)if(t.outletIds.length>0)e=e.in("outlet_id",t.outletIds);else return null;return r.outlet_id&&["admin","accountant"].includes(t.role)&&(e=e.eq("outlet_id",r.outlet_id)),e}async function TI(e,t){const r=await du(e);let n=ve.from("report_revenue_daily").select("*").order("report_date",{ascending:!1});if(n=Qd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to)),t.invoice_type&&(n=n.eq("invoice_type",t.invoice_type));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function PG(e,t){const r=await TI(e,t),n=new Map;r.forEach(o=>{const c=n.get(o.report_date)||{invoiced:0,collected:0};n.set(o.report_date,{invoiced:c.invoiced+o.total_invoiced,collected:c.collected+o.total_collected})});const i=Array.from(n.entries()).map(([o,c])=>({name:o,invoiced:c.invoiced,collected:c.collected,value:c.invoiced})).sort((o,c)=>o.name.localeCompare(c.name)),a=new Map;r.forEach(o=>{const c=a.get(o.outlet_name)||{invoiced:0,collected:0};a.set(o.outlet_name,{invoiced:c.invoiced+o.total_invoiced,collected:c.collected+o.total_collected})});const s=Array.from(a.entries()).map(([o,c])=>({name:o,invoiced:c.invoiced,collected:c.collected,value:c.invoiced}));return{trendData:i,outletData:s}}async function II(e,t){const r=await du(e);let n=ve.from("report_payments_daily").select("*").order("report_date",{ascending:!1});if(n=Qd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to)),t.payment_method&&(n=n.eq("payment_method",t.payment_method));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function CG(e,t){const r=await II(e,t),n=new Map;r.forEach(o=>{const c=n.get(o.payment_method)||0;n.set(o.payment_method,c+o.total_amount)});const i=Array.from(n.entries()).map(([o,c])=>({name:o.replace("_"," ").toUpperCase(),value:c})),a=new Map;r.forEach(o=>{const c=a.get(o.report_date)||0;a.set(o.report_date,c+o.total_amount)});const s=Array.from(a.entries()).map(([o,c])=>({name:o,value:c})).sort((o,c)=>o.name.localeCompare(c.name));return{methodData:i,dailyData:s}}async function LI(e,t){const r=await du(e);let n=ve.from("report_outstanding_aging").select("*").order("days_outstanding",{ascending:!1});if(n=Qd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to)),t.aging_bucket&&(n=n.eq("aging_bucket",t.aging_bucket));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function OG(e,t){const r=await LI(e,t),n=new Map([["0-30",0],["31-60",0],["61-90",0],["90+",0]]);return r.forEach(a=>{const s=n.get(a.aging_bucket)||0;n.set(a.aging_bucket,s+a.balance_due)}),{bucketData:[{name:"0-30 days",value:n.get("0-30")||0},{name:"31-60 days",value:n.get("31-60")||0},{name:"61-90 days",value:n.get("61-90")||0},{name:"90+ days",value:n.get("90+")||0}]}}async function DI(e,t){const r=await du(e);let n=ve.from("report_subscription_mrr").select("*").order("mrr",{ascending:!1});if(n=Qd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("next_billing_date",t.date_from)),t.date_to&&(n=n.lte("next_billing_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function TG(e,t){const r=await DI(e,t),n=new Map;return r.forEach(a=>{const s=n.get(a.outlet_name)||0;n.set(a.outlet_name,s+a.mrr)}),{outletData:Array.from(n.entries()).map(([a,s])=>({name:a,value:s}))}}async function RI(e,t){const r=await du(e);let n=ve.from("report_revenue_daily").select("*").eq("invoice_type","event").order("report_date",{ascending:!1});if(n=Qd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function IG(e,t){const r=await RI(e,t),n=new Map;return r.forEach(a=>{const s=n.get(a.outlet_name)||0;n.set(a.outlet_name,s+a.total_invoiced)}),{outletData:Array.from(n.entries()).map(([a,s])=>({name:a,value:s}))}}async function LG(e,t){const r=await du(e);let n=ve.from("report_client_revenue").select("*").order("total_invoiced",{ascending:!1});if(n=Qd(n,r,t),n===null)return[];const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function DG(e,t){const r=await du(e);let n=ve.from("report_outlet_performance").select("*").order("total_invoiced",{ascending:!1});if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}function RG(e){const t=["Date","Outlet","Invoice Type","Invoice Count","Total Invoiced","Total Collected","Outstanding"],r=e.map(n=>[n.report_date,n.outlet_name,n.invoice_type,n.invoice_count,n.total_invoiced,n.total_collected,n.outstanding]);return[t,...r].map(n=>n.join(",")).join(`
`)}function MG(e){const t=["Date","Outlet","Payment Method","Payment Count","Total Amount"],r=e.map(n=>[n.report_date,n.outlet_name,n.payment_method.replace("_"," ").toUpperCase(),n.payment_count,n.total_amount]);return[t,...r].map(n=>n.join(",")).join(`
`)}function FG(e){const t=["Invoice Number","Invoice Date","Client","Outlet","Invoice Total","Amount Paid","Balance Due","Days Outstanding","Aging Bucket"],r=e.map(n=>[n.invoice_number,n.invoice_date,n.client_name,n.outlet_name,n.grand_total,n.amount_paid,n.balance_due,n.days_outstanding,n.aging_bucket]);return[t,...r].map(n=>n.join(",")).join(`
`)}function $G(e){const t=["Client","Outlet","Billing Cycle","Status","Quantity","Price Per Unit","Cycle Amount","MRR","Annual Value","Next Billing Date"],r=e.map(n=>[n.client_name,n.outlet_name,n.billing_cycle,n.status,n.quantity,n.price_per_unit,n.cycle_amount,n.mrr,n.annual_value,n.next_billing_date]);return[t,...r].map(n=>n.join(",")).join(`
`)}function BG(e){const t=["Date","Outlet","Invoice Count","Total Invoiced","Total Collected","Outstanding"],r=e.map(n=>[n.report_date,n.outlet_name,n.invoice_count,n.total_invoiced,n.total_collected,n.outstanding]);return[t,...r].map(n=>n.join(",")).join(`
`)}function UG(e){const t=["Client Name","Client Type","Outlet","Invoice Count","Total Invoiced","Total Collected","Outstanding","Subscription Revenue","Event Revenue","Active Subscriptions","Completed Events"],r=e.map(n=>[n.client_name,n.client_type,n.outlet_name,n.invoice_count,n.total_invoiced,n.total_collected,n.outstanding,n.subscription_revenue,n.event_revenue,n.active_subscriptions,n.completed_events]);return[t,...r].map(n=>n.join(",")).join(`
`)}function qG(e){const t=["Outlet Name","Code","City","Active Clients","Total Invoices","Total Invoiced","Total Collected","Outstanding","Collection Rate %","Active Subscriptions","MRR","Completed Events"],r=e.map(n=>[n.outlet_name,n.outlet_code,n.city||"",n.active_clients,n.total_invoices,n.total_invoiced,n.total_collected,n.outstanding,n.collection_rate_percent,n.active_subscriptions,n.mrr,n.completed_events]);return[t,...r].map(n=>n.join(",")).join(`
`)}var zG=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function v5(e){if(typeof e!="string")return!1;var t=zG;return t.includes(e)}var WG=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HG=new Set(WG);function MI(e){return typeof e!="string"?!1:HG.has(e)}function FI(e){return typeof e=="string"&&e.startsWith("data-")}function Qi(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(MI(r)||FI(r))&&(t[r]=e[r]);return t}function zc(e){if(e==null)return null;if(b.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Qi(t)}return typeof e=="object"&&!Array.isArray(e)?Qi(e):null}function yi(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(MI(r)||FI(r)||v5(r))&&(t[r]=e[r]);return t}function VG(e){return e==null?null:b.isValidElement(e)?yi(e.props):typeof e=="object"&&!Array.isArray(e)?yi(e):null}var KG=["children","width","height","viewBox","className","style","title","desc"];function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iw.apply(null,arguments)}function GG(e,t){if(e==null)return{};var r,n,i=YG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function YG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var y5=b.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=e,d=GG(e,KG),f=a||{width:n,height:i,x:0,y:0},p=Ut("recharts-surface",s);return b.createElement("svg",iw({},yi(d),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,c),b.createElement("desc",null,u),r)}),JG=["children","className"];function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aw.apply(null,arguments)}function XG(e,t){if(e==null)return{};var r,n,i=ZG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ZG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var In=b.forwardRef((e,t)=>{var{children:r,className:n}=e,i=XG(e,JG),a=Ut("recharts-layer",n);return b.createElement("g",aw({className:a},yi(i),{ref:t}),r)}),$I=b.createContext(null),QG=()=>b.useContext($I);function fr(e){return function(){return e}}const BI=Math.cos,qv=Math.sin,es=Math.sqrt,zv=Math.PI,f0=2*zv,sw=Math.PI,ow=2*sw,mc=1e-6,eY=ow-mc;function UI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function tY(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UI;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class rY{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UI:tY(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=n-t,u=i-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>mc)if(!(Math.abs(f*c-u*d)>mc)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,y=i-o,g=c*c+u*u,x=h*h+y*y,v=Math.sqrt(g),_=Math.sqrt(p),S=a*Math.tan((sw-Math.acos((g+p-x)/(2*v*_)))/2),j=S/_,N=S/v;Math.abs(j-1)>mc&&this._append`L${t+j*d},${r+j*f}`,this._append`A${a},${a},0,0,${+(f*h>d*y)},${this._x1=t+N*c},${this._y1=r+N*u}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),c=n*Math.sin(i),u=t+o,d=r+c,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>mc||Math.abs(this._y1-d)>mc)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%ow+ow),p>eY?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>mc&&this._append`A${n},${n},0,${+(p>=sw)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function x5(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new rY(t)}function b5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qI(e){this._context=e}qI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function h0(e){return new qI(e)}function zI(e){return e[0]}function WI(e){return e[1]}function HI(e,t){var r=fr(!0),n=null,i=h0,a=null,s=x5(o);e=typeof e=="function"?e:e===void 0?zI:fr(e),t=typeof t=="function"?t:t===void 0?WI:fr(t);function o(c){var u,d=(c=b5(c)).length,f,p=!1,h;for(n==null&&(a=i(h=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,u,c),+t(f,u,c));if(h)return a=null,h+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:fr(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:fr(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:fr(!!c),o):r},o.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),o):i},o.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),o):n},o}function gg(e,t,r){var n=null,i=fr(!0),a=null,s=h0,o=null,c=x5(u);e=typeof e=="function"?e:e===void 0?zI:fr(+e),t=typeof t=="function"?t:fr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?WI:fr(+r);function u(f){var p,h,y,g=(f=b5(f)).length,x,v=!1,_,S=new Array(g),j=new Array(g);for(a==null&&(o=s(_=c())),p=0;p<=g;++p){if(!(p<g&&i(x=f[p],p,f))===v)if(v=!v)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=h;--y)o.point(S[y],j[y]);o.lineEnd(),o.areaEnd()}v&&(S[p]=+e(x,p,f),j[p]=+t(x,p,f),o.point(n?+n(x,p,f):S[p],r?+r(x,p,f):j[p]))}if(_)return o=null,_+""||null}function d(){return HI().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:fr(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:fr(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:fr(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:fr(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:fr(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:fr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:fr(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class VI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function nY(e){return new VI(e,!0)}function iY(e){return new VI(e,!1)}const w5={draw(e,t){const r=es(t/zv);e.moveTo(r,0),e.arc(0,0,r,0,f0)}},aY={draw(e,t){const r=es(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},KI=es(1/3),sY=KI*2,oY={draw(e,t){const r=es(t/sY),n=r*KI;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},lY={draw(e,t){const r=es(t),n=-r/2;e.rect(n,n,r,r)}},cY=.8908130915292852,GI=qv(zv/10)/qv(7*zv/10),uY=qv(f0/10)*GI,dY=-BI(f0/10)*GI,fY={draw(e,t){const r=es(t*cY),n=uY*r,i=dY*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=f0*a/5,o=BI(s),c=qv(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*i,c*n+o*i)}e.closePath()}},lb=es(3),hY={draw(e,t){const r=-es(t/(lb*3));e.moveTo(0,r*2),e.lineTo(-lb*r,-r),e.lineTo(lb*r,-r),e.closePath()}},fa=-.5,ha=es(3)/2,lw=1/es(12),pY=(lw/2+1)*3,mY={draw(e,t){const r=es(t/pY),n=r/2,i=r*lw,a=n,s=r*lw+r,o=-a,c=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,c),e.lineTo(fa*n-ha*i,ha*n+fa*i),e.lineTo(fa*a-ha*s,ha*a+fa*s),e.lineTo(fa*o-ha*c,ha*o+fa*c),e.lineTo(fa*n+ha*i,fa*i-ha*n),e.lineTo(fa*a+ha*s,fa*s-ha*a),e.lineTo(fa*o+ha*c,fa*c-ha*o),e.closePath()}};function gY(e,t){let r=null,n=x5(i);e=typeof e=="function"?e:fr(e||w5),t=typeof t=="function"?t:fr(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:fr(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:fr(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Wv(){}function Hv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function YI(e){this._context=e}YI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vY(e){return new YI(e)}function JI(e){this._context=e}JI.prototype={areaStart:Wv,areaEnd:Wv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Hv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yY(e){return new JI(e)}function XI(e){this._context=e}XI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Hv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xY(e){return new XI(e)}function ZI(e){this._context=e}ZI.prototype={areaStart:Wv,areaEnd:Wv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bY(e){return new ZI(e)}function T4(e){return e<0?-1:1}function I4(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(T4(a)+T4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function L4(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function cb(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function Vv(e){this._context=e}Vv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cb(this,this._t0,L4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,cb(this,L4(this,r=I4(this,e,t)),r);break;default:cb(this,this._t0,r=I4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function QI(e){this._context=new eL(e)}(QI.prototype=Object.create(Vv.prototype)).point=function(e,t){Vv.prototype.point.call(this,t,e)};function eL(e){this._context=e}eL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function wY(e){return new Vv(e)}function _Y(e){return new QI(e)}function tL(e){this._context=e}tL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=D4(e),i=D4(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function D4(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function jY(e){return new tL(e)}function p0(e,t){this._context=e,this._t=t}p0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function SY(e){return new p0(e,.5)}function NY(e){return new p0(e,0)}function kY(e){return new p0(e,1)}function Wc(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function cw(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function AY(e,t){return e[t]}function EY(e){const t=[];return t.key=e,t}function PY(){var e=fr([]),t=cw,r=Wc,n=AY;function i(a){var s=Array.from(e.apply(this,arguments),EY),o,c=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,d=b5(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:fr(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:fr(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?cw:typeof a=="function"?a:fr(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Wc,i):r},i}function CY(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Wc(e,t)}}function OY(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Wc(e,t)}}function TY(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,h=(f-p)/2,y=0;y<o;++y){var g=e[t[y]],x=g[n][1]||0,v=g[n-1][1]||0;h+=x-v}c+=f,u+=h*f}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Wc(e,t)}}var m0={},rL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(rL);var _5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(_5);var g0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(g0);var v0={},nL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(nL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nL,r=g0;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];u?f==="\\"&&o+1<s?(o++,c+=i[o]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,a.push(c),c=""):c+=f:f==="["?(d=!0,c&&(a.push(c),c="")):f==="."?c&&(a.push(c),c=""):c+=f,o++}return c&&a.push(c),a}e.toPath=n})(v0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL,r=_5,n=g0,i=v0;function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?a(o,i.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function s(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=a})(m0);var IY=m0.get;const Hc=Ts(IY);var LY=4;function vl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:LY,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ur(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,a,s)=>{var o=r[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+vl(o)+a:i+a},"")}var On=e=>e===0?0:e>0?1:-1,Es=e=>typeof e=="number"&&e!=+e,Vc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Be=e=>(typeof e=="number"||e instanceof Number)&&!Es(e),Ps=e=>Be(e)||typeof e=="string",DY=0,ip=e=>{var t=++DY;return"".concat(e||"").concat(t)},oi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Be(t)&&typeof t!="string")return n;var a;if(Vc(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return Es(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},iL=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function kr(e,t,r){return Be(e)&&Be(t)?vl(e+r*(t-e)):t}function aL(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Hc(n,t))===r)}var Ir=e=>e===null||typeof e>"u",Tp=e=>Ir(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Ai(e){return e!=null}function fu(){}var RY=["type","size","sizeType"];function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uw.apply(null,arguments)}function R4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function M4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R4(Object(r),!0).forEach(function(n){MY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MY(e,t,r){return(t=FY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BY(e,t){if(e==null)return{};var r,n,i=UY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function UY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sL={symbolCircle:w5,symbolCross:aY,symbolDiamond:oY,symbolSquare:lY,symbolStar:fY,symbolTriangle:hY,symbolWye:mY},qY=Math.PI/180,zY=e=>{var t="symbol".concat(Tp(e));return sL[t]||w5},WY=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*qY;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},HY=(e,t)=>{sL["symbol".concat(Tp(e))]=t},j5=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=BY(e,RY),a=M4(M4({},i),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var p=zY(s),h=gY().type(p).size(WY(r,n,s)),y=h();if(y!==null)return y},{className:c,cx:u,cy:d}=a,f=yi(a);return Be(u)&&Be(d)&&Be(r)?b.createElement("path",uw({},f,{className:Ut("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};j5.registerSymbol=HY;var oL=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,S5=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{v5(i)&&(n[i]=a=>r[i](r,a))}),n},VY=(e,t,r)=>n=>(e(t,r,n),null),Ip=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];v5(i)&&typeof a=="function"&&(n||(n={}),n[i]=VY(a,t,r))}),n};function F4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function KY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F4(Object(r),!0).forEach(function(n){GY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GY(e,t,r){return(t=YY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YY(e){var t=JY(e,"string");return typeof t=="symbol"?t:t+""}function JY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dn(e,t){var r=KY({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kv.apply(null,arguments)}function $4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(r),!0).forEach(function(n){ZY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZY(e,t,r){return(t=QY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QY(e){var t=eJ(e,"string");return typeof t=="symbol"?t:t+""}function eJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ma=32,tJ={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function rJ(e){var{data:t,iconType:r,inactiveColor:n}=e,i=ma/2,a=ma/6,s=ma/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline"){var u;return b.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:ma,y2:i,className:"recharts-legend-icon"})}if(c==="line")return b.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(ma,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return b.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(ma/8,"h").concat(ma,"v").concat(ma*3/4,"h").concat(-ma,"z"),className:"recharts-legend-icon"});if(b.isValidElement(t.legendIcon)){var d=XY({},t);return delete d.legendIcon,b.cloneElement(t.legendIcon,d)}return b.createElement(j5,{fill:o,cx:i,cy:i,size:ma,sizeType:"diameter",type:c})}function nJ(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:s}=e,o={x:0,y:0,width:ma,height:ma},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var p=d.formatter||i,h=Ut({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var y=d.inactive?a:d.color,g=p?p(d.value,d,f):d.value;return b.createElement("li",Kv({className:h,style:c,key:"legend-item-".concat(f)},Ip(e,d,f)),b.createElement(y5,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(g," legend icon")},b.createElement(rJ,{data:d,iconType:s,inactiveColor:a})),b.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g))})}var iJ=e=>{var t=dn(e,tJ),{payload:r,layout:n,align:i}=t;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return b.createElement("ul",{className:"recharts-default-legend",style:a},b.createElement(nJ,Kv({},t,{payload:r})))},lL={},cL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s,a,r);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(cL);var uL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...i){return r.apply(this,i.slice(0,n))}}e.ary=t})(uL);var N5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(N5);var dL={},y0={},fL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(fL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fL;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(y0);var hL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(hL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y0,r=hL;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(dL);var pL={},mL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m0;function r(n){return function(i){return t.get(i,n)}}e.property=r})(mL);var gL={},k5={},vL={},A5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(A5);var E5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(E5);var P5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(P5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5,r=E5,n=P5;function i(d,f,p){return typeof p!="function"?i(d,f,()=>{}):a(d,f,function h(y,g,x,v,_,S){const j=p(y,g,x,v,_,S);return j!==void 0?!!j:a(y,g,h,S)},new Map)}function a(d,f,p,h){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,p,h);case"function":return Object.keys(f).length>0?a(d,{...f},p,h):n.isEqualsSameValueZero(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.isEqualsSameValueZero(d,f)}}function s(d,f,p,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,p,h);if(f instanceof Map)return o(d,f,p,h);if(f instanceof Set)return u(d,f,p,h);const y=Object.keys(f);if(d==null||r.isPrimitive(d))return y.length===0;if(y.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let g=0;g<y.length;g++){const x=y[g];if(!r.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!p(d[x],f[x],x,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function o(d,f,p,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[y,g]of f.entries()){const x=d.get(y);if(p(x,g,y,d,f,h)===!1)return!1}return!0}function c(d,f,p,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const y=new Set;for(let g=0;g<f.length;g++){const x=f[g];let v=!1;for(let _=0;_<d.length;_++){if(y.has(_))continue;const S=d[_];let j=!1;if(p(S,x,g,d,f,h)&&(j=!0),j){y.add(_),v=!0;break}}if(!v)return!1}return!0}function u(d,f,p,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],p,h):!1}e.isMatchWith=i,e.isSetMatch=u})(vL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vL;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(k5);var yL={},C5={},xL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(xL);var x0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(x0);var O5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",h="[object Object]",y="[object Error]",g="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",_="[object Uint16Array]",S="[object Uint32Array]",j="[object BigUint64Array]",N="[object Int8Array]",A="[object Int16Array]",I="[object Int32Array]",E="[object BigInt64Array]",C="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=g,e.dateTag=o,e.errorTag=y,e.float32ArrayTag=C,e.float64ArrayTag=D,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=I,e.int8ArrayTag=N,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=_,e.uint32ArrayTag=S,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=v})(O5);var bL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(bL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xL,r=x0,n=O5,i=E5,a=bL;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,p,h=new Map,y=void 0){const g=y==null?void 0:y(d,f,p,h);if(g!==void 0)return g;if(i.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const x=new Array(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=o(d[v],v,p,h,y);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;h.set(d,x);for(const[v,_]of d)x.set(v,o(_,v,p,h,y));return x}if(d instanceof Set){const x=new Set;h.set(d,x);for(const v of d)x.add(o(v,void 0,p,h,y));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=o(d[v],v,p,h,y);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,x),c(x,d,p,h,y),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return h.set(d,x),c(x,d,p,h,y),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return h.set(d,x),c(x,d,p,h,y),x}if(d instanceof Error){const x=new d.constructor;return h.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,p,h,y),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return h.set(d,x),c(x,d,p,h,y),x}if(d instanceof Number){const x=new Number(d.valueOf());return h.set(d,x),c(x,d,p,h,y),x}if(d instanceof String){const x=new String(d.valueOf());return h.set(d,x),c(x,d,p,h,y),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return h.set(d,x),c(x,d,p,h,y),x}return d}function c(d,f,p=d,h,y){const g=[...Object.keys(f),...t.getSymbols(f)];for(let x=0;x<g.length;x++){const v=g[x],_=Object.getOwnPropertyDescriptor(d,v);(_==null||_.writable)&&(d[v]=o(f[v],v,p,h,y))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=c})(C5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(yL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5,r=yL;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(gL);var wL={},_L={},jL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5,r=x0,n=O5;function i(a,s){return t.cloneDeepWith(a,(o,c,u,d)=>{const f=s==null?void 0:s(o,c,u,d);if(f!==void 0)return f;if(typeof a=="object"){if(r.getTag(a)===n.objectTag&&typeof a.constructor!="function"){const p={};return d.set(a,p),t.copyProperties(p,a,u,d),p}switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(p,a),p}case n.argumentsTag:{const p={};return t.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}}})}e.cloneDeepWith=i})(jL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jL;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(_L);var SL={},T5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(T5);var NL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x0;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(NL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_5,r=T5,n=NL,i=v0;function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(SL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5,r=g0,n=_L,i=m0,a=SL;function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=i.get(u,o);return d===void 0?a.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=s})(wL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5,r=mL,n=gL,i=wL;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(pL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cL,r=uL,n=N5,i=dL,a=pL;function s(o,c=n.identity){return i.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.ary(a.iteratee(c),1)):[]}e.uniqBy=s})(lL);var aJ=lL.uniqBy;const B4=Ts(aJ);function kL(e,t,r){return t===!0?B4(e,r):typeof t=="function"?B4(e,t):e}var AL={exports:{}},EL={},PL={exports:{}},CL={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=b;function sJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oJ=typeof Object.is=="function"?Object.is:sJ,lJ=Rd.useState,cJ=Rd.useEffect,uJ=Rd.useLayoutEffect,dJ=Rd.useDebugValue;function fJ(e,t){var r=t(),n=lJ({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return uJ(function(){i.value=r,i.getSnapshot=t,ub(i)&&a({inst:i})},[e,r,t]),cJ(function(){return ub(i)&&a({inst:i}),e(function(){ub(i)&&a({inst:i})})},[e]),dJ(r),r}function ub(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!oJ(e,r)}catch{return!0}}function hJ(e,t){return t()}var pJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hJ:fJ;CL.useSyncExternalStore=Rd.useSyncExternalStore!==void 0?Rd.useSyncExternalStore:pJ;PL.exports=CL;var mJ=PL.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0=b,gJ=mJ;function vJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yJ=typeof Object.is=="function"?Object.is:vJ,xJ=gJ.useSyncExternalStore,bJ=b0.useRef,wJ=b0.useEffect,_J=b0.useMemo,jJ=b0.useDebugValue;EL.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=bJ(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=_J(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),i!==void 0&&s.hasValue){var y=s.value;if(i(y,h))return f=y}return f=h}if(y=f,yJ(d,h))return y;var g=n(h);return i!==void 0&&i(y,g)?(d=h,y):(d=h,f=g)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,i]);var o=xJ(e,a[0],a[1]);return wJ(function(){s.hasValue=!0,s.value=o},[o]),jJ(o),o};AL.exports=EL;var SJ=AL.exports,I5=b.createContext(null),NJ=e=>e,mr=()=>{var e=b.useContext(I5);return e?e.store.dispatch:NJ},Zg=()=>{},kJ=()=>Zg,AJ=(e,t)=>e===t;function Ve(e){var t=b.useContext(I5),r=b.useMemo(()=>t?n=>{if(n!=null)return e(n)}:Zg,[t,e]);return SJ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:kJ,t?t.store.getState:Zg,t?t.store.getState:Zg,r,AJ)}function EJ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function PJ(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function CJ(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var U4=e=>Array.isArray(e)?e:[e];function OJ(e){const t=Array.isArray(e[0])?e[0]:e;return CJ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function TJ(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var IJ=class{constructor(e){this.value=e}deref(){return this.value}},LJ=typeof WeakRef<"u"?WeakRef:IJ,DJ=0,q4=1;function vg(){return{s:DJ,v:void 0,o:null,p:null}}function OL(e,t={}){let r=vg();const{resultEqualityCheck:n}=t;let i,a=0;function s(){var f;let o=r;const{length:c}=arguments;for(let p=0,h=c;p<h;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const x=g.get(y);x===void 0?(o=vg(),g.set(y,o)):o=x}else{let g=o.p;g===null&&(o.p=g=new Map);const x=g.get(y);x===void 0?(o=vg(),g.set(y,o)):o=x}}const u=o;let d;if(o.s===q4)d=o.v;else if(d=e.apply(null,arguments),a++,n){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new LJ(d):d}return u.s=q4,u.v=d,d}return s.clearCache=()=>{r=vg(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function RJ(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),EJ(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:h=OL,argsMemoizeOptions:y=[]}=d,g=U4(p),x=U4(y),v=OJ(i),_=f(function(){return a++,u.apply(null,arguments)},...g),S=h(function(){s++;const N=TJ(v,arguments);return o=_.apply(null,N),o},...x);return Object.assign(S,{resultFunc:u,memoizedResultFunc:_,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var ye=RJ(OL),MJ=Object.assign((e,t=ye)=>{PJ(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,c)=>(s[r[c]]=o,s),{}))},{withTypes:()=>MJ}),TL={},IL={},LL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(LL);var DL={},L5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(L5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(DL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LL,r=DL,n=v0;function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(h=>String(h));const u=(h,y)=>{let g=h;for(let x=0;x<y.length&&g!=null;++x)g=g[y[x]];return g},d=(h,y)=>y==null||h==null?y:typeof h=="object"&&"key"in h?Object.hasOwn(y,h.key)?y[h.key]:u(y,h.path):typeof h=="function"?h(y):Array.isArray(h)?u(y,h):typeof y=="object"?y[h]:y,f=s.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return a.map(h=>({original:h,criteria:f.map(y=>d(y,h))})).slice().sort((h,y)=>{for(let g=0;g<f.length;g++){const x=t.compareValues(h.criteria[g],y.criteria[g],o[g]);if(x!==0)return x}return 0}).map(h=>h.original)}e.orderBy=i})(IL);var RL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<a?s(d,c+1):i.push(d)}};return s(r,0),i}e.flatten=t})(RL);var D5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T5,r=y0,n=A5,i=P5;function a(s,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}e.isIterateeCall=a})(D5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IL,r=RL,n=D5;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(TL);var FJ=TL.sortBy;const w0=Ts(FJ);var ML=e=>e.legend.settings,$J=e=>e.legend.size,BJ=e=>e.legend.payload,UJ=ye([BJ,ML],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?w0(n,r):n});function qJ(){return Ve(UJ)}var yg=1;function FL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),n=b.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>yg||Math.abs(s.left-t.left)>yg||Math.abs(s.top-t.top)>yg||Math.abs(s.width-t.width)>yg)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Wn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var zJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",z4=zJ,db=()=>Math.random().toString(36).substring(7).split("").join("."),WJ={INIT:`@@redux/INIT${db()}`,REPLACE:`@@redux/REPLACE${db()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${db()}`},Gv=WJ;function R5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function $L(e,t,r){if(typeof e!="function")throw new Error(Wn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Wn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Wn(1));return r($L)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((x,v)=>{s.set(v,x)}))}function d(){if(c)throw new Error(Wn(3));return i}function f(x){if(typeof x!="function")throw new Error(Wn(4));if(c)throw new Error(Wn(5));let v=!0;u();const _=o++;return s.set(_,x),function(){if(v){if(c)throw new Error(Wn(6));v=!1,u(),s.delete(_),a=null}}}function p(x){if(!R5(x))throw new Error(Wn(7));if(typeof x.type>"u")throw new Error(Wn(8));if(typeof x.type!="string")throw new Error(Wn(17));if(c)throw new Error(Wn(9));try{c=!0,i=n(i,x)}finally{c=!1}return(a=s).forEach(_=>{_()}),x}function h(x){if(typeof x!="function")throw new Error(Wn(10));n=x,p({type:Gv.REPLACE})}function y(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Wn(11));function _(){const j=v;j.next&&j.next(d())}return _(),{unsubscribe:x(_)}},[z4](){return this}}}return p({type:Gv.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:h,[z4]:y}}function HJ(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Gv.INIT})>"u")throw new Error(Wn(12));if(typeof r(void 0,{type:Gv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Wn(13))})}function BL(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{HJ(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],p=r[f],h=s[f],y=p(h,o);if(typeof y>"u")throw o&&o.type,new Error(Wn(14));u[f]=y,c=c||y!==h}return c=c||n.length!==Object.keys(s).length,c?u:s}}function Yv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function VJ(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(Wn(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=e.map(c=>c(s));return a=Yv(...o)(i.dispatch),{...i,dispatch:a}}}function UL(e){return R5(e)&&"type"in e&&typeof e.type=="string"}var qL=Symbol.for("immer-nothing"),W4=Symbol.for("immer-draftable"),xi=Symbol.for("immer-state");function za(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yi=Object,Md=Yi.getPrototypeOf,Jv="constructor",_0="prototype",dw="configurable",Xv="enumerable",Qg="writable",ap="value",_o=e=>!!e&&!!e[xi];function Xa(e){var t;return e?zL(e)||S0(e)||!!e[W4]||!!((t=e[Jv])!=null&&t[W4])||N0(e)||k0(e):!1}var KJ=Yi[_0][Jv].toString(),H4=new WeakMap;function zL(e){if(!e||!M5(e))return!1;const t=Md(e);if(t===null||t===Yi[_0])return!0;const r=Yi.hasOwnProperty.call(t,Jv)&&t[Jv];if(r===Object)return!0;if(!Ju(r))return!1;let n=H4.get(r);return n===void 0&&(n=Function.toString.call(r),H4.set(r,n)),n===KJ}function j0(e,t,r=!0){Lp(e)===0?(r?Reflect.ownKeys(e):Yi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Lp(e){const t=e[xi];return t?t.type_:S0(e)?1:N0(e)?2:k0(e)?3:0}var V4=(e,t,r=Lp(e))=>r===2?e.has(t):Yi[_0].hasOwnProperty.call(e,t),fw=(e,t,r=Lp(e))=>r===2?e.get(t):e[t],Zv=(e,t,r,n=Lp(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function GJ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var S0=Array.isArray,N0=e=>e instanceof Map,k0=e=>e instanceof Set,M5=e=>typeof e=="object",Ju=e=>typeof e=="function",fb=e=>typeof e=="boolean";function YJ(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var so=e=>e.copy_||e.base_,F5=e=>e.modified_?e.copy_:e.base_;function hw(e,t){if(N0(e))return new Map(e);if(k0(e))return new Set(e);if(S0(e))return Array[_0].slice.call(e);const r=zL(e);if(t===!0||t==="class_only"&&!r){const n=Yi.getOwnPropertyDescriptors(e);delete n[xi];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[Qg]===!1&&(o[Qg]=!0,o[dw]=!0),(o.get||o.set)&&(n[s]={[dw]:!0,[Qg]:!0,[Xv]:o[Xv],[ap]:e[s]})}return Yi.create(Md(e),n)}else{const n=Md(e);if(n!==null&&r)return{...e};const i=Yi.create(n);return Yi.assign(i,e)}}function $5(e,t=!1){return A0(e)||_o(e)||!Xa(e)||(Lp(e)>1&&Yi.defineProperties(e,{set:xg,add:xg,clear:xg,delete:xg}),Yi.freeze(e),t&&j0(e,(r,n)=>{$5(n,!0)},!1)),e}function JJ(){za(2)}var xg={[ap]:JJ};function A0(e){return e===null||!M5(e)?!0:Yi.isFrozen(e)}var Qv="MapSet",pw="Patches",K4="ArrayMethods",WL={};function Kc(e){const t=WL[e];return t||za(0,e),t}var G4=e=>!!WL[e],sp,HL=()=>sp,XJ=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:G4(Qv)?Kc(Qv):void 0,arrayMethodsPlugin_:G4(K4)?Kc(K4):void 0});function Y4(e,t){t&&(e.patchPlugin_=Kc(pw),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mw(e){gw(e),e.drafts_.forEach(ZJ),e.drafts_=null}function gw(e){e===sp&&(sp=e.parent_)}var J4=e=>sp=XJ(sp,e);function ZJ(e){const t=e[xi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function X4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[xi].modified_&&(mw(t),za(4)),Xa(e)&&(e=Z4(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[xi].base_,e,t)}else e=Z4(t,r);return QJ(t,e,!0),mw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qL?e:void 0}function Z4(e,t){if(A0(t))return t;const r=t[xi];if(!r)return ey(t,e.handledSet_,e);if(!E0(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);GL(r,e)}return r.copy_}function QJ(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$5(t,r)}function VL(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var E0=(e,t)=>e.scope_===t,eX=[];function KL(e,t,r,n){const i=so(e),a=e.type_;if(n!==void 0&&fw(i,n,a)===t){Zv(i,n,r,a);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;j0(i,(c,u)=>{if(_o(u)){const d=o.get(u)||[];d.push(c),o.set(u,d)}})}const s=e.draftLocations_.get(t)??eX;for(const o of s)Zv(i,o,r,a)}function tX(e,t,r){e.callbacks_.push(function(i){var o;const a=t;if(!a||!E0(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=F5(a);KL(e,a.draft_??a,s,r),GL(a,i)})}function GL(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}VL(e)}}function rX(e,t,r){const{scope_:n}=e;if(_o(r)){const i=r[xi];E0(i,n)&&i.callbacks_.push(function(){ev(e);const s=F5(i);KL(e,r,s,t)})}else Xa(r)&&e.callbacks_.push(function(){const a=so(e);e.type_===3?a.has(r)&&ey(r,n.handledSet_,n):fw(a,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&ey(fw(e.copy_,t,e.type_),n.handledSet_,n)})}function ey(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||_o(e)||t.has(e)||!Xa(e)||A0(e)||(t.add(e),j0(e,(n,i)=>{if(_o(i)){const a=i[xi];if(E0(a,r)){const s=F5(a);Zv(e,n,s,e.type_),VL(a)}}else Xa(i)&&ey(i,t,r)})),e}function nX(e,t){const r=S0(e),n={type_:r?1:0,scope_:t?t.scope_:HL(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=ty;r&&(i=[n],a=op);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var ty={get(e,t){if(t===xi)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=so(e);if(!V4(i,t,e.type_))return iX(e,i,t);const a=i[t];if(e.finalized_||!Xa(a)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&YJ(t))return a;if(a===hb(e.base_,t)){ev(e);const s=e.type_===1?+t:t,o=yw(e.scope_,a,e,s);return e.copy_[s]=o}return a},has(e,t){return t in so(e)},ownKeys(e){return Reflect.ownKeys(so(e))},set(e,t,r){const n=YL(so(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=hb(so(e),t),a=i==null?void 0:i[xi];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(GJ(r,i)&&(r!==void 0||V4(e.base_,t,e.type_)))return!0;ev(e),vw(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),rX(e,t,r)),!0},deleteProperty(e,t){return ev(e),hb(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),vw(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=so(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Qg]:!0,[dw]:e.type_!==1||t!=="length",[Xv]:n[Xv],[ap]:r[t]}},defineProperty(){za(11)},getPrototypeOf(e){return Md(e.base_)},setPrototypeOf(){za(12)}},op={};for(let e in ty){let t=ty[e];op[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}op.deleteProperty=function(e,t){return op.set.call(this,e,t,void 0)};op.set=function(e,t,r){return ty.set.call(this,e[0],t,r,e[0])};function hb(e,t){const r=e[xi];return(r?so(r):e)[t]}function iX(e,t,r){var i;const n=YL(t,r);return n?ap in n?n[ap]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function YL(e,t){if(!(t in e))return;let r=Md(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Md(r)}}function vw(e){e.modified_||(e.modified_=!0,e.parent_&&vw(e.parent_))}function ev(e){e.copy_||(e.assigned_=new Map,e.copy_=hw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var aX=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Ju(r)&&!Ju(n)){const s=n;n=r;const o=this;return function(u=s,...d){return o.produce(u,f=>n.call(this,f,...d))}}Ju(n)||za(6),i!==void 0&&!Ju(i)&&za(7);let a;if(Xa(r)){const s=J4(this),o=yw(s,r,void 0);let c=!0;try{a=n(o),c=!1}finally{c?mw(s):gw(s)}return Y4(s,i),X4(a,s)}else if(!r||!M5(r)){if(a=n(r),a===void 0&&(a=r),a===qL&&(a=void 0),this.autoFreeze_&&$5(a,!0),i){const s=[],o=[];Kc(pw).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else za(1,r)},this.produceWithPatches=(r,n)=>{if(Ju(r))return(o,...c)=>this.produceWithPatches(o,u=>r(u,...c));let i,a;return[this.produce(r,n,(o,c)=>{i=o,a=c}),i,a]},fb(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),fb(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),fb(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Xa(t)||za(8),_o(t)&&(t=Ga(t));const r=J4(this),n=yw(r,t,void 0);return n[xi].isManual_=!0,gw(r),n}finishDraft(t,r){const n=t&&t[xi];(!n||!n.isManual_)&&za(9);const{scope_:i}=n;return Y4(i,r),X4(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const i=Kc(pw).applyPatches_;return _o(t)?i(t,r):this.produce(t,a=>i(a,r))}};function yw(e,t,r,n){const[i,a]=N0(t)?Kc(Qv).proxyMap_(t,r):k0(t)?Kc(Qv).proxySet_(t,r):nX(t,r);return((r==null?void 0:r.scope_)??HL()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?tX(r,a,n):a.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Ga(e){return _o(e)||za(10,e),JL(e)}function JL(e){if(!Xa(e)||A0(e))return e;const t=e[xi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=hw(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=hw(e,!0);return j0(r,(i,a)=>{Zv(r,i,JL(a))},n),t&&(t.finalized_=!1),r}var sX=new aX,XL=sX.produce;function ZL(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var oX=ZL(),lX=ZL,cX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yv:Yv.apply(null,arguments)};function Sa(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Xi(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>UL(n)&&n.type===e,r}var QL=class fh extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,fh.prototype)}static get[Symbol.species](){return fh}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new fh(...t[0].concat(this)):new fh(...t.concat(this))}};function Q4(e){return Xa(e)?XL(e,()=>{}):e}function bg(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function uX(e){return typeof e=="boolean"}var dX=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new QL;return r&&(uX(r)?s.push(oX):s.push(lX(r.extraArgument))),s},e8="RTK_autoBatch",Sr=()=>e=>({payload:e,meta:{[e8]:!0}}),eE=e=>t=>{setTimeout(t,e)},t8=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:eE(10):e.type==="callback"?e.queueNotification:eE(e.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),p=n.subscribe(f);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[e8]),a=!i,a&&(s||(s=!0,c(u))),n.dispatch(d)}finally{i=!0}}})},fX=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new QL(e);return n&&i.push(t8(typeof n=="object"?n:void 0)),i};function hX(e){const t=dX(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(R5(r))o=BL(r);else throw new Error(Xi(1));let c;typeof n=="function"?c=n(t):c=t();let u=Yv;i&&(u=cX({trace:!1,...typeof i=="object"&&i}));const d=VJ(...c),f=fX(d);let p=typeof s=="function"?s(f):f();const h=u(...p);return $L(o,a,h)}function r8(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Xi(28));if(o in t)throw new Error(Xi(29));return t[o]=s,i},addAsyncThunk(a,s){return s.pending&&(t[a.pending.type]=s.pending),s.rejected&&(t[a.rejected.type]=s.rejected),s.fulfilled&&(t[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function pX(e){return typeof e=="function"}function mX(e,t){let[r,n,i]=r8(t),a;if(pX(e))a=()=>Q4(e());else{const o=Q4(e);a=()=>o}function s(o=a(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,f)=>{if(f)if(_o(d)){const h=f(d,c);return h===void 0?d:h}else{if(Xa(d))return XL(d,p=>f(p,c));{const p=f(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},o)}return s.getInitialState=a,s}var gX="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vX=(e=21)=>{let t="",r=e;for(;r--;)t+=gX[Math.random()*64|0];return t},yX=Symbol.for("rtk-slice-createasyncthunk");function xX(e,t){return`${e}/${t}`}function bX({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[yX];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Xi(11));const o=(typeof i.reducers=="function"?i.reducers(_X()):i.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,N){const A=typeof j=="string"?j:j.type;if(!A)throw new Error(Xi(12));if(A in u.sliceCaseReducersByType)throw new Error(Xi(13));return u.sliceCaseReducersByType[A]=N,d},addMatcher(j,N){return u.sliceMatchers.push({matcher:j,reducer:N}),d},exposeAction(j,N){return u.actionCreators[j]=N,d},exposeCaseReducer(j,N){return u.sliceCaseReducersByName[j]=N,d}};c.forEach(j=>{const N=o[j],A={reducerName:j,type:xX(a,j),createNotation:typeof i.reducers=="function"};SX(N)?kX(A,N,d,t):jX(A,N,d)});function f(){const[j={},N=[],A=void 0]=typeof i.extraReducers=="function"?r8(i.extraReducers):[i.extraReducers],I={...j,...u.sliceCaseReducersByType};return mX(i.initialState,E=>{for(let C in I)E.addCase(C,I[C]);for(let C of u.sliceMatchers)E.addMatcher(C.matcher,C.reducer);for(let C of N)E.addMatcher(C.matcher,C.reducer);A&&E.addDefaultCase(A)})}const p=j=>j,h=new Map,y=new WeakMap;let g;function x(j,N){return g||(g=f()),g(j,N)}function v(){return g||(g=f()),g.getInitialState()}function _(j,N=!1){function A(E){let C=E[j];return typeof C>"u"&&N&&(C=bg(y,A,v)),C}function I(E=p){const C=bg(h,N,()=>new WeakMap);return bg(C,E,()=>{const D={};for(const[T,O]of Object.entries(i.selectors??{}))D[T]=wX(O,E,()=>bg(y,E,v),N);return D})}return{reducerPath:j,getSelectors:I,get selectors(){return I(A)},selectSlice:A}}const S={name:a,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,..._(s),injectInto(j,{reducerPath:N,...A}={}){const I=N??s;return j.inject({reducerPath:I,reducer:x},A),{...S,..._(I,!0)}}};return S}}function wX(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var Ii=bX();function _X(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function jX({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!NX(n))throw new Error(Xi(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?Sa(e,s):Sa(e))}function SX(e){return e._reducerDefinitionType==="asyncThunk"}function NX(e){return e._reducerDefinitionType==="reducerWithPrepare"}function kX({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Xi(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:d}=r,f=i(e,a,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:s||wg,pending:o||wg,rejected:c||wg,settled:u||wg})}function wg(){}var AX="task",n8="listener",i8="completed",B5="cancelled",EX=`task-${B5}`,PX=`task-${i8}`,xw=`${n8}-${B5}`,CX=`${n8}-${i8}`,P0=class{constructor(e){Vt(this,"name","TaskAbortError");Vt(this,"message");this.code=e,this.message=`${AX} ${B5} (reason: ${e})`}},U5=(e,t)=>{if(typeof e!="function")throw new TypeError(Xi(32))},ry=()=>{},a8=(e,t=ry)=>(e.catch(t),e),s8=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Tc=e=>{if(e.aborted)throw new P0(e.reason)};function o8(e,t){let r=ry;return new Promise((n,i)=>{const a=()=>i(new P0(e.reason));if(e.aborted){a();return}r=s8(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=ry})}var OX=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof P0?"cancelled":"rejected",error:r}}finally{t==null||t()}},ny=e=>t=>a8(o8(e,t).then(r=>(Tc(e),r))),l8=e=>{const t=ny(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Nd}=Object,tE={},C0="listenerMiddleware",TX=(e,t)=>{const r=n=>s8(e,()=>n.abort(e.reason));return(n,i)=>{U5(n);const a=new AbortController;r(a);const s=OX(async()=>{Tc(e),Tc(a.signal);const o=await n({pause:ny(a.signal),delay:l8(a.signal),signal:a.signal});return Tc(a.signal),o},()=>a.abort(PX));return i!=null&&i.autoJoin&&t.push(s.catch(ry)),{result:ny(e)(s),cancel(){a.abort(EX)}}}},IX=(e,t)=>{const r=async(n,i)=>{Tc(t);let a=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});a=()=>{d(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await o8(t,Promise.race(o));return Tc(t),c}finally{a()}};return(n,i)=>a8(r(n,i))},c8=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=Sa(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Xi(21));return U5(a),{predicate:i,type:t,effect:a}},u8=Nd(e=>{const{type:t,predicate:r,effect:n}=c8(e);return{id:vX(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Xi(22))}}},{withTypes:()=>u8}),rE=(e,t)=>{const{type:r,effect:n,predicate:i}=c8(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},bw=e=>{e.pending.forEach(t=>{t.abort(xw)})},LX=(e,t)=>()=>{for(const r of t.keys())bw(r);e.clear()},nE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},d8=Nd(Sa(`${C0}/add`),{withTypes:()=>d8}),DX=Sa(`${C0}/removeAll`),f8=Nd(Sa(`${C0}/remove`),{withTypes:()=>f8}),RX=(...e)=>{console.error(`${C0}/error`,...e)},Dp=(e={})=>{const t=new Map,r=new Map,n=h=>{const y=r.get(h)??0;r.set(h,y+1)},i=h=>{const y=r.get(h)??1;y===1?r.delete(h):r.set(h,y-1)},{extra:a,onError:s=RX}=e;U5(s);const o=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),y=>{h.unsubscribe(),y!=null&&y.cancelActive&&bw(h)}),c=h=>{const y=rE(t,h)??u8(h);return o(y)};Nd(c,{withTypes:()=>c});const u=h=>{const y=rE(t,h);return y&&(y.unsubscribe(),h.cancelActive&&bw(y)),!!y};Nd(u,{withTypes:()=>u});const d=async(h,y,g,x)=>{const v=new AbortController,_=IX(c,v.signal),S=[];try{h.pending.add(v),n(h),await Promise.resolve(h.effect(y,Nd({},g,{getOriginalState:x,condition:(j,N)=>_(j,N).then(Boolean),take:_,delay:l8(v.signal),pause:ny(v.signal),extra:a,signal:v.signal,fork:TX(v.signal,S),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((j,N,A)=>{j!==v&&(j.abort(xw),A.delete(j))})},cancel:()=>{v.abort(xw),h.pending.delete(v)},throwIfCancelled:()=>{Tc(v.signal)}})))}catch(j){j instanceof P0||nE(s,j,{raisedBy:"effect"})}finally{await Promise.all(S),v.abort(CX),i(h),h.pending.delete(v)}},f=LX(t,r);return{middleware:h=>y=>g=>{if(!UL(g))return y(g);if(d8.match(g))return c(g.payload);if(DX.match(g)){f();return}if(f8.match(g))return u(g.payload);let x=h.getState();const v=()=>{if(x===tE)throw new Error(Xi(23));return x};let _;try{if(_=y(g),t.size>0){const S=h.getState(),j=Array.from(t.values());for(const N of j){let A=!1;try{A=N.predicate(g,S,x)}catch(I){A=!1,nE(s,I,{raisedBy:"predicate"})}A&&d(N,g,h,v)}}}finally{x=tE}return _},startListening:c,stopListening:u,clearListeners:f}};function Xi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var MX={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},h8=Ii({name:"chartLayout",initialState:MX,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:FX,setLayout:$X,setChartSize:BX,setScale:UX}=h8.actions,qX=h8.reducer;function p8(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Rt(e){return Number.isFinite(e)}function Cs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function iE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(r),!0).forEach(function(n){zX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zX(e,t,r){return(t=WX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WX(e){var t=HX(e,"string");return typeof t=="symbol"?t:t+""}function HX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rr(e,t,r){return Ir(e)||Ir(t)?r:Ps(t)?Hc(e,t,r):typeof t=="function"?t(e):r}var VX=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&Be(e[a]))return dd(dd({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&Be(e[s]))return dd(dd({},e),{},{[s]:e[s]+(i||0)})}return e},Oo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",m8=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},g8=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:p,axisType:h}=e;if(!s)return null;var y=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,g=i==="category"&&s.bandwidth?s.bandwidth()/y:0;if(g=h==="angleAxis"&&a&&a.length>=2?On(a[0]-a[1])*2*g:g,f||p){var x=(f||p||[]).map((v,_)=>{var S=n?n.indexOf(v):v,j=s.map(S);return Rt(j)?{coordinate:j+g,value:v,offset:g,index:_}:null}).filter(Ai);return x}return c&&u?u.map((v,_)=>{var S=s.map(v);return Rt(S)?{coordinate:S+g,value:v,index:_,offset:g}:null}).filter(Ai):s.ticks&&d!=null?s.ticks(d).map((v,_)=>{var S=s.map(v);return Rt(S)?{coordinate:S+g,value:v,index:_,offset:g}:null}).filter(Ai):s.domain().map((v,_)=>{var S=s.map(v);return Rt(S)?{coordinate:S+g,value:n?n[v]:v,index:_,offset:g}:null}).filter(Ai)},KX=(e,t)=>{if(!t||t.length!==2||!Be(t[0])||!Be(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Be(e[0])||e[0]<r)&&(i[0]=r),(!Be(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},GX=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var a=0,s=0,o=0;o<r;++o){var c=e[o],u=c==null?void 0:c[i];if(u!=null){var d=u[1],f=u[0],p=Es(d)?f:d;p>=0?(u[0]=a,a+=p,u[1]=a):(u[0]=s,s+=p,u[1]=s)}}}},YX=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var a=0,s=0;s<r;++s){var o=e[s],c=o==null?void 0:o[i];if(c!=null){var u=Es(c[1])?c[0]:c[1];u>=0?(c[0]=a,a+=u,c[1]=a):(c[0]=0,c[1]=0)}}}},JX={sign:GX,expand:CY,none:Wc,silhouette:OY,wiggle:TY,positive:YX},XX=(e,t,r)=>{var n,i=(n=JX[r])!==null&&n!==void 0?n:Wc,a=PY().keys(t).value((o,c)=>Number(rr(o,c,0))).order(cw).offset(i),s=a(e);return s.forEach((o,c)=>{o.forEach((u,d)=>{var f=rr(e[d],t[c],0);Array.isArray(f)&&f.length===2&&Be(f[0])&&Be(f[1])&&(u[0]=f[0],u[1]=f[1])})}),s};function ZX(e){return e==null?void 0:String(e)}function aE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ir(i[t.dataKey])){var o=aL(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r!=null&&r[a]?r[a].coordinate+n/2:null}var c=rr(i,Ir(s)?t.dataKey:s),u=t.scale.map(c);return Be(u)?u:null}var sE=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=rr(a,t.dataKey,t.scale.domain()[s]);if(Ir(o))return null;var c=t.scale.map(o);return Be(c)?c-i/2+n:null},QX=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},eZ=e=>{var t=e.flat(2).filter(Be);return[Math.min(...t),Math.max(...t)]},tZ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],rZ=(e,t,r)=>{if(e!=null)return tZ(Object.keys(e).reduce((n,i)=>{var a=e[i];if(!a)return n;var{stackedData:s}=a,o=s.reduce((c,u)=>{var d=p8(u,t,r),f=eZ(d);return!Rt(f[0])||!Rt(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},oE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fd=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=w0(t,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),a)}return a===1/0?0:a}return r?void 0:0};function cE(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return dd(dd({},t),{},{dataKey:r,payload:n,value:i,name:a})}function ef(e,t){if(e)return String(e);if(typeof t=="string")return t}var nZ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},iZ=(e,t)=>t==="centric"?e.angle:e.radius,To=e=>e.layout.width,Io=e=>e.layout.height,aZ=e=>e.layout.scale,v8=e=>e.layout.margin,O0=ye(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),T0=ye(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),y8="data-recharts-item-index",x8="data-recharts-item-id",Rp=60;function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(r),!0).forEach(function(n){sZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sZ(e,t,r){return(t=oZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oZ(e){var t=lZ(e,"string");return typeof t=="symbol"?t:t+""}function lZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cZ=e=>e.brush.height;function uZ(e){var t=T0(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Rp;return r+i}return r},0)}function dZ(e){var t=T0(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Rp;return r+i}return r},0)}function fZ(e){var t=O0(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function hZ(e){var t=O0(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var _n=ye([To,Io,v8,cZ,uZ,dZ,fZ,hZ,ML,$J],(e,t,r,n,i,a,s,o,c,u)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},p=_g(_g({},f),d),h=p.bottom;p.bottom+=n,p=VX(p,c,u);var y=e-p.left-p.right,g=t-p.top-p.bottom;return _g(_g({brushBottom:h},p),{},{width:Math.max(y,0),height:Math.max(g,0)})}),pZ=ye(_n,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),q5=ye(To,Io,(e,t)=>({x:0,y:0,width:e,height:t})),mZ=b.createContext(null),ci=()=>b.useContext(mZ)!=null,I0=e=>e.brush,L0=ye([I0,_n,v8],(e,t,r)=>({height:e.height,x:Be(e.x)?e.x:t.left,y:Be(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Be(e.width)?e.width:t.width})),b8={},w8={},_8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),g()};let p=null;const h=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},n)},y=()=>{p!==null&&(clearTimeout(p),p=null)},g=()=>{y(),s=void 0,o=null},x=()=>{d()},v=function(..._){if(i!=null&&i.aborted)return;s=this,o=_;const S=p==null;h(),c&&S&&d()};return v.schedule=h,v.cancel=g,v.flush=x,i==null||i.addEventListener("abort",g,{once:!0}),v}e.debounce=t})(_8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_8;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const p=t.debounce(function(...g){d=n.apply(this,g),f=null},i,{edges:u}),h=function(...g){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,g),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,g),d)},y=()=>(p.flush(),d);return h.cancel=p.cancel,h.flush=y,h}e.debounce=r})(w8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w8;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(b8);var gZ=b8.throttle;const vZ=Ts(gZ);var iy=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},ws={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},j8=(e,t,r)=>{var{width:n=ws.width,height:i=ws.height,aspect:a,maxHeight:s}=r,o=Vc(n)?e:Number(n),c=Vc(i)?t:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},yZ={width:0,height:0,overflow:"visible"},xZ={width:0,overflowX:"visible"},bZ={height:0,overflowY:"visible"},wZ={},_Z=e=>{var{width:t,height:r}=e,n=Vc(t),i=Vc(r);return n&&i?yZ:n?xZ:i?bZ:wZ};function jZ(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return i===void 0&&a===void 0?(i=ws.width,a=ws.height):i===void 0?i=n&&n>0?void 0:ws.width:a===void 0&&(a=n&&n>0?void 0:ws.height),{width:i,height:a}}function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ww.apply(null,arguments)}function dE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(r),!0).forEach(function(n){SZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SZ(e,t,r){return(t=NZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NZ(e){var t=kZ(e,"string");return typeof t=="symbol"?t:t+""}function kZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S8=b.createContext(ws.initialDimension);function AZ(e){return Cs(e.width)&&Cs(e.height)}function N8(e){var{children:t,width:r,height:n}=e,i=b.useMemo(()=>({width:r,height:n}),[r,n]);return AZ(i)?b.createElement(S8.Provider,{value:i},t):null}var z5=()=>b.useContext(S8),EZ=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=ws.initialDimension,width:i,height:a,minWidth:s=ws.minWidth,minHeight:o,maxHeight:c,children:u,debounce:d=ws.debounce,id:f,className:p,onResize:h,style:y={}}=e,g=b.useRef(null),x=b.useRef();x.current=h,b.useImperativeHandle(t,()=>g.current);var[v,_]=b.useState({containerWidth:n.width,containerHeight:n.height}),S=b.useCallback((E,C)=>{_(D=>{var T=Math.round(E),O=Math.round(C);return D.containerWidth===T&&D.containerHeight===O?D:{containerWidth:T,containerHeight:O}})},[]);b.useEffect(()=>{if(g.current==null||typeof ResizeObserver>"u")return fu;var E=O=>{var q,K=O[0];if(K!=null){var{width:ne,height:re}=K.contentRect;S(ne,re),(q=x.current)===null||q===void 0||q.call(x,ne,re)}};d>0&&(E=vZ(E,d,{trailing:!0,leading:!1}));var C=new ResizeObserver(E),{width:D,height:T}=g.current.getBoundingClientRect();return S(D,T),C.observe(g.current),()=>{C.disconnect()}},[S,d]);var{containerWidth:j,containerHeight:N}=v;iy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:A,calculatedHeight:I}=j8(j,N,{width:i,height:a,aspect:r,maxHeight:c});return iy(A!=null&&A>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,I,i,a,s,o,r),b.createElement("div",{id:f?"".concat(f):void 0,className:Ut("recharts-responsive-container",p),style:fE(fE({},y),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:g},b.createElement("div",{style:_Z({width:i,height:a})},b.createElement(N8,{width:A,height:I},u)))}),Gc=b.forwardRef((e,t)=>{var r=z5();if(Cs(r.width)&&Cs(r.height))return e.children;var{width:n,height:i}=jZ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=j8(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Be(a)&&Be(s)?b.createElement(N8,{width:a,height:s},e.children):b.createElement(EZ,ww({},e,{width:n,height:i,ref:t}))});function W5(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var D0=()=>{var e,t=ci(),r=Ve(pZ),n=Ve(L0),i=(e=Ve(I0))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},PZ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},k8=()=>{var e;return(e=Ve(_n))!==null&&e!==void 0?e:PZ},H5=()=>Ve(To),V5=()=>Ve(Io),CZ=()=>Ve(e=>e.layout.margin),Ht=e=>e.layout.layoutType,hu=()=>Ve(Ht),A8=()=>{var e=hu();if(e==="horizontal"||e==="vertical")return e},E8=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},OZ=()=>{var e=hu();return e!==void 0},Mp=e=>{var t=mr(),r=ci(),{width:n,height:i}=e,a=z5(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),b.useEffect(()=>{!r&&Cs(s)&&Cs(o)&&t(BX({width:s,height:o}))},[t,r,s,o]),null},P8=Symbol.for("immer-nothing"),hE=Symbol.for("immer-draftable"),ea=Symbol.for("immer-state");function Wa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var lp=Object.getPrototypeOf;function $d(e){return!!e&&!!e[ea]}function Yc(e){var t;return e?C8(e)||Array.isArray(e)||!!e[hE]||!!((t=e.constructor)!=null&&t[hE])||Fp(e)||M0(e):!1}var TZ=Object.prototype.constructor.toString(),pE=new WeakMap;function C8(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=pE.get(r);return n===void 0&&(n=Function.toString.call(r),pE.set(r,n)),n===TZ}function ay(e,t,r=!0){R0(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function R0(e){const t=e[ea];return t?t.type_:Array.isArray(e)?1:Fp(e)?2:M0(e)?3:0}function _w(e,t){return R0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O8(e,t,r){const n=R0(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function IZ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fp(e){return e instanceof Map}function M0(e){return e instanceof Set}function gc(e){return e.copy_||e.base_}function jw(e,t){if(Fp(e))return new Map(e);if(M0(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=C8(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ea];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(lp(e),n)}else{const n=lp(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function K5(e,t=!1){return F0(e)||$d(e)||!Yc(e)||(R0(e)>1&&Object.defineProperties(e,{set:jg,add:jg,clear:jg,delete:jg}),Object.freeze(e),t&&Object.values(e).forEach(r=>K5(r,!0))),e}function LZ(){Wa(2)}var jg={value:LZ};function F0(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var DZ={};function Jc(e){const t=DZ[e];return t||Wa(0,e),t}var cp;function T8(){return cp}function RZ(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mE(e,t){t&&(Jc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Sw(e){Nw(e),e.drafts_.forEach(MZ),e.drafts_=null}function Nw(e){e===cp&&(cp=e.parent_)}function gE(e){return cp=RZ(cp,e)}function MZ(e){const t=e[ea];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ea].modified_&&(Sw(t),Wa(4)),Yc(e)&&(e=sy(t,e),t.parent_||oy(t,e)),t.patches_&&Jc("Patches").generateReplacementPatches_(r[ea].base_,e,t.patches_,t.inversePatches_)):e=sy(t,r,[]),Sw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==P8?e:void 0}function sy(e,t,r){if(F0(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[ea];if(!i)return ay(t,(a,s)=>yE(e,i,t,a,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return oy(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),ay(s,(c,u)=>yE(e,i,a,c,u,r,o),n),oy(e,a,!1),r&&e.patches_&&Jc("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function yE(e,t,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=F0(i);if(!(o&&!s)){if($d(i)){const c=a&&t&&t.type_!==3&&!_w(t.assigned_,n)?a.concat(n):void 0,u=sy(e,i,c);if(O8(r,n,u),$d(u))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Yc(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&o)return;sy(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Fp(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&oy(e,i)}}}function oy(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&K5(t,r)}function FZ(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:T8(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=G5;r&&(i=[n],a=up);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var G5={get(e,t){if(t===ea)return e;const r=gc(e);if(!_w(r,t))return $Z(e,r,t);const n=r[t];return e.finalized_||!Yc(n)?n:n===pb(e.base_,t)?(mb(e),e.copy_[t]=Aw(n,e)):n},has(e,t){return t in gc(e)},ownKeys(e){return Reflect.ownKeys(gc(e))},set(e,t,r){const n=I8(gc(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=pb(gc(e),t),a=i==null?void 0:i[ea];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(IZ(r,i)&&(r!==void 0||_w(e.base_,t)))return!0;mb(e),kw(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return pb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mb(e),kw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=gc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Wa(11)},getPrototypeOf(e){return lp(e.base_)},setPrototypeOf(){Wa(12)}},up={};ay(G5,(e,t)=>{up[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});up.deleteProperty=function(e,t){return up.set.call(this,e,t,void 0)};up.set=function(e,t,r){return G5.set.call(this,e[0],t,r,e[0])};function pb(e,t){const r=e[ea];return(r?gc(r):e)[t]}function $Z(e,t,r){var i;const n=I8(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function I8(e,t){if(!(t in e))return;let r=lp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=lp(r)}}function kw(e){e.modified_||(e.modified_=!0,e.parent_&&kw(e.parent_))}function mb(e){e.copy_||(e.copy_=jw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(c=a,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Wa(6),n!==void 0&&typeof n!="function"&&Wa(7);let i;if(Yc(t)){const a=gE(this),s=Aw(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?Sw(a):Nw(a)}return mE(a,n),vE(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===P8&&(i=void 0),this.autoFreeze_&&K5(i,!0),n){const a=[],s=[];Jc("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else Wa(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,c=>t(c,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Yc(e)||Wa(8),$d(e)&&(e=UZ(e));const t=gE(this),r=Aw(e,void 0);return r[ea].isManual_=!0,Nw(t),r}finishDraft(e,t){const r=e&&e[ea];(!r||!r.isManual_)&&Wa(9);const{scope_:n}=r;return mE(n,t),vE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Jc("Patches").applyPatches_;return $d(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Aw(e,t){const r=Fp(e)?Jc("MapSet").proxyMap_(e,t):M0(e)?Jc("MapSet").proxySet_(e,t):FZ(e,t);return(t?t.scope_:T8()).drafts_.push(r),r}function UZ(e){return $d(e)||Wa(10,e),L8(e)}function L8(e){if(!Yc(e)||F0(e))return e;const t=e[ea];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=jw(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=jw(e,!0);return ay(r,(i,a)=>{O8(r,i,L8(a))},n),t&&(t.finalized_=!1),r}var qZ=new BZ;qZ.produce;var zZ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},D8=Ii({name:"legend",initialState:zZ,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Sr()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ga(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Sr()},removeLegendPayload:{reducer(e,t){var r=Ga(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Sr()}}}),{setLegendSize:xE,setLegendSettings:WZ,addLegendPayload:R8,replaceLegendPayload:M8,removeLegendPayload:F8}=D8.actions,HZ=D8.reducer,VZ=["contextPayload"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ew.apply(null,arguments)}function bE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(r),!0).forEach(function(n){KZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KZ(e,t,r){return(t=GZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GZ(e){var t=YZ(e,"string");return typeof t=="symbol"?t:t+""}function YZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JZ(e,t){if(e==null)return{};var r,n,i=XZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function XZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZZ(e){return e.value}function QZ(e){var{contextPayload:t}=e,r=JZ(e,VZ),n=kL(t,e.payloadUniqBy,ZZ),i=Bd(Bd({},r),{},{payload:n});return b.isValidElement(e.content)?b.cloneElement(e.content,i):typeof e.content=="function"?b.createElement(e.content,i):b.createElement(iJ,i)}function eQ(e,t,r,n,i,a){var{layout:s,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&s==="vertical"?u={left:((n||0)-a.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((i||0)-a.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Bd(Bd({},u),d)}function tQ(e){var t=mr();return b.useEffect(()=>{t(WZ(e))},[t,e]),null}function rQ(e){var t=mr();return b.useEffect(()=>(t(xE(e)),()=>{t(xE({width:0,height:0}))}),[t,e]),null}function nQ(e,t,r,n){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:r||n}:null}var iQ={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Pw(e){var t=dn(e,iQ),r=qJ(),n=QG(),i=CZ(),{width:a,height:s,wrapperStyle:o,portal:c}=t,[u,d]=FL([r]),f=H5(),p=V5();if(f==null||p==null)return null;var h=f-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),y=nQ(t.layout,s,a,h),g=c?o:Bd(Bd({position:"absolute",width:(y==null?void 0:y.width)||a||"auto",height:(y==null?void 0:y.height)||s||"auto"},eQ(o,t,i,f,p,u)),o),x=c??n;if(x==null||r==null)return null;var v=b.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:d},b.createElement(tQ,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&b.createElement(rQ,{width:u.width,height:u.height}),b.createElement(QZ,Ew({},t,y,{margin:i,chartWidth:f,chartHeight:p,contextPayload:r})));return Qy.createPortal(v,x)}Pw.displayName="Legend";function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(null,arguments)}function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(r),!0).forEach(function(n){aQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aQ(e,t,r){return(t=sQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sQ(e){var t=oQ(e,"string");return typeof t=="symbol"?t:t+""}function oQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lQ(e){return Array.isArray(e)&&Ps(e[0])&&Ps(e[1])?e.join(" ~ "):e}var Uu={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},cQ=e=>{var{separator:t=Uu.separator,contentStyle:r,itemStyle:n,labelStyle:i=Uu.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:p=Uu.accessibilityLayer}=e,h=()=>{if(a&&a.length){var N={padding:0,margin:0},A=(o?w0(a,o):a).map((I,E)=>{if(I.type==="none")return null;var C=I.formatter||s||lQ,{value:D,name:T}=I,O=D,q=T;if(C){var K=C(D,T,I,E,a);if(Array.isArray(K))[O,q]=K;else if(K!=null)O=K;else return null}var ne=Zf(Zf({},Uu.itemStyle),{},{color:I.color||Uu.itemStyle.color},n);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:ne},Ps(q)?b.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Ps(q)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},O),b.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:N},A)}return null},y=Zf(Zf({},Uu.contentStyle),r),g=Zf({margin:0},i),x=!Ir(d),v=x?d:"",_=Ut("recharts-default-tooltip",c),S=Ut("recharts-tooltip-label",u);x&&f&&a!==void 0&&a!==null&&(v=f(d,a));var j=p?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",Cw({className:_,style:y},j),b.createElement("p",{className:S,style:g},b.isValidElement(v)?v:"".concat(v)),h())},Qf="recharts-tooltip-wrapper",uQ={visibility:"hidden"};function dQ(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ut(Qf,{["".concat(Qf,"-right")]:Be(r)&&t&&Be(t.x)&&r>=t.x,["".concat(Qf,"-left")]:Be(r)&&t&&Be(t.x)&&r<t.x,["".concat(Qf,"-bottom")]:Be(n)&&t&&Be(t.y)&&n>=t.y,["".concat(Qf,"-top")]:Be(n)&&t&&Be(t.y)&&n<t.y})}function _E(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(a&&Be(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),f=r[n]+i;if(t[n])return s[n]?d:f;var p=c[n];if(p==null)return 0;if(s[n]){var h=d,y=p;return h<y?Math.max(f,p):Math.max(d,p)}if(u==null)return 0;var g=f+o,x=p+u;return g>x?Math.max(d,p):Math.max(f,p)}function fQ(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function hQ(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:u}=e,d,f,p;return o.height>0&&o.width>0&&r?(f=_E({allowEscapeViewBox:t,coordinate:r,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=_E({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=fQ({translateX:f,translateY:p,useTranslate3d:c})):d=uQ,{cssProperties:d,cssClasses:dQ({translateX:f,translateY:p,coordinate:r})}}function jE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(r),!0).forEach(function(n){Ow(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ow(e,t,r){return(t=pQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pQ(e){var t=mQ(e,"string");return typeof t=="symbol"?t:t+""}function mQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gQ extends b.PureComponent{constructor(){super(...arguments),Ow(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ow(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:p,viewBox:h,wrapperStyle:y,lastBoundingBox:g,innerRef:x,hasPortalFromProps:v}=this.props,_=typeof u=="number"?u:u.x,S=typeof u=="number"?u:u.y,{cssClasses:j,cssProperties:N}=hQ({allowEscapeViewBox:r,coordinate:s,offsetLeft:_,offsetTop:S,position:d,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:p,viewBox:h}),A=v?{}:Sg(Sg({transition:c&&t?"transform ".concat(n,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=Sg(Sg({},A),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},y);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:I,ref:x},a)}}var $8=()=>{var e;return(e=Ve(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tw.apply(null,arguments)}function SE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return(t=yQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yQ(e){var t=xQ(e,"string");return typeof t=="symbol"?t:t+""}function xQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kE={curveBasisClosed:yY,curveBasisOpen:xY,curveBasis:vY,curveBumpX:nY,curveBumpY:iY,curveLinearClosed:bY,curveLinear:h0,curveMonotoneX:wY,curveMonotoneY:_Y,curveNatural:jY,curveStep:SY,curveStepAfter:kY,curveStepBefore:NY},ly=e=>Rt(e.x)&&Rt(e.y),AE=e=>e.base!=null&&ly(e.base)&&ly(e),eh=e=>e.x,th=e=>e.y,bQ=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Tp(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=kE["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return kE[r]||h0},EE={connectNulls:!1,type:"linear"},wQ=e=>{var{type:t=EE.type,points:r=[],baseLine:n,layout:i,connectNulls:a=EE.connectNulls}=e,s=bQ(t,i),o=a?r.filter(ly):r;if(Array.isArray(n)){var c,u=r.map((y,g)=>NE(NE({},y),{},{base:n[g]}));i==="vertical"?c=gg().y(th).x1(eh).x0(y=>y.base.x):c=gg().x(eh).y1(th).y0(y=>y.base.y);var d=c.defined(AE).curve(s),f=a?u.filter(AE):u;return d(f)}var p;i==="vertical"&&Be(n)?p=gg().y(th).x1(eh).x0(n):Be(n)?p=gg().x(eh).y1(th).y0(n):p=HI().x(eh).y(th);var h=p.defined(ly).curve(s);return h(o)},Y5=e=>{var{className:t,points:r,path:n,pathRef:i}=e,a=hu();if((!r||!r.length)&&!n)return null;var s={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||a,connectNulls:e.connectNulls},o=r&&r.length?wQ(s):n;return b.createElement("path",Tw({},Qi(e),S5(e),{className:Ut("recharts-curve",t),d:o===null?void 0:o,ref:i}))},_Q=["x","y","top","left","width","height","className"];function Iw(){return Iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iw.apply(null,arguments)}function PE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(r),!0).forEach(function(n){SQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SQ(e,t,r){return(t=NQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NQ(e){var t=kQ(e,"string");return typeof t=="symbol"?t:t+""}function kQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AQ(e,t){if(e==null)return{};var r,n,i=EQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function EQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PQ=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),CQ=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,c=AQ(e,_Q),u=jQ({x:t,y:r,top:n,left:i,width:a,height:s},c);return!Be(t)||!Be(r)||!Be(a)||!Be(s)||!Be(n)||!Be(i)?null:b.createElement("path",Iw({},yi(u),{className:Ut("recharts-cross",o),d:PQ(t,r,a,s,n,i)}))};function OQ(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function CE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(r),!0).forEach(function(n){TQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=LQ(e,"string");return typeof t=="symbol"?t:t+""}function LQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DQ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),B8=(e,t,r)=>e.map(n=>"".concat(DQ(n)," ").concat(t,"ms ").concat(r)).join(","),RQ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),dp=(e,t)=>Object.keys(t).reduce((r,n)=>OE(OE({},r),{},{[n]:e(n,t[n])}),{});function TE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(r),!0).forEach(function(n){MQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MQ(e,t,r){return(t=FQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FQ(e){var t=$Q(e,"string");return typeof t=="symbol"?t:t+""}function $Q(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cy=(e,t,r)=>e+(t-e)*r,Lw=e=>{var{from:t,to:r}=e;return t!==r},U8=(e,t,r)=>{var n=dp((i,a)=>{if(Lw(a)){var[s,o]=e(a.from,a.to,a.velocity);return bn(bn({},a),{},{from:s,velocity:o})}return a},t);return r<1?dp((i,a)=>Lw(a)&&n[i]!=null?bn(bn({},a),{},{velocity:cy(a.velocity,n[i].velocity,r),from:cy(a.from,n[i].from,r)}):a,t):U8(e,n,r-1)};function BQ(e,t,r,n,i,a){var s,o=n.reduce((p,h)=>bn(bn({},p),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>dp((p,h)=>h.from,o),u=()=>!Object.values(o).filter(Lw).length,d=null,f=p=>{s||(s=p);var h=p-s,y=h/r.dt;o=U8(r,o,y),i(bn(bn(bn({},e),t),c())),s=p,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function UQ(e,t,r,n,i,a,s){var o=null,c=i.reduce((f,p)=>{var h=e[p],y=t[p];return h==null||y==null?f:bn(bn({},f),{},{[p]:[h,y]})},{}),u,d=f=>{u||(u=f);var p=(f-u)/n,h=dp((g,x)=>cy(...x,r(p)),c);if(a(bn(bn(bn({},e),t),h)),p<1)o=s.setTimeout(d);else{var y=dp((g,x)=>cy(...x,r(1)),c);a(bn(bn(bn({},e),t),y))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const qQ=(e,t,r,n,i,a)=>{var s=RQ(e,t);return r==null?()=>(i(bn(bn({},e),t)),()=>{}):r.isStepper===!0?BQ(e,t,r,s,i,a):UQ(e,t,r,n,s,i,a)};var uy=1e-4,q8=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],z8=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),IE=(e,t)=>r=>{var n=q8(e,t);return z8(n,r)},zQ=(e,t)=>r=>{var n=q8(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return z8(i,r)},WQ=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},HQ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=WQ(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},VQ=(e,t,r,n)=>{var i=IE(e,r),a=IE(t,n),s=zQ(e,r),o=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,p=0;p<8;++p){var h=i(f)-d,y=s(f);if(Math.abs(h-d)<uy||y<uy)return a(f);f=o(f-h/y)}return a(f)};return c.isStepper=!1,c},LE=function(){return VQ(...HQ(...arguments))},KQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,c)=>{var u=-(s-o)*r,d=c*n,f=c+(u-d)*i/1e3,p=c*i/1e3+s;return Math.abs(p-o)<uy&&Math.abs(f)<uy?[o,0]:[p,f]};return a.isStepper=!0,a.dt=i,a},GQ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return LE(e);case"spring":return KQ();default:if(e.split("(")[0]==="cubic-bezier")return LE(e)}return typeof e=="function"?e:null};function YQ(e){var t,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=e.setTimeout(a.bind(null,u),c);return}a(c),i=e.setTimeout(a.bind(null,u));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class JQ{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function XQ(){return YQ(new JQ)}var ZQ=b.createContext(XQ);function QQ(e,t){var r=b.useContext(ZQ);return b.useMemo(()=>t??r(e),[e,t,r])}var eee=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),$0={isSsr:eee()},tee={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},DE={t:0},gb={t:1};function $p(e){var t=dn(e,tee),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=r==="auto"?!$0.isSsr:r,f=QQ(t.animationId,t.animationManager),[p,h]=b.useState(d?DE:gb),y=b.useRef(null);return b.useEffect(()=>{d||h(gb)},[d]),b.useEffect(()=>{if(!d||!n)return fu;var g=qQ(DE,gb,GQ(a),i,h,f.getTimeoutController()),x=()=>{y.current=g()};return f.start([c,s,x,i,o]),()=>{f.stop(),y.current&&y.current(),o()}},[d,n,i,a,s,c,o,f]),u(p.t)}function Bp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(ip(t)),n=b.useRef(e);return n.current!==e&&(r.current=ip(t),n.current=e),r.current}var ree=["radius"],nee=["radius"],RE,ME,FE,$E,BE,UE,qE,zE,WE,HE;function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(n){iee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iee(e,t,r){return(t=aee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aee(e){var t=see(e,"string");return typeof t=="symbol"?t:t+""}function see(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dy.apply(null,arguments)}function GE(e,t){if(e==null)return{};var r,n,i=oee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var YE=(e,t,r,n,i)=>{var a=vl(r),s=vl(n),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&Array.isArray(i)){for(var p=[0,0,0,0],h=0,y=4;h<y;h++){var g,x=(g=i[h])!==null&&g!==void 0?g:0;p[h]=x>o?o:x}f=Ur(RE||(RE=fs(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=Ur(ME||(ME=fs(["A ",",",",0,0,",",",",",""])),p[0],p[0],d,e+u*p[0],t)),f+=Ur(FE||(FE=fs(["L ",",",""])),e+r-u*p[1],t),p[1]>0&&(f+=Ur($E||($E=fs(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],d,e+r,t+c*p[1])),f+=Ur(BE||(BE=fs(["L ",",",""])),e+r,t+n-c*p[2]),p[2]>0&&(f+=Ur(UE||(UE=fs(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],d,e+r-u*p[2],t+n)),f+=Ur(qE||(qE=fs(["L ",",",""])),e+u*p[3],t+n),p[3]>0&&(f+=Ur(zE||(zE=fs(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],d,e,t+n-c*p[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);f=Ur(WE||(WE=fs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*v,v,v,d,e+u*v,t,e+r-u*v,t,v,v,d,e+r,t+c*v,e+r,t+n-c*v,v,v,d,e+r-u*v,t+n,e+u*v,t+n,v,v,d,e,t+n-c*v)}else f=Ur(HE||(HE=fs(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return f},JE={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},W8=e=>{var t=dn(e,JE),r=b.useRef(null),[n,i]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var te=r.current.getTotalLength();te&&i(te)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:h,isAnimationActive:y,isUpdateAnimationActive:g}=t,x=b.useRef(o),v=b.useRef(c),_=b.useRef(a),S=b.useRef(s),j=b.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),N=Bp(j,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var A=Ut("recharts-rectangle",d);if(!g){var I=yi(t),{radius:E}=I,C=GE(I,ree);return b.createElement("path",dy({},C,{x:vl(a),y:vl(s),width:vl(o),height:vl(c),radius:typeof u=="number"?u:void 0,className:A,d:YE(a,s,o,c,u)}))}var D=x.current,T=v.current,O=_.current,q=S.current,K="0px ".concat(n===-1?1:n,"px"),ne="".concat(n,"px 0px"),re=B8(["strokeDasharray"],p,typeof f=="string"?f:JE.animationEasing);return b.createElement($p,{animationId:N,key:N,canBegin:n>0,duration:p,easing:f,isActive:g,begin:h},te=>{var W=kr(D,o,te),B=kr(T,c,te),le=kr(O,a,te),G=kr(q,s,te);r.current&&(x.current=W,v.current=B,_.current=le,S.current=G);var R;y?te>0?R={transition:re,strokeDasharray:ne}:R={strokeDasharray:K}:R={strokeDasharray:ne};var z=yi(t),{radius:J}=z,ie=GE(z,nee);return b.createElement("path",dy({},ie,{radius:typeof u=="number"?u:void 0,className:A,d:YE(le,G,W,B,u),ref:r,style:KE(KE({},R),t.style)}))})};function XE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ZE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(r),!0).forEach(function(n){lee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lee(e,t,r){return(t=cee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cee(e){var t=uee(e,"string");return typeof t=="symbol"?t:t+""}function uee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fy=Math.PI/180,dee=e=>e*180/Math.PI,ln=(e,t,r,n)=>({x:e+Math.cos(-fy*n)*r,y:t+Math.sin(-fy*n)*r}),H8=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},fee=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},hee=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=fee({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:s,angle:dee(c),angleInRadian:c}},pee=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},mee=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},gee=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:a}=hee({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=pee(t),d=a,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?ZE(ZE({},t),{},{radius:i,angle:mee(d,t)}):null};function V8(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=ln(t,r,n,i),o=ln(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}var QE,e3,t3,r3,n3,i3,a3;function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dw.apply(null,arguments)}function Nc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vee=(e,t)=>{var r=On(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Ng=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=e,u=o*(s?1:-1)+n,d=Math.asin(o/u)/fy,f=c?i:i+a*d,p=ln(t,r,u,f),h=ln(t,r,n,f),y=c?i-a*d:i,g=ln(t,r,u*Math.cos(d*fy),y);return{center:p,circleTangency:h,lineTangency:g,theta:d}},K8=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=vee(a,s),c=a+o,u=ln(t,r,i,a),d=ln(t,r,i,c),f=Ur(QE||(QE=Nc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),d.x,d.y);if(n>0){var p=ln(t,r,n,a),h=ln(t,r,n,c);f+=Ur(e3||(e3=Nc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(o)>180),+(a<=c),p.x,p.y)}else f+=Ur(t3||(t3=Nc(["L ",","," Z"])),t,r);return f},yee=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=On(u-c),{circleTangency:f,lineTangency:p,theta:h}=Ng({cx:t,cy:r,radius:i,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:y,lineTangency:g,theta:x}=Ng({cx:t,cy:r,radius:i,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),v=o?Math.abs(c-u):Math.abs(c-u)-h-x;if(v<0)return s?Ur(r3||(r3=Nc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,a,a,a*2,a,a,-a*2):K8({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:u});var _=Ur(n3||(n3=Nc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,a,a,+(d<0),f.x,f.y,i,i,+(v>180),+(d<0),y.x,y.y,a,a,+(d<0),g.x,g.y);if(n>0){var{circleTangency:S,lineTangency:j,theta:N}=Ng({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:A,lineTangency:I,theta:E}=Ng({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-N-E;if(C<0&&a===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+=Ur(i3||(i3=Nc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),I.x,I.y,a,a,+(d<0),A.x,A.y,n,n,+(C>180),+(d>0),S.x,S.y,a,a,+(d<0),j.x,j.y)}else _+=Ur(a3||(a3=Nc(["L",",","Z"])),t,r);return _},xee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},G8=e=>{var t=dn(e,xee),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(a<i||u===d)return null;var p=Ut("recharts-sector",f),h=a-i,y=oi(s,h,0,!0),g;return y>0&&Math.abs(u-d)<360?g=yee({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(y,h/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):g=K8({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d}),b.createElement("path",Dw({},yi(t),{className:p,d:g}))};function bee(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(oL(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=t,c=ln(n,i,a,o),u=ln(n,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return V8(t)}}var Y8={},J8={},X8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(X8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X8;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(J8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D5,r=J8;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}e.range=n})(Y8);var wee=Y8.range;const Z8=Ts(wee);function Al(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _ee(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function J5(e){let t,r,n;e.length!==2?(t=Al,r=(o,c)=>Al(e(o),c),n=(o,c)=>e(o)-c):(t=e===Al||e===_ee?e:jee,r=e,n=e);function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=i(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:i,center:s,right:a}}function jee(){return 0}function Q8(e){return e===null?NaN:+e}function*See(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Nee=J5(Al),Up=Nee.right;J5(Q8).center;class s3 extends Map{constructor(t,r=Eee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(o3(this,t))}has(t){return super.has(o3(this,t))}set(t,r){return super.set(kee(this,t),r)}delete(t){return super.delete(Aee(this,t))}}function o3({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function kee({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Aee({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Eee(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Pee(e=Al){if(e===Al)return eD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function eD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Cee=Math.sqrt(50),Oee=Math.sqrt(10),Tee=Math.sqrt(2);function hy(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Cee?10:a>=Oee?5:a>=Tee?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?hy(e,t,r*2):[o,c,u]}function Rw(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?hy(t,e,r):hy(e,t,r);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function Mw(e,t,r){return t=+t,e=+e,r=+r,hy(e,t,r)[2]}function Fw(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Mw(t,e,r):Mw(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function l3(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function c3(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function tD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?eD:Pee(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+p)),y=Math.min(n,Math.floor(t+(c-u)*f/c+p));tD(e,t,h,y,i)}const a=e[t];let s=r,o=n;for(rh(e,r,t),i(e[n],a)>0&&rh(e,r,n);s<o;){for(rh(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?rh(e,r,o):(++o,rh(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function rh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Iee(e,t,r){if(e=Float64Array.from(See(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return c3(e);if(t>=1)return l3(e);var n,i=(n-1)*t,a=Math.floor(i),s=l3(tD(e,a).subarray(0,a+1)),o=c3(e.subarray(a+1));return s+(o-s)*(i-a)}}function Lee(e,t,r=Q8){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function Dee(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Lo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $w=Symbol("implicit");function X5(){var e=new s3,t=[],r=[],n=$w;function i(a){let s=e.get(a);if(s===void 0){if(n!==$w)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new s3;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return X5(t,r).unknown(n)},ka.apply(i,arguments),i}function Z5(){var e=X5().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,h=i<n,y=h?i:n,g=h?n:i;a=(g-y)/Math.max(1,p-c+u*2),o&&(a=Math.floor(a)),y+=(g-y-a*(p-c))*d,s=a*(1-c),o&&(y=Math.round(y),s=Math.round(s));var x=Dee(p).map(function(v){return y+a*v});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return Z5(t(),[n,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},ka.apply(f(),arguments)}function rD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return rD(t())},e}function Ree(){return rD(Z5.apply(null,arguments).paddingInner(1))}function Q5(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function nD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function qp(){}var fp=.7,py=1/fp,kd="\\s*([+-]?\\d+)\\s*",hp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mee=/^#([0-9a-f]{3,8})$/,Fee=new RegExp(`^rgb\\(${kd},${kd},${kd}\\)$`),$ee=new RegExp(`^rgb\\(${ks},${ks},${ks}\\)$`),Bee=new RegExp(`^rgba\\(${kd},${kd},${kd},${hp}\\)$`),Uee=new RegExp(`^rgba\\(${ks},${ks},${ks},${hp}\\)$`),qee=new RegExp(`^hsl\\(${hp},${ks},${ks}\\)$`),zee=new RegExp(`^hsla\\(${hp},${ks},${ks},${hp}\\)$`),u3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q5(qp,pp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:d3,formatHex:d3,formatHex8:Wee,formatHsl:Hee,formatRgb:f3,toString:f3});function d3(){return this.rgb().formatHex()}function Wee(){return this.rgb().formatHex8()}function Hee(){return iD(this).formatHsl()}function f3(){return this.rgb().formatRgb()}function pp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Mee.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?h3(t):r===3?new Ei(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?kg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?kg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fee.exec(e))?new Ei(t[1],t[2],t[3],1):(t=$ee.exec(e))?new Ei(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Bee.exec(e))?kg(t[1],t[2],t[3],t[4]):(t=Uee.exec(e))?kg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qee.exec(e))?g3(t[1],t[2]/100,t[3]/100,1):(t=zee.exec(e))?g3(t[1],t[2]/100,t[3]/100,t[4]):u3.hasOwnProperty(e)?h3(u3[e]):e==="transparent"?new Ei(NaN,NaN,NaN,0):null}function h3(e){return new Ei(e>>16&255,e>>8&255,e&255,1)}function kg(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ei(e,t,r,n)}function Vee(e){return e instanceof qp||(e=pp(e)),e?(e=e.rgb(),new Ei(e.r,e.g,e.b,e.opacity)):new Ei}function Bw(e,t,r,n){return arguments.length===1?Vee(e):new Ei(e,t,r,n??1)}function Ei(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Q5(Ei,Bw,nD(qp,{brighter(e){return e=e==null?py:Math.pow(py,e),new Ei(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fp:Math.pow(fp,e),new Ei(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ei(Ic(this.r),Ic(this.g),Ic(this.b),my(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p3,formatHex:p3,formatHex8:Kee,formatRgb:m3,toString:m3}));function p3(){return`#${kc(this.r)}${kc(this.g)}${kc(this.b)}`}function Kee(){return`#${kc(this.r)}${kc(this.g)}${kc(this.b)}${kc((isNaN(this.opacity)?1:this.opacity)*255)}`}function m3(){const e=my(this.opacity);return`${e===1?"rgb(":"rgba("}${Ic(this.r)}, ${Ic(this.g)}, ${Ic(this.b)}${e===1?")":`, ${e})`}`}function my(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ic(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kc(e){return e=Ic(e),(e<16?"0":"")+e.toString(16)}function g3(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ha(e,t,r,n)}function iD(e){if(e instanceof Ha)return new Ha(e.h,e.s,e.l,e.opacity);if(e instanceof qp||(e=pp(e)),!e)return new Ha;if(e instanceof Ha)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,c=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Ha(s,o,c,e.opacity)}function Gee(e,t,r,n){return arguments.length===1?iD(e):new Ha(e,t,r,n??1)}function Ha(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Q5(Ha,Gee,nD(qp,{brighter(e){return e=e==null?py:Math.pow(py,e),new Ha(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fp:Math.pow(fp,e),new Ha(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Ei(vb(e>=240?e-240:e+120,i,n),vb(e,i,n),vb(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Ha(v3(this.h),Ag(this.s),Ag(this.l),my(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=my(this.opacity);return`${e===1?"hsl(":"hsla("}${v3(this.h)}, ${Ag(this.s)*100}%, ${Ag(this.l)*100}%${e===1?")":`, ${e})`}`}}));function v3(e){return e=(e||0)%360,e<0?e+360:e}function Ag(e){return Math.max(0,Math.min(1,e||0))}function vb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ej=e=>()=>e;function Yee(e,t){return function(r){return e+r*t}}function Jee(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Xee(e){return(e=+e)==1?aD:function(t,r){return r-t?Jee(t,r,e):ej(isNaN(t)?r:t)}}function aD(e,t){var r=t-e;return r?Yee(e,r):ej(isNaN(e)?t:e)}const y3=function e(t){var r=Xee(t);function n(i,a){var s=r((i=Bw(i)).r,(a=Bw(a)).r),o=r(i.g,a.g),c=r(i.b,a.b),u=aD(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function Zee(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function Qee(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ete(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=tf(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function tte(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function gy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function rte(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=tf(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Uw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yb=new RegExp(Uw.source,"g");function nte(e){return function(){return e}}function ite(e){return function(t){return e(t)+""}}function ate(e,t){var r=Uw.lastIndex=yb.lastIndex=0,n,i,a,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Uw.exec(e))&&(i=yb.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:gy(n,i)})),r=yb.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?ite(c[0].x):nte(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function tf(e,t){var r=typeof t,n;return t==null||r==="boolean"?ej(t):(r==="number"?gy:r==="string"?(n=pp(t))?(t=n,y3):ate:t instanceof pp?y3:t instanceof Date?tte:Qee(t)?Zee:Array.isArray(t)?ete:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rte:gy)(e,t)}function tj(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ste(e,t){t===void 0&&(t=e,e=tf);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function ote(e){return function(){return e}}function vy(e){return+e}var x3=[0,1];function gi(e){return e}function qw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ote(isNaN(t)?NaN:.5)}function lte(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function cte(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=qw(i,n),a=r(s,a)):(n=qw(n,i),a=r(a,s)),function(o){return a(n(o))}}function ute(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=qw(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var c=Up(e,o,1,n)-1;return a[c](i[c](o))}}function zp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B0(){var e=x3,t=x3,r=tf,n,i,a,s=gi,o,c,u;function d(){var p=Math.min(e.length,t.length);return s!==gi&&(s=lte(e[0],e[p-1])),o=p>2?ute:cte,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(c||(c=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(i((u||(u=o(t,e.map(n),gy)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,vy),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=tj,d()},f.clamp=function(p){return arguments.length?(s=p?!0:gi,d()):s!==gi},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,h){return n=p,i=h,d()}}function rj(){return B0()(gi,gi)}function dte(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function yy(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ud(e){return e=yy(Math.abs(e)),e?e[1]:NaN}function fte(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],c=0;i>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(i-=o,i+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function hte(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var pte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mp(e){if(!(t=pte.exec(e)))throw new Error("invalid format: "+e);var t;return new nj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mp.prototype=nj.prototype;function nj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mte(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var xy;function gte(e,t){var r=yy(e,t);if(!r)return xy=void 0,e.toPrecision(t);var n=r[0],i=r[1],a=i-(xy=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+yy(e,Math.max(0,t+a-1))[0]}function b3(e,t){var r=yy(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const w3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dte,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>b3(e*100,t),r:b3,s:gte,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _3(e){return e}var j3=Array.prototype.map,S3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vte(e){var t=e.grouping===void 0||e.thousands===void 0?_3:fte(j3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?_3:hte(j3.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f,p){f=mp(f);var h=f.fill,y=f.align,g=f.sign,x=f.symbol,v=f.zero,_=f.width,S=f.comma,j=f.precision,N=f.trim,A=f.type;A==="n"?(S=!0,A="g"):w3[A]||(j===void 0&&(j=12),N=!0,A="g"),(v||h==="0"&&y==="=")&&(v=!0,h="0",y="=");var I=(p&&p.prefix!==void 0?p.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():""),E=(x==="$"?n:/[%p]/.test(A)?s:"")+(p&&p.suffix!==void 0?p.suffix:""),C=w3[A],D=/[defgprs%]/.test(A);j=j===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function T(O){var q=I,K=E,ne,re,te;if(A==="c")K=C(O)+K,O="";else{O=+O;var W=O<0||1/O<0;if(O=isNaN(O)?c:C(Math.abs(O),j),N&&(O=mte(O)),W&&+O==0&&g!=="+"&&(W=!1),q=(W?g==="("?g:o:g==="-"||g==="("?"":g)+q,K=(A==="s"&&!isNaN(O)&&xy!==void 0?S3[8+xy/3]:"")+K+(W&&g==="("?")":""),D){for(ne=-1,re=O.length;++ne<re;)if(te=O.charCodeAt(ne),48>te||te>57){K=(te===46?i+O.slice(ne+1):O.slice(ne))+K,O=O.slice(0,ne);break}}}S&&!v&&(O=t(O,1/0));var B=q.length+O.length+K.length,le=B<_?new Array(_-B+1).join(h):"";switch(S&&v&&(O=t(le+O,le.length?_-K.length:1/0),le=""),y){case"<":O=q+O+K+le;break;case"=":O=q+le+O+K;break;case"^":O=le.slice(0,B=le.length>>1)+q+O+K+le.slice(B);break;default:O=le+q+O+K;break}return a(O)}return T.toString=function(){return f+""},T}function d(f,p){var h=Math.max(-8,Math.min(8,Math.floor(Ud(p)/3)))*3,y=Math.pow(10,-h),g=u((f=mp(f),f.type="f",f),{suffix:S3[8+h/3]});return function(x){return g(y*x)}}return{format:u,formatPrefix:d}}var Eg,ij,sD;yte({thousands:",",grouping:[3],currency:["$",""]});function yte(e){return Eg=vte(e),ij=Eg.format,sD=Eg.formatPrefix,Eg}function xte(e){return Math.max(0,-Ud(Math.abs(e)))}function bte(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ud(t)/3)))*3-Ud(Math.abs(e)))}function wte(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ud(t)-Ud(e))+1}function oD(e,t,r,n){var i=Fw(e,t,r),a;switch(n=mp(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=bte(i,s))&&(n.precision=a),sD(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=wte(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=xte(i))&&(n.precision=a-(n.type==="%")*2);break}}return ij(n)}function Bl(e){var t=e.domain;return e.ticks=function(r){var n=t();return Rw(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return oD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=Mw(s,o,r),u===c)return n[i]=s,n[a]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function lD(){var e=rj();return e.copy=function(){return zp(e,lD())},ka.apply(e,arguments),Bl(e)}function cD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,vy),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return cD(e).unknown(t)},e=arguments.length?Array.from(e,vy):[0,1],Bl(r)}function uD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function N3(e){return Math.log(e)}function k3(e){return Math.exp(e)}function _te(e){return-Math.log(-e)}function jte(e){return-Math.exp(-e)}function Ste(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Nte(e){return e===10?Ste:e===Math.E?Math.exp:t=>Math.pow(e,t)}function kte(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function A3(e){return(t,r)=>-e(-t,r)}function aj(e){const t=e(N3,k3),r=t.domain;let n=10,i,a;function s(){return i=kte(n),a=Nte(n),r()[0]<0?(i=A3(i),a=A3(a),e(_te,jte)):e(N3,k3),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),h=i(d),y,g;const x=o==null?10:+o;let v=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(y=1;y<n;++y)if(g=p<0?y/a(-p):y*a(p),!(g<u)){if(g>d)break;v.push(g)}}else for(;p<=h;++p)for(y=n-1;y>=1;--y)if(g=p>0?y/a(-p):y*a(p),!(g<u)){if(g>d)break;v.push(g)}v.length*2<x&&(v=Rw(u,d,x))}else v=Rw(p,h,Math.min(h-p,x)).map(a);return f?v.reverse():v},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=mp(c)).precision==null&&(c.trim=!0),c=ij(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(uD(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function dD(){const e=aj(B0()).domain([1,10]);return e.copy=()=>zp(e,dD()).base(e.base()),ka.apply(e,arguments),e}function E3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function P3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sj(e){var t=1,r=e(E3(t),P3(t));return r.constant=function(n){return arguments.length?e(E3(t=+n),P3(t)):t},Bl(r)}function fD(){var e=sj(B0());return e.copy=function(){return zp(e,fD()).constant(e.constant())},ka.apply(e,arguments)}function C3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ate(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ete(e){return e<0?-e*e:e*e}function oj(e){var t=e(gi,gi),r=1;function n(){return r===1?e(gi,gi):r===.5?e(Ate,Ete):e(C3(r),C3(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Bl(t)}function lj(){var e=oj(B0());return e.copy=function(){return zp(e,lj()).exponent(e.exponent())},ka.apply(e,arguments),e}function Pte(){return lj.apply(null,arguments).exponent(.5)}function O3(e){return Math.sign(e)*e*e}function Cte(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hD(){var e=rj(),t=[0,1],r=!1,n;function i(a){var s=Cte(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(O3(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,vy)).map(O3)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return hD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ka.apply(i,arguments),Bl(i)}function pD(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=Lee(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[Up(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Al),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return pD().domain(e).range(t).unknown(n)},ka.apply(a,arguments)}function mD(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Up(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return mD().domain([e,t]).range(i).unknown(a)},ka.apply(Bl(s),arguments)}function gD(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[Up(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gD().domain(e).range(t).unknown(r)},ka.apply(i,arguments)}const xb=new Date,bb=new Date;function jn(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<s);return c},i.filter=a=>jn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(xb.setTime(+a),bb.setTime(+s),e(xb),e(bb),Math.floor(r(xb,bb))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const by=jn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);by.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?jn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):by);by.range;const fo=1e3,xa=fo*60,ho=xa*60,jo=ho*24,cj=jo*7,T3=jo*30,wb=jo*365,Ac=jn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getUTCSeconds());Ac.range;const uj=jn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo)},(e,t)=>{e.setTime(+e+t*xa)},(e,t)=>(t-e)/xa,e=>e.getMinutes());uj.range;const dj=jn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xa)},(e,t)=>(t-e)/xa,e=>e.getUTCMinutes());dj.range;const fj=jn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo-e.getMinutes()*xa)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getHours());fj.range;const hj=jn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getUTCHours());hj.range;const Wp=jn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xa)/jo,e=>e.getDate()-1);Wp.range;const U0=jn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jo,e=>e.getUTCDate()-1);U0.range;const vD=jn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jo,e=>Math.floor(e/jo));vD.range;function pu(e){return jn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xa)/cj)}const q0=pu(0),wy=pu(1),Ote=pu(2),Tte=pu(3),qd=pu(4),Ite=pu(5),Lte=pu(6);q0.range;wy.range;Ote.range;Tte.range;qd.range;Ite.range;Lte.range;function mu(e){return jn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/cj)}const z0=mu(0),_y=mu(1),Dte=mu(2),Rte=mu(3),zd=mu(4),Mte=mu(5),Fte=mu(6);z0.range;_y.range;Dte.range;Rte.range;zd.range;Mte.range;Fte.range;const pj=jn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pj.range;const mj=jn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());mj.range;const So=jn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());So.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:jn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});So.range;const No=jn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());No.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:jn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});No.range;function yD(e,t,r,n,i,a){const s=[[Ac,1,fo],[Ac,5,5*fo],[Ac,15,15*fo],[Ac,30,30*fo],[a,1,xa],[a,5,5*xa],[a,15,15*xa],[a,30,30*xa],[i,1,ho],[i,3,3*ho],[i,6,6*ho],[i,12,12*ho],[n,1,jo],[n,2,2*jo],[r,1,cj],[t,1,T3],[t,3,3*T3],[e,1,wb]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),y=h?h.range(u,+d+1):[];return p?y.reverse():y}function c(u,d,f){const p=Math.abs(d-u)/f,h=J5(([,,x])=>x).right(s,p);if(h===s.length)return e.every(Fw(u/wb,d/wb,f));if(h===0)return by.every(Math.max(Fw(u,d,f),1));const[y,g]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return y.every(g)}return[o,c]}const[$te,Bte]=yD(No,mj,z0,vD,hj,dj),[Ute,qte]=yD(So,pj,q0,Wp,fj,uj);function _b(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nh(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function zte(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=ih(i),d=ah(i),f=ih(a),p=ah(a),h=ih(s),y=ah(s),g=ih(o),x=ah(o),v=ih(c),_=ah(c),S={a:te,A:W,b:B,B:le,c:null,d:F3,e:F3,f:fre,g:_re,G:Sre,H:cre,I:ure,j:dre,L:xD,m:hre,M:pre,p:G,q:R,Q:U3,s:q3,S:mre,u:gre,U:vre,V:yre,w:xre,W:bre,x:null,X:null,y:wre,Y:jre,Z:Nre,"%":B3},j={a:z,A:J,b:ie,B:ae,c:null,d:$3,e:$3,f:Pre,g:$re,G:Ure,H:kre,I:Are,j:Ere,L:wD,m:Cre,M:Ore,p:ue,q:pe,Q:U3,s:q3,S:Tre,u:Ire,U:Lre,V:Dre,w:Rre,W:Mre,x:null,X:null,y:Fre,Y:Bre,Z:qre,"%":B3},N={a:D,A:T,b:O,B:q,c:K,d:R3,e:R3,f:are,g:D3,G:L3,H:M3,I:M3,j:tre,L:ire,m:ere,M:rre,p:C,q:Qte,Q:ore,s:lre,S:nre,u:Gte,U:Yte,V:Jte,w:Kte,W:Xte,x:ne,X:re,y:D3,Y:L3,Z:Zte,"%":sre};S.x=A(r,S),S.X=A(n,S),S.c=A(t,S),j.x=A(r,j),j.X=A(n,j),j.c=A(t,j);function A(ee,he){return function(oe){var de=[],Ce=-1,Pe=0,V=ee.length,je,Je,De;for(oe instanceof Date||(oe=new Date(+oe));++Ce<V;)ee.charCodeAt(Ce)===37&&(de.push(ee.slice(Pe,Ce)),(Je=I3[je=ee.charAt(++Ce)])!=null?je=ee.charAt(++Ce):Je=je==="e"?" ":"0",(De=he[je])&&(je=De(oe,Je)),de.push(je),Pe=Ce+1);return de.push(ee.slice(Pe,Ce)),de.join("")}}function I(ee,he){return function(oe){var de=nh(1900,void 0,1),Ce=E(de,ee,oe+="",0),Pe,V;if(Ce!=oe.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(he&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Pe=jb(nh(de.y,0,1)),V=Pe.getUTCDay(),Pe=V>4||V===0?_y.ceil(Pe):_y(Pe),Pe=U0.offset(Pe,(de.V-1)*7),de.y=Pe.getUTCFullYear(),de.m=Pe.getUTCMonth(),de.d=Pe.getUTCDate()+(de.w+6)%7):(Pe=_b(nh(de.y,0,1)),V=Pe.getDay(),Pe=V>4||V===0?wy.ceil(Pe):wy(Pe),Pe=Wp.offset(Pe,(de.V-1)*7),de.y=Pe.getFullYear(),de.m=Pe.getMonth(),de.d=Pe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),V="Z"in de?jb(nh(de.y,0,1)).getUTCDay():_b(nh(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(V+5)%7:de.w+de.U*7-(V+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,jb(de)):_b(de)}}function E(ee,he,oe,de){for(var Ce=0,Pe=he.length,V=oe.length,je,Je;Ce<Pe;){if(de>=V)return-1;if(je=he.charCodeAt(Ce++),je===37){if(je=he.charAt(Ce++),Je=N[je in I3?he.charAt(Ce++):je],!Je||(de=Je(ee,oe,de))<0)return-1}else if(je!=oe.charCodeAt(de++))return-1}return de}function C(ee,he,oe){var de=u.exec(he.slice(oe));return de?(ee.p=d.get(de[0].toLowerCase()),oe+de[0].length):-1}function D(ee,he,oe){var de=h.exec(he.slice(oe));return de?(ee.w=y.get(de[0].toLowerCase()),oe+de[0].length):-1}function T(ee,he,oe){var de=f.exec(he.slice(oe));return de?(ee.w=p.get(de[0].toLowerCase()),oe+de[0].length):-1}function O(ee,he,oe){var de=v.exec(he.slice(oe));return de?(ee.m=_.get(de[0].toLowerCase()),oe+de[0].length):-1}function q(ee,he,oe){var de=g.exec(he.slice(oe));return de?(ee.m=x.get(de[0].toLowerCase()),oe+de[0].length):-1}function K(ee,he,oe){return E(ee,t,he,oe)}function ne(ee,he,oe){return E(ee,r,he,oe)}function re(ee,he,oe){return E(ee,n,he,oe)}function te(ee){return s[ee.getDay()]}function W(ee){return a[ee.getDay()]}function B(ee){return c[ee.getMonth()]}function le(ee){return o[ee.getMonth()]}function G(ee){return i[+(ee.getHours()>=12)]}function R(ee){return 1+~~(ee.getMonth()/3)}function z(ee){return s[ee.getUTCDay()]}function J(ee){return a[ee.getUTCDay()]}function ie(ee){return c[ee.getUTCMonth()]}function ae(ee){return o[ee.getUTCMonth()]}function ue(ee){return i[+(ee.getUTCHours()>=12)]}function pe(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var he=A(ee+="",S);return he.toString=function(){return ee},he},parse:function(ee){var he=I(ee+="",!1);return he.toString=function(){return ee},he},utcFormat:function(ee){var he=A(ee+="",j);return he.toString=function(){return ee},he},utcParse:function(ee){var he=I(ee+="",!0);return he.toString=function(){return ee},he}}}var I3={"-":"",_:" ",0:"0"},Ln=/^\s*\d+/,Wte=/^%/,Hte=/[\\^$*+?|[\]().{}]/g;function zt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function Vte(e){return e.replace(Hte,"\\$&")}function ih(e){return new RegExp("^(?:"+e.map(Vte).join("|")+")","i")}function ah(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Kte(e,t,r){var n=Ln.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Gte(e,t,r){var n=Ln.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Yte(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Jte(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Xte(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function L3(e,t,r){var n=Ln.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function D3(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Zte(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Qte(e,t,r){var n=Ln.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function ere(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function R3(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function tre(e,t,r){var n=Ln.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function M3(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function rre(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function nre(e,t,r){var n=Ln.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ire(e,t,r){var n=Ln.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function are(e,t,r){var n=Ln.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function sre(e,t,r){var n=Wte.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ore(e,t,r){var n=Ln.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function lre(e,t,r){var n=Ln.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function F3(e,t){return zt(e.getDate(),t,2)}function cre(e,t){return zt(e.getHours(),t,2)}function ure(e,t){return zt(e.getHours()%12||12,t,2)}function dre(e,t){return zt(1+Wp.count(So(e),e),t,3)}function xD(e,t){return zt(e.getMilliseconds(),t,3)}function fre(e,t){return xD(e,t)+"000"}function hre(e,t){return zt(e.getMonth()+1,t,2)}function pre(e,t){return zt(e.getMinutes(),t,2)}function mre(e,t){return zt(e.getSeconds(),t,2)}function gre(e){var t=e.getDay();return t===0?7:t}function vre(e,t){return zt(q0.count(So(e)-1,e),t,2)}function bD(e){var t=e.getDay();return t>=4||t===0?qd(e):qd.ceil(e)}function yre(e,t){return e=bD(e),zt(qd.count(So(e),e)+(So(e).getDay()===4),t,2)}function xre(e){return e.getDay()}function bre(e,t){return zt(wy.count(So(e)-1,e),t,2)}function wre(e,t){return zt(e.getFullYear()%100,t,2)}function _re(e,t){return e=bD(e),zt(e.getFullYear()%100,t,2)}function jre(e,t){return zt(e.getFullYear()%1e4,t,4)}function Sre(e,t){var r=e.getDay();return e=r>=4||r===0?qd(e):qd.ceil(e),zt(e.getFullYear()%1e4,t,4)}function Nre(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zt(t/60|0,"0",2)+zt(t%60,"0",2)}function $3(e,t){return zt(e.getUTCDate(),t,2)}function kre(e,t){return zt(e.getUTCHours(),t,2)}function Are(e,t){return zt(e.getUTCHours()%12||12,t,2)}function Ere(e,t){return zt(1+U0.count(No(e),e),t,3)}function wD(e,t){return zt(e.getUTCMilliseconds(),t,3)}function Pre(e,t){return wD(e,t)+"000"}function Cre(e,t){return zt(e.getUTCMonth()+1,t,2)}function Ore(e,t){return zt(e.getUTCMinutes(),t,2)}function Tre(e,t){return zt(e.getUTCSeconds(),t,2)}function Ire(e){var t=e.getUTCDay();return t===0?7:t}function Lre(e,t){return zt(z0.count(No(e)-1,e),t,2)}function _D(e){var t=e.getUTCDay();return t>=4||t===0?zd(e):zd.ceil(e)}function Dre(e,t){return e=_D(e),zt(zd.count(No(e),e)+(No(e).getUTCDay()===4),t,2)}function Rre(e){return e.getUTCDay()}function Mre(e,t){return zt(_y.count(No(e)-1,e),t,2)}function Fre(e,t){return zt(e.getUTCFullYear()%100,t,2)}function $re(e,t){return e=_D(e),zt(e.getUTCFullYear()%100,t,2)}function Bre(e,t){return zt(e.getUTCFullYear()%1e4,t,4)}function Ure(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zd(e):zd.ceil(e),zt(e.getUTCFullYear()%1e4,t,4)}function qre(){return"+0000"}function B3(){return"%"}function U3(e){return+e}function q3(e){return Math.floor(+e/1e3)}var qu,jD,SD;zre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zre(e){return qu=zte(e),jD=qu.format,qu.parse,SD=qu.utcFormat,qu.utcParse,qu}function Wre(e){return new Date(e)}function Hre(e){return e instanceof Date?+e:+new Date(+e)}function gj(e,t,r,n,i,a,s,o,c,u){var d=rj(),f=d.invert,p=d.domain,h=u(".%L"),y=u(":%S"),g=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),_=u("%b %d"),S=u("%B"),j=u("%Y");function N(A){return(c(A)<A?h:o(A)<A?y:s(A)<A?g:a(A)<A?x:n(A)<A?i(A)<A?v:_:r(A)<A?S:j)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?p(Array.from(A,Hre)):p().map(Wre)},d.ticks=function(A){var I=p();return e(I[0],I[I.length-1],A??10)},d.tickFormat=function(A,I){return I==null?N:u(I)},d.nice=function(A){var I=p();return(!A||typeof A.range!="function")&&(A=t(I[0],I[I.length-1],A??10)),A?p(uD(I,A)):d},d.copy=function(){return zp(d,gj(e,t,r,n,i,a,s,o,c,u))},d}function Vre(){return ka.apply(gj(Ute,qte,So,pj,q0,Wp,fj,uj,Ac,jD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Kre(){return ka.apply(gj($te,Bte,No,mj,z0,U0,hj,dj,Ac,SD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function W0(){var e=0,t=1,r,n,i,a,s=gi,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,y;return arguments.length?([h,y]=p,s=f(h,y),u):[s(0),s(1)]}}return u.range=d(tf),u.rangeRound=d(tj),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),u}}function Ul(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ND(){var e=Bl(W0()(gi));return e.copy=function(){return Ul(e,ND())},Lo.apply(e,arguments)}function kD(){var e=aj(W0()).domain([1,10]);return e.copy=function(){return Ul(e,kD()).base(e.base())},Lo.apply(e,arguments)}function AD(){var e=sj(W0());return e.copy=function(){return Ul(e,AD()).constant(e.constant())},Lo.apply(e,arguments)}function vj(){var e=oj(W0());return e.copy=function(){return Ul(e,vj()).exponent(e.exponent())},Lo.apply(e,arguments)}function Gre(){return vj.apply(null,arguments).exponent(.5)}function ED(){var e=[],t=gi;function r(n){if(n!=null&&!isNaN(n=+n))return t((Up(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Al),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Iee(e,a/n))},r.copy=function(){return ED(t).domain(e)},Lo.apply(r,arguments)}function H0(){var e=0,t=.5,r=1,n=1,i,a,s,o,c,u=gi,d,f=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+d(g))-a)*(n*g<n*a?o:c),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,r]=g,i=d(e=+e),a=d(t=+t),s=d(r=+r),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,h):[e,t,r]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function y(g){return function(x){var v,_,S;return arguments.length?([v,_,S]=x,u=ste(g,[v,_,S]),h):[u(0),u(.5),u(1)]}}return h.range=y(tf),h.rangeRound=y(tj),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return d=g,i=g(e),a=g(t),s=g(r),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,h}}function PD(){var e=Bl(H0()(gi));return e.copy=function(){return Ul(e,PD())},Lo.apply(e,arguments)}function CD(){var e=aj(H0()).domain([.1,1,10]);return e.copy=function(){return Ul(e,CD()).base(e.base())},Lo.apply(e,arguments)}function OD(){var e=sj(H0());return e.copy=function(){return Ul(e,OD()).constant(e.constant())},Lo.apply(e,arguments)}function yj(){var e=oj(H0());return e.copy=function(){return Ul(e,yj()).exponent(e.exponent())},Lo.apply(e,arguments)}function Yre(){return yj.apply(null,arguments).exponent(.5)}const hh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Z5,scaleDiverging:PD,scaleDivergingLog:CD,scaleDivergingPow:yj,scaleDivergingSqrt:Yre,scaleDivergingSymlog:OD,scaleIdentity:cD,scaleImplicit:$w,scaleLinear:lD,scaleLog:dD,scaleOrdinal:X5,scalePoint:Ree,scalePow:lj,scaleQuantile:pD,scaleQuantize:mD,scaleRadial:hD,scaleSequential:ND,scaleSequentialLog:kD,scaleSequentialPow:vj,scaleSequentialQuantile:ED,scaleSequentialSqrt:Gre,scaleSequentialSymlog:AD,scaleSqrt:Pte,scaleSymlog:fD,scaleThreshold:gD,scaleTime:Vre,scaleUtc:Kre,tickFormat:oD},Symbol.toStringTag,{value:"Module"}));var Do=e=>e.chartData,V0=ye([Do],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),xj=(e,t,r,n)=>n?V0(e):Do(e),Jre=(e,t,r)=>r?V0(e):Do(e);function ko(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Rt(t)&&Rt(r))return!0}return!1}function z3(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function TD(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(Rt(r))i=r;else if(typeof r=="function")return;if(Rt(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(ko(s))return s}}function Xre(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(ko(n))return z3(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if(Be(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&oE.test(i)){var c=oE.exec(i);if(c==null||c[1]==null||t==null)s=void 0;else{var u=+c[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(Be(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&lE.test(a)){var d=lE.exec(a);if(d==null||d[1]==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var p=[s,o];if(ko(p))return t==null?p:z3(p,t,r)}}}var rf=1e9,Zre={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wj,Er=!0,Na="[DecimalError] ",Lc=Na+"Invalid argument: ",bj=Na+"Exponent out of range: ",nf=Math.floor,vc=Math.pow,Qre=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vi,En=1e7,yr=7,ID=9007199254740991,jy=nf(ID/yr),Ue={};Ue.absoluteValue=Ue.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ue.comparedTo=Ue.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ue.dividedBy=Ue.div=function(e){return mo(this,new this.constructor(e))};Ue.dividedToIntegerBy=Ue.idiv=function(e){var t=this,r=t.constructor;return sr(mo(t,new r(e),0,1),r.precision)};Ue.equals=Ue.eq=function(e){return!this.cmp(e)};Ue.exponent=function(){return un(this)};Ue.greaterThan=Ue.gt=function(e){return this.cmp(e)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(e){return this.cmp(e)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(e){return this.cmp(e)<0};Ue.lessThanOrEqualTo=Ue.lte=function(e){return this.cmp(e)<1};Ue.logarithm=Ue.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Vi))throw Error(Na+"NaN");if(r.s<1)throw Error(Na+(r.s?"NaN":"-Infinity"));return r.eq(Vi)?new n(0):(Er=!1,t=mo(gp(r,a),gp(e,a),a),Er=!0,sr(t,i))};Ue.minus=Ue.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RD(t,e):LD(t,(e.s=-e.s,e))};Ue.modulo=Ue.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Na+"NaN");return r.s?(Er=!1,t=mo(r,e,0,1).times(e),Er=!0,r.minus(t)):sr(new n(r),i)};Ue.naturalExponential=Ue.exp=function(){return DD(this)};Ue.naturalLogarithm=Ue.ln=function(){return gp(this)};Ue.negated=Ue.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ue.plus=Ue.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LD(t,e):RD(t,(e.s=-e.s,e))};Ue.precision=Ue.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lc+e);if(t=un(i)+1,n=i.d.length-1,r=n*yr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ue.squareRoot=Ue.sqrt=function(){var e,t,r,n,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Na+"NaN")}for(e=un(o),Er=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=_s(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=nf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=s=r+3;;)if(a=n,n=a.plus(mo(o,a,s+2)).times(.5),_s(a.d).slice(0,s)===(t=_s(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(sr(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return Er=!0,sr(n,r)};Ue.times=Ue.mul=function(e){var t,r,n,i,a,s,o,c,u,d=this,f=d.constructor,p=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=p.length,u=h.length,c<u&&(a=p,p=h,h=a,s=c,c=u,u=s),a=[],s=c+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)o=a[i]+h[n]*p[i-n-1]+t,a[i--]=o%En|0,t=o/En|0;a[i]=(a[i]+t)%En|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Er?sr(e,f.precision):e};Ue.toDecimalPlaces=Ue.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Os(e,0,rf),t===void 0?t=n.rounding:Os(t,0,8),sr(r,e+un(r)+1,t))};Ue.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Xc(n,!0):(Os(e,0,rf),t===void 0?t=i.rounding:Os(t,0,8),n=sr(new i(n),e+1,t),r=Xc(n,!0,e+1)),r};Ue.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?Xc(i):(Os(e,0,rf),t===void 0?t=a.rounding:Os(t,0,8),n=sr(new a(i),e+un(i)+1,t),r=Xc(n.abs(),!1,e+un(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ue.toInteger=Ue.toint=function(){var e=this,t=e.constructor;return sr(new t(e),un(e)+1,t.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(e){var t,r,n,i,a,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Vi);if(o=new c(o),!o.s){if(e.s<1)throw Error(Na+"Infinity");return o}if(o.eq(Vi))return o;if(n=c.precision,e.eq(Vi))return sr(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=d<0?-d:d)<=ID){for(i=new c(Vi),t=Math.ceil(n/yr+4),Er=!1;r%2&&(i=i.times(o),H3(i.d,t)),r=nf(r/2),r!==0;)o=o.times(o),H3(o.d,t);return Er=!0,e.s<0?new c(Vi).div(i):sr(i,n)}}else if(a<0)throw Error(Na+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Er=!1,i=e.times(gp(o,n+u)),Er=!0,i=DD(i),i.s=a,i};Ue.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=un(i),n=Xc(i,r<=a.toExpNeg||r>=a.toExpPos)):(Os(e,1,rf),t===void 0?t=a.rounding:Os(t,0,8),i=sr(new a(i),e,t),r=un(i),n=Xc(i,e<=r||r<=a.toExpNeg,e)),n};Ue.toSignificantDigits=Ue.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Os(e,1,rf),t===void 0?t=n.rounding:Os(t,0,8)),sr(new n(r),e,t)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=un(e),r=e.constructor;return Xc(e,t<=r.toExpNeg||t>=r.toExpPos)};function LD(e,t){var r,n,i,a,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Er?sr(t,f):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i,a){for(a<0?(n=c,a=-a,o=u.length):(n=u,i=s,o=c.length),s=Math.ceil(f/yr),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/En|0,c[a]%=En;for(r&&(c.unshift(r),++i),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=i,Er?sr(t,f):t}function Os(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Lc+e)}function _s(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=yr-n.length,r&&(a+=ol(r)),a+=n;s=e[t],n=s+"",r=yr-n.length,r&&(a+=ol(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var mo=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%En|0,s=a/En|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=i[o]){c=n[o]>i[o]?1:-1;break}return c}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*En+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,c,u,d,f,p,h,y,g,x,v,_,S,j,N,A,I,E,C=n.constructor,D=n.s==i.s?1:-1,T=n.d,O=i.d;if(!n.s)return new C(n);if(!i.s)throw Error(Na+"Division by zero");for(c=n.e-i.e,I=O.length,N=T.length,h=new C(D),y=h.d=[],u=0;O[u]==(T[u]||0);)++u;if(O[u]>(T[u]||0)&&--c,a==null?_=a=C.precision:s?_=a+(un(n)-un(i))+1:_=a,_<0)return new C(0);if(_=_/yr+2|0,u=0,I==1)for(d=0,O=O[0],_++;(u<N||d)&&_--;u++)S=d*En+(T[u]||0),y[u]=S/O|0,d=S%O|0;else{for(d=En/(O[0]+1)|0,d>1&&(O=e(O,d),T=e(T,d),I=O.length,N=T.length),j=I,g=T.slice(0,I),x=g.length;x<I;)g[x++]=0;E=O.slice(),E.unshift(0),A=O[0],O[1]>=En/2&&++A;do d=0,o=t(O,g,I,x),o<0?(v=g[0],I!=x&&(v=v*En+(g[1]||0)),d=v/A|0,d>1?(d>=En&&(d=En-1),f=e(O,d),p=f.length,x=g.length,o=t(f,g,p,x),o==1&&(d--,r(f,I<p?E:O,p))):(d==0&&(o=d=1),f=O.slice()),p=f.length,p<x&&f.unshift(0),r(g,f,x),o==-1&&(x=g.length,o=t(O,g,I,x),o<1&&(d++,r(g,I<x?E:O,x))),x=g.length):o===0&&(d++,g=[0]),y[u++]=d,o&&g[0]?g[x++]=T[j]||0:(g=[T[j]],x=1);while((j++<N||g[0]!==void 0)&&_--)}return y[0]||y.shift(),h.e=c,sr(h,s?a+un(h)+1:a)}}();function DD(e,t){var r,n,i,a,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(un(e)>16)throw Error(bj+un(e));if(!e.s)return new d(Vi);for(Er=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(vc(2,u))/Math.LN10*2+5|0,o+=n,r=i=a=new d(Vi),d.precision=o;;){if(i=sr(i.times(e),o),r=r.times(++c),s=a.plus(mo(i,r,o)),_s(s.d).slice(0,o)===_s(a.d).slice(0,o)){for(;u--;)a=sr(a.times(a),o);return d.precision=f,t==null?(Er=!0,sr(a,f)):a}a=s}}function un(e){for(var t=e.e*yr,r=e.d[0];r>=10;r/=10)t++;return t}function Sb(e,t,r){if(t>e.LN10.sd())throw Er=!0,r&&(e.precision=r),Error(Na+"LN10 precision limit exceeded");return sr(new e(e.LN10),t)}function ol(e){for(var t="";e--;)t+="0";return t}function gp(e,t){var r,n,i,a,s,o,c,u,d,f=1,p=10,h=e,y=h.d,g=h.constructor,x=g.precision;if(h.s<1)throw Error(Na+(h.s?"NaN":"-Infinity"));if(h.eq(Vi))return new g(0);if(t==null?(Er=!1,u=x):u=t,h.eq(10))return t==null&&(Er=!0),Sb(g,u);if(u+=p,g.precision=u,r=_s(y),n=r.charAt(0),a=un(h),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=_s(h.d),n=r.charAt(0),f++;a=un(h),n>1?(h=new g("0."+r),a++):h=new g(n+"."+r.slice(1))}else return c=Sb(g,u+2,x).times(a+""),h=gp(new g(n+"."+r.slice(1)),u-p).plus(c),g.precision=x,t==null?(Er=!0,sr(h,x)):h;for(o=s=h=mo(h.minus(Vi),h.plus(Vi),u),d=sr(h.times(h),u),i=3;;){if(s=sr(s.times(d),u),c=o.plus(mo(s,new g(i),u)),_s(c.d).slice(0,u)===_s(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(Sb(g,u+2,x).times(a+""))),o=mo(o,new g(f),u),g.precision=x,t==null?(Er=!0,sr(o,x)):o;o=c,i+=2}}function W3(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=nf(r/yr),e.d=[],n=(r+1)%yr,r<0&&(n+=yr),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=yr;n<i;)e.d.push(+t.slice(n,n+=yr));t=t.slice(n),n=yr-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Er&&(e.e>jy||e.e<-jy))throw Error(bj+r)}else e.s=0,e.e=0,e.d=[0];return e}function sr(e,t,r){var n,i,a,s,o,c,u,d,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=yr,i=t,u=f[d=0];else{if(d=Math.ceil((n+1)/yr),a=f.length,d>=a)return e;for(u=a=f[d],s=1;a>=10;a/=10)s++;n%=yr,i=n-yr+s}if(r!==void 0&&(a=vc(10,s-i-1),o=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?i>0?u/vc(10,s-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(a=un(e),f.length=1,t=t-a-1,f[0]=vc(10,(yr-t%yr)%yr),e.e=nf(-t/yr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=vc(10,yr-n),f[d]=i>0?(u/vc(10,s-i)%vc(10,i)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==En&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=En)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Er&&(e.e>jy||e.e<-jy))throw Error(bj+un(e));return e}function RD(e,t){var r,n,i,a,s,o,c,u,d,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Er?sr(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),i=Math.max(Math.ceil(h/yr),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>s;){if(c[--i]<f[i]){for(a=i;a&&c[--a]===0;)c[a]=En-1;--c[a],c[i]+=En}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Er?sr(t,h):t):new p(0)}function Xc(e,t,r){var n,i=un(e),a=_s(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+ol(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ol(-i-1)+a,r&&(n=r-s)>0&&(a+=ol(n))):i>=s?(a+=ol(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+ol(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=ol(n))),e.s<0?"-"+a:a}function H3(e,t){if(e.length>t)return e.length=t,!0}function MD(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Lc+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return W3(s,a.toString())}else if(typeof a!="string")throw Error(Lc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Qre.test(a))W3(s,a);else throw Error(Lc+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=MD,i.config=i.set=ene,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function ene(e){if(!e||typeof e!="object")throw Error(Na+"Object expected");var t,r,n,i=["precision",1,rf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(nf(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Lc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Lc+r+": "+n);return this}var wj=MD(Zre);Vi=new wj(1);const Qt=wj;function FD(e){var t;return e===0?t=1:t=Math.floor(new Qt(e).abs().log(10).toNumber())+1,t}function $D(e,t,r){for(var n=new Qt(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var BD=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},UD=(e,t,r)=>{if(e.lte(0))return new Qt(0);var n=FD(e.toNumber()),i=new Qt(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new Qt(Math.ceil(a.div(s).toNumber())).add(r).mul(s),c=o.mul(i);return t?new Qt(c.toNumber()):new Qt(Math.ceil(c.toNumber()))},tne=(e,t,r)=>{var n=new Qt(1),i=new Qt(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new Qt(10).pow(FD(e)-1),i=new Qt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Qt(Math.floor(e)))}else e===0?i=new Qt(Math.floor((t-1)/2)):r||(i=new Qt(Math.floor(e)));for(var s=Math.floor((t-1)/2),o=[],c=0;c<t;c++)o.push(i.add(new Qt(c-s).mul(n)).toNumber());return o},qD=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Qt(0),tickMin:new Qt(0),tickMax:new Qt(0)};var s=UD(new Qt(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new Qt(0):(o=new Qt(t).add(r).div(2),o=o.sub(new Qt(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),u=Math.ceil(new Qt(r).sub(o).div(s).toNumber()),d=c+u+1;return d>n?qD(t,r,n,i,a+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:s,tickMin:o.sub(new Qt(c).mul(s)),tickMax:o.add(new Qt(u).mul(s))})},rne=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=BD([r,n]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return r>n?u.reverse():u}if(o===c)return tne(o,i,a);var{step:d,tickMin:f,tickMax:p}=qD(o,c,s,a,0),h=$D(f,p.add(new Qt(.1).mul(d)),d);return r>n?h.reverse():h},nne=function(t,r){var[n,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=BD([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var c=Math.max(r,2),u=UD(new Qt(o).sub(s).div(c-1),a,0),d=[...$D(new Qt(s),new Qt(o),u),o];return a===!1&&(d=d.map(f=>Math.round(f))),n>i?d.reverse():d},zD=e=>e.rootProps.maxBarSize,ine=e=>e.rootProps.barGap,WD=e=>e.rootProps.barCategoryGap,ane=e=>e.rootProps.barSize,Hp=e=>e.rootProps.stackOffset,HD=e=>e.rootProps.reverseStackOrder,_j=e=>e.options.chartName,jj=e=>e.rootProps.syncId,VD=e=>e.rootProps.syncMethod,Sj=e=>e.options.eventEmitter,cn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},uc={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},hs={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},K0=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function G0(e,t,r){if(r!=="auto")return r;if(e!=null)return Oo(e,t)?"category":"number"}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){sne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sne(e,t,r){return(t=one(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function one(e){var t=lne(e,"string");return typeof t=="symbol"?t:t+""}function lne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K3={allowDataOverflow:uc.allowDataOverflow,allowDecimals:uc.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:uc.angleAxisId,includeHidden:!1,name:void 0,reversed:uc.reversed,scale:uc.scale,tick:uc.tick,tickCount:void 0,ticks:void 0,type:uc.type,unit:void 0},G3={allowDataOverflow:hs.allowDataOverflow,allowDecimals:hs.allowDecimals,allowDuplicatedCategory:hs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hs.radiusAxisId,includeHidden:hs.includeHidden,name:void 0,reversed:hs.reversed,scale:hs.scale,tick:hs.tick,tickCount:hs.tickCount,ticks:void 0,type:hs.type,unit:void 0},cne=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},Nj=ye([cne,E8],(e,t)=>{var r;if(e!=null)return e;var n=(r=G0(t,"angleAxis",K3.type))!==null&&r!==void 0?r:"category";return Sy(Sy({},K3),{},{type:n})}),une=(e,t)=>e.polarAxis.radiusAxis[t],kj=ye([une,E8],(e,t)=>{var r;if(e!=null)return e;var n=(r=G0(t,"radiusAxis",G3.type))!==null&&r!==void 0?r:"category";return Sy(Sy({},G3),{},{type:n})}),Y0=e=>e.polarOptions,Aj=ye([To,Io,_n],H8),KD=ye([Y0,Aj],(e,t)=>{if(e!=null)return oi(e.innerRadius,t,0)}),GD=ye([Y0,Aj],(e,t)=>{if(e!=null)return oi(e.outerRadius,t,t*.8)}),dne=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},YD=ye([Y0],dne);ye([Nj,YD],K0);var JD=ye([Aj,KD,GD],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ye([kj,JD],K0);var XD=ye([Ht,Y0,KD,GD,To,Io],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=t;return{cx:oi(s,i,i/2),cy:oi(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Lr=(e,t)=>t,Vp=(e,t,r)=>r;function Ej(e){return e==null?void 0:e.id}function ZD(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=Ej(o);u.forEach((f,p)=>{var h=a==null||i?p:String(rr(f,a,null)),y=rr(f,o.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[d]:y}),s.set(h,g)})}}),Array.from(s.values())}function J0(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var X0=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Z0(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function fne(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Dn=e=>{var t=Ht(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},af=e=>e.tooltip.settings.axisId;function hne(e){if(e in hh)return hh[e]();var t="scale".concat(Tp(e));if(t in hh)return hh[t]()}function Y3(e){var t=e.ticks,r=e.bandwidth,n=e.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s}(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:r?()=>r.call(e):void 0,ticks:t?a=>t.call(e,a):void 0,map:(a,s)=>{var o=e(a);if(o!=null){if(e.bandwidth&&s!==null&&s!==void 0&&s.position){var c=e.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function J3(e,t,r){if(typeof e=="function")return Y3(e.copy().domain(t).range(r));if(e!=null){var n=hne(e);if(n!=null)return n.domain(t).range(r),Y3(n)}}var QD=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!ko(t)){for(var r,n,i=0;i<t.length;i++){var a=t[i];Rt(a)&&((r===void 0||a<r)&&(r=a),(n===void 0||a>n)&&(n=a))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(n){pne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pne(e,t,r){return(t=mne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mne(e){var t=gne(e,"string");return typeof t=="symbol"?t:t+""}function gne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zw=[0,"auto"],kn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},eR=(e,t)=>e.cartesianAxis.xAxis[t],Ro=(e,t)=>{var r=eR(e,t);return r??kn},An={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:zw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Rp},tR=(e,t)=>e.cartesianAxis.yAxis[t],Mo=(e,t)=>{var r=tR(e,t);return r??An},vne={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Pj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??vne},Vr=(e,t,r)=>{switch(t){case"xAxis":return Ro(e,r);case"yAxis":return Mo(e,r);case"zAxis":return Pj(e,r);case"angleAxis":return Nj(e,r);case"radiusAxis":return kj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yne=(e,t,r)=>{switch(t){case"xAxis":return Ro(e,r);case"yAxis":return Mo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},sf=(e,t,r)=>{switch(t){case"xAxis":return Ro(e,r);case"yAxis":return Mo(e,r);case"angleAxis":return Nj(e,r);case"radiusAxis":return kj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rR=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Cj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Q0=e=>e.graphicalItems.cartesianItems,xne=ye([Lr,Vp],Cj),Oj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Kp=ye([Q0,Vr,xne],Oj,{memoizeOptions:{resultEqualityCheck:Z0}}),nR=ye([Kp],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(J0)),iR=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),bne=ye([Kp],iR),Tj=e=>e.map(t=>t.data).filter(Boolean).flat(1),wne=ye([Kp],Tj,{memoizeOptions:{resultEqualityCheck:Z0}}),Ij=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},Lj=ye([wne,xj],Ij),Dj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:rr(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:rr(i,n)}))):e.map(n=>({value:n})),ex=ye([Lj,Vr,Kp],Dj);function aR(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function tv(e){if(Ps(e)||e instanceof Date){var t=Number(e);if(Rt(t))return t}}function Z3(e){if(Array.isArray(e)){var t=[tv(e[0]),tv(e[1])];return ko(t)?t:void 0}var r=tv(e);if(r!=null)return[r,r]}function Ao(e){return e.map(tv).filter(Ai)}function _ne(e,t,r){return!r||typeof t!="number"||Es(t)?[]:r.length?Ao(r.flatMap(n=>{var i=rr(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Rt(a)||!Rt(s)))return[t-a,t+s]})):[]}var Sn=e=>{var t=Dn(e),r=af(e);return sf(e,t,r)},Gp=ye([Sn],e=>e==null?void 0:e.dataKey),jne=ye([nR,xj,Sn],ZD),sR=(e,t,r,n)=>{var i={},a=t.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=n?[...c].reverse():c,d=u.map(Ej);return[o,{stackedData:XX(e,d,r),graphicalItems:u}]}))},Ww=ye([jne,nR,Hp,HD],sR),oR=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var s=rZ(e,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Sne=ye([Vr],e=>e.allowDataOverflow),Rj=e=>{var t;if(e==null||!("domain"in e))return zw;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Ao(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:zw},Mj=ye([Vr],Rj),Fj=ye([Mj,Sne],TD),Nne=ye([Ww,Do,Lr,Fj],oR,{memoizeOptions:{resultEqualityCheck:X0}}),tx=e=>e.errorBars,kne=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>aR(r,n)),ky=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},$j=(e,t,r,n,i)=>{var a,s;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>aR(i,v)),p=rr(o,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),h=_ne(o,p,f);if(h.length>=2){var y=Math.min(...h),g=Math.max(...h);(a==null||y<a)&&(a=y),(s==null||g>s)&&(s=g)}var x=Z3(p);x!=null&&(a=a==null?x[0]:Math.min(a,x[0]),s=s==null?x[1]:Math.max(s,x[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=Z3(rr(o,t.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Rt(a)&&Rt(s))return[a,s]},Ane=ye([Lj,Vr,bne,tx,Lr],$j,{memoizeOptions:{resultEqualityCheck:X0}});function Ene(e){var{value:t}=e;if(Ps(t)||t instanceof Date)return t}var Pne=(e,t,r)=>{var n=e.map(Ene).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&iL(n))?Z8(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},lR=e=>e.referenceElements.dots,of=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Cne=ye([lR,Lr,Vp],of),cR=e=>e.referenceElements.areas,One=ye([cR,Lr,Vp],of),uR=e=>e.referenceElements.lines,Tne=ye([uR,Lr,Vp],of),dR=(e,t)=>{if(e!=null){var r=Ao(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Ine=ye(Cne,Lr,dR),fR=(e,t)=>{if(e!=null){var r=Ao(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Lne=ye([One,Lr],fR);function Dne(e){var t;if(e.x!=null)return Ao([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Ao(r)}function Rne(e){var t;if(e.y!=null)return Ao([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Ao(r)}var hR=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?Dne(n):Rne(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Mne=ye([Tne,Lr],hR),Fne=ye(Ine,Mne,Lne,(e,t,r)=>ky(e,r,t)),Bj=(e,t,r,n,i,a,s,o)=>{if(r!=null)return r;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?ky(n,a,i):ky(a,i);return Xre(t,u,e.allowDataOverflow)},$ne=ye([Vr,Mj,Fj,Nne,Ane,Fne,Ht,Lr],Bj,{memoizeOptions:{resultEqualityCheck:X0}}),Bne=[0,1],Uj=(e,t,r,n,i,a,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:c}=e,u=Oo(t,a);if(u&&o==null){var d;return Z8(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?Pne(n,e,u):i==="expand"?Bne:s}},qj=ye([Vr,Ht,Lj,ex,Hp,Lr,$ne],Uj);function Une(e){return e in hh}var pR=(e,t,r)=>{if(e!=null){var{scale:n,type:i}=e;if(n==="auto")return i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":i==="category"?"band":"linear";if(typeof n=="string"){var a="scale".concat(Tp(n));return Une(a)?a:"point"}}},ql=ye([Vr,rR,_j],pR);function zj(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?J3(e.scale,r,n):J3(t,r,n)}var Wj=(e,t,r)=>{var n=Rj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&ko(e))return rne(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ko(e))return nne(e,t.tickCount,t.allowDecimals)}},Hj=ye([qj,sf,ql],Wj),Vj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&ko(t)&&Array.isArray(r)&&r.length>0){var i,a,s=t[0],o=(i=r[0])!==null&&i!==void 0?i:0,c=t[1],u=(a=r[r.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,u)]}return t},qne=ye([Vr,qj,Hj,Lr],Vj),zne=ye(ex,Vr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Ao(e.map(f=>f.value))).sort((f,p)=>f-p),i=n[0],a=n[n.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<n.length-1;o++){var c=n[o],u=n[o+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/s}}),mR=ye(zne,Ht,WD,_n,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!Rt(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=oi(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),Wne=(e,t,r)=>{var n=Ro(e,t);return n==null||typeof n.padding!="string"?0:mR(e,"xAxis",t,r,n.padding)},Hne=(e,t,r)=>{var n=Mo(e,t);return n==null||typeof n.padding!="string"?0:mR(e,"yAxis",t,r,n.padding)},Vne=ye(Ro,Wne,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),Kne=ye(Mo,Hne,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),Gne=ye([_n,Vne,L0,I0,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Yne=ye([_n,Ht,Kne,L0,I0,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Yp=(e,t,r,n)=>{var i;switch(t){case"xAxis":return Gne(e,r,n);case"yAxis":return Yne(e,r,n);case"zAxis":return(i=Pj(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return YD(e);case"radiusAxis":return JD(e,r);default:return}},gR=ye([Vr,Yp],K0),Jne=ye([ql,qne],QD),rx=ye([Vr,ql,Jne,gR],zj);ye([Kp,tx,Lr],kne);function vR(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var nx=(e,t)=>t,ix=(e,t,r)=>r,Xne=ye(O0,nx,ix,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(vR)),Zne=ye(T0,nx,ix,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(vR)),yR=(e,t)=>({width:e.width,height:t.height}),Qne=(e,t)=>{var r=typeof t.width=="number"?t.width:Rp;return{width:r,height:e.height}},xR=ye(_n,Ro,yR),eie=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},tie=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},rie=ye(Io,_n,Xne,nx,ix,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var c=yR(t,o);s==null&&(s=eie(t,n,e));var u=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),nie=ye(To,_n,Zne,nx,ix,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var c=Qne(t,o);s==null&&(s=tie(t,n,e));var u=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),iie=(e,t)=>{var r=Ro(e,t);if(r!=null)return rie(e,r.orientation,r.mirror)},aie=ye([_n,Ro,iie,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),sie=(e,t)=>{var r=Mo(e,t);if(r!=null)return nie(e,r.orientation,r.mirror)},oie=ye([_n,Mo,sie,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),bR=ye(_n,Mo,(e,t)=>{var r=typeof t.width=="number"?t.width:Rp;return{width:r,height:e.height}}),Q3=(e,t,r)=>{switch(t){case"xAxis":return xR(e,r).width;case"yAxis":return bR(e,r).height;default:return}},wR=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=Oo(e,n),c=t.map(u=>u.value);if(s&&o&&a==="category"&&i&&iL(c))return c}},Kj=ye([Ht,ex,Vr,Lr],wR),_R=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=Oo(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},Gj=ye([Ht,ex,sf,Lr],_R),eP=ye([Ht,yne,ql,rx,Kj,Gj,Yp,Hj,Lr],(e,t,r,n,i,a,s,o,c)=>{if(t!=null){var u=Oo(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),lie=(e,t,r,n,i,a,s,o,c)=>{if(!(t==null||n==null)){var u=Oo(e,c),{type:d,ticks:f,tickCount:p}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=d==="category"&&n.bandwidth?n.bandwidth()/h:0;y=c==="angleAxis"&&a!=null&&a.length>=2?On(a[0]-a[1])*2*y:y;var g=f||i;return g?g.map((x,v)=>{var _=s?s.indexOf(x):x,S=n.map(_);return Rt(S)?{index:v,coordinate:S+y,value:x,offset:y}:null}).filter(Ai):u&&o?o.map((x,v)=>{var _=n.map(x);return Rt(_)?{coordinate:_+y,value:x,index:v,offset:y}:null}).filter(Ai):n.ticks?n.ticks(p).map((x,v)=>{var _=n.map(x);return Rt(_)?{coordinate:_+y,value:x,index:v,offset:y}:null}).filter(Ai):n.domain().map((x,v)=>{var _=n.map(x);return Rt(_)?{coordinate:_+y,value:s?s[x]:x,index:v,offset:y}:null}).filter(Ai)}},jR=ye([Ht,sf,ql,rx,Hj,Yp,Kj,Gj,Lr],lie),cie=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Oo(e,s),{tickCount:c}=t,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?On(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>{var p=r.map(d);return Rt(p)?{coordinate:p+u,value:d,index:f,offset:u}:null}).filter(Ai):r.ticks?r.ticks(c).map((d,f)=>{var p=r.map(d);return Rt(p)?{coordinate:p+u,value:d,index:f,offset:u}:null}).filter(Ai):r.domain().map((d,f)=>{var p=r.map(d);return Rt(p)?{coordinate:p+u,value:i?i[d]:d,index:f,offset:u}:null}).filter(Ai)}},Tl=ye([Ht,sf,rx,Yp,Kj,Gj,Lr],cie),Il=ye(Vr,rx,(e,t)=>{if(!(e==null||t==null))return Ny(Ny({},e),{},{scale:t})}),uie=ye([Vr,ql,qj,gR],zj);ye((e,t,r)=>Pj(e,r),uie,(e,t)=>{if(!(e==null||t==null))return Ny(Ny({},e),{},{scale:t})});var die=ye([Ht,O0,T0],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),SR=e=>e.options.defaultTooltipEventType,NR=e=>e.options.validateTooltipEventTypes;function kR(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Yj(e,t){var r=SR(e),n=NR(e);return kR(t,r,n)}function fie(e){return Ve(t=>Yj(t,e))}var AR=(e,t)=>{var r,n=Number(t);if(!(Es(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},hie=e=>e.tooltip.settings,fl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},pie={itemInteraction:{click:fl,hover:fl},axisInteraction:{click:fl,hover:fl},keyboardInteraction:fl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},ER=Ii({name:"tooltip",initialState:pie,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Sr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ga(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Sr()},removeTooltipEntrySettings:{reducer(e,t){var r=Ga(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Sr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:mie,replaceTooltipEntrySettings:gie,removeTooltipEntrySettings:vie,setTooltipSettingsState:yie,setActiveMouseOverItemIndex:PR,mouseLeaveItem:xie,mouseLeaveChart:CR,setActiveClickItemIndex:bie,setMouseOverAxisIndex:OR,setMouseClickAxisIndex:wie,setSyncInteraction:Hw,setKeyboardInteraction:Vw}=ER.actions,_ie=ER.reducer;function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(n){jie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jie(e,t,r){return(t=Sie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sie(e){var t=Nie(e,"string");return typeof t=="symbol"?t:t+""}function Nie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kie(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Aie(e){return e.index!=null}var TR=(e,t,r,n)=>{if(t==null)return fl;var i=kie(e,t,r);if(i==null)return fl;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Aie(i)){if(a)return Pg(Pg({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Pg(Pg({},fl),{},{coordinate:i.coordinate})};function Eie(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function Pie(e,t){var r=Eie(e),n=t[0],i=t[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function Cie(e,t,r){if(r==null||t==null)return!0;var n=rr(e,t);return n==null||!ko(r)?!0:Pie(n,r)}var Jj=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!Rt(a))return i;var s=0,o=1/0;t.length>0&&(o=t.length-1);var c=Math.max(s,Math.min(a,o)),u=t[c];return u==null||Cie(u,r,n)?String(c):null},IR=(e,t,r,n,i,a,s)=>{if(a!=null){var o=s[0],c=o==null?void 0:o.getPosition(a);if(c!=null)return c;var u=i==null?void 0:i[Number(a)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},LR=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var a=e.tooltipItemPayloads[0];return a!=null?[a]:[]}return e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},DR=e=>e.options.tooltipPayloadSearcher,lf=e=>e.tooltip;function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(r),!0).forEach(function(n){Oie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oie(e,t,r){return(t=Tie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tie(e){var t=Iie(e,"string");return typeof t=="symbol"?t:t+""}function Iie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lie(e,t){return e??t}var RR=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((p,h)=>{var y,{dataDefinedOnItem:g,settings:x}=h,v=Lie(g,o),_=Array.isArray(v)?p8(v,u,d):v,S=(y=x==null?void 0:x.dataKey)!==null&&y!==void 0?y:n,j=x==null?void 0:x.nameKey,N;if(n&&Array.isArray(_)&&!Array.isArray(_[0])&&s==="axis"?N=aL(_,n,i):N=a(_,t,c,j),Array.isArray(N))N.forEach(I=>{var E=nP(nP({},x),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});p.push(cE({tooltipEntrySettings:E,dataKey:I.dataKey,payload:I.payload,value:rr(I.payload,I.dataKey),name:I.name}))});else{var A;p.push(cE({tooltipEntrySettings:x,dataKey:S,payload:N,value:rr(N,S),name:(A=rr(N,j))!==null&&A!==void 0?A:x==null?void 0:x.name}))}return p},f)}},Xj=ye([Sn,rR,_j],pR),Die=ye([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Rie=ye([Dn,af],Cj),cf=ye([Die,Sn,Rie],Oj,{memoizeOptions:{resultEqualityCheck:Z0}}),Mie=ye([cf],e=>e.filter(J0)),Fie=ye([cf],Tj,{memoizeOptions:{resultEqualityCheck:Z0}}),uf=ye([Fie,Do],Ij),$ie=ye([Mie,Do,Sn],ZD),Zj=ye([uf,Sn,cf],Dj),MR=ye([Sn],Rj),Bie=ye([Sn],e=>e.allowDataOverflow),FR=ye([MR,Bie],TD),Uie=ye([cf],e=>e.filter(J0)),qie=ye([$ie,Uie,Hp,HD],sR),zie=ye([qie,Do,Dn,FR],oR),Wie=ye([cf],iR),Hie=ye([uf,Sn,Wie,tx,Dn],$j,{memoizeOptions:{resultEqualityCheck:X0}}),Vie=ye([lR,Dn,af],of),Kie=ye([Vie,Dn],dR),Gie=ye([cR,Dn,af],of),Yie=ye([Gie,Dn],fR),Jie=ye([uR,Dn,af],of),Xie=ye([Jie,Dn],hR),Zie=ye([Kie,Xie,Yie],ky),Qie=ye([Sn,MR,FR,zie,Hie,Zie,Ht,Dn],Bj),Jp=ye([Sn,Ht,uf,Zj,Hp,Dn,Qie],Uj),eae=ye([Jp,Sn,Xj],Wj),tae=ye([Sn,Jp,eae,Dn],Vj),$R=e=>{var t=Dn(e),r=af(e),n=!1;return Yp(e,t,r,n)},BR=ye([Sn,$R],K0),UR=ye([Sn,Xj,tae,BR],zj),rae=ye([Ht,Zj,Sn,Dn],wR),nae=ye([Ht,Zj,Sn,Dn],_R),iae=(e,t,r,n,i,a,s,o)=>{if(t){var{type:c}=t,u=Oo(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?On(i[0]-i[1])*2*f:f,u&&s?s.map((p,h)=>{var y=n.map(p);return Rt(y)?{coordinate:y+f,value:p,index:h,offset:f}:null}).filter(Ai):n.domain().map((p,h)=>{var y=n.map(p);return Rt(y)?{coordinate:y+f,value:a?a[p]:p,index:h,offset:f}:null}).filter(Ai)}}},Fo=ye([Ht,Sn,Xj,UR,$R,rae,nae,Dn],iae),Qj=ye([SR,NR,hie],(e,t,r)=>kR(r.shared,e,t)),qR=e=>e.tooltip.settings.trigger,eS=e=>e.tooltip.settings.defaultIndex,Xp=ye([lf,Qj,qR,eS],TR),Ll=ye([Xp,uf,Gp,Jp],Jj),zR=ye([Fo,Ll],AR),tS=ye([Xp],e=>{if(e)return e.dataKey}),aae=ye([Xp],e=>{if(e)return e.graphicalItemId}),WR=ye([lf,Qj,qR,eS],LR),sae=ye([To,Io,Ht,_n,Fo,eS,WR],IR),oae=ye([Xp,sae],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),lae=ye([Xp],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),cae=ye([WR,Ll,Do,Gp,zR,DR,Qj],RR),uae=ye([cae],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(r),!0).forEach(function(n){dae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dae(e,t,r){return(t=fae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fae(e){var t=hae(e,"string");return typeof t=="symbol"?t:t+""}function hae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pae=()=>Ve(Sn),mae=()=>{var e=pae(),t=Ve(Fo),r=Ve(UR);return Fd(!e||!r?void 0:aP(aP({},e),{},{scale:r}),t)};function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gae(e,t,r){return(t=vae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xae=(e,t,r,n)=>{var i=t.find(a=>a&&a.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},bae=(e,t,r,n)=>{var i=t.find(u=>u&&u.index===r);if(i){if(e==="centric"){var a=i.coordinate,{radius:s}=n;return zu(zu(zu({},n),ln(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=n;return zu(zu(zu({},n),ln(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function wae(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var HR=(e,t,r,n,i)=>{var a,s=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(s<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,d,f,p,h=o>0?(c=r[o-1])===null||c===void 0?void 0:c.coordinate:(u=r[s-1])===null||u===void 0?void 0:u.coordinate,y=(d=r[o])===null||d===void 0?void 0:d.coordinate,g=o>=s-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(p=r[o+1])===null||p===void 0?void 0:p.coordinate,x=void 0;if(!(h==null||y==null||g==null))if(On(y-h)!==On(g-y)){var v=[];if(On(g-y)===On(i[1]-i[0])){x=g;var _=y+i[1]-i[0];v[0]=Math.min(_,(_+h)/2),v[1]=Math.max(_,(_+h)/2)}else{x=h;var S=g+i[1]-i[0];v[0]=Math.min(y,(S+y)/2),v[1]=Math.max(y,(S+y)/2)}var j=[Math.min(y,(x+y)/2),Math.max(y,(x+y)/2)];if(e>j[0]&&e<=j[1]||e>=v[0]&&e<=v[1]){var N;return(N=r[o])===null||N===void 0?void 0:N.index}}else{var A=Math.min(h,g),I=Math.max(h,g);if(e>(A+y)/2&&e<=(I+y)/2){var E;return(E=r[o])===null||E===void 0?void 0:E.index}}}else if(t)for(var C=0;C<s;C++){var D=t[C];if(D!=null){var T=t[C+1],O=t[C-1];if(C===0&&T!=null&&e<=(D.coordinate+T.coordinate)/2||C===s-1&&O!=null&&e>(D.coordinate+O.coordinate)/2||C>0&&C<s-1&&O!=null&&T!=null&&e>(D.coordinate+O.coordinate)/2&&e<=(D.coordinate+T.coordinate)/2)return D.index}}return-1},_ae=()=>Ve(_j),rS=(e,t)=>t,VR=(e,t,r)=>r,nS=(e,t,r,n)=>n,jae=ye(Fo,e=>w0(e,t=>t.coordinate)),iS=ye([lf,rS,VR,nS],TR),aS=ye([iS,uf,Gp,Jp],Jj),Sae=(e,t,r)=>{if(t!=null){var n=lf(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},KR=ye([lf,rS,VR,nS],LR),Ay=ye([To,Io,Ht,_n,Fo,nS,KR],IR),Nae=ye([iS,Ay],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),GR=ye([Fo,aS],AR),kae=ye([KR,aS,Do,Gp,GR,DR,rS],RR),Aae=ye([iS,aS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Eae=(e,t,r,n,i,a,s)=>{if(!(!e||!r||!n||!i)&&wae(e,s)){var o=nZ(e,t),c=HR(o,a,i,r,n),u=xae(t,i,c,e);return{activeIndex:String(c),activeCoordinate:u}}},Pae=(e,t,r,n,i,a,s)=>{if(!(!e||!n||!i||!a||!r)){var o=gee(e,r);if(o){var c=iZ(o,t),u=HR(c,s,a,n,i),d=bae(t,a,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},Cae=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a))return t==="horizontal"||t==="vertical"?Eae(e,t,n,i,a,s,o):Pae(e,t,r,n,i,a,s)},Oae=ye(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),Tae=ye(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(cn)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:fne}});function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(n){Iae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iae(e,t,r){return(t=Lae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lae(e){var t=Dae(e,"string");return typeof t=="symbol"?t:t+""}function Dae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rae={},Mae={zIndexMap:Object.values(cn).reduce((e,t)=>lP(lP({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Rae)},Fae=new Set(Object.values(cn));function $ae(e){return Fae.has(e)}var YR=Ii({name:"zIndex",initialState:Mae,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Sr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!$ae(r)&&delete e.zIndexMap[r])},prepare:Sr()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Sr()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Sr()}}}),{registerZIndexPortal:Bae,unregisterZIndexPortal:Uae,registerZIndexPortalElement:qae,unregisterZIndexPortalElement:zae}=YR.actions,Wae=YR.reducer;function Li(e){var{zIndex:t,children:r}=e,n=OZ(),i=n&&t!==void 0&&t!==0,a=ci(),s=mr();b.useLayoutEffect(()=>i?(s(Bae({zIndex:t})),()=>{s(Uae({zIndex:t}))}):fu,[s,t,i]);var o=Ve(c=>Oae(c,t,a));return i?o?Qy.createPortal(r,o):null:r}function Kw(){return Kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kw.apply(null,arguments)}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(n){Hae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hae(e,t,r){return(t=Vae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=Kae(e,"string");return typeof t=="symbol"?t:t+""}function Kae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gae(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return b.isValidElement(t)?b.cloneElement(t,n):b.createElement(r,n)}function Yae(e){var t,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:d}=e,f=r,p=n,h=i;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var y,g,x;if(d==="ScatterChart")y=f,g=CQ,x=cn.cursorLine;else if(d==="BarChart")y=OQ(o,f,a,s),g=W8,x=cn.cursorRectangle;else if(o==="radial"&&oL(f)){var{cx:v,cy:_,radius:S,startAngle:j,endAngle:N}=V8(f);y={cx:v,cy:_,startAngle:j,endAngle:N,innerRadius:S,outerRadius:S},g=G8,x=cn.cursorLine}else y={points:bee(o,f,a)},g=Y5,x=cn.cursorLine;var A=typeof c=="object"&&"className"in c?c.className:void 0,I=Cg(Cg(Cg(Cg({stroke:"#ccc",pointerEvents:"none"},a),y),zc(c)),{},{payload:p,payloadIndex:h,className:Ut("recharts-tooltip-cursor",A)});return b.createElement(Li,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:x},b.createElement(Gae,{cursor:c,cursorComp:g,cursorProps:I}))}function Jae(e){var t=mae(),r=k8(),n=hu(),i=_ae();return t==null||r==null||n==null||i==null?null:b.createElement(Yae,Kw({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var JR=b.createContext(null),Xae=()=>b.useContext(JR),XR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||c,p),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],h]:c._events[y].push(h):(c._events[y]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,y=new Array(h);p<h;p++)y[p]=f[p].fn;return y},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,y){var g=r?r+u:u;if(!this._events[g])return!1;var x=this._events[g],v=arguments.length,_,S;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,h),!0;case 6:return x.fn.call(x.context,d,f,p,h,y),!0}for(S=1,_=new Array(v-1);S<v;S++)_[S-1]=arguments[S];x.fn.apply(x.context,_)}else{var j=x.length,N;for(S=0;S<j;S++)switch(x[S].once&&this.removeListener(u,x[S].fn,void 0,!0),v){case 1:x[S].fn.call(x[S].context);break;case 2:x[S].fn.call(x[S].context,d);break;case 3:x[S].fn.call(x[S].context,d,f);break;case 4:x[S].fn.call(x[S].context,d,f,p);break;default:if(!_)for(N=1,_=new Array(v-1);N<v;N++)_[N-1]=arguments[N];x[S].fn.apply(x[S].context,_)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var y=this._events[h];if(y.fn)y.fn===d&&(!p||y.once)&&(!f||y.context===f)&&s(this,h);else{for(var g=0,x=[],v=y.length;g<v;g++)(y[g].fn!==d||p&&!y[g].once||f&&y[g].context!==f)&&x.push(y[g]);x.length?this._events[h]=x.length===1?x[0]:x:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(XR);var Zae=XR.exports;const Qae=Ts(Zae);var vp=new Qae,Gw="recharts.syncEvent.tooltip",uP="recharts.syncEvent.brush",sS=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!Es(r))return e[r]}},ese={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},ZR=Ii({name:"options",initialState:ese,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),tse=ZR.reducer,{createEventEmitter:rse}=ZR.actions;function nse(e){return e.tooltip.syncInteraction}var ise={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},QR=Ii({name:"chartData",initialState:ise,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:dP,setDataStartEndIndexes:ase,setComputedData:nme}=QR.actions,sse=QR.reducer,ose=["x","y"];function fP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(r),!0).forEach(function(n){lse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lse(e,t,r){return(t=cse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cse(e){var t=use(e,"string");return typeof t=="symbol"?t:t+""}function use(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dse(e,t){if(e==null)return{};var r,n,i=fse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hse(){var e=Ve(jj),t=Ve(Sj),r=mr(),n=Ve(VD),i=Ve(Fo),a=hu(),s=D0(),o=Ve(c=>c.rootProps.className);b.useEffect(()=>{if(e==null)return fu;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var p;if(s&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:y,y:g}=h,x=dse(h,ose),{x:v,y:_,width:S,height:j}=d.payload.sourceViewBox,N=Wu(Wu({},x),{},{x:s.x+(S?(y-v)/S:0)*s.width,y:s.y+(j?(g-_)/j:0)*s.height});r(Wu(Wu({},d),{},{payload:Wu(Wu({},d.payload),{},{coordinate:N})}))}else r(d);return}if(i!=null){var A;if(typeof n=="function"){var I={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(i,I);A=i[E]}else n==="value"&&(A=i.find(re=>String(re.value)===d.payload.label));var{coordinate:C}=d.payload;if(A==null||d.payload.active===!1||C==null||s==null){r(Hw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:T}=C,O=Math.min(D,s.x+s.width),q=Math.min(T,s.y+s.height),K={x:a==="horizontal"?A.coordinate:O,y:a==="horizontal"?q:A.coordinate},ne=Hw({active:d.payload.active,coordinate:K,dataKey:d.payload.dataKey,index:String(A.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(ne)}}};return vp.on(Gw,c),()=>{vp.off(Gw,c)}},[o,r,t,e,n,i,a,s])}function pse(){var e=Ve(jj),t=Ve(Sj),r=mr();b.useEffect(()=>{if(e==null)return fu;var n=(i,a,s)=>{t!==s&&e===i&&r(ase(a))};return vp.on(uP,n),()=>{vp.off(uP,n)}},[r,t,e])}function mse(){var e=mr();b.useEffect(()=>{e(rse())},[e]),hse(),pse()}function gse(e,t,r,n,i,a){var s=Ve(h=>Sae(h,e,t)),o=Ve(Sj),c=Ve(jj),u=Ve(VD),d=Ve(nse),f=d==null?void 0:d.active,p=D0();b.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=Hw({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});vp.emit(Gw,c,h,o)}},[f,r,s,i,n,o,c,u,a,p])}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(n){vse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vse(e,t,r){return(t=yse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yse(e){var t=xse(e,"string");return typeof t=="symbol"?t:t+""}function xse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bse(e){return e.dataKey}function wse(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(cQ,t)}var mP=[],_se={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zc(e){var t,r,n=dn(e,_se),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:p,position:h,reverseDirection:y,useTranslate3d:g,wrapperStyle:x,cursor:v,shared:_,trigger:S,defaultIndex:j,portal:N,axisId:A}=n,I=mr(),E=typeof j=="number"?String(j):j;b.useEffect(()=>{I(yie({shared:_,trigger:S,axisId:A,active:i,defaultIndex:E}))},[I,_,S,A,i,E]);var C=D0(),D=$8(),T=fie(_),{activeIndex:O,isActive:q}=(t=Ve(ue=>Aae(ue,T,S,E)))!==null&&t!==void 0?t:{},K=Ve(ue=>kae(ue,T,S,E)),ne=Ve(ue=>GR(ue,T,S,E)),re=Ve(ue=>Nae(ue,T,S,E)),te=K,W=Xae(),B=(r=i??q)!==null&&r!==void 0?r:!1,[le,G]=FL([te,B]),R=T==="axis"?ne:void 0;gse(T,S,re,R,O,B);var z=N??W;if(z==null||C==null||T==null)return null;var J=te??mP;B||(J=mP),u&&J.length&&(J=kL(J.filter(ue=>ue.value!=null&&(ue.hide!==!0||n.includeHidden)),p,bse));var ie=J.length>0,ae=b.createElement(gQ,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:B,coordinate:re,hasPayload:ie,offset:f,position:h,reverseDirection:y,useTranslate3d:g,viewBox:C,wrapperStyle:x,lastBoundingBox:le,innerRef:G,hasPortalFromProps:!!N},wse(c,pP(pP({},n),{},{payload:J,label:R,active:B,activeIndex:O,coordinate:re,accessibilityLayer:D})));return b.createElement(b.Fragment,null,Qy.createPortal(ae,z),B&&b.createElement(Jae,{cursor:v,tooltipEventType:T,coordinate:re,payload:J,index:O}))}var Zp=e=>null;Zp.displayName="Cell";function jse(e,t,r){return(t=Sse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sse(e){var t=Nse(e,"string");return typeof t=="symbol"?t:t+""}function Nse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kse{constructor(t){jse(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ase(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){Ese(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ese(e,t,r){return(t=Pse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pse(e){var t=Cse(e,"string");return typeof t=="symbol"?t:t+""}function Cse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ose={cacheSize:2e3,enableCache:!0},e7=Ase({},Ose),vP=new kse(e7.cacheSize),Tse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},yP="recharts_measurement_span";function Ise(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var xP=(e,t)=>{try{var r=document.getElementById(yP);r||(r=document.createElement("span"),r.setAttribute("id",yP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Tse,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Ph=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$0.isSsr)return{width:0,height:0};if(!e7.enableCache)return xP(t,r);var n=Ise(t,r),i=vP.get(n);if(i)return i;var a=xP(t,r);return vP.set(n,a),a},t7;function Lse(e,t,r){return(t=Dse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dse(e){var t=Rse(e,"string");return typeof t=="symbol"?t:t+""}function Rse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Fse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$se={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Bse=["cm","mm","pt","pc","in","Q","px"];function Use(e){return Bse.includes(e)}var fd="NaN";function qse(e,t){return e*$se[t]}class Vn{static parse(t){var r,[,n,i]=(r=Fse.exec(t))!==null&&r!==void 0?r:[];return n==null?Vn.NaN:new Vn(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Es(t)&&(this.unit=""),r!==""&&!Mse.test(r)&&(this.num=NaN,this.unit=""),Use(r)&&(this.num=qse(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Vn(NaN,""):new Vn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Vn(NaN,""):new Vn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Vn(NaN,""):new Vn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Vn(NaN,""):new Vn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Es(this.num)}}t7=Vn;Lse(Vn,"NaN",new t7(NaN,""));function r7(e){if(e==null||e.includes(fd))return fd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=bP.exec(t))!==null&&r!==void 0?r:[],s=Vn.parse(n??""),o=Vn.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return fd;t=t.replace(bP,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,p]=(u=wP.exec(t))!==null&&u!==void 0?u:[],h=Vn.parse(d??""),y=Vn.parse(p??""),g=f==="+"?h.add(y):h.subtract(y);if(g.isNaN())return fd;t=t.replace(wP,g.toString())}return t}var _P=/\(([^()]*)\)/;function zse(e){for(var t=e,r;(r=_P.exec(t))!=null;){var[,n]=r;t=t.replace(_P,r7(n))}return t}function Wse(e){var t=e.replace(/\s+/g,"");return t=zse(t),t=r7(t),t}function Hse(e){try{return Wse(e)}catch{return fd}}function Nb(e){var t=Hse(e.slice(5,-1));return t===fd?"":t}var Vse=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Kse=["dx","dy","angle","className","breakAll"];function Yw(){return Yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yw.apply(null,arguments)}function jP(e,t){if(e==null)return{};var r,n,i=Gse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var n7=/[ \f\n\r\t\v\u2028\u2029]+/,i7=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Ir(t)||(r?i=t.toString().split(""):i=t.toString().split(n7));var a=i.map(o=>({word:o,width:Ph(o,n).width})),s=r?0:Ph("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function Yse(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var a7=(e,t,r,n)=>e.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(t==null||n||c.width+o+r<Number(t)))c.words.push(s),c.width+=o+r;else{var u={words:[s],width:o};i.push(u)}return i},[]),s7=e=>e.reduce((t,r)=>t.width>r.width?t:r),Jse="",SP=(e,t,r,n,i,a,s,o)=>{var c=e.slice(0,t),u=i7({breakAll:r,style:n,children:c+Jse});if(!u)return[!1,[]];var d=a7(u.wordsWithComputedWidth,a,s,o),f=d.length>i||s7(d).width>Number(a);return[f,d]},Xse=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=e,u=Be(a),d=String(s),f=a7(t,n,r,i);if(!u||i)return f;var p=f.length>a||s7(f).width>Number(n);if(!p)return f;for(var h=0,y=d.length-1,g=0,x;h<=y&&g<=d.length-1;){var v=Math.floor((h+y)/2),_=v-1,[S,j]=SP(d,_,c,o,a,n,r,i),[N]=SP(d,v,c,o,a,n,r,i);if(!S&&!N&&(h=v+1),S&&N&&(y=v-1),!S&&N){x=j;break}g++}return x||f},NP=e=>{var t=Ir(e)?[]:e.toString().split(n7);return[{words:t,width:void 0}]},Zse=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!$0.isSsr){var o,c,u=i7({breakAll:a,children:n,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return NP(n);return Xse({breakAll:a,children:n,maxLines:s,style:i},o,c,t,!!r)}return NP(n)},o7="#808080",Qse={angle:0,breakAll:!1,capHeight:"0.71em",fill:o7,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ax=b.forwardRef((e,t)=>{var r=dn(e,Qse),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=jP(r,Vse),p=b.useMemo(()=>Zse({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:y,angle:g,className:x,breakAll:v}=f,_=jP(f,Kse);if(!Ps(n)||!Ps(i)||p.length===0)return null;var S=Number(n)+(Be(h)?h:0),j=Number(i)+(Be(y)?y:0);if(!Rt(S)||!Rt(j))return null;var N;switch(d){case"start":N=Nb("calc(".concat(s,")"));break;case"middle":N=Nb("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:N=Nb("calc(".concat(p.length-1," * -").concat(a,")"));break}var A=[],I=p[0];if(c&&I!=null){var E=I.width,{width:C}=f;A.push("scale(".concat(Be(C)&&Be(E)?C/E:1,")"))}return g&&A.push("rotate(".concat(g,", ").concat(S,", ").concat(j,")")),A.length&&(_.transform=A.join(" ")),b.createElement("text",Yw({},yi(_),{ref:t,x:S,y:j,className:Ut("recharts-text",x),textAnchor:u,fill:o.includes("url")?o7:o}),p.map((D,T)=>{var O=D.words.join(v?"":" ");return b.createElement("tspan",{x:S,dy:T===0?N:a,key:"".concat(O,"-").concat(T)},O)}))});ax.displayName="Text";function kP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(r),!0).forEach(function(n){eoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eoe(e,t,r){return(t=toe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function toe(e){var t=roe(e,"string");return typeof t=="symbol"?t:t+""}function roe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var noe=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:i}=e,{x:a,y:s,height:o,upperWidth:c,lowerWidth:u}=W5(t),d=a,f=a+(c-u)/2,p=(d+f)/2,h=(c+u)/2,y=d+c/2,g=o>=0?1:-1,x=g*n,v=g>0?"end":"start",_=g>0?"start":"end",S=c>=0?1:-1,j=S*n,N=S>0?"end":"start",A=S>0?"start":"end",I=i;if(r==="top"){var E={x:d+c/2,y:s-x,horizontalAnchor:"middle",verticalAnchor:v};return I&&(E.height=Math.max(s-I.y,0),E.width=c),E}if(r==="bottom"){var C={x:f+u/2,y:s+o+x,horizontalAnchor:"middle",verticalAnchor:_};return I&&(C.height=Math.max(I.y+I.height-(s+o),0),C.width=u),C}if(r==="left"){var D={x:p-j,y:s+o/2,horizontalAnchor:N,verticalAnchor:"middle"};return I&&(D.width=Math.max(D.x-I.x,0),D.height=o),D}if(r==="right"){var T={x:p+h+j,y:s+o/2,horizontalAnchor:A,verticalAnchor:"middle"};return I&&(T.width=Math.max(I.x+I.width-T.x,0),T.height=o),T}var O=I?{width:h,height:o}:{};return r==="insideLeft"?ps({x:p+j,y:s+o/2,horizontalAnchor:A,verticalAnchor:"middle"},O):r==="insideRight"?ps({x:p+h-j,y:s+o/2,horizontalAnchor:N,verticalAnchor:"middle"},O):r==="insideTop"?ps({x:d+c/2,y:s+x,horizontalAnchor:"middle",verticalAnchor:_},O):r==="insideBottom"?ps({x:f+u/2,y:s+o-x,horizontalAnchor:"middle",verticalAnchor:v},O):r==="insideTopLeft"?ps({x:d+j,y:s+x,horizontalAnchor:A,verticalAnchor:_},O):r==="insideTopRight"?ps({x:d+c-j,y:s+x,horizontalAnchor:N,verticalAnchor:_},O):r==="insideBottomLeft"?ps({x:f+j,y:s+o-x,horizontalAnchor:A,verticalAnchor:v},O):r==="insideBottomRight"?ps({x:f+u-j,y:s+o-x,horizontalAnchor:N,verticalAnchor:v},O):r&&typeof r=="object"&&(Be(r.x)||Vc(r.x))&&(Be(r.y)||Vc(r.y))?ps({x:a+oi(r.x,h),y:s+oi(r.y,o),horizontalAnchor:"end",verticalAnchor:"end"},O):ps({x:y,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},O)},ioe=["labelRef"],aoe=["content"];function AP(e,t){if(e==null)return{};var r,n,i=soe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function soe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(n){ooe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ooe(e,t,r){return(t=loe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function loe(e){var t=coe(e,"string");return typeof t=="symbol"?t:t+""}function coe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oo.apply(null,arguments)}var l7=b.createContext(null),uoe=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=e,c=b.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[t,r,n,i,a,s]);return b.createElement(l7.Provider,{value:c},o)},c7=()=>{var e=b.useContext(l7),t=D0();return e||(t?W5(t):void 0)},doe=b.createContext(null),foe=()=>{var e=b.useContext(doe),t=Ve(XD);return e||t},hoe=e=>{var{value:t,formatter:r}=e,n=Ir(e.children)?t:e.children;return typeof r=="function"?r(n):n},oS=e=>e!=null&&typeof e=="function",poe=(e,t)=>{var r=On(t-e),n=Math.min(Math.abs(t-e),360);return r*n},moe=(e,t,r,n,i)=>{var{offset:a,className:s}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:p,clockWise:h}=i,y=(u+d)/2,g=poe(f,p),x=g>=0?1:-1,v,_;switch(t){case"insideStart":v=f+x*a,_=h;break;case"insideEnd":v=p-x*a,_=!h;break;case"end":v=p+x*a,_=h;break;default:throw new Error("Unsupported position ".concat(t))}_=g<=0?_:!_;var S=ln(o,c,y,v),j=ln(o,c,y,v+(_?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),A=Ir(e.id)?ip("recharts-radial-line-"):e.id;return b.createElement("text",oo({},n,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",s)}),b.createElement("defs",null,b.createElement("path",{id:A,d:N})),b.createElement("textPath",{xlinkHref:"#".concat(A)},r))},goe=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=ln(n,i,s+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:h,y}=ln(n,i,p,u);return{x:h,y,textAnchor:"middle",verticalAnchor:"middle"}},rv=e=>e!=null&&"cx"in e&&Be(e.cx),voe={angle:0,offset:5,zIndex:cn.label,position:"middle",textBreakAll:!1};function yoe(e){if(!rv(e))return e;var{cx:t,cy:r,outerRadius:n}=e,i=n*2;return{x:t-n,y:r-n,width:i,upperWidth:i,lowerWidth:i,height:i}}function ll(e){var t=dn(e,voe),{viewBox:r,parentViewBox:n,position:i,value:a,children:s,content:o,className:c="",textBreakAll:u,labelRef:d}=t,f=foe(),p=c7(),h=i==="center"?p:f??p,y,g,x;r==null?y=h:rv(r)?y=r:y=W5(r);var v=yoe(y);if(!y||Ir(a)&&Ir(s)&&!b.isValidElement(o)&&typeof o!="function")return null;var _=ph(ph({},t),{},{viewBox:y});if(b.isValidElement(o)){var{labelRef:S}=_,j=AP(_,ioe);return b.cloneElement(o,j)}if(typeof o=="function"){var{content:N}=_,A=AP(_,aoe);if(g=b.createElement(o,A),b.isValidElement(g))return g}else g=hoe(t);var I=yi(t);if(rv(y)){if(i==="insideStart"||i==="insideEnd"||i==="end")return moe(t,i,g,I,y);x=goe(y,t.offset,t.position)}else{if(!v)return null;var E=noe({viewBox:v,position:i,offset:t.offset,parentViewBox:rv(n)?void 0:n});x=ph(ph({x:E.x,y:E.y,textAnchor:E.horizontalAnchor,verticalAnchor:E.verticalAnchor},E.width!==void 0?{width:E.width}:{}),E.height!==void 0?{height:E.height}:{})}return b.createElement(Li,{zIndex:t.zIndex},b.createElement(ax,oo({ref:d,className:Ut("recharts-label",c)},I,x,{textAnchor:Yse(I.textAnchor)?I.textAnchor:x.textAnchor,breakAll:u}),g))}ll.displayName="Label";var xoe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?b.createElement(ll,oo({key:"label-implicit"},n)):Ps(e)?b.createElement(ll,oo({key:"label-implicit",value:e},n)):b.isValidElement(e)?e.type===ll?b.cloneElement(e,ph({key:"label-implicit"},n)):b.createElement(ll,oo({key:"label-implicit",content:e},n)):oS(e)?b.createElement(ll,oo({key:"label-implicit",content:e},n)):e&&typeof e=="object"?b.createElement(ll,oo({},e,{key:"label-implicit"},n)):null};function boe(e){var{label:t,labelRef:r}=e,n=c7();return xoe(t,n,r)||null}var u7={},d7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(d7);var f7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(f7);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d7,r=f7,n=y0;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(u7);var woe=u7.last;const _oe=Ts(woe);var joe=["valueAccessor"],Soe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ey.apply(null,arguments)}function PP(e,t){if(e==null)return{};var r,n,i=Noe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Noe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var koe=e=>Array.isArray(e.value)?_oe(e.value):e.value,h7=b.createContext(void 0),p7=h7.Provider,m7=b.createContext(void 0),Aoe=m7.Provider;function Eoe(){return b.useContext(h7)}function Poe(){return b.useContext(m7)}function nv(e){var{valueAccessor:t=koe}=e,r=PP(e,joe),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,c=PP(r,Soe),u=Eoe(),d=Poe(),f=u||d;return!f||!f.length?null:b.createElement(Li,{zIndex:o??cn.label},b.createElement(In,{className:"recharts-label-list"},f.map((p,h)=>{var y,g=Ir(n)?t(p,h):rr(p.payload,n),x=Ir(a)?{}:{id:"".concat(a,"-").concat(h)};return b.createElement(ll,Ey({key:"label-".concat(h)},yi(p),c,x,{fill:(y=r.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:g,textBreakAll:s,viewBox:p.viewBox,index:h,zIndex:0}))})))}nv.displayName="LabelList";function lS(e){var{label:t}=e;return t?t===!0?b.createElement(nv,{key:"labelList-implicit"}):b.isValidElement(t)||oS(t)?b.createElement(nv,{key:"labelList-implicit",content:t}):typeof t=="object"?b.createElement(nv,Ey({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Jw(){return Jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jw.apply(null,arguments)}var g7=e=>{var{cx:t,cy:r,r:n,className:i}=e,a=Ut("recharts-dot",i);return Be(t)&&Be(r)&&Be(n)?b.createElement("circle",Jw({},Qi(e),S5(e),{className:a,cx:t,cy:r,r:n})):null},v7=e=>e.graphicalItems.polarItems,Coe=ye([Lr,Vp],Cj),sx=ye([v7,Vr,Coe],Oj),Ooe=ye([sx],Tj),ox=ye([Ooe,V0],Ij),Toe=ye([ox,Vr,sx],Dj);ye([ox,Vr,sx],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var a,s=rr(n,(a=t.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:rr(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var CP=()=>{},Ioe=ye([ox,Vr,sx,tx,Lr],$j),Loe=ye([Vr,Mj,Fj,CP,Ioe,CP,Ht,Lr],Bj),y7=ye([Vr,Ht,ox,Toe,Hp,Lr,Loe],Uj),Doe=ye([y7,sf,ql],Wj),Roe=ye([Vr,y7,Doe,Lr],Vj);ye([ql,Roe],QD);var Moe={radiusAxis:{},angleAxis:{}},x7=Ii({name:"polarAxis",initialState:Moe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ime,removeRadiusAxis:ame,addAngleAxis:sme,removeAngleAxis:ome}=x7.actions,Foe=x7.reducer;function b7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function OP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(r),!0).forEach(function(n){$oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $oe(e,t,r){return(t=Boe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Boe(e){var t=Uoe(e,"string");return typeof t=="symbol"?t:t+""}function Uoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qoe=(e,t)=>t,cS=ye([v7,qoe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),zoe=[],uS=(e,t,r)=>(r==null?void 0:r.length)===0?zoe:r,w7=ye([V0,cS,uS],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>TP(TP({},t.presentationProps),a.props))),i!=null)return i}}),Woe=ye([w7,cS,uS],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var a,s=rr(n,t.nameKey,t.name),o;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:ef(s,t.dataKey),color:o,payload:n,type:t.legendType}})}),Hoe=ye([w7,cS,uS,_n],(e,t,r,n)=>{if(!(t==null||e==null))return Wle({offset:n,pieSettings:t,displayedData:e,cells:r})}),_7={exports:{}},or={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dS=Symbol.for("react.transitional.element"),fS=Symbol.for("react.portal"),lx=Symbol.for("react.fragment"),cx=Symbol.for("react.strict_mode"),ux=Symbol.for("react.profiler"),dx=Symbol.for("react.consumer"),fx=Symbol.for("react.context"),hx=Symbol.for("react.forward_ref"),px=Symbol.for("react.suspense"),mx=Symbol.for("react.suspense_list"),gx=Symbol.for("react.memo"),vx=Symbol.for("react.lazy"),Voe=Symbol.for("react.view_transition"),Koe=Symbol.for("react.client.reference");function Aa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dS:switch(e=e.type,e){case lx:case ux:case cx:case px:case mx:case Voe:return e;default:switch(e=e&&e.$$typeof,e){case fx:case hx:case vx:case gx:return e;case dx:return e;default:return t}}case fS:return t}}}or.ContextConsumer=dx;or.ContextProvider=fx;or.Element=dS;or.ForwardRef=hx;or.Fragment=lx;or.Lazy=vx;or.Memo=gx;or.Portal=fS;or.Profiler=ux;or.StrictMode=cx;or.Suspense=px;or.SuspenseList=mx;or.isContextConsumer=function(e){return Aa(e)===dx};or.isContextProvider=function(e){return Aa(e)===fx};or.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dS};or.isForwardRef=function(e){return Aa(e)===hx};or.isFragment=function(e){return Aa(e)===lx};or.isLazy=function(e){return Aa(e)===vx};or.isMemo=function(e){return Aa(e)===gx};or.isPortal=function(e){return Aa(e)===fS};or.isProfiler=function(e){return Aa(e)===ux};or.isStrictMode=function(e){return Aa(e)===cx};or.isSuspense=function(e){return Aa(e)===px};or.isSuspenseList=function(e){return Aa(e)===mx};or.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lx||e===ux||e===cx||e===px||e===mx||typeof e=="object"&&e!==null&&(e.$$typeof===vx||e.$$typeof===gx||e.$$typeof===fx||e.$$typeof===dx||e.$$typeof===hx||e.$$typeof===Koe||e.getModuleId!==void 0)};or.typeOf=Aa;_7.exports=or;var Goe=_7.exports,IP=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",LP=null,kb=null,j7=e=>{if(e===LP&&Array.isArray(kb))return kb;var t=[];return b.Children.forEach(e,r=>{Ir(r)||(Goe.isFragment(r)?t=t.concat(j7(r.props.children)):t.push(r))}),kb=t,LP=e,t};function hS(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>IP(i)):n=[IP(t)],j7(e).forEach(i=>{var a=Hc(i,"type.displayName")||Hc(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var S7=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,N7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(N7);var Yoe=N7.isPlainObject;const Joe=Ts(Yoe);var DP,RP,MP,FP,$P;function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(n){Xoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xoe(e,t,r){return(t=Zoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zoe(e){var t=Qoe(e,"string");return typeof t=="symbol"?t:t+""}function Qoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Py.apply(null,arguments)}function sh(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qP=(e,t,r,n,i)=>{var a=r-n,s;return s=Ur(DP||(DP=sh(["M ",",",""])),e,t),s+=Ur(RP||(RP=sh(["L ",",",""])),e+r,t),s+=Ur(MP||(MP=sh(["L ",",",""])),e+r-a/2,t+i),s+=Ur(FP||(FP=sh(["L ",",",""])),e+r-a/2-n,t+i),s+=Ur($P||($P=sh(["L ",","," Z"])),e,t),s},ele={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tle=e=>{var t=dn(e,ele),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,p=b.useRef(null),[h,y]=b.useState(-1),g=b.useRef(i),x=b.useRef(a),v=b.useRef(s),_=b.useRef(r),S=b.useRef(n),j=Bp(e,"trapezoid-");if(b.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var K=p.current.getTotalLength();K&&y(K)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var N=Ut("recharts-trapezoid",o);if(!f)return b.createElement("g",null,b.createElement("path",Py({},yi(t),{className:N,d:qP(r,n,i,a,s)})));var A=g.current,I=x.current,E=v.current,C=_.current,D=S.current,T="0px ".concat(h===-1?1:h,"px"),O="".concat(h,"px 0px"),q=B8(["strokeDasharray"],u,c);return b.createElement($p,{animationId:j,key:j,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},K=>{var ne=kr(A,i,K),re=kr(I,a,K),te=kr(E,s,K),W=kr(C,r,K),B=kr(D,n,K);p.current&&(g.current=ne,x.current=re,v.current=te,_.current=W,S.current=B);var le=K>0?{transition:q,strokeDasharray:O}:{strokeDasharray:T};return b.createElement("path",Py({},yi(t),{className:N,d:qP(W,B,ne,re,te),ref:p,style:UP(UP({},le),t.style)}))})},rle=["option","shapeType","activeClassName"];function nle(e,t){if(e==null)return{};var r,n,i=ile(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ile(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(r),!0).forEach(function(n){ale(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ale(e,t,r){return(t=sle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sle(e){var t=ole(e,"string");return typeof t=="symbol"?t:t+""}function ole(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lle(e,t){return Cy(Cy({},t),e)}function cle(e,t){return e==="symbols"}function WP(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(W8,r);case"trapezoid":return b.createElement(tle,r);case"sector":return b.createElement(G8,r);case"symbols":if(cle(t))return b.createElement(j5,r);break;case"curve":return b.createElement(Y5,r);default:return null}}function ule(e){return b.isValidElement(e)?e.props:e}function pS(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=nle(e,rle),a;if(b.isValidElement(t))a=b.cloneElement(t,Cy(Cy({},i),ule(t)));else if(typeof t=="function")a=t(i,i.index);else if(Joe(t)&&typeof t!="boolean"){var s=lle(t,i);a=b.createElement(WP,{shapeType:r,elementProps:s})}else{var o=i;a=b.createElement(WP,{shapeType:r,elementProps:o})}return i.isActive?b.createElement(In,{className:n},a):a}var mS=(e,t,r)=>{var n=mr();return(i,a)=>s=>{e==null||e(i,a,s),n(PR({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},gS=e=>{var t=mr();return(r,n)=>i=>{e==null||e(r,n,i),t(xie())}},vS=(e,t,r)=>{var n=mr();return(i,a)=>s=>{e==null||e(i,a,s),n(bie({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function yS(e){var{tooltipEntrySettings:t}=e,r=mr(),n=ci(),i=b.useRef(null);return b.useLayoutEffect(()=>{n||(i.current===null?r(mie(t)):i.current!==t&&r(gie({prev:i.current,next:t})),i.current=t)},[t,r,n]),b.useLayoutEffect(()=>()=>{i.current&&(r(vie(i.current)),i.current=null)},[r]),null}function k7(e){var{legendPayload:t}=e,r=mr(),n=ci(),i=b.useRef(null);return b.useLayoutEffect(()=>{n||(i.current===null?r(R8(t)):i.current!==t&&r(M8({prev:i.current,next:t})),i.current=t)},[r,n,t]),b.useLayoutEffect(()=>()=>{i.current&&(r(F8(i.current)),i.current=null)},[r]),null}function dle(e){var{legendPayload:t}=e,r=mr(),n=Ve(Ht),i=b.useRef(null);return b.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(R8(t)):i.current!==t&&r(M8({prev:i.current,next:t})),i.current=t)},[r,n,t]),b.useLayoutEffect(()=>()=>{i.current&&(r(F8(i.current)),i.current=null)},[r]),null}var Ab,fle=()=>{var[e]=b.useState(()=>ip("uid-"));return e},hle=(Ab=IC.useId)!==null&&Ab!==void 0?Ab:fle;function ple(e,t){var r=hle();return t||(e?"".concat(e,"-").concat(r):r)}var mle=b.createContext(void 0),xS=e=>{var{id:t,type:r,children:n}=e,i=ple("recharts-".concat(r),t);return b.createElement(mle.Provider,{value:i},n(i))},gle={cartesianItems:[],polarItems:[]},A7=Ii({name:"graphicalItems",initialState:gle,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Sr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ga(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Sr()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ga(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Sr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Sr()},removePolarGraphicalItem:{reducer(e,t){var r=Ga(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Sr()}}}),{addCartesianGraphicalItem:vle,replaceCartesianGraphicalItem:yle,removeCartesianGraphicalItem:xle,addPolarGraphicalItem:ble,removePolarGraphicalItem:wle}=A7.actions,_le=A7.reducer,jle=e=>{var t=mr(),r=b.useRef(null);return b.useLayoutEffect(()=>{r.current===null?t(vle(e)):r.current!==e&&t(yle({prev:r.current,next:e})),r.current=e},[t,e]),b.useLayoutEffect(()=>()=>{r.current&&(t(xle(r.current)),r.current=null)},[t]),null},E7=b.memo(jle);function Sle(e){var t=mr();return b.useLayoutEffect(()=>(t(ble(e)),()=>{t(wle(e))}),[t,e]),null}var Nle=["key"],kle=["onMouseEnter","onClick","onMouseLeave"],Ale=["id"],Ele=["id"];function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(n){Ple(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ple(e,t,r){return(t=Cle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cle(e){var t=Ole(e,"string");return typeof t=="symbol"?t:t+""}function Ole(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dl.apply(null,arguments)}function yx(e,t){if(e==null)return{};var r,n,i=Tle(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Tle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ile(e){var t=b.useMemo(()=>hS(e.children,Zp),[e.children]),r=Ve(n=>Woe(n,e.id,t));return r==null?null:b.createElement(dle,{legendPayload:r})}var Lle=b.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:n.map(p=>p.tooltipPayload),getPosition:p=>{var h;return(h=n[Number(p)])===null||h===void 0?void 0:h.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:s,dataKey:t,nameKey:r,name:ef(o,t),hide:c,type:u,color:s,unit:"",graphicalItemId:d}};return b.createElement(yS,{tooltipEntrySettings:f})}),Dle=(e,t)=>e>t?"start":e<t?"end":"middle",Rle=(e,t,r)=>oi(typeof t=="function"?t(e):t,r,r*.8),Mle=(e,t,r)=>{var{top:n,left:i,width:a,height:s}=t,o=H8(a,s),c=i+oi(e.cx,a,a/2),u=n+oi(e.cy,s,s/2),d=oi(e.innerRadius,o,0),f=Rle(r,e.outerRadius,o),p=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}},Fle=(e,t)=>{var r=On(t-e),n=Math.min(Math.abs(t-e),360);return r*n},$le=(e,t)=>{if(b.isValidElement(e))return b.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Ut("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=yx(t,Nle);return b.createElement(Y5,Dl({},i,{type:"linear",className:r}))},Ble=(e,t,r)=>{if(b.isValidElement(e))return b.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),b.isValidElement(n)))return n;var i=Ut("recharts-pie-label-text",b7(e));return b.createElement(ax,Dl({},t,{alignmentBaseline:"middle",className:i}),n)};function Ule(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:a,dataKey:s}=r;if(!n||!i||!t)return null;var o=Qi(r),c=zc(i),u=zc(a),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=t.map((p,h)=>{var y=(p.startAngle+p.endAngle)/2,g=ln(p.cx,p.cy,p.outerRadius+d,y),x=zr(zr(zr(zr({},o),p),{},{stroke:"none"},c),{},{index:h,textAnchor:Dle(g.x,p.cx)},g),v=zr(zr(zr(zr({},o),p),{},{fill:"none",stroke:p.fill},u),{},{index:h,points:[ln(p.cx,p.cy,p.outerRadius,y),g],key:"line"});return b.createElement(Li,{zIndex:cn.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(h)},b.createElement(In,null,a&&$le(a,v),Ble(i,x,rr(p,s))))});return b.createElement(In,{className:"recharts-pie-labels"},f)}function qle(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?b.createElement(lS,{label:i}):b.createElement(Ule,{sectors:t,props:r,showLabels:n})}function zle(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:a,id:s}=e,o=Ve(Ll),c=Ve(tS),u=Ve(aae),{onMouseEnter:d,onClick:f,onMouseLeave:p}=i,h=yx(i,kle),y=mS(d,i.dataKey,s),g=gS(p),x=vS(f,i.dataKey,s);return t==null||t.length===0?null:b.createElement(b.Fragment,null,t.map((v,_)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&t.length!==1)return null;var S=u==null||u===s,j=String(_)===o&&(c==null||i.dataKey===c)&&S,N=o?n:null,A=r&&j?r:N,I=zr(zr({},v),{},{stroke:v.stroke,tabIndex:-1,[y8]:_,[x8]:s});return b.createElement(In,Dl({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(_),tabIndex:-1,className:"recharts-pie-sector"},Ip(h,v,_),{onMouseEnter:y(v,_),onMouseLeave:g(v,_),onClick:x(v,_)}),b.createElement(pS,Dl({option:a??A,index:_,shapeType:"sector",isActive:j},I)))}))}function Wle(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:a}=e,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,p=Math.abs(r.minAngle),h=Fle(o,c),y=Math.abs(h),g=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,x=n.filter(A=>rr(A,u,0)!==0).length,v=(y>=360?x:x-1)*g,_=y-x*p-v,S=n.reduce((A,I)=>{var E=rr(I,u,0);return A+(Be(E)?E:0)},0),j;if(S>0){var N;j=n.map((A,I)=>{var E=rr(A,u,0),C=rr(A,d,I),D=Mle(r,a,A),T=(Be(E)?E:0)/S,O,q=zr(zr({},A),i&&i[I]&&i[I].props);I?O=N.endAngle+On(h)*g*(E!==0?1:0):O=o;var K=O+On(h)*((E!==0?p:0)+T*_),ne=(O+K)/2,re=(D.innerRadius+D.outerRadius)/2,te=[{name:C,value:E,payload:q,dataKey:u,type:f,graphicalItemId:r.id}],W=ln(D.cx,D.cy,re,ne);return N=zr(zr(zr(zr({},r.presentationProps),{},{percent:T,cornerRadius:typeof s=="string"?parseFloat(s):s,name:C,tooltipPayload:te,midAngle:ne,middleRadius:re,tooltipPosition:W},q),D),{},{value:E,dataKey:u,startAngle:O,endAngle:K,payload:q,paddingAngle:On(h)*g}),N})}return j}function Hle(e){var{showLabels:t,sectors:r,children:n}=e,i=b.useMemo(()=>!t||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,t]);return b.createElement(Aoe,{value:t?i:void 0},n)}function Vle(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:p}=t,h=Bp(t,"recharts-pie-"),y=r.current,[g,x]=b.useState(!1),v=b.useCallback(()=>{typeof p=="function"&&p(),x(!1)},[p]),_=b.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return b.createElement(Hle,{showLabels:!g,sectors:i},b.createElement($p,{animationId:h,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:_,onAnimationEnd:v,key:h},S=>{var j,N=[],A=i&&i[0],I=(j=A==null?void 0:A.startAngle)!==null&&j!==void 0?j:0;return i==null||i.forEach((E,C)=>{var D=y&&y[C],T=C>0?Hc(E,"paddingAngle",0):0;if(D){var O=kr(D.endAngle-D.startAngle,E.endAngle-E.startAngle,S),q=zr(zr({},E),{},{startAngle:I+T,endAngle:I+O+T});N.push(q),I=q.endAngle}else{var{endAngle:K,startAngle:ne}=E,re=kr(0,K-ne,S),te=zr(zr({},E),{},{startAngle:I+T,endAngle:I+re+T});N.push(te),I=te.endAngle}}),r.current=N,b.createElement(In,null,b.createElement(zle,{sectors:N,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:n}))}),b.createElement(qle,{showLabels:!g,sectors:i,props:t}),t.children)}var Kle={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:cn.area};function Gle(e){var{id:t}=e,r=yx(e,Ale),{hide:n,className:i,rootTabIndex:a}=e,s=b.useMemo(()=>hS(e.children,Zp),[e.children]),o=Ve(d=>Hoe(d,t,s)),c=b.useRef(null),u=Ut("recharts-pie",i);return n||o==null?(c.current=null,b.createElement(In,{tabIndex:a,className:u})):b.createElement(Li,{zIndex:e.zIndex},b.createElement(Lle,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),b.createElement(In,{tabIndex:a,className:u},b.createElement(Vle,{props:zr(zr({},r),{},{sectors:o}),previousSectorsRef:c,id:t})))}function P7(e){var t=dn(e,Kle),{id:r}=t,n=yx(t,Ele),i=Qi(n);return b.createElement(xS,{id:r,type:"pie"},a=>b.createElement(b.Fragment,null,b.createElement(Sle,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),b.createElement(Ile,Dl({},n,{id:a})),b.createElement(Gle,Dl({},n,{id:a}))))}P7.displayName="Pie";var Yle=["points"];function VP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(r),!0).forEach(function(n){Jle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jle(e,t,r){return(t=Xle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xle(e){var t=Zle(e,"string");return typeof t=="symbol"?t:t+""}function Zle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(null,arguments)}function Qle(e,t){if(e==null)return{};var r,n,i=ece(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ece(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tce(e){var{option:t,dotProps:r,className:n}=e;if(b.isValidElement(t))return b.cloneElement(t,r);if(typeof t=="function")return t(r);var i=Ut(n,typeof t!="boolean"?t.className:""),a=r??{},{points:s}=a,o=Qle(a,Yle);return b.createElement(g7,Oy({},o,{className:i}))}function rce(e,t){return e==null?!1:t?!0:e.length===1}function nce(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:c,zIndex:u=cn.scatter}=e;if(!rce(t,r))return null;var d=S7(r),f=VG(r),p=t.map((y,g)=>{var x,v,_=Eb(Eb(Eb({r:3},s),f),{},{index:g,cx:(x=y.x)!==null&&x!==void 0?x:void 0,cy:(v=y.y)!==null&&v!==void 0?v:void 0,dataKey:a,value:y.value,payload:y.payload,points:t});return b.createElement(tce,{key:"dot-".concat(g),option:r,dotProps:_,className:i})}),h={};return o&&c!=null&&(h.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),b.createElement(Li,{zIndex:u},b.createElement(In,Oy({className:n},h),p))}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function GP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(n){ice(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ice(e,t,r){return(t=ace(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ace(e){var t=sce(e,"string");return typeof t=="symbol"?t:t+""}function sce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C7=0,oce={xAxis:{},yAxis:{},zAxis:{}},O7=Ii({name:"cartesianAxis",initialState:oce,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Sr()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Sr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Sr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Sr()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Sr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Sr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Sr()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Sr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Sr()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,n].slice(-3);e.yAxis[r]=GP(GP({},i),{},{width:n,widthHistory:o})}}}}),{addXAxis:lce,replaceXAxis:cce,removeXAxis:uce,addYAxis:dce,replaceYAxis:fce,removeYAxis:hce,addZAxis:lme,replaceZAxis:cme,removeZAxis:ume,updateYAxisWidth:pce}=O7.actions,mce=O7.reducer,gce=ye([_n],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),vce=ye([gce,To,Io],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),bS=()=>Ve(vce),yce=()=>Ve(uae);function YP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(r),!0).forEach(function(n){xce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xce(e,t,r){return(t=bce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bce(e){var t=wce(e,"string");return typeof t=="symbol"?t:t+""}function wce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ce=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:a,clipPath:s}=e;if(i===!1||t.x==null||t.y==null)return null;var o={index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=Pb(Pb(Pb({},o),zc(i)),S5(i)),u;return b.isValidElement(i)?u=b.cloneElement(i,c):typeof i=="function"?u=i(c):u=b.createElement(g7,c),b.createElement(In,{className:"recharts-active-dot",clipPath:s},u)};function jce(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:a,zIndex:s=cn.activeDot}=e,o=Ve(Ll),c=yce();if(t==null||c==null)return null;var u=t.find(d=>c.includes(d.payload));return Ir(u)?null:b.createElement(Li,{zIndex:s},b.createElement(_ce,{point:u,childIndex:Number(o),mainColor:r,dataKey:i,activeDot:n,clipPath:a}))}var JP=(e,t,r)=>{var n=r??e;if(!Ir(n))return oi(n,t,0)},Sce=(e,t,r)=>{var n={},i=e.filter(J0),a=e.filter(u=>u.stackId==null),s=i.reduce((u,d)=>{var f=u[d.stackId];return f==null&&(f=[]),f.push(d),u[d.stackId]=f,u},n),o=Object.entries(s).map(u=>{var d,[f,p]=u,h=p.map(g=>g.dataKey),y=JP(t,r,(d=p[0])===null||d===void 0?void 0:d.barSize);return{stackId:f,dataKeys:h,barSize:y}}),c=a.map(u=>{var d=[u.dataKey].filter(p=>p!=null),f=JP(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]};function XP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Og(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(r),!0).forEach(function(n){Nce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nce(e,t,r){return(t=kce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kce(e){var t=Ace(e,"string");return typeof t=="symbol"?t:t+""}function Ace(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ece(e,t,r,n,i){var a,s=n.length;if(!(s<1)){var o=oi(e,r,0,!0),c,u=[];if(Rt((a=n[0])===null||a===void 0?void 0:a.barSize)){var d=!1,f=r/s,p=n.reduce((_,S)=>_+(S.barSize||0),0);p+=(s-1)*o,p>=r&&(p-=(s-1)*o,o=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var h=(r-p)/2>>0,y={offset:h-o,size:0};c=n.reduce((_,S)=>{var j,N={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:y.offset+y.size+o,size:d?f:(j=S.barSize)!==null&&j!==void 0?j:0}},A=[..._,N];return y=N.position,A},u)}else{var g=oi(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=Rt(i)?Math.min(x,i):x;c=n.reduce((_,S,j)=>[..._,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:g+(x+o)*j+(x-v)/2,size:v}}],u)}return c}}var Pce=(e,t,r,n,i,a,s)=>{var o=Ir(s)?t:s,c=Ece(r,n,i!==a?i:a,e,o);return i!==a&&c!=null&&(c=c.map(u=>Og(Og({},u),{},{position:Og(Og({},u.position),{},{offset:u.position.offset-i/2})}))),c},Cce=(e,t)=>{var r=Ej(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},Oce=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function Tce(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Rt(e.zIndex)?e.zIndex:t}var T7=e=>{var{chartData:t}=e,r=mr(),n=ci();return b.useEffect(()=>n?()=>{}:(r(dP(t)),()=>{r(dP(void 0))}),[t,r,n]),null},ZP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},I7=Ii({name:"brush",initialState:ZP,reducers:{setBrushSettings(e,t){return t.payload==null?ZP:t.payload}}}),{setBrushSettings:dme}=I7.actions,Ice=I7.reducer;function Lce(e){return(e%180+180)%180}var Dce=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Lce(i),s=a*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},Rce={dots:[],areas:[],lines:[]},L7=Ii({name:"referenceElements",initialState:Rce,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ga(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ga(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ga(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:fme,removeDot:hme,addArea:pme,removeArea:mme,addLine:gme,removeLine:vme}=L7.actions,Mce=L7.reducer,Fce=b.createContext(void 0),$ce=e=>{var{children:t}=e,[r]=b.useState("".concat(ip("recharts"),"-clip")),n=bS();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return b.createElement(Fce.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:i,y:a,height:o,width:s}))),t)};function D7(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function Bce(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Dce(n,r)}function Uce(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function yp(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function qce(e,t){return D7(e,t+1)}function zce(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,c=0,u=1,d=s,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:D7(n,u)};var g=c,x,v=()=>(x===void 0&&(x=r(y,g)),x),_=y.coordinate,S=c===0||yp(e,_,v,d,o);S||(c=0,d=s,u+=1),S&&(d=_+e*(v()/2+i),c+=u)},p;u<=a.length;)if(p=f(),p)return p.v;return[]}function Wce(e,t,r,n,i){var a=(n||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=t,u=1;u<=s;u++){for(var d=(s-1)%u,f=o,p=!0,h=function(){var j=n[g];if(j==null)return 0;var N=g,A,I=()=>(A===void 0&&(A=r(j,N)),A),E=j.coordinate,C=g===d||yp(e,E,I,f,c);if(!C)return p=!1,1;C&&(f=E+e*(I()/2+i))},y,g=d;g<s&&(y=h(),!(y!==0&&y===1));g+=u);if(p){for(var x=[],v=d;v<s;v+=u){var _=n[v];_!=null&&x.push(_)}return x}}return[]}function QP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(r),!0).forEach(function(n){Hce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hce(e,t,r){return(t=Vce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vce(e){var t=Kce(e,"string");return typeof t=="symbol"?t:t+""}function Kce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gce(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:c}=t,u=function(p){var h=a[p];if(h==null)return 1;var y=h,g,x=()=>(g===void 0&&(g=r(h,p)),g);if(p===s-1){var v=e*(y.coordinate+e*x()/2-c);a[p]=y=ii(ii({},y),{},{tickCoord:v>0?y.coordinate-v*e:y.coordinate})}else a[p]=y=ii(ii({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var _=yp(e,y.tickCoord,x,o,c);_&&(c=y.tickCoord-e*(x()/2+i),a[p]=ii(ii({},y),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return a}function Yce(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:c,end:u}=t;if(a){var d=n[o-1];if(d!=null){var f=r(d,o-1),p=e*(d.coordinate+e*f/2-u);if(s[o-1]=d=ii(ii({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var h=yp(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+i),s[o-1]=ii(ii({},d),{},{isShow:!0}))}}}for(var y=a?o-1:o,g=function(_){var S=s[_];if(S==null)return 1;var j=S,N,A=()=>(N===void 0&&(N=r(S,_)),N);if(_===0){var I=e*(j.coordinate-e*A()/2-c);s[_]=j=ii(ii({},j),{},{tickCoord:I<0?j.coordinate-I*e:j.coordinate})}else s[_]=j=ii(ii({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var E=yp(e,j.tickCoord,A,c,u);E&&(c=j.tickCoord+e*(A()/2+i),s[_]=ii(ii({},j),{},{isShow:!0}))}},x=0;x<y;x++)g(x);return s}function wS(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!i||!i.length||!n)return[];if(Be(c)||$0.isSsr){var p;return(p=qce(i,Be(c)?c:0))!==null&&p!==void 0?p:[]}var h=[],y=o==="top"||o==="bottom"?"width":"height",g=d&&y==="width"?Ph(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=(N,A)=>{var I=typeof u=="function"?u(N.value,A):N.value;return y==="width"?Bce(Ph(I,{fontSize:t,letterSpacing:r}),g,f):Ph(I,{fontSize:t,letterSpacing:r})[y]},v=i[0],_=i[1],S=i.length>=2&&v!=null&&_!=null?On(_.coordinate-v.coordinate):1,j=Uce(a,S,y);return c==="equidistantPreserveStart"?zce(S,j,x,i,s):c==="equidistantPreserveEnd"?Wce(S,j,x,i,s):(c==="preserveStart"||c==="preserveStartEnd"?h=Yce(S,j,x,i,s,c==="preserveStartEnd"):h=Gce(S,j,x,i,s),h.filter(N=>N.isShow))}var Jce=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(r?n:0);return Math.round(u)}return 0},Xce=["axisLine","width","height","className","hide","ticks","axisType"];function Zce(e,t){if(e==null)return{};var r,n,i=Qce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Qce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qc.apply(null,arguments)}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(n){eue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eue(e,t,r){return(t=tue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tue(e){var t=rue(e,"string");return typeof t=="symbol"?t:t+""}function rue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var go={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:cn.axis};function nue(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=Br(Br(Br({},c),Qi(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);u=Br(Br({},u),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);u=Br(Br({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+i})}return b.createElement("line",Qc({},u,{className:Ut("recharts-cartesian-axis-line",Hc(o,"className"))}))}function iue(e,t,r,n,i,a,s,o,c){var u,d,f,p,h,y,g=o?-1:1,x=e.tickSize||s,v=Be(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,p=r+ +!o*i,f=p-g*x,y=f-g*c,h=v;break;case"left":f=p=e.coordinate,d=t+ +!o*n,u=d-g*x,h=u-g*c,y=v;break;case"right":f=p=e.coordinate,d=t+ +o*n,u=d+g*x,h=u+g*c,y=v;break;default:u=d=e.coordinate,p=r+ +o*i,f=p+g*x,y=f+g*c,h=v;break}return{line:{x1:u,y1:f,x2:d,y2:p},tick:{x:h,y}}}function aue(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function sue(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function oue(e){var{option:t,tickProps:r,value:n}=e,i,a=Ut(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))i=b.cloneElement(t,Br(Br({},r),{},{className:a}));else if(typeof t=="function")i=t(Br(Br({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=Ut(s,b7(t))),i=b.createElement(ax,Qc({},r,{className:s}),n)}return i}var lue=b.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:f,x:p,y:h,width:y,height:g,tickSize:x,tickMargin:v,fontSize:_,letterSpacing:S,getTicksConfig:j,events:N,axisType:A}=e,I=wS(Br(Br({},j),{},{ticks:r}),_,S),E=aue(d,f),C=sue(d,f),D=Qi(j),T=zc(n),O={};typeof i=="object"&&(O=i);var q=Br(Br({},D),{},{fill:"none"},O),K=I.map(te=>Br({entry:te},iue(te,p,h,y,g,d,x,f,v))),ne=K.map(te=>{var{entry:W,line:B}=te;return b.createElement(In,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},i&&b.createElement("line",Qc({},q,B,{className:Ut("recharts-cartesian-axis-tick-line",Hc(i,"className"))})))}),re=K.map((te,W)=>{var B,le,{entry:G,tick:R}=te,z=Br(Br(Br(Br({verticalAnchor:C},D),{},{textAnchor:E,stroke:"none",fill:a},R),{},{index:W,payload:G,visibleTicksCount:I.length,tickFormatter:s,padding:c},u),{},{angle:(B=(le=u==null?void 0:u.angle)!==null&&le!==void 0?le:D.angle)!==null&&B!==void 0?B:0}),J=Br(Br({},z),T);return b.createElement(In,Qc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},Ip(N,G,W)),n&&b.createElement(oue,{option:n,tickProps:J,value:"".concat(typeof s=="function"?s(G.value,W):G.value).concat(o||"")}))});return b.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},re.length>0&&b.createElement(Li,{zIndex:cn.label},b.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},re)),ne.length>0&&b.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},ne))}),cue=b.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:c}=e,u=Zce(e,Xce),[d,f]=b.useState(""),[p,h]=b.useState(""),y=b.useRef(null);b.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var x;return Jce({ticks:y.current,label:(x=e.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=b.useCallback(x=>{if(x){var v=x.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=v;var _=v[0];if(_){var S=window.getComputedStyle(_),j=S.fontSize,N=S.letterSpacing;(j!==d||N!==p)&&(f(j),h(N))}}},[d,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:b.createElement(Li,{zIndex:e.zIndex},b.createElement(In,{className:Ut("recharts-cartesian-axis",a)},b.createElement(nue,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Qi(e)}),b.createElement(lue,{ref:g,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),b.createElement(uoe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},b.createElement(boe,{label:e.label,labelRef:e.labelRef}),e.children)))}),_S=b.forwardRef((e,t)=>{var r=dn(e,go);return b.createElement(cue,Qc({},r,{ref:t}))});_S.displayName="CartesianAxis";var uue=["x1","y1","x2","y2","key"],due=["offset"],fue=["xAxisId","yAxisId"],hue=["xAxisId","yAxisId"];function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){pue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pue(e,t,r){return(t=mue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mue(e){var t=gue(e,"string");return typeof t=="symbol"?t:t+""}function gue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ec.apply(null,arguments)}function Ty(e,t){if(e==null)return{};var r,n,i=vue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yue=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return b.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function R7(e){var{option:t,lineItemProps:r}=e,n;if(b.isValidElement(t))n=b.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=r,d=Ty(r,uue),f=(i=Qi(d))!==null&&i!==void 0?i:{},{offset:p}=f,h=Ty(f,due);n=b.createElement("line",Ec({},h,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return n}function xue(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=Ty(e,fue),c=i.map((u,d)=>{var f=si(si({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return b.createElement(R7,{key:"line-".concat(d),option:n,lineItemProps:f})});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function bue(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=Ty(e,hue),c=i.map((u,d)=>{var f=si(si({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return b.createElement(R7,{option:n,lineItemProps:f,key:"line-".concat(d)})});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function wue(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var h=u[p+1],y=h==null,g=y?i+s-f:h-f;if(g<=0)return null;var x=p%t.length;return b.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:g,width:a,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function _ue(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var h=u[p+1],y=h==null,g=y?i+s-f:h-f;if(g<=0)return null;var x=p%r.length;return b.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:g,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var jue=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return m8(wS(si(si(si({},go),r),{},{ticks:g8(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},Sue=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return m8(wS(si(si(si({},go),r),{},{ticks:g8(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},Nue={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:cn.grid};function eu(e){var t=H5(),r=V5(),n=k8(),i=si(si({},dn(e,Nue)),{},{x:Be(e.x)?e.x:n.left,y:Be(e.y)?e.y:n.top,width:Be(e.width)?e.width:n.width,height:Be(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:h}=i,y=ci(),g=Ve(C=>eP(C,"xAxis",a,y)),x=Ve(C=>eP(C,"yAxis",s,y));if(!Cs(u)||!Cs(d)||!Be(o)||!Be(c))return null;var v=i.verticalCoordinatesGenerator||jue,_=i.horizontalCoordinatesGenerator||Sue,{horizontalPoints:S,verticalPoints:j}=i;if((!S||!S.length)&&typeof _=="function"){var N=p&&p.length,A=_({yAxis:x?si(si({},x),{},{ticks:N?p:x.ticks}):void 0,width:t??u,height:r??d,offset:n},N?!0:f);iy(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(S=A)}if((!j||!j.length)&&typeof v=="function"){var I=h&&h.length,E=v({xAxis:g?si(si({},g),{},{ticks:I?h:g.ticks}):void 0,width:t??u,height:r??d,offset:n},I?!0:f);iy(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(j=E)}return b.createElement(Li,{zIndex:i.zIndex},b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(yue,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),b.createElement(wue,Ec({},i,{horizontalPoints:S})),b.createElement(_ue,Ec({},i,{verticalPoints:j})),b.createElement(xue,Ec({},i,{offset:n,horizontalPoints:S,xAxis:g,yAxis:x})),b.createElement(bue,Ec({},i,{offset:n,verticalPoints:j,xAxis:g,yAxis:x}))))}eu.displayName="CartesianGrid";var kue={},M7=Ii({name:"errorBars",initialState:kue,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:yme,replaceErrorBar:xme,removeErrorBar:bme}=M7.actions,Aue=M7.reducer,Eue=["children"];function Pue(e,t){if(e==null)return{};var r,n,i=Cue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Cue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Oue={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Tue=b.createContext(Oue);function F7(e){var{children:t}=e,r=Pue(e,Eue);return b.createElement(Tue.Provider,{value:r},t)}function jS(e,t){var r,n,i=Ve(u=>Ro(u,e)),a=Ve(u=>Mo(u,t)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:kn.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:An.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function $7(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=bS(),{needClipX:a,needClipY:s,needClip:o}=jS(t,r);if(!o||!i)return null;var{x:c,y:u,width:d,height:f}=i;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:a?c:c-d/2,y:s?u:u-f/2,width:a?d:d*2,height:s?f:f*2}))}var B7=(e,t,r,n)=>Il(e,"xAxis",t,n),U7=(e,t,r,n)=>Tl(e,"xAxis",t,n),q7=(e,t,r,n)=>Il(e,"yAxis",r,n),z7=(e,t,r,n)=>Tl(e,"yAxis",r,n),Iue=ye([Ht,B7,q7,U7,z7],(e,t,r,n,i)=>Oo(e,"xAxis")?Fd(t,n,!1):Fd(r,i,!1)),Lue=(e,t,r,n,i)=>i;function Due(e){return e.type==="line"}var Rue=ye([Q0,Lue],(e,t)=>e.filter(Due).find(r=>r.id===t)),Mue=ye([Ht,B7,q7,U7,z7,Rue,Iue,xj],(e,t,r,n,i,a,s,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||s==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=a,h;if(p!=null&&p.length>0?h=p:h=c==null?void 0:c.slice(u,d+1),h!=null)return Ede({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:f,bandSize:s,displayedData:h})}});function Fue(e){var t=zc(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:a}=t,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var $ue={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=b;function Bue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Uue=typeof Object.is=="function"?Object.is:Bue,que=Qp.useSyncExternalStore,zue=Qp.useRef,Wue=Qp.useEffect,Hue=Qp.useMemo,Vue=Qp.useDebugValue;$ue.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=zue(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=Hue(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),i!==void 0&&s.hasValue){var y=s.value;if(i(y,h))return f=y}return f=h}if(y=f,Uue(d,h))return y;var g=n(h);return i!==void 0&&i(y,g)?(d=h,y):(d=h,f=g)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,i]);var o=que(e,a[0],a[1]);return Wue(function(){s.hasValue=!0,s.value=o},[o]),Vue(o),o};function Kue(e){e()}function Gue(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Kue(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var rC={notify(){},get:()=>[]};function Yue(e,t){let r,n=rC,i=0,a=!1;function s(g){d();const x=n.subscribe(g);let v=!1;return()=>{v||(v=!0,x(),f())}}function o(){n.notify()}function c(){y.onStateChange&&y.onStateChange()}function u(){return a}function d(){i++,r||(r=e.subscribe(c),n=Gue())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=rC)}function p(){a||(a=!0,d())}function h(){a&&(a=!1,f())}const y={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:h,getListeners:()=>n};return y}var Jue=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xue=Jue(),Zue=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Que=Zue(),ede=()=>Xue||Que?b.useLayoutEffect:b.useEffect,tde=ede();function nC(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function rde(e,t){if(nC(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!nC(e[r[i]],t[r[i]]))return!1;return!0}var Cb=Symbol.for("react-redux-context"),Ob=typeof globalThis<"u"?globalThis:{};function nde(){if(!b.createContext)return{};const e=Ob[Cb]??(Ob[Cb]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var ide=nde();function ade(e){const{children:t,context:r,serverState:n,store:i}=e,a=b.useMemo(()=>{const c=Yue(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),s=b.useMemo(()=>i.getState(),[i]);tde(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=r||ide;return b.createElement(o.Provider,{value:a},t)}var sde=ade,ode=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function lde(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function xx(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(ode.has(n)){if(e[n]==null&&t[n]==null)continue;if(!rde(e[n],t[n]))return!1}else if(!lde(e[n],t[n]))return!1;return!0}var cde=["id"],ude=["type","layout","connectNulls","needClip","shape"],dde=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xp.apply(null,arguments)}function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(n){fde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fde(e,t,r){return(t=hde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hde(e){var t=pde(e,"string");return typeof t=="symbol"?t:t+""}function pde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SS(e,t){if(e==null)return{};var r,n,i=mde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gde=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:ef(r,t),payload:e}]},vde=b.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:r,getPosition:fu,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:ef(s,t),hide:o,type:u,color:n,unit:c,graphicalItemId:d}};return b.createElement(yS,{tooltipEntrySettings:f})}),W7=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function yde(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var xde=(e,t,r)=>{var n=r.reduce((h,y)=>h+y);if(!n)return W7(t,e);for(var i=Math.floor(e/n),a=e%n,s=t-e,o=[],c=0,u=0;c<r.length;u+=(d=r[c])!==null&&d!==void 0?d:0,++c){var d,f=r[c];if(f!=null&&u+f>a){o=[...r.slice(0,c),a-u];break}}var p=o.length%2===0?[0,s]:[s];return[...yde(r,i),...o,...p].map(h=>"".concat(h,"px")).join(", ")};function bde(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,c=SS(n,cde),u=Qi(c);return b.createElement(nce,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:u,needClip:s,clipPathId:t})}function wde(e){var{showLabels:t,children:r,points:n}=e,i=b.useMemo(()=>n==null?void 0:n.map(a=>{var s,o,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return vs(vs({},c),{},{value:a.value,payload:a.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return b.createElement(p7,{value:t?i:void 0},r)}function aC(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:a}=e,{type:s,layout:o,connectNulls:c,needClip:u,shape:d}=a,f=SS(a,ude),p=vs(vs({},yi(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:s,layout:o,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return b.createElement(b.Fragment,null,(n==null?void 0:n.length)>1&&b.createElement(pS,xp({shapeType:"curve",option:d},p,{pathRef:r})),b.createElement(bde,{points:n,clipPathId:t,props:a}))}function _de(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function jde(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:s,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:p,width:h,height:y,onAnimationEnd:g,onAnimationStart:x}=r,v=i.current,_=Bp(s,"recharts-line-"),S=b.useRef(_),[j,N]=b.useState(!1),A=!j,I=b.useCallback(()=>{typeof g=="function"&&g(),N(!1)},[g]),E=b.useCallback(()=>{typeof x=="function"&&x(),N(!0)},[x]),C=_de(n.current),D=b.useRef(0);S.current!==_&&(D.current=a.current,S.current=_);var T=D.current;return b.createElement(wde,{points:s,showLabels:A},r.children,b.createElement($p,{animationId:_,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:I,onAnimationStart:E,key:_},O=>{var q=kr(T,C+T,O),K=Math.min(q,C),ne;if(c)if(o){var re="".concat(o).split(/[,\s]+/gim).map(B=>parseFloat(B));ne=xde(K,C,re)}else ne=W7(C,K);else ne=o==null?void 0:String(o);if(O>0&&C>0&&(i.current=s,a.current=Math.max(a.current,K)),v){var te=v.length/s.length,W=O===1?s:s.map((B,le)=>{var G=Math.floor(le*te);if(v[G]){var R=v[G];return vs(vs({},B),{},{x:kr(R.x,B.x,O),y:kr(R.y,B.y,O)})}return p?vs(vs({},B),{},{x:kr(h*2,B.x,O),y:kr(y/2,B.y,O)}):vs(vs({},B),{},{x:B.x,y:B.y})});return i.current=W,b.createElement(aC,{props:r,points:W,clipPathId:t,pathRef:n,strokeDasharray:ne})}return b.createElement(aC,{props:r,points:s,clipPathId:t,pathRef:n,strokeDasharray:ne})}),b.createElement(lS,{label:r.label}))}function Sde(e){var{clipPathId:t,props:r}=e,n=b.useRef(null),i=b.useRef(0),a=b.useRef(null);return b.createElement(jde,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var Nde=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:rr(e.payload,t)}};class kde extends b.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:c,width:u,height:d,id:f,needClip:p,zIndex:h}=this.props;if(t)return null;var y=Ut("recharts-line",i),g=f,{r:x,strokeWidth:v}=Fue(r),_=S7(r),S=x*2+v,j=p?"url(#clipPath-".concat(_?"":"dots-").concat(g,")"):void 0;return b.createElement(Li,{zIndex:h},b.createElement(In,{className:y},p&&b.createElement("defs",null,b.createElement($7,{clipPathId:g,xAxisId:a,yAxisId:s}),!_&&b.createElement("clipPath",{id:"clipPath-dots-".concat(g)},b.createElement("rect",{x:c-S/2,y:o-S/2,width:u+S,height:d+S}))),b.createElement(F7,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:Nde,errorBarOffset:0},b.createElement(Sde,{props:this.props,clipPathId:g}))),b.createElement(jce,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:j}))}}var H7={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:cn.line,type:"linear"};function Ade(e){var t=dn(e,H7),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:p,xAxisId:h,yAxisId:y,id:g}=t,x=SS(t,dde),{needClip:v}=jS(h,y),_=bS(),S=hu(),j=ci(),N=Ve(D=>Mue(D,h,y,j,g));if(S!=="horizontal"&&S!=="vertical"||N==null||_==null)return null;var{height:A,width:I,x:E,y:C}=_;return b.createElement(kde,xp({},x,{id:g,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:d,hide:u,label:f,legendType:p,xAxisId:h,yAxisId:y,points:N,layout:S,height:A,width:I,left:E,top:C,needClip:v}))}function Ede(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=rr(u,s);if(t==="horizontal"){var p=aE({axis:r,ticks:i,bandSize:o,entry:u,index:d}),h=Ir(f)?null:n.scale.map(f);return{x:p,y:h??null,value:f,payload:u}}var y=Ir(f)?null:r.scale.map(f),g=aE({axis:n,ticks:a,bandSize:o,entry:u,index:d});return y==null||g==null?null:{x:y,y:g,value:f,payload:u}}).filter(Boolean)}function Pde(e){var t=dn(e,H7),r=ci();return b.createElement(xS,{id:t.id,type:"line"},n=>b.createElement(b.Fragment,null,b.createElement(k7,{legendPayload:gde(t)}),b.createElement(vde,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),b.createElement(E7,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),b.createElement(Ade,xp({},t,{id:n}))))}var Xw=b.memo(Pde,xx);Xw.displayName="Line";function gu(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:C7}function vu(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:C7}var Cde="Invariant failed";function Ode(e,t){throw new Error(Cde)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zw.apply(null,arguments)}function Iy(e){return b.createElement(pS,Zw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Tde=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Be(t))return t;var a=Be(n)||Ir(n);return a?t(n,i):(a||Ode(),r)}},Ide=(e,t,r)=>r,Lde=(e,t)=>t,em=ye([Q0,Lde],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Dde=ye([em],e=>e==null?void 0:e.maxBarSize),Rde=(e,t,r,n)=>n,Mde=ye([Ht,Q0,gu,vu,Ide],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Fde=(e,t,r)=>{var n=Ht(e),i=gu(e,t),a=vu(e,t);if(!(i==null||a==null))return n==="horizontal"?Ww(e,"yAxis",a,r):Ww(e,"xAxis",i,r)},$de=(e,t)=>{var r=Ht(e),n=gu(e,t),i=vu(e,t);if(!(n==null||i==null))return r==="horizontal"?Q3(e,"xAxis",n):Q3(e,"yAxis",i)},Bde=ye([Mde,ane,$de],Sce),Ude=(e,t,r)=>{var n,i,a=em(e,t);if(a==null)return 0;var s=gu(e,t),o=vu(e,t);if(s==null||o==null)return 0;var c=Ht(e),u=zD(e),{maxBarSize:d}=a,f=Ir(d)?u:d,p,h;return c==="horizontal"?(p=Il(e,"xAxis",s,r),h=Tl(e,"xAxis",s,r)):(p=Il(e,"yAxis",o,r),h=Tl(e,"yAxis",o,r)),(n=(i=Fd(p,h,!0))!==null&&i!==void 0?i:f)!==null&&n!==void 0?n:0},V7=(e,t,r)=>{var n=Ht(e),i=gu(e,t),a=vu(e,t);if(!(i==null||a==null)){var s,o;return n==="horizontal"?(s=Il(e,"xAxis",i,r),o=Tl(e,"xAxis",i,r)):(s=Il(e,"yAxis",a,r),o=Tl(e,"yAxis",a,r)),Fd(s,o)}},qde=ye([Bde,zD,ine,WD,Ude,V7,Dde],Pce),zde=(e,t,r)=>{var n=gu(e,t);if(n!=null)return Il(e,"xAxis",n,r)},Wde=(e,t,r)=>{var n=vu(e,t);if(n!=null)return Il(e,"yAxis",n,r)},Hde=(e,t,r)=>{var n=gu(e,t);if(n!=null)return Tl(e,"xAxis",n,r)},Vde=(e,t,r)=>{var n=vu(e,t);if(n!=null)return Tl(e,"yAxis",n,r)},Kde=ye([qde,em],Oce),Gde=ye([Fde,em],Cce),Yde=ye([_n,q5,zde,Wde,Hde,Vde,Kde,Ht,Jre,V7,Gde,em,Rde],(e,t,r,n,i,a,s,o,c,u,d,f,p)=>{var{chartData:h,dataStartIndex:y,dataEndIndex:g}=c;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||u==null)){var{data:x}=f,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(y,g+1),v!=null)return jfe({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:v,offset:e,cells:p,dataStartIndex:y})}}),Jde=["index"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qw.apply(null,arguments)}function Xde(e,t){if(e==null)return{};var r,n,i=Zde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K7=b.createContext(void 0),Qde=e=>{var t=b.useContext(K7);if(t!=null)return t.stackId;if(e!=null)return ZX(e)},efe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),tfe=e=>{var t=b.useContext(K7);if(t!=null){var{stackId:r}=t;return"url(#".concat(efe(r,e),")")}},G7=e=>{var{index:t}=e,r=Xde(e,Jde),n=tfe(t);return b.createElement(In,Qw({className:"recharts-bar-stack-layer",clipPath:n},r))},rfe=["onMouseEnter","onMouseLeave","onClick"],nfe=["value","background","tooltipPosition"],ife=["id"],afe=["onMouseEnter","onClick","onMouseLeave"];function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eo.apply(null,arguments)}function sC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(r),!0).forEach(function(n){sfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sfe(e,t,r){return(t=ofe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ofe(e){var t=lfe(e,"string");return typeof t=="symbol"?t:t+""}function lfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ly(e,t){if(e==null)return{};var r,n,i=cfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function cfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ufe=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:ef(r,t),payload:e}]},dfe=b.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,getPosition:fu,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:ef(a,t),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return b.createElement(yS,{tooltipEntrySettings:d})});function ffe(e){var t=Ve(Ll),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=Ly(a,rfe),d=mS(s,n,a.id),f=gS(o),p=vS(c,n,a.id);if(!i||r==null)return null;var h=zc(i);return b.createElement(Li,{zIndex:Tce(i,cn.barBackground)},r.map((y,g)=>{var{value:x,background:v,tooltipPosition:_}=y,S=Ly(y,nfe);if(!v)return null;var j=d(y,g),N=f(y,g),A=p(y,g),I=mi(mi(mi(mi(mi({option:i,isActive:String(g)===t},S),{},{fill:"#eee"},v),h),Ip(u,y,g)),{},{onMouseEnter:j,onMouseLeave:N,onClick:A,dataKey:n,index:g,className:"recharts-bar-background-rectangle"});return b.createElement(Iy,Eo({key:"background-bar-".concat(g)},I))}))}function hfe(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return mi(mi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return b.createElement(p7,{value:t?i:void 0},r)}function pfe(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=e,o=Ve(Ll),c=Ve(tS),u=r&&String(a)===o&&(c==null||s===c),d=u?r:t;return u?b.createElement(Li,{zIndex:cn.activeBar},b.createElement(G7,{index:a},b.createElement(Iy,Eo({},n,{name:String(n.name)},i,{isActive:u,option:d,index:a,dataKey:s})))):b.createElement(Iy,Eo({},n,{name:String(n.name)},i,{isActive:u,option:d,index:a,dataKey:s}))}function mfe(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return b.createElement(Iy,Eo({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:a}))}function gfe(e){var t,{data:r,props:n}=e,i=(t=Qi(n))!==null&&t!==void 0?t:{},{id:a}=i,s=Ly(i,ife),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:p}=n,h=Ly(n,afe),y=mS(d,c,a),g=gS(p),x=vS(f,c,a);return r?b.createElement(b.Fragment,null,r.map((v,_)=>b.createElement(G7,Eo({index:_,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(_),className:"recharts-bar-rectangle"},Ip(h,v,_),{onMouseEnter:y(v,_),onMouseLeave:g(v,_),onClick:x(v,_)}),u?b.createElement(pfe,{shape:o,activeBar:u,baseProps:s,entry:v,index:_,dataKey:c}):b.createElement(mfe,{shape:o,baseProps:s,entry:v,index:_,dataKey:c})))):null}function vfe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,p=Bp(t,"recharts-bar-"),[h,y]=b.useState(!1),g=!h,x=b.useCallback(()=>{typeof u=="function"&&u(),y(!1)},[u]),v=b.useCallback(()=>{typeof d=="function"&&d(),y(!0)},[d]);return b.createElement(hfe,{showLabels:g,rects:n},b.createElement($p,{animationId:p,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:x,onAnimationStart:v,key:p},_=>{var S=_===1?n:n==null?void 0:n.map((j,N)=>{var A=f&&f[N];if(A)return mi(mi({},j),{},{x:kr(A.x,j.x,_),y:kr(A.y,j.y,_),width:kr(A.width,j.width,_),height:kr(A.height,j.height,_)});if(i==="horizontal"){var I=kr(0,j.height,_),E=kr(j.stackedBarStart,j.y,_);return mi(mi({},j),{},{y:E,height:I})}var C=kr(0,j.width,_),D=kr(j.stackedBarStart,j.x,_);return mi(mi({},j),{},{width:C,x:D})});return _>0&&(r.current=S??null),S==null?null:b.createElement(In,null,b.createElement(gfe,{props:t,data:S}))}),b.createElement(lS,{label:t.label}),t.children)}function yfe(e){var t=b.useRef(null);return b.createElement(vfe,{previousRectanglesRef:t,props:e})}var Y7=0,xfe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:rr(e,t)}};class bfe extends b.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(t||r==null)return null;var d=Ut("recharts-bar",i),f=u;return b.createElement(In,{className:d,id:u},o&&b.createElement("defs",null,b.createElement($7,{clipPathId:f,xAxisId:a,yAxisId:s})),b.createElement(In,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},b.createElement(ffe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),b.createElement(yfe,this.props)))}}var wfe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Y7,xAxisId:0,yAxisId:0,zIndex:cn.bar};function _fe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=jS(t,r),p=hu(),h=ci(),y=hS(e.children,Zp),g=Ve(_=>Yde(_,e.id,h,y));if(p!=="vertical"&&p!=="horizontal")return null;var x,v=g==null?void 0:g[0];return v==null||v.height==null||v.width==null?x=0:x=p==="vertical"?v.height/2:v.width/2,b.createElement(F7,{xAxisId:t,yAxisId:r,data:g,dataPointFormatter:xfe,errorBarOffset:x},b.createElement(bfe,Eo({},e,{layout:p,needClip:f,data:g,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function jfe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:p,cells:h,parentViewBox:y,dataStartIndex:g}=e,x=t==="horizontal"?o:s,v=d?x.scale.domain():null,_=QX({numericAxis:x}),S=x.scale.map(_);return f.map((j,N)=>{var A,I,E,C,D,T;if(d){var O=d[N+g];if(O==null)return null;A=KX(O,v)}else A=rr(j,r),Array.isArray(A)||(A=[_,A]);var q=Tde(n,Y7)(A[1],N);if(t==="horizontal"){var K,ne=o.scale.map(A[0]),re=o.scale.map(A[1]);if(ne==null||re==null)return null;I=sE({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:j,index:N}),E=(K=re??ne)!==null&&K!==void 0?K:void 0,C=i.size;var te=ne-re;if(D=Es(te)?0:te,T={x:I,y:p.top,width:C,height:p.height},Math.abs(q)>0&&Math.abs(D)<Math.abs(q)){var W=On(D||q)*(Math.abs(q)-Math.abs(D));E-=W,D+=W}}else{var B=s.scale.map(A[0]),le=s.scale.map(A[1]);if(B==null||le==null)return null;if(I=B,E=sE({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:j,index:N}),C=le-B,D=i.size,T={x:p.left,y:E,width:p.width,height:D},Math.abs(q)>0&&Math.abs(C)<Math.abs(q)){var G=On(C||q)*(Math.abs(q)-Math.abs(C));C+=G}}if(I==null||E==null||C==null||D==null)return null;var R=mi(mi({},j),{},{stackedBarStart:S,x:I,y:E,width:C,height:D,value:d?A:A[1],payload:j,background:T,tooltipPosition:{x:I+C/2,y:E+D/2},parentViewBox:y},h&&h[N]&&h[N].props);return R}).filter(Boolean)}function Sfe(e){var t=dn(e,wfe),r=Qde(t.stackId),n=ci();return b.createElement(xS,{id:t.id,type:"bar"},i=>b.createElement(b.Fragment,null,b.createElement(k7,{legendPayload:ufe(t)}),b.createElement(dfe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),b.createElement(E7,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),b.createElement(Li,{zIndex:t.zIndex},b.createElement(_fe,Eo({},t,{id:i})))))}var tu=b.memo(Sfe,xx);tu.displayName="Bar";var Nfe=["domain","range"],kfe=["domain","range"];function oC(e,t){if(e==null)return{};var r,n,i=Afe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Afe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lC(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function J7(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=oC(e,Nfe),{domain:a,range:s}=t,o=oC(t,kfe);return!lC(r,a)||!lC(n,s)?!1:xx(i,o)}var Efe=["type"],Pfe=["dangerouslySetInnerHTML","ticks","scale"],Cfe=["id","scale"];function e_(){return e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e_.apply(null,arguments)}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){Ofe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ofe(e,t,r){return(t=Tfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tfe(e){var t=Ife(e,"string");return typeof t=="symbol"?t:t+""}function Ife(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t_(e,t){if(e==null)return{};var r,n,i=Lfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Lfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dfe(e){var t=mr(),r=b.useRef(null),n=A8(),{type:i}=e,a=t_(e,Efe),s=G0(n,"xAxis",i),o=b.useMemo(()=>{if(s!=null)return uC(uC({},a),{},{type:s})},[a,s]);return b.useLayoutEffect(()=>{o!=null&&(r.current===null?t(lce(o)):r.current!==o&&t(cce({prev:r.current,next:o})),r.current=o)},[o,t]),b.useLayoutEffect(()=>()=>{r.current&&(t(uce(r.current)),r.current=null)},[t]),null}var Rfe=e=>{var{xAxisId:t,className:r}=e,n=Ve(q5),i=ci(),a="xAxis",s=Ve(v=>jR(v,a,t,i)),o=Ve(v=>xR(v,t)),c=Ve(v=>aie(v,t)),u=Ve(v=>eR(v,t));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:p}=e,h=t_(e,Pfe),{id:y,scale:g}=u,x=t_(u,Cfe);return b.createElement(_S,e_({},h,x,{x:c.x,y:c.y,width:o.width,height:o.height,className:Ut("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:s,axisType:a}))},Mfe={allowDataOverflow:kn.allowDataOverflow,allowDecimals:kn.allowDecimals,allowDuplicatedCategory:kn.allowDuplicatedCategory,angle:kn.angle,axisLine:go.axisLine,height:kn.height,hide:!1,includeHidden:kn.includeHidden,interval:kn.interval,label:!1,minTickGap:kn.minTickGap,mirror:kn.mirror,orientation:kn.orientation,padding:kn.padding,reversed:kn.reversed,scale:kn.scale,tick:kn.tick,tickCount:kn.tickCount,tickLine:go.tickLine,tickSize:go.tickSize,type:kn.type,xAxisId:0},Ffe=e=>{var t=dn(e,Mfe);return b.createElement(b.Fragment,null,b.createElement(Dfe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),b.createElement(Rfe,t))},ru=b.memo(Ffe,J7);ru.displayName="XAxis";var $fe=["type"],Bfe=["dangerouslySetInnerHTML","ticks","scale"],Ufe=["id","scale"];function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r_.apply(null,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){qfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qfe(e,t,r){return(t=zfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zfe(e){var t=Wfe(e,"string");return typeof t=="symbol"?t:t+""}function Wfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n_(e,t){if(e==null)return{};var r,n,i=Hfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Hfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vfe(e){var t=mr(),r=b.useRef(null),n=A8(),{type:i}=e,a=n_(e,$fe),s=G0(n,"yAxis",i),o=b.useMemo(()=>{if(s!=null)return fC(fC({},a),{},{type:s})},[s,a]);return b.useLayoutEffect(()=>{o!=null&&(r.current===null?t(dce(o)):r.current!==o&&t(fce({prev:r.current,next:o})),r.current=o)},[o,t]),b.useLayoutEffect(()=>()=>{r.current&&(t(hce(r.current)),r.current=null)},[t]),null}function Kfe(e){var{yAxisId:t,className:r,width:n,label:i}=e,a=b.useRef(null),s=b.useRef(null),o=Ve(q5),c=ci(),u=mr(),d="yAxis",f=Ve(A=>bR(A,t)),p=Ve(A=>oie(A,t)),h=Ve(A=>jR(A,d,t,c)),y=Ve(A=>tR(A,t));if(b.useLayoutEffect(()=>{if(!(n!=="auto"||!f||oS(i)||b.isValidElement(i)||y==null)){var A=a.current;if(A){var I=A.getCalculatedWidth();Math.round(f.width)!==Math.round(I)&&u(pce({id:t,width:I}))}}},[h,f,u,i,t,n,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:g,ticks:x,scale:v}=e,_=n_(e,Bfe),{id:S,scale:j}=y,N=n_(y,Ufe);return b.createElement(_S,r_({},_,N,{ref:a,labelRef:s,x:p.x,y:p.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Ut("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:h,axisType:d}))}var Gfe={allowDataOverflow:An.allowDataOverflow,allowDecimals:An.allowDecimals,allowDuplicatedCategory:An.allowDuplicatedCategory,angle:An.angle,axisLine:go.axisLine,hide:!1,includeHidden:An.includeHidden,interval:An.interval,label:!1,minTickGap:An.minTickGap,mirror:An.mirror,orientation:An.orientation,padding:An.padding,reversed:An.reversed,scale:An.scale,tick:An.tick,tickCount:An.tickCount,tickLine:go.tickLine,tickSize:go.tickSize,type:An.type,width:An.width,yAxisId:0},Yfe=e=>{var t=dn(e,Gfe);return b.createElement(b.Fragment,null,b.createElement(Vfe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),b.createElement(Kfe,t))},nu=b.memo(Yfe,J7);nu.displayName="YAxis";var Jfe=(e,t)=>t,NS=ye([Jfe,Ht,XD,Dn,BR,Fo,jae,_n],Cae),kS=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},X7=Sa("mouseClick"),Z7=Dp();Z7.startListening({actionCreator:X7,effect:(e,t)=>{var r=e.payload,n=NS(t.getState(),kS(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(wie({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var i_=Sa("mouseMove"),Q7=Dp(),Tg=null;Q7.startListening({actionCreator:i_,effect:(e,t)=>{var r=e.payload;Tg!==null&&cancelAnimationFrame(Tg);var n=kS(r);Tg=requestAnimationFrame(()=>{var i=t.getState(),a=Yj(i,i.tooltip.settings.shared);if(a==="axis"){var s=NS(i,n);(s==null?void 0:s.activeIndex)!=null?t.dispatch(OR({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(CR())}Tg=null})}});function Xfe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var hC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},eM=Ii({name:"rootProps",initialState:hC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:hC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Zfe=eM.reducer,{updateOptions:Qfe}=eM.actions,ehe=null,the={updatePolarOptions:(e,t)=>t.payload},tM=Ii({name:"polarOptions",initialState:ehe,reducers:the}),{updatePolarOptions:rhe}=tM.actions,nhe=tM.reducer,rM=Sa("keyDown"),nM=Sa("focus"),AS=Dp();AS.startListening({actionCreator:rM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Jj(i,uf(r),Gp(r),Jp(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Fo(r);if(a==="Enter"){var u=Ay(r,"axis","hover",String(i.index));t.dispatch(Vw({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var d=die(r),f=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,h=o+p*f;if(!(c==null||h>=c.length||h<0)){var y=Ay(r,"axis","hover",String(h));t.dispatch(Vw({active:!0,activeIndex:h.toString(),activeCoordinate:y}))}}}}}});AS.startListening({actionCreator:nM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=Ay(r,"axis","hover",String(a));t.dispatch(Vw({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var pa=Sa("externalEvent"),iM=Dp(),Tb=new Map;iM.startListening({actionCreator:pa,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,a=Tb.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=t.getState(),c={activeCoordinate:oae(o),activeDataKey:tS(o),activeIndex:Ll(o),activeLabel:zR(o),activeTooltipIndex:Ll(o),isTooltipActive:lae(o)};r(c,n)}finally{Tb.delete(i)}});Tb.set(i,s)}}});var ihe=ye([lf],e=>e.tooltipItemPayloads),ahe=ye([ihe,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(a=>a.settings.graphicalItemId===r);if(n!=null){var{getPosition:i}=n;if(i!=null)return i(t)}}}),aM=Sa("touchMove"),sM=Dp();sM.startListening({actionCreator:aM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=Yj(n,n.tooltip.settings.shared);if(i==="axis"){var a=r.touches[0];if(a==null)return;var s=NS(n,kS({clientX:a.clientX,clientY:a.clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(OR({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(y8),f=(o=u.getAttribute(x8))!==null&&o!==void 0?o:void 0,p=cf(n).find(g=>g.id===f);if(d==null||p==null||f==null)return;var{dataKey:h}=p,y=ahe(n,d,f);t.dispatch(PR({activeDataKey:h,activeIndex:d,activeCoordinate:y,activeGraphicalItemId:f}))}}}});var she=BL({brush:Ice,cartesianAxis:mce,chartData:sse,errorBars:Aue,graphicalItems:_le,layout:qX,legend:HZ,options:tse,polarAxis:Foe,polarOptions:nhe,referenceElements:Mce,rootProps:Zfe,tooltip:_ie,zIndex:Wae}),ohe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return hX({reducer:she,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Z7.middleware,Q7.middleware,AS.middleware,iM.middleware,sM.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(t8({type:"raf"}))},devTools:{serialize:{replacer:Xfe},name:"recharts-".concat(r)}})};function oM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=ci(),a=b.useRef(null);if(i)return r;a.current==null&&(a.current=ohe(t,n));var s=I5;return b.createElement(sde,{context:s,store:a.current},r)}function lhe(e){var{layout:t,margin:r}=e,n=mr(),i=ci();return b.useEffect(()=>{i||(n($X(t)),n(FX(r)))},[n,i,t,r]),null}var lM=b.memo(lhe,xx);function cM(e){var t=mr();return b.useEffect(()=>{t(Qfe(e))},[t,e]),null}function pC(e){var{zIndex:t,isPanorama:r}=e,n=b.useRef(null),i=mr();return b.useLayoutEffect(()=>(n.current&&i(qae({zIndex:t,element:n.current,isPanorama:r})),()=>{i(zae({zIndex:t,isPanorama:r}))}),[i,t,r]),b.createElement("g",{tabIndex:-1,ref:n})}function mC(e){var{children:t,isPanorama:r}=e,n=Ve(Tae);if(!n||n.length===0)return t;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return b.createElement(b.Fragment,null,i.map(s=>b.createElement(pC,{key:s,zIndex:s,isPanorama:r})),t,a.map(s=>b.createElement(pC,{key:s,zIndex:s,isPanorama:r})))}var che=["children"];function uhe(e,t){if(e==null)return{};var r,n,i=dhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dy.apply(null,arguments)}var fhe={width:"100%",height:"100%",display:"block"},hhe=b.forwardRef((e,t)=>{var r=H5(),n=V5(),i=$8();if(!Cs(r)||!Cs(n))return null;var{children:a,otherAttributes:s,title:o,desc:c}=e,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),b.createElement(y5,Dy({},s,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:fhe,ref:t}),a)}),phe=e=>{var{children:t}=e,r=Ve(L0);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return b.createElement(y5,{width:n,height:i,x:s,y:a},t)},gC=b.forwardRef((e,t)=>{var{children:r}=e,n=uhe(e,che),i=ci();return i?b.createElement(phe,null,b.createElement(mC,{isPanorama:!0},r)):b.createElement(hhe,Dy({ref:t},n),b.createElement(mC,{isPanorama:!1},r))});function mhe(){var e=mr(),[t,r]=b.useState(null),n=Ve(aZ);return b.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Rt(a)&&a!==n&&e(UX(a))}},[t,e,n]),r}function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ghe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(n){vhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vhe(e,t,r){return(t=yhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yhe(e){var t=xhe(e,"string");return typeof t=="symbol"?t:t+""}function xhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function El(){return El=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},El.apply(null,arguments)}var bhe=()=>(mse(),null);function Ry(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var whe=b.forwardRef((e,t)=>{var r,n,i=b.useRef(null),[a,s]=b.useState({containerWidth:Ry((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Ry((n=e.style)===null||n===void 0?void 0:n.height)}),o=b.useCallback((u,d)=>{s(f=>{var p=Math.round(u),h=Math.round(d);return f.containerWidth===p&&f.containerHeight===h?f:{containerWidth:p,containerHeight:h}})},[]),c=b.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var p=y=>{var g=y[0];if(g!=null){var{width:x,height:v}=g.contentRect;o(x,v)}},h=new ResizeObserver(p);h.observe(u),i.current=h}},[t,o]);return b.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[o]),b.createElement(b.Fragment,null,b.createElement(Mp,{width:a.containerWidth,height:a.containerHeight}),b.createElement("div",El({ref:c},e)))}),_he=b.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,a]=b.useState({containerWidth:Ry(r),containerHeight:Ry(n)}),s=b.useCallback((c,u)=>{a(d=>{var f=Math.round(c),p=Math.round(u);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),o=b.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();s(u,d)}},[t,s]);return b.createElement(b.Fragment,null,b.createElement(Mp,{width:i.containerWidth,height:i.containerHeight}),b.createElement("div",El({ref:o},e)))}),jhe=b.forwardRef((e,t)=>{var{width:r,height:n}=e;return b.createElement(b.Fragment,null,b.createElement(Mp,{width:r,height:n}),b.createElement("div",El({ref:t},e)))}),She=b.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?b.createElement(_he,El({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?b.createElement(jhe,El({},e,{width:r,height:n,ref:t})):b.createElement(b.Fragment,null,b.createElement(Mp,{width:r,height:n}),b.createElement("div",El({ref:t},e)))});function Nhe(e){return e?whe:She}var khe=b.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:h,onTouchMove:y,onTouchStart:g,style:x,width:v,responsive:_,dispatchTouchEvents:S=!0}=e,j=b.useRef(null),N=mr(),[A,I]=b.useState(null),[E,C]=b.useState(null),D=mhe(),T=z5(),O=(T==null?void 0:T.width)>0?T.width:v,q=(T==null?void 0:T.height)>0?T.height:i,K=b.useCallback(ee=>{D(ee),typeof t=="function"&&t(ee),I(ee),C(ee),ee!=null&&(j.current=ee)},[D,t,I,C]),ne=b.useCallback(ee=>{N(X7(ee)),N(pa({handler:a,reactEvent:ee}))},[N,a]),re=b.useCallback(ee=>{N(i_(ee)),N(pa({handler:u,reactEvent:ee}))},[N,u]),te=b.useCallback(ee=>{N(CR()),N(pa({handler:d,reactEvent:ee}))},[N,d]),W=b.useCallback(ee=>{N(i_(ee)),N(pa({handler:f,reactEvent:ee}))},[N,f]),B=b.useCallback(()=>{N(nM())},[N]),le=b.useCallback(ee=>{N(rM(ee.key))},[N]),G=b.useCallback(ee=>{N(pa({handler:s,reactEvent:ee}))},[N,s]),R=b.useCallback(ee=>{N(pa({handler:o,reactEvent:ee}))},[N,o]),z=b.useCallback(ee=>{N(pa({handler:c,reactEvent:ee}))},[N,c]),J=b.useCallback(ee=>{N(pa({handler:p,reactEvent:ee}))},[N,p]),ie=b.useCallback(ee=>{N(pa({handler:g,reactEvent:ee}))},[N,g]),ae=b.useCallback(ee=>{S&&N(aM(ee)),N(pa({handler:y,reactEvent:ee}))},[N,S,y]),ue=b.useCallback(ee=>{N(pa({handler:h,reactEvent:ee}))},[N,h]),pe=Nhe(_);return b.createElement(JR.Provider,{value:A},b.createElement($I.Provider,{value:E},b.createElement(pe,{width:O??(x==null?void 0:x.width),height:q??(x==null?void 0:x.height),className:Ut("recharts-wrapper",n),style:ghe({position:"relative",cursor:"default",width:O,height:q},x),onClick:ne,onContextMenu:G,onDoubleClick:R,onFocus:B,onKeyDown:le,onMouseDown:z,onMouseEnter:re,onMouseLeave:te,onMouseMove:W,onMouseUp:J,onTouchEnd:ue,onTouchMove:ae,onTouchStart:ie,ref:K},b.createElement(bhe,null),r)))}),Ahe=["width","height","responsive","children","className","style","compact","title","desc"];function Ehe(e,t){if(e==null)return{};var r,n,i=Phe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Phe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uM=b.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:d}=e,f=Ehe(e,Ahe),p=Qi(f);return c?b.createElement(b.Fragment,null,b.createElement(Mp,{width:r,height:n}),b.createElement(gC,{otherAttributes:p,title:u,desc:d},a)):b.createElement(khe,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(gC,{otherAttributes:p,title:u,desc:d,ref:t},b.createElement($ce,null,a)))});function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_.apply(null,arguments)}var Che={top:5,right:5,bottom:5,left:5},Ohe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Che,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},dM=b.forwardRef(function(t,r){var n,i=dn(t.categoricalChartProps,Ohe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return b.createElement(oM,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:a},b.createElement(T7,{chartData:u.data}),b.createElement(lM,{layout:i.layout,margin:i.margin}),b.createElement(cM,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),b.createElement(uM,a_({},i,{ref:r})))}),The=["axis"],Ihe=b.forwardRef((e,t)=>b.createElement(dM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:The,tooltipPayloadSearcher:sS,categoricalChartProps:e,ref:t})),Lhe=["axis","item"],tm=b.forwardRef((e,t)=>b.createElement(dM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lhe,tooltipPayloadSearcher:sS,categoricalChartProps:e,ref:t}));function Dhe(e){var t=mr();return b.useEffect(()=>{t(rhe(e))},[t,e]),null}var Rhe=["layout"];function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s_.apply(null,arguments)}function Mhe(e,t){if(e==null)return{};var r,n,i=Fhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Fhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $he={top:5,right:5,bottom:5,left:5},fM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:$he,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Bhe=b.forwardRef(function(t,r){var n,i=dn(t.categoricalChartProps,fM),{layout:a}=i,s=Mhe(i,Rhe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=t,f={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return b.createElement(oM,{preloadedState:{options:f},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:o},b.createElement(T7,{chartData:i.data}),b.createElement(lM,{layout:a,margin:i.margin}),b.createElement(cM,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),b.createElement(Dhe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),b.createElement(uM,s_({},s,{ref:r})))});function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){Uhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uhe(e,t,r){return(t=qhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=zhe(e,"string");return typeof t=="symbol"?t:t+""}function zhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Whe=["item"],Hhe=xC(xC({},fM),{},{layout:"centric",startAngle:0,endAngle:360}),Vhe=b.forwardRef((e,t)=>{var r=dn(e,Hhe);return b.createElement(Bhe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Whe,tooltipPayloadSearcher:sS,categoricalChartProps:r,ref:t})});const bC=["#58B692","#348D74","#1A382E","#11241E","#58B692","#348D74"];function Khe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState("revenue"),[i,a]=b.useState(!1),[s,o]=b.useState(null),[c,u]=b.useState(""),[d,f]=b.useState(""),[p,h]=b.useState(""),y=t||[],g=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="accountant",x=[{id:"revenue",label:"Revenue"},{id:"payments",label:"Payments"},{id:"outstanding",label:"Outstanding & Aging"},{id:"subscriptions",label:"Subscriptions"},{id:"events",label:"Events"},{id:"clients",label:"Client Revenue"},{id:"outlets",label:"Outlet Performance"}];function v(_,S){const j=new Blob([_],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),A=URL.createObjectURL(j);N.setAttribute("href",A),N.setAttribute("download",S),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)}return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-primary",children:"Reports"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Production-ready reporting and analytics"})]}),l.jsx(we,{children:l.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:x.map(_=>l.jsx("button",{onClick:()=>n(_.id),className:`px-4 py-2 rounded-md font-medium transition-colors ${r===_.id?"bg-brand-primary text-white":"bg-brand-bg text-brand-text hover:bg-brand-border/50"}`,children:_.label},_.id))})}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Filters"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(ze,{label:"From Date",type:"date",value:c,onChange:_=>u(_.target.value)}),l.jsx(ze,{label:"To Date",type:"date",value:d,onChange:_=>f(_.target.value)}),g&&l.jsxs(ot,{label:"Outlet",value:p,onChange:_=>h(_.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),y.map(_=>l.jsx("option",{value:_.id,children:_.name},_.id))]}),(c||d||p)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Ee,{variant:"outline",onClick:()=>{u(""),f(""),h("")},children:"Clear Filters"})})]})]}),s&&l.jsx(ft,{variant:"error",children:s}),r==="revenue"&&l.jsx(Ghe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="payments"&&l.jsx(Yhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="outstanding"&&l.jsx(Jhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="subscriptions"&&l.jsx(Xhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="events"&&l.jsx(Zhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="clients"&&l.jsx(Qhe,{userId:(e==null?void 0:e.id)||"",outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="outlets"&&l.jsx(epe,{userId:(e==null?void 0:e.id)||"",outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v})]})}function Ghe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{h()},[e,t,r,n,f]);async function h(){try{i(!0),a(null);const v={date_from:t,date_to:r,outlet_id:n};f&&(v.invoice_type=f);const[_,S]=await Promise.all([TI(e,v),PG(e,{date_from:t,date_to:r,outlet_id:n})]);c(_),d(S)}catch(v){a(v instanceof Error?v.message:"Failed to load report")}finally{i(!1)}}const y=Wr(o.reduce((v,_)=>v+_.total_invoiced,0)),g=Wr(o.reduce((v,_)=>v+_.total_collected,0)),x=Wr(o.reduce((v,_)=>v+_.outstanding,0));return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Invoiced"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(y)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Collected"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(g)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Ie(x)})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(ot,{label:"Invoice Type",value:f,onChange:v=>p(v.target.value),className:"max-w-xs",children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),l.jsxs(Ee,{onClick:()=>s(RG(o),"revenue-report.csv"),disabled:o.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),u&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Revenue Trend"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Ihe,{data:u.trendData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:v=>v!==void 0?Ie(v):"-"}),l.jsx(Pw,{}),l.jsx(Xw,{type:"monotone",dataKey:"invoiced",stroke:"#8884d8",name:"Invoiced"}),l.jsx(Xw,{type:"monotone",dataKey:"collected",stroke:"#82ca9d",name:"Collected"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outlet-wise Revenue"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(tm,{data:u.outletData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:v=>v!==void 0?Ie(v):"-"}),l.jsx(Pw,{}),l.jsx(tu,{dataKey:"invoiced",fill:"#8884d8",name:"Invoiced"}),l.jsx(tu,{dataKey:"collected",fill:"#82ca9d",name:"Collected"})]})})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Revenue Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No data found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Count"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoiced"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"})]})}),l.jsx("tbody",{children:o.map((v,_)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:v.report_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:v.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:v.invoice_type}),l.jsx("td",{className:"text-right py-2 px-2",children:v.invoice_count}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(v.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(v.outstanding)})]},_))})]})})]})]})}function Yhe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{h()},[e,t,r,n,f]);async function h(){try{i(!0),a(null);const x={date_from:t,date_to:r,outlet_id:n};f&&(x.payment_method=f);const[v,_]=await Promise.all([II(e,x),CG(e,{date_from:t,date_to:r,outlet_id:n})]);c(v),d(_)}catch(x){a(x instanceof Error?x.message:"Failed to load report")}finally{i(!1)}}const y=Wr(o.reduce((x,v)=>x+v.total_amount,0)),g=o.reduce((x,v)=>x+v.payment_count,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Payments"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(y)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment Count"}),l.jsx("p",{className:"text-2xl font-bold",children:g})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(ot,{label:"Payment Method",value:f,onChange:x=>p(x.target.value),className:"max-w-xs",children:[l.jsx("option",{value:"",children:"All Methods"}),l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"upi",children:"UPI"}),l.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),l.jsx("option",{value:"card",children:"Card"}),l.jsx("option",{value:"cheque",children:"Cheque"})]}),l.jsxs(Ee,{onClick:()=>s(MG(o),"payments-report.csv"),disabled:o.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),u&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Payment Method Split"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Vhe,{children:[l.jsx(P7,{data:u.methodData,cx:"50%",cy:"50%",labelLine:!1,label:x=>`${x.name}: ${Ie(x.value)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:u.methodData.map((x,v)=>l.jsx(Zp,{fill:bC[v%bC.length]},`cell-${v}`))}),l.jsx(Zc,{formatter:x=>x!==void 0?Ie(x):"-"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Daily Collections"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(tm,{data:u.dailyData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:x=>x!==void 0?Ie(x):"-"}),l.jsx(tu,{dataKey:"value",fill:"#82ca9d",name:"Collections"})]})})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Payment Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No data found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Method"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Count"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Amount"})]})}),l.jsx("tbody",{children:o.map((x,v)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:x.report_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:x.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:x.payment_method.replace("_"," ")}),l.jsx("td",{className:"text-right py-2 px-2",children:x.payment_count}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600 font-semibold",children:Ie(x.total_amount)})]},v))})]})})]})]})}function Jhe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{h()},[e,t,r,n,f]);async function h(){try{i(!0),a(null);const g={date_from:t,date_to:r,outlet_id:n};f&&(g.aging_bucket=f);const[x,v]=await Promise.all([LI(e,g),OG(e,{date_from:t,date_to:r,outlet_id:n})]);c(x),d(v)}catch(g){a(g instanceof Error?g.message:"Failed to load report")}finally{i(!1)}}const y=Wr(o.reduce((g,x)=>g+x.balance_due,0));return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Ie(y)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"0-30 Days"}),l.jsx("p",{className:"text-xl font-bold",children:o.filter(g=>g.aging_bucket==="0-30").length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"31-60 Days"}),l.jsx("p",{className:"text-xl font-bold",children:o.filter(g=>g.aging_bucket==="31-60").length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"90+ Days"}),l.jsx("p",{className:"text-xl font-bold text-red-600",children:o.filter(g=>g.aging_bucket==="90+").length})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(ot,{label:"Aging Bucket",value:f,onChange:g=>p(g.target.value),className:"max-w-xs",children:[l.jsx("option",{value:"",children:"All Buckets"}),l.jsx("option",{value:"0-30",children:"0-30 Days"}),l.jsx("option",{value:"31-60",children:"31-60 Days"}),l.jsx("option",{value:"61-90",children:"61-90 Days"}),l.jsx("option",{value:"90+",children:"90+ Days"})]}),l.jsxs(Ee,{onClick:()=>s(FG(o),"outstanding-aging-report.csv"),disabled:o.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),u&&l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Aging Analysis"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(tm,{data:u.bucketData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:g=>g!==void 0?Ie(g):"-"}),l.jsx(tu,{dataKey:"value",fill:"#FF8042",name:"Outstanding"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outstanding Invoices"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No outstanding invoices"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice #"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Client"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Paid"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Balance"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Days"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Bucket"})]})}),l.jsx("tbody",{children:o.map(g=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm font-medium",children:g.invoice_number}),l.jsx("td",{className:"py-2 px-2 text-sm",children:g.invoice_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:g.client_name}),l.jsx("td",{className:"py-2 px-2 text-sm",children:g.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.grand_total)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(g.amount_paid)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-orange-600",children:Ie(g.balance_due)}),l.jsx("td",{className:"text-center py-2 px-2",children:g.days_outstanding}),l.jsx("td",{className:"text-center py-2 px-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${g.aging_bucket==="90+"?"bg-red-100 text-red-800":g.aging_bucket==="61-90"?"bg-orange-100 text-orange-800":g.aging_bucket==="31-60"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:g.aging_bucket})})]},g.invoice_id))})]})})]})]})}function Xhe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null);b.useEffect(()=>{f()},[e,t,r,n]);async function f(){try{i(!0),a(null);const y={date_from:t,date_to:r,outlet_id:n},[g,x]=await Promise.all([DI(e,y),TG(e,y)]);c(g),d(x)}catch(y){a(y instanceof Error?y.message:"Failed to load report")}finally{i(!1)}}const p=Wr(o.reduce((y,g)=>y+g.mrr,0)),h=Wr(o.reduce((y,g)=>y+g.annual_value,0));return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Subscriptions"}),l.jsx("p",{className:"text-2xl font-bold",children:o.length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Recurring Revenue (MRR)"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(p)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Annual Value"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(h)})]})]}),l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:()=>s($G(o),"subscriptions-report.csv"),disabled:o.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),u&&l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outlet-wise MRR"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(tm,{data:u.outletData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:y=>y!==void 0?Ie(y):"-"}),l.jsx(tu,{dataKey:"value",fill:"#8884d8",name:"MRR"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Subscription Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No active subscriptions"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Client"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Cycle"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Qty"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Price/Unit"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Cycle Amount"}),l.jsx("th",{className:"text-right py-2 px-2",children:"MRR"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Next Billing"})]})}),l.jsx("tbody",{children:o.map(y=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:y.client_name}),l.jsx("td",{className:"py-2 px-2 text-sm",children:y.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:y.billing_cycle}),l.jsx("td",{className:"text-right py-2 px-2",children:y.quantity}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(y.price_per_unit)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(y.cycle_amount)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-green-600",children:Ie(y.mrr)}),l.jsx("td",{className:"py-2 px-2 text-sm",children:y.next_billing_date})]},y.subscription_id))})]})})]})]})}function Zhe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null);b.useEffect(()=>{f()},[e,t,r,n]);async function f(){try{i(!0),a(null);const g={date_from:t,date_to:r,outlet_id:n},[x,v]=await Promise.all([RI(e,g),IG(e,g)]);c(x),d(v)}catch(g){a(g instanceof Error?g.message:"Failed to load report")}finally{i(!1)}}const p=o.reduce((g,x)=>g+x.total_invoiced,0),h=o.reduce((g,x)=>g+x.total_collected,0),y=o.reduce((g,x)=>g+x.invoice_count,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Invoices"}),l.jsx("p",{className:"text-2xl font-bold",children:y})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Revenue"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(p)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Collected"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(h)})]})]}),l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:()=>s(BG(o),"events-revenue-report.csv"),disabled:o.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),u&&l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Event Revenue by Outlet"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(tm,{data:u.outletData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:g=>g!==void 0?Ie(g):"-"}),l.jsx(tu,{dataKey:"value",fill:"#FFBB28",name:"Revenue"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Event Revenue Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No event revenue data"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Events"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Revenue"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"})]})}),l.jsx("tbody",{children:o.map((g,x)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:g.report_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:g.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:g.invoice_count}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(g.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(g.outstanding)})]},x))})]})})]})]})}function Qhe({userId:e,outletId:t,setLoading:r,setError:n,downloadCSV:i}){const[a,s]=b.useState([]);b.useEffect(()=>{o()},[e,t]);async function o(){try{r(!0),n(null);const u=await LG(e,{outlet_id:t});s(u)}catch(u){n(u instanceof Error?u.message:"Failed to load report")}finally{r(!1)}}const c=a.slice(0,10);return l.jsxs(l.Fragment,{children:[l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:()=>i(UG(a),"client-revenue-report.csv"),disabled:a.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Top 10 Clients by Revenue"}),c.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No client data"}):l.jsx("div",{className:"space-y-2",children:c.map((u,d)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-2xl font-bold text-muted-foreground",children:["#",d+1]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:u.client_name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.outlet_name,"  ",u.client_type]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-lg font-bold text-green-600",children:Ie(u.total_invoiced)}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.invoice_count," invoices"]})]})]},u.client_id))})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"All Clients"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No client data"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Client"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoices"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Subscription"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Event"})]})}),l.jsx("tbody",{children:a.map(u=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm font-medium",children:u.client_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:u.client_type}),l.jsx("td",{className:"py-2 px-2 text-sm",children:u.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:u.invoice_count}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(u.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(u.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(u.outstanding)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(u.subscription_revenue)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(u.event_revenue)})]},u.client_id))})]})})]})]})}function epe({userId:e,outletId:t,setLoading:r,setError:n,downloadCSV:i}){const[a,s]=b.useState([]);b.useEffect(()=>{o()},[e,t]);async function o(){try{r(!0),n(null);const c=await DG(e,{outlet_id:t});s(c)}catch(c){n(c instanceof Error?c.message:"Failed to load report")}finally{r(!1)}}return l.jsxs(l.Fragment,{children:[l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:()=>i(qG(a),"outlet-performance-report.csv"),disabled:a.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outlet Performance Comparison"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No outlet data"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Clients"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoices"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoiced"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collection %"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Subs"}),l.jsx("th",{className:"text-right py-2 px-2",children:"MRR"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Events"})]})}),l.jsx("tbody",{children:a.map(c=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 font-medium",children:l.jsxs("div",{children:[l.jsx("p",{children:c.outlet_name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.outlet_code,"  ",c.city]})]})}),l.jsx("td",{className:"text-right py-2 px-2",children:c.active_clients}),l.jsx("td",{className:"text-right py-2 px-2",children:c.total_invoices}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(c.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(c.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(c.outstanding)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[c.collection_rate_percent,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:c.active_subscriptions}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-green-600",children:Ie(c.mrr)}),l.jsx("td",{className:"text-right py-2 px-2",children:c.completed_events})]},c.outlet_id))})]})})]})]})}async function ES(e){const{data:t}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}function PS(e,t,r){if(t.role==="manager"&&t.outletIds)if(t.outletIds.length>0)e=e.in("outlet_id",t.outletIds);else return null;return r.outlet_id&&["admin","accountant"].includes(t.role)&&(e=e.eq("outlet_id",r.outlet_id)),e}async function hM(e,t){const r=await ES(e);let n=ve.from("gst_working_domestic").select("*").order("invoice_date",{ascending:!1});if(n=PS(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function tpe(e,t){const r=await hM(e,t);return r.length===0?null:{outlet_id:t.outlet_id||"all",total_taxable_value:r.reduce((n,i)=>n+i.taxable_value,0),total_igst:r.reduce((n,i)=>n+i.igst,0),total_cgst:r.reduce((n,i)=>n+i.cgst,0),total_sgst:r.reduce((n,i)=>n+i.sgst,0),grand_total:r.reduce((n,i)=>n+i.total,0)}}async function pM(e,t){const r=await ES(e);let n=ve.from("gst_working_sez").select("*").order("invoice_date",{ascending:!1});if(n=PS(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function rpe(e,t){const r=await pM(e,t);return r.length===0?null:{outlet_id:t.outlet_id||"all",total_taxable_value:r.reduce((n,i)=>n+i.taxable_value,0),total_igst:r.reduce((n,i)=>n+i.igst,0),total_cgst:r.reduce((n,i)=>n+i.cgst,0),total_sgst:r.reduce((n,i)=>n+i.sgst,0),grand_total:r.reduce((n,i)=>n+i.total,0)}}async function mM(e,t){const r=await ES(e);let n=ve.from("gst_working_export").select("*").order("invoice_date",{ascending:!1});if(n=PS(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function npe(e,t){const r=await mM(e,t);return r.length===0?null:{outlet_id:t.outlet_id||"all",total_taxable_value:r.reduce((n,i)=>n+i.taxable_value,0),total_igst:r.reduce((n,i)=>n+i.igst,0),total_cgst:r.reduce((n,i)=>n+i.cgst,0),total_sgst:r.reduce((n,i)=>n+i.sgst,0),grand_total:r.reduce((n,i)=>n+i.total,0)}}function ipe(e,t){const r=["Invoice Date","Invoice Number","Party Name","GST NUMBER","HSN/SAC CODE","As per your Invoice","Taxable Value","RATE","IGST","CGST","SGST","TOTAL"],n=e.map(i=>[i.invoice_date,i.invoice_number,`"${i.party_name.replace(/"/g,'""')}"`,i.gst_number,i.hsn_sac_code,i.as_per_your_invoice.toFixed(2),i.taxable_value.toFixed(2),`${i.rate}%`,i.igst.toFixed(2),i.cgst.toFixed(2),i.sgst.toFixed(2),i.total.toFixed(2)]);return t&&n.push(["","","Total","","","",t.total_taxable_value.toFixed(2),"",t.total_igst.toFixed(2),t.total_cgst.toFixed(2),t.total_sgst.toFixed(2),t.grand_total.toFixed(2)]),[r.join(","),...n.map(i=>i.join(","))].join(`
`)}function ape(e,t){const r=["Invoice Date","Invoice Number","Party Name","GST NUMBER","HSN CODE","As per your Invoice","Taxable Value","RATE","IGST","CGST","SGST","TOTAL"],n=e.map(i=>[i.invoice_date,i.invoice_number,`"${i.party_name.replace(/"/g,'""')}"`,i.gst_number,i.hsn_sac_code,i.as_per_your_invoice.toFixed(2),i.taxable_value.toFixed(2),`${i.rate}%`,i.igst.toFixed(2),i.cgst.toFixed(2),i.sgst.toFixed(2),i.total.toFixed(2)]);return t&&n.push(["","","Total","","","",t.total_taxable_value.toFixed(2),"",t.total_igst.toFixed(2),t.total_cgst.toFixed(2),t.total_sgst.toFixed(2),t.grand_total.toFixed(2)]),[r.join(","),...n.map(i=>i.join(","))].join(`
`)}function spe(e,t){const r=["Invoice Date","Invoice Number","Party Name","GST NUMBER","HSN CODE","As per your Invoice","Taxable Value","RATE","IGST","CGST","SGST","TOTAL","Currency"],n=e.map(i=>[i.invoice_date,i.invoice_number,`"${i.party_name.replace(/"/g,'""')}"`,i.gst_number,i.hsn_sac_code,i.as_per_your_invoice.toFixed(2),i.taxable_value.toFixed(2),`${i.rate}%`,i.igst.toFixed(2),i.cgst.toFixed(2),i.sgst.toFixed(2),i.total.toFixed(2),i.currency]);return t&&n.push(["","","Total","","","",t.total_taxable_value.toFixed(2),"",t.total_igst.toFixed(2),t.total_cgst.toFixed(2),t.total_sgst.toFixed(2),t.grand_total.toFixed(2),""]),[r.join(","),...n.map(i=>i.join(","))].join(`
`)}function ope(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState("domestic"),[i,a]=b.useState(!1),[s,o]=b.useState(null),[c,u]=b.useState(""),[d,f]=b.useState(""),[p,h]=b.useState(""),y=t||[],g=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="accountant",x=[{id:"domestic",label:"Domestic"},{id:"sez",label:"SEZ"},{id:"export",label:"Export"}];function v(_,S){const j=new Blob([_],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),A=URL.createObjectURL(j);N.setAttribute("href",A),N.setAttribute("download",S),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)}return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Lz,{className:"w-8 h-8 text-brand-primary"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-brand-text",children:"GST Working Reports"}),l.jsx("p",{className:"text-sm text-brand-text/60",children:"Download GST reports matching accountant's Excel format"})]})]}),s&&l.jsx(ft,{variant:"error",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:s}),l.jsx("button",{onClick:()=>o(null),className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"Dismiss"})]})}),l.jsx("div",{className:"border-b border-brand-border",children:l.jsx("nav",{className:"flex gap-2",children:x.map(_=>l.jsx("button",{onClick:()=>n(_.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${r===_.id?"border-brand-primary text-brand-primary":"border-transparent text-brand-text/60 hover:text-brand-text"}`,children:_.label},_.id))})}),l.jsx(we,{className:"p-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(ze,{type:"date",label:"From Date",value:c,onChange:_=>u(_.target.value)}),l.jsx(ze,{type:"date",label:"To Date",value:d,onChange:_=>f(_.target.value)}),g&&l.jsxs(ot,{label:"Outlet",value:p,onChange:_=>h(_.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),y.map(_=>l.jsx("option",{value:_.id,children:_.name},_.id))]})]})}),r==="domestic"&&l.jsx(lpe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="sez"&&l.jsx(cpe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v}),r==="export"&&l.jsx(upe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:v})]})}function lpe({userId:e,dateFrom:t,dateTo:r,outletId:n,loading:i,setLoading:a,setError:s,downloadCSV:o}){const[c,u]=b.useState([]),[d,f]=b.useState(null),p={date_from:t||void 0,date_to:r||void 0,outlet_id:n||void 0};b.useEffect(()=>{h()},[t,r,n]);async function h(){if(e){a(!0),s(null);try{const[g,x]=await Promise.all([hM(e,p),tpe(e,p)]);u(g),f(x)}catch(g){s(g.message||"Failed to load domestic GST report")}finally{a(!1)}}}function y(){const g=ipe(c,d),x=new Date().toISOString().split("T")[0];o(g,`gst_working_domestic_${x}.csv`)}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:y,disabled:i||c.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Download CSV"]})}),l.jsxs(we,{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Domestic GST Working"}),i?l.jsx("p",{className:"text-center py-8",children:"Loading..."}):c.length===0?l.jsx("p",{className:"text-center text-brand-text/60 py-8",children:'No domestic GST data found. Ensure clients have GST Type set to "Domestic".'}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b bg-brand-surface",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Number"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Party Name"}),l.jsx("th",{className:"text-left py-2 px-2",children:"GST NUMBER"}),l.jsx("th",{className:"text-left py-2 px-2",children:"HSN/SAC CODE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"As per your Invoice"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Taxable Value"}),l.jsx("th",{className:"text-right py-2 px-2",children:"RATE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"IGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"CGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"SGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"TOTAL"})]})}),l.jsxs("tbody",{children:[c.map(g=>l.jsxs("tr",{className:"border-b hover:bg-brand-surface/50",children:[l.jsx("td",{className:"py-2 px-2",children:g.invoice_date}),l.jsx("td",{className:"py-2 px-2 font-medium",children:g.invoice_number}),l.jsx("td",{className:"py-2 px-2",children:g.party_name}),l.jsx("td",{className:"py-2 px-2",children:g.gst_number||"-"}),l.jsx("td",{className:"py-2 px-2",children:g.hsn_sac_code||"-"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.as_per_your_invoice)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.taxable_value)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[g.rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.sgst)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(g.total)})]},g.invoice_id)),d&&l.jsxs("tr",{className:"bg-brand-primary/10 font-semibold",children:[l.jsx("td",{colSpan:6,className:"py-2 px-2 text-right",children:"Total"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_taxable_value)}),l.jsx("td",{className:"py-2 px-2"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_sgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.grand_total)})]})]})]})})]})]})}function cpe({userId:e,dateFrom:t,dateTo:r,outletId:n,loading:i,setLoading:a,setError:s,downloadCSV:o}){const[c,u]=b.useState([]),[d,f]=b.useState(null),p={date_from:t||void 0,date_to:r||void 0,outlet_id:n||void 0};b.useEffect(()=>{h()},[t,r,n]);async function h(){if(e){a(!0),s(null);try{const[g,x]=await Promise.all([pM(e,p),rpe(e,p)]);u(g),f(x)}catch(g){s(g.message||"Failed to load SEZ GST report")}finally{a(!1)}}}function y(){const g=ape(c,d),x=new Date().toISOString().split("T")[0];o(g,`gst_working_sez_${x}.csv`)}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:y,disabled:i||c.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Download CSV"]})}),l.jsxs(we,{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SEZ GST Working"}),i?l.jsx("p",{className:"text-center py-8",children:"Loading..."}):c.length===0?l.jsx("p",{className:"text-center text-brand-text/60 py-8",children:'No SEZ GST data found. Ensure clients have GST Type set to "SEZ".'}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b bg-brand-surface",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Number"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Party Name"}),l.jsx("th",{className:"text-left py-2 px-2",children:"GST NUMBER"}),l.jsx("th",{className:"text-left py-2 px-2",children:"HSN CODE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"As per your Invoice"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Taxable Value"}),l.jsx("th",{className:"text-right py-2 px-2",children:"RATE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"IGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"CGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"SGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"TOTAL"})]})}),l.jsxs("tbody",{children:[c.map(g=>l.jsxs("tr",{className:"border-b hover:bg-brand-surface/50",children:[l.jsx("td",{className:"py-2 px-2",children:g.invoice_date}),l.jsx("td",{className:"py-2 px-2 font-medium",children:g.invoice_number}),l.jsx("td",{className:"py-2 px-2",children:g.party_name}),l.jsx("td",{className:"py-2 px-2",children:g.gst_number||"-"}),l.jsx("td",{className:"py-2 px-2",children:g.hsn_sac_code||"-"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.as_per_your_invoice)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.taxable_value)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[g.rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.sgst)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(g.total)})]},g.invoice_id)),d&&l.jsxs("tr",{className:"bg-brand-primary/10 font-semibold",children:[l.jsx("td",{colSpan:6,className:"py-2 px-2 text-right",children:"Total"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_taxable_value)}),l.jsx("td",{className:"py-2 px-2"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_sgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.grand_total)})]})]})]})})]})]})}function upe({userId:e,dateFrom:t,dateTo:r,outletId:n,loading:i,setLoading:a,setError:s,downloadCSV:o}){const[c,u]=b.useState([]),[d,f]=b.useState(null),p={date_from:t||void 0,date_to:r||void 0,outlet_id:n||void 0};b.useEffect(()=>{h()},[t,r,n]);async function h(){if(e){a(!0),s(null);try{const[g,x]=await Promise.all([mM(e,p),npe(e,p)]);u(g),f(x)}catch(g){s(g.message||"Failed to load export GST report")}finally{a(!1)}}}function y(){const g=spe(c,d),x=new Date().toISOString().split("T")[0];o(g,`gst_working_export_${x}.csv`)}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ee,{onClick:y,disabled:i||c.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Download CSV"]})}),l.jsxs(we,{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export GST Working"}),i?l.jsx("p",{className:"text-center py-8",children:"Loading..."}):c.length===0?l.jsx("p",{className:"text-center text-brand-text/60 py-8",children:'No export GST data found. Ensure clients have GST Type set to "Export".'}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b bg-brand-surface",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Number"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Party Name"}),l.jsx("th",{className:"text-left py-2 px-2",children:"GST NUMBER"}),l.jsx("th",{className:"text-left py-2 px-2",children:"HSN CODE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"As per your Invoice"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Taxable Value"}),l.jsx("th",{className:"text-right py-2 px-2",children:"RATE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"IGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"CGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"SGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"TOTAL"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Currency"})]})}),l.jsxs("tbody",{children:[c.map(g=>l.jsxs("tr",{className:"border-b hover:bg-brand-surface/50",children:[l.jsx("td",{className:"py-2 px-2",children:g.invoice_date}),l.jsx("td",{className:"py-2 px-2 font-medium",children:g.invoice_number}),l.jsx("td",{className:"py-2 px-2",children:g.party_name}),l.jsx("td",{className:"py-2 px-2",children:g.gst_number||"-"}),l.jsx("td",{className:"py-2 px-2",children:g.hsn_sac_code||"-"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.as_per_your_invoice)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.taxable_value)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[g.rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.sgst)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(g.total)}),l.jsx("td",{className:"py-2 px-2",children:g.currency})]},g.invoice_id)),d&&l.jsxs("tr",{className:"bg-brand-primary/10 font-semibold",children:[l.jsx("td",{colSpan:6,className:"py-2 px-2 text-right",children:"Total"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_taxable_value)}),l.jsx("td",{className:"py-2 px-2"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_sgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.grand_total)}),l.jsx("td",{className:"py-2 px-2"})]})]})]})})]})]})}function dpe({items:e}){const t=e.length,r=e.reduce((o,c)=>o+c.total_quantity,0),n=e.reduce((o,c)=>o+c.available_quantity,0),i=e.reduce((o,c)=>o+c.allocated_quantity,0),a=e.reduce((o,c)=>o+c.damaged_quantity,0),s=e.reduce((o,c)=>o+c.lost_quantity,0);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),l.jsx("p",{className:"text-2xl font-bold",children:t})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity"}),l.jsx("p",{className:"text-2xl font-bold",children:r})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Available"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:n})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:i})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Damaged"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Lost"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:s})]})]})}function fpe({showOutletFilter:e,outlets:t,outletId:r,category:n,isActive:i,categories:a,onOutletChange:s,onCategoryChange:o,onIsActiveChange:c}){return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e&&l.jsxs(ot,{label:"Outlet",value:r,onChange:u=>s(u.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),t.map(u=>l.jsx("option",{value:u.id,children:u.name},u.id))]}),l.jsxs(ot,{label:"Category",value:n,onChange:u=>o(u.target.value),children:[l.jsx("option",{value:"",children:"All Categories"}),a.map(u=>l.jsx("option",{value:u,children:u},u))]}),l.jsxs(ot,{label:"Status",value:i,onChange:u=>c(u.target.value),children:[l.jsx("option",{value:"true",children:"Active"}),l.jsx("option",{value:"false",children:"Inactive"}),l.jsx("option",{value:"",children:"All"})]}),(r||n||i!=="true")&&l.jsx("div",{className:"flex items-end",children:l.jsx("button",{onClick:()=>{s(""),o(""),c("true")},className:"text-sm text-primary hover:underline",children:"Clear Filters"})})]})}function CS({isOpen:e,onClose:t,title:r,children:n,maxWidth:i="lg"}){if(!e)return null;const a={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"};return l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),l.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:l.jsxs("div",{className:`relative w-full ${a[i]} bg-white rounded-lg shadow-xl`,onClick:s=>s.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-brand-text",children:r}),l.jsx("button",{onClick:t,className:"text-brand-text/60 hover:text-brand-text transition-colors",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6",children:n})]})})]})}function hpe({isOpen:e,onClose:t,onSuccess:r,userId:n,userRole:i,outlets:a,defaultOutletId:s,editItem:o}){var T;const c=!!o,u=i==="manager",[d,f]=b.useState(""),[p,h]=b.useState(""),[y,g]=b.useState(""),[x,v]=b.useState(""),[_,S]=b.useState("pcs"),[j,N]=b.useState(""),[A,I]=b.useState(!1),[E,C]=b.useState(null);b.useEffect(()=>{e&&(c&&o?(f(o.outlet_id),h(o.name),g(o.category),v(o.material||""),S(o.unit),N("")):(f(s||""),h(""),g(""),v(""),S("pcs"),N("0")),C(null))},[e,c,o,s]);async function D(O){if(O.preventDefault(),C(null),!d){C("Outlet is required");return}if(!p.trim()){C("Item name is required");return}if(!y.trim()){C("Category is required");return}if(!c){const q=parseInt(j);if(isNaN(q)||q<0){C("Initial stock must be a non-negative number");return}}try{I(!0),c&&o?await SW(n,o.id,{name:p.trim(),category:y.trim(),material:x.trim()||void 0,unit:_||"pcs"}):await jW(n,{outlet_id:d,name:p.trim(),category:y.trim(),material:x.trim()||void 0,unit:_||"pcs",initial_stock:parseInt(j)}),r(),t()}catch(q){C(q instanceof Error?q.message:"Failed to save item")}finally{I(!1)}}return l.jsx(CS,{isOpen:e,onClose:t,title:c?"Edit Inventory Item":"Add Inventory Item",children:l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[E&&l.jsx(ft,{variant:"error",children:E}),u?l.jsx(ze,{label:"Outlet",value:((T=a.find(O=>O.id===d))==null?void 0:T.name)||"Your Outlet",disabled:!0}):l.jsxs(ot,{label:"Outlet",value:d,onChange:O=>f(O.target.value),required:!0,disabled:c,children:[l.jsx("option",{value:"",children:"Select Outlet"}),a.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))]}),l.jsx(ze,{label:"Item Name",value:p,onChange:O=>h(O.target.value),placeholder:"e.g., Plate 10-inch",required:!0}),l.jsx(ze,{label:"Category",value:y,onChange:O=>g(O.target.value),placeholder:"e.g., Plate, Glass, Bowl",required:!0}),l.jsx(ze,{label:"Material",value:x,onChange:O=>v(O.target.value),placeholder:"e.g., Steel, Ceramic, Melamine (optional)"}),l.jsx(ze,{label:"Unit",value:_,onChange:O=>S(O.target.value),placeholder:"e.g., pcs, dozen"}),!c&&l.jsxs(l.Fragment,{children:[l.jsx(ze,{type:"number",label:"Initial Stock",value:j,onChange:O=>N(O.target.value),min:"0",required:!0}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Initial stock will create a stock_in movement."})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:t,disabled:A,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:A,children:A?"Saving...":c?"Update Item":"Add Item"})]})]})})}function ppe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState([]),[s,o]=b.useState(!0),[c,u]=b.useState(null),[d,f]=b.useState(""),[p,h]=b.useState(""),[y,g]=b.useState("true"),[x,v]=b.useState(!1),[_,S]=b.useState(null),[j,N]=b.useState(null),[A,I]=b.useState(!1),[E,C]=b.useState(null),D=(e==null?void 0:e.role)||"",T=D==="accountant",O=D==="manager",q=D==="admin"||D==="accountant",K=t||[];b.useEffect(()=>{ne()},[e==null?void 0:e.id,d,p,y]),b.useEffect(()=>{re()},[e==null?void 0:e.id]);async function ne(){if(e!=null&&e.id)try{o(!0),u(null);const W={};d&&(W.outlet_id=d),p&&(W.category=p),y!==""&&(W.is_active=y==="true");const B=await lu(e.id,W);n(B)}catch(W){u(W instanceof Error?W.message:"Failed to load inventory items")}finally{o(!1)}}async function re(){if(e!=null&&e.id)try{const W=await kW(e.id);a(W)}catch(W){console.error("Failed to load categories:",W)}}async function te(W){if(e!=null&&e.id)try{I(!0),C(null),await NW(e.id,W.id),N(null),await ne()}catch(B){C(B instanceof Error?B.message:"Failed to deactivate item")}finally{I(!1)}}return s&&r.length===0?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(Dd,{className:"w-8 h-8"}),"Inventory Management"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Dishware inventory tracking and allocation"})]}),!T&&l.jsxs(Ee,{onClick:()=>v(!0),children:[l.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),c&&l.jsx(ft,{variant:"error",children:c}),l.jsx(dpe,{items:r}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Filters"}),l.jsx(fpe,{userRole:D,showOutletFilter:q,outlets:K,outletId:d,category:p,isActive:y,categories:i,onOutletChange:f,onCategoryChange:h,onIsActiveChange:g})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Inventory Items"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," items"]})]}),r.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Dd,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No inventory items found"}),!T&&l.jsxs(Ee,{onClick:()=>v(!0),className:"mt-4",children:[l.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Add First Item"]})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Item Name"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Category"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Material"}),q&&l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Total"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Available"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Allocated"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Damaged"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Lost"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:r.map(W=>l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:W.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Unit: ",W.unit]})]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsx(Yt,{variant:"default",children:W.category})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:W.material||"-"}),q&&l.jsx("td",{className:"py-3 px-4 text-sm",children:W.outlet_name||"-"}),l.jsx("td",{className:"text-right py-3 px-4 font-semibold",children:W.total_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-green-600 font-semibold",children:W.available_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-brand-primary",children:W.allocated_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-orange-600",children:W.damaged_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-red-600",children:W.lost_quantity}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx(pr,{to:`/inventory/movements?item=${W.id}`,children:l.jsx(Ee,{variant:"ghost",size:"sm",title:"View Movement History",children:l.jsx(Tv,{className:"w-4 h-4"})})}),!T&&l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>S(W),title:"Edit Item",children:l.jsx(a0,{className:"w-4 h-4"})}),!T&&W.is_active&&l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>N(W),title:"Deactivate Item",children:l.jsx(c5,{className:"w-4 h-4 text-red-600"})}),!W.is_active&&l.jsx(Yt,{variant:"secondary",children:"Inactive"})]})})]},W.id))})]})})]}),(x||_)&&l.jsx(hpe,{isOpen:x||!!_,onClose:()=>{v(!1),S(null)},onSuccess:()=>{ne(),re()},userId:(e==null?void 0:e.id)||"",userRole:D,outlets:K,defaultOutletId:O&&K.length>0?K[0].id:void 0,editItem:_}),j&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Deactivate Inventory Item"}),E&&l.jsx(ft,{variant:"error",className:"mb-4",children:E}),l.jsxs("p",{className:"text-muted-foreground mb-4",children:["Are you sure you want to deactivate ",l.jsx("strong",{children:j.name}),"?"]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Note: Items with movement history cannot be deactivated. If this item has been used in allocations, the system will prevent deactivation."}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ee,{variant:"outline",onClick:()=>{N(null),C(null)},disabled:A,children:"Cancel"}),l.jsx(Ee,{variant:"destructive",onClick:()=>te(j),disabled:A,children:A?"Deactivating...":"Deactivate"})]})]})})]})}var gM={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(fF,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,a=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,o={},c=0,u={};function d(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var D=N(C);D.chunkSize=parseInt(D.chunkSize),C.step||C.chunk||(D.chunkSize=null),this._handle=new g(D),(this._handle.streamer=this)._config=D}).call(this,E),this.parseChunk=function(C,D){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let q=this._config.newline;q||(O=this._config.quoteChar||'"',q=this._handle.guessLineEndings(C,O)),C=[...C.split(q).slice(T)].join(q)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(C))!==void 0&&(C=O),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+C,O=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=O.meta.cursor,T=(this._finished||(this._partialLine=T.substring(C-this._baseIndex),this._baseIndex=C),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)n.postMessage({results:O,workerId:u.WORKER_ID,finished:T});else if(I(this._config.chunk)&&!D){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!T||!I(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(C){I(this._config.error)?this._config.error(C):s&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:C,finished:!1})}}function f(E){var C;(E=E||{}).chunkSize||(E.chunkSize=u.RemoteChunkSize),d.call(this,E),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),a||(C.onload=A(this._chunkLoaded,this),C.onerror=A(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var D,T=this._config.downloadRequestHeaders;for(D in T)C.setRequestHeader(D,T[D])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+O));try{C.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}a&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(D=>(D=D.getResponseHeader("Content-Range"))!==null?parseInt(D.substring(D.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(D){D=C.statusText||D,this._sendError(new Error(D))}}function p(E){(E=E||{}).chunkSize||(E.chunkSize=u.LocalChunkSize),d.call(this,E);var C,D,T=typeof FileReader<"u";this.stream=function(O){this._input=O,D=O.slice||O.webkitSlice||O.mozSlice,T?((C=new FileReader).onload=A(this._chunkLoaded,this),C.onerror=A(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),O=D.call(O,this._start,q)),C.readAsText(O,this._config.encoding));T||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(C.error)}}function h(E){var C;d.call(this,E=E||{}),this.stream=function(D){return C=D,this._nextChunk()},this._nextChunk=function(){var D,T;if(!this._finished)return D=this._config.chunkSize,C=D?(T=C.substring(0,D),C.substring(D)):(T=C,""),this._finished=!C,this.parseChunk(T)}}function y(E){d.call(this,E=E||{});var C=[],D=!0,T=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):D=!0},this._streamData=A(function(O){try{C.push(typeof O=="string"?O:O.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(q){this._streamError(q)}},this),this._streamError=A(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=A(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(E){var C,D,T,O,q=Math.pow(2,53),K=-q,ne=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,te=this,W=0,B=0,le=!1,G=!1,R=[],z={data:[],errors:[],meta:{}};function J(pe){return E.skipEmptyLines==="greedy"?pe.join("").trim()==="":pe.length===1&&pe[0].length===0}function ie(){if(z&&T&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),T=!1),E.skipEmptyLines&&(z.data=z.data.filter(function(oe){return!J(oe)})),ae()){let oe=function(de,Ce){I(E.transformHeader)&&(de=E.transformHeader(de,Ce)),R.push(de)};if(z)if(Array.isArray(z.data[0])){for(var pe=0;ae()&&pe<z.data.length;pe++)z.data[pe].forEach(oe);z.data.splice(0,1)}else z.data.forEach(oe)}function ee(oe,de){for(var Ce=E.header?{}:[],Pe=0;Pe<oe.length;Pe++){var V=Pe,je=oe[Pe],je=((Je,De)=>(Se=>(E.dynamicTypingFunction&&E.dynamicTyping[Se]===void 0&&(E.dynamicTyping[Se]=E.dynamicTypingFunction(Se)),(E.dynamicTyping[Se]||E.dynamicTyping)===!0))(Je)?De==="true"||De==="TRUE"||De!=="false"&&De!=="FALSE"&&((Se=>{if(ne.test(Se)&&(Se=parseFloat(Se),K<Se&&Se<q))return 1})(De)?parseFloat(De):re.test(De)?new Date(De):De===""?null:De):De)(V=E.header?Pe>=R.length?"__parsed_extra":R[Pe]:V,je=E.transform?E.transform(je,V):je);V==="__parsed_extra"?(Ce[V]=Ce[V]||[],Ce[V].push(je)):Ce[V]=je}return E.header&&(Pe>R.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+Pe,B+de):Pe<R.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+Pe,B+de)),Ce}var he;z&&(E.header||E.dynamicTyping||E.transform)&&(he=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(ee),he=z.data.length):z.data=ee(z.data,0),E.header&&z.meta&&(z.meta.fields=R),B+=he)}function ae(){return E.header&&R.length===0}function ue(pe,ee,he,oe){pe={type:pe,code:ee,message:he},oe!==void 0&&(pe.row=oe),z.errors.push(pe)}I(E.step)&&(O=E.step,E.step=function(pe){z=pe,ae()?ie():(ie(),z.data.length!==0&&(W+=pe.data.length,E.preview&&W>E.preview?D.abort():(z.data=z.data[0],O(z,te))))}),this.parse=function(pe,ee,he){var oe=E.quoteChar||'"',oe=(E.newline||(E.newline=this.guessLineEndings(pe,oe)),T=!1,E.delimiter?I(E.delimiter)&&(E.delimiter=E.delimiter(pe),z.meta.delimiter=E.delimiter):((oe=((de,Ce,Pe,V,je)=>{var Je,De,Se,et;je=je||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Fe=0;Fe<je.length;Fe++){for(var Ke,tt=je[Fe],mt=0,gt=0,Xe=0,lt=(Se=void 0,new v({comments:V,delimiter:tt,newline:Ce,preview:10}).parse(de)),yt=0;yt<lt.data.length;yt++)Pe&&J(lt.data[yt])?Xe++:(Ke=lt.data[yt].length,gt+=Ke,Se===void 0?Se=Ke:0<Ke&&(mt+=Math.abs(Ke-Se),Se=Ke));0<lt.data.length&&(gt/=lt.data.length-Xe),(De===void 0||mt<=De)&&(et===void 0||et<gt)&&1.99<gt&&(De=mt,Je=tt,et=gt)}return{successful:!!(E.delimiter=Je),bestDelimiter:Je}})(pe,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess)).successful?E.delimiter=oe.bestDelimiter:(T=!0,E.delimiter=u.DefaultDelimiter),z.meta.delimiter=E.delimiter),N(E));return E.preview&&E.header&&oe.preview++,C=pe,D=new v(oe),z=D.parse(C,ee,he),ie(),le?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return le},this.pause=function(){le=!0,D.abort(),C=I(E.chunk)?"":C.substring(D.getCharIndex())},this.resume=function(){te.streamer._halted?(le=!1,te.streamer.parseChunk(C,!0)):setTimeout(te.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,D.abort(),z.meta.aborted=!0,I(E.complete)&&E.complete(z),C=""},this.guessLineEndings=function(de,oe){de=de.substring(0,1048576);var oe=new RegExp(x(oe)+"([^]*?)"+x(oe),"gm"),he=(de=de.replace(oe,"")).split("\r"),oe=de.split(`
`),de=1<oe.length&&oe[0].length<he[0].length;if(he.length===1||de)return`
`;for(var Ce=0,Pe=0;Pe<he.length;Pe++)he[Pe][0]===`
`&&Ce++;return Ce>=he.length/2?`\r
`:"\r"}}function x(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(E){var C=(E=E||{}).delimiter,D=E.newline,T=E.comments,O=E.step,q=E.preview,K=E.fastMode,ne=null,re=!1,te=E.quoteChar==null?'"':E.quoteChar,W=te;if(E.escapeChar!==void 0&&(W=E.escapeChar),(typeof C!="string"||-1<u.BAD_DELIMITERS.indexOf(C))&&(C=","),T===C)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<u.BAD_DELIMITERS.indexOf(T))&&(T=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var B=0,le=!1;this.parse=function(G,R,z){if(typeof G!="string")throw new Error("Input must be a string");var J=G.length,ie=C.length,ae=D.length,ue=T.length,pe=I(O),ee=[],he=[],oe=[],de=B=0;if(!G)return mt();if(K||K!==!1&&G.indexOf(te)===-1){for(var Ce=G.split(D),Pe=0;Pe<Ce.length;Pe++){if(oe=Ce[Pe],B+=oe.length,Pe!==Ce.length-1)B+=D.length;else if(z)return mt();if(!T||oe.substring(0,ue)!==T){if(pe){if(ee=[],et(oe.split(C)),gt(),le)return mt()}else et(oe.split(C));if(q&&q<=Pe)return ee=ee.slice(0,q),mt(!0)}}return mt()}for(var V=G.indexOf(C,B),je=G.indexOf(D,B),Je=new RegExp(x(W)+x(te),"g"),De=G.indexOf(te,B);;)if(G[B]===te)for(De=B,B++;;){if((De=G.indexOf(te,De+1))===-1)return z||he.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ee.length,index:B}),Ke();if(De===J-1)return Ke(G.substring(B,De).replace(Je,te));if(te===W&&G[De+1]===W)De++;else if(te===W||De===0||G[De-1]!==W){V!==-1&&V<De+1&&(V=G.indexOf(C,De+1));var Se=Fe((je=je!==-1&&je<De+1?G.indexOf(D,De+1):je)===-1?V:Math.min(V,je));if(G.substr(De+1+Se,ie)===C){oe.push(G.substring(B,De).replace(Je,te)),G[B=De+1+Se+ie]!==te&&(De=G.indexOf(te,B)),V=G.indexOf(C,B),je=G.indexOf(D,B);break}if(Se=Fe(je),G.substring(De+1+Se,De+1+Se+ae)===D){if(oe.push(G.substring(B,De).replace(Je,te)),tt(De+1+Se+ae),V=G.indexOf(C,B),De=G.indexOf(te,B),pe&&(gt(),le))return mt();if(q&&ee.length>=q)return mt(!0);break}he.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ee.length,index:B}),De++}}else if(T&&oe.length===0&&G.substring(B,B+ue)===T){if(je===-1)return mt();B=je+ae,je=G.indexOf(D,B),V=G.indexOf(C,B)}else if(V!==-1&&(V<je||je===-1))oe.push(G.substring(B,V)),B=V+ie,V=G.indexOf(C,B);else{if(je===-1)break;if(oe.push(G.substring(B,je)),tt(je+ae),pe&&(gt(),le))return mt();if(q&&ee.length>=q)return mt(!0)}return Ke();function et(Xe){ee.push(Xe),de=B}function Fe(Xe){var lt=0;return lt=Xe!==-1&&(Xe=G.substring(De+1,Xe))&&Xe.trim()===""?Xe.length:lt}function Ke(Xe){return z||(Xe===void 0&&(Xe=G.substring(B)),oe.push(Xe),B=J,et(oe),pe&&gt()),mt()}function tt(Xe){B=Xe,et(oe),oe=[],je=G.indexOf(D,B)}function mt(Xe){if(E.header&&!R&&ee.length&&!re){var lt=ee[0],yt=Object.create(null),Ge=new Set(lt);let bt=!1;for(let We=0;We<lt.length;We++){let qt=lt[We];if(yt[qt=I(E.transformHeader)?E.transformHeader(qt,We):qt]){let Ct,Nt=yt[qt];for(;Ct=qt+"_"+Nt,Nt++,Ge.has(Ct););Ge.add(Ct),lt[We]=Ct,yt[qt]++,bt=!0,(ne=ne===null?{}:ne)[Ct]=qt}else yt[qt]=1,lt[We]=qt;Ge.add(qt)}bt&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:ee,errors:he,meta:{delimiter:C,linebreak:D,aborted:le,truncated:!!Xe,cursor:de+(R||0),renamedHeaders:ne}}}function gt(){O(mt()),ee=[],he=[]}},this.abort=function(){le=!0},this.getCharIndex=function(){return B}}function _(E){var C=E.data,D=o[C.workerId],T=!1;if(C.error)D.userError(C.error,C.file);else if(C.results&&C.results.data){var O={abort:function(){T=!0,S(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(I(D.userStep)){for(var q=0;q<C.results.data.length&&(D.userStep({data:C.results.data[q],errors:C.results.errors,meta:C.results.meta},O),!T);q++);delete C.results}else I(D.userChunk)&&(D.userChunk(C.results,O,C.file),delete C.results)}C.finished&&!T&&S(C.workerId,C.results)}function S(E,C){var D=o[E];I(D.userComplete)&&D.userComplete(C),D.terminate(),delete o[E]}function j(){throw new Error("Not implemented.")}function N(E){if(typeof E!="object"||E===null)return E;var C,D=Array.isArray(E)?[]:{};for(C in E)D[C]=N(E[C]);return D}function A(E,C){return function(){E.apply(C,arguments)}}function I(E){return typeof E=="function"}return u.parse=function(E,C){var D=(C=C||{}).dynamicTyping||!1;if(I(D)&&(C.dynamicTypingFunction=D,D={}),C.dynamicTyping=D,C.transform=!!I(C.transform)&&C.transform,!C.worker||!u.WORKERS_SUPPORTED)return D=null,u.NODE_STREAM_INPUT,typeof E=="string"?(E=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(E),D=new(C.download?f:h)(C)):E.readable===!0&&I(E.read)&&I(E.on)?D=new y(C):(n.File&&E instanceof File||E instanceof Object)&&(D=new p(C)),D.stream(E);(D=(()=>{var T;return!!u.WORKERS_SUPPORTED&&(T=(()=>{var O=n.URL||n.webkitURL||null,q=r.toString();return u.BLOB_URL||(u.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),(T=new n.Worker(T)).onmessage=_,T.id=c++,o[T.id]=T)})()).userStep=C.step,D.userChunk=C.chunk,D.userComplete=C.complete,D.userError=C.error,C.step=I(C.step),C.chunk=I(C.chunk),C.complete=I(C.complete),C.error=I(C.error),delete C.worker,D.postMessage({input:E,config:C,workerId:D.id})},u.unparse=function(E,C){var D=!1,T=!0,O=",",q=`\r
`,K='"',ne=K+K,re=!1,te=null,W=!1,B=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||u.BAD_DELIMITERS.filter(function(R){return C.delimiter.indexOf(R)!==-1}).length||(O=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(D=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(re=C.skipEmptyLines),typeof C.newline=="string"&&(q=C.newline),typeof C.quoteChar=="string"&&(K=C.quoteChar),typeof C.header=="boolean"&&(T=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");te=C.columns}C.escapeChar!==void 0&&(ne=C.escapeChar+K),C.escapeFormulae instanceof RegExp?W=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(W=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(K),"g"));if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return le(null,E,re);if(typeof E[0]=="object")return le(te||Object.keys(E[0]),E,re)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||te),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),le(E.fields||[],E.data||[],re);throw new Error("Unable to serialize unrecognized input");function le(R,z,J){var ie="",ae=(typeof R=="string"&&(R=JSON.parse(R)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(R)&&0<R.length),ue=!Array.isArray(z[0]);if(ae&&T){for(var pe=0;pe<R.length;pe++)0<pe&&(ie+=O),ie+=G(R[pe],pe);0<z.length&&(ie+=q)}for(var ee=0;ee<z.length;ee++){var he=(ae?R:z[ee]).length,oe=!1,de=ae?Object.keys(z[ee]).length===0:z[ee].length===0;if(J&&!ae&&(oe=J==="greedy"?z[ee].join("").trim()==="":z[ee].length===1&&z[ee][0].length===0),J==="greedy"&&ae){for(var Ce=[],Pe=0;Pe<he;Pe++){var V=ue?R[Pe]:Pe;Ce.push(z[ee][V])}oe=Ce.join("").trim()===""}if(!oe){for(var je=0;je<he;je++){0<je&&!de&&(ie+=O);var Je=ae&&ue?R[je]:je;ie+=G(z[ee][Je],je)}ee<z.length-1&&(!J||0<he&&!de)&&(ie+=q)}}return ie}function G(R,z){var J,ie;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(ie=!1,W&&typeof R=="string"&&W.test(R)&&(R="'"+R,ie=!0),J=R.toString().replace(B,ne),(ie=ie||D===!0||typeof D=="function"&&D(R,z)||Array.isArray(D)&&D[z]||((ae,ue)=>{for(var pe=0;pe<ue.length;pe++)if(-1<ae.indexOf(ue[pe]))return!0;return!1})(J,u.BAD_DELIMITERS)||-1<J.indexOf(O)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?K+J+K:J)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!a&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=v,u.ParserHandle=g,u.NetworkStreamer=f,u.FileStreamer=p,u.StringStreamer=h,u.ReadableStreamStreamer=y,n.jQuery&&((i=n.jQuery).fn.parse=function(E){var C=E.config||{},D=[];return this.each(function(q){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)D.push({file:this.files[K],inputElem:this,instanceConfig:i.extend({},C)})}),T(),this;function T(){if(D.length===0)I(E.complete)&&E.complete();else{var q,K,ne,re,te=D[0];if(I(E.before)){var W=E.before(te.file,te.inputElem);if(typeof W=="object"){if(W.action==="abort")return q="AbortError",K=te.file,ne=te.inputElem,re=W.reason,void(I(E.error)&&E.error({name:q},K,ne,re));if(W.action==="skip")return void O();typeof W.config=="object"&&(te.instanceConfig=i.extend(te.instanceConfig,W.config))}else if(W==="skip")return void O()}var B=te.instanceConfig.complete;te.instanceConfig.complete=function(le){I(B)&&B(le,te.file,te.inputElem),O()},u.parse(te.file,te.instanceConfig)}}function O(){D.splice(0,1),T()}}),s&&(n.onmessage=function(E){E=E.data,u.WORKER_ID===void 0&&E&&(u.WORKER_ID=E.workerId),typeof E.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(E.input,E.config),finished:!0}):(n.File&&E.input instanceof File||E.input instanceof Object)&&(E=u.parse(E.input,E.config))&&n.postMessage({workerId:u.WORKER_ID,results:E,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(d.prototype)).constructor=p,(h.prototype=Object.create(h.prototype)).constructor=h,(y.prototype=Object.create(d.prototype)).constructor=y,u})})(gM);var mpe=gM.exports;const df=Ts(mpe);function gpe(){const{user:e,outlets:t}=Wt(),[r]=z9(),[n,i]=b.useState([]),[a,s]=b.useState([]),[o,c]=b.useState(!0),[u,d]=b.useState(null),[f,p]=b.useState(""),[h,y]=b.useState(r.get("item")||""),[g,x]=b.useState(""),[v,_]=b.useState(""),[S,j]=b.useState(""),N=(e==null?void 0:e.role)||"",A=N==="admin"||N==="accountant",I=t||[];b.useEffect(()=>{E()},[e==null?void 0:e.id]),b.useEffect(()=>{C()},[e==null?void 0:e.id,f,h,g,v,S]);async function E(){if(e!=null&&e.id)try{const O=await lu(e.id,{is_active:!0});s(O)}catch(O){console.error("Failed to load items:",O)}}async function C(){if(e!=null&&e.id)try{c(!0),d(null);const O={};f&&(O.outlet_id=f),h&&(O.inventory_item_id=h),g&&(O.movement_type=g),v&&(O.date_from=v),S&&(O.date_to=S);const q=await vW(e.id,O);i(q)}catch(O){d(O instanceof Error?O.message:"Failed to load movements")}finally{c(!1)}}function D(O){const q={stock_in:"bg-green-100 text-green-800",allocation:"bg-brand-primary/20 text-brand-primary",return:"bg-purple-100 text-purple-800",damage:"bg-orange-100 text-orange-800",loss:"bg-red-100 text-red-800",adjustment:"bg-yellow-100 text-yellow-800"};return l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${q[O]}`,children:O.replace("_"," ").toUpperCase()})}function T(){const O=n.map(te=>({Date:new Date(te.created_at).toLocaleDateString(),Time:new Date(te.created_at).toLocaleTimeString(),Item:te.item_name||"",Category:te.item_category||"",Outlet:te.outlet_name||"","Movement Type":te.movement_type,Quantity:te.quantity,"Reference Type":te.reference_type,"Reference Name":te.reference_name||"",Notes:te.notes||"","Created By":te.created_by_name||""})),q=df.unparse(O),K=new Blob([q],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),re=URL.createObjectURL(K);ne.setAttribute("href",re),ne.setAttribute("download",`inventory-movements-${new Date().toISOString().split("T")[0]}.csv`),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)}return o&&n.length===0?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Hr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(Tv,{className:"w-8 h-8"}),"Inventory Movements"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete movement history (read-only)"})]}),n.length>0&&l.jsxs(Ee,{onClick:T,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),u&&l.jsx(ft,{variant:"error",children:u}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Filters"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A&&l.jsxs(ot,{label:"Outlet",value:f,onChange:O=>p(O.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),I.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))]}),l.jsxs(ot,{label:"Item",value:h,onChange:O=>y(O.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),a.map(O=>l.jsxs("option",{value:O.id,children:[O.name," (",O.category,")"]},O.id))]}),l.jsxs(ot,{label:"Movement Type",value:g,onChange:O=>x(O.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"stock_in",children:"Stock In"}),l.jsx("option",{value:"allocation",children:"Allocation"}),l.jsx("option",{value:"return",children:"Return"}),l.jsx("option",{value:"damage",children:"Damage"}),l.jsx("option",{value:"loss",children:"Loss"}),l.jsx("option",{value:"adjustment",children:"Adjustment"})]}),l.jsx(ze,{type:"date",label:"From Date",value:v,onChange:O=>_(O.target.value)}),l.jsx(ze,{type:"date",label:"To Date",value:S,onChange:O=>j(O.target.value)}),(f||h||g||v||S)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Ee,{variant:"outline",onClick:()=>{p(""),y(""),x(""),_(""),j("")},children:"Clear Filters"})})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Movement History"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.length," movements"]})]}),n.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Tv,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No movements found"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Date/Time"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Item"}),A&&l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Quantity"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Reference"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Notes"}),l.jsx("th",{className:"text-left py-3 px-4",children:"User"})]})}),l.jsx("tbody",{children:n.map(O=>l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4 text-sm",children:l.jsxs("div",{children:[l.jsx("p",{children:new Date(O.created_at).toLocaleDateString()}),l.jsx("p",{className:"text-muted-foreground text-xs",children:new Date(O.created_at).toLocaleTimeString()})]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm",children:O.item_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:O.item_category})]})}),A&&l.jsx("td",{className:"py-3 px-4 text-sm",children:O.outlet_name}),l.jsx("td",{className:"py-3 px-4",children:D(O.movement_type)}),l.jsx("td",{className:"text-right py-3 px-4 font-semibold",children:O.quantity}),l.jsxs("td",{className:"py-3 px-4 text-sm",children:[O.reference_type!=="manual"&&l.jsxs("div",{children:[l.jsx(Yt,{variant:"default",children:O.reference_type}),O.reference_name&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:O.reference_name})]}),O.reference_type==="manual"&&l.jsx("span",{className:"text-muted-foreground",children:"Manual"})]}),l.jsx("td",{className:"py-3 px-4 text-sm",children:O.notes||"-"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:O.created_by_name||"-"})]},O.id))})]})})]})]})}async function vM(e,t,r){const{data:n,error:i}=await ve.from("inventory_allocations_with_details").select("*").eq("reference_type",t).eq("reference_id",r).eq("is_active",!0);if(i)throw new Error(i.message);return n||[]}async function vpe(e,t,r){const n=await vM(e,t,r),i=n.reduce((o,c)=>o+c.allocated_quantity,0),a=n.reduce((o,c)=>o+(c.outstanding_quantity||0),0),s=n.length;return{totalAllocated:i,totalOutstanding:a,itemCount:s}}function ype({isOpen:e,onClose:t,onSuccess:r,userId:n,outletId:i,referenceType:a,referenceId:s,referenceName:o}){const[c,u]=b.useState([]),[d,f]=b.useState(!1),[p,h]=b.useState(""),[y,g]=b.useState(""),[x,v]=b.useState(""),[_,S]=b.useState(!1),[j,N]=b.useState(null),A=c.find(D=>D.id===p),I=(A==null?void 0:A.available_quantity)||0;b.useEffect(()=>{e&&(E(),h(""),g(""),v(""),N(null))},[e]);async function E(){try{f(!0);const T=(await lu(n,{outlet_id:i,is_active:!0})).filter(O=>O.available_quantity>0);u(T)}catch(D){N(D instanceof Error?D.message:"Failed to load items")}finally{f(!1)}}async function C(D){if(D.preventDefault(),N(null),!p){N("Please select an item");return}const T=parseInt(y);if(isNaN(T)||T<=0){N("Quantity must be a positive number");return}if(T>I){N(`Quantity cannot exceed available stock (${I})`);return}try{S(!0),await xW(n,{outlet_id:i,inventory_item_id:p,quantity:T,reference_type:a,reference_id:s,notes:x.trim()||void 0}),r(),t()}catch(O){N(O instanceof Error?O.message:"Failed to allocate inventory")}finally{S(!1)}}return l.jsx(CS,{isOpen:e,onClose:t,title:"Allocate Inventory",children:l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[j&&l.jsx(ft,{variant:"error",children:j}),l.jsxs("div",{className:"bg-muted p-4 rounded",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocating To"}),l.jsx("p",{className:"font-semibold capitalize",children:a}),l.jsx("p",{className:"text-sm",children:o})]}),d?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(Hr,{})}):c.length===0?l.jsx(ft,{variant:"warning",children:"No inventory items with available stock found for this outlet."}):l.jsxs(l.Fragment,{children:[l.jsxs(ot,{label:"Inventory Item",value:p,onChange:D=>h(D.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Select Item"}),c.map(D=>l.jsxs("option",{value:D.id,children:[D.name," - ",D.category," (Available: ",D.available_quantity,")"]},D.id))]}),A&&l.jsxs("div",{className:"bg-brand-primary/10 p-3 rounded",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Available Stock"}),l.jsxs("p",{className:"text-lg font-bold text-brand-primary",children:[I," ",A.unit]})]}),l.jsx(ze,{type:"number",label:"Quantity to Allocate",value:y,onChange:D=>g(D.target.value),min:"1",max:I,required:!0,disabled:!p,placeholder:A?`Max: ${I}`:"Select an item first"}),l.jsx(ze,{label:"Notes (optional)",value:x,onChange:D=>v(D.target.value),placeholder:"Optional notes about this allocation"})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:t,disabled:_,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:_||c.length===0,children:_?"Allocating...":"Allocate"})]})]})})}const yM=wp.forwardRef(({className:e,label:t,error:r,...n},i)=>l.jsxs("div",{className:"w-full",children:[t&&l.jsx("label",{className:"block text-sm font-medium text-brand-text mb-1",children:t}),l.jsx("textarea",{className:As("flex min-h-[80px] w-full rounded-md border border-brand-border bg-white px-3 py-2 text-sm","placeholder:text-brand-text/50","focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50","resize-vertical",r&&"border-red-500 focus:ring-red-500",e),ref:i,...n}),r&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}));yM.displayName="Textarea";function xpe({isOpen:e,onClose:t,onSuccess:r,userId:n,outletId:i,inventoryItemId:a,itemName:s,referenceType:o,referenceId:c,outstandingQuantity:u}){const[d,f]=b.useState("return"),[p,h]=b.useState(""),[y,g]=b.useState(""),[x,v]=b.useState(!1),[_,S]=b.useState(null);b.useEffect(()=>{e&&(f("return"),h(""),g(""),S(null))},[e]);async function j(N){N.preventDefault(),S(null);const A=parseInt(p);if(isNaN(A)||A<=0){S("Quantity must be a positive number");return}if(A>u){S(`Quantity cannot exceed outstanding (${u})`);return}if((d==="damage"||d==="loss")&&!y.trim()){S("Notes are required when marking damage or loss");return}try{v(!0);const I={outlet_id:i,inventory_item_id:a,quantity:A,reference_type:o,reference_id:c,notes:y.trim()||void 0};d==="return"?await bW(n,{...I,reference_type:o}):d==="damage"?await wW(n,{...I,reference_type:o,notes:y.trim()}):d==="loss"&&await _W(n,{...I,reference_type:o,notes:y.trim()}),r(),t()}catch(I){S(I instanceof Error?I.message:"Failed to process")}finally{v(!1)}}return l.jsx(CS,{isOpen:e,onClose:t,title:"Return / Damage / Loss",children:l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[_&&l.jsx(ft,{variant:"error",children:_}),l.jsxs("div",{className:"bg-muted p-4 rounded",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Item"}),l.jsx("p",{className:"font-semibold",children:s}),l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Outstanding Quantity"}),l.jsx("p",{className:"text-lg font-bold text-orange-600",children:u})]}),l.jsxs(ot,{label:"Action",value:d,onChange:N=>f(N.target.value),required:!0,children:[l.jsx("option",{value:"return",children:"Return (Good Condition)"}),l.jsx("option",{value:"damage",children:"Mark as Damaged"}),l.jsx("option",{value:"loss",children:"Mark as Lost"})]}),l.jsx(ze,{type:"number",label:"Quantity",value:p,onChange:N=>h(N.target.value),min:"1",max:u,required:!0,placeholder:`Max: ${u}`}),l.jsx(yM,{label:d==="return"?"Notes (optional)":"Notes (required)",value:y,onChange:N=>g(N.target.value),placeholder:d==="return"?"Optional notes about the return":"Explain what happened (mandatory)",required:d!=="return",rows:4}),d!=="return"&&l.jsxs(ft,{variant:"warning",children:[l.jsx("strong",{children:"Note:"})," ",d==="damage"?"Damaged":"Lost"," items will be tracked separately and reduce available stock."]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(Ee,{type:"button",variant:"outline",onClick:t,disabled:x,children:"Cancel"}),l.jsx(Ee,{type:"submit",disabled:x,children:x?"Processing...":d==="return"?"Return":`Mark as ${d}`})]})]})})}function bpe(){const{user:e}=Wt(),[t,r]=b.useState(""),[n,i]=b.useState(""),[a,s]=b.useState(null),[o,c]=b.useState([]),[u,d]=b.useState(!1),[f,p]=b.useState([]),[h,y]=b.useState(null),[g,x]=b.useState(!1),[v,_]=b.useState(null),[S,j]=b.useState(!1),[N,A]=b.useState(null),I=(e==null?void 0:e.role)==="accountant";b.useEffect(()=>{n&&t?E():c([])},[n,t]),b.useEffect(()=>{a&&t&&C()},[a,t]);async function E(){if(!n.trim()){c([]);return}try{if(d(!0),t==="subscription"){const{data:O}=await ve.from("subscriptions").select("id, client_id, outlet_id, status, clients(name)").ilike("clients.name",`%${n}%`).eq("is_active",!0).limit(10);c((O==null?void 0:O.map(q=>{var K;return{id:q.id,name:((K=q.clients)==null?void 0:K.name)||"Unknown",outlet_id:q.outlet_id,status:q.status}}))||[])}else if(t==="event"){const{data:O}=await ve.from("events").select("id, event_name, outlet_id, status").ilike("event_name",`%${n}%`).eq("is_active",!0).limit(10);c((O==null?void 0:O.map(q=>({id:q.id,name:q.event_name,outlet_id:q.outlet_id,status:q.status})))||[])}}catch(O){console.error("Search failed:",O)}finally{d(!1)}}async function C(){if(!(!(e!=null&&e.id)||!a||!t))try{x(!0),_(null);const[O,q]=await Promise.all([vM(e.id,t,a.id),vpe(e.id,t,a.id)]);p(O),y(q)}catch(O){_(O instanceof Error?O.message:"Failed to load allocations")}finally{x(!1)}}function D(O){s(O),i(""),c([])}function T(){s(null),p([]),y(null)}return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(Dd,{className:"w-8 h-8"}),"Inventory Allocation"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Allocate dishware to subscriptions or events"})]}),a&&!I&&l.jsxs(Ee,{onClick:()=>j(!0),children:[l.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Allocate Items"]})]}),v&&l.jsx(ft,{variant:"error",children:v}),a?l.jsxs(l.Fragment,{children:[l.jsxs(Ee,{variant:"outline",onClick:T,children:[l.jsx(Ld,{className:"w-4 h-4 mr-2"}),"Back to Search"]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t}),l.jsx("h3",{className:"text-xl font-bold",children:a.name})]}),h&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:h.totalAllocated}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Outstanding"}),l.jsx("p",{className:"text-lg font-semibold text-orange-600",children:h.totalOutstanding})]})]})}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Allocated Items"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.length," item",f.length!==1?"s":""]})]}),g?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Hr,{size:"lg"})}):f.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Dd,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No items allocated yet"}),!I&&l.jsxs(Ee,{onClick:()=>j(!0),className:"mt-4",children:[l.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Allocate Items"]})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Item"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Category"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Allocated"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Outstanding"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:f.map(O=>l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4 font-medium",children:O.item_name}),l.jsx("td",{className:"py-3 px-4",children:l.jsx(Yt,{variant:"default",children:O.item_category})}),l.jsx("td",{className:"text-right py-3 px-4 font-semibold",children:O.allocated_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-orange-600 font-semibold",children:O.outstanding_quantity||0}),l.jsx("td",{className:"text-center py-3 px-4",children:O.is_active?l.jsx(Yt,{variant:"success",children:"Active"}):l.jsx(Yt,{variant:"secondary",children:"Closed"})}),l.jsx("td",{className:"text-center py-3 px-4",children:O.is_active&&(O.outstanding_quantity||0)>0&&!I&&l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>A(O),children:"Return/Damage/Loss"})})]},O.id))})]})})]})]}):l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Select Subscription or Event"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs(ot,{label:"Reference Type",value:t,onChange:O=>r(O.target.value),children:[l.jsx("option",{value:"",children:"Select Type"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),t&&l.jsx(ze,{label:`Search ${t==="subscription"?"by client name":"by event name"}`,value:n,onChange:O=>i(O.target.value),placeholder:"Type to search..."}),u&&l.jsx("div",{className:"flex items-center justify-center py-4",children:l.jsx(Hr,{})}),o.length>0&&l.jsx("div",{className:"border rounded divide-y",children:o.map(O=>l.jsx("button",{onClick:()=>D(O),className:"w-full text-left p-4 hover:bg-muted transition-colors",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:O.name}),l.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[t," - ",O.status]})]}),l.jsx(Yt,{variant:"default",children:"Select"})]})},O.id))})]})]}),S&&a&&t&&l.jsx(ype,{isOpen:S,onClose:()=>j(!1),onSuccess:C,userId:(e==null?void 0:e.id)||"",outletId:a.outlet_id,referenceType:t,referenceId:a.id,referenceName:a.name}),N&&a&&t&&l.jsx(xpe,{isOpen:!!N,onClose:()=>A(null),onSuccess:C,userId:(e==null?void 0:e.id)||"",outletId:a.outlet_id,inventoryItemId:N.inventory_item_id,itemName:N.item_name||"",referenceType:t,referenceId:a.id,outstandingQuantity:N.outstanding_quantity||0})]})}async function bx(e){const{data:t}=await ve.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}async function xM(e,t={}){const r=await bx(e);let n=ve.from("inventory_stock_summary").select("*").order("item_name");if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.category&&(n=n.eq("category",t.category)),t.is_active!==void 0&&(n=n.eq("is_active",t.is_active));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function wpe(e,t={}){const n=(await xM(e,t)).map(i=>({"Item Name":i.item_name,Category:i.category,Material:i.material||"",Unit:i.unit,Outlet:i.outlet_name,"Outlet Code":i.outlet_code,"Total Quantity":i.total_quantity,Available:i.available_quantity,Allocated:i.allocated_quantity,Damaged:i.damaged_quantity,Lost:i.lost_quantity,Status:i.is_active?"Active":"Inactive"}));return df.unparse(n)}async function bM(e,t={}){const r=await bx(e);let n=ve.from("inventory_allocations_with_details").select("*").order("item_name");if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.reference_type&&(n=n.eq("reference_type",t.reference_type)),t.inventory_item_id&&(n=n.eq("inventory_item_id",t.inventory_item_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function _pe(e,t={}){const n=(await bM(e,t)).map(i=>({"Item Name":i.item_name,Category:i.item_category,Outlet:i.outlet_name,"Reference Type":i.reference_type,Reference:i.reference_name||"","Allocated Quantity":i.allocated_quantity,"Outstanding Quantity":i.outstanding_quantity,Status:i.is_active?"Active":"Closed","Created At":new Date(i.created_at).toLocaleString()}));return df.unparse(n)}async function wM(e,t={}){const r=await bx(e);let n=ve.from("inventory_damage_loss_report").select("*").order("report_date",{ascending:!1});if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.movement_type&&(n=n.eq("movement_type",t.movement_type)),t.inventory_item_id&&(n=n.eq("inventory_item_id",t.inventory_item_id)),t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function jpe(e,t={}){const n=(await wM(e,t)).map(i=>({Date:i.report_date,"Item Name":i.item_name,Category:i.item_category,Outlet:i.outlet_name,Type:i.movement_type.toUpperCase(),"Incident Count":i.incident_count,"Total Quantity":i.total_quantity,"Reference Type":i.reference_type,Reference:i.reference_name||"Manual"}));return df.unparse(n)}async function _M(e,t={}){const r=await bx(e);let n=ve.from("inventory_movements_with_details").select("*").order("created_at",{ascending:!1});if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.inventory_item_id&&(n=n.eq("inventory_item_id",t.inventory_item_id)),t.movement_type&&(n=n.eq("movement_type",t.movement_type)),t.date_from&&(n=n.gte("created_at",t.date_from)),t.date_to&&(n=n.lte("created_at",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Spe(e,t={}){const n=(await _M(e,t)).map(i=>({Date:new Date(i.created_at).toLocaleDateString(),Time:new Date(i.created_at).toLocaleTimeString(),"Item Name":i.item_name,Category:i.item_category,Outlet:i.outlet_name,"Movement Type":i.movement_type.toUpperCase(),Quantity:i.quantity,"Reference Type":i.reference_type,Reference:i.reference_name||"Manual",Notes:i.notes||"",User:i.created_by_name}));return df.unparse(n)}function Npe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState("stock"),[i,a]=b.useState(!1),[s,o]=b.useState(null),c=(e==null?void 0:e.role)||"",u=c==="admin"||c==="accountant",d=t||[],f=[{id:"stock",label:"Stock Summary"},{id:"allocation",label:"Allocation"},{id:"damage",label:"Damage & Loss"},{id:"movements",label:"Movements"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(Ez,{className:"w-8 h-8"}),"Inventory Reports"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Production-grade inventory reporting with CSV exports"})]}),s&&l.jsx(ft,{variant:"error",children:s}),l.jsx(we,{children:l.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:f.map(p=>l.jsx("button",{onClick:()=>n(p.id),className:`px-4 py-2 rounded-md font-medium transition-colors ${r===p.id?"bg-primary text-white":"bg-muted hover:bg-muted/80"}`,children:p.label},p.id))})}),r==="stock"&&l.jsx(kpe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o}),r==="allocation"&&l.jsx(Ape,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o}),r==="damage"&&l.jsx(Epe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o}),r==="movements"&&l.jsx(Ppe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o})]})}function kpe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState("true");b.useEffect(()=>{h()},[e,o,u,f]);async function h(){try{n(!0),i(null);const j={};o&&(j.outlet_id=o),u&&(j.category=u),f!==""&&(j.is_active=f==="true");const N=await xM(e,j);s(N)}catch(j){i(j instanceof Error?j.message:"Failed to load report")}finally{n(!1)}}async function y(){try{const j={};o&&(j.outlet_id=o),u&&(j.category=u),f!==""&&(j.is_active=f==="true");const N=await wpe(e,j),A=new Blob([N],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),E=URL.createObjectURL(A);I.setAttribute("href",E),I.setAttribute("download",`stock-summary-${new Date().toISOString().split("T")[0]}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)}catch(j){i(j instanceof Error?j.message:"Failed to export CSV")}}const g=a.length,x=a.reduce((j,N)=>j+(N.available_quantity||0),0),v=a.reduce((j,N)=>j+(N.allocated_quantity||0),0),_=a.reduce((j,N)=>j+(N.damaged_quantity||0),0),S=a.reduce((j,N)=>j+(N.lost_quantity||0),0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),l.jsx("p",{className:"text-2xl font-bold",children:g})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Available"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:x})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:v})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Damaged"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:_})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Lost"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:S})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Ee,{onClick:y,disabled:a.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(ot,{label:"Outlet",value:o,onChange:j=>c(j.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(j=>l.jsx("option",{value:j.id,children:j.name},j.id))]}),l.jsx(ze,{label:"Category",value:u,onChange:j=>d(j.target.value),placeholder:"Filter by category"}),l.jsxs(ot,{label:"Status",value:f,onChange:j=>p(j.target.value),children:[l.jsx("option",{value:"true",children:"Active"}),l.jsx("option",{value:"false",children:"Inactive"}),l.jsx("option",{value:"",children:"All"})]})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Stock Summary"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No data found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Category"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Available"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Allocated"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Damaged"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Lost"})]})}),l.jsx("tbody",{children:a.map((j,N)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 font-medium",children:j.item_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:"default",children:j.category})}),t&&l.jsx("td",{className:"py-2 px-2 text-sm",children:j.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:j.total_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600 font-semibold",children:j.available_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-brand-primary",children:j.allocated_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:j.damaged_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-red-600",children:j.lost_quantity})]},N))})]})})]})]})}function Ape({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState("");b.useEffect(()=>{g()},[e]),b.useEffect(()=>{x()},[e,u,f,h]);async function g(){try{const j=await lu(e,{is_active:!0});c(j)}catch(j){console.error("Failed to load items:",j)}}async function x(){try{n(!0),i(null);const j={};u&&(j.outlet_id=u),f&&(j.reference_type=f),h&&(j.inventory_item_id=h);const N=await bM(e,j);s(N)}catch(j){i(j instanceof Error?j.message:"Failed to load report")}finally{n(!1)}}async function v(){try{const j={};u&&(j.outlet_id=u),f&&(j.reference_type=f),h&&(j.inventory_item_id=h);const N=await _pe(e,j),A=new Blob([N],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),E=URL.createObjectURL(A);I.setAttribute("href",E),I.setAttribute("download",`allocation-report-${new Date().toISOString().split("T")[0]}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)}catch(j){i(j instanceof Error?j.message:"Failed to export CSV")}}const _=a.reduce((j,N)=>j+(N.allocated_quantity||0),0),S=a.reduce((j,N)=>j+(N.outstanding_quantity||0),0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Allocations"}),l.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:_})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:S})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Ee,{onClick:v,disabled:a.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(ot,{label:"Outlet",value:u,onChange:j=>d(j.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(j=>l.jsx("option",{value:j.id,children:j.name},j.id))]}),l.jsxs(ot,{label:"Reference Type",value:f,onChange:j=>p(j.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),l.jsxs(ot,{label:"Item",value:h,onChange:j=>y(j.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),o.map(j=>l.jsxs("option",{value:j.id,children:[j.name," (",j.category,")"]},j.id))]})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Current Allocations"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No allocations found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Category"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Allocated"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Status"})]})}),l.jsx("tbody",{children:a.map((j,N)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 font-medium",children:j.item_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:"default",children:j.item_category})}),t&&l.jsx("td",{className:"py-2 px-2 text-sm",children:j.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm",children:l.jsxs("div",{children:[l.jsx(Yt,{variant:"default",children:j.reference_type}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j.reference_name})]})}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:j.allocated_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600 font-semibold",children:j.outstanding_quantity}),l.jsx("td",{className:"text-center py-2 px-2",children:j.is_active?l.jsx(Yt,{variant:"success",children:"Active"}):l.jsx(Yt,{variant:"secondary",children:"Closed"})})]},N))})]})})]})]})}function Epe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(""),[g,x]=b.useState(""),[v,_]=b.useState("");b.useEffect(()=>{S()},[e]),b.useEffect(()=>{j()},[e,u,f,h,g,v]);async function S(){try{const E=await lu(e,{is_active:!0});c(E)}catch(E){console.error("Failed to load items:",E)}}async function j(){try{n(!0),i(null);const E={};u&&(E.outlet_id=u),f&&(E.movement_type=f),h&&(E.inventory_item_id=h),g&&(E.date_from=g),v&&(E.date_to=v);const C=await wM(e,E);s(C)}catch(E){i(E instanceof Error?E.message:"Failed to load report")}finally{n(!1)}}async function N(){try{const E={};u&&(E.outlet_id=u),f&&(E.movement_type=f),h&&(E.inventory_item_id=h),g&&(E.date_from=g),v&&(E.date_to=v);const C=await jpe(e,E),D=new Blob([C],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a"),O=URL.createObjectURL(D);T.setAttribute("href",O),T.setAttribute("download",`damage-loss-report-${new Date().toISOString().split("T")[0]}.csv`),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)}catch(E){i(E instanceof Error?E.message:"Failed to export CSV")}}const A=a.reduce((E,C)=>E+(C.incident_count||0),0),I=a.reduce((E,C)=>E+(C.total_quantity||0),0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Incidents"}),l.jsx("p",{className:"text-2xl font-bold",children:A})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity Affected"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:I})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Ee,{onClick:N,disabled:a.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(ot,{label:"Outlet",value:u,onChange:E=>d(E.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(E=>l.jsx("option",{value:E.id,children:E.name},E.id))]}),l.jsxs(ot,{label:"Type",value:f,onChange:E=>p(E.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"damage",children:"Damage"}),l.jsx("option",{value:"loss",children:"Loss"})]}),l.jsxs(ot,{label:"Item",value:h,onChange:E=>y(E.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),o.map(E=>l.jsxs("option",{value:E.id,children:[E.name," (",E.category,")"]},E.id))]}),l.jsx(ze,{type:"date",label:"From Date",value:g,onChange:E=>x(E.target.value)}),l.jsx(ze,{type:"date",label:"To Date",value:v,onChange:E=>_(E.target.value)})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Damage & Loss History"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No incidents found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Incidents"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Quantity"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"})]})}),l.jsx("tbody",{children:a.map((E,C)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:E.report_date}),l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:E.item_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:E.item_category})]})}),t&&l.jsx("td",{className:"py-2 px-2 text-sm",children:E.outlet_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:E.movement_type==="loss"?"destructive":"warning",children:E.movement_type.toUpperCase()})}),l.jsx("td",{className:"text-right py-2 px-2",children:E.incident_count}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-red-600",children:E.total_quantity}),l.jsx("td",{className:"py-2 px-2 text-sm",children:l.jsxs("div",{children:[l.jsx(Yt,{variant:"default",children:E.reference_type}),E.reference_name&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:E.reference_name})]})})]},C))})]})})]})]})}function Ppe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(""),[g,x]=b.useState(""),[v,_]=b.useState("");b.useEffect(()=>{S()},[e]),b.useEffect(()=>{j()},[e,u,f,h,g,v]);async function S(){try{const A=await lu(e,{is_active:!0});c(A)}catch(A){console.error("Failed to load items:",A)}}async function j(){try{n(!0),i(null);const A={};u&&(A.outlet_id=u),f&&(A.movement_type=f),h&&(A.inventory_item_id=h),g&&(A.date_from=g),v&&(A.date_to=v);const I=await _M(e,A);s(I)}catch(A){i(A instanceof Error?A.message:"Failed to load report")}finally{n(!1)}}async function N(){try{const A={};u&&(A.outlet_id=u),f&&(A.movement_type=f),h&&(A.inventory_item_id=h),g&&(A.date_from=g),v&&(A.date_to=v);const I=await Spe(e,A),E=new Blob([I],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a"),D=URL.createObjectURL(E);C.setAttribute("href",D),C.setAttribute("download",`movement-history-${new Date().toISOString().split("T")[0]}.csv`),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)}catch(A){i(A instanceof Error?A.message:"Failed to export CSV")}}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Movements"}),l.jsx("p",{className:"text-2xl font-bold",children:a.length})]})}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Ee,{onClick:N,disabled:a.length===0,children:[l.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(ot,{label:"Outlet",value:u,onChange:A=>d(A.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))]}),l.jsxs(ot,{label:"Movement Type",value:f,onChange:A=>p(A.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"stock_in",children:"Stock In"}),l.jsx("option",{value:"allocation",children:"Allocation"}),l.jsx("option",{value:"return",children:"Return"}),l.jsx("option",{value:"damage",children:"Damage"}),l.jsx("option",{value:"loss",children:"Loss"}),l.jsx("option",{value:"adjustment",children:"Adjustment"})]}),l.jsxs(ot,{label:"Item",value:h,onChange:A=>y(A.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),o.map(A=>l.jsxs("option",{value:A.id,children:[A.name," (",A.category,")"]},A.id))]}),l.jsx(ze,{type:"date",label:"From Date",value:g,onChange:A=>x(A.target.value)}),l.jsx(ze,{type:"date",label:"To Date",value:v,onChange:A=>_(A.target.value)})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Complete Movement History (Immutable Audit Trail)"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No movements found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date/Time"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Qty"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Notes"}),l.jsx("th",{className:"text-left py-2 px-2",children:"User"})]})}),l.jsx("tbody",{children:a.map((A,I)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx("p",{children:new Date(A.created_at).toLocaleDateString()}),l.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(A.created_at).toLocaleTimeString()})]})}),l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:A.item_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:A.item_category})]})}),t&&l.jsx("td",{className:"py-2 px-2",children:A.outlet_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:"default",children:A.movement_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:A.quantity}),l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx(Yt,{variant:"secondary",children:A.reference_type}),A.reference_name&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:A.reference_name})]})}),l.jsx("td",{className:"py-2 px-2 max-w-xs truncate",children:A.notes||"-"}),l.jsx("td",{className:"py-2 px-2",children:A.created_by_name})]},I))})]})})]})]})}async function wx(e){const{data:t,error:r}=await ve.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(t.role!=="admin")throw new Error("Permission denied: Admin access required");if(!t.is_active)throw new Error("Permission denied: User account is inactive")}async function Cpe(e){await wx(e);const{data:t,error:r}=await ve.from("admin_users_summary").select("*").order("created_at",{ascending:!1});if(r)throw new Error(`Failed to fetch users: ${r.message}`);return t||[]}async function Ope(e,t){throw await wx(e),new Error("User creation via the app is currently disabled. Please create users directly in Supabase Dashboard  Authentication  Users.")}async function Tpe(e,t,r){if(await wx(e),e===t&&!r)throw new Error("Cannot deactivate your own account");if(!r){const{data:i}=await ve.from("user_profiles").select("role").eq("id",t).single();if((i==null?void 0:i.role)==="admin"){const{count:a,error:s}=await ve.from("user_profiles").select("id",{count:"exact",head:!0}).eq("role","admin").eq("is_active",!0);if(s)throw new Error(`Failed to check admin count: ${s.message}`);if(a&&a<=1)throw new Error("Cannot deactivate the last active admin")}}const{error:n}=await ve.from("user_profiles").update({is_active:r}).eq("id",t);if(n)throw new Error(`Failed to update user status: ${n.message}`)}async function Ipe(e,t,r){await wx(e);const{data:n,error:i}=await ve.from("user_profiles").select("role").eq("id",t).single();if(i)throw new Error(`Failed to fetch user profile: ${i.message}`);if(n.role!=="manager")throw new Error("Only managers can be assigned to outlets");const{error:a}=await ve.from("user_outlet_assignments").delete().eq("user_id",t);if(a)throw new Error(`Failed to remove existing outlet assignments: ${a.message}`);if(r.length>0){const s=r.map(c=>({user_id:t,outlet_id:c})),{error:o}=await ve.from("user_outlet_assignments").insert(s);if(o)throw new Error(`Failed to assign outlets: ${o.message}`)}}function Lpe({isOpen:e,onClose:t,onSubmit:r,user:n,outlets:i,mode:a}){const[s,o]=b.useState({email:"",full_name:"",phone:"",role:"accountant",outlet_ids:[]}),[c,u]=b.useState(!1),[d,f]=b.useState(null);b.useEffect(()=>{e&&n&&a==="edit"?o({email:n.email,full_name:n.full_name,phone:"",role:n.role,outlet_ids:[]}):e&&a==="create"&&o({email:"",full_name:"",phone:"",role:"accountant",outlet_ids:[]}),f(null)},[e,n,a]);const p=async h=>{if(h.preventDefault(),f(null),!s.email||!s.full_name){f("Email and full name are required");return}if(s.role==="manager"&&(!s.outlet_ids||s.outlet_ids.length===0)){f("Managers must be assigned to at least one outlet");return}try{u(!0),await r(s),t()}catch(y){f(y instanceof Error?y.message:"Failed to save user")}finally{u(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-brand-border sticky top-0 bg-white",children:[l.jsx("h2",{className:"text-lg font-semibold",children:a==="create"?"Add New User":"Edit User"}),l.jsx("button",{onClick:t,disabled:c,className:"text-brand-text/60 hover:text-brand-text",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[a==="create"&&l.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-amber-100 dark:bg-amber-800 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-amber-600 dark:text-amber-400 text-lg",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-300",children:"Create Users in Supabase"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mt-1",children:"To create new users, go to Supabase Dashboard  Authentication  Users  Invite User. After creating the auth user, add entries in user_profiles and user_outlet_assignments tables."})]})]})}),d&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm",children:d}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Email ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"email",value:s.email,onChange:h=>o({...s,email:h.target.value}),disabled:a==="edit"||c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg",required:!0}),a==="edit"&&l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Email cannot be changed"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:s.full_name,onChange:h=>o({...s,full_name:h.target.value}),disabled:c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),l.jsx("input",{type:"tel",value:s.phone,onChange:h=>o({...s,phone:h.target.value}),disabled:c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Role ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:s.role,onChange:h=>o({...s,role:h.target.value,outlet_ids:h.target.value!=="manager"?[]:s.outlet_ids}),disabled:c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0,children:[l.jsx("option",{value:"accountant",children:"Accountant"}),l.jsx("option",{value:"manager",children:"Manager"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),s.role==="manager"&&l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Assigned Outlets ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"border border-brand-border rounded-md p-3 space-y-2 max-h-40 overflow-y-auto",children:i.filter(h=>h.is_active).map(h=>{var y;return l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:((y=s.outlet_ids)==null?void 0:y.includes(h.id))||!1,onChange:g=>{const x=g.target.checked?[...s.outlet_ids||[],h.id]:(s.outlet_ids||[]).filter(v=>v!==h.id);o({...s,outlet_ids:x})},disabled:c,className:"rounded"}),l.jsxs("span",{className:"text-sm",children:[h.name," (",h.code,")"]})]},h.id)})}),l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Managers can only access assigned outlets"})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t ",children:[l.jsx("button",{type:"button",onClick:t,disabled:c,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:c||a==="create",className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":a==="create"?"Use Supabase Dashboard":"Save Changes"})]})]})]})}):null}function o_({isOpen:e,onClose:t,onConfirm:r,title:n,message:i,confirmText:a="Confirm",cancelText:s="Cancel",variant:o="danger",isLoading:c=!1}){if(!e)return null;const u={danger:"bg-red-600 hover:bg-red-700",warning:"bg-orange-600 hover:bg-orange-700",info:"bg-brand-primary hover:bg-brand-primaryDark"};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white  rounded-lg shadow-xl max-w-md w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b ",children:[l.jsx("h2",{className:"text-lg font-semibold",children:n}),l.jsx("button",{onClick:t,disabled:c,className:"text-brand-text/60 hover:text-brand-text",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6",children:l.jsx("p",{className:"text-brand-text whitespace-pre-line",children:i})}),l.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t ",children:[l.jsx("button",{onClick:t,disabled:c,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:s}),l.jsx("button",{onClick:r,disabled:c,className:`px-4 py-2 text-white rounded-md ${u[o]} disabled:opacity-50`,children:c?"Processing...":a})]})]})})}function Dpe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(null),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[p,h]=b.useState(!1),[y,g]=b.useState(null),[x,v]=b.useState("deactivate");b.useEffect(()=>{_()},[e]);async function _(){if(e!=null&&e.id)try{a(!0),o(null);const E=await Cpe(e.id);n(E)}catch(E){o(E instanceof Error?E.message:"Failed to load users")}finally{a(!1)}}async function S(E){e!=null&&e.id&&(E.email,E.full_name,E.phone,E.role,E.outlet_ids,await Ope(e.id),await _())}async function j(){if(!(e!=null&&e.id)||!y)return;const E=x==="activate";await Tpe(e.id,y.user_id,E),await _(),f(!1),g(null)}async function N(E){!(e!=null&&e.id)||!y||(await Ipe(e.id,y.user_id,E),await _(),h(!1),g(null))}function A(E,C){g(E),v(C),f(!0)}const I=E=>{switch(E){case"admin":return"bg-brand-deep/20 text-brand-deep";case"manager":return"bg-brand-primary/20 text-brand-primary";case"accountant":return"bg-brand-primary/20 text-brand-primary";default:return"bg-brand-border/50 text-brand-text"}};return i?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading users..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(s0,{className:"w-8 h-8"}),"User Management"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage users, roles, and outlet assignments"})]}),l.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark",children:[l.jsx(Bc,{className:"w-5 h-5"}),"Add User"]})]}),s&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:s}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:r.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Active Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:r.filter(E=>E.is_active).length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Admins"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:r.filter(E=>E.role==="admin"&&E.is_active).length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Managers"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:r.filter(E=>E.role==="manager"&&E.is_active).length})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Name"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Email"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Role"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Outlets"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Status"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Last Login"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium text-brand-text",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:r.map(E=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-3 px-4 font-medium",children:E.full_name}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/80",children:E.email}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I(E.role)}`,children:E.role.toUpperCase()})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:E.role==="manager"?E.assigned_outlets.length>0?l.jsxs("span",{className:"text-brand-text/80",children:[E.assigned_outlets.length," outlet(s)"]}):l.jsx("span",{className:"text-red-600 dark:text-red-400",children:"No outlets"}):l.jsx("span",{className:"text-brand-text/60",children:"-"})}),l.jsx("td",{className:"py-3 px-4",children:E.is_active?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-primary/20 text-brand-primary",children:"Active"}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/80",children:E.last_login?new Date(E.last_login).toLocaleDateString():"Never"}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E.role==="manager"&&l.jsx("button",{onClick:()=>{g(E),h(!0)},className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded",title:"Assign Outlets",children:l.jsx(Uz,{className:"w-4 h-4"})}),E.is_active?l.jsx("button",{onClick:()=>A(E,"deactivate"),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Deactivate User",children:l.jsx(tp,{className:"w-4 h-4"})}):l.jsx("button",{onClick:()=>A(E,"activate"),className:"p-1.5 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:"Activate User",children:l.jsx(tp,{className:"w-4 h-4"})})]})})]},E.user_id))})]})})}),l.jsx(Lpe,{isOpen:c,onClose:()=>u(!1),onSubmit:S,outlets:t||[],mode:"create"}),l.jsx(o_,{isOpen:d,onClose:()=>{f(!1),g(null)},onConfirm:j,title:x==="activate"?"Activate User":"Deactivate User",message:x==="activate"?`Are you sure you want to activate ${y==null?void 0:y.full_name}?`:`Are you sure you want to deactivate ${y==null?void 0:y.full_name}?

This user will lose access to the system.`,confirmText:x==="activate"?"Activate":"Deactivate",variant:x==="activate"?"info":"danger"}),p&&y&&l.jsx(Rpe,{isOpen:p,onClose:()=>{h(!1),g(null)},onSubmit:N,user:y,outlets:t||[]})]})}function Rpe({isOpen:e,onClose:t,onSubmit:r,user:n,outlets:i}){const[a,s]=b.useState([]),[o,c]=b.useState(!1);b.useEffect(()=>{e&&s([])},[e,n]);const u=async d=>{if(d.preventDefault(),a.length===0){alert("Please select at least one outlet for this manager");return}try{c(!0),await r(a)}finally{c(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-brand-border",children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text",children:"Assign Outlets"}),l.jsx("button",{onClick:t,className:"text-brand-text/60 hover:text-brand-text",children:l.jsx(s0,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:u,className:"p-6",children:[l.jsxs("p",{className:"text-sm text-brand-text/70 mb-4",children:["Assign outlets to ",l.jsx("strong",{children:n.full_name})]}),l.jsx("div",{className:"border border-brand-border rounded-md p-3 space-y-2 max-h-60 overflow-y-auto",children:i.filter(d=>d.is_active).map(d=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a.includes(d.id),onChange:f=>{f.target.checked?s([...a,d.id]):s(a.filter(p=>p!==d.id))},className:"rounded"}),l.jsxs("span",{className:"text-sm",children:[d.name," (",d.code,")"]})]},d.id))}),l.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[l.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:o?"Saving...":"Save Assignments"})]})]})]})}):null}async function zl(e){const{data:t,error:r}=await ve.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(t.role!=="admin")throw new Error("Permission denied: Admin access required");if(!t.is_active)throw new Error("Permission denied: User account is inactive")}async function wC(e){await zl(e);const{data:t,error:r}=await ve.from("admin_outlets_summary").select("*").order("is_active",{ascending:!1}).order("outlet_name");if(r)throw new Error(`Failed to fetch outlets: ${r.message}`);return t||[]}async function Mpe(e,t){await zl(e);const{data:r,error:n}=await ve.from("outlets").select("id").eq("code",t.code).maybeSingle();if(n)throw new Error(`Failed to check outlet code: ${n.message}`);if(r)throw new Error(`Outlet code '${t.code}' already exists`);const{data:i,error:a}=await ve.from("outlets").insert({name:t.name,code:t.code,city:t.city,address:t.address||null,phone:t.phone||null,email:t.email||null,is_active:!0}).select("id").single();if(a)throw new Error(`Failed to create outlet: ${a.message}`);return{outlet_id:i.id}}async function Fpe(e,t,r){if(await zl(e),r.code){const{data:i,error:a}=await ve.from("outlets").select("id").eq("code",r.code).neq("id",t).maybeSingle();if(a)throw new Error(`Failed to check outlet code: ${a.message}`);if(i)throw new Error(`Outlet code '${r.code}' already exists`)}const{error:n}=await ve.from("outlets").update(r).eq("id",t);if(n)throw new Error(`Failed to update outlet: ${n.message}`)}async function $pe(e,t){await zl(e);const r=await jM(e,t);if(!r.canDeactivate)throw new Error(r.reason||"Cannot deactivate outlet");const{error:n}=await ve.from("outlets").update({is_active:!1}).eq("id",t);if(n)throw new Error(`Failed to deactivate outlet: ${n.message}`)}async function jM(e,t){await zl(e);const{data:r}=await ve.from("outlets").select("is_active").eq("id",t).single();if(!(r!=null&&r.is_active))return{canDeactivate:!1,reason:"Outlet is already inactive"};const{count:n,error:i}=await ve.from("subscriptions").select("id",{count:"exact",head:!0}).eq("outlet_id",t).eq("status","active");if(i)throw new Error(`Failed to check subscriptions: ${i.message}`);if(n&&n>0)return{canDeactivate:!1,reason:`Cannot deactivate: ${n} active subscription(s) found. Please cancel or move subscriptions first.`};const{count:a,error:s}=await ve.from("inventory_allocations").select("id",{count:"exact",head:!0}).eq("outlet_id",t).eq("is_active",!0);if(s)throw new Error(`Failed to check inventory allocations: ${s.message}`);if(a&&a>0)return{canDeactivate:!1,reason:`Cannot deactivate: ${a} active inventory allocation(s) found. Please return all allocated items first.`};const{count:o,error:c}=await ve.from("events").select("id",{count:"exact",head:!0}).eq("outlet_id",t).eq("status","planned");if(c)throw new Error(`Failed to check events: ${c.message}`);return o&&o>0?{canDeactivate:!1,reason:`Cannot deactivate: ${o} active event(s) found. Please complete or cancel events first.`}:{canDeactivate:!0}}async function Bpe(e,t){await zl(e);const{error:r}=await ve.from("outlets").update({is_active:!0}).eq("id",t);if(r)throw new Error(`Failed to activate outlet: ${r.message}`)}async function Upe(e,t){await zl(e);const r=await SM(e,t);if(!r.canDelete)throw new Error(r.reason||"Cannot delete outlet");const{error:n}=await ve.from("outlets").delete().eq("id",t);if(n)throw new Error(`Failed to delete outlet: ${n.message}`)}async function SM(e,t){await zl(e);const{count:r}=await ve.from("clients").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(r&&r>0)return{canDelete:!1,reason:`Cannot delete: ${r} client(s) linked to this outlet.`};const{count:n}=await ve.from("subscriptions").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(n&&n>0)return{canDelete:!1,reason:`Cannot delete: ${n} subscription(s) linked to this outlet.`};const{count:i}=await ve.from("events").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(i&&i>0)return{canDelete:!1,reason:`Cannot delete: ${i} event(s) linked to this outlet.`};const{count:a}=await ve.from("inventory_items").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(a&&a>0)return{canDelete:!1,reason:`Cannot delete: ${a} inventory item(s) linked to this outlet.`};const{count:s}=await ve.from("user_outlet_assignments").select("id",{count:"exact",head:!0}).eq("outlet_id",t);return s&&s>0?{canDelete:!1,reason:`Cannot delete: ${s} user(s) assigned to this outlet.`}:{canDelete:!0}}function _C({isOpen:e,onClose:t,onSubmit:r,outlet:n,mode:i}){const[a,s]=b.useState({name:"",code:"",city:"",address:"",phone:"",email:""}),[o,c]=b.useState(!1),[u,d]=b.useState(null);b.useEffect(()=>{e&&n&&i==="edit"?s({name:n.outlet_name,code:n.outlet_code,city:n.city,address:n.address||"",phone:"",email:""}):e&&i==="create"&&s({name:"",code:"",city:"",address:"",phone:"",email:""}),d(null)},[e,n,i]);const f=async p=>{if(p.preventDefault(),d(null),!a.name||!a.code||!a.city){d("Name, code, and city are required");return}try{c(!0),await r(a),t()}catch(h){d(h instanceof Error?h.message:"Failed to save outlet")}finally{c(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white  rounded-lg shadow-xl max-w-2xl w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b ",children:[l.jsx("h2",{className:"text-lg font-semibold",children:i==="create"?"Add New Outlet":"Edit Outlet"}),l.jsx("button",{onClick:t,disabled:o,className:"text-brand-text/60 hover:text-brand-text ",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[u&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm",children:u}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Outlet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:a.name,onChange:p=>s({...a,name:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Outlet Code ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:a.code,onChange:p=>s({...a,code:p.target.value.toUpperCase()}),disabled:i==="edit"||o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg uppercase",placeholder:"e.g., MUM01, DEL01",required:!0}),i==="edit"&&l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Code cannot be changed"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:a.city,onChange:p=>s({...a,city:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),l.jsx("textarea",{value:a.address,onChange:p=>s({...a,address:p.target.value}),disabled:o,rows:3,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),l.jsx("input",{type:"tel",value:a.phone,onChange:p=>s({...a,phone:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{type:"email",value:a.email,onChange:p=>s({...a,email:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t ",children:[l.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:o?"Saving...":i==="create"?"Create Outlet":"Save Changes"})]})]})]})}):null}function qpe(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(!1),[h,y]=b.useState(!1),[g,x]=b.useState(!1),[v,_]=b.useState(null),[S,j]=b.useState("deactivate"),[N,A]=b.useState(""),[I,E]=b.useState("");b.useEffect(()=>{C()},[e]);async function C(){if(e!=null&&e.id)try{i(!0),c(null);const G=await wC(e.id);r(G)}catch(G){c(G instanceof Error?G.message:"Failed to load outlets")}finally{i(!1)}}async function D(){if(e!=null&&e.id)try{s(!0),c(null);const G=await wC(e.id);r(G)}catch(G){c(G instanceof Error?G.message:"Failed to refresh outlets")}finally{s(!1)}}async function T(G){if(!(e!=null&&e.id))return;const R={name:G.name,code:G.code,city:G.city,address:G.address,phone:G.phone,email:G.email};await Mpe(e.id,R),await C()}async function O(G){if(!(e!=null&&e.id)||!v)return;const R={name:G.name,city:G.city,address:G.address,phone:G.phone,email:G.email};await Fpe(e.id,v.outlet_id,R),await C()}async function q(){!(e!=null&&e.id)||!v||(S==="deactivate"?await $pe(e.id,v.outlet_id):await Bpe(e.id,v.outlet_id),await C(),y(!1),_(null),A(""))}async function K(){if(!(!(e!=null&&e.id)||!v))try{await Upe(e.id,v.outlet_id),await C(),x(!1),_(null),E("")}catch(G){E(G instanceof Error?G.message:"Failed to delete outlet")}}async function ne(G,R){if(_(G),j(R),R==="deactivate"&&(e!=null&&e.id))try{const z=await jM(e.id,G.outlet_id);z.canDeactivate?A(""):A(z.reason||"Cannot deactivate outlet")}catch(z){A(z instanceof Error?z.message:"Failed to validate outlet")}y(!0)}async function re(G){if(_(G),E(""),e!=null&&e.id)try{const R=await SM(e.id,G.outlet_id);R.canDelete||E(R.reason||"Cannot delete outlet")}catch(R){E(R instanceof Error?R.message:"Failed to validate")}x(!0)}const te=t.reduce((G,R)=>G+R.user_count,0),W=t.reduce((G,R)=>G+R.client_count,0),B=t.reduce((G,R)=>G+R.active_subscription_count,0),le=t.reduce((G,R)=>G+R.allocated_inventory_count,0);return n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading outlets..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(uT,{className:"w-8 h-8"}),"Outlet Management"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage outlets and operational metrics"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:D,disabled:a,className:"flex items-center gap-2 px-4 py-2 border border-brand-border text-brand-text rounded-md hover:bg-brand-bg disabled:opacity-50",title:"Refresh from database",children:[l.jsx(qz,{className:`w-5 h-5 ${a?"animate-spin":""}`}),"Refresh"]}),l.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark",children:[l.jsx(Bc,{className:"w-5 h-5"}),"Add Outlet"]})]})]}),o&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:o}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Outlets"}),l.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:te})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Clients"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:W})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Active Subscriptions"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:B})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Allocated Inventory"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:le})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Code"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"City"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Users"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Clients"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Subscriptions"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Inventory"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Status"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:t.map(G=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-3 px-4 font-medium",children:G.outlet_name}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:"font-mono text-sm bg-brand-bg px-2 py-1 rounded text-brand-text",children:G.outlet_code})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:G.city}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:G.user_count}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:G.client_count}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:G.active_subscription_count}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:G.allocated_inventory_count}),l.jsx("td",{className:"py-3 px-4",children:G.is_active?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-primary/20 text-brand-primary",children:"Active"}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx("button",{onClick:()=>{_(G),p(!0)},className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded",title:"Edit Outlet",children:l.jsx(a0,{className:"w-4 h-4"})}),G.is_active?l.jsx("button",{onClick:()=>ne(G,"deactivate"),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Deactivate Outlet",children:l.jsx(tp,{className:"w-4 h-4"})}):l.jsx("button",{onClick:()=>ne(G,"activate"),className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded",title:"Activate Outlet",children:l.jsx(tp,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>re(G),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Delete Outlet",children:l.jsx(c5,{className:"w-4 h-4"})})]})})]},G.outlet_id))})]})})}),l.jsx(_C,{isOpen:u,onClose:()=>d(!1),onSubmit:T,mode:"create"}),l.jsx(_C,{isOpen:f,onClose:()=>{p(!1),_(null)},onSubmit:O,outlet:v,mode:"edit"}),l.jsx(o_,{isOpen:h,onClose:()=>{y(!1),_(null),A("")},onConfirm:q,title:S==="activate"?"Activate Outlet":"Deactivate Outlet",message:S==="activate"?`Are you sure you want to activate ${v==null?void 0:v.outlet_name}?`:N?`${N}

Please resolve these issues before deactivating.`:`Are you sure you want to deactivate ${v==null?void 0:v.outlet_name}?

This outlet will no longer be accessible.`,confirmText:S==="activate"?"Activate":"Deactivate",variant:N?"warning":S==="activate"?"info":"danger"}),l.jsx(o_,{isOpen:g,onClose:()=>{x(!1),_(null),E("")},onConfirm:K,title:"Delete Outlet Permanently",message:I?`${I}

Please remove all linked data before deleting.`:`Are you sure you want to permanently delete ${v==null?void 0:v.outlet_name}?

This action cannot be undone.`,confirmText:"Delete",variant:I?"warning":"danger"})]})}function zpe(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null);b.useEffect(()=>{o()},[e]);async function o(){if(e!=null&&e.id)try{i(!0),s(null);const{data:d,error:f}=await ve.from("admin_role_permission_matrix").select("*").order("role").order("module");if(f)throw f;r(d||[])}catch(d){s(d instanceof Error?d.message:"Failed to load permission matrix")}finally{i(!1)}}const c=d=>{switch(d){case"admin":return"bg-brand-deep/20 text-brand-deep";case"manager":return"bg-brand-primary/20 text-brand-primary";case"accountant":return"bg-brand-primary/20 text-brand-primary";default:return"bg-brand-border/50 text-brand-text"}},u=d=>d.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading access matrix..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(fT,{className:"w-8 h-8"}),"Access Control Matrix"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Read-only permission matrix showing role-based access control"})]}),a&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:a}),l.jsxs("div",{className:"p-4 bg-brand-primary/10 border border-brand-primary/30 rounded",children:[l.jsx("h3",{className:"font-semibold text-brand-text mb-2",children:" About This Matrix"}),l.jsxs("ul",{className:"text-sm text-brand-text space-y-1 list-disc list-inside",children:[l.jsx("li",{children:"This matrix reflects the actual enforced permissions in the system"}),l.jsx("li",{children:"Permissions are hardcoded and cannot be edited"}),l.jsxs("li",{children:[l.jsx("strong",{children:"Manager"})," permissions are further restricted to assigned outlets only"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Accountant"})," has read-only access across all modules"]})]})]}),["admin","manager","accountant"].map(d=>{const f=t.filter(p=>p.role===d);return l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:[l.jsxs("div",{className:"p-4 bg-brand-bg border-b border-brand-border",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(d)}`,children:d.toUpperCase()}),d==="manager"&&l.jsx("span",{className:"ml-3 text-sm text-brand-text/70",children:"(Outlet-scoped access)"}),d==="accountant"&&l.jsx("span",{className:"ml-3 text-sm text-brand-text/70",children:"(Read-only across all outlets)"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-4 font-medium w-1/3",children:"Module"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"View"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"Create"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"Edit"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"Delete"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map((p,h)=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-2 px-4 font-medium",children:u(p.module)}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_view?l.jsx(Yf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_create?l.jsx(Yf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_edit?l.jsx(Yf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_delete?l.jsx(Yf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})})]},h))})]})})]},d)}),l.jsxs("div",{className:"bg-brand-bg p-4 rounded-lg border border-brand-border",children:[l.jsx("h3",{className:"font-semibold mb-3",children:"Legend"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Yf,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{children:"Permission granted"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xs,{className:"w-5 h-5 text-red-400"}),l.jsx("span",{children:"Permission denied"})]})]})]})]})}async function OS(e){const{data:t,error:r}=await ve.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(!t.is_active)throw new Error("User account is inactive");if(!["admin","manager","accountant"].includes(t.role))throw new Error("Permission denied: Insufficient privileges to view activity logs");if(t.role==="manager"){const{data:n,error:i}=await ve.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(i)throw new Error(`Failed to fetch outlet assignments: ${i.message}`);const a=(n==null?void 0:n.map(s=>s.outlet_id))||[];return{role:t.role,outletIds:a}}return{role:t.role,outletIds:null}}async function TS(e,t={}){const r=await OS(e);let n=ve.from("admin_activity_log_unified").select("*").order("occurred_at",{ascending:!1}).limit(1e3);if(r.role==="manager"&&r.outletIds){if(r.outletIds.length===0)return[];n=n.in("outlet_id",r.outletIds)}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.user_id&&(n=n.eq("user_id",t.user_id)),t.module&&(n=n.eq("module",t.module)),t.action_type&&(n=n.eq("action_type",t.action_type)),t.date_from&&(n=n.gte("occurred_at",t.date_from)),t.date_to&&(n=n.lte("occurred_at",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(`Failed to fetch activity logs: ${a.message}`);return i||[]}async function Wpe(e,t={}){const n=(await TS(e,t)).map(i=>({Date:new Date(i.occurred_at).toLocaleDateString(),Time:new Date(i.occurred_at).toLocaleTimeString(),User:i.user_name||"System",Outlet:i.outlet_name,Module:i.module.toUpperCase(),Action:i.action_type.replace(/_/g," ").toUpperCase(),Description:i.description}));return df.unparse(n)}async function Hpe(e){const t=await OS(e);let r=ve.from("admin_activity_log_unified").select("module");if(t.role==="manager"&&t.outletIds){if(t.outletIds.length===0)return[];r=r.in("outlet_id",t.outletIds)}const{data:n,error:i}=await r;if(i)throw new Error(`Failed to fetch modules: ${i.message}`);return[...new Set((n==null?void 0:n.map(s=>s.module))||[])].sort()}async function Vpe(e,t){const r=await OS(e);let n=ve.from("admin_activity_log_unified").select("action_type");if(r.role==="manager"&&r.outletIds){if(r.outletIds.length===0)return[];n=n.in("outlet_id",r.outletIds)}t&&(n=n.eq("module",t));const{data:i,error:a}=await n;if(a)throw new Error(`Failed to fetch action types: ${a.message}`);return[...new Set((i==null?void 0:i.map(o=>o.action_type))||[])].sort()}async function Kpe(e,t={}){const r=await TS(e,t),n=new Set(r.map(a=>a.user_id).filter(Boolean)),i=new Set(r.map(a=>a.module));return{total_activities:r.length,unique_users:n.size,modules_active:i.size}}function Gpe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(null),[c,u]=b.useState(!1),[d,f]=b.useState({total_activities:0,unique_users:0,modules_active:0}),[p,h]=b.useState({outlet_id:"",user_id:"",module:"",action_type:"",date_from:"",date_to:""}),[y,g]=b.useState([]),[x,v]=b.useState([]),_=(e==null?void 0:e.role)||"",S=_==="admin"||_==="accountant",j=t||[];b.useEffect(()=>{e!=null&&e.id&&(N(),A())},[e,p]);async function N(){if(e!=null&&e.id)try{a(!0),o(null);const[D,T]=await Promise.all([TS(e.id,p),Kpe(e.id,p)]);n(D),f(T)}catch(D){o(D instanceof Error?D.message:"Failed to load activity logs")}finally{a(!1)}}async function A(){if(e!=null&&e.id)try{const[D,T]=await Promise.all([Hpe(e.id),Vpe(e.id,p.module)]);g(D),v(T)}catch(D){console.error("Failed to load filter options:",D)}}async function I(){if(e!=null&&e.id)try{u(!0);const D=await Wpe(e.id,p),T=new Blob([D],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),q=URL.createObjectURL(T);O.setAttribute("href",q),O.setAttribute("download",`activity-logs-${new Date().toISOString().split("T")[0]}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)}catch(D){o(D instanceof Error?D.message:"Failed to export CSV")}finally{u(!1)}}function E(){h({outlet_id:"",user_id:"",module:"",action_type:"",date_from:"",date_to:""})}const C=D=>{switch(D){case"inventory":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"payment":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"subscription":return"bg-brand-primary/20 text-brand-primary";case"event":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"invoice":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-brand-border/50 text-brand-text"}};return i&&r.length===0?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading activity logs..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(cT,{className:"w-8 h-8"}),"Activity Logs"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Unified audit trail across all system modules"})]}),l.jsxs("button",{onClick:I,disabled:r.length===0||c,className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:[l.jsx(Yn,{className:"w-5 h-5"}),c?"Exporting...":"Export CSV"]})]}),s&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:s}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Activities"}),l.jsx("p",{className:"text-2xl font-bold",children:d.total_activities})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Unique Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:d.unique_users})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Active Modules"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.modules_active})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[l.jsx(Dz,{className:"w-5 h-5"}),"Filters"]}),l.jsx("button",{onClick:E,className:"text-sm text-brand-primary hover:text-brand-primaryDark",children:"Clear Filters"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Outlet"}),l.jsxs("select",{value:p.outlet_id,onChange:D=>h({...p,outlet_id:D.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white",children:[l.jsx("option",{value:"",children:"All Outlets"}),j.map(D=>l.jsx("option",{value:D.id,children:D.name},D.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Module"}),l.jsxs("select",{value:p.module,onChange:D=>h({...p,module:D.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white",children:[l.jsx("option",{value:"",children:"All Modules"}),y.map(D=>l.jsx("option",{value:D,children:D.toUpperCase()},D))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Action Type"}),l.jsxs("select",{value:p.action_type,onChange:D=>h({...p,action_type:D.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white",children:[l.jsx("option",{value:"",children:"All Actions"}),x.map(D=>l.jsx("option",{value:D,children:D.replace(/_/g," ").toUpperCase()},D))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"From Date"}),l.jsx("input",{type:"date",value:p.date_from,onChange:D=>h({...p,date_from:D.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"To Date"}),l.jsx("input",{type:"date",value:p.date_to,onChange:D=>h({...p,date_to:D.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Date/Time"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"User"}),S&&l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Module"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Action"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Description"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:r.map((D,T)=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-3 px-4 text-sm",children:l.jsxs("div",{children:[l.jsx("p",{children:new Date(D.occurred_at).toLocaleDateString()}),l.jsx("p",{className:"text-xs text-brand-text/70",children:new Date(D.occurred_at).toLocaleTimeString()})]})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:D.user_name||"System"}),S&&l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:D.outlet_name}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C(D.module)}`,children:D.module.toUpperCase()})}),l.jsx("td",{className:"py-3 px-4 text-xs font-mono",children:D.action_type.replace(/_/g," ").toUpperCase()}),l.jsx("td",{className:"py-3 px-4 text-sm max-w-md truncate",children:D.description})]},T))})]})}),r.length===0&&!i&&l.jsx("div",{className:"text-center py-12 text-brand-text/70",children:"No activity logs found for the selected filters"})]})]})}async function NM(e){const{data:t,error:r}=await ve.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(t.role!=="admin")throw new Error("Permission denied: Admin access required");if(!t.is_active)throw new Error("Permission denied: User account is inactive")}async function Ype(e){await NM(e);const{data:t,error:r}=await ve.from("system_settings").select("*").order("key");if(r)throw new Error(`Failed to fetch settings: ${r.message}`);return t||[]}async function Jpe(e,t,r){await NM(e);const{data:n,error:i}=await ve.from("system_settings").select("value").eq("key",t).maybeSingle();if(i)throw new Error(`Failed to check setting: ${i.message}`);if(!n)throw new Error(`Setting '${t}' does not exist. Cannot update non-existent setting.`);if(["inventory_negative_stock_tolerance"].includes(t))throw new Error(`Setting '${t}' is locked and cannot be modified`);const s=n.value;console.log(`[SYSTEM SETTINGS] User ${e} changing '${t}' from`,s,"to",r);const{error:o}=await ve.from("system_settings").update({value:r,updated_at:new Date().toISOString(),updated_by:e}).eq("key",t);if(o)throw new Error(`Failed to update setting: ${o.message}`)}function Xpe({isOpen:e,onClose:t,onSubmit:r,setting:n}){const[i,a]=b.useState(""),[s,o]=b.useState(!1),[c,u]=b.useState(null);b.useEffect(()=>{if(e&&n){const h=typeof n.value=="string"?n.value:JSON.stringify(n.value);a(h)}u(null)},[e,n]);const d=async h=>{if(h.preventDefault(),!!n){if(u(null),!i){u("Value cannot be empty");return}try{o(!0),await r(n.key,i),t()}catch(y){u(y instanceof Error?y.message:"Failed to update setting")}finally{o(!1)}}};if(!e||!n)return null;const f=n.key==="inventory_negative_stock_tolerance",p=["invoice_auto_number","subscription_auto_renewal"].includes(n.key);return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white  rounded-lg shadow-xl max-w-lg w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b ",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Edit Setting"}),l.jsx("button",{onClick:t,disabled:s,className:"text-brand-text/60 hover:text-brand-text dark:hover:text-gray-300",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[c&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm",children:c}),f&&l.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded flex items-start gap-2",children:[l.jsx(q2,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[l.jsx("strong",{children:"Locked Setting:"})," This setting is locked for production safety and cannot be modified."]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Setting Key"}),l.jsx("input",{type:"text",value:n.key,disabled:!0,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-brand-bg text-brand-text/80"})]}),n.description&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),l.jsx("p",{className:"text-sm text-brand-text/70 p-3 bg-brand-bg rounded",children:n.description})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Current Value"}),l.jsx("input",{type:"text",value:typeof n.value=="string"?n.value:JSON.stringify(n.value),disabled:!0,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-brand-bg text-brand-text/80"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["New Value ",l.jsx("span",{className:"text-red-500",children:"*"})]}),p?l.jsxs("select",{value:i,onChange:h=>a(h.target.value),disabled:s||f,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg",required:!0,children:[l.jsx("option",{value:"true",children:"True (Enabled)"}),l.jsx("option",{value:"false",children:"False (Disabled)"})]}):l.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),disabled:s||f,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg",required:!0})]}),!f&&l.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded",children:l.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:[l.jsx("strong",{children:"Warning:"})," Changing system settings may affect application behavior. Proceed with caution."]})}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t ",children:[l.jsx("button",{type:"button",onClick:t,disabled:s,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:s||f,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:s?"Updating...":"Update Setting"})]})]})]})})}function Zpe(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,c]=b.useState(!1),[u,d]=b.useState(null);b.useEffect(()=>{f()},[e]);async function f(){if(e!=null&&e.id)try{i(!0),s(null);const _=await Ype(e.id);r(_)}catch(_){s(_ instanceof Error?_.message:"Failed to load settings")}finally{i(!1)}}async function p(_,S){e!=null&&e.id&&(await Jpe(e.id,_,S),await f())}function h(_){d(_),c(!0)}const y=_=>_==="inventory_negative_stock_tolerance",g=_=>typeof _=="string"?_==="true"?"Enabled":_==="false"?"Disabled":_:JSON.stringify(_),x=_=>_.startsWith("inventory_")?"Inventory":_.startsWith("payment_")?"Payments":_.startsWith("invoice_")?"Invoices":_.startsWith("subscription_")?"Subscriptions":"General",v=t.reduce((_,S)=>{const j=x(S.key);return _[j]||(_[j]=[]),_[j].push(S),_},{});return n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading settings..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(dT,{className:"w-8 h-8"}),"System Settings"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage system configuration and feature toggles"})]}),a&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:a}),l.jsx("div",{className:"p-4 bg-brand-primary/10 border border-brand-border rounded",children:l.jsxs("p",{className:"text-sm text-brand-text",children:[l.jsx("strong",{children:" Warning:"})," Changing system settings may affect application behavior. All changes are logged and can be audited. Locked settings cannot be modified for production safety."]})}),Object.entries(v).map(([_,S])=>l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:[l.jsx("div",{className:"p-4 bg-brand-bg border-b border-brand-border",children:l.jsx("h2",{className:"text-lg font-semibold",children:_})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/4",children:"Setting"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/3",children:"Description"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/6",children:"Current Value"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/6",children:"Last Updated"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium w-1/12",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:S.map(j=>{const N=y(j.key);return l.jsxs("tr",{className:`hover:bg-brand-primary/5 ${N?"bg-brand-bg":""}`,children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-mono text-sm font-medium",children:j.key}),N&&l.jsx("span",{title:"Locked setting",children:l.jsx($z,{className:"w-4 h-4 text-brand-text/60"})})]})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:j.description||"-"}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-primary/20 text-brand-primary",children:g(j.value)})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Tz,{className:"w-3 h-3"}),new Date(j.updated_at).toLocaleDateString()]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("div",{className:"flex items-center justify-end",children:l.jsx("button",{onClick:()=>h(j),disabled:N,className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:N?"Setting is locked":"Edit setting",children:l.jsx(a0,{className:"w-4 h-4"})})})})]},j.key)})})]})})]},_)),l.jsxs("div",{className:"bg-brand-primary/10 border border-brand-primary/30 rounded p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-text mb-2",children:" About System Settings"}),l.jsxs("ul",{className:"text-sm text-brand-text space-y-1 list-disc list-inside",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Locked Settings:"})," Cannot be modified for production safety and data integrity"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Audit Trail:"})," All changes are logged with user ID and timestamp"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Boolean Values:"}),' Use "true" or "false" for enable/disable toggles']}),l.jsxs("li",{children:[l.jsx("strong",{children:"Numeric Values:"})," Ensure values are within acceptable ranges"]})]})]}),l.jsx(Xpe,{isOpen:o,onClose:()=>{c(!1),d(null)},onSubmit:p,setting:u})]})}function Qpe(){return l.jsxs(O9,{children:[l.jsx(Dt,{element:l.jsx(Nz,{}),children:l.jsx(Dt,{path:"/login",element:l.jsx(Xz,{})})}),l.jsxs(Dt,{element:l.jsx(Zt,{children:l.jsx(Jz,{})}),children:[l.jsx(Dt,{path:"/dashboard",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(tW,{})})}),l.jsx(Dt,{path:"/clients",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(sW,{})})}),l.jsx(Dt,{path:"/clients/new",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(oW,{})})}),l.jsx(Dt,{path:"/clients/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(lW,{})})}),l.jsx(Dt,{path:"/clients/:id/edit",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(cW,{})})}),l.jsx(Dt,{path:"/subscriptions",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(gW,{})})}),l.jsx(Dt,{path:"/subscriptions/add",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(AW,{})})}),l.jsx(Dt,{path:"/subscriptions/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(PW,{})})}),l.jsx(Dt,{path:"/subscriptions/:id/edit",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(EW,{})})}),l.jsx(Dt,{path:"/events",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(TW,{})})}),l.jsx(Dt,{path:"/events/add",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(IW,{})})}),l.jsx(Dt,{path:"/events/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(DW,{})})}),l.jsx(Dt,{path:"/events/:id/edit",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(LW,{})})}),l.jsx(Dt,{path:"/invoices",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(BW,{})})}),l.jsx(Dt,{path:"/invoices/create",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(UW,{})})}),l.jsx(Dt,{path:"/invoices/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(AG,{})})}),l.jsx(Dt,{path:"/payments",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(EG,{})})}),l.jsx(Dt,{path:"/reports",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Khe,{})})}),l.jsx(Dt,{path:"/reports/gst-working",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(ope,{})})}),l.jsx(Dt,{path:"/inventory",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(ppe,{})})}),l.jsx(Dt,{path:"/inventory/movements",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(gpe,{})})}),l.jsx(Dt,{path:"/inventory/allocate",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(bpe,{})})}),l.jsx(Dt,{path:"/inventory/reports",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Npe,{})})}),l.jsx(Dt,{path:"/admin/users",element:l.jsx(Zt,{allowedRoles:["admin"],children:l.jsx(Dpe,{})})}),l.jsx(Dt,{path:"/admin/outlets",element:l.jsx(Zt,{allowedRoles:["admin"],children:l.jsx(qpe,{})})}),l.jsx(Dt,{path:"/admin/access-matrix",element:l.jsx(Zt,{allowedRoles:["admin","accountant"],children:l.jsx(zpe,{})})}),l.jsx(Dt,{path:"/admin/activity-logs",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Gpe,{})})}),l.jsx(Dt,{path:"/admin/settings",element:l.jsx(Zt,{allowedRoles:["admin"],children:l.jsx(Zpe,{})})})]}),l.jsx(Dt,{path:"/",element:l.jsx(A2,{to:"/dashboard",replace:!0})}),l.jsx(Dt,{path:"/unauthorized",element:l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-brand-text",children:"403"}),l.jsx("p",{className:"text-brand-text/70 mt-2",children:"You don't have permission to access this page"})]})})}),l.jsx(Dt,{path:"*",element:l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-brand-text",children:"404"}),l.jsx("p",{className:"text-brand-text/70 mt-2",children:"Page not found"})]})})})]})}function eme(){return l.jsx($9,{children:l.jsx(Sz,{children:l.jsx(Qpe,{})})})}Ib.createRoot(document.getElementById("root")).render(l.jsx(wp.StrictMode,{children:l.jsx(eme,{})}));export{er as _,fF as c,Ts as g};
