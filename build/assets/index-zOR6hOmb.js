var QM=Object.defineProperty;var eF=(e,t,r)=>t in e?QM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Vt=(e,t,r)=>eF(e,typeof t!="symbol"?t+"":t,r);function tF(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var rF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ts(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hC={exports:{}},Dy={},pC={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=Symbol.for("react.element"),nF=Symbol.for("react.portal"),iF=Symbol.for("react.fragment"),aF=Symbol.for("react.strict_mode"),sF=Symbol.for("react.profiler"),oF=Symbol.for("react.provider"),lF=Symbol.for("react.context"),cF=Symbol.for("react.forward_ref"),uF=Symbol.for("react.suspense"),dF=Symbol.for("react.memo"),fF=Symbol.for("react.lazy"),dN=Symbol.iterator;function hF(e){return e===null||typeof e!="object"?null:(e=dN&&e[dN]||e["@@iterator"],typeof e=="function"?e:null)}var mC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vC=Object.assign,gC={};function zd(e,t,r){this.props=e,this.context=t,this.refs=gC,this.updater=r||mC}zd.prototype.isReactComponent={};zd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yC(){}yC.prototype=zd.prototype;function a_(e,t,r){this.props=e,this.context=t,this.refs=gC,this.updater=r||mC}var s_=a_.prototype=new yC;s_.constructor=a_;vC(s_,zd.prototype);s_.isPureReactComponent=!0;var fN=Array.isArray,xC=Object.prototype.hasOwnProperty,o_={current:null},bC={key:!0,ref:!0,__self:!0,__source:!0};function wC(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)xC.call(t,n)&&!bC.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:xp,type:e,key:a,ref:s,props:i,_owner:o_.current}}function pF(e,t){return{$$typeof:xp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l_(e){return typeof e=="object"&&e!==null&&e.$$typeof===xp}function mF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var hN=/\/+/g;function Zx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mF(""+e.key):t.toString(36)}function Tv(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case xp:case nF:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+Zx(s,0):n,fN(i)?(r="",e!=null&&(r=e.replace(hN,"$&/")+"/"),Tv(i,t,r,"",function(u){return u})):i!=null&&(l_(i)&&(i=pF(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(hN,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",fN(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Zx(a,o);s+=Tv(a,t,r,c,i)}else if(c=hF(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Zx(a,o++),s+=Tv(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Mm(e,t,r){if(e==null)return e;var n=[],i=0;return Tv(e,n,"","",function(a){return t.call(r,a,i++)}),n}function vF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xi={current:null},Iv={transition:null},gF={ReactCurrentDispatcher:xi,ReactCurrentBatchConfig:Iv,ReactCurrentOwner:o_};function _C(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:Mm,forEach:function(e,t,r){Mm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mm(e,function(){t++}),t},toArray:function(e){return Mm(e,function(t){return t})||[]},only:function(e){if(!l_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tt.Component=zd;Tt.Fragment=iF;Tt.Profiler=sF;Tt.PureComponent=a_;Tt.StrictMode=aF;Tt.Suspense=uF;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gF;Tt.act=_C;Tt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vC({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=o_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)xC.call(t,c)&&!bC.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:xp,type:e.type,key:i,ref:a,props:n,_owner:s}};Tt.createContext=function(e){return e={$$typeof:lF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oF,_context:e},e.Consumer=e};Tt.createElement=wC;Tt.createFactory=function(e){var t=wC.bind(null,e);return t.type=e,t};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(e){return{$$typeof:cF,render:e}};Tt.isValidElement=l_;Tt.lazy=function(e){return{$$typeof:fF,_payload:{_status:-1,_result:e},_init:vF}};Tt.memo=function(e,t){return{$$typeof:dF,type:e,compare:t===void 0?null:t}};Tt.startTransition=function(e){var t=Iv.transition;Iv.transition={};try{e()}finally{Iv.transition=t}};Tt.unstable_act=_C;Tt.useCallback=function(e,t){return xi.current.useCallback(e,t)};Tt.useContext=function(e){return xi.current.useContext(e)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(e){return xi.current.useDeferredValue(e)};Tt.useEffect=function(e,t){return xi.current.useEffect(e,t)};Tt.useId=function(){return xi.current.useId()};Tt.useImperativeHandle=function(e,t,r){return xi.current.useImperativeHandle(e,t,r)};Tt.useInsertionEffect=function(e,t){return xi.current.useInsertionEffect(e,t)};Tt.useLayoutEffect=function(e,t){return xi.current.useLayoutEffect(e,t)};Tt.useMemo=function(e,t){return xi.current.useMemo(e,t)};Tt.useReducer=function(e,t,r){return xi.current.useReducer(e,t,r)};Tt.useRef=function(e){return xi.current.useRef(e)};Tt.useState=function(e){return xi.current.useState(e)};Tt.useSyncExternalStore=function(e,t,r){return xi.current.useSyncExternalStore(e,t,r)};Tt.useTransition=function(){return xi.current.useTransition()};Tt.version="18.3.1";pC.exports=Tt;var b=pC.exports;const bp=Ts(b),jC=tF({__proto__:null,default:bp},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yF=b,xF=Symbol.for("react.element"),bF=Symbol.for("react.fragment"),wF=Object.prototype.hasOwnProperty,_F=yF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jF={key:!0,ref:!0,__self:!0,__source:!0};function SC(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)wF.call(t,n)&&!jF.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:xF,type:e,key:a,ref:s,props:i,_owner:_F.current}}Dy.Fragment=bF;Dy.jsx=SC;Dy.jsxs=SC;hC.exports=Dy;var l=hC.exports,Cb={},NC={exports:{}},ea={},kC={exports:{}},AC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,Y){var fe=q.length;q.push(Y);e:for(;0<fe;){var te=fe-1>>>1,R=q[te];if(0<i(R,Y))q[te]=Y,q[fe]=R,fe=te;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var Y=q[0],fe=q.pop();if(fe!==Y){q[0]=fe;e:for(var te=0,R=q.length,z=R>>>1;te<z;){var G=2*(te+1)-1,re=q[G],ae=G+1,ce=q[ae];if(0>i(re,fe))ae<R&&0>i(ce,re)?(q[te]=ce,q[ae]=fe,te=ae):(q[te]=re,q[G]=fe,te=G);else if(ae<R&&0>i(ce,fe))q[te]=ce,q[ae]=fe,te=ae;else break e}}return Y}function i(q,Y){var fe=q.sortIndex-Y.sortIndex;return fe!==0?fe:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,p=3,h=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(q){for(var Y=r(u);Y!==null;){if(Y.callback===null)n(u);else if(Y.startTime<=q)n(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=r(u)}}function j(q){if(v=!1,S(q),!y)if(r(c)!==null)y=!0,ne(A);else{var Y=r(u);Y!==null&&ee(j,Y.startTime-q)}}function A(q,Y){y=!1,v&&(v=!1,g(E),E=-1),h=!0;var fe=p;try{for(S(Y),f=r(c);f!==null&&(!(f.expirationTime>Y)||q&&!I());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var R=te(f.expirationTime<=Y);Y=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(c)&&n(c),S(Y)}else n(c);f=r(c)}if(f!==null)var z=!0;else{var G=r(u);G!==null&&ee(j,G.startTime-Y),z=!1}return z}finally{f=null,p=fe,h=!1}}var N=!1,D=null,E=-1,C=5,L=-1;function I(){return!(e.unstable_now()-L<C)}function O(){if(D!==null){var q=e.unstable_now();L=q;var Y=!0;try{Y=D(!0,q)}finally{Y?U():(N=!1,D=null)}}else N=!1}var U;if(typeof _=="function")U=function(){_(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ie=V.port2;V.port1.onmessage=O,U=function(){ie.postMessage(null)}}else U=function(){x(O,0)};function ne(q){D=q,N||(N=!0,U())}function ee(q,Y){E=x(function(){q(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){y||h||(y=!0,ne(A))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var fe=p;p=Y;try{return q()}finally{p=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var fe=p;p=q;try{return Y()}finally{p=fe}},e.unstable_scheduleCallback=function(q,Y,fe){var te=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?te+fe:te):fe=te,q){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=fe+R,q={id:d++,callback:Y,priorityLevel:q,startTime:fe,expirationTime:R,sortIndex:-1},fe>te?(q.sortIndex=fe,t(u,q),r(c)===null&&q===r(u)&&(v?(g(E),E=-1):v=!0,ee(j,fe-te))):(q.sortIndex=R,t(c,q),y||h||(y=!0,ne(A))),q},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(q){var Y=p;return function(){var fe=p;p=Y;try{return q.apply(this,arguments)}finally{p=fe}}}})(AC);kC.exports=AC;var SF=kC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NF=b,Xi=SF;function Re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EC=new Set,Ph={};function iu(e,t){kd(e,t),kd(e+"Capture",t)}function kd(e,t){for(Ph[e]=t,e=0;e<t.length;e++)EC.add(t[e])}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ob=Object.prototype.hasOwnProperty,kF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pN={},mN={};function AF(e){return Ob.call(mN,e)?!0:Ob.call(pN,e)?!1:kF.test(e)?mN[e]=!0:(pN[e]=!0,!1)}function EF(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function PF(e,t,r,n){if(t===null||typeof t>"u"||EF(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bi(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new bi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new bi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new bi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new bi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new bi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new bi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new bi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new bi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new bi(e,5,!1,e.toLowerCase(),null,!1,!1)});var c_=/[\-:]([a-z])/g;function u_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(c_,u_);Kn[t]=new bi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(c_,u_);Kn[t]=new bi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(c_,u_);Kn[t]=new bi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new bi(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new bi(e,1,!1,e.toLowerCase(),null,!0,!0)});function d_(e,t,r,n){var i=Kn.hasOwnProperty(t)?Kn[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PF(t,r,i,n)&&(r=null),n||i===null?AF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Eo=NF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fm=Symbol.for("react.element"),Ju=Symbol.for("react.portal"),Xu=Symbol.for("react.fragment"),f_=Symbol.for("react.strict_mode"),Tb=Symbol.for("react.profiler"),PC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),Ib=Symbol.for("react.suspense"),Lb=Symbol.for("react.suspense_list"),p_=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),OC=Symbol.for("react.offscreen"),vN=Symbol.iterator;function Bf(e){return e===null||typeof e!="object"?null:(e=vN&&e[vN]||e["@@iterator"],typeof e=="function"?e:null)}var Tr=Object.assign,Qx;function sh(e){if(Qx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Qx=t&&t[1]||""}return`
`+Qx+e}var e1=!1;function t1(e,t){if(!e||e1)return"";e1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{e1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sh(e):""}function CF(e){switch(e.tag){case 5:return sh(e.type);case 16:return sh("Lazy");case 13:return sh("Suspense");case 19:return sh("SuspenseList");case 0:case 2:case 15:return e=t1(e.type,!1),e;case 11:return e=t1(e.type.render,!1),e;case 1:return e=t1(e.type,!0),e;default:return""}}function Db(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xu:return"Fragment";case Ju:return"Portal";case Tb:return"Profiler";case f_:return"StrictMode";case Ib:return"Suspense";case Lb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CC:return(e.displayName||"Context")+".Consumer";case PC:return(e._context.displayName||"Context")+".Provider";case h_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p_:return t=e.displayName||null,t!==null?t:Db(e.type)||"Memo";case nl:t=e._payload,e=e._init;try{return Db(e(t))}catch{}}return null}function OF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Db(t);case 8:return t===f_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function El(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function TC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TF(e){var t=TC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bm(e){e._valueTracker||(e._valueTracker=TF(e))}function IC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=TC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function rg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rb(e,t){var r=t.checked;return Tr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function gN(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=El(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function LC(e,t){t=t.checked,t!=null&&d_(e,"checked",t,!1)}function Mb(e,t){LC(e,t);var r=El(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fb(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fb(e,t.type,El(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yN(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fb(e,t,r){(t!=="number"||rg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var oh=Array.isArray;function fd(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+El(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Bb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Tr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xN(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Re(92));if(oh(r)){if(1<r.length)throw Error(Re(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:El(r)}}function DC(e,t){var r=El(t.value),n=El(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function bN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function RC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $b(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?RC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $m,MC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($m=$m||document.createElement("div"),$m.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$m.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ch(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IF=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(e){IF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ph[t]=ph[e]})});function FC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ph.hasOwnProperty(e)&&ph[e]?(""+t).trim():t+"px"}function BC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=FC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var LF=Tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ub(e,t){if(t){if(LF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function zb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qb=null;function m_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wb=null,hd=null,pd=null;function wN(e){if(e=jp(e)){if(typeof Wb!="function")throw Error(Re(280));var t=e.stateNode;t&&(t=$y(t),Wb(e.stateNode,e.type,t))}}function $C(e){hd?pd?pd.push(e):pd=[e]:hd=e}function UC(){if(hd){var e=hd,t=pd;if(pd=hd=null,wN(e),t)for(e=0;e<t.length;e++)wN(t[e])}}function zC(e,t){return e(t)}function qC(){}var r1=!1;function WC(e,t,r){if(r1)return e(t,r);r1=!0;try{return zC(e,t,r)}finally{r1=!1,(hd!==null||pd!==null)&&(qC(),UC())}}function Oh(e,t){var r=e.stateNode;if(r===null)return null;var n=$y(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Re(231,t,typeof r));return r}var Hb=!1;if(vo)try{var $f={};Object.defineProperty($f,"passive",{get:function(){Hb=!0}}),window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch{Hb=!1}function DF(e,t,r,n,i,a,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var mh=!1,ng=null,ig=!1,Vb=null,RF={onError:function(e){mh=!0,ng=e}};function MF(e,t,r,n,i,a,s,o,c){mh=!1,ng=null,DF.apply(RF,arguments)}function FF(e,t,r,n,i,a,s,o,c){if(MF.apply(this,arguments),mh){if(mh){var u=ng;mh=!1,ng=null}else throw Error(Re(198));ig||(ig=!0,Vb=u)}}function au(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function HC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _N(e){if(au(e)!==e)throw Error(Re(188))}function BF(e){var t=e.alternate;if(!t){if(t=au(e),t===null)throw Error(Re(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return _N(i),e;if(a===n)return _N(i),t;a=a.sibling}throw Error(Re(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(Re(189))}}if(r.alternate!==n)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?e:t}function VC(e){return e=BF(e),e!==null?KC(e):null}function KC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=KC(e);if(t!==null)return t;e=e.sibling}return null}var GC=Xi.unstable_scheduleCallback,jN=Xi.unstable_cancelCallback,$F=Xi.unstable_shouldYield,UF=Xi.unstable_requestPaint,Jr=Xi.unstable_now,zF=Xi.unstable_getCurrentPriorityLevel,v_=Xi.unstable_ImmediatePriority,YC=Xi.unstable_UserBlockingPriority,ag=Xi.unstable_NormalPriority,qF=Xi.unstable_LowPriority,JC=Xi.unstable_IdlePriority,Ry=null,js=null;function WF(e){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(Ry,e,void 0,(e.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:KF,HF=Math.log,VF=Math.LN2;function KF(e){return e>>>=0,e===0?32:31-(HF(e)/VF|0)|0}var Um=64,zm=4194304;function lh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sg(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=lh(o):(a&=s,a!==0&&(n=lh(a)))}else s=r&~i,s!==0?n=lh(s):a!==0&&(n=lh(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ha(t),i=1<<r,n|=e[r],t&=~i;return n}function GF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YF(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Ha(a),o=1<<s,c=i[s];c===-1?(!(o&r)||o&n)&&(i[s]=GF(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Kb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XC(){var e=Um;return Um<<=1,!(Um&4194240)&&(Um=64),e}function n1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ha(t),e[t]=r}function JF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ha(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function g_(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ha(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var tr=0;function ZC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QC,y_,eO,tO,rO,Gb=!1,qm=[],gl=null,yl=null,xl=null,Th=new Map,Ih=new Map,ll=[],XF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SN(e,t){switch(e){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":Th.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(t.pointerId)}}function Uf(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=jp(t),t!==null&&y_(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ZF(e,t,r,n,i){switch(t){case"focusin":return gl=Uf(gl,e,t,r,n,i),!0;case"dragenter":return yl=Uf(yl,e,t,r,n,i),!0;case"mouseover":return xl=Uf(xl,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Th.set(a,Uf(Th.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Ih.set(a,Uf(Ih.get(a)||null,e,t,r,n,i)),!0}return!1}function nO(e){var t=wc(e.target);if(t!==null){var r=au(t);if(r!==null){if(t=r.tag,t===13){if(t=HC(r),t!==null){e.blockedOn=t,rO(e.priority,function(){eO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qb=n,r.target.dispatchEvent(n),qb=null}else return t=jp(r),t!==null&&y_(t),e.blockedOn=r,!1;t.shift()}return!0}function NN(e,t,r){Lv(e)&&r.delete(t)}function QF(){Gb=!1,gl!==null&&Lv(gl)&&(gl=null),yl!==null&&Lv(yl)&&(yl=null),xl!==null&&Lv(xl)&&(xl=null),Th.forEach(NN),Ih.forEach(NN)}function zf(e,t){e.blockedOn===t&&(e.blockedOn=null,Gb||(Gb=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,QF)))}function Lh(e){function t(i){return zf(i,e)}if(0<qm.length){zf(qm[0],e);for(var r=1;r<qm.length;r++){var n=qm[r];n.blockedOn===e&&(n.blockedOn=null)}}for(gl!==null&&zf(gl,e),yl!==null&&zf(yl,e),xl!==null&&zf(xl,e),Th.forEach(t),Ih.forEach(t),r=0;r<ll.length;r++)n=ll[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ll.length&&(r=ll[0],r.blockedOn===null);)nO(r),r.blockedOn===null&&ll.shift()}var md=Eo.ReactCurrentBatchConfig,og=!0;function eB(e,t,r,n){var i=tr,a=md.transition;md.transition=null;try{tr=1,x_(e,t,r,n)}finally{tr=i,md.transition=a}}function tB(e,t,r,n){var i=tr,a=md.transition;md.transition=null;try{tr=4,x_(e,t,r,n)}finally{tr=i,md.transition=a}}function x_(e,t,r,n){if(og){var i=Yb(e,t,r,n);if(i===null)h1(e,t,n,lg,r),SN(e,n);else if(ZF(i,e,t,r,n))n.stopPropagation();else if(SN(e,n),t&4&&-1<XF.indexOf(e)){for(;i!==null;){var a=jp(i);if(a!==null&&QC(a),a=Yb(e,t,r,n),a===null&&h1(e,t,n,lg,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else h1(e,t,n,null,r)}}var lg=null;function Yb(e,t,r,n){if(lg=null,e=m_(n),e=wc(e),e!==null)if(t=au(e),t===null)e=null;else if(r=t.tag,r===13){if(e=HC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lg=e,null}function iO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zF()){case v_:return 1;case YC:return 4;case ag:case qF:return 16;case JC:return 536870912;default:return 16}default:return 16}}var fl=null,b_=null,Dv=null;function aO(){if(Dv)return Dv;var e,t=b_,r=t.length,n,i="value"in fl?fl.value:fl.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return Dv=i.slice(e,1<n?1-n:void 0)}function Rv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wm(){return!0}function kN(){return!1}function ta(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Wm:kN,this.isPropagationStopped=kN,this}return Tr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wm)},persist:function(){},isPersistent:Wm}),t}var qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w_=ta(qd),_p=Tr({},qd,{view:0,detail:0}),rB=ta(_p),i1,a1,qf,My=Tr({},_p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:__,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qf&&(qf&&e.type==="mousemove"?(i1=e.screenX-qf.screenX,a1=e.screenY-qf.screenY):a1=i1=0,qf=e),i1)},movementY:function(e){return"movementY"in e?e.movementY:a1}}),AN=ta(My),nB=Tr({},My,{dataTransfer:0}),iB=ta(nB),aB=Tr({},_p,{relatedTarget:0}),s1=ta(aB),sB=Tr({},qd,{animationName:0,elapsedTime:0,pseudoElement:0}),oB=ta(sB),lB=Tr({},qd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cB=ta(lB),uB=Tr({},qd,{data:0}),EN=ta(uB),dB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pB(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hB[e])?!!t[e]:!1}function __(){return pB}var mB=Tr({},_p,{key:function(e){if(e.key){var t=dB[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fB[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:__,charCode:function(e){return e.type==="keypress"?Rv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vB=ta(mB),gB=Tr({},My,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PN=ta(gB),yB=Tr({},_p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:__}),xB=ta(yB),bB=Tr({},qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),wB=ta(bB),_B=Tr({},My,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jB=ta(_B),SB=[9,13,27,32],j_=vo&&"CompositionEvent"in window,vh=null;vo&&"documentMode"in document&&(vh=document.documentMode);var NB=vo&&"TextEvent"in window&&!vh,sO=vo&&(!j_||vh&&8<vh&&11>=vh),CN=" ",ON=!1;function oO(e,t){switch(e){case"keyup":return SB.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zu=!1;function kB(e,t){switch(e){case"compositionend":return lO(t);case"keypress":return t.which!==32?null:(ON=!0,CN);case"textInput":return e=t.data,e===CN&&ON?null:e;default:return null}}function AB(e,t){if(Zu)return e==="compositionend"||!j_&&oO(e,t)?(e=aO(),Dv=b_=fl=null,Zu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sO&&t.locale!=="ko"?null:t.data;default:return null}}var EB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!EB[e.type]:t==="textarea"}function cO(e,t,r,n){$C(n),t=cg(t,"onChange"),0<t.length&&(r=new w_("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var gh=null,Dh=null;function PB(e){bO(e,0)}function Fy(e){var t=td(e);if(IC(t))return e}function CB(e,t){if(e==="change")return t}var uO=!1;if(vo){var o1;if(vo){var l1="oninput"in document;if(!l1){var IN=document.createElement("div");IN.setAttribute("oninput","return;"),l1=typeof IN.oninput=="function"}o1=l1}else o1=!1;uO=o1&&(!document.documentMode||9<document.documentMode)}function LN(){gh&&(gh.detachEvent("onpropertychange",dO),Dh=gh=null)}function dO(e){if(e.propertyName==="value"&&Fy(Dh)){var t=[];cO(t,Dh,e,m_(e)),WC(PB,t)}}function OB(e,t,r){e==="focusin"?(LN(),gh=t,Dh=r,gh.attachEvent("onpropertychange",dO)):e==="focusout"&&LN()}function TB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fy(Dh)}function IB(e,t){if(e==="click")return Fy(t)}function LB(e,t){if(e==="input"||e==="change")return Fy(t)}function DB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ga=typeof Object.is=="function"?Object.is:DB;function Rh(e,t){if(Ga(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ob.call(t,i)||!Ga(e[i],t[i]))return!1}return!0}function DN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function RN(e,t){var r=DN(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DN(r)}}function fO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hO(){for(var e=window,t=rg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=rg(e.document)}return t}function S_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RB(e){var t=hO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fO(r.ownerDocument.documentElement,r)){if(n!==null&&S_(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=RN(r,a);var s=RN(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var MB=vo&&"documentMode"in document&&11>=document.documentMode,Qu=null,Jb=null,yh=null,Xb=!1;function MN(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xb||Qu==null||Qu!==rg(n)||(n=Qu,"selectionStart"in n&&S_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yh&&Rh(yh,n)||(yh=n,n=cg(Jb,"onSelect"),0<n.length&&(t=new w_("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Qu)))}function Hm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ed={animationend:Hm("Animation","AnimationEnd"),animationiteration:Hm("Animation","AnimationIteration"),animationstart:Hm("Animation","AnimationStart"),transitionend:Hm("Transition","TransitionEnd")},c1={},pO={};vo&&(pO=document.createElement("div").style,"AnimationEvent"in window||(delete ed.animationend.animation,delete ed.animationiteration.animation,delete ed.animationstart.animation),"TransitionEvent"in window||delete ed.transitionend.transition);function By(e){if(c1[e])return c1[e];if(!ed[e])return e;var t=ed[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in pO)return c1[e]=t[r];return e}var mO=By("animationend"),vO=By("animationiteration"),gO=By("animationstart"),yO=By("transitionend"),xO=new Map,FN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dl(e,t){xO.set(e,t),iu(t,[e])}for(var u1=0;u1<FN.length;u1++){var d1=FN[u1],FB=d1.toLowerCase(),BB=d1[0].toUpperCase()+d1.slice(1);Dl(FB,"on"+BB)}Dl(mO,"onAnimationEnd");Dl(vO,"onAnimationIteration");Dl(gO,"onAnimationStart");Dl("dblclick","onDoubleClick");Dl("focusin","onFocus");Dl("focusout","onBlur");Dl(yO,"onTransitionEnd");kd("onMouseEnter",["mouseout","mouseover"]);kd("onMouseLeave",["mouseout","mouseover"]);kd("onPointerEnter",["pointerout","pointerover"]);kd("onPointerLeave",["pointerout","pointerover"]);iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$B=new Set("cancel close invalid load scroll toggle".split(" ").concat(ch));function BN(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,FF(n,t,void 0,e),e.currentTarget=null}function bO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;BN(i,o,u),a=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;BN(i,o,u),a=c}}}if(ig)throw e=Vb,ig=!1,Vb=null,e}function gr(e,t){var r=t[r2];r===void 0&&(r=t[r2]=new Set);var n=e+"__bubble";r.has(n)||(wO(t,e,2,!1),r.add(n))}function f1(e,t,r){var n=0;t&&(n|=4),wO(r,e,n,t)}var Vm="_reactListening"+Math.random().toString(36).slice(2);function Mh(e){if(!e[Vm]){e[Vm]=!0,EC.forEach(function(r){r!=="selectionchange"&&($B.has(r)||f1(r,!1,e),f1(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vm]||(t[Vm]=!0,f1("selectionchange",!1,t))}}function wO(e,t,r,n){switch(iO(t)){case 1:var i=eB;break;case 4:i=tB;break;default:i=x_}r=i.bind(null,t,r,e),i=void 0,!Hb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function h1(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;o!==null;){if(s=wc(o),s===null)return;if(c=s.tag,c===5||c===6){n=a=s;continue e}o=o.parentNode}}n=n.return}WC(function(){var u=a,d=m_(r),f=[];e:{var p=xO.get(e);if(p!==void 0){var h=w_,y=e;switch(e){case"keypress":if(Rv(r)===0)break e;case"keydown":case"keyup":h=vB;break;case"focusin":y="focus",h=s1;break;case"focusout":y="blur",h=s1;break;case"beforeblur":case"afterblur":h=s1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=AN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=iB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=xB;break;case mO:case vO:case gO:h=oB;break;case yO:h=wB;break;case"scroll":h=rB;break;case"wheel":h=jB;break;case"copy":case"cut":case"paste":h=cB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=PN}var v=(t&4)!==0,x=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var _=u,S;_!==null;){S=_;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,g!==null&&(j=Oh(_,g),j!=null&&v.push(Fh(_,j,S)))),x)break;_=_.return}0<v.length&&(p=new h(p,y,null,r,d),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==qb&&(y=r.relatedTarget||r.fromElement)&&(wc(y)||y[go]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(y=r.relatedTarget||r.toElement,h=u,y=y?wc(y):null,y!==null&&(x=au(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=u),h!==y)){if(v=AN,j="onMouseLeave",g="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(v=PN,j="onPointerLeave",g="onPointerEnter",_="pointer"),x=h==null?p:td(h),S=y==null?p:td(y),p=new v(j,_+"leave",h,r,d),p.target=x,p.relatedTarget=S,j=null,wc(d)===u&&(v=new v(g,_+"enter",y,r,d),v.target=S,v.relatedTarget=x,j=v),x=j,h&&y)t:{for(v=h,g=y,_=0,S=v;S;S=Cu(S))_++;for(S=0,j=g;j;j=Cu(j))S++;for(;0<_-S;)v=Cu(v),_--;for(;0<S-_;)g=Cu(g),S--;for(;_--;){if(v===g||g!==null&&v===g.alternate)break t;v=Cu(v),g=Cu(g)}v=null}else v=null;h!==null&&$N(f,p,h,v,!1),y!==null&&x!==null&&$N(f,x,y,v,!0)}}e:{if(p=u?td(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var A=CB;else if(TN(p))if(uO)A=LB;else{A=TB;var N=OB}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=IB);if(A&&(A=A(e,u))){cO(f,A,r,d);break e}N&&N(e,p,u),e==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Fb(p,"number",p.value)}switch(N=u?td(u):window,e){case"focusin":(TN(N)||N.contentEditable==="true")&&(Qu=N,Jb=u,yh=null);break;case"focusout":yh=Jb=Qu=null;break;case"mousedown":Xb=!0;break;case"contextmenu":case"mouseup":case"dragend":Xb=!1,MN(f,r,d);break;case"selectionchange":if(MB)break;case"keydown":case"keyup":MN(f,r,d)}var D;if(j_)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zu?oO(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(sO&&r.locale!=="ko"&&(Zu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zu&&(D=aO()):(fl=d,b_="value"in fl?fl.value:fl.textContent,Zu=!0)),N=cg(u,E),0<N.length&&(E=new EN(E,e,null,r,d),f.push({event:E,listeners:N}),D?E.data=D:(D=lO(r),D!==null&&(E.data=D)))),(D=NB?kB(e,r):AB(e,r))&&(u=cg(u,"onBeforeInput"),0<u.length&&(d=new EN("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=D))}bO(f,t)})}function Fh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function cg(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Oh(e,r),a!=null&&n.unshift(Fh(e,a,i)),a=Oh(e,t),a!=null&&n.push(Fh(e,a,i))),e=e.return}return n}function Cu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $N(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=Oh(r,a),c!=null&&s.unshift(Fh(r,c,o))):i||(c=Oh(r,a),c!=null&&s.push(Fh(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var UB=/\r\n?/g,zB=/\u0000|\uFFFD/g;function UN(e){return(typeof e=="string"?e:""+e).replace(UB,`
`).replace(zB,"")}function Km(e,t,r){if(t=UN(t),UN(e)!==t&&r)throw Error(Re(425))}function ug(){}var Zb=null,Qb=null;function e2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var t2=typeof setTimeout=="function"?setTimeout:void 0,qB=typeof clearTimeout=="function"?clearTimeout:void 0,zN=typeof Promise=="function"?Promise:void 0,WB=typeof queueMicrotask=="function"?queueMicrotask:typeof zN<"u"?function(e){return zN.resolve(null).then(e).catch(HB)}:t2;function HB(e){setTimeout(function(){throw e})}function p1(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Lh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Lh(t)}function bl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Wd=Math.random().toString(36).slice(2),ys="__reactFiber$"+Wd,Bh="__reactProps$"+Wd,go="__reactContainer$"+Wd,r2="__reactEvents$"+Wd,VB="__reactListeners$"+Wd,KB="__reactHandles$"+Wd;function wc(e){var t=e[ys];if(t)return t;for(var r=e.parentNode;r;){if(t=r[go]||r[ys]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qN(e);e!==null;){if(r=e[ys])return r;e=qN(e)}return t}e=r,r=e.parentNode}return null}function jp(e){return e=e[ys]||e[go],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function td(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function $y(e){return e[Bh]||null}var n2=[],rd=-1;function Rl(e){return{current:e}}function br(e){0>rd||(e.current=n2[rd],n2[rd]=null,rd--)}function hr(e,t){rd++,n2[rd]=e.current,e.current=t}var Pl={},oi=Rl(Pl),Ei=Rl(!1),Dc=Pl;function Ad(e,t){var r=e.type.contextTypes;if(!r)return Pl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pi(e){return e=e.childContextTypes,e!=null}function dg(){br(Ei),br(oi)}function WN(e,t,r){if(oi.current!==Pl)throw Error(Re(168));hr(oi,t),hr(Ei,r)}function _O(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Re(108,OF(e)||"Unknown",i));return Tr({},r,n)}function fg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pl,Dc=oi.current,hr(oi,e),hr(Ei,Ei.current),!0}function HN(e,t,r){var n=e.stateNode;if(!n)throw Error(Re(169));r?(e=_O(e,t,Dc),n.__reactInternalMemoizedMergedChildContext=e,br(Ei),br(oi),hr(oi,e)):br(Ei),hr(Ei,r)}var no=null,Uy=!1,m1=!1;function jO(e){no===null?no=[e]:no.push(e)}function GB(e){Uy=!0,jO(e)}function Ml(){if(!m1&&no!==null){m1=!0;var e=0,t=tr;try{var r=no;for(tr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}no=null,Uy=!1}catch(i){throw no!==null&&(no=no.slice(e+1)),GC(v_,Ml),i}finally{tr=t,m1=!1}}return null}var nd=[],id=0,hg=null,pg=0,ma=[],va=0,Rc=null,oo=1,lo="";function dc(e,t){nd[id++]=pg,nd[id++]=hg,hg=e,pg=t}function SO(e,t,r){ma[va++]=oo,ma[va++]=lo,ma[va++]=Rc,Rc=e;var n=oo;e=lo;var i=32-Ha(n)-1;n&=~(1<<i),r+=1;var a=32-Ha(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,oo=1<<32-Ha(t)+i|r<<i|n,lo=a+e}else oo=1<<a|r<<i|n,lo=e}function N_(e){e.return!==null&&(dc(e,1),SO(e,1,0))}function k_(e){for(;e===hg;)hg=nd[--id],nd[id]=null,pg=nd[--id],nd[id]=null;for(;e===Rc;)Rc=ma[--va],ma[va]=null,lo=ma[--va],ma[va]=null,oo=ma[--va],ma[va]=null}var Yi=null,Vi=null,Ar=!1,Ua=null;function NO(e,t){var r=ga(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function VN(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yi=e,Vi=bl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yi=e,Vi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rc!==null?{id:oo,overflow:lo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ga(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Yi=e,Vi=null,!0):!1;default:return!1}}function i2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function a2(e){if(Ar){var t=Vi;if(t){var r=t;if(!VN(e,t)){if(i2(e))throw Error(Re(418));t=bl(r.nextSibling);var n=Yi;t&&VN(e,t)?NO(n,r):(e.flags=e.flags&-4097|2,Ar=!1,Yi=e)}}else{if(i2(e))throw Error(Re(418));e.flags=e.flags&-4097|2,Ar=!1,Yi=e}}}function KN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yi=e}function Gm(e){if(e!==Yi)return!1;if(!Ar)return KN(e),Ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!e2(e.type,e.memoizedProps)),t&&(t=Vi)){if(i2(e))throw kO(),Error(Re(418));for(;t;)NO(e,t),t=bl(t.nextSibling)}if(KN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Vi=bl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Vi=null}}else Vi=Yi?bl(e.stateNode.nextSibling):null;return!0}function kO(){for(var e=Vi;e;)e=bl(e.nextSibling)}function Ed(){Vi=Yi=null,Ar=!1}function A_(e){Ua===null?Ua=[e]:Ua.push(e)}var YB=Eo.ReactCurrentBatchConfig;function Wf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var n=r.stateNode}if(!n)throw Error(Re(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,e))}return e}function Ym(e,t){throw e=Object.prototype.toString.call(t),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function GN(e){var t=e._init;return t(e._payload)}function AO(e){function t(g,_){if(e){var S=g.deletions;S===null?(g.deletions=[_],g.flags|=16):S.push(_)}}function r(g,_){if(!e)return null;for(;_!==null;)t(g,_),_=_.sibling;return null}function n(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=Sl(g,_),g.index=0,g.sibling=null,g}function a(g,_,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<_?(g.flags|=2,_):S):(g.flags|=2,_)):(g.flags|=1048576,_)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,_,S,j){return _===null||_.tag!==6?(_=_1(S,g.mode,j),_.return=g,_):(_=i(_,S),_.return=g,_)}function c(g,_,S,j){var A=S.type;return A===Xu?d(g,_,S.props.children,j,S.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===nl&&GN(A)===_.type)?(j=i(_,S.props),j.ref=Wf(g,_,S),j.return=g,j):(j=qv(S.type,S.key,S.props,null,g.mode,j),j.ref=Wf(g,_,S),j.return=g,j)}function u(g,_,S,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=j1(S,g.mode,j),_.return=g,_):(_=i(_,S.children||[]),_.return=g,_)}function d(g,_,S,j,A){return _===null||_.tag!==7?(_=Cc(S,g.mode,j,A),_.return=g,_):(_=i(_,S),_.return=g,_)}function f(g,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_1(""+_,g.mode,S),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fm:return S=qv(_.type,_.key,_.props,null,g.mode,S),S.ref=Wf(g,null,_),S.return=g,S;case Ju:return _=j1(_,g.mode,S),_.return=g,_;case nl:var j=_._init;return f(g,j(_._payload),S)}if(oh(_)||Bf(_))return _=Cc(_,g.mode,S,null),_.return=g,_;Ym(g,_)}return null}function p(g,_,S,j){var A=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:o(g,_,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fm:return S.key===A?c(g,_,S,j):null;case Ju:return S.key===A?u(g,_,S,j):null;case nl:return A=S._init,p(g,_,A(S._payload),j)}if(oh(S)||Bf(S))return A!==null?null:d(g,_,S,j,null);Ym(g,S)}return null}function h(g,_,S,j,A){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(S)||null,o(_,g,""+j,A);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Fm:return g=g.get(j.key===null?S:j.key)||null,c(_,g,j,A);case Ju:return g=g.get(j.key===null?S:j.key)||null,u(_,g,j,A);case nl:var N=j._init;return h(g,_,S,N(j._payload),A)}if(oh(j)||Bf(j))return g=g.get(S)||null,d(_,g,j,A,null);Ym(_,j)}return null}function y(g,_,S,j){for(var A=null,N=null,D=_,E=_=0,C=null;D!==null&&E<S.length;E++){D.index>E?(C=D,D=null):C=D.sibling;var L=p(g,D,S[E],j);if(L===null){D===null&&(D=C);break}e&&D&&L.alternate===null&&t(g,D),_=a(L,_,E),N===null?A=L:N.sibling=L,N=L,D=C}if(E===S.length)return r(g,D),Ar&&dc(g,E),A;if(D===null){for(;E<S.length;E++)D=f(g,S[E],j),D!==null&&(_=a(D,_,E),N===null?A=D:N.sibling=D,N=D);return Ar&&dc(g,E),A}for(D=n(g,D);E<S.length;E++)C=h(D,g,E,S[E],j),C!==null&&(e&&C.alternate!==null&&D.delete(C.key===null?E:C.key),_=a(C,_,E),N===null?A=C:N.sibling=C,N=C);return e&&D.forEach(function(I){return t(g,I)}),Ar&&dc(g,E),A}function v(g,_,S,j){var A=Bf(S);if(typeof A!="function")throw Error(Re(150));if(S=A.call(S),S==null)throw Error(Re(151));for(var N=A=null,D=_,E=_=0,C=null,L=S.next();D!==null&&!L.done;E++,L=S.next()){D.index>E?(C=D,D=null):C=D.sibling;var I=p(g,D,L.value,j);if(I===null){D===null&&(D=C);break}e&&D&&I.alternate===null&&t(g,D),_=a(I,_,E),N===null?A=I:N.sibling=I,N=I,D=C}if(L.done)return r(g,D),Ar&&dc(g,E),A;if(D===null){for(;!L.done;E++,L=S.next())L=f(g,L.value,j),L!==null&&(_=a(L,_,E),N===null?A=L:N.sibling=L,N=L);return Ar&&dc(g,E),A}for(D=n(g,D);!L.done;E++,L=S.next())L=h(D,g,E,L.value,j),L!==null&&(e&&L.alternate!==null&&D.delete(L.key===null?E:L.key),_=a(L,_,E),N===null?A=L:N.sibling=L,N=L);return e&&D.forEach(function(O){return t(g,O)}),Ar&&dc(g,E),A}function x(g,_,S,j){if(typeof S=="object"&&S!==null&&S.type===Xu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Fm:e:{for(var A=S.key,N=_;N!==null;){if(N.key===A){if(A=S.type,A===Xu){if(N.tag===7){r(g,N.sibling),_=i(N,S.props.children),_.return=g,g=_;break e}}else if(N.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===nl&&GN(A)===N.type){r(g,N.sibling),_=i(N,S.props),_.ref=Wf(g,N,S),_.return=g,g=_;break e}r(g,N);break}else t(g,N);N=N.sibling}S.type===Xu?(_=Cc(S.props.children,g.mode,j,S.key),_.return=g,g=_):(j=qv(S.type,S.key,S.props,null,g.mode,j),j.ref=Wf(g,_,S),j.return=g,g=j)}return s(g);case Ju:e:{for(N=S.key;_!==null;){if(_.key===N)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(g,_.sibling),_=i(_,S.children||[]),_.return=g,g=_;break e}else{r(g,_);break}else t(g,_);_=_.sibling}_=j1(S,g.mode,j),_.return=g,g=_}return s(g);case nl:return N=S._init,x(g,_,N(S._payload),j)}if(oh(S))return y(g,_,S,j);if(Bf(S))return v(g,_,S,j);Ym(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(g,_.sibling),_=i(_,S),_.return=g,g=_):(r(g,_),_=_1(S,g.mode,j),_.return=g,g=_),s(g)):r(g,_)}return x}var Pd=AO(!0),EO=AO(!1),mg=Rl(null),vg=null,ad=null,E_=null;function P_(){E_=ad=vg=null}function C_(e){var t=mg.current;br(mg),e._currentValue=t}function s2(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vd(e,t){vg=e,E_=ad=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ni=!0),e.firstContext=null)}function ba(e){var t=e._currentValue;if(E_!==e)if(e={context:e,memoizedValue:t,next:null},ad===null){if(vg===null)throw Error(Re(308));ad=e,vg.dependencies={lanes:0,firstContext:e}}else ad=ad.next=e;return t}var _c=null;function O_(e){_c===null?_c=[e]:_c.push(e)}function PO(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,O_(t)):(r.next=i.next,i.next=r),t.interleaved=r,yo(e,n)}function yo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var il=!1;function T_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$t&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,yo(e,r)}return i=n.interleaved,i===null?(t.next=t,O_(n)):(t.next=i.next,i.next=t),n.interleaved=t,yo(e,r)}function Mv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,g_(e,r)}}function YN(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function gg(e,t,r,n){var i=e.updateQueue;il=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?a=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;s=0,d=u=c=null,o=a;do{var p=o.lane,h=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,v=o;switch(p=t,h=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(h,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(h,f,p):y,p==null)break e;f=Tr({},f,p);break e;case 2:il=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Fc|=s,e.lanes=s,e.memoizedState=f}}function JN(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Re(191,i));i.call(n)}}}var Sp={},Ss=Rl(Sp),$h=Rl(Sp),Uh=Rl(Sp);function jc(e){if(e===Sp)throw Error(Re(174));return e}function I_(e,t){switch(hr(Uh,t),hr($h,e),hr(Ss,Sp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$b(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$b(t,e)}br(Ss),hr(Ss,t)}function Cd(){br(Ss),br($h),br(Uh)}function OO(e){jc(Uh.current);var t=jc(Ss.current),r=$b(t,e.type);t!==r&&(hr($h,e),hr(Ss,r))}function L_(e){$h.current===e&&(br(Ss),br($h))}var Cr=Rl(0);function yg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var v1=[];function D_(){for(var e=0;e<v1.length;e++)v1[e]._workInProgressVersionPrimary=null;v1.length=0}var Fv=Eo.ReactCurrentDispatcher,g1=Eo.ReactCurrentBatchConfig,Mc=0,Or=null,yn=null,En=null,xg=!1,xh=!1,zh=0,JB=0;function Xn(){throw Error(Re(321))}function R_(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ga(e[r],t[r]))return!1;return!0}function M_(e,t,r,n,i,a){if(Mc=a,Or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fv.current=e===null||e.memoizedState===null?e$:t$,e=r(n,i),xh){a=0;do{if(xh=!1,zh=0,25<=a)throw Error(Re(301));a+=1,En=yn=null,t.updateQueue=null,Fv.current=r$,e=r(n,i)}while(xh)}if(Fv.current=bg,t=yn!==null&&yn.next!==null,Mc=0,En=yn=Or=null,xg=!1,t)throw Error(Re(300));return e}function F_(){var e=zh!==0;return zh=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Or.memoizedState=En=e:En=En.next=e,En}function wa(){if(yn===null){var e=Or.alternate;e=e!==null?e.memoizedState:null}else e=yn.next;var t=En===null?Or.memoizedState:En.next;if(t!==null)En=t,yn=e;else{if(e===null)throw Error(Re(310));yn=e,e={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},En===null?Or.memoizedState=En=e:En=En.next=e}return En}function qh(e,t){return typeof t=="function"?t(e):t}function y1(e){var t=wa(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=e;var n=yn,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,c=null,u=a;do{var d=u.lane;if((Mc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,Or.lanes|=d,Fc|=d}u=u.next}while(u!==null&&u!==a);c===null?s=n:c.next=o,Ga(n,t.memoizedState)||(Ni=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Or.lanes|=a,Fc|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function x1(e){var t=wa(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Ga(a,t.memoizedState)||(Ni=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function TO(){}function IO(e,t){var r=Or,n=wa(),i=t(),a=!Ga(n.memoizedState,i);if(a&&(n.memoizedState=i,Ni=!0),n=n.queue,B_(RO.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||En!==null&&En.memoizedState.tag&1){if(r.flags|=2048,Wh(9,DO.bind(null,r,n,i,t),void 0,null),On===null)throw Error(Re(349));Mc&30||LO(r,t,i)}return i}function LO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function DO(e,t,r,n){t.value=r,t.getSnapshot=n,MO(t)&&FO(e)}function RO(e,t,r){return r(function(){MO(t)&&FO(e)})}function MO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ga(e,r)}catch{return!0}}function FO(e){var t=yo(e,1);t!==null&&Va(t,e,1,-1)}function XN(e){var t=vs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:e},t.queue=e,e=e.dispatch=QB.bind(null,Or,e),[t.memoizedState,e]}function Wh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function BO(){return wa().memoizedState}function Bv(e,t,r,n){var i=vs();Or.flags|=e,i.memoizedState=Wh(1|t,r,void 0,n===void 0?null:n)}function zy(e,t,r,n){var i=wa();n=n===void 0?null:n;var a=void 0;if(yn!==null){var s=yn.memoizedState;if(a=s.destroy,n!==null&&R_(n,s.deps)){i.memoizedState=Wh(t,r,a,n);return}}Or.flags|=e,i.memoizedState=Wh(1|t,r,a,n)}function ZN(e,t){return Bv(8390656,8,e,t)}function B_(e,t){return zy(2048,8,e,t)}function $O(e,t){return zy(4,2,e,t)}function UO(e,t){return zy(4,4,e,t)}function zO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qO(e,t,r){return r=r!=null?r.concat([e]):null,zy(4,4,zO.bind(null,t,e),r)}function $_(){}function WO(e,t){var r=wa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&R_(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function HO(e,t){var r=wa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&R_(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function VO(e,t,r){return Mc&21?(Ga(r,t)||(r=XC(),Or.lanes|=r,Fc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ni=!0),e.memoizedState=r)}function XB(e,t){var r=tr;tr=r!==0&&4>r?r:4,e(!0);var n=g1.transition;g1.transition={};try{e(!1),t()}finally{tr=r,g1.transition=n}}function KO(){return wa().memoizedState}function ZB(e,t,r){var n=jl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},GO(e))YO(t,r);else if(r=PO(e,t,r,n),r!==null){var i=vi();Va(r,e,n,i),JO(r,t,n)}}function QB(e,t,r){var n=jl(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(GO(e))YO(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Ga(o,s)){var c=t.interleaved;c===null?(i.next=i,O_(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=PO(e,t,i,n),r!==null&&(i=vi(),Va(r,e,n,i),JO(r,t,n))}}function GO(e){var t=e.alternate;return e===Or||t!==null&&t===Or}function YO(e,t){xh=xg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function JO(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,g_(e,r)}}var bg={readContext:ba,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},e$={readContext:ba,useCallback:function(e,t){return vs().memoizedState=[e,t===void 0?null:t],e},useContext:ba,useEffect:ZN,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bv(4194308,4,zO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bv(4,2,e,t)},useMemo:function(e,t){var r=vs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=vs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ZB.bind(null,Or,e),[n.memoizedState,e]},useRef:function(e){var t=vs();return e={current:e},t.memoizedState=e},useState:XN,useDebugValue:$_,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=XN(!1),t=e[0];return e=XB.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Or,i=vs();if(Ar){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=t(),On===null)throw Error(Re(349));Mc&30||LO(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,ZN(RO.bind(null,n,a,e),[e]),n.flags|=2048,Wh(9,DO.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=vs(),t=On.identifierPrefix;if(Ar){var r=lo,n=oo;r=(n&~(1<<32-Ha(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JB++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},t$={readContext:ba,useCallback:WO,useContext:ba,useEffect:B_,useImperativeHandle:qO,useInsertionEffect:$O,useLayoutEffect:UO,useMemo:HO,useReducer:y1,useRef:BO,useState:function(){return y1(qh)},useDebugValue:$_,useDeferredValue:function(e){var t=wa();return VO(t,yn.memoizedState,e)},useTransition:function(){var e=y1(qh)[0],t=wa().memoizedState;return[e,t]},useMutableSource:TO,useSyncExternalStore:IO,useId:KO,unstable_isNewReconciler:!1},r$={readContext:ba,useCallback:WO,useContext:ba,useEffect:B_,useImperativeHandle:qO,useInsertionEffect:$O,useLayoutEffect:UO,useMemo:HO,useReducer:x1,useRef:BO,useState:function(){return x1(qh)},useDebugValue:$_,useDeferredValue:function(e){var t=wa();return yn===null?t.memoizedState=e:VO(t,yn.memoizedState,e)},useTransition:function(){var e=x1(qh)[0],t=wa().memoizedState;return[e,t]},useMutableSource:TO,useSyncExternalStore:IO,useId:KO,unstable_isNewReconciler:!1};function Fa(e,t){if(e&&e.defaultProps){t=Tr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function o2(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Tr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qy={isMounted:function(e){return(e=e._reactInternals)?au(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vi(),i=jl(e),a=ho(n,i);a.payload=t,r!=null&&(a.callback=r),t=wl(e,a,i),t!==null&&(Va(t,e,i,n),Mv(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vi(),i=jl(e),a=ho(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=wl(e,a,i),t!==null&&(Va(t,e,i,n),Mv(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vi(),n=jl(e),i=ho(r,n);i.tag=2,t!=null&&(i.callback=t),t=wl(e,i,n),t!==null&&(Va(t,e,n,r),Mv(t,e,n))}};function QN(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Rh(r,n)||!Rh(i,a):!0}function XO(e,t,r){var n=!1,i=Pl,a=t.contextType;return typeof a=="object"&&a!==null?a=ba(a):(i=Pi(t)?Dc:oi.current,n=t.contextTypes,a=(n=n!=null)?Ad(e,i):Pl),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qy,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ek(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&qy.enqueueReplaceState(t,t.state,null)}function l2(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},T_(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=ba(a):(a=Pi(t)?Dc:oi.current,i.context=Ad(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(o2(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qy.enqueueReplaceState(i,i.state,null),gg(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Od(e,t){try{var r="",n=t;do r+=CF(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function b1(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function c2(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var n$=typeof WeakMap=="function"?WeakMap:Map;function ZO(e,t,r){r=ho(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){_g||(_g=!0,x2=n),c2(e,t)},r}function QO(e,t,r){r=ho(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){c2(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){c2(e,t),typeof n!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function tk(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new n$;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=g$.bind(null,e,t,r),t.then(e,e))}function rk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nk(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ho(-1,1),t.tag=2,wl(r,t,1))),r.lanes|=1),e)}var i$=Eo.ReactCurrentOwner,Ni=!1;function hi(e,t,r,n){t.child=e===null?EO(t,null,r,n):Pd(t,e.child,r,n)}function ik(e,t,r,n,i){r=r.render;var a=t.ref;return vd(t,i),n=M_(e,t,r,n,a,i),r=F_(),e!==null&&!Ni?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xo(e,t,i)):(Ar&&r&&N_(t),t.flags|=1,hi(e,t,n,i),t.child)}function ak(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!G_(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,e6(e,t,a,n,i)):(e=qv(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Rh,r(s,n)&&e.ref===t.ref)return xo(e,t,i)}return t.flags|=1,e=Sl(a,n),e.ref=t.ref,e.return=t,t.child=e}function e6(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Rh(a,n)&&e.ref===t.ref)if(Ni=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Ni=!0);else return t.lanes=e.lanes,xo(e,t,i)}return u2(e,t,r,n,i)}function t6(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(od,Wi),Wi|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hr(od,Wi),Wi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,hr(od,Wi),Wi|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,hr(od,Wi),Wi|=n;return hi(e,t,i,r),t.child}function r6(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function u2(e,t,r,n,i){var a=Pi(r)?Dc:oi.current;return a=Ad(t,a),vd(t,i),r=M_(e,t,r,n,a,i),n=F_(),e!==null&&!Ni?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xo(e,t,i)):(Ar&&n&&N_(t),t.flags|=1,hi(e,t,r,i),t.child)}function sk(e,t,r,n,i){if(Pi(r)){var a=!0;fg(t)}else a=!1;if(vd(t,i),t.stateNode===null)$v(e,t),XO(t,r,n),l2(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=ba(u):(u=Pi(r)?Dc:oi.current,u=Ad(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&ek(t,s,n,u),il=!1;var p=t.memoizedState;s.state=p,gg(t,n,s,i),c=t.memoizedState,o!==n||p!==c||Ei.current||il?(typeof d=="function"&&(o2(t,r,d,n),c=t.memoizedState),(o=il||QN(t,r,o,n,p,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,CO(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Fa(t.type,o),s.props=u,f=t.pendingProps,p=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=ba(c):(c=Pi(r)?Dc:oi.current,c=Ad(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==c)&&ek(t,s,n,c),il=!1,p=t.memoizedState,s.state=p,gg(t,n,s,i);var y=t.memoizedState;o!==f||p!==y||Ei.current||il?(typeof h=="function"&&(o2(t,r,h,n),y=t.memoizedState),(u=il||QN(t,r,u,n,p,y,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,y,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),s.props=n,s.state=y,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return d2(e,t,r,n,a,i)}function d2(e,t,r,n,i,a){r6(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&HN(t,r,!1),xo(e,t,a);n=t.stateNode,i$.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Pd(t,e.child,null,a),t.child=Pd(t,null,o,a)):hi(e,t,o,a),t.memoizedState=n.state,i&&HN(t,r,!0),t.child}function n6(e){var t=e.stateNode;t.pendingContext?WN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&WN(e,t.context,!1),I_(e,t.containerInfo)}function ok(e,t,r,n,i){return Ed(),A_(i),t.flags|=256,hi(e,t,r,n),t.child}var f2={dehydrated:null,treeContext:null,retryLane:0};function h2(e){return{baseLanes:e,cachePool:null,transitions:null}}function i6(e,t,r){var n=t.pendingProps,i=Cr.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),hr(Cr,i&1),e===null)return a2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Vy(s,n,0,null),e=Cc(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=h2(r),t.memoizedState=f2,e):U_(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return a$(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Sl(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Sl(o,a):(a=Cc(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?h2(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=f2,n}return a=e.child,e=a.sibling,n=Sl(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function U_(e,t){return t=Vy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jm(e,t,r,n){return n!==null&&A_(n),Pd(t,e.child,null,r),e=U_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function a$(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=b1(Error(Re(422))),Jm(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Vy({mode:"visible",children:n.children},i,0,null),a=Cc(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Pd(t,e.child,null,s),t.child.memoizedState=h2(s),t.memoizedState=f2,a);if(!(t.mode&1))return Jm(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(Re(419)),n=b1(a,n,void 0),Jm(e,t,s,n)}if(o=(s&e.childLanes)!==0,Ni||o){if(n=On,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,yo(e,i),Va(n,e,i,-1))}return K_(),n=b1(Error(Re(421))),Jm(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=y$.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Vi=bl(i.nextSibling),Yi=t,Ar=!0,Ua=null,e!==null&&(ma[va++]=oo,ma[va++]=lo,ma[va++]=Rc,oo=e.id,lo=e.overflow,Rc=t),t=U_(t,n.children),t.flags|=4096,t)}function lk(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),s2(e.return,t,r)}function w1(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function a6(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(hi(e,t,n.children,r),n=Cr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lk(e,r,t);else if(e.tag===19)lk(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(hr(Cr,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&yg(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),w1(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&yg(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}w1(t,!0,r,null,a);break;case"together":w1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $v(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Re(153));if(t.child!==null){for(e=t.child,r=Sl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Sl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function s$(e,t,r){switch(t.tag){case 3:n6(t),Ed();break;case 5:OO(t);break;case 1:Pi(t.type)&&fg(t);break;case 4:I_(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;hr(mg,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(hr(Cr,Cr.current&1),t.flags|=128,null):r&t.child.childLanes?i6(e,t,r):(hr(Cr,Cr.current&1),e=xo(e,t,r),e!==null?e.sibling:null);hr(Cr,Cr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return a6(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hr(Cr,Cr.current),n)break;return null;case 22:case 23:return t.lanes=0,t6(e,t,r)}return xo(e,t,r)}var s6,p2,o6,l6;s6=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};p2=function(){};o6=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,jc(Ss.current);var a=null;switch(r){case"input":i=Rb(e,i),n=Rb(e,n),a=[];break;case"select":i=Tr({},i,{value:void 0}),n=Tr({},n,{value:void 0}),a=[];break;case"textarea":i=Bb(e,i),n=Bb(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ug)}Ub(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ph.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ph.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&gr("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};l6=function(e,t,r,n){r!==n&&(t.flags|=4)};function Hf(e,t){if(!Ar)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function o$(e,t,r){var n=t.pendingProps;switch(k_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(t),null;case 1:return Pi(t.type)&&dg(),Zn(t),null;case 3:return n=t.stateNode,Cd(),br(Ei),br(oi),D_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ua!==null&&(_2(Ua),Ua=null))),p2(e,t),Zn(t),null;case 5:L_(t);var i=jc(Uh.current);if(r=t.type,e!==null&&t.stateNode!=null)o6(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Re(166));return Zn(t),null}if(e=jc(Ss.current),Gm(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ys]=t,n[Bh]=a,e=(t.mode&1)!==0,r){case"dialog":gr("cancel",n),gr("close",n);break;case"iframe":case"object":case"embed":gr("load",n);break;case"video":case"audio":for(i=0;i<ch.length;i++)gr(ch[i],n);break;case"source":gr("error",n);break;case"img":case"image":case"link":gr("error",n),gr("load",n);break;case"details":gr("toggle",n);break;case"input":gN(n,a),gr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},gr("invalid",n);break;case"textarea":xN(n,a),gr("invalid",n)}Ub(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Km(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Km(n.textContent,o,e),i=["children",""+o]):Ph.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&gr("scroll",n)}switch(r){case"input":Bm(n),yN(n,a,!0);break;case"textarea":Bm(n),bN(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=ug)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=RC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[ys]=t,e[Bh]=n,s6(e,t,!1,!1),t.stateNode=e;e:{switch(s=zb(r,n),r){case"dialog":gr("cancel",e),gr("close",e),i=n;break;case"iframe":case"object":case"embed":gr("load",e),i=n;break;case"video":case"audio":for(i=0;i<ch.length;i++)gr(ch[i],e);i=n;break;case"source":gr("error",e),i=n;break;case"img":case"image":case"link":gr("error",e),gr("load",e),i=n;break;case"details":gr("toggle",e),i=n;break;case"input":gN(e,n),i=Rb(e,n),gr("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Tr({},n,{value:void 0}),gr("invalid",e);break;case"textarea":xN(e,n),i=Bb(e,n),gr("invalid",e);break;default:i=n}Ub(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?BC(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&MC(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ch(e,c):typeof c=="number"&&Ch(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ph.hasOwnProperty(a)?c!=null&&a==="onScroll"&&gr("scroll",e):c!=null&&d_(e,a,c,s))}switch(r){case"input":Bm(e),yN(e,n,!1);break;case"textarea":Bm(e),bN(e);break;case"option":n.value!=null&&e.setAttribute("value",""+El(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?fd(e,!!n.multiple,a,!1):n.defaultValue!=null&&fd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ug)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zn(t),null;case 6:if(e&&t.stateNode!=null)l6(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Re(166));if(r=jc(Uh.current),jc(Ss.current),Gm(t)){if(n=t.stateNode,r=t.memoizedProps,n[ys]=t,(a=n.nodeValue!==r)&&(e=Yi,e!==null))switch(e.tag){case 3:Km(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Km(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ys]=t,t.stateNode=n}return Zn(t),null;case 13:if(br(Cr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ar&&Vi!==null&&t.mode&1&&!(t.flags&128))kO(),Ed(),t.flags|=98560,a=!1;else if(a=Gm(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Re(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Re(317));a[ys]=t}else Ed(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zn(t),a=!1}else Ua!==null&&(_2(Ua),Ua=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Cr.current&1?bn===0&&(bn=3):K_())),t.updateQueue!==null&&(t.flags|=4),Zn(t),null);case 4:return Cd(),p2(e,t),e===null&&Mh(t.stateNode.containerInfo),Zn(t),null;case 10:return C_(t.type._context),Zn(t),null;case 17:return Pi(t.type)&&dg(),Zn(t),null;case 19:if(br(Cr),a=t.memoizedState,a===null)return Zn(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)Hf(a,!1);else{if(bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=yg(e),s!==null){for(t.flags|=128,Hf(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return hr(Cr,Cr.current&1|2),t.child}e=e.sibling}a.tail!==null&&Jr()>Td&&(t.flags|=128,n=!0,Hf(a,!1),t.lanes=4194304)}else{if(!n)if(e=yg(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Hf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ar)return Zn(t),null}else 2*Jr()-a.renderingStartTime>Td&&r!==1073741824&&(t.flags|=128,n=!0,Hf(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Jr(),t.sibling=null,r=Cr.current,hr(Cr,n?r&1|2:r&1),t):(Zn(t),null);case 22:case 23:return V_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Wi&1073741824&&(Zn(t),t.subtreeFlags&6&&(t.flags|=8192)):Zn(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function l$(e,t){switch(k_(t),t.tag){case 1:return Pi(t.type)&&dg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cd(),br(Ei),br(oi),D_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L_(t),null;case 13:if(br(Cr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));Ed()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return br(Cr),null;case 4:return Cd(),null;case 10:return C_(t.type._context),null;case 22:case 23:return V_(),null;case 24:return null;default:return null}}var Xm=!1,ii=!1,c$=typeof WeakSet=="function"?WeakSet:Set,Be=null;function sd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zr(e,t,n)}else r.current=null}function m2(e,t,r){try{r()}catch(n){zr(e,t,n)}}var ck=!1;function u$(e,t){if(Zb=og,e=hO(),S_(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===i&&(o=s),p===a&&++d===n&&(c=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qb={focusedElem:e,selectionRange:r},og=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Fa(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(j){zr(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return y=ck,ck=!1,y}function bh(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&m2(t,r,a)}i=i.next}while(i!==n)}}function Wy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function v2(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function c6(e){var t=e.alternate;t!==null&&(e.alternate=null,c6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ys],delete t[Bh],delete t[r2],delete t[VB],delete t[KB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function u6(e){return e.tag===5||e.tag===3||e.tag===4}function uk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||u6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function g2(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ug));else if(n!==4&&(e=e.child,e!==null))for(g2(e,t,r),e=e.sibling;e!==null;)g2(e,t,r),e=e.sibling}function y2(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(y2(e,t,r),e=e.sibling;e!==null;)y2(e,t,r),e=e.sibling}var Wn=null,Ba=!1;function el(e,t,r){for(r=r.child;r!==null;)d6(e,t,r),r=r.sibling}function d6(e,t,r){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(Ry,r)}catch{}switch(r.tag){case 5:ii||sd(r,t);case 6:var n=Wn,i=Ba;Wn=null,el(e,t,r),Wn=n,Ba=i,Wn!==null&&(Ba?(e=Wn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Wn.removeChild(r.stateNode));break;case 18:Wn!==null&&(Ba?(e=Wn,r=r.stateNode,e.nodeType===8?p1(e.parentNode,r):e.nodeType===1&&p1(e,r),Lh(e)):p1(Wn,r.stateNode));break;case 4:n=Wn,i=Ba,Wn=r.stateNode.containerInfo,Ba=!0,el(e,t,r),Wn=n,Ba=i;break;case 0:case 11:case 14:case 15:if(!ii&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&m2(r,t,s),i=i.next}while(i!==n)}el(e,t,r);break;case 1:if(!ii&&(sd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){zr(r,t,o)}el(e,t,r);break;case 21:el(e,t,r);break;case 22:r.mode&1?(ii=(n=ii)||r.memoizedState!==null,el(e,t,r),ii=n):el(e,t,r);break;default:el(e,t,r)}}function dk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new c$),t.forEach(function(n){var i=x$.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Da(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Wn=o.stateNode,Ba=!1;break e;case 3:Wn=o.stateNode.containerInfo,Ba=!0;break e;case 4:Wn=o.stateNode.containerInfo,Ba=!0;break e}o=o.return}if(Wn===null)throw Error(Re(160));d6(a,s,i),Wn=null,Ba=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){zr(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)f6(t,e),t=t.sibling}function f6(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Da(t,e),cs(e),n&4){try{bh(3,e,e.return),Wy(3,e)}catch(v){zr(e,e.return,v)}try{bh(5,e,e.return)}catch(v){zr(e,e.return,v)}}break;case 1:Da(t,e),cs(e),n&512&&r!==null&&sd(r,r.return);break;case 5:if(Da(t,e),cs(e),n&512&&r!==null&&sd(r,r.return),e.flags&32){var i=e.stateNode;try{Ch(i,"")}catch(v){zr(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&LC(i,a),zb(o,s);var u=zb(o,a);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?BC(i,f):d==="dangerouslySetInnerHTML"?MC(i,f):d==="children"?Ch(i,f):d_(i,d,f,u)}switch(o){case"input":Mb(i,a);break;case"textarea":DC(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?fd(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?fd(i,!!a.multiple,a.defaultValue,!0):fd(i,!!a.multiple,a.multiple?[]:"",!1))}i[Bh]=a}catch(v){zr(e,e.return,v)}}break;case 6:if(Da(t,e),cs(e),n&4){if(e.stateNode===null)throw Error(Re(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){zr(e,e.return,v)}}break;case 3:if(Da(t,e),cs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Lh(t.containerInfo)}catch(v){zr(e,e.return,v)}break;case 4:Da(t,e),cs(e);break;case 13:Da(t,e),cs(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(W_=Jr())),n&4&&dk(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ii=(u=ii)||d,Da(t,e),ii=u):Da(t,e),cs(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Be=e,d=e.child;d!==null;){for(f=Be=d;Be!==null;){switch(p=Be,h=p.child,p.tag){case 0:case 11:case 14:case 15:bh(4,p,p.return);break;case 1:sd(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){zr(n,r,v)}}break;case 5:sd(p,p.return);break;case 22:if(p.memoizedState!==null){hk(f);continue}}h!==null?(h.return=p,Be=h):hk(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=FC("display",s))}catch(v){zr(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){zr(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Da(t,e),cs(e),n&4&&dk(e);break;case 21:break;default:Da(t,e),cs(e)}}function cs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(u6(r)){var n=r;break e}r=r.return}throw Error(Re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ch(i,""),n.flags&=-33);var a=uk(e);y2(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=uk(e);g2(e,o,s);break;default:throw Error(Re(161))}}catch(c){zr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function d$(e,t,r){Be=e,h6(e)}function h6(e,t,r){for(var n=(e.mode&1)!==0;Be!==null;){var i=Be,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Xm;if(!s){var o=i.alternate,c=o!==null&&o.memoizedState!==null||ii;o=Xm;var u=ii;if(Xm=s,(ii=c)&&!u)for(Be=i;Be!==null;)s=Be,c=s.child,s.tag===22&&s.memoizedState!==null?pk(i):c!==null?(c.return=s,Be=c):pk(i);for(;a!==null;)Be=a,h6(a),a=a.sibling;Be=i,Xm=o,ii=u}fk(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Be=a):fk(e)}}function fk(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ii||Wy(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ii)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Fa(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&JN(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}JN(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Lh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}ii||t.flags&512&&v2(t)}catch(p){zr(t,t.return,p)}}if(t===e){Be=null;break}if(r=t.sibling,r!==null){r.return=t.return,Be=r;break}Be=t.return}}function hk(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Be=r;break}Be=t.return}}function pk(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Wy(4,t)}catch(c){zr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){zr(t,i,c)}}var a=t.return;try{v2(t)}catch(c){zr(t,a,c)}break;case 5:var s=t.return;try{v2(t)}catch(c){zr(t,s,c)}}}catch(c){zr(t,t.return,c)}if(t===e){Be=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Be=o;break}Be=t.return}}var f$=Math.ceil,wg=Eo.ReactCurrentDispatcher,z_=Eo.ReactCurrentOwner,xa=Eo.ReactCurrentBatchConfig,$t=0,On=null,sn=null,Vn=0,Wi=0,od=Rl(0),bn=0,Hh=null,Fc=0,Hy=0,q_=0,wh=null,Si=null,W_=0,Td=1/0,to=null,_g=!1,x2=null,_l=null,Zm=!1,hl=null,jg=0,_h=0,b2=null,Uv=-1,zv=0;function vi(){return $t&6?Jr():Uv!==-1?Uv:Uv=Jr()}function jl(e){return e.mode&1?$t&2&&Vn!==0?Vn&-Vn:YB.transition!==null?(zv===0&&(zv=XC()),zv):(e=tr,e!==0||(e=window.event,e=e===void 0?16:iO(e.type)),e):1}function Va(e,t,r,n){if(50<_h)throw _h=0,b2=null,Error(Re(185));wp(e,r,n),(!($t&2)||e!==On)&&(e===On&&(!($t&2)&&(Hy|=r),bn===4&&cl(e,Vn)),Ci(e,n),r===1&&$t===0&&!(t.mode&1)&&(Td=Jr()+500,Uy&&Ml()))}function Ci(e,t){var r=e.callbackNode;YF(e,t);var n=sg(e,e===On?Vn:0);if(n===0)r!==null&&jN(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jN(r),t===1)e.tag===0?GB(mk.bind(null,e)):jO(mk.bind(null,e)),WB(function(){!($t&6)&&Ml()}),r=null;else{switch(ZC(n)){case 1:r=v_;break;case 4:r=YC;break;case 16:r=ag;break;case 536870912:r=JC;break;default:r=ag}r=w6(r,p6.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function p6(e,t){if(Uv=-1,zv=0,$t&6)throw Error(Re(327));var r=e.callbackNode;if(gd()&&e.callbackNode!==r)return null;var n=sg(e,e===On?Vn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Sg(e,n);else{t=n;var i=$t;$t|=2;var a=v6();(On!==e||Vn!==t)&&(to=null,Td=Jr()+500,Pc(e,t));do try{m$();break}catch(o){m6(e,o)}while(!0);P_(),wg.current=a,$t=i,sn!==null?t=0:(On=null,Vn=0,t=bn)}if(t!==0){if(t===2&&(i=Kb(e),i!==0&&(n=i,t=w2(e,i))),t===1)throw r=Hh,Pc(e,0),cl(e,n),Ci(e,Jr()),r;if(t===6)cl(e,n);else{if(i=e.current.alternate,!(n&30)&&!h$(i)&&(t=Sg(e,n),t===2&&(a=Kb(e),a!==0&&(n=a,t=w2(e,a))),t===1))throw r=Hh,Pc(e,0),cl(e,n),Ci(e,Jr()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Re(345));case 2:fc(e,Si,to);break;case 3:if(cl(e,n),(n&130023424)===n&&(t=W_+500-Jr(),10<t)){if(sg(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){vi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=t2(fc.bind(null,e,Si,to),t);break}fc(e,Si,to);break;case 4:if(cl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Ha(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=Jr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*f$(n/1960))-n,10<n){e.timeoutHandle=t2(fc.bind(null,e,Si,to),n);break}fc(e,Si,to);break;case 5:fc(e,Si,to);break;default:throw Error(Re(329))}}}return Ci(e,Jr()),e.callbackNode===r?p6.bind(null,e):null}function w2(e,t){var r=wh;return e.current.memoizedState.isDehydrated&&(Pc(e,t).flags|=256),e=Sg(e,t),e!==2&&(t=Si,Si=r,t!==null&&_2(t)),e}function _2(e){Si===null?Si=e:Si.push.apply(Si,e)}function h$(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Ga(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cl(e,t){for(t&=~q_,t&=~Hy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ha(t),n=1<<r;e[r]=-1,t&=~n}}function mk(e){if($t&6)throw Error(Re(327));gd();var t=sg(e,0);if(!(t&1))return Ci(e,Jr()),null;var r=Sg(e,t);if(e.tag!==0&&r===2){var n=Kb(e);n!==0&&(t=n,r=w2(e,n))}if(r===1)throw r=Hh,Pc(e,0),cl(e,t),Ci(e,Jr()),r;if(r===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fc(e,Si,to),Ci(e,Jr()),null}function H_(e,t){var r=$t;$t|=1;try{return e(t)}finally{$t=r,$t===0&&(Td=Jr()+500,Uy&&Ml())}}function Bc(e){hl!==null&&hl.tag===0&&!($t&6)&&gd();var t=$t;$t|=1;var r=xa.transition,n=tr;try{if(xa.transition=null,tr=1,e)return e()}finally{tr=n,xa.transition=r,$t=t,!($t&6)&&Ml()}}function V_(){Wi=od.current,br(od)}function Pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,qB(r)),sn!==null)for(r=sn.return;r!==null;){var n=r;switch(k_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&dg();break;case 3:Cd(),br(Ei),br(oi),D_();break;case 5:L_(n);break;case 4:Cd();break;case 13:br(Cr);break;case 19:br(Cr);break;case 10:C_(n.type._context);break;case 22:case 23:V_()}r=r.return}if(On=e,sn=e=Sl(e.current,null),Vn=Wi=t,bn=0,Hh=null,q_=Hy=Fc=0,Si=wh=null,_c!==null){for(t=0;t<_c.length;t++)if(r=_c[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}_c=null}return e}function m6(e,t){do{var r=sn;try{if(P_(),Fv.current=bg,xg){for(var n=Or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}xg=!1}if(Mc=0,En=yn=Or=null,xh=!1,zh=0,z_.current=null,r===null||r.return===null){bn=1,Hh=t,sn=null;break}e:{var a=e,s=r.return,o=r,c=t;if(t=Vn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=rk(s);if(h!==null){h.flags&=-257,nk(h,s,o,a,t),h.mode&1&&tk(a,u,t),t=h,c=u;var y=t.updateQueue;if(y===null){var v=new Set;v.add(c),t.updateQueue=v}else y.add(c);break e}else{if(!(t&1)){tk(a,u,t),K_();break e}c=Error(Re(426))}}else if(Ar&&o.mode&1){var x=rk(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),nk(x,s,o,a,t),A_(Od(c,o));break e}}a=c=Od(c,o),bn!==4&&(bn=2),wh===null?wh=[a]:wh.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=ZO(a,c,t);YN(a,g);break e;case 1:o=c;var _=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(_l===null||!_l.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=QO(a,o,t);YN(a,j);break e}}a=a.return}while(a!==null)}y6(r)}catch(A){t=A,sn===r&&r!==null&&(sn=r=r.return);continue}break}while(!0)}function v6(){var e=wg.current;return wg.current=bg,e===null?bg:e}function K_(){(bn===0||bn===3||bn===2)&&(bn=4),On===null||!(Fc&268435455)&&!(Hy&268435455)||cl(On,Vn)}function Sg(e,t){var r=$t;$t|=2;var n=v6();(On!==e||Vn!==t)&&(to=null,Pc(e,t));do try{p$();break}catch(i){m6(e,i)}while(!0);if(P_(),$t=r,wg.current=n,sn!==null)throw Error(Re(261));return On=null,Vn=0,bn}function p$(){for(;sn!==null;)g6(sn)}function m$(){for(;sn!==null&&!$F();)g6(sn)}function g6(e){var t=b6(e.alternate,e,Wi);e.memoizedProps=e.pendingProps,t===null?y6(e):sn=t,z_.current=null}function y6(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=l$(r,t),r!==null){r.flags&=32767,sn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bn=6,sn=null;return}}else if(r=o$(r,t,Wi),r!==null){sn=r;return}if(t=t.sibling,t!==null){sn=t;return}sn=t=e}while(t!==null);bn===0&&(bn=5)}function fc(e,t,r){var n=tr,i=xa.transition;try{xa.transition=null,tr=1,v$(e,t,r,n)}finally{xa.transition=i,tr=n}return null}function v$(e,t,r,n){do gd();while(hl!==null);if($t&6)throw Error(Re(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(JF(e,a),e===On&&(sn=On=null,Vn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zm||(Zm=!0,w6(ag,function(){return gd(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=xa.transition,xa.transition=null;var s=tr;tr=1;var o=$t;$t|=4,z_.current=null,u$(e,r),f6(r,e),RB(Qb),og=!!Zb,Qb=Zb=null,e.current=r,d$(r),UF(),$t=o,tr=s,xa.transition=a}else e.current=r;if(Zm&&(Zm=!1,hl=e,jg=i),a=e.pendingLanes,a===0&&(_l=null),WF(r.stateNode),Ci(e,Jr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(_g)throw _g=!1,e=x2,x2=null,e;return jg&1&&e.tag!==0&&gd(),a=e.pendingLanes,a&1?e===b2?_h++:(_h=0,b2=e):_h=0,Ml(),null}function gd(){if(hl!==null){var e=ZC(jg),t=xa.transition,r=tr;try{if(xa.transition=null,tr=16>e?16:e,hl===null)var n=!1;else{if(e=hl,hl=null,jg=0,$t&6)throw Error(Re(331));var i=$t;for($t|=4,Be=e.current;Be!==null;){var a=Be,s=a.child;if(Be.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(Be=u;Be!==null;){var d=Be;switch(d.tag){case 0:case 11:case 15:bh(8,d,a)}var f=d.child;if(f!==null)f.return=d,Be=f;else for(;Be!==null;){d=Be;var p=d.sibling,h=d.return;if(c6(d),d===u){Be=null;break}if(p!==null){p.return=h,Be=p;break}Be=h}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Be=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Be=s;else e:for(;Be!==null;){if(a=Be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:bh(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Be=g;break e}Be=a.return}}var _=e.current;for(Be=_;Be!==null;){s=Be;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Be=S;else e:for(s=_;Be!==null;){if(o=Be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wy(9,o)}}catch(A){zr(o,o.return,A)}if(o===s){Be=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,Be=j;break e}Be=o.return}}if($t=i,Ml(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(Ry,e)}catch{}n=!0}return n}finally{tr=r,xa.transition=t}}return!1}function vk(e,t,r){t=Od(r,t),t=ZO(e,t,1),e=wl(e,t,1),t=vi(),e!==null&&(wp(e,1,t),Ci(e,t))}function zr(e,t,r){if(e.tag===3)vk(e,e,r);else for(;t!==null;){if(t.tag===3){vk(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_l===null||!_l.has(n))){e=Od(r,e),e=QO(t,e,1),t=wl(t,e,1),e=vi(),t!==null&&(wp(t,1,e),Ci(t,e));break}}t=t.return}}function g$(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vi(),e.pingedLanes|=e.suspendedLanes&r,On===e&&(Vn&r)===r&&(bn===4||bn===3&&(Vn&130023424)===Vn&&500>Jr()-W_?Pc(e,0):q_|=r),Ci(e,t)}function x6(e,t){t===0&&(e.mode&1?(t=zm,zm<<=1,!(zm&130023424)&&(zm=4194304)):t=1);var r=vi();e=yo(e,t),e!==null&&(wp(e,t,r),Ci(e,r))}function y$(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),x6(e,r)}function x$(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Re(314))}n!==null&&n.delete(t),x6(e,r)}var b6;b6=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ei.current)Ni=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ni=!1,s$(e,t,r);Ni=!!(e.flags&131072)}else Ni=!1,Ar&&t.flags&1048576&&SO(t,pg,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$v(e,t),e=t.pendingProps;var i=Ad(t,oi.current);vd(t,r),i=M_(null,t,n,e,i,r);var a=F_();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(n)?(a=!0,fg(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,T_(t),i.updater=qy,t.stateNode=i,i._reactInternals=t,l2(t,n,e,r),t=d2(null,t,n,!0,a,r)):(t.tag=0,Ar&&a&&N_(t),hi(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch($v(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=w$(n),e=Fa(n,e),i){case 0:t=u2(null,t,n,e,r);break e;case 1:t=sk(null,t,n,e,r);break e;case 11:t=ik(null,t,n,e,r);break e;case 14:t=ak(null,t,n,Fa(n.type,e),r);break e}throw Error(Re(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Fa(n,i),u2(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Fa(n,i),sk(e,t,n,i,r);case 3:e:{if(n6(t),e===null)throw Error(Re(387));n=t.pendingProps,a=t.memoizedState,i=a.element,CO(e,t),gg(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Od(Error(Re(423)),t),t=ok(e,t,n,r,i);break e}else if(n!==i){i=Od(Error(Re(424)),t),t=ok(e,t,n,r,i);break e}else for(Vi=bl(t.stateNode.containerInfo.firstChild),Yi=t,Ar=!0,Ua=null,r=EO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ed(),n===i){t=xo(e,t,r);break e}hi(e,t,n,r)}t=t.child}return t;case 5:return OO(t),e===null&&a2(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,e2(n,i)?s=null:a!==null&&e2(n,a)&&(t.flags|=32),r6(e,t),hi(e,t,s,r),t.child;case 6:return e===null&&a2(t),null;case 13:return i6(e,t,r);case 4:return I_(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Pd(t,null,n,r):hi(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Fa(n,i),ik(e,t,n,i,r);case 7:return hi(e,t,t.pendingProps,r),t.child;case 8:return hi(e,t,t.pendingProps.children,r),t.child;case 12:return hi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,hr(mg,n._currentValue),n._currentValue=s,a!==null)if(Ga(a.value,s)){if(a.children===i.children&&!Ei.current){t=xo(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ho(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),s2(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Re(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),s2(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}hi(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,vd(t,r),i=ba(i),n=n(i),t.flags|=1,hi(e,t,n,r),t.child;case 14:return n=t.type,i=Fa(n,t.pendingProps),i=Fa(n.type,i),ak(e,t,n,i,r);case 15:return e6(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Fa(n,i),$v(e,t),t.tag=1,Pi(n)?(e=!0,fg(t)):e=!1,vd(t,r),XO(t,n,i),l2(t,n,i,r),d2(null,t,n,!0,e,r);case 19:return a6(e,t,r);case 22:return t6(e,t,r)}throw Error(Re(156,t.tag))};function w6(e,t){return GC(e,t)}function b$(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(e,t,r,n){return new b$(e,t,r,n)}function G_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function w$(e){if(typeof e=="function")return G_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h_)return 11;if(e===p_)return 14}return 2}function Sl(e,t){var r=e.alternate;return r===null?(r=ga(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qv(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")G_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Xu:return Cc(r.children,i,a,t);case f_:s=8,i|=8;break;case Tb:return e=ga(12,r,t,i|2),e.elementType=Tb,e.lanes=a,e;case Ib:return e=ga(13,r,t,i),e.elementType=Ib,e.lanes=a,e;case Lb:return e=ga(19,r,t,i),e.elementType=Lb,e.lanes=a,e;case OC:return Vy(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PC:s=10;break e;case CC:s=9;break e;case h_:s=11;break e;case p_:s=14;break e;case nl:s=16,n=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return t=ga(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Cc(e,t,r,n){return e=ga(7,e,n,t),e.lanes=r,e}function Vy(e,t,r,n){return e=ga(22,e,n,t),e.elementType=OC,e.lanes=r,e.stateNode={isHidden:!1},e}function _1(e,t,r){return e=ga(6,e,null,t),e.lanes=r,e}function j1(e,t,r){return t=ga(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _$(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n1(0),this.expirationTimes=n1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n1(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Y_(e,t,r,n,i,a,s,o,c){return e=new _$(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ga(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},T_(a),e}function j$(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ju,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function _6(e){if(!e)return Pl;e=e._reactInternals;e:{if(au(e)!==e||e.tag!==1)throw Error(Re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(e.tag===1){var r=e.type;if(Pi(r))return _O(e,r,t)}return t}function j6(e,t,r,n,i,a,s,o,c){return e=Y_(r,n,!0,e,i,a,s,o,c),e.context=_6(null),r=e.current,n=vi(),i=jl(r),a=ho(n,i),a.callback=t??null,wl(r,a,i),e.current.lanes=i,wp(e,i,n),Ci(e,n),e}function Ky(e,t,r,n){var i=t.current,a=vi(),s=jl(i);return r=_6(r),t.context===null?t.context=r:t.pendingContext=r,t=ho(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=wl(i,t,s),e!==null&&(Va(e,i,s,a),Mv(e,i,s)),s}function Ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function J_(e,t){gk(e,t),(e=e.alternate)&&gk(e,t)}function S$(){return null}var S6=typeof reportError=="function"?reportError:function(e){console.error(e)};function X_(e){this._internalRoot=e}Gy.prototype.render=X_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Re(409));Ky(e,t,null,null)};Gy.prototype.unmount=X_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bc(function(){Ky(null,e,null,null)}),t[go]=null}};function Gy(e){this._internalRoot=e}Gy.prototype.unstable_scheduleHydration=function(e){if(e){var t=tO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ll.length&&t!==0&&t<ll[r].priority;r++);ll.splice(r,0,e),r===0&&nO(e)}};function Z_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yk(){}function N$(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Ng(s);a.call(u)}}var s=j6(t,n,e,0,null,!1,!1,"",yk);return e._reactRootContainer=s,e[go]=s.current,Mh(e.nodeType===8?e.parentNode:e),Bc(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Ng(c);o.call(u)}}var c=Y_(e,0,!1,null,null,!1,!1,"",yk);return e._reactRootContainer=c,e[go]=c.current,Mh(e.nodeType===8?e.parentNode:e),Bc(function(){Ky(t,c,r,n)}),c}function Jy(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var c=Ng(s);o.call(c)}}Ky(t,s,e,i)}else s=N$(r,t,e,i,n);return Ng(s)}QC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=lh(t.pendingLanes);r!==0&&(g_(t,r|1),Ci(t,Jr()),!($t&6)&&(Td=Jr()+500,Ml()))}break;case 13:Bc(function(){var n=yo(e,1);if(n!==null){var i=vi();Va(n,e,1,i)}}),J_(e,1)}};y_=function(e){if(e.tag===13){var t=yo(e,134217728);if(t!==null){var r=vi();Va(t,e,134217728,r)}J_(e,134217728)}};eO=function(e){if(e.tag===13){var t=jl(e),r=yo(e,t);if(r!==null){var n=vi();Va(r,e,t,n)}J_(e,t)}};tO=function(){return tr};rO=function(e,t){var r=tr;try{return tr=e,t()}finally{tr=r}};Wb=function(e,t,r){switch(t){case"input":if(Mb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=$y(n);if(!i)throw Error(Re(90));IC(n),Mb(n,i)}}}break;case"textarea":DC(e,r);break;case"select":t=r.value,t!=null&&fd(e,!!r.multiple,t,!1)}};zC=H_;qC=Bc;var k$={usingClientEntryPoint:!1,Events:[jp,td,$y,$C,UC,H_]},Vf={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A$={bundleType:Vf.bundleType,version:Vf.version,rendererPackageName:Vf.rendererPackageName,rendererConfig:Vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VC(e),e===null?null:e.stateNode},findFiberByHostInstance:Vf.findFiberByHostInstance||S$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{Ry=Qm.inject(A$),js=Qm}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k$;ea.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Z_(t))throw Error(Re(200));return j$(e,t,null,r)};ea.createRoot=function(e,t){if(!Z_(e))throw Error(Re(299));var r=!1,n="",i=S6;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Y_(e,1,!1,null,null,r,!1,n,i),e[go]=t.current,Mh(e.nodeType===8?e.parentNode:e),new X_(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=VC(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return Bc(e)};ea.hydrate=function(e,t,r){if(!Yy(t))throw Error(Re(200));return Jy(null,e,t,!0,r)};ea.hydrateRoot=function(e,t,r){if(!Z_(e))throw Error(Re(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=S6;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=j6(t,null,e,1,r??null,i,!1,a,s),e[go]=t.current,Mh(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Gy(t)};ea.render=function(e,t,r){if(!Yy(t))throw Error(Re(200));return Jy(null,e,t,!1,r)};ea.unmountComponentAtNode=function(e){if(!Yy(e))throw Error(Re(40));return e._reactRootContainer?(Bc(function(){Jy(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0):!1};ea.unstable_batchedUpdates=H_;ea.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yy(r))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return Jy(e,t,r,!1,n)};ea.version="18.3.1-next-f1338f8080-20240426";function N6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N6)}catch(e){console.error(e)}}N6(),NC.exports=ea;var Xy=NC.exports,xk=Xy;Cb.createRoot=xk.createRoot,Cb.hydrateRoot=xk.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vh.apply(this,arguments)}var pl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pl||(pl={}));const bk="popstate";function E$(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return j2("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:kg(i)}return C$(t,r,null,e)}function en(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Q_(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function P$(){return Math.random().toString(36).substr(2,8)}function wk(e,t){return{usr:e.state,key:e.key,idx:t}}function j2(e,t,r,n){return r===void 0&&(r=null),Vh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hd(t):t,{state:r,key:t&&t.key||n||P$()})}function kg(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function C$(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=pl.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(Vh({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=pl.Pop;let x=d(),g=x==null?null:x-u;u=x,c&&c({action:o,location:v.location,delta:g})}function p(x,g){o=pl.Push;let _=j2(v.location,x,g);u=d()+1;let S=wk(_,u),j=v.createHref(_);try{s.pushState(S,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(j)}a&&c&&c({action:o,location:v.location,delta:1})}function h(x,g){o=pl.Replace;let _=j2(v.location,x,g);u=d();let S=wk(_,u),j=v.createHref(_);s.replaceState(S,"",j),a&&c&&c({action:o,location:v.location,delta:0})}function y(x){let g=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof x=="string"?x:kg(x);return _=_.replace(/ $/,"%20"),en(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let v={get action(){return o},get location(){return e(i,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(bk,f),c=x,()=>{i.removeEventListener(bk,f),c=null}},createHref(x){return t(i,x)},createURL:y,encodeLocation(x){let g=y(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:h,go(x){return s.go(x)}};return v}var _k;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_k||(_k={}));function O$(e,t,r){return r===void 0&&(r="/"),T$(e,t,r)}function T$(e,t,r,n){let i=typeof t=="string"?Hd(t):t,a=e5(i.pathname||"/",r);if(a==null)return null;let s=k6(e);I$(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=H$(a);o=z$(s[c],u)}return o}function k6(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(en(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Nl([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(en(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),k6(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:$$(u,a.index),routesMeta:d})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of A6(a.path))i(a,s,c)}),t}function A6(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=A6(n.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function I$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:U$(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const L$=/^:[\w-]+$/,D$=3,R$=2,M$=1,F$=10,B$=-2,jk=e=>e==="*";function $$(e,t){let r=e.split("/"),n=r.length;return r.some(jk)&&(n+=B$),t&&(n+=R$),r.filter(i=>!jk(i)).reduce((i,a)=>i+(L$.test(a)?D$:a===""?M$:F$),n)}function U$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function z$(e,t,r){let{routesMeta:n}=e,i={},a="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=q$({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Nl([a,f.pathname]),pathnameBase:J$(Nl([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Nl([a,f.pathnameBase]))}return s}function q$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=W$(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let v=o[f]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[f];return h&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:e}}function W$(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Q_(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function H$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Q_(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function e5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const V$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K$=e=>V$.test(e);function G$(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Hd(e):e,a;if(r)if(K$(r))a=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),Q_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?a=Sk(r.substring(1),"/"):a=Sk(r,t)}else a=t;return{pathname:a,search:X$(n),hash:Z$(i)}}function Sk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function S1(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y$(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function t5(e,t){let r=Y$(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function r5(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Hd(e):(i=Vh({},e),en(!i.pathname||!i.pathname.includes("?"),S1("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),S1("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),S1("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=G$(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Nl=e=>e.join("/").replace(/\/\/+/g,"/"),J$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const E6=["post","put","patch","delete"];new Set(E6);const e9=["get",...E6];new Set(e9);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kh.apply(this,arguments)}const n5=b.createContext(null),t9=b.createContext(null),Fl=b.createContext(null),Zy=b.createContext(null),Is=b.createContext({outlet:null,matches:[],isDataRoute:!1}),P6=b.createContext(null);function r9(e,t){let{relative:r}=t===void 0?{}:t;Vd()||en(!1);let{basename:n,navigator:i}=b.useContext(Fl),{hash:a,pathname:s,search:o}=O6(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:Nl([n,s])),i.createHref({pathname:c,search:o,hash:a})}function Vd(){return b.useContext(Zy)!=null}function su(){return Vd()||en(!1),b.useContext(Zy).location}function C6(e){b.useContext(Fl).static||b.useLayoutEffect(e)}function wi(){let{isDataRoute:e}=b.useContext(Is);return e?g9():n9()}function n9(){Vd()||en(!1);let e=b.useContext(n5),{basename:t,future:r,navigator:n}=b.useContext(Fl),{matches:i}=b.useContext(Is),{pathname:a}=su(),s=JSON.stringify(t5(i,r.v7_relativeSplatPath)),o=b.useRef(!1);return C6(()=>{o.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=r5(u,JSON.parse(s),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Nl([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,a,e])}const i9=b.createContext(null);function a9(e){let t=b.useContext(Is).outlet;return t&&b.createElement(i9.Provider,{value:e},t)}function ou(){let{matches:e}=b.useContext(Is),t=e[e.length-1];return t?t.params:{}}function O6(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=b.useContext(Fl),{matches:i}=b.useContext(Is),{pathname:a}=su(),s=JSON.stringify(t5(i,n.v7_relativeSplatPath));return b.useMemo(()=>r5(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function s9(e,t){return o9(e,t)}function o9(e,t,r,n){Vd()||en(!1);let{navigator:i}=b.useContext(Fl),{matches:a}=b.useContext(Is),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=su(),d;if(t){var f;let x=typeof t=="string"?Hd(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||en(!1),d=x}else d=u;let p=d.pathname||"/",h=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=O$(e,{pathname:h}),v=f9(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Nl([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Nl([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,n);return t&&v?b.createElement(Zy.Provider,{value:{location:Kh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pl.Pop}},v):v}function l9(){let e=v9(),t=Q$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:i},r):null,null)}const c9=b.createElement(l9,null);class u9 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(Is.Provider,{value:this.props.routeContext},b.createElement(P6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d9(e){let{routeContext:t,match:r,children:n}=e,i=b.useContext(n5);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(Is.Provider,{value:t},n)}function f9(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||en(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=r,y=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let h,y=!1,v=null,x=null;r&&(h=o&&f.route.id?o[f.route.id]:void 0,v=f.route.errorElement||c9,c&&(u<0&&p===0?(y9("route-fallback"),y=!0,x=null):u===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,p+1)),_=()=>{let S;return h?S=v:y?S=x:f.route.Component?S=b.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,b.createElement(d9,{match:f,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?b.createElement(u9,{location:r.location,revalidation:r.revalidation,component:v,error:h,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var T6=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(T6||{}),I6=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(I6||{});function h9(e){let t=b.useContext(n5);return t||en(!1),t}function p9(e){let t=b.useContext(t9);return t||en(!1),t}function m9(e){let t=b.useContext(Is);return t||en(!1),t}function L6(e){let t=m9(),r=t.matches[t.matches.length-1];return r.route.id||en(!1),r.route.id}function v9(){var e;let t=b.useContext(P6),r=p9(),n=L6();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function g9(){let{router:e}=h9(T6.UseNavigateStable),t=L6(I6.UseNavigateStable),r=b.useRef(!1);return C6(()=>{r.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Kh({fromRouteId:t},a)))},[e,t])}const Nk={};function y9(e,t,r){Nk[e]||(Nk[e]=!0)}function x9(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function S2(e){let{to:t,replace:r,state:n,relative:i}=e;Vd()||en(!1);let{future:a,static:s}=b.useContext(Fl),{matches:o}=b.useContext(Is),{pathname:c}=su(),u=wi(),d=r5(t,t5(o,a.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:i}),[u,f,i,r,n]),null}function D6(e){return a9(e.context)}function Dt(e){en(!1)}function b9(e){let{basename:t="/",children:r=null,location:n,navigationType:i=pl.Pop,navigator:a,static:s=!1,future:o}=e;Vd()&&en(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:s,future:Kh({v7_relativeSplatPath:!1},o)}),[c,o,a,s]);typeof n=="string"&&(n=Hd(n));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:y="default"}=n,v=b.useMemo(()=>{let x=e5(d,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:y},navigationType:i}},[c,d,f,p,h,y,i]);return v==null?null:b.createElement(Fl.Provider,{value:u},b.createElement(Zy.Provider,{children:r,value:v}))}function w9(e){let{children:t,location:r}=e;return s9(N2(t),r)}new Promise(()=>{});function N2(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,i)=>{if(!b.isValidElement(n))return;let a=[...t,i];if(n.type===b.Fragment){r.push.apply(r,N2(n.props.children,a));return}n.type!==Dt&&en(!1),!n.props.index||!n.props.children||en(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=N2(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k2.apply(this,arguments)}function _9(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function j9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function S9(e,t){return e.button===0&&(!t||t==="_self")&&!j9(e)}function A2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function N9(e,t){let r=A2(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}const k9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A9="6";try{window.__reactRouterVersion=A9}catch{}const E9="startTransition",kk=jC[E9];function P9(e){let{basename:t,children:r,future:n,window:i}=e,a=b.useRef();a.current==null&&(a.current=E$({window:i,v5Compat:!0}));let s=a.current,[o,c]=b.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=b.useCallback(f=>{u&&kk?kk(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>s.listen(d),[s,d]),b.useEffect(()=>x9(n),[n]),b.createElement(b9,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const C9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pr=b.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=_9(t,k9),{basename:h}=b.useContext(Fl),y,v=!1;if(typeof u=="string"&&O9.test(u)&&(y=u,C9))try{let S=new URL(window.location.href),j=u.startsWith("//")?new URL(S.protocol+u):new URL(u),A=e5(j.pathname,h);j.origin===S.origin&&A!=null?u=A+j.search+j.hash:v=!0}catch{}let x=r9(u,{relative:i}),g=T9(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:f});function _(S){n&&n(S),S.defaultPrevented||g(S)}return b.createElement("a",k2({},p,{href:y||x,onClick:v||a?n:_,ref:r,target:c}))});var Ak;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ak||(Ak={}));var Ek;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ek||(Ek={}));function T9(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}=t===void 0?{}:t,c=wi(),u=su(),d=O6(e,{relative:s});return b.useCallback(f=>{if(S9(f,r)){f.preventDefault();let p=n!==void 0?n:kg(u)===kg(d);c(e,{replace:p,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,c,d,n,i,r,e,a,s,o])}function I9(e){let t=b.useRef(A2(e)),r=b.useRef(!1),n=su(),i=b.useMemo(()=>N9(n.search,r.current?null:t.current),[n.search]),a=wi(),s=b.useCallback((o,c)=>{const u=A2(typeof o=="function"?o(i):o);r.current=!0,a("?"+u,c)},[a,i]);return[i,s]}function Qy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function L9(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}const D9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class i5 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class R9 extends i5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Pk extends i5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ck extends i5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var E2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(E2||(E2={}));class M9{constructor(t,{headers:r={},customFetch:n,region:i=E2.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=D9(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return L9(this,arguments,void 0,function*(r,n={}){var i;let a,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let p={},{region:h}=n;h||(h=this.region);const y=new URL(`${this.url}/${r}`);h&&h!=="any"&&(p["x-region"]=h,y.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(p["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(p["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let x=d;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const g=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:v,signal:x}).catch(A=>{throw new R9(A)}),_=g.headers.get("x-relay-error");if(_&&_==="true")throw new Pk(g);if(!g.ok)throw new Ck(g);let S=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield g.json():S==="application/octet-stream"||S==="application/pdf"?j=yield g.blob():S==="text/event-stream"?j=g:S==="multipart/form-data"?j=yield g.formData():j=yield g.text(),{data:j,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof Ck||o instanceof Pk?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var F9=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},B9=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let s=null,o=null,c=null,u=a.status,d=a.statusText;if(a.ok){var f,p;if(r.method!=="HEAD"){var h;const g=await a.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?o=g:o=JSON.parse(g))}const v=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(p=a.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");v&&x&&x.length>1&&(c=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,u=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var y;const v=await a.text();try{s=JSON.parse(v),Array.isArray(s)&&a.status===404&&(o=[],s=null,u=200,d="OK")}catch{a.status===404&&v===""?(u=204,d="No Content"):s={message:v}}if(s&&r.isMaybeSingle&&(!(s==null||(y=s.details)===null||y===void 0)&&y.includes("0 rows"))&&(s=null,u=200,d="OK"),s&&r.shouldThrowOnError)throw new F9(s)}return{error:s,data:o,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(i=i.catch(a=>{var s;let o="";const c=a==null?void 0:a.cause;if(c){var u,d,f,p;const y=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",v=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";o=`${(f=a==null?void 0:a.name)!==null&&f!==void 0?f:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${y}`,v&&(o+=` (${v})`),c!=null&&c.stack&&(o+=`
${c.stack}`)}else{var h;o=(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},$9=class extends B9{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var s;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Ok=new RegExp("[,()]");var Wu=class extends $9{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Ok.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Ok.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},U9=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},i=r?"HEAD":"GET";let a=!1;const s=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:o,headers:c}=this.cloneRequestState();return o.searchParams.set("select",s),n&&c.append("Prefer",`count=${n}`),new Wu({method:i,url:o,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const i="POST",{url:a,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),r||s.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new Wu({method:i,url:a,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;const s="POST",{url:o,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);o.searchParams.set("columns",d.join(","))}}return new Wu({method:s,url:o,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Wu({method:n,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Wu({method:r,url:n,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},z9=class R6{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new U9(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new R6(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var s;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(d)),f=n&&Object.values(r).some(d);f?(o="POST",u=r):n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([h,y])=>y!==void 0).map(([h,y])=>[h,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([h,y])=>{c.searchParams.append(h,y)})):(o="POST",u=r);const p=new Headers(this.headers);return f?p.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&p.set("Prefer",`count=${a}`),new Wu({method:o,url:c,headers:p,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};class q9{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const W9="2.93.2",H9=`realtime-js/${W9}`,V9="1.0.0",M6="2.0.0",Tk=M6,P2=1e4,K9=1e3,G9=100;var al;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(al||(al={}));var gn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(gn||(gn={}));var $a;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($a||($a={}));var C2;(function(e){e.websocket="websocket"})(C2||(C2={}));var yc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yc||(yc={}));class Y9{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var i,a;const s=t.topic,o=(i=t.ref)!==null&&i!==void 0?i:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let y=new DataView(h),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,o.length),y.setUint8(v++,s.length),y.setUint8(v++,u.length),y.setUint8(v++,f.length),y.setUint8(v++,r),Array.from(c,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(o,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(s,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(u,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(f,g=>y.setUint8(v++,g.charCodeAt(0)));var x=new Uint8Array(h.byteLength+n.byteLength);return x.set(new Uint8Array(h),0),x.set(new Uint8Array(n),h.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,a,s,o,c]=n;return r({join_ref:i,ref:a,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+i));c=c+i;const d=n.decode(t.slice(c,c+a));c=c+a;const f=n.decode(t.slice(c,c+s));c=c+s;const p=t.slice(c,t.byteLength),h=o===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,y={type:this.BROADCAST_EVENT,event:d,payload:h};return s>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class F6{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(dr||(dr={}));const Ik=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=J9(s,e,t,i),a),{}):{}},J9=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?B6(a,s):O2(s)},B6=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return eU(t,r)}switch(e){case dr.bool:return X9(t);case dr.float4:case dr.float8:case dr.int2:case dr.int4:case dr.int8:case dr.numeric:case dr.oid:return Z9(t);case dr.json:case dr.jsonb:return Q9(t);case dr.timestamp:return tU(t);case dr.abstime:case dr.date:case dr.daterange:case dr.int4range:case dr.int8range:case dr.money:case dr.reltime:case dr.text:case dr.time:case dr.timestamptz:case dr.timetz:case dr.tsrange:case dr.tstzrange:return O2(t);default:return O2(t)}},O2=e=>e,X9=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Z9=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Q9=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},eU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>B6(t,o))}return e},tU=e=>typeof e=="string"?e.replace(" ","T"):e,$6=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class N1{constructor(t,r,n={},i=P2){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lk||(Lk={}));class jh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jh.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=jh.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=jh.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(a,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=a[u];if(f){const p=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),y=d.filter(x=>h.indexOf(x.presence_ref)<0),v=f.filter(x=>p.indexOf(x.presence_ref)<0);y.length>0&&(o[u]=y),v.length>0&&(c[u]=v)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);t[o].unshift(...p)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Dk||(Dk={}));var Sh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Sh||(Sh={}));var ro;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ro||(ro={}));class ld{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=gn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new N1(this,$a.join,this.params,this.timeout),this.rejoinTimer=new F6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=gn.errored,this.rejoinTimer.scheduleTimeout())}),this._on($a.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new jh(this),this.broadcastEndpointURL=$6(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==gn.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Sh.PRESENCE]&&this.bindings[Sh.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(ro.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(ro.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(ro.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,g=[];for(let _=0;_<x;_++){const S=v[_],{filter:{event:j,schema:A,table:N,filter:D}}=S,E=h&&h[_];if(E&&E.event===j&&ld.isFilterValueEqual(E.schema,A)&&ld.isFilterValueEqual(E.table,N)&&ld.isFilterValueEqual(E.filter,D))g.push(Object.assign(Object.assign({},S),{id:E.id}));else{this.unsubscribe(),this.state=gn.errored,t==null||t(ro.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ro.SUBSCRIBED);return}}).receive("error",h=>{this.state=gn.errored,t==null||t(ro.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ro.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===gn.joined&&t===Sh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=gn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($a.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new N1(this,$a.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new N1(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>G9){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=$a;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let p=this._onMessage(s,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var y,v,x;return((y=h.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(v=h.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(p,n)):(a=this.bindings[s])===null||a===void 0||a.filter(h=>{var y,v,x,g,_,S;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const j=h.id,A=(y=h.filter)===null||y===void 0?void 0:y.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(_=(g=h==null?void 0:h.filter)===null||g===void 0?void 0:g.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return j==="*"||j===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:v,table:x,commit_timestamp:g,type:_,errors:S}=y;p=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:g,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(y))}h.callback(p,n)})}_isClosed(){return this.state===gn.closed}_isJoined(){return this.state===gn.joined}_isJoining(){return this.state===gn.joining}_isLeaving(){return this.state===gn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ld.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($a.close,{},t)}_onError(t){this._on($a.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ik(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ik(t.columns,t.old_record)),r}}const k1=()=>{},ev={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rU=[1e3,2e3,5e3,1e4],nU=1e4,iU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=P2,this.transport=null,this.heartbeatIntervalMs=ev.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=k1,this.ref=0,this.reconnectTimer=null,this.vsn=Tk,this.logger=k1,this.conn=null,this.sendBuffer=[],this.serializer=new Y9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${C2.websocket}`,this.httpEndpoint=$6(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=q9.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case al.connecting:return yc.Connecting;case al.open:return yc.Open;case al.closing:return yc.Closing;default:return yc.Closed}}isConnected(){return this.connectionState()===yc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new ld(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(K9,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ev.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:a,ref:s}=r,o=s?`(${s})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===al.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===al.open||this.conn.readyState===al.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger($a.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([iU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:H9};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push($a.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new F6(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ev.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,o,c,u,d,f,p,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:P2,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:ev.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:k1,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Tk,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>rU[y-1]||nU,this.vsn){case V9:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,v)=>v(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,v)=>v(JSON.parse(y));break;case M6:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Gh=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function sU(e,t,r){const n=new URL(t,e);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function oU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function lU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:s}){const o=sU(e.baseUrl,n,i),c=await oU(e.auth),u=await t(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...s},body:a?JSON.stringify(a):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&d?JSON.parse(d):d;if(!u.ok){const h=f?p:void 0,y=h==null?void 0:h.error;throw new Gh((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function tv(e){return e.join("")}var cU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:tv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tv(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tv(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tv(e.namespace)}`}),!0}catch(t){if(t instanceof Gh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Gh&&r.status===409)return;throw r}}};function Ou(e){return e.join("")}var uU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ou(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ou(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ou(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ou(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ou(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ou(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Gh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Gh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},dU=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=lU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new cU(this.client,t),this.tableOps=new uU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},e0=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function t0(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var rv=class extends e0{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},U6=class extends e0{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const fU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),hU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},T2=e=>{if(Array.isArray(e))return e.map(r=>T2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=T2(n)}),t},pU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function mU(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vU(e){var t=mU(e,"string");return Yh(t)=="symbol"?t:t+""}function gU(e,t,r){return(t=vU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(n){gU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Mk=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},yU=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e,a=i.status||500;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new rv(Mk(s),a,o,n))}).catch(()=>{if(n==="vectors"){const s=a+"";t(new rv(i.statusText||`HTTP ${a} error`,a,s,n))}else{const s=a+"";t(new rv(i.statusText||`HTTP ${a} error`,a,s,n))}});else{const s=a+"";t(new rv(i.statusText||`HTTP ${a} error`,a,s,n))}}else t(new U6(Mk(e),e,n))},xU=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?ft(ft({},i),r):(hU(n)?(i.headers=ft({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),ft(ft({},i),r))};async function Kf(e,t,r,n,i,a,s){return new Promise((o,c)=>{e(r,xU(t,n,i,a)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(s==="vectors"){const d=u.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>o(u)).catch(u=>yU(u,c,n,s))})}function bU(e="storage"){return{get:async(t,r,n,i)=>Kf(t,"GET",r,n,i,void 0,e),post:async(t,r,n,i,a)=>Kf(t,"POST",r,i,a,n,e),put:async(t,r,n,i,a)=>Kf(t,"PUT",r,i,a,n,e),head:async(t,r,n,i)=>Kf(t,"HEAD",r,ft(ft({},n),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,r,n,i,a)=>Kf(t,"DELETE",r,i,a,n,e)}}const wU=bU("storage"),{get:Jh,post:Nr,put:I2,head:_U,remove:a5}=wU;var Kd=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=fU(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(t0(r))return{data:null,error:r};throw r}}},jU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(t0(t))return{data:null,error:t};throw t}}};let z6;z6=Symbol.toStringTag;var SU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[z6]="BlobDownloadBuilder",this.promise=null}asStream(){return new jU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(t0(t))return{data:null,error:t};throw t}}};const NU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var kU=class extends Kd{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var i=this;return i.handleOperation(async()=>{let a;const s=ft(ft({},Fk),n);let o=ft(ft({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",i.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),c&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(c))):(a=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),n!=null&&n.headers&&(o=ft(ft({},o),n.headers));const u=i._removeEmptyFolders(t),d=i._getFinalPath(u),f=await(e=="PUT"?I2:Nr)(i.fetch,`${i.url}/object/${d}`,a,ft({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var i=this;const a=i._removeEmptyFolders(e),s=i._getFinalPath(a),o=new URL(i.url+`/object/upload/sign/${s}`);return o.searchParams.set("token",t),i.handleOperation(async()=>{let c;const u=ft({upsert:Fk.upsert},n),d=ft(ft({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:a,fullPath:(await I2(i.fetch,o.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const i=ft({},r.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=await Nr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(r.url+a.url),o=s.searchParams.get("token");if(!o)throw new e0("No token returned by API");return{signedUrl:s.toString(),path:e,token:o}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Nr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Nr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e),a=await Nr(n.fetch,`${n.url}/object/sign/${i}`,ft({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${s}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const i=await Nr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i.map(s=>ft(ft({},s),{},{signedUrl:s.signedURL?encodeURI(`${n.url}${s.signedURL}${a}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=n?`?${n}`:"",a=this._getFinalPath(e),s=()=>Jh(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new SU(s,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>T2(await Jh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await _U(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(t0(n)&&n instanceof U6){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});s!==""&&n.push(s);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await a5(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const i=ft(ft(ft({},NU),t),{},{prefix:e||""});return await Nr(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=ft({},e);return await Nr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const AU="2.93.2",Np={"X-Client-Info":`storage-js/${AU}`};var EU=class extends Kd{constructor(e,t={},r,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),s=ft(ft({},Np),t);super(a,s,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Jh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Jh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await I2(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await a5(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},PU=class extends Kd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=ft(ft({},Np),t);super(n,i,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Jh(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await a5(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!pU(e))throw new e0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new dU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const s=i[a];return typeof s!="function"?s:async(...o)=>{try{return{data:await s.apply(i,o),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},CU=class extends Kd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=ft(ft({},Np),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},OU=class extends Kd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=ft(ft({},Np),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},TU=class extends Kd{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=ft(ft({},Np),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},IU=class extends TU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new LU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},LU=class extends CU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new DU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},DU=class extends OU{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,ft(ft({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},RU=class extends EU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new kU(this.url,this.headers,e,this.fetch)}get vectors(){return new IU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new PU(this.url+"/iceberg",this.headers,this.fetch)}};const q6="2.93.2",Hu=30*1e3,L2=3,A1=L2*Hu,MU="http://localhost:9999",FU="supabase.auth.token",BU={"X-Client-Info":`gotrue-js/${q6}`},D2="X-Supabase-Api-Version",W6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$U=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,UU=10*60*1e3;class Xh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class zU extends Xh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function qU(e){return nt(e)&&e.name==="AuthApiError"}class xc extends Xh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Po extends Xh{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class qi extends Po{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function E1(e){return nt(e)&&e.name==="AuthSessionMissingError"}class Tu extends Po{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nv extends Po{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class iv extends Po{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function WU(e){return nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bk extends Po{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class HU extends Po{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class R2 extends Po{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function P1(e){return nt(e)&&e.name==="AuthRetryableFetchError"}class $k extends Po{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class M2 extends Po{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ag="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uk=` 	
\r=`.split(""),VU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Uk.length;t+=1)e[Uk[t].charCodeAt(0)]=-2;for(let t=0;t<Ag.length;t+=1)e[Ag[t].charCodeAt(0)]=t;return e})();function zk(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ag[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ag[n]),t.queuedBits-=6}}function H6(e,t,r){const n=VU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qk(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{YU(s,n,r)};for(let s=0;s<e.length;s+=1)H6(e.charCodeAt(s),i,a);return t.join("")}function KU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function GU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}KU(n,t)}}function YU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function yd(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)H6(e.charCodeAt(i),r,n);return new Uint8Array(t)}function JU(e){const t=[];return GU(e,r=>t.push(r)),new Uint8Array(t)}function Sc(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>zk(i,r,n)),zk(null,r,n),t.join("")}function XU(e){return Math.round(Date.now()/1e3)+e}function ZU(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",oc={tested:!1,writable:!1},V6=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oc.tested)return oc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),oc.tested=!0,oc.writable=!0}catch{oc.tested=!0,oc.writable=!1}return oc.writable};function QU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const K6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ez=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Un=async(e,t)=>{await e.removeItem(t)};class r0{constructor(){this.promise=new r0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}r0.promiseConstructor=Promise;function av(e){const t=e.split(".");if(t.length!==3)throw new M2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!$U.test(t[n]))throw new M2("JWT not in base64url format");return{header:JSON.parse(qk(t[0])),payload:JSON.parse(qk(t[1])),signature:yd(t[2]),raw:{header:t[0],payload:t[1]}}}async function tz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rz(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function nz(e){return("0"+e.toString(16)).substr(-2)}function iz(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,nz).join("")}async function az(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function sz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await az(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Iu(e,t,r=!1){const n=iz();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Vu(e,`${t}-code-verifier`,i);const a=await sz(n);return[a,n===a?"plain":"s256"]}const oz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lz(e){const t=e.headers.get(D2);if(!t||!t.match(oz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function cz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function uz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lu(e){if(!dz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function C1(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fz(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function Wk(e){return JSON.parse(JSON.stringify(e))}const hc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hz=[502,503,504];async function Hk(e){var t;if(!ez(e))throw new R2(hc(e),0);if(hz.includes(e.status))throw new R2(hc(e),e.status);let r;try{r=await e.json()}catch(a){throw new xc(hc(a),a)}let n;const i=lz(e);if(i&&i.getTime()>=W6["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new $k(hc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new qi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new $k(hc(r),e.status,r.weak_password.reasons);throw new zU(hc(r),e.status||500,n)}const pz=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ut(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[D2]||(a[D2]=W6["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await mz(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function mz(e,t,r,n,i,a){const s=pz(t,n,i,a);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new R2(hc(c),0)}if(o.ok||await Hk(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Hk(c)}}function Ma(e){var t;let r=null;yz(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=XU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Vk(e){const t=Ma(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ul(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vz(e){return{data:e,error:null}}function gz(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=Qy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function Kk(e){return e}function yz(e){return e.access_token&&e.refresh_token&&e.expires_in}const O1=["global","local","others"];class xz{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=K6(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=O1[0]){if(O1.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${O1.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ul})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Qy(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:gz,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ul})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Kk});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(nt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Lu(t);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ul})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Lu(t);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ul})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Lu(t);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ul})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Lu(t.userId);try{const{data:r,error:n}=await ut(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Lu(t.userId),Lu(t.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Kk});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(nt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ut(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ut(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function Gk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Du={debug:!!(globalThis&&V6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class G6 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class bz extends G6{}async function wz(e,t,r){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Du.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new bz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Du.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function _z(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Y6(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function jz(e){return parseInt(e,16)}function Sz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Nz(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=Y6(e.address),y=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",x=`${y} wants you to sign in with your Ethereum account:
${h}

${v}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),o&&(g+=`
Not Before: ${o.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let _=`
Resources:`;for(const S of u){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);_+=`
- ${S}`}g+=_}return`${x}
${g}`}class an extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Eg extends an{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function kz({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new an({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new an({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new an({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new an({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new an({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new an({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new an({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new an({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(J6(s)){if(a.rp.id!==s)return new an({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new an({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new an({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new an({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new an({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Az({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new an({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new an({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(J6(n)){if(r.rpId!==n)return new an({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new an({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new an({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new an({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Ez{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Pz=new Ez;function Cz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=Qy(e,["challenge","user","excludeCredentials"]),a=yd(t).buffer,s=Object.assign(Object.assign({},r),{id:yd(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:yd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Oz(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Qy(e,["challenge","allowCredentials"]),i=yd(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:yd(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function Tz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Sc(new Uint8Array(e.response.attestationObject)),clientDataJSON:Sc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Iz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Sc(new Uint8Array(i.authenticatorData)),clientDataJSON:Sc(new Uint8Array(i.clientDataJSON)),signature:Sc(new Uint8Array(i.signature)),userHandle:i.userHandle?Sc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function J6(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Yk(){var e,t;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Lz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Eg("Browser returned unexpected credential type",t)}:{data:null,error:new Eg("Empty credential response",t)}}catch(t){return{data:null,error:kz({error:t,options:e})}}}async function Dz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Eg("Browser returned unexpected credential type",t)}:{data:null,error:new Eg("Empty credential response",t)}}catch(t){return{data:null,error:Az({error:t,options:e})}}}const Rz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Mz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Pg(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const o=n[a];t(o)?n[a]=Pg(o,s):n[a]=Pg(s)}else n[a]=s}return n}function Fz(e,t){return Pg(Rz,e,t||{})}function Bz(e,t){return Pg(Mz,e,t||{})}class $z{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=i??Pz.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=Fz(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:f}=await Lz({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=Bz(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:f}=await Dz(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Xh("rpId is required for WebAuthn authentication")};try{if(!Yk())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Xh("rpId is required for WebAuthn registration")};try{if(!Yk())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in register",s)}}}}_z();const Uz={url:MU,storageKey:FU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Jk(e,t,r){return await r()}const Ru={};class Zh{get jwks(){var t,r;return(r=(t=Ru[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ru[this.storageKey]=Object.assign(Object.assign({},Ru[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ru[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ru[this.storageKey]=Object.assign(Object.assign({},Ru[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Uz),t);if(this.storageKey=a.storageKey,this.instanceID=(r=Zh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Zh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&zn()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new xz({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=K6(a.fetch),this.lock=a.lock||Jk,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&zn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wz:this.lock=Jk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $z(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:V6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gk(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Gk(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s);try{await this._notifyAllSubscribers(s.data.event,s.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(s=>{this._debug("#initialize()","error",s)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${q6}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(zn()&&(r=QU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),zn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),WU(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?this._returnResult({error:r}):this._returnResult({error:new xc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ma}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(nt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:d,password:f,options:p}=t;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await Iu(this.storage,this.storageKey)),a=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:y},xform:Ma})}else if("phone"in t){const{phone:d,password:f,options:p}=t;a=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ma})}else throw new nv("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await Un(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:o}=t;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vk})}else if("phone"in t){const{phone:a,password:s,options:o}=t;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vk})}else throw new nv("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Tu;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,o,c,u,d,f,p;let h,y;if("message"in t)h=t.message,y=t.signature;else{const{chain:v,wallet:x,statement:g,options:_}=t;let S;if(zn())if(typeof x=="object")S=x;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")S=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const j=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href),A=await S.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=Y6(A[0]);let D=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!D){const C=await S.request({method:"eth_chainId"});D=jz(C)}const E={domain:j.host,address:N,statement:g,uri:j.href,version:"1",chainId:D,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=Nz(E),y=await S.request({method:"personal_sign",params:[Sz(h),N]})}try{const{data:v,error:x}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ma});if(x)throw x;if(!v||!v.session||!v.user){const g=new Tu;return this._returnResult({data:{user:null,session:null},error:g})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(nt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,i,a,s,o,c,u,d,f,p,h;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:x,wallet:g,statement:_,options:S}=t;let j;if(zn())if(typeof g=="object")j=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const A=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),_?{statement:_}:null));let D;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")D=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)D=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)y=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),v=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(d=S==null?void 0:S.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:x,error:g}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Sc(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Ma});if(g)throw g;if(!x||!x.session||!x.user){const _=new Tu;return this._returnResult({data:{user:null,session:null},error:_})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:g})}catch(x){if(nt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await lc(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new HU;const{data:a,error:s}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ma});if(await Un(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new Tu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,o=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ma}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Tu;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Iu(this.storage,this.storageKey));const{error:f}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new nv("You must provide either an email or phone number.")}catch(o){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ma});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,a,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Iu(this.storage,this.storageKey));const u=await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:vz});return!((a=u.data)===null||a===void 0)&&a.url&&zn()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new qi;const{error:i}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(nt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:o}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new nv("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await lc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<A1:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await lc(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=C1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=fz(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ul}):await this._useSession(async r=>{var n,i,a;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qi}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ul})})}catch(r){if(nt(r))return E1(r)&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new qi;const s=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Iu(this.storage,this.storageKey));const{data:u,error:d}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:ul});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qi;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=av(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(nt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new qi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!zn())throw new iv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new iv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new iv("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bk("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!s||!u)throw new iv("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;c&&(p=parseInt(c));const h=p-d;h*1e3<=Hu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const y=p-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,d);const{data:v,error:x}=await this._getUser(a);if(x)throw x;const g={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:p,refresh_token:s,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(nt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await lc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a&&!E1(a))return this._returnResult({error:a});const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(qU(o)&&(o.status===404||o.status===401||o.status===403)||E1(o)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=ZU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Iu(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,o,c,u,d;const{data:f,error:p}=a;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return zn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(nt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ma}),{data:p,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Tu}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(i){if(await Un(this.storage,`${this.storageKey}-code-verifier`),nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rz(async i=>(i>0&&await tz(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ma})),(i,a)=>{const s=200*Math.pow(2,i);return a&&P1(a)&&Date.now()+s-n<Hu})}catch(n){if(this._debug(r,"error",n),nt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),zn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await lc(this.storage,this.storageKey);if(i&&this.userStorage){let s=await lc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Vu(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:C1()}else if(i&&!i.user&&!i.user){const s=await lc(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Un(this.storage,this.storageKey+"-user"),await Vu(this.storage,this.storageKey,i)):i.user=C1()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<A1;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${A1}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),P1(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new qi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new r0;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new qi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),nt(a)){const s={data:null,error:a};return P1(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Un(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vu(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Wk(i);await Vu(this.storage,this.storageKey,a)}else{const i=Wk(r);await Vu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Un(this.storage,this.storageKey),await Un(this.storage,this.storageKey+"-code-verifier"),await Un(this.storage,this.storageKey+"-user"),this.userStorage&&await Un(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Hu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Hu}ms, refresh threshold is ${L2} ticks`),i<=L2&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof G6)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await Iu(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await ut(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Tz(t.webauthn.credential_response):Iz(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Cz(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Oz(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,i,a;if(t)try{const{payload:h}=av(t);let y=null;h.aal&&(y=h.aal);let v=y;const{data:{user:x},error:g}=await this.getUser(t);if(g)return this._returnResult({data:null,error:g});((n=(r=x==null?void 0:x.factors)===null||r===void 0?void 0:r.filter(j=>j.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(v="aal2");const S=h.amr||[];return{data:{currentLevel:y,nextLevel:v,currentAuthenticationMethods:S},error:null}}catch(h){if(nt(h))return this._returnResult({data:null,error:h});throw h}const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=av(s.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((a=(i=s.user.factors)===null||i===void 0?void 0:i.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ut(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new qi})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new qi});const s=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&zn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new qi});const s=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&zn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ut(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new qi})})}catch(t){if(nt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await ut(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qi})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+UU>i)return n;const{data:a,error:s}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:y}=await this.getSession();if(y||!h.session)return this._returnResult({data:null,error:y});n=h.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:c}}=av(n);r!=null&&r.allowExpired||cz(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:a,header:i,signature:s},error:null}}const d=uz(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,JU(`${o}.${c}`)))throw new M2("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}}Zh.nextInstanceID={};const zz=Zh,qz="2.93.2";let uh="";typeof Deno<"u"?uh="deno":typeof document<"u"?uh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uh="react-native":uh="node";const Wz={"X-Client-Info":`supabase-js-${uh}/${qz}`},Hz={headers:Wz},Vz={schema:"public"},Kz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gz={};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function Yz(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jz(e){var t=Yz(e,"string");return Qh(t)=="symbol"?t:t+""}function Xz(e,t,r){return(t=Jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xk(Object(r),!0).forEach(function(n){Xz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Zz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Qz=()=>Headers,eq=(e,t,r)=>{const n=Zz(r),i=Qz();return async(a,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Br(Br({},s),{},{headers:u}))}};function tq(e){return e.endsWith("/")?e:e+"/"}function rq(e,t){var r,n;const{db:i,auth:a,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,p={db:Br(Br({},c),i),auth:Br(Br({},u),a),realtime:Br(Br({},d),s),storage:{},global:Br(Br(Br({},f),o),{},{headers:Br(Br({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function nq(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var iq=class extends zz{constructor(e){super(e)}},aq=class{constructor(e,t,r){var n,i;this.supabaseUrl=e,this.supabaseKey=t;const a=nq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:Vz,realtime:Gz,auth:Br(Br({},Kz),{},{storageKey:s}),global:Hz},c=rq(r??{},o);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=eq(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Br({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new z9(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new RU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new M9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:s,lock:o,debug:c,throwOnError:u},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iq({url:this.authUrl.href,headers:Br(Br({},p),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:s,lock:o,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new aU(this.realtimeUrl.href,Br(Br({},e),{},{params:Br(Br({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const sq=(e,t,r)=>new aq(e,t,r);function oq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}oq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lq="https://eqlhtuchgmucreolcvzq.supabase.co",cq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxbGh0dWNoZ211Y3Jlb2xjdnpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1OTU5ODQsImV4cCI6MjA4NTE3MTk4NH0.SLBgwtAENJlbE_CRpit5doYbXMvV6FgwPouosI742U0",be=sq(lq,cq,{auth:{persistSession:!0,autoRefreshToken:!0}});async function uq(e){const{data:t,error:r}=await be.auth.signInWithPassword({email:e.email,password:e.password});if(r)throw new Error(r.message);if(!t.user)throw new Error("Login failed. No user data returned.");const{data:n,error:i}=await be.from("user_profiles").select("*").eq("id",t.user.id).single();if(i||!n)throw new Error("User profile not found. Please contact support.");if(!n.is_active)throw await be.auth.signOut(),new Error("Your account has been deactivated. Please contact admin.");let a=[],s=null;if(n.role==="manager"){const{data:o,error:c}=await be.from("user_outlet_assignments").select("outlet_id, outlets(*)").eq("user_id",t.user.id);c?console.error("Error fetching outlet assignments:",c):o&&o.length>0&&(a=o.map(u=>u.outlets).filter(u=>u!==null),a.length===1&&(s=a[0].id))}return{profile:n,outlets:a,selectedOutlet:s}}async function dq(){const{error:e}=await be.auth.signOut();if(e)throw new Error(e.message)}async function fq(){const{data:{session:e},error:t}=await be.auth.getSession();if(t)throw new Error(t.message);return e}async function T1(){const e=await fq();if(!(e!=null&&e.user))return null;const{data:t,error:r}=await be.from("user_profiles").select("*").eq("id",e.user.id).single();if(r||!t)return null;let n=[],i=null;if(t.role==="manager"){const{data:a}=await be.from("user_outlet_assignments").select("outlet_id, outlets(*)").eq("user_id",e.user.id);a&&a.length>0&&(n=a.map(s=>s.outlets).filter(s=>s!==null),n.length===1&&(i=n[0].id))}return{profile:t,outlets:n,selectedOutlet:i}}const X6=b.createContext(void 0),hq={user:null,profile:null,outlets:[],selectedOutlet:null,isLoading:!0,isAuthenticated:!1,isAdmin:!1,isManager:!1,isAccountant:!1},cc={user:null,profile:null,outlets:[],selectedOutlet:null,isLoading:!1,isAuthenticated:!1,isAdmin:!1,isManager:!1,isAccountant:!1};function pq({children:e}){const t=wi(),[r,n]=b.useState(hq),i=b.useRef(!0),a=b.useRef(!1),s=(p,h,y)=>({user:{id:p.id,email:p.email,full_name:p.full_name,role:p.role,is_active:p.is_active},profile:p,outlets:h,selectedOutlet:y,isLoading:!1,isAuthenticated:!0,isAdmin:p.role==="admin",isManager:p.role==="manager",isAccountant:p.role==="accountant"});b.useEffect(()=>{if(i.current=!0,a.current){console.log("[AuthContext] Already initialized, skipping");return}a.current=!0;const p=setTimeout(()=>{i.current&&r.isLoading&&(console.warn("[AuthContext] Safety timeout triggered - forcing logged out state"),n(cc))},1e4);async function h(){console.log("[AuthContext] Initializing...");try{const{data:{session:v},error:x}=await be.auth.getSession();if(x){console.error("[AuthContext] Session error:",x),i.current&&n(cc);return}if(!v){console.log("[AuthContext] No session found"),i.current&&n(cc);return}console.log("[AuthContext] Session found, loading profile...");const g=await T1();if(!i.current)return;g&&g.profile?(console.log("[AuthContext] Profile loaded successfully"),n(s(g.profile,g.outlets,g.selectedOutlet))):(console.warn("[AuthContext] No profile found for session"),n(cc))}catch(v){console.error("[AuthContext] Initialization error:",v),i.current&&n(cc)}}h();const{data:y}=be.auth.onAuthStateChange(async(v,x)=>{if(console.log("[AuthContext] Auth event:",v),v==="INITIAL_SESSION"){console.log("[AuthContext] Skipping INITIAL_SESSION (handled by init)");return}if(i.current){if(v==="SIGNED_OUT"||!x){console.log("[AuthContext] Signed out"),n(cc);return}if(v==="SIGNED_IN"||v==="TOKEN_REFRESHED"){console.log("[AuthContext] Session updated, reloading profile...");try{const g=await T1();i.current&&g&&g.profile&&n(s(g.profile,g.outlets,g.selectedOutlet))}catch(g){console.error("[AuthContext] Profile reload error:",g)}}}});return()=>{console.log("[AuthContext] Unmounting..."),i.current=!1,clearTimeout(p),y==null||y.subscription.unsubscribe()}},[]);const o=b.useCallback(async(p,h)=>{const y=await uq({email:p,password:h});n(s(y.profile,y.outlets,y.selectedOutlet)),t("/dashboard")},[t]),c=b.useCallback(async()=>{try{await dq()}catch(p){console.error("[AuthContext] Logout error:",p)}n(cc),t("/login")},[t]),u=b.useCallback(p=>{n(h=>({...h,selectedOutlet:p}))},[]),d=b.useCallback(async()=>{try{const p=await T1();p&&p.profile&&n(h=>({...s(p.profile,p.outlets,p.selectedOutlet),selectedOutlet:p.selectedOutlet||h.selectedOutlet}))}catch(p){console.error("[AuthContext] Refresh profile error:",p)}},[]),f={...r,login:o,logout:c,setSelectedOutlet:u,refreshProfile:d};return l.jsx(X6.Provider,{value:f,children:e})}function Wt(){const e=b.useContext(X6);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Z6(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Z6(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ut(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Z6(e))&&(n&&(n+=" "),n+=t);return n}function As(...e){return Ut(e)}function Wr({size:e="md",className:t}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("svg",{className:As("animate-spin text-brand-primary",r[e],t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}function Zt({children:e,allowedRoles:t}){const{isLoading:r,isAuthenticated:n,user:i}=Wt();return r?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(Wr,{size:"lg"})}):n?t&&i&&!t.includes(i.role)?l.jsx(S2,{to:"/unauthorized",replace:!0}):l.jsx(l.Fragment,{children:e}):l.jsx(S2,{to:"/login",replace:!0})}function mq(){return l.jsx("div",{className:"min-h-screen bg-brand-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("img",{src:"/logo.png",alt:"Hybits",className:"h-20 mx-auto mb-4"}),l.jsx("p",{className:"text-brand-text/70 mt-2",children:"Production B2B Billing System"})]}),l.jsx(D6,{})]})})}/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),It=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>b.createElement("svg",{ref:d,...vq,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${gq(e)}`,o].join(" "),...u},[...t.map(([f,p])=>b.createElement(f,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=It("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=It("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=It("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=It("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=It("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=It("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=It("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=It("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=It("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=It("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=It("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=It("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=It("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=It("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=It("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=It("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=It("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=It("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=It("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=It("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=It("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=It("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=It("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=It("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=It("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=It("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=It("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=It("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=It("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=It("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=It("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=It("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=It("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=It("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=It("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=It("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=It("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fq=[{to:"/dashboard",icon:Pq,label:"Dashboard",roles:["admin","manager"]},{to:"/clients",icon:i0,label:"Clients",roles:["admin","manager","accountant"]},{to:"/subscriptions",icon:Lq,label:"Subscriptions",roles:["admin","manager","accountant"]},{to:"/events",icon:bq,label:"Events",roles:["admin","manager","accountant"]},{to:"/invoices",icon:B2,label:"Invoices",roles:["admin","manager","accountant"]},{to:"/payments",icon:Sq,label:"Payments",roles:["admin","manager","accountant"]},{to:"/reports",icon:Dq,label:"Reports",roles:["admin","manager","accountant"]},{to:"/reports/gst-working",icon:B2,label:"GST Working",roles:["admin","manager","accountant"]},{to:"/inventory",icon:ep,label:"Inventory",roles:["admin","manager","accountant"]}],Zk=[{to:"/admin/users",icon:Rq,label:"Users",roles:["admin"]},{to:"/admin/outlets",icon:eT,label:"Outlets",roles:["admin"]},{to:"/admin/access-matrix",icon:rT,label:"Access Matrix",roles:["admin","accountant"]},{to:"/admin/activity-logs",icon:Q6,label:"Activity Logs",roles:["admin","manager","accountant"]},{to:"/admin/settings",icon:tT,label:"Settings",roles:["admin"]}];function Bq(){const e=su(),{user:t,logout:r}=Wt(),n=async()=>{try{await r()}catch(i){console.error("Logout error:",i)}};return l.jsxs("div",{className:"flex flex-col h-screen w-64 bg-brand-deep text-white/90",children:[l.jsx("div",{className:"flex items-center justify-center h-16 border-b border-white/10 px-4",children:l.jsx("img",{src:"/logo.png",alt:"Hybits",className:"h-10 w-auto"})}),l.jsxs("div",{className:"px-4 py-4 border-b border-white/10",children:[l.jsx("div",{className:"text-sm font-medium text-white",children:t==null?void 0:t.full_name}),l.jsx("div",{className:"text-xs text-white/70 capitalize",children:t==null?void 0:t.role})]}),l.jsxs("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:[l.jsx("div",{className:"space-y-1 mb-6",children:Fq.map(i=>{if(!i.roles.includes((t==null?void 0:t.role)||""))return null;const a=i.icon,s=e.pathname===i.to;return l.jsxs(pr,{to:i.to,className:As("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",s?"bg-brand-primary text-white":"text-white/90 hover:bg-white/10 hover:text-white"),children:[l.jsx(a,{className:"h-5 w-5"}),i.label]},i.to)})}),Zk.some(i=>i.roles.includes((t==null?void 0:t.role)||""))&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Admin"}),l.jsx("div",{className:"space-y-1",children:Zk.map(i=>{if(!i.roles.includes((t==null?void 0:t.role)||""))return null;const a=i.icon,s=e.pathname===i.to;return l.jsxs(pr,{to:i.to,className:As("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",s?"bg-brand-primary text-white":"text-white/90 hover:bg-white/10 hover:text-white"),children:[l.jsx(a,{className:"h-5 w-5"}),i.label]},i.to)})})]})]}),l.jsx("div",{className:"px-3 py-4 border-t border-white/10",children:l.jsxs("button",{onClick:n,className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm font-medium text-white/90 hover:bg-white/10 hover:text-white transition-colors",children:[l.jsx(Oq,{className:"h-5 w-5"}),"Logout"]})})]})}function $q(){return l.jsxs("div",{className:"flex h-screen bg-brand-bg",children:[l.jsx(Bq,{}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"container mx-auto px-6 py-8",children:l.jsx(D6,{})})})]})}const He=bp.forwardRef(({label:e,error:t,helperText:r,className:n,id:i,...a},s)=>{const o=i||`input-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[e&&l.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-brand-text mb-1",children:[e,a.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsx("input",{ref:s,id:o,className:As("block w-full px-3 py-2 border rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent","disabled:bg-brand-bg disabled:cursor-not-allowed",t?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500":"border-brand-border text-brand-text placeholder-brand-text/50",n),...a}),t&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&l.jsx("p",{className:"mt-1 text-sm text-brand-text/70",children:r})]})});He.displayName="Input";function Pe({children:e,variant:t="primary",size:r="md",isLoading:n=!1,className:i,disabled:a,...s}){const o="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed focus:ring-offset-brand-bg",c={primary:"bg-brand-primary text-white hover:bg-brand-primaryDark focus:ring-brand-primary",secondary:"border border-brand-primary text-brand-primary hover:bg-brand-primary/10 focus:ring-brand-primary",outline:"border border-brand-primary text-brand-primary hover:bg-brand-primary/10 focus:ring-brand-primary",default:"border border-brand-primary text-brand-primary hover:bg-brand-primary/10 focus:ring-brand-primary",danger:"bg-brand-deep text-white hover:opacity-90 focus:ring-brand-deep",destructive:"bg-brand-deep text-white hover:opacity-90 focus:ring-brand-deep",ghost:"bg-transparent text-brand-text hover:bg-brand-border/50 focus:ring-brand-text"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return l.jsxs("button",{className:As(o,c[t]??c.primary,u[r],i),disabled:a||n,...s,children:[n&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}function we({children:e,className:t,padding:r="md"}){const n={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return l.jsx("div",{className:As("bg-white rounded-lg border border-brand-border shadow-sm",n[r],t),children:e})}function ht({children:e,variant:t="info",className:r}){const n={success:"bg-brand-primary/10 text-brand-primary border-brand-primary/30",error:"bg-red-50 text-red-800 border-red-200",warning:"bg-brand-primary/10 text-brand-text border-brand-border",info:"bg-brand-primary/10 text-brand-primary border-brand-primary/30"},a={success:_q,error:Mq,warning:F2,info:Eq}[t];return l.jsxs("div",{className:As("flex items-start gap-3 p-4 rounded-lg border",n[t],r),children:[l.jsx(a,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),l.jsx("div",{className:"flex-1",children:e})]})}function Uq(){const{login:e}=Wt(),[t,r]=b.useState(""),[n,i]=b.useState(""),[a,s]=b.useState(""),[o,c]=b.useState(!1),u=async d=>{d.preventDefault(),s(""),c(!0);try{await e(t,n)}catch(f){s(f.message||"Login failed. Please try again.")}finally{c(!1)}};return l.jsx(we,{children:l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Sign In"}),l.jsx("p",{className:"text-sm text-brand-text/70 mt-1",children:"Enter your credentials to access your account"})]}),a&&l.jsx(ht,{variant:"error",children:a}),l.jsx(He,{type:"email",label:"Email Address",value:t,onChange:d=>r(d.target.value),placeholder:"Enter your email",required:!0,autoComplete:"email"}),l.jsx(He,{type:"password",label:"Password",value:n,onChange:d=>i(d.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password"}),l.jsx(Pe,{type:"submit",className:"w-full",isLoading:o,disabled:!t||!n,children:o?"Signing in...":"Sign In"})]})})}async function zq(e){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),[i,a,s,o,c]=await Promise.all([be.from("clients").select("id",{count:"exact",head:!0}).eq("is_active",!0),be.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active").eq("is_active",!0),be.from("invoices").select("id",{count:"exact",head:!0}).eq("status","issued"),be.from("invoices_with_payment_status").select("balance_due").gt("balance_due",0),be.from("invoices").select("grand_total").eq("status","issued").gte("issued_at",n)]);i.error&&console.error("Dashboard: clients error",i.error),a.error&&console.error("Dashboard: subscriptions error",a.error),s.error&&console.error("Dashboard: invoices error",s.error),o.error&&console.error("Dashboard: outstanding error",o.error),c.error&&console.error("Dashboard: revenue error",c.error);const u=o.data?o.data.reduce((f,p)=>f+(p.balance_due||0),0):0,d=c.data?c.data.reduce((f,p)=>f+(p.grand_total||0),0):0;return{totalClients:i.count??0,activeSubscriptions:a.count??0,totalInvoices:s.count??0,outstandingAmount:u,currentMonthRevenue:d}}function qq(){const{user:e}=Wt(),[t,r]=b.useState(null),[n,i]=b.useState(!0),[a,s]=b.useState(null);b.useEffect(()=>{async function u(){if(e!=null&&e.id)try{i(!0),s(null);const d=await zq(e.id);r(d)}catch(d){console.error("Failed to load dashboard stats:",d),s(d instanceof Error?d.message:"Failed to load dashboard statistics")}finally{i(!1)}}u()},[e==null?void 0:e.id]);const o=u=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),c=u=>new Intl.NumberFormat("en-IN").format(u);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Dashboard"}),l.jsxs("p",{className:"text-brand-text/70 mt-1",children:["Welcome back, ",e==null?void 0:e.full_name]})]}),a&&l.jsx(ht,{variant:"error",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(F2,{className:"h-4 w-4"}),l.jsx("span",{children:a})]})}),n&&l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Wr,{size:"lg"})}),!n&&t&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:[l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Total Clients"}),l.jsx("p",{className:"text-3xl font-bold text-brand-primary mt-2",children:c(t.totalClients)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Active clients"})]}),l.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg",children:l.jsx(i0,{className:"h-6 w-6 text-brand-primary"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Active Subscriptions"}),l.jsx("p",{className:"text-3xl font-bold text-brand-primary mt-2",children:c(t.activeSubscriptions)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Recurring billing"})]}),l.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:l.jsx(wq,{className:"h-6 w-6 text-green-500"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Total Invoices"}),l.jsx("p",{className:"text-3xl font-bold text-brand-primary mt-2",children:c(t.totalInvoices)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Issued invoices"})]}),l.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:l.jsx(B2,{className:"h-6 w-6 text-blue-500"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"Outstanding"}),l.jsx("p",{className:"text-3xl font-bold text-orange-500 mt-2",children:o(t.outstandingAmount)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Pending collection"})]}),l.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:l.jsx(F2,{className:"h-6 w-6 text-orange-500"})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-brand-text/70",children:"This Month"}),l.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o(t.currentMonthRevenue)}),l.jsx("p",{className:"text-xs text-brand-text/50 mt-1",children:"Revenue (invoiced)"})]}),l.jsx("div",{className:"p-2 bg-green-600/10 rounded-lg",children:l.jsx(Aq,{className:"h-6 w-6 text-green-600"})})]})})]})]})}function a0(e){if(!e||e.trim()==="")return{valid:!0};const t=e.trim().toUpperCase();return t.length!==15?{valid:!1,error:"GSTIN must be exactly 15 characters"}:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(t)?{valid:!0}:{valid:!1,error:"Invalid GSTIN format. Example: 27AABCU9603R1ZV"}}function s0(e){if(!e||e.trim()==="")return{valid:!1,error:"Phone number is required"};const t=e.replace(/[\s\-()]/g,"");return[/^[6-9]\d{9}$/,/^\+91[6-9]\d{9}$/,/^91[6-9]\d{9}$/].some(i=>i.test(t))?{valid:!0}:{valid:!1,error:"Invalid phone number. Must be 10 digits starting with 6-9"}}async function Gd(e,t={}){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=be.from("clients").select(`
      *,
      outlets (
        id,
        name,
        code,
        city
      )
    `).eq("is_active",t.is_active??!0).order("created_at",{ascending:!1});if(r.role==="manager"){const{data:s}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}if(t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.client_type&&(n=n.eq("client_type",t.client_type)),t.search&&t.search.trim()!==""){const s=`%${t.search.trim()}%`;n=n.or(`name.ilike.${s},phone.ilike.${s}`)}const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function kp(e){const{data:t,error:r}=await be.from("clients").select(`
      *,
      outlets (
        id,
        name,
        code,
        city,
        state,
        gstin
      )
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function Wq(e,t){var s;const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create clients");if(!t.name||t.name.trim().length<2)throw new Error("Client name must be at least 2 characters");if(!t.phone)throw new Error("Phone number is required");const n=s0(t.phone);if(!n.valid)throw new Error(n.error);if(t.gstin){const o=a0(t.gstin);if(!o.valid)throw new Error(o.error)}if(r.role==="manager"){const{data:o}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((o==null?void 0:o.map(u=>u.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create clients for your assigned outlets")}const{data:i,error:a}=await be.from("clients").insert({...t,gstin:((s=t.gstin)==null?void 0:s.toUpperCase())||null}).select(`
      *,
      outlets (
        id,
        name,
        code,
        city
      )
    `).single();if(a)throw new Error(a.message);return i}async function Hq(e,t,r){const{data:n}=await be.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update clients");if(n.role==="manager"){if(r.client_type!==void 0)throw new Error("Only admins can change client type");if(r.outlet_id!==void 0)throw new Error("Only admins can change outlet assignment")}if(r.phone){const s=s0(r.phone);if(!s.valid)throw new Error(s.error)}if(r.gstin){const s=a0(r.gstin);if(!s.valid)throw new Error(s.error)}const{data:i,error:a}=await be.from("clients").update({...r,gstin:r.gstin?r.gstin.toUpperCase():void 0}).eq("id",t).select(`
      *,
      outlets (
        id,
        name,
        code,
        city
      )
    `).single();if(a)throw new Error(a.message);return i}const pt=bp.forwardRef(({label:e,error:t,helperText:r,options:n,className:i,id:a,children:s,...o},c)=>{const u=a||`select-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[e&&l.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-brand-text mb-1",children:[e,o.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsx("select",{ref:c,id:u,className:As("block w-full px-3 py-2 border rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent","disabled:bg-brand-bg disabled:cursor-not-allowed",t?"border-red-300 text-red-900 focus:ring-red-500":"border-brand-border text-brand-text",i),...o,children:n&&Array.isArray(n)?n.map(d=>l.jsx("option",{value:d.value,children:d.label},d.value)):s}),t&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&l.jsx("p",{className:"mt-1 text-sm text-brand-text/70",children:r})]})});pt.displayName="Select";function Yt({children:e,variant:t="default",className:r}){const n={success:"bg-brand-primary/20 text-brand-primary border-brand-primary/30",warning:"bg-brand-primary/20 text-brand-text border-brand-border",danger:"bg-red-100 text-red-800 border-red-200",destructive:"bg-red-100 text-red-800 border-red-200",info:"bg-brand-primary/20 text-brand-primary border-brand-primary/30",default:"bg-brand-border/50 text-brand-text border-brand-border",secondary:"bg-brand-border/50 text-brand-text border-brand-border"};return l.jsx("span",{className:As("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",n[t]??n.default,r),children:e})}function Vq(){const{user:e,isAccountant:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(""),[c,u]=b.useState({is_active:!0});b.useEffect(()=>{d()},[c]);const d=async()=>{if(e){a(!0),o("");try{const f=await Gd(e.id,c);n(f)}catch(f){o(f.message||"Failed to load clients")}finally{a(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Clients"}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage your client database"})]}),!t&&l.jsx(pr,{to:"/clients/new",children:l.jsxs(Pe,{children:[l.jsx($c,{className:"h-4 w-4 mr-2"}),"Add Client"]})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(He,{placeholder:"Search by name or phone...",value:c.search||"",onChange:f=>u({...c,search:f.target.value})}),l.jsx(pt,{value:c.client_type||"",onChange:f=>u({...c,client_type:f.target.value}),options:[{value:"",label:"All Types"},{value:"corporate",label:"Corporate"},{value:"event",label:"Event"}]}),l.jsx(pt,{value:c.is_active?"true":"false",onChange:f=>u({...c,is_active:f.target.value==="true"}),options:[{value:"true",label:"Active"},{value:"false",label:"Inactive"}]})]})}),s&&l.jsx(ht,{variant:"error",children:s}),i&&l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Wr,{size:"lg"})}),!i&&!s&&l.jsx(we,{padding:"none",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-brand-border",children:r.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"px-6 py-8 text-center text-brand-text/70",children:["No clients found. ",!t&&"Create your first client to get started."]})}):r.map(f=>{var p;return l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm font-medium text-brand-text",children:f.name}),f.contact_person&&l.jsx("div",{className:"text-sm text-brand-text/70",children:f.contact_person})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(Yt,{variant:f.client_type==="corporate"?"info":"warning",children:f.client_type})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:f.phone}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((p=f.outlets)==null?void 0:p.name)||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(Yt,{variant:f.is_active?"success":"danger",children:f.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[l.jsx(pr,{to:`/clients/${f.id}`,className:"text-brand-primary hover:text-brand-primaryDark",children:"View"}),!t&&l.jsx(pr,{to:`/clients/${f.id}/edit`,className:"text-brand-primary hover:text-brand-primaryDark",children:"Edit"})]})]},f.id)})})]})})})]})}function Kq(){var S;const e=wi(),{user:t,isAdmin:r,isManager:n,outlets:i,selectedOutlet:a}=Wt(),[s,o]=b.useState({outlet_id:n&&a?a:"",client_type:"corporate",name:"",contact_person:"",phone:"",email:"",gstin:"",billing_address:""}),[c,u]=b.useState([]),[d,f]=b.useState({}),[p,h]=b.useState(""),[y,v]=b.useState(!1);b.useEffect(()=>{r?x():n&&u(i)},[r,n,i]);const x=async()=>{const{data:j}=await be.from("outlets").select("*").eq("is_active",!0);j&&u(j)},g=()=>{const j={};if((!s.name||s.name.trim().length<2)&&(j.name="Client name must be at least 2 characters"),!s.phone)j.phone="Phone number is required";else{const A=s0(s.phone);A.valid||(j.phone=A.error)}if(s.gstin&&s.gstin.trim()){const A=a0(s.gstin);A.valid||(j.gstin=A.error)}return s.outlet_id||(j.outlet_id="Please select an outlet"),f(j),Object.keys(j).length===0},_=async j=>{if(j.preventDefault(),!(!t||!g())){h(""),v(!0);try{await Wq(t.id,s),e("/clients")}catch(A){h(A.message||"Failed to create client")}finally{v(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>e("/clients"),children:l.jsx(Id,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Add Client"}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Create a new client record"})]})]}),p&&l.jsx(ht,{variant:"error",children:p}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-brand-text mb-2",children:["Client Type ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"corporate",checked:s.client_type==="corporate",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Corporate (Subscriptions)"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"event",checked:s.client_type==="event",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Event (One-time)"})]})]})]}),r?l.jsx("div",{className:"md:col-span-2",children:l.jsx(pt,{label:"Outlet",required:!0,value:s.outlet_id,onChange:j=>o({...s,outlet_id:j.target.value}),error:d.outlet_id,options:[{value:"",label:"Select outlet"},...c.map(j=>({value:j.id,label:j.name}))]})}):l.jsx("div",{className:"md:col-span-2",children:l.jsx(He,{label:"Outlet",value:((S=c.find(j=>j.id===s.outlet_id))==null?void 0:S.name)||"",disabled:!0})}),l.jsx(He,{label:"Client Name",required:!0,value:s.name,onChange:j=>o({...s,name:j.target.value}),error:d.name,placeholder:"Enter client name"}),l.jsx(He,{label:"Contact Person",value:s.contact_person,onChange:j=>o({...s,contact_person:j.target.value}),placeholder:"Enter contact person name"}),l.jsx(He,{label:"Phone Number",required:!0,type:"tel",value:s.phone,onChange:j=>o({...s,phone:j.target.value}),error:d.phone,placeholder:"+91 98765 43210"}),l.jsx(He,{label:"Email",type:"email",value:s.email,onChange:j=>o({...s,email:j.target.value}),placeholder:"client@example.com"}),s.client_type==="corporate"&&l.jsx("div",{className:"md:col-span-2",children:l.jsx(He,{label:"GSTIN",value:s.gstin,onChange:j=>o({...s,gstin:j.target.value.toUpperCase()}),error:d.gstin,placeholder:"27AABCU9603R1ZV",helperText:"15-character GST number (optional)"})}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-brand-text mb-1",children:"Billing Address"}),l.jsx("textarea",{value:s.billing_address,onChange:j=>o({...s,billing_address:j.target.value}),rows:3,className:"block w-full px-3 py-2 border border-brand-border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Enter billing address"})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(Pe,{type:"button",variant:"secondary",onClick:()=>e("/clients"),children:"Cancel"}),l.jsx(Pe,{type:"submit",isLoading:y,children:"Create Client"})]})]})})]})}function Gq(){var d;const{id:e}=ou(),t=wi(),{isAccountant:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState("");b.useEffect(()=>{e&&u()},[e]);const u=async()=>{if(e){s(!0),c("");try{const f=await kp(e);f?i(f):c("Client not found or you do not have access")}catch(f){c(f.message||"Failed to load client")}finally{s(!1)}}};return a?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Wr,{size:"lg"})}):o||!n?l.jsxs("div",{className:"space-y-6",children:[l.jsx(ht,{variant:"error",children:o||"Client not found"}),l.jsxs(Pe,{variant:"ghost",onClick:()=>t("/clients"),children:[l.jsx(Id,{className:"h-4 w-4 mr-2"}),"Back to Clients"]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>t("/clients"),children:l.jsx(Id,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:n.name}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Client Details"})]})]}),!r&&l.jsx(pr,{to:`/clients/${n.id}/edit`,children:l.jsxs(Pe,{children:[l.jsx(n0,{className:"h-4 w-4 mr-2"}),"Edit"]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Basic Information"}),l.jsxs("dl",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Client Type"}),l.jsx("dd",{className:"mt-1",children:l.jsx(Yt,{variant:n.client_type==="corporate"?"info":"warning",children:n.client_type})})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Status"}),l.jsx("dd",{className:"mt-1",children:l.jsx(Yt,{variant:n.is_active?"success":"danger",children:n.is_active?"Active":"Inactive"})})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Outlet"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:((d=n.outlets)==null?void 0:d.name)||"-"})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Created At"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:new Date(n.created_at).toLocaleDateString()})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Contact Information"}),l.jsxs("dl",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Contact Person"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:n.contact_person||"-"})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Phone"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:n.phone})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"Email"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text",children:n.email||"-"})]}),n.gstin&&l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-brand-text/70",children:"GSTIN"}),l.jsx("dd",{className:"mt-1 text-sm text-brand-text font-mono",children:n.gstin})]})]})]}),n.billing_address&&l.jsxs(we,{className:"md:col-span-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Billing Address"}),l.jsx("p",{className:"text-sm text-brand-text whitespace-pre-line",children:n.billing_address})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text mb-4",children:"Related Records"}),l.jsx("p",{className:"text-sm text-brand-text/70",children:"Subscriptions, events, and invoices will appear here in future phases."})]})]})}function Yq(){var S;const{id:e}=ou(),t=wi(),{user:r,isAdmin:n}=Wt(),[i,a]=b.useState(null),[s,o]=b.useState({}),[c,u]=b.useState({}),[d,f]=b.useState(""),[p,h]=b.useState(!0),[y,v]=b.useState(!1);b.useEffect(()=>{e&&x()},[e]);const x=async()=>{if(e){h(!0);try{const j=await kp(e);j&&(a(j),o({name:j.name,contact_person:j.contact_person||"",phone:j.phone,email:j.email||"",gstin:j.gstin||"",billing_address:j.billing_address||"",gst_type:j.gst_type||null}))}catch(j){f(j.message||"Failed to load client")}finally{h(!1)}}},g=()=>{var A,N;const j={};if(s.name&&((A=s.name)==null?void 0:A.trim().length)<2&&(j.name="Client name must be at least 2 characters"),s.phone){const D=s0(s.phone);D.valid||(j.phone=D.error)}if(s.gstin&&((N=s.gstin)!=null&&N.trim())){const D=a0(s.gstin);D.valid||(j.gstin=D.error)}return u(j),Object.keys(j).length===0},_=async j=>{if(j.preventDefault(),!(!r||!e||!g())){f(""),v(!0);try{await Hq(r.id,e,s),t(`/clients/${e}`)}catch(A){f(A.message||"Failed to update client")}finally{v(!1)}}};return p?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Wr,{size:"lg"})}):i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>t(`/clients/${e}`),children:l.jsx(Id,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Edit Client"}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:i.name})]})]}),d&&l.jsx(ht,{variant:"error",children:d}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-brand-text mb-2",children:["Client Type",!n&&l.jsx("span",{className:"ml-2 text-xs text-brand-text/70",children:"(Admin only)"})]}),n?l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"corporate",checked:(s.client_type||i.client_type)==="corporate",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Corporate (Subscriptions)"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"client_type",value:"event",checked:(s.client_type||i.client_type)==="event",onChange:j=>o({...s,client_type:j.target.value}),className:"mr-2"}),l.jsx("span",{children:"Event (One-time)"})]})]}):l.jsx("div",{className:"px-3 py-2 bg-brand-bg border border-brand-border rounded-lg text-sm capitalize",children:i.client_type})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx(He,{label:`Outlet ${n?"":"(Admin only)"}`,value:((S=i.outlets)==null?void 0:S.name)||"",disabled:!0})}),l.jsx(He,{label:"Client Name",required:!0,value:s.name,onChange:j=>o({...s,name:j.target.value}),error:c.name}),l.jsx(He,{label:"Contact Person",value:s.contact_person,onChange:j=>o({...s,contact_person:j.target.value})}),l.jsx(He,{label:"Phone Number",required:!0,type:"tel",value:s.phone,onChange:j=>o({...s,phone:j.target.value}),error:c.phone}),l.jsx(He,{label:"Email",type:"email",value:s.email,onChange:j=>o({...s,email:j.target.value})}),(s.client_type||i.client_type)==="corporate"&&l.jsx("div",{className:"md:col-span-2",children:l.jsx(He,{label:"GSTIN",value:s.gstin,onChange:j=>o({...s,gstin:j.target.value.toUpperCase()}),error:c.gstin,placeholder:"27AABCU9603R1ZV"})}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs(pt,{label:"GST Type (for Reports)",value:s.gst_type||"",onChange:j=>o({...s,gst_type:j.target.value||null}),children:[l.jsx("option",{value:"",children:"-- Select GST Type --"}),l.jsx("option",{value:"domestic",children:"Domestic"}),l.jsx("option",{value:"sez",children:"SEZ"}),l.jsx("option",{value:"export",children:"Export"})]}),l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Used for GST Working Reports. Select based on client's GST classification."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-brand-text mb-1",children:"Billing Address"}),l.jsx("textarea",{value:s.billing_address,onChange:j=>o({...s,billing_address:j.target.value}),rows:3,className:"block w-full px-3 py-2 border border-brand-border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-primary"})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(Pe,{type:"button",variant:"secondary",onClick:()=>t(`/clients/${e}`),children:"Cancel"}),l.jsx(Pe,{type:"submit",isLoading:y,children:"Save Changes"})]})]})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsx(ht,{variant:"error",children:"Client not found or you do not have access"}),l.jsxs(Pe,{variant:"ghost",onClick:()=>t("/clients"),children:[l.jsx(Id,{className:"h-4 w-4 mr-2"}),"Back to Clients"]})]})}function s5(e,t,r){const n=typeof e=="string"?new Date(e):new Date(e);switch(t){case"daily":n.setDate(n.getDate()+1);break;case"weekly":n.setDate(n.getDate()+7);break;case"monthly":if(!r||r<1||r>28)throw new Error("Billing day must be between 1 and 28 for monthly billing");n.setMonth(n.getMonth()+1),n.setDate(r);break;default:throw new Error(`Invalid billing cycle: ${t}`)}return n.toISOString().split("T")[0]}function Jq(e,t){return s5(new Date,e,t)}function iT(e,t){switch(e){case"daily":return"Daily";case"weekly":return"Weekly";case"monthly":return t?`Monthly (Day ${t})`:"Monthly";default:return e}}function Xq(e){const t=typeof e=="string"?new Date(e):e,r=new Date;return r.setHours(0,0,0,0),t.setHours(0,0,0,0),t<r}function Og(){return new Date().toISOString().split("T")[0]}function Ns(e,t="short"){const r=typeof e=="string"?new Date(e):e;return t==="long"?r.toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):r.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}async function Zq(e,t={}){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=be.from("subscriptions").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city
      )
    `).order("created_at",{ascending:!1});if(r.role==="manager"){const{data:s}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.status&&(n=n.eq("status",t.status)),t.client_id&&(n=n.eq("client_id",t.client_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Yd(e){const{data:t,error:r}=await be.from("subscriptions").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        email,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city,
        state
      )
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function Qq(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create subscriptions");if(!t.client_id)throw new Error("Client is required");if(!t.billing_cycle)throw new Error("Billing cycle is required");if(!t.start_date)throw new Error("Start date is required");if(!t.quantity||t.quantity<=0)throw new Error("Quantity must be greater than 0");if(t.price_per_unit===void 0||t.price_per_unit<0)throw new Error("Price per unit must be 0 or greater");if(t.billing_cycle==="monthly"&&(!t.billing_day||t.billing_day<1||t.billing_day>28))throw new Error("Billing day must be between 1 and 28 for monthly billing");if(r.role==="manager"&&Xq(t.start_date))throw new Error("Managers cannot create subscriptions with past start dates");const n=await kp(t.client_id);if(!n)throw new Error("Client not found");if(n.client_type!=="corporate")throw new Error("Only corporate clients can have subscriptions. This client is an event client.");if(n.outlet_id!==t.outlet_id)throw new Error("Client does not belong to the selected outlet");if(r.role==="manager"){const{data:o}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((o==null?void 0:o.map(u=>u.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create subscriptions for your assigned outlets")}const i=s5(t.start_date,t.billing_cycle,t.billing_day),{data:a,error:s}=await be.from("subscriptions").insert({outlet_id:t.outlet_id,client_id:t.client_id,billing_cycle:t.billing_cycle,billing_day:t.billing_day||null,start_date:t.start_date,quantity:t.quantity,price_per_unit:t.price_per_unit,next_billing_date:i,notes:t.notes||null,status:"active"}).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(s)throw new Error(s.message);return a}async function eW(e,t,r){const{data:n}=await be.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update subscriptions");if(n.role==="manager"){if(r.outlet_id!==void 0)throw new Error("Only admins can change outlet assignment");if(r.client_id!==void 0)throw new Error("Only admins can change client assignment")}let i;if(r.billing_cycle||r.billing_day!==void 0){const c=await Yd(t);if(!c)throw new Error("Subscription not found");const u=r.billing_cycle||c.billing_cycle,d=r.billing_day!==void 0?r.billing_day:c.billing_day;i=s5(c.next_billing_date,u,d||void 0)}const a={...r};i&&(a.next_billing_date=i);const{data:s,error:o}=await be.from("subscriptions").update(a).eq("id",t).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(o)throw new Error(o.message);return s}async function aT(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to pause subscriptions");const n=await Yd(t);if(!n)throw new Error("Subscription not found");if(n.status!=="active")throw new Error("Only active subscriptions can be paused");const{error:i}=await be.from("subscriptions").update({status:"paused"}).eq("id",t);if(i)throw new Error(i.message)}async function sT(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to resume subscriptions");const n=await Yd(t);if(!n)throw new Error("Subscription not found");if(n.status!=="paused")throw new Error("Only paused subscriptions can be resumed");const i=Jq(n.billing_cycle,n.billing_day||void 0),{error:a}=await be.from("subscriptions").update({status:"active",next_billing_date:i}).eq("id",t);if(a)throw new Error(a.message)}async function oT(e,t,r){const{data:n}=await be.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to cancel subscriptions");const i=await Yd(t);if(!i)throw new Error("Subscription not found");if(i.status==="cancelled")throw new Error("Subscription is already cancelled");const a=Og(),{error:s}=await be.from("subscriptions").update({status:"cancelled",end_date:a}).eq("id",t);if(s)throw new Error(s.message)}function Ie(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function tW(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(null),[v,x]=b.useState(null),[g,_]=b.useState(null);b.useEffect(()=>{S()},[e==null?void 0:e.id,u,f]);async function S(){if(e!=null&&e.id)try{s(!0),c(null);const N={};u&&(N.client_id=u),f&&(N.status=f);const[D,E]=await Promise.all([Zq(e.id,N),Gd(e.id,{client_type:"corporate"})]);r(D),i(E)}catch(N){c(N instanceof Error?N.message:"Failed to load subscriptions")}finally{s(!1)}}async function j(N,D){if(e!=null&&e.id)try{y(D),x(null),N==="pause"?await aT(e.id,D):N==="resume"?await sT(e.id,D):N==="cancel"&&await oT(e.id,D),_(null),await S()}catch(E){x(E instanceof Error?E.message:`Failed to ${N} subscription`)}finally{y(null)}}function A(N){const D={active:"success",paused:"warning",cancelled:"secondary"};return l.jsx(Yt,{variant:D[N],children:N.toUpperCase()})}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Subscriptions"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage corporate client subscriptions"})]}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/subscriptions/add",children:l.jsx(Pe,{children:"+ Add Subscription"})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(pt,{label:"Client",value:u,onChange:N=>d(N.target.value),children:[l.jsx("option",{value:"",children:"All Clients"}),n.map(N=>l.jsx("option",{value:N.id,children:N.name},N.id))]}),l.jsxs(pt,{label:"Status",value:f,onChange:N=>p(N.target.value),children:[l.jsx("option",{value:"",children:"All Statuses"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"paused",children:"Paused"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(u||f)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Pe,{variant:"outline",onClick:()=>{d(""),p("")},children:"Clear Filters"})})]})}),o&&l.jsx(ht,{variant:"error",children:o}),v&&l.jsx(ht,{variant:"error",children:v}),l.jsx(we,{children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-muted-foreground",children:"No subscriptions found"}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/subscriptions/add",children:l.jsx(Pe,{variant:"outline",className:"mt-4",children:"Create First Subscription"})})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Billing Cycle"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Quantity"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Price/Unit"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Total"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Next Billing"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(N=>{var D,E;return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/subscriptions/${N.id}`,className:"text-primary hover:underline font-medium",children:((D=N.clients)==null?void 0:D.name)||"Unknown Client"})}),l.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((E=N.outlets)==null?void 0:E.name)||"Unknown Outlet"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:iT(N.billing_cycle,N.billing_day)}),l.jsx("td",{className:"py-3 px-4 text-right",children:N.quantity}),l.jsx("td",{className:"py-3 px-4 text-right",children:Ie(N.price_per_unit)}),l.jsx("td",{className:"py-3 px-4 text-right font-semibold",children:Ie(N.quantity*N.price_per_unit)}),l.jsx("td",{className:"py-3 px-4 text-sm",children:N.status==="active"?Ns(N.next_billing_date):"-"}),l.jsx("td",{className:"py-3 px-4",children:A(N.status)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(e==null?void 0:e.role)!=="accountant"&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/subscriptions/${N.id}/edit`,children:l.jsx(Pe,{variant:"outline",size:"sm",children:"Edit"})}),N.status==="active"&&l.jsxs(l.Fragment,{children:[l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>{var C;return _({type:"pause",subscriptionId:N.id,subscriptionName:((C=N.clients)==null?void 0:C.name)||"Unknown"})},disabled:h===N.id,children:"Pause"}),l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>{var C;return _({type:"cancel",subscriptionId:N.id,subscriptionName:((C=N.clients)==null?void 0:C.name)||"Unknown"})},disabled:h===N.id,children:"Cancel"})]}),N.status==="paused"&&l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>{var C;return _({type:"resume",subscriptionId:N.id,subscriptionName:((C=N.clients)==null?void 0:C.name)||"Unknown"})},disabled:h===N.id,children:"Resume"})]}),l.jsx(pr,{to:`/subscriptions/${N.id}`,children:l.jsx(Pe,{variant:"ghost",size:"sm",children:"View"})})]})})]},N.id)})})]})})}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",g.type.charAt(0).toUpperCase()+g.type.slice(1)]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",g.type," the subscription for"," ",l.jsx("strong",{children:g.subscriptionName}),"?",g.type==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive",children:"This action cannot be undone. The subscription will be permanently cancelled."}),g.type==="resume"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Billing will resume from today with a new billing cycle."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>_(null),disabled:!!h,children:"Cancel"}),l.jsx(Pe,{variant:g.type==="cancel"?"destructive":"default",onClick:()=>j(g.type,g.subscriptionId),disabled:!!h,children:h?"Processing...":`Yes, ${g.type}`})]})]})})]})}function rW(){var j;const e=wi(),{user:t,outlets:r}=Wt(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState({outlet_id:"",client_id:"",billing_cycle:"monthly",start_date:Og(),quantity:1,price_per_unit:0,notes:""}),[h,y]=b.useState({}),v=r||[];b.useEffect(()=>{x(),(t==null?void 0:t.role)==="manager"&&r&&r.length===1&&p(A=>({...A,outlet_id:r[0].id}))},[t,r]),b.useEffect(()=>{f.outlet_id&&x()},[f.outlet_id]);async function x(){if(!(t!=null&&t.id)){s(!1);return}try{s(!0);const A=await Gd(t.id,{client_type:"corporate"}),N=f.outlet_id?A.filter(D=>D.outlet_id===f.outlet_id):A;i(N)}catch(A){d(A instanceof Error?A.message:"Failed to load clients")}finally{s(!1)}}function g(A,N){p(D=>({...D,[A]:N})),h[A]&&y(D=>{const E={...D};return delete E[A],E})}function _(){const A={};return f.outlet_id||(A.outlet_id="Outlet is required"),f.client_id||(A.client_id="Client is required"),f.billing_cycle||(A.billing_cycle="Billing cycle is required"),f.billing_cycle==="monthly"&&(!f.billing_day||f.billing_day<1||f.billing_day>28)&&(A.billing_day="Billing day must be between 1 and 28"),f.start_date||(A.start_date="Start date is required"),(!f.quantity||f.quantity<=0)&&(A.quantity="Quantity must be greater than 0"),(f.price_per_unit===void 0||f.price_per_unit<0)&&(A.price_per_unit="Price must be 0 or greater"),y(A),Object.keys(A).length===0}async function S(A){if(A.preventDefault(),!(!_()||!(t!=null&&t.id)))try{c(!0),d(null),await Qq(t.id,f),e("/subscriptions")}catch(N){d(N instanceof Error?N.message:"Failed to create subscription")}finally{c(!1)}}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Add Subscription"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new subscription for a corporate client"})]}),u&&l.jsx(ht,{variant:"error",children:u}),v.length===0&&l.jsxs(ht,{variant:"warning",children:[l.jsx("strong",{children:"No outlets found!"}),l.jsx("p",{className:"mt-2",children:(t==null?void 0:t.role)==="admin"?"You need to create at least one outlet before you can create subscriptions. Please go to Outlets page to create one.":"No outlets have been assigned to you. Please contact your administrator."})]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[(t==null?void 0:t.role)==="admin"?l.jsxs(pt,{label:"Outlet",value:f.outlet_id,onChange:A=>g("outlet_id",A.target.value),error:h.outlet_id,required:!0,children:[l.jsx("option",{value:"",children:"Select Outlet"}),v.map(A=>l.jsxs("option",{value:A.id,children:[A.name," (",A.code,")"]},A.id))]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Outlet"}),l.jsx(He,{value:((j=v[0])==null?void 0:j.name)||"No outlet assigned",disabled:!0})]}),l.jsxs(pt,{label:"Client",value:f.client_id,onChange:A=>g("client_id",A.target.value),error:h.client_id,required:!0,disabled:!f.outlet_id,children:[l.jsx("option",{value:"",children:f.outlet_id?"Select Client":"Select outlet first"}),n.map(A=>l.jsxs("option",{value:A.id,children:[A.name," - ",A.phone]},A.id))]}),n.length===0&&f.outlet_id&&l.jsx(ht,{variant:"warning",children:"No corporate clients found for this outlet. Please create a client first."}),l.jsxs(pt,{label:"Billing Cycle",value:f.billing_cycle,onChange:A=>g("billing_cycle",A.target.value),error:h.billing_cycle,required:!0,children:[l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"monthly",children:"Monthly"})]}),f.billing_cycle==="monthly"&&l.jsx(He,{label:"Billing Day (1-28)",type:"number",min:1,max:28,value:f.billing_day||"",onChange:A=>g("billing_day",parseInt(A.target.value)||void 0),error:h.billing_day,placeholder:"Enter day of month (1-28)",required:!0,helperText:"Day of the month when invoice will be generated (1-28 works for all months)"}),l.jsx(He,{label:"Start Date",type:"date",value:f.start_date,onChange:A=>g("start_date",A.target.value),error:h.start_date,min:(t==null?void 0:t.role)==="manager"?Og():void 0,required:!0,helperText:(t==null?void 0:t.role)==="manager"?"Cannot select past dates":"Admins can create past-dated subscriptions for migration purposes"}),l.jsx(He,{label:"Quantity",type:"number",min:1,value:f.quantity,onChange:A=>g("quantity",parseInt(A.target.value)||0),error:h.quantity,required:!0}),l.jsx(He,{label:"Price Per Unit",type:"number",min:0,step:"0.01",value:f.price_per_unit,onChange:A=>g("price_per_unit",parseFloat(A.target.value)||0),error:h.price_per_unit,required:!0}),f.quantity>0&&f.price_per_unit>0&&l.jsx("div",{className:"p-4 bg-muted rounded-lg",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium",children:"Total per billing cycle:"}),l.jsxs("span",{className:"text-2xl font-bold",children:["",(f.quantity*f.price_per_unit).toFixed(2)]})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:f.notes||"",onChange:A=>g("notes",A.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this subscription"})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:()=>e("/subscriptions"),disabled:o,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:o,children:o?"Creating...":"Create Subscription"})]})]})})]})}function nW(){var S,j,A;const{id:e}=ou(),t=wi(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState({}),[h,y]=b.useState({});b.useEffect(()=>{v()},[e]);async function v(){if(e)try{s(!0);const N=await Yd(e);if(!N){d("Subscription not found");return}i(N),p({billing_cycle:N.billing_cycle,billing_day:N.billing_day||void 0,quantity:N.quantity,price_per_unit:N.price_per_unit,notes:N.notes||""})}catch(N){d(N instanceof Error?N.message:"Failed to load subscription")}finally{s(!1)}}function x(N,D){p(E=>({...E,[N]:D})),h[N]&&y(E=>{const C={...E};return delete C[N],C})}function g(){const N={};return f.billing_cycle==="monthly"&&(!f.billing_day||f.billing_day<1||f.billing_day>28)&&(N.billing_day="Billing day must be between 1 and 28"),f.quantity!==void 0&&f.quantity<=0&&(N.quantity="Quantity must be greater than 0"),f.price_per_unit!==void 0&&f.price_per_unit<0&&(N.price_per_unit="Price must be 0 or greater"),y(N),Object.keys(N).length===0}async function _(N){if(N.preventDefault(),!(!g()||!(r!=null&&r.id)||!e))try{c(!0),d(null),await eW(r.id,e,f),t(`/subscriptions/${e}`)}catch(D){d(D instanceof Error?D.message:"Failed to update subscription")}finally{c(!1)}}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):n?l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Edit Subscription"}),l.jsxs("p",{className:"text-muted-foreground mt-1",children:["Update subscription for ",(S=n.clients)==null?void 0:S.name]})]}),u&&l.jsx(ht,{variant:"error",children:u}),n.status==="cancelled"&&l.jsx(ht,{variant:"warning",children:"This subscription has been cancelled and cannot be modified."}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4 p-4 bg-muted rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Subscription Info (Read-only)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client"}),l.jsx("p",{className:"text-sm",children:(j=n.clients)==null?void 0:j.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Outlet"}),l.jsx("p",{className:"text-sm",children:(A=n.outlets)==null?void 0:A.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),l.jsx("p",{className:"text-sm",children:new Date(n.start_date).toLocaleDateString()})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),l.jsx("p",{className:"text-sm capitalize",children:n.status})]}),n.status==="active"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Next Billing Date"}),l.jsx("p",{className:"text-sm",children:new Date(n.next_billing_date).toLocaleDateString()}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"(Auto-calculated, cannot be manually edited)"})]})]})]}),n.status!=="cancelled"&&l.jsxs(l.Fragment,{children:[l.jsxs(pt,{label:"Billing Cycle",value:f.billing_cycle,onChange:N=>x("billing_cycle",N.target.value),error:h.billing_cycle,required:!0,children:[l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"monthly",children:"Monthly"})]}),f.billing_cycle==="monthly"&&l.jsx(He,{label:"Billing Day (1-28)",type:"number",min:1,max:28,value:f.billing_day||"",onChange:N=>x("billing_day",parseInt(N.target.value)||void 0),error:h.billing_day,required:!0,helperText:"Day of the month when invoice will be generated"}),l.jsx(He,{label:"Quantity",type:"number",min:1,value:f.quantity,onChange:N=>x("quantity",parseInt(N.target.value)||0),error:h.quantity,required:!0,helperText:"Changes affect future invoices only"}),l.jsx(He,{label:"Price Per Unit",type:"number",min:0,step:"0.01",value:f.price_per_unit,onChange:N=>x("price_per_unit",parseFloat(N.target.value)||0),error:h.price_per_unit,required:!0,helperText:"Changes affect future invoices only"}),f.quantity&&f.price_per_unit!==void 0&&l.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium",children:"Total per billing cycle:"}),l.jsxs("span",{className:"text-2xl font-bold",children:["",(f.quantity*f.price_per_unit).toFixed(2)]})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Price/quantity changes apply to future invoices only. Past invoices remain unchanged."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:f.notes||"",onChange:N=>x("notes",N.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this subscription"})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:()=>t(`/subscriptions/${e}`),disabled:o,children:"Cancel"}),n.status!=="cancelled"&&l.jsx(Pe,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})]})]})})]}):l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(ht,{variant:"error",children:"Subscription not found"})})}function iW(){var x,g,_,S,j;const{id:e}=ou(),t=wi(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(null);b.useEffect(()=>{h()},[e]);async function h(){if(e)try{s(!0);const A=await Yd(e);if(!A){c("Subscription not found or you do not have access");return}i(A)}catch(A){c(A instanceof Error?A.message:"Failed to load subscription")}finally{s(!1)}}async function y(A){if(!(!(r!=null&&r.id)||!e))try{d(!0),c(null),A==="pause"?await aT(r.id,e):A==="resume"?await sT(r.id,e):A==="cancel"&&await oT(r.id,e),p(null),await h()}catch(N){c(N instanceof Error?N.message:`Failed to ${A} subscription`)}finally{d(!1)}}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})});if(!n)return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(ht,{variant:"error",children:o||"Subscription not found"}),l.jsx("div",{className:"mt-4",children:l.jsx(Pe,{variant:"outline",onClick:()=>t("/subscriptions"),children:"Back to Subscriptions"})})]});const v={active:"success",paused:"warning",cancelled:"secondary"};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Subscription Details"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"View subscription information"})]}),l.jsx("div",{className:"flex gap-2",children:(r==null?void 0:r.role)!=="accountant"&&n.status!=="cancelled"&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/subscriptions/${e}/edit`,children:l.jsx(Pe,{variant:"outline",children:"Edit"})}),n.status==="active"&&l.jsxs(l.Fragment,{children:[l.jsx(Pe,{variant:"outline",onClick:()=>p("pause"),disabled:u,children:"Pause"}),l.jsx(Pe,{variant:"destructive",onClick:()=>p("cancel"),disabled:u,children:"Cancel"})]}),n.status==="paused"&&l.jsx(Pe,{onClick:()=>p("resume"),disabled:u,children:"Resume"})]})})]}),o&&l.jsx(ht,{variant:"error",children:o}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Subscription Information"}),l.jsx(Yt,{variant:v[n.status],children:n.status.toUpperCase()})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Client"}),l.jsx(pr,{to:`/clients/${n.client_id}`,className:"text-primary hover:underline font-medium",children:(x=n.clients)==null?void 0:x.name}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(g=n.clients)==null?void 0:g.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Outlet"}),l.jsx("p",{className:"font-medium",children:(_=n.outlets)==null?void 0:_.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[(S=n.outlets)==null?void 0:S.code,"  ",(j=n.outlets)==null?void 0:j.city]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Billing Cycle"}),l.jsx("p",{className:"font-medium",children:iT(n.billing_cycle,n.billing_day)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Start Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.start_date,"long")})]}),n.end_date&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"End Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.end_date,"long")})]}),n.status==="active"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Next Billing Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.next_billing_date,"long")})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Pricing"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center py-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"Quantity"}),l.jsx("span",{className:"font-medium",children:n.quantity})]}),l.jsxs("div",{className:"flex justify-between items-center py-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"Price per Unit"}),l.jsx("span",{className:"font-medium",children:Ie(n.price_per_unit)})]}),l.jsx("div",{className:"border-t pt-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-lg font-semibold",children:"Total per Billing Cycle"}),l.jsx("span",{className:"text-2xl font-bold text-primary",children:Ie(n.quantity*n.price_per_unit)})]})})]})]}),n.notes&&l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Notes"}),l.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.notes})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Audit Trail"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.updated_at).toLocaleString()})]})]})]}),l.jsxs(we,{className:"bg-muted",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Related Invoices"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice history will be available after Phase 5 (Invoices) is implemented."})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",f.charAt(0).toUpperCase()+f.slice(1)]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",f," this subscription?",f==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive font-medium",children:"This action cannot be undone. The subscription will be permanently cancelled."}),f==="resume"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Billing will resume from today with a new billing cycle."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>p(null),disabled:u,children:"Cancel"}),l.jsx(Pe,{variant:f==="cancel"?"destructive":"default",onClick:()=>y(f),disabled:u,children:u?"Processing...":`Yes, ${f}`})]})]})})]})}async function lT(e,t={}){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=be.from("events").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city
      )
    `).order("event_date",{ascending:!1});if(r.role==="manager"){const{data:s}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.status&&(n=n.eq("status",t.status)),t.client_id&&(n=n.eq("client_id",t.client_id)),t.date_from&&(n=n.gte("event_date",t.date_from)),t.date_to&&(n=n.lte("event_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Ap(e){const{data:t,error:r}=await be.from("events").select(`
      *,
      clients (
        id,
        name,
        client_type,
        phone,
        email,
        outlets (id, name, code)
      ),
      outlets (
        id,
        name,
        code,
        city,
        state
      )
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function aW(e,t){var s,o;const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create events");if(!t.client_id)throw new Error("Client is required");if(!t.event_name||t.event_name.trim()==="")throw new Error("Event name is required");if(!t.event_date)throw new Error("Event date is required");if(t.guest_count!==void 0&&t.guest_count<=0)throw new Error("Guest count must be greater than 0");const n=await kp(t.client_id);if(!n)throw new Error("Client not found");if(n.client_type!=="event")throw new Error("Only event clients can have events. This client is a corporate client.");if(n.outlet_id!==t.outlet_id)throw new Error("Client does not belong to the selected outlet");if(r.role==="manager"){const{data:c}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((c==null?void 0:c.map(d=>d.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create events for your assigned outlets")}const{data:i,error:a}=await be.from("events").insert({outlet_id:t.outlet_id,client_id:t.client_id,event_name:t.event_name.trim(),event_type:((s=t.event_type)==null?void 0:s.trim())||null,event_date:t.event_date,guest_count:t.guest_count||null,notes:((o=t.notes)==null?void 0:o.trim())||null,status:"planned"}).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(a)throw new Error(a.message);return i}async function sW(e,t,r){var o,c;const{data:n}=await be.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update events");if(n.role==="manager"){if(r.outlet_id!==void 0)throw new Error("Only admins can change outlet assignment");if(r.client_id!==void 0)throw new Error("Only admins can change client assignment")}if(r.guest_count!==void 0&&r.guest_count<=0)throw new Error("Guest count must be greater than 0");const i={};r.event_name!==void 0&&(i.event_name=r.event_name.trim()),r.event_type!==void 0&&(i.event_type=((o=r.event_type)==null?void 0:o.trim())||null),r.event_date!==void 0&&(i.event_date=r.event_date),r.guest_count!==void 0&&(i.guest_count=r.guest_count),r.notes!==void 0&&(i.notes=((c=r.notes)==null?void 0:c.trim())||null),r.status!==void 0&&(i.status=r.status),r.outlet_id!==void 0&&(i.outlet_id=r.outlet_id),r.client_id!==void 0&&(i.client_id=r.client_id);const{data:a,error:s}=await be.from("events").update(i).eq("id",t).select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city)
    `).single();if(s)throw new Error(s.message);return a}async function cT(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to complete events");const n=await Ap(t);if(!n)throw new Error("Event not found");if(n.status!=="planned")throw new Error("Only planned events can be completed");const{error:i}=await be.from("events").update({status:"completed"}).eq("id",t);if(i)throw new Error(i.message)}async function uT(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to cancel events");const n=await Ap(t);if(!n)throw new Error("Event not found");if(n.status==="cancelled")throw new Error("Event is already cancelled");if(n.status==="completed")throw new Error("Cannot cancel a completed event");const{error:i}=await be.from("events").update({status:"cancelled"}).eq("id",t);if(i)throw new Error(i.message)}function oW(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(null),[v,x]=b.useState(null),[g,_]=b.useState(null);b.useEffect(()=>{S()},[e==null?void 0:e.id,u,f]);async function S(){if(e!=null&&e.id)try{s(!0),c(null);const N={};u&&(N.client_id=u),f&&(N.status=f);const[D,E]=await Promise.all([lT(e.id,N),Gd(e.id,{client_type:"event"})]);r(D),i(E)}catch(N){c(N instanceof Error?N.message:"Failed to load events")}finally{s(!1)}}async function j(N,D){if(e!=null&&e.id)try{y(D),x(null),N==="complete"?await cT(e.id,D):N==="cancel"&&await uT(e.id,D),_(null),await S()}catch(E){x(E instanceof Error?E.message:`Failed to ${N} event`)}finally{y(null)}}function A(N){const D={planned:"default",completed:"success",cancelled:"secondary"};return l.jsx(Yt,{variant:D[N],children:N.toUpperCase()})}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Events"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage one-time event bookings"})]}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/events/add",children:l.jsx(Pe,{children:"+ Add Event"})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(pt,{label:"Client",value:u,onChange:N=>d(N.target.value),children:[l.jsx("option",{value:"",children:"All Clients"}),n.map(N=>l.jsx("option",{value:N.id,children:N.name},N.id))]}),l.jsxs(pt,{label:"Status",value:f,onChange:N=>p(N.target.value),children:[l.jsx("option",{value:"",children:"All Statuses"}),l.jsx("option",{value:"planned",children:"Planned"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(u||f)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Pe,{variant:"outline",onClick:()=>{d(""),p("")},children:"Clear Filters"})})]})}),o&&l.jsx(ht,{variant:"error",children:o}),v&&l.jsx(ht,{variant:"error",children:v}),l.jsx(we,{children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-muted-foreground",children:"No events found"}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/events/add",children:l.jsx(Pe,{variant:"outline",className:"mt-4",children:"Create First Event"})})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Event Name"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Event Type"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Event Date"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Guests"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(N=>{var D,E;return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/events/${N.id}`,className:"text-primary hover:underline font-medium",children:N.event_name})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:((D=N.clients)==null?void 0:D.name)||"Unknown Client"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:N.event_type||"-"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:Ns(N.event_date)}),l.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:((E=N.outlets)==null?void 0:E.name)||"Unknown Outlet"}),l.jsx("td",{className:"py-3 px-4 text-right text-sm",children:N.guest_count||"-"}),l.jsx("td",{className:"py-3 px-4",children:A(N.status)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(e==null?void 0:e.role)!=="accountant"&&l.jsx(l.Fragment,{children:N.status==="planned"&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/events/${N.id}/edit`,children:l.jsx(Pe,{variant:"outline",size:"sm",children:"Edit"})}),l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>_({type:"complete",eventId:N.id,eventName:N.event_name}),disabled:h===N.id,children:"Complete"}),l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>_({type:"cancel",eventId:N.id,eventName:N.event_name}),disabled:h===N.id,children:"Cancel"})]})}),l.jsx(pr,{to:`/events/${N.id}`,children:l.jsx(Pe,{variant:"ghost",size:"sm",children:"View"})})]})})]},N.id)})})]})})}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",g.type==="complete"?"Complete":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",g.type," the event"," ",l.jsx("strong",{children:g.eventName}),"?",g.type==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive",children:"This action cannot be undone. The event will be marked as cancelled."}),g.type==="complete"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"The event will be marked as completed and ready for invoicing."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>_(null),disabled:!!h,children:"Cancel"}),l.jsx(Pe,{variant:g.type==="cancel"?"destructive":"default",onClick:()=>j(g.type,g.eventId),disabled:!!h,children:h?"Processing...":`Yes, ${g.type}`})]})]})})]})}function lW(){var j;const e=wi(),{user:t,outlets:r}=Wt(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState({outlet_id:"",client_id:"",event_name:"",event_type:"",event_date:Og(),guest_count:void 0,notes:""}),[h,y]=b.useState({}),v=r||[];b.useEffect(()=>{x(),(t==null?void 0:t.role)==="manager"&&r&&r.length===1&&p(A=>({...A,outlet_id:r[0].id}))},[t,r]),b.useEffect(()=>{f.outlet_id&&x()},[f.outlet_id]);async function x(){if(!(t!=null&&t.id)){s(!1);return}try{s(!0);const A=await Gd(t.id,{client_type:"event"}),N=f.outlet_id?A.filter(D=>D.outlet_id===f.outlet_id):A;i(N)}catch(A){d(A instanceof Error?A.message:"Failed to load clients")}finally{s(!1)}}function g(A,N){p(D=>({...D,[A]:N})),h[A]&&y(D=>{const E={...D};return delete E[A],E})}function _(){const A={};return f.outlet_id||(A.outlet_id="Outlet is required"),f.client_id||(A.client_id="Client is required"),(!f.event_name||f.event_name.trim()==="")&&(A.event_name="Event name is required"),f.event_date||(A.event_date="Event date is required"),f.guest_count!==void 0&&f.guest_count<=0&&(A.guest_count="Guest count must be greater than 0"),y(A),Object.keys(A).length===0}async function S(A){if(A.preventDefault(),!(!_()||!(t!=null&&t.id)))try{c(!0),d(null),await aW(t.id,f),e("/events")}catch(N){d(N instanceof Error?N.message:"Failed to create event")}finally{c(!1)}}return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Add Event"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new event booking"})]}),u&&l.jsx(ht,{variant:"error",children:u}),v.length===0&&l.jsxs(ht,{variant:"warning",children:[l.jsx("strong",{children:"No outlets found!"}),l.jsx("p",{className:"mt-2",children:(t==null?void 0:t.role)==="admin"?"You need to create at least one outlet before you can create events.":"No outlets have been assigned to you. Please contact your administrator."})]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[(t==null?void 0:t.role)==="admin"?l.jsxs(pt,{label:"Outlet",value:f.outlet_id,onChange:A=>g("outlet_id",A.target.value),error:h.outlet_id,required:!0,children:[l.jsx("option",{value:"",children:"Select Outlet"}),v.map(A=>l.jsxs("option",{value:A.id,children:[A.name," (",A.code,")"]},A.id))]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Outlet"}),l.jsx(He,{value:((j=v[0])==null?void 0:j.name)||"No outlet assigned",disabled:!0})]}),l.jsxs(pt,{label:"Client",value:f.client_id,onChange:A=>g("client_id",A.target.value),error:h.client_id,required:!0,disabled:!f.outlet_id,children:[l.jsx("option",{value:"",children:f.outlet_id?"Select Client":"Select outlet first"}),n.map(A=>l.jsxs("option",{value:A.id,children:[A.name," - ",A.phone]},A.id))]}),n.length===0&&f.outlet_id&&l.jsx(ht,{variant:"warning",children:"No event clients found for this outlet. Please create a client first."}),l.jsx(He,{label:"Event Name",value:f.event_name,onChange:A=>g("event_name",A.target.value),error:h.event_name,placeholder:"e.g., Kumar-Priya Wedding",required:!0}),l.jsx(He,{label:"Event Type (Optional)",value:f.event_type,onChange:A=>g("event_type",A.target.value),placeholder:"e.g., Wedding, Birthday, Corporate Event"}),l.jsx(He,{label:"Event Date",type:"date",value:f.event_date,onChange:A=>g("event_date",A.target.value),error:h.event_date,required:!0}),l.jsx(He,{label:"Guest Count (Optional)",type:"number",min:1,value:f.guest_count||"",onChange:A=>g("guest_count",parseInt(A.target.value)||void 0),error:h.guest_count,placeholder:"Expected number of guests"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:f.notes||"",onChange:A=>g("notes",A.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this event"})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:()=>e("/events"),disabled:o,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:o,children:o?"Creating...":"Create Event"})]})]})})]})}function cW(){var j,A;const{id:e}=ou(),t=wi(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(!1),[u,d]=b.useState(null),[f,p]=b.useState({}),[h,y]=b.useState({});b.useEffect(()=>{v()},[e]);async function v(){if(e)try{s(!0);const N=await Ap(e);if(!N){d("Event not found");return}i(N),p({event_name:N.event_name,event_type:N.event_type||"",event_date:N.event_date,guest_count:N.guest_count||void 0,notes:N.notes||""})}catch(N){d(N instanceof Error?N.message:"Failed to load event")}finally{s(!1)}}function x(N,D){p(E=>({...E,[N]:D})),h[N]&&y(E=>{const C={...E};return delete C[N],C})}function g(){const N={};return f.event_name!==void 0&&f.event_name.trim()===""&&(N.event_name="Event name is required"),f.guest_count!==void 0&&f.guest_count<=0&&(N.guest_count="Guest count must be greater than 0"),y(N),Object.keys(N).length===0}async function _(N){if(N.preventDefault(),!(!g()||!(r!=null&&r.id)||!e))try{c(!0),d(null),await sW(r.id,e,f),t(`/events/${e}`)}catch(D){d(D instanceof Error?D.message:"Failed to update event")}finally{c(!1)}}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})});if(!n)return l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(ht,{variant:"error",children:"Event not found"})});const S=n.status==="planned";return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Edit Event"}),l.jsxs("p",{className:"text-muted-foreground mt-1",children:["Update event: ",n.event_name]})]}),u&&l.jsx(ht,{variant:"error",children:u}),!S&&l.jsxs(ht,{variant:"warning",children:["This event cannot be edited because it is ",n.status,"."]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4 p-4 bg-muted rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Event Info (Read-only)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client"}),l.jsx("p",{className:"text-sm",children:(j=n.clients)==null?void 0:j.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Outlet"}),l.jsx("p",{className:"text-sm",children:(A=n.outlets)==null?void 0:A.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),l.jsx("p",{className:"text-sm capitalize",children:n.status})]})]})]}),S&&l.jsxs(l.Fragment,{children:[l.jsx(He,{label:"Event Name",value:f.event_name,onChange:N=>x("event_name",N.target.value),error:h.event_name,required:!0}),l.jsx(He,{label:"Event Type (Optional)",value:f.event_type,onChange:N=>x("event_type",N.target.value)}),l.jsx(He,{label:"Event Date",type:"date",value:f.event_date,onChange:N=>x("event_date",N.target.value),required:!0}),l.jsx(He,{label:"Guest Count (Optional)",type:"number",min:1,value:f.guest_count||"",onChange:N=>x("guest_count",parseInt(N.target.value)||void 0),error:h.guest_count}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:f.notes||"",onChange:N=>x("notes",N.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Additional notes about this event"})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:()=>t(`/events/${e}`),disabled:o,children:"Cancel"}),S&&l.jsx(Pe,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})]})]})})]})}function uW(){var g,_,S,j,A;const{id:e}=ou(),t=wi(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(null);b.useEffect(()=>{h()},[e]);async function h(){if(e)try{s(!0);const N=await Ap(e);if(!N){c("Event not found or you do not have access");return}i(N)}catch(N){c(N instanceof Error?N.message:"Failed to load event")}finally{s(!1)}}async function y(N){if(!(!(r!=null&&r.id)||!e))try{d(!0),c(null),N==="complete"?await cT(r.id,e):N==="cancel"&&await uT(r.id,e),p(null),await h()}catch(D){c(D instanceof Error?D.message:`Failed to ${N} event`)}finally{d(!1)}}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})});if(!n)return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(ht,{variant:"error",children:o||"Event not found"}),l.jsx("div",{className:"mt-4",children:l.jsx(Pe,{variant:"outline",onClick:()=>t("/events"),children:"Back to Events"})})]});const v={planned:"default",completed:"success",cancelled:"secondary"},x=n.status==="planned";return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Event Details"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"View event information"})]}),l.jsx("div",{className:"flex gap-2",children:(r==null?void 0:r.role)!=="accountant"&&x&&l.jsxs(l.Fragment,{children:[l.jsx(pr,{to:`/events/${e}/edit`,children:l.jsx(Pe,{variant:"outline",children:"Edit"})}),l.jsx(Pe,{variant:"outline",onClick:()=>p("complete"),disabled:u,children:"Complete"}),l.jsx(Pe,{variant:"destructive",onClick:()=>p("cancel"),disabled:u,children:"Cancel Event"})]})})]}),o&&l.jsx(ht,{variant:"error",children:o}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Event Information"}),l.jsx(Yt,{variant:v[n.status],children:n.status.toUpperCase()})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Event Name"}),l.jsx("p",{className:"font-medium text-lg",children:n.event_name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Event Type"}),l.jsx("p",{className:"font-medium",children:n.event_type||"-"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Client"}),l.jsx(pr,{to:`/clients/${n.client_id}`,className:"text-primary hover:underline font-medium",children:(g=n.clients)==null?void 0:g.name}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(_=n.clients)==null?void 0:_.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Outlet"}),l.jsx("p",{className:"font-medium",children:(S=n.outlets)==null?void 0:S.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[(j=n.outlets)==null?void 0:j.code,"  ",(A=n.outlets)==null?void 0:A.city]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Event Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.event_date,"long")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Expected Guests"}),l.jsx("p",{className:"font-medium",children:n.guest_count||"Not specified"})]})]})]}),n.notes&&l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Notes"}),l.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.notes})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Audit Trail"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.updated_at).toLocaleString()})]})]})]}),n.status==="completed"&&l.jsxs(we,{className:"bg-muted",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Invoice"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice generation will be available after Phase 5 (Invoices) is implemented."})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",f==="complete"?"Complete":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",f," this event?",f==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive font-medium",children:"This action cannot be undone. The event will be marked as cancelled."}),f==="complete"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"The event will be marked as completed and ready for invoicing."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>p(null),disabled:u,children:"Cancel"}),l.jsx(Pe,{variant:f==="cancel"?"destructive":"default",onClick:()=>y(f),disabled:u,children:u?"Processing...":`Yes, ${f}`})]})]})})]})}function dW(e){const t=e.quantity*e.unit_price,r=Math.round(t*(e.tax_rate/100)*100)/100;return{...e,line_total:t,tax_amount:r}}function fW(e){const t=e.map(dW),r=t.reduce((a,s)=>a+s.line_total,0),n=t.reduce((a,s)=>a+s.tax_amount,0),i=r+n;return{subtotal:Math.round(r*100)/100,tax_total:Math.round(n*100)/100,grand_total:Math.round(i*100)/100,items:t}}async function hW(e,t={}){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=be.from("invoices").select(`
      *,
      clients (id, name, client_type, phone),
      outlets (id, name, code, city),
      events (id, event_name, event_date)
    `).order("created_at",{ascending:!1});if(r.role==="manager"){const{data:s}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(c=>c.outlet_id);n=n.in("outlet_id",o)}else return[]}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.invoice_type&&(n=n.eq("invoice_type",t.invoice_type)),t.status&&(n=n.eq("status",t.status)),t.client_id&&(n=n.eq("client_id",t.client_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Tg(e){const{data:t,error:r}=await be.from("invoices").select(`
      *,
      clients (id, name, client_type, phone, email, gstin, billing_address),
      outlets (id, name, code, city, state, address, gstin, phone, email),
      events (id, event_name, event_date, event_type)
    `).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}const{data:n,error:i}=await be.from("invoice_items").select("*").eq("invoice_id",e).order("created_at",{ascending:!0});if(i)throw new Error(i.message);return{...t,invoice_items:n||[]}}async function pW(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(r.role==="accountant")throw new Error("Accountants do not have permission to create invoices");if(!t.client_id)throw new Error("Client is required");if(!t.outlet_id)throw new Error("Outlet is required");if(!t.items||t.items.length===0)throw new Error("At least one invoice item is required");const n=await kp(t.client_id);if(!n)throw new Error("Client not found");if(n.outlet_id!==t.outlet_id)throw new Error("Client does not belong to the selected outlet");if(t.invoice_type==="event"){if(!t.event_id)throw new Error("Event invoices must have an event");const d=await Ap(t.event_id);if(!d)throw new Error("Event not found");if(d.status!=="completed")throw new Error("Only completed events can be invoiced");if(d.outlet_id!==t.outlet_id)throw new Error("Event does not belong to the selected outlet");if(d.client_id!==t.client_id)throw new Error("Event does not belong to the selected client")}if(t.invoice_type==="subscription"&&t.event_id)throw new Error("Subscription invoices cannot have an event");if(r.role==="manager"){const{data:d}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((d==null?void 0:d.map(p=>p.outlet_id))||[]).includes(t.outlet_id))throw new Error("You can only create invoices for your assigned outlets")}const i=fW(t.items),{data:a,error:s}=await be.from("invoices").insert({invoice_type:t.invoice_type,client_id:t.client_id,outlet_id:t.outlet_id,event_id:t.event_id||null,status:"draft",subtotal:i.subtotal,tax_total:i.tax_total,grand_total:i.grand_total}).select().single();if(s)throw new Error(s.message);const o=i.items.map(d=>({invoice_id:a.id,description:d.description,quantity:d.quantity,unit_price:d.unit_price,line_total:d.line_total,tax_rate:d.tax_rate,tax_amount:d.tax_amount})),{error:c}=await be.from("invoice_items").insert(o);if(c)throw await be.from("invoices").delete().eq("id",a.id),new Error(c.message);const u=await Tg(a.id);if(!u)throw new Error("Failed to fetch created invoice");return u}async function dT(e,t,r){const{data:n}=await be.from("user_profiles").select("role").eq("id",e).single();if(!n)throw new Error("User profile not found");if(n.role==="accountant")throw new Error("Accountants do not have permission to update invoices");const i=await Tg(t);if(!i)throw new Error("Invoice not found");if(i.status==="issued"&&r.status!=="cancelled")throw new Error("Issued invoices cannot be modified");if(i.status==="cancelled"&&r.status==="issued")throw new Error("Cancelled invoices cannot be issued");const{error:a}=await be.from("invoices").update(r).eq("id",t).select().single();if(a)throw new Error(a.message);const s=await Tg(t);if(!s)throw new Error("Failed to fetch updated invoice");return s}async function fT(e,t){await dT(e,t,{status:"issued"})}async function hT(e,t){await dT(e,t,{status:"cancelled"})}function mW(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(null),[h,y]=b.useState(null),[v,x]=b.useState(null);b.useEffect(()=>{g()},[e==null?void 0:e.id,o,u]);async function g(){if(e!=null&&e.id)try{i(!0),s(null);const A={};o&&(A.invoice_type=o),u&&(A.status=u);const N=await hW(e.id,A);r(N)}catch(A){s(A instanceof Error?A.message:"Failed to load invoices")}finally{i(!1)}}async function _(A,N){if(e!=null&&e.id)try{p(N),y(null),A==="issue"?await fT(e.id,N):A==="cancel"&&await hT(e.id,N),x(null),await g()}catch(D){y(D instanceof Error?D.message:`Failed to ${A} invoice`)}finally{p(null)}}function S(A){const N={draft:"default",issued:"success",cancelled:"secondary"};return l.jsx(Yt,{variant:N[A],children:A.toUpperCase()})}function j(A){const N={subscription:"bg-brand-primary/20 text-brand-primary",event:"bg-purple-100 text-purple-800"};return l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${N[A]}`,children:A.toUpperCase()})}return n?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Invoices"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage subscription and event invoices"})]}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/invoices/create",children:l.jsx(Pe,{children:"+ Create Invoice"})})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(pt,{label:"Invoice Type",value:o,onChange:A=>c(A.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),l.jsxs(pt,{label:"Status",value:u,onChange:A=>d(A.target.value),children:[l.jsx("option",{value:"",children:"All Statuses"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"issued",children:"Issued"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(o||u)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Pe,{variant:"outline",onClick:()=>{c(""),d("")},children:"Clear Filters"})})]})}),a&&l.jsx(ht,{variant:"error",children:a}),h&&l.jsx(ht,{variant:"error",children:h}),l.jsx(we,{children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-muted-foreground",children:"No invoices found"}),(e==null?void 0:e.role)!=="accountant"&&l.jsx(pr,{to:"/invoices/create",children:l.jsx(Pe,{variant:"outline",className:"mt-4",children:"Create First Invoice"})})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Invoice #"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Event"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Subtotal"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Tax"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Total"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(A=>{var N,D;return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/invoices/${A.id}`,className:"text-primary hover:underline font-medium",children:A.invoice_number})}),l.jsx("td",{className:"py-3 px-4",children:j(A.invoice_type)}),l.jsx("td",{className:"py-3 px-4 text-sm",children:((N=A.clients)==null?void 0:N.name)||"Unknown Client"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:((D=A.events)==null?void 0:D.event_name)||"-"}),l.jsx("td",{className:"py-3 px-4 text-right",children:Ie(A.subtotal)}),l.jsx("td",{className:"py-3 px-4 text-right",children:Ie(A.tax_total)}),l.jsx("td",{className:"py-3 px-4 text-right font-semibold",children:Ie(A.grand_total)}),l.jsx("td",{className:"py-3 px-4",children:S(A.status)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(e==null?void 0:e.role)!=="accountant"&&A.status==="draft"&&l.jsxs(l.Fragment,{children:[l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>x({type:"issue",invoiceId:A.id,invoiceNumber:A.invoice_number}),disabled:f===A.id,children:"Issue"}),l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>x({type:"cancel",invoiceId:A.id,invoiceNumber:A.invoice_number}),disabled:f===A.id,children:"Cancel"})]}),l.jsx(pr,{to:`/invoices/${A.id}`,children:l.jsx(Pe,{variant:"ghost",size:"sm",children:"View"})})]})})]},A.id)})})]})})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",v.type==="issue"?"Issue":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",v.type," invoice"," ",l.jsx("strong",{children:v.invoiceNumber}),"?",v.type==="issue"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Once issued, the invoice cannot be edited."}),v.type==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive",children:"This action cannot be undone. The invoice will be marked as cancelled."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>x(null),disabled:!!f,children:"Cancel"}),l.jsx(Pe,{variant:v.type==="cancel"?"destructive":"default",onClick:()=>_(v.type,v.invoiceId),disabled:!!f,children:f?"Processing...":`Yes, ${v.type}`})]})]})})]})}function vW(){var ie;const e=wi(),{user:t,outlets:r}=Wt(),[n,i]=b.useState([]),[a,s]=b.useState([]),[o,c]=b.useState(!0),[u,d]=b.useState(!1),[f,p]=b.useState(null),[h,y]=b.useState("subscription"),[v,x]=b.useState(""),[g,_]=b.useState(""),[S,j]=b.useState(""),[A,N]=b.useState([{description:"",quantity:1,unit_price:0,tax_rate:18}]),D=r||[];b.useEffect(()=>{(t==null?void 0:t.role)==="manager"&&r&&r.length===1&&x(r[0].id),c(!1)},[t,r]),b.useEffect(()=>{v&&E()},[v,h]);async function E(){if(!(!(t!=null&&t.id)||!v))try{const ne=h==="subscription"?"corporate":"event",q=(await Gd(t.id,{client_type:ne})).filter(Y=>Y.outlet_id===v);if(i(q),h==="event"){const Y=await lT(t.id,{status:"completed",outlet_id:v});s(Y)}}catch(ne){p(ne instanceof Error?ne.message:"Failed to load data")}}function C(){N([...A,{description:"",quantity:1,unit_price:0,tax_rate:18}])}function L(ne){A.length>1&&N(A.filter((ee,q)=>q!==ne))}function I(ne,ee,q){const Y=[...A];Y[ne]={...Y[ne],[ee]:q},N(Y)}function O(){let ne=0,ee=0;return A.forEach(q=>{const Y=q.quantity*q.unit_price,fe=Math.round(Y*(q.tax_rate/100)*100)/100;ne+=Y,ee+=fe}),{subtotal:Math.round(ne*100)/100,taxTotal:Math.round(ee*100)/100,grandTotal:Math.round((ne+ee)*100)/100}}async function U(ne){if(ne.preventDefault(),!!(t!=null&&t.id)){if(!v){p("Outlet is required");return}if(!g){p("Client is required");return}if(h==="event"&&!S){p("Event is required for event invoices");return}if(A.some(ee=>!ee.description.trim())){p("All items must have a description");return}try{d(!0),p(null);const ee={invoice_type:h,client_id:g,outlet_id:v,event_id:h==="event"?S:null,items:A};await pW(t.id,ee),e("/invoices")}catch(ee){p(ee instanceof Error?ee.message:"Failed to create invoice")}finally{d(!1)}}}if(o)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})});const V=O();return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Create Invoice"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate a new invoice"})]}),f&&l.jsx(ht,{variant:"error",children:f}),D.length===0&&l.jsxs(ht,{variant:"warning",children:[l.jsx("strong",{children:"No outlets found!"}),l.jsx("p",{className:"mt-2",children:(t==null?void 0:t.role)==="admin"?"You need to create at least one outlet.":"No outlets assigned. Contact your administrator."})]}),l.jsxs("form",{onSubmit:U,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(pt,{label:"Invoice Type",value:h,onChange:ne=>{y(ne.target.value),_(""),j("")},required:!0,children:[l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),(t==null?void 0:t.role)==="admin"?l.jsxs(pt,{label:"Outlet",value:v,onChange:ne=>{x(ne.target.value),_(""),j("")},required:!0,children:[l.jsx("option",{value:"",children:"Select Outlet"}),D.map(ne=>l.jsxs("option",{value:ne.id,children:[ne.name," (",ne.code,")"]},ne.id))]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Outlet"}),l.jsx(He,{value:((ie=D[0])==null?void 0:ie.name)||"No outlet",disabled:!0})]}),l.jsxs(pt,{label:"Client",value:g,onChange:ne=>_(ne.target.value),required:!0,disabled:!v,children:[l.jsx("option",{value:"",children:v?"Select Client":"Select outlet first"}),n.map(ne=>l.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),h==="event"&&l.jsxs(pt,{label:"Event",value:S,onChange:ne=>j(ne.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Select Event"}),a.map(ne=>l.jsxs("option",{value:ne.id,children:[ne.event_name," - ",ne.event_date]},ne.id))]})]}),n.length===0&&v&&l.jsxs(ht,{variant:"warning",className:"mt-4",children:["No ",h==="subscription"?"corporate":"event"," clients found for this outlet."]}),h==="event"&&a.length===0&&v&&l.jsx(ht,{variant:"warning",className:"mt-4",children:"No completed events found for this outlet."})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Invoice Items"}),l.jsx(Pe,{type:"button",variant:"outline",size:"sm",onClick:C,children:"+ Add Item"})]}),l.jsx("div",{className:"space-y-4",children:A.map((ne,ee)=>l.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end border-b pb-4",children:[l.jsx("div",{className:"col-span-12 md:col-span-5",children:l.jsx(He,{label:"Description",value:ne.description,onChange:q=>I(ee,"description",q.target.value),placeholder:"Item description",required:!0})}),l.jsx("div",{className:"col-span-4 md:col-span-2",children:l.jsx(He,{label:"Qty",type:"number",min:"0.01",step:"0.01",value:ne.quantity,onChange:q=>I(ee,"quantity",parseFloat(q.target.value)||0),required:!0})}),l.jsx("div",{className:"col-span-4 md:col-span-2",children:l.jsx(He,{label:"Price",type:"number",min:"0",step:"0.01",value:ne.unit_price,onChange:q=>I(ee,"unit_price",parseFloat(q.target.value)||0),required:!0})}),l.jsx("div",{className:"col-span-3 md:col-span-2",children:l.jsx(He,{label:"Tax %",type:"number",min:"0",max:"100",step:"0.01",value:ne.tax_rate,onChange:q=>I(ee,"tax_rate",parseFloat(q.target.value)||0),required:!0})}),l.jsx("div",{className:"col-span-1",children:A.length>1&&l.jsx(Pe,{type:"button",variant:"destructive",size:"sm",onClick:()=>L(ee),children:""})})]},ee))})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Summary"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{className:"font-medium",children:Ie(V.subtotal)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Tax Total:"}),l.jsx("span",{className:"font-medium",children:Ie(V.taxTotal)})]}),l.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[l.jsx("span",{children:"Grand Total:"}),l.jsx("span",{className:"text-primary",children:Ie(V.grandTotal)})]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:()=>e("/invoices"),disabled:u,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:u,children:u?"Creating...":"Create Invoice"})]})]})]})}async function gW(e,t={}){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");let n=be.from("payments_with_details").select("*").order("payment_date",{ascending:!1});if(r.role==="manager"){const{data:s}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(s&&s.length>0){const o=s.map(u=>u.outlet_id),{data:c}=await be.from("invoices").select("id").in("outlet_id",o);if(c&&c.length>0){const u=c.map(d=>d.id);n=n.in("invoice_id",u)}else return[]}else return[]}if(t.outlet_id&&["admin","accountant"].includes(r.role)){const{data:s}=await be.from("invoices").select("id").eq("outlet_id",t.outlet_id);if(s&&s.length>0){const o=s.map(c=>c.id);n=n.in("invoice_id",o)}else return[]}t.invoice_id&&(n=n.eq("invoice_id",t.invoice_id)),t.payment_method&&(n=n.eq("payment_method",t.payment_method)),t.date_from&&(n=n.gte("payment_date",t.date_from)),t.date_to&&(n=n.lte("payment_date",t.date_to)),t.is_active!==void 0?n=n.eq("is_active",t.is_active):n=n.eq("is_active",!0);const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function pT(e){const{data:t,error:r}=await be.from("payments_with_details").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function yW(e){const{data:t,error:r}=await be.from("payments_with_details").select("*").eq("invoice_id",e).order("payment_date",{ascending:!1});if(r)throw new Error(r.message);return t||[]}async function mT(e){const{data:t,error:r}=await be.from("invoices_with_payment_status").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw new Error(r.message)}return t}async function xW(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");if(!t.invoice_id)throw new Error("Invoice is required");if(!t.amount||t.amount<=0)throw new Error("Payment amount must be greater than zero");if(!t.payment_method)throw new Error("Payment method is required");if(!t.payment_date)throw new Error("Payment date is required");const n=new Date(t.payment_date),i=new Date;if(i.setHours(0,0,0,0),n>i)throw new Error("Payment date cannot be in the future");const a=await mT(t.invoice_id);if(!a)throw new Error("Invoice not found");if(a.status==="draft")throw new Error("Cannot record payment for draft invoice. Issue the invoice first.");if(a.status==="cancelled")throw new Error("Cannot record payment for cancelled invoice");if(t.amount>a.balance_due+1)throw new Error(`Payment amount (${t.amount}) exceeds balance due (${a.balance_due})`);if(r.role==="manager"){const{data:d}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((d==null?void 0:d.map(p=>p.outlet_id))||[]).includes(a.outlet_id))throw new Error("You can only record payments for your assigned outlets")}const{data:o,error:c}=await be.from("payments").insert({invoice_id:t.invoice_id,amount:t.amount,payment_method:t.payment_method,payment_date:t.payment_date,reference_number:t.reference_number||null,notes:t.notes||null}).select().single();if(c)throw new Error(c.message);const u=await pT(o.id);if(!u)throw new Error("Failed to fetch created payment");return u}async function bW(e,t){const{data:r}=await be.from("user_profiles").select("role").eq("id",e).single();if(!r)throw new Error("User profile not found");const n=await pT(t);if(!n)throw new Error("Payment not found");if(!n.is_active)throw new Error("Payment is already deleted");const{data:i}=await be.from("invoices").select("outlet_id").eq("id",n.invoice_id).single();if(!i)throw new Error("Invoice not found");if(r.role==="manager"){const{data:s}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(!((s==null?void 0:s.map(c=>c.outlet_id))||[]).includes(i.outlet_id))throw new Error("You can only delete payments for your assigned outlets")}const{error:a}=await be.from("payments").update({is_active:!1}).eq("id",t);if(a)throw new Error(a.message)}async function wW(e){const t=await mT(e);if(!t)throw new Error("Invoice not found");const n=(await yW(e)).filter(i=>i.is_active);return{invoice_total:t.grand_total,amount_paid:t.amount_paid,balance_due:t.balance_due,payment_status:t.payment_status,payment_count:n.length,payments:n}}const _W="modulepreload",jW=function(e){return"/"+e},Qk={},I1=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=jW(c),c in Qk)return;Qk[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":_W,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};function er(e){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(e)}var Ya=Uint8Array,Ki=Uint16Array,o5=Int32Array,l5=new Ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c5=new Ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),eA=new Ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vT=function(e,t){for(var r=new Ki(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new o5(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},gT=vT(l5,2),SW=gT.b,U2=gT.r;SW[28]=258,U2[258]=28;var NW=vT(c5,0),tA=NW.r,z2=new Ki(32768);for(var xr=0;xr<32768;++xr){var tl=(xr&43690)>>1|(xr&21845)<<1;tl=(tl&52428)>>2|(tl&13107)<<2,tl=(tl&61680)>>4|(tl&3855)<<4,z2[xr]=((tl&65280)>>8|(tl&255)<<8)>>1}var Nh=function(e,t,r){for(var n=e.length,i=0,a=new Ki(t);i<n;++i)e[i]&&++a[e[i]-1];var s=new Ki(t);for(i=1;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(r){o=new Ki(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],f=s[e[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[z2[f]>>c]=u}else for(o=new Ki(n),i=0;i<n;++i)e[i]&&(o[i]=z2[s[e[i]-1]++]>>15-e[i]);return o},Uc=new Ya(288);for(var xr=0;xr<144;++xr)Uc[xr]=8;for(var xr=144;xr<256;++xr)Uc[xr]=9;for(var xr=256;xr<280;++xr)Uc[xr]=7;for(var xr=280;xr<288;++xr)Uc[xr]=8;var Ig=new Ya(32);for(var xr=0;xr<32;++xr)Ig[xr]=5;var kW=Nh(Uc,9,0),AW=Nh(Ig,5,0),yT=function(e){return(e+7)/8|0},EW=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Ya(e.subarray(t,r))},Qs=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Yf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},L1=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return{t:bT,l:0};if(i==1){var s=new Ya(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(A,N){return A.f-N.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=i-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var p=a[0].s,n=1;n<i;++n)a[n].s>p&&(p=a[n].s);var h=new Ki(p+1),y=q2(r[d-1],h,0);if(y>t){var n=0,v=0,x=y-t,g=1<<x;for(a.sort(function(N,D){return h[D.s]-h[N.s]||N.f-D.f});n<i;++n){var _=a[n].s;if(h[_]>t)v+=g-(1<<y-h[_]),h[_]=t;else break}for(v>>=x;v>0;){var S=a[n].s;h[S]<t?v-=1<<t-h[S]++-1:++n}for(;n>=0&&v;--n){var j=a[n].s;h[j]==t&&(--h[j],++v)}y=t}return{t:new Ya(h),l:y}},q2=function(e,t,r){return e.s==-1?Math.max(q2(e.l,t,r+1),q2(e.r,t,r+1)):t[e.s]=r},rA=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ki(++t),n=0,i=e[0],a=1,s=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return{c:r.subarray(0,n),n:t}},Jf=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},xT=function(e,t,r){var n=r.length,i=yT(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},nA=function(e,t,r,n,i,a,s,o,c,u,d){Qs(t,d++,r),++i[256];for(var f=L1(i,15),p=f.t,h=f.l,y=L1(a,15),v=y.t,x=y.l,g=rA(p),_=g.c,S=g.n,j=rA(v),A=j.c,N=j.n,D=new Ki(19),E=0;E<_.length;++E)++D[_[E]&31];for(var E=0;E<A.length;++E)++D[A[E]&31];for(var C=L1(D,7),L=C.t,I=C.l,O=19;O>4&&!L[eA[O-1]];--O);var U=u+5<<3,V=Jf(i,Uc)+Jf(a,Ig)+s,ie=Jf(i,p)+Jf(a,v)+s+14+3*O+Jf(D,L)+2*D[16]+3*D[17]+7*D[18];if(c>=0&&U<=V&&U<=ie)return xT(t,d,e.subarray(c,c+u));var ne,ee,q,Y;if(Qs(t,d,1+(ie<V)),d+=2,ie<V){ne=Nh(p,h,0),ee=p,q=Nh(v,x,0),Y=v;var fe=Nh(L,I,0);Qs(t,d,S-257),Qs(t,d+5,N-1),Qs(t,d+10,O-4),d+=14;for(var E=0;E<O;++E)Qs(t,d+3*E,L[eA[E]]);d+=3*O;for(var te=[_,A],R=0;R<2;++R)for(var z=te[R],E=0;E<z.length;++E){var G=z[E]&31;Qs(t,d,fe[G]),d+=L[G],G>15&&(Qs(t,d,z[E]>>5&127),d+=z[E]>>12)}}else ne=kW,ee=Uc,q=AW,Y=Ig;for(var E=0;E<o;++E){var re=n[E];if(re>255){var G=re>>18&31;Yf(t,d,ne[G+257]),d+=ee[G+257],G>7&&(Qs(t,d,re>>23&31),d+=l5[G]);var ae=re&31;Yf(t,d,q[ae]),d+=Y[ae],ae>3&&(Yf(t,d,re>>5&8191),d+=c5[ae])}else Yf(t,d,ne[re]),d+=ee[re]}return Yf(t,d,ne[256]),d+ee[256]},PW=new o5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bT=new Ya(0),CW=function(e,t,r,n,i,a){var s=a.z||e.length,o=new Ya(n+s+5*(1+Math.ceil(s/7e3))+i),c=o.subarray(n,o.length-i),u=a.l,d=(a.r||0)&7;if(t){d&&(c[0]=a.r>>3);for(var f=PW[t-1],p=f>>13,h=f&8191,y=(1<<r)-1,v=a.p||new Ki(32768),x=a.h||new Ki(y+1),g=Math.ceil(r/3),_=2*g,S=function(Ee){return(e[Ee]^e[Ee+1]<<g^e[Ee+2]<<_)&y},j=new o5(25e3),A=new Ki(288),N=new Ki(32),D=0,E=0,C=a.i||0,L=0,I=a.w||0,O=0;C+2<s;++C){var U=S(C),V=C&32767,ie=x[U];if(v[V]=ie,x[U]=V,I<=C){var ne=s-C;if((D>7e3||L>24576)&&(ne>423||!u)){d=nA(e,c,0,j,A,N,E,L,O,C-O,d),L=D=E=0,O=C;for(var ee=0;ee<286;++ee)A[ee]=0;for(var ee=0;ee<30;++ee)N[ee]=0}var q=2,Y=0,fe=h,te=V-ie&32767;if(ne>2&&U==S(C-te))for(var R=Math.min(p,ne)-1,z=Math.min(32767,C),G=Math.min(258,ne);te<=z&&--fe&&V!=ie;){if(e[C+q]==e[C+q-te]){for(var re=0;re<G&&e[C+re]==e[C+re-te];++re);if(re>q){if(q=re,Y=te,re>R)break;for(var ae=Math.min(te,re-2),ce=0,ee=0;ee<ae;++ee){var pe=C-te+ee&32767,Q=v[pe],he=pe-Q&32767;he>ce&&(ce=he,ie=pe)}}}V=ie,ie=v[V],te+=V-ie&32767}if(Y){j[L++]=268435456|U2[q]<<18|tA[Y];var oe=U2[q]&31,ue=tA[Y]&31;E+=l5[oe]+c5[ue],++A[257+oe],++N[ue],I=C+q,++D}else j[L++]=e[C],++A[e[C]]}}for(C=Math.max(C,I);C<s;++C)j[L++]=e[C],++A[e[C]];d=nA(e,c,u,j,A,N,E,L,O,C-O,d),u||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=x,a.p=v,a.i=C,a.w=I)}else{for(var C=a.w||0;C<s+u;C+=65535){var Ce=C+65535;Ce>=s&&(c[d/8|0]=u,Ce=s),d=xT(c,d+1,e.subarray(C,Ce))}a.i=s}return EW(o,0,n+yT(d)+i)},wT=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,a=r.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=r[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},OW=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new Ya(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return CW(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},_T=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},TW=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=wT();i.p(t.dictionary),_T(e,2,i.d())}};function W2(e,t){t||(t={});var r=wT();r.p(e);var n=OW(e,t,t.dictionary?6:2,4);return TW(n,t),_T(n,n.length-4,r.d()),n}var IW=typeof TextDecoder<"u"&&new TextDecoder,LW=0;try{IW.decode(bT,{stream:!0}),LW=1}catch{}function DW(e){if(Array.isArray(e))return e}function RW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function iA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function MW(e,t){if(e){if(typeof e=="string")return iA(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iA(e,t):void 0}}function FW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aA(e,t){return DW(e)||RW(e,t)||MW(e,t)||FW()}function sA(e,t="utf8"){return new TextDecoder(t).decode(e)}const BW=new TextEncoder;function $W(e){return BW.encode(e)}const UW=1024*8,zW=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),D1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class u5{constructor(t=UW,r={}){Vt(this,"buffer");Vt(this,"byteLength");Vt(this,"byteOffset");Vt(this,"length");Vt(this,"offset");Vt(this,"lastWrittenByte");Vt(this,"littleEndian");Vt(this,"_data");Vt(this,"_mark");Vt(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,a=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof u5)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=D1[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===zW&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const c=new D1[r](o.buffer);return this.offset+=n,c.reverse(),c}const s=new D1[r](a);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return sA(this.readBytes(t))}decodeText(t=1,r="utf8"){return sA(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes($W(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Jd(e){let t=e.length;for(;--t>=0;)e[t]=0}const qW=3,WW=258,jT=29,HW=256,VW=HW+1+jT,ST=30,KW=512,GW=new Array((VW+2)*2);Jd(GW);const YW=new Array(ST*2);Jd(YW);const JW=new Array(KW);Jd(JW);const XW=new Array(WW-qW+1);Jd(XW);const ZW=new Array(jT);Jd(ZW);const QW=new Array(ST);Jd(QW);const eH=(e,t,r,n)=>{let i=e&65535|0,a=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var H2=eH;const tH=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},rH=new Uint32Array(tH()),nH=(e,t,r,n)=>{const i=rH,a=n+r;e^=-1;for(let s=n;s<a;s++)e=e>>>8^i[(e^t[s])&255];return e^-1};var us=nH,V2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},NT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const iH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var aH=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)iH(r,n)&&(e[n]=r[n])}}return e},sH=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let s=e[n];r.set(s,i),i+=s.length}return r},kT={assign:aH,flattenChunks:sH};let AT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{AT=!1}const tp=new Uint8Array(256);for(let e=0;e<256;e++)tp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;tp[254]=tp[254]=1;var oH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,s=e.length,o=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),a=0,i=0;a<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const lH=(e,t)=>{if(t<65534&&e.subarray&&AT)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var cH=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let s=e[n++];if(s<128){a[i++]=s;continue}let o=tp[s];if(o>4){a[i++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<r;)s=s<<6|e[n++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return lH(a,i)},uH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+tp[e[r]]>t?r:t},K2={string2buf:oH,buf2string:cH,utf8border:uH};function dH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var fH=dH;const sv=16209,hH=16191;var pH=function(t,r){let n,i,a,s,o,c,u,d,f,p,h,y,v,x,g,_,S,j,A,N,D,E,C,L;const I=t.state;n=t.next_in,C=t.input,i=n+(t.avail_in-5),a=t.next_out,L=t.output,s=a-(r-t.avail_out),o=a+(t.avail_out-257),c=I.dmax,u=I.wsize,d=I.whave,f=I.wnext,p=I.window,h=I.hold,y=I.bits,v=I.lencode,x=I.distcode,g=(1<<I.lenbits)-1,_=(1<<I.distbits)-1;e:do{y<15&&(h+=C[n++]<<y,y+=8,h+=C[n++]<<y,y+=8),S=v[h&g];t:for(;;){if(j=S>>>24,h>>>=j,y-=j,j=S>>>16&255,j===0)L[a++]=S&65535;else if(j&16){A=S&65535,j&=15,j&&(y<j&&(h+=C[n++]<<y,y+=8),A+=h&(1<<j)-1,h>>>=j,y-=j),y<15&&(h+=C[n++]<<y,y+=8,h+=C[n++]<<y,y+=8),S=x[h&_];r:for(;;){if(j=S>>>24,h>>>=j,y-=j,j=S>>>16&255,j&16){if(N=S&65535,j&=15,y<j&&(h+=C[n++]<<y,y+=8,y<j&&(h+=C[n++]<<y,y+=8)),N+=h&(1<<j)-1,N>c){t.msg="invalid distance too far back",I.mode=sv;break e}if(h>>>=j,y-=j,j=a-s,N>j){if(j=N-j,j>d&&I.sane){t.msg="invalid distance too far back",I.mode=sv;break e}if(D=0,E=p,f===0){if(D+=u-j,j<A){A-=j;do L[a++]=p[D++];while(--j);D=a-N,E=L}}else if(f<j){if(D+=u+f-j,j-=f,j<A){A-=j;do L[a++]=p[D++];while(--j);if(D=0,f<A){j=f,A-=j;do L[a++]=p[D++];while(--j);D=a-N,E=L}}}else if(D+=f-j,j<A){A-=j;do L[a++]=p[D++];while(--j);D=a-N,E=L}for(;A>2;)L[a++]=E[D++],L[a++]=E[D++],L[a++]=E[D++],A-=3;A&&(L[a++]=E[D++],A>1&&(L[a++]=E[D++]))}else{D=a-N;do L[a++]=L[D++],L[a++]=L[D++],L[a++]=L[D++],A-=3;while(A>2);A&&(L[a++]=L[D++],A>1&&(L[a++]=L[D++]))}}else if(j&64){t.msg="invalid distance code",I.mode=sv;break e}else{S=x[(S&65535)+(h&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){I.mode=hH;break e}else{t.msg="invalid literal/length code",I.mode=sv;break e}else{S=v[(S&65535)+(h&(1<<j)-1)];continue t}break}}while(n<i&&a<o);A=y>>3,n-=A,y-=A<<3,h&=(1<<y)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<o?257+(o-a):257-(a-o),I.hold=h,I.bits=y};const Mu=15,oA=852,lA=592,cA=0,R1=1,uA=2,mH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),xH=(e,t,r,n,i,a,s,o)=>{const c=o.bits;let u=0,d=0,f=0,p=0,h=0,y=0,v=0,x=0,g=0,_=0,S,j,A,N,D,E=null,C;const L=new Uint16Array(Mu+1),I=new Uint16Array(Mu+1);let O=null,U,V,ie;for(u=0;u<=Mu;u++)L[u]=0;for(d=0;d<n;d++)L[t[r+d]]++;for(h=c,p=Mu;p>=1&&L[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&L[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=Mu;u++)if(x<<=1,x-=L[u],x<0)return-1;if(x>0&&(e===cA||p!==1))return-1;for(I[1]=0,u=1;u<Mu;u++)I[u+1]=I[u]+L[u];for(d=0;d<n;d++)t[r+d]!==0&&(s[I[t[r+d]]++]=d);if(e===cA?(E=O=s,C=20):e===R1?(E=mH,O=vH,C=257):(E=gH,O=yH,C=0),_=0,d=0,u=f,D=a,y=h,v=0,A=-1,g=1<<h,N=g-1,e===R1&&g>oA||e===uA&&g>lA)return 1;for(;;){U=u-v,s[d]+1<C?(V=0,ie=s[d]):s[d]>=C?(V=O[s[d]-C],ie=E[s[d]-C]):(V=96,ie=0),S=1<<u-v,j=1<<y,f=j;do j-=S,i[D+(_>>v)+j]=U<<24|V<<16|ie|0;while(j!==0);for(S=1<<u-1;_&S;)S>>=1;if(S!==0?(_&=S-1,_+=S):_=0,d++,--L[u]===0){if(u===p)break;u=t[r+s[d]]}if(u>h&&(_&N)!==A){for(v===0&&(v=h),D+=f,y=u-v,x=1<<y;y+v<p&&(x-=L[y+v],!(x<=0));)y++,x<<=1;if(g+=1<<y,e===R1&&g>oA||e===uA&&g>lA)return 1;A=_&N,i[A]=h<<24|y<<16|D-a|0}}return _!==0&&(i[D+_]=u-v<<24|64<<16|0),o.bits=h,0};var kh=xH;const bH=0,ET=1,PT=2,{Z_FINISH:dA,Z_BLOCK:wH,Z_TREES:ov,Z_OK:zc,Z_STREAM_END:_H,Z_NEED_DICT:jH,Z_STREAM_ERROR:_a,Z_DATA_ERROR:CT,Z_MEM_ERROR:OT,Z_BUF_ERROR:SH,Z_DEFLATED:fA}=NT,o0=16180,hA=16181,pA=16182,mA=16183,vA=16184,gA=16185,yA=16186,xA=16187,bA=16188,wA=16189,Lg=16190,eo=16191,M1=16192,_A=16193,F1=16194,jA=16195,SA=16196,NA=16197,kA=16198,lv=16199,cv=16200,AA=16201,EA=16202,PA=16203,CA=16204,OA=16205,B1=16206,TA=16207,IA=16208,jr=16209,TT=16210,IT=16211,NH=852,kH=592,AH=15,EH=AH,LA=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function PH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const lu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<o0||t.mode>IT?1:0},LT=e=>{if(lu(e))return _a;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=o0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(NH),t.distcode=t.distdyn=new Int32Array(kH),t.sane=1,t.back=-1,zc},DT=e=>{if(lu(e))return _a;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,LT(e)},RT=(e,t)=>{let r;if(lu(e))return _a;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?_a:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,DT(e))},MT=(e,t)=>{if(!e)return _a;const r=new PH;e.state=r,r.strm=e,r.window=null,r.mode=o0;const n=RT(e,t);return n!==zc&&(e.state=null),n},CH=e=>MT(e,EH);let DA=!0,$1,U1;const OH=e=>{if(DA){$1=new Int32Array(512),U1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(kh(ET,e.lens,0,288,$1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;kh(PT,e.lens,0,32,U1,0,e.work,{bits:5}),DA=!1}e.lencode=$1,e.lenbits=9,e.distcode=U1,e.distbits=5},FT=(e,t,r,n)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},TH=(e,t)=>{let r,n,i,a,s,o,c,u,d,f,p,h,y,v,x=0,g,_,S,j,A,N,D,E;const C=new Uint8Array(4);let L,I;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(lu(e)||!e.output||!e.input&&e.avail_in!==0)return _a;r=e.state,r.mode===eo&&(r.mode=M1),s=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,f=o,p=c,E=zc;e:for(;;)switch(r.mode){case o0:if(r.wrap===0){r.mode=M1;break}for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,C[0]=u&255,C[1]=u>>>8&255,r.check=us(r.check,C,2,0),u=0,d=0,r.mode=hA;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=jr;break}if((u&15)!==fA){e.msg="unknown compression method",r.mode=jr;break}if(u>>>=4,d-=4,D=(u&15)+8,r.wbits===0&&(r.wbits=D),D>15||D>r.wbits){e.msg="invalid window size",r.mode=jr;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?wA:eo,u=0,d=0;break;case hA:for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==fA){e.msg="unknown compression method",r.mode=jr;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=jr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=us(r.check,C,2,0)),u=0,d=0,r.mode=pA;case pA:for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,r.check=us(r.check,C,4,0)),u=0,d=0,r.mode=mA;case mA:for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=us(r.check,C,2,0)),u=0,d=0,r.mode=vA;case vA:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=us(r.check,C,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=gA;case gA:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),D)),r.flags&512&&r.wrap&4&&(r.check=us(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=yA;case yA:if(r.flags&2048){if(o===0)break e;h=0;do D=n[a+h++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D));while(D&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=us(r.check,n,h,a)),o-=h,a+=h,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=xA;case xA:if(r.flags&4096){if(o===0)break e;h=0;do D=n[a+h++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D));while(D&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=us(r.check,n,h,a)),o-=h,a+=h,D)break e}else r.head&&(r.head.comment=null);r.mode=bA;case bA:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=jr;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=eo;break;case wA:for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}e.adler=r.check=LA(u),u=0,d=0,r.mode=Lg;case Lg:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=o,r.hold=u,r.bits=d,jH;e.adler=r.check=1,r.mode=eo;case eo:if(t===wH||t===ov)break e;case M1:if(r.last){u>>>=d&7,d-=d&7,r.mode=B1;break}for(;d<3;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=_A;break;case 1:if(OH(r),r.mode=lv,t===ov){u>>>=2,d-=2;break e}break;case 2:r.mode=SA;break;case 3:e.msg="invalid block type",r.mode=jr}u>>>=2,d-=2;break;case _A:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=jr;break}if(r.length=u&65535,u=0,d=0,r.mode=F1,t===ov)break e;case F1:r.mode=jA;case jA:if(h=r.length,h){if(h>o&&(h=o),h>c&&(h=c),h===0)break e;i.set(n.subarray(a,a+h),s),o-=h,a+=h,c-=h,s+=h,r.length-=h;break}r.mode=eo;break;case SA:for(;d<14;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=jr;break}r.have=0,r.mode=NA;case NA:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.lens[O[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},E=kh(bH,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid code lengths set",r.mode=jr;break}r.have=0,r.mode=kA;case kA:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],g=x>>>24,_=x>>>16&255,S=x&65535,!(g<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(S<16)u>>>=g,d-=g,r.lens[r.have++]=S;else{if(S===16){for(I=g+2;d<I;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(u>>>=g,d-=g,r.have===0){e.msg="invalid bit length repeat",r.mode=jr;break}D=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(S===17){for(I=g+3;d<I;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=g,d-=g,D=0,h=3+(u&7),u>>>=3,d-=3}else{for(I=g+7;d<I;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=g,d-=g,D=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=jr;break}for(;h--;)r.lens[r.have++]=D}}if(r.mode===jr)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=jr;break}if(r.lenbits=9,L={bits:r.lenbits},E=kh(ET,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid literal/lengths set",r.mode=jr;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},E=kh(PT,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,E){e.msg="invalid distances set",r.mode=jr;break}if(r.mode=lv,t===ov)break e;case lv:r.mode=cv;case cv:if(o>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=o,r.hold=u,r.bits=d,pH(e,p),s=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,r.mode===eo&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],g=x>>>24,_=x>>>16&255,S=x&65535,!(g<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(_&&!(_&240)){for(j=g,A=_,N=S;x=r.lencode[N+((u&(1<<j+A)-1)>>j)],g=x>>>24,_=x>>>16&255,S=x&65535,!(j+g<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=g,d-=g,r.back+=g,r.length=S,_===0){r.mode=OA;break}if(_&32){r.back=-1,r.mode=eo;break}if(_&64){e.msg="invalid literal/length code",r.mode=jr;break}r.extra=_&15,r.mode=AA;case AA:if(r.extra){for(I=r.extra;d<I;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=EA;case EA:for(;x=r.distcode[u&(1<<r.distbits)-1],g=x>>>24,_=x>>>16&255,S=x&65535,!(g<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(!(_&240)){for(j=g,A=_,N=S;x=r.distcode[N+((u&(1<<j+A)-1)>>j)],g=x>>>24,_=x>>>16&255,S=x&65535,!(j+g<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=g,d-=g,r.back+=g,_&64){e.msg="invalid distance code",r.mode=jr;break}r.offset=S,r.extra=_&15,r.mode=PA;case PA:if(r.extra){for(I=r.extra;d<I;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=jr;break}r.mode=CA;case CA:if(c===0)break e;if(h=p-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=jr;break}h>r.wnext?(h-=r.wnext,y=r.wsize-h):y=r.wnext-h,h>r.length&&(h=r.length),v=r.window}else v=i,y=s-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do i[s++]=v[y++];while(--h);r.length===0&&(r.mode=cv);break;case OA:if(c===0)break e;i[s++]=r.length,c--,r.mode=cv;break;case B1:if(r.wrap){for(;d<32;){if(o===0)break e;o--,u|=n[a++]<<d,d+=8}if(p-=c,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?us(r.check,i,p,s-p):H2(r.check,i,p,s-p)),p=c,r.wrap&4&&(r.flags?u:LA(u))!==r.check){e.msg="incorrect data check",r.mode=jr;break}u=0,d=0}r.mode=TA;case TA:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=jr;break}u=0,d=0}r.mode=IA;case IA:E=_H;break e;case jr:E=CT;break e;case TT:return OT;case IT:default:return _a}return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=o,r.hold=u,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<jr&&(r.mode<B1||t!==dA))&&FT(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?us(r.check,i,p,e.next_out-p):H2(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===eo?128:0)+(r.mode===lv||r.mode===F1?256:0),(f===0&&p===0||t===dA)&&E===zc&&(E=SH),E},IH=e=>{if(lu(e))return _a;let t=e.state;return t.window&&(t.window=null),e.state=null,zc},LH=(e,t)=>{if(lu(e))return _a;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,zc):_a},DH=(e,t)=>{const r=t.length;let n,i,a;return lu(e)||(n=e.state,n.wrap!==0&&n.mode!==Lg)?_a:n.mode===Lg&&(i=1,i=H2(i,t,r,0),i!==n.check)?CT:(a=FT(e,t,r,r),a?(n.mode=TT,OT):(n.havedict=1,zc))};var RH=DT,MH=RT,FH=LT,BH=CH,$H=MT,UH=TH,zH=IH,qH=LH,WH=DH,HH="pako inflate (from Nodeca project)",io={inflateReset:RH,inflateReset2:MH,inflateResetKeep:FH,inflateInit:BH,inflateInit2:$H,inflate:UH,inflateEnd:zH,inflateGetHeader:qH,inflateSetDictionary:WH,inflateInfo:HH};function VH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var KH=VH;const BT=Object.prototype.toString,{Z_NO_FLUSH:GH,Z_FINISH:YH,Z_OK:rp,Z_STREAM_END:z1,Z_NEED_DICT:q1,Z_STREAM_ERROR:JH,Z_DATA_ERROR:RA,Z_MEM_ERROR:XH}=NT;function Ep(e){this.options=kT.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fH,this.strm.avail_out=0;let r=io.inflateInit2(this.strm,t.windowBits);if(r!==rp)throw new Error(V2[r]);if(this.header=new KH,io.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=K2.string2buf(t.dictionary):BT.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=io.inflateSetDictionary(this.strm,t.dictionary),r!==rp)))throw new Error(V2[r])}Ep.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?YH:GH,BT.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=io.inflate(r,s),a===q1&&i&&(a=io.inflateSetDictionary(r,i),a===rp?a=io.inflate(r,s):a===RA&&(a=q1));r.avail_in>0&&a===z1&&r.state.wrap>0&&e[r.next_in]!==0;)io.inflateReset(r),a=io.inflate(r,s);switch(a){case JH:case RA:case q1:case XH:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||a===z1))if(this.options.to==="string"){let c=K2.utf8border(r.output,r.next_out),u=r.next_out-c,d=K2.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===rp&&o===0)){if(a===z1)return a=io.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Ep.prototype.onData=function(e){this.chunks.push(e)};Ep.prototype.onEnd=function(e){e===rp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kT.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ZH(e,t){const r=new Ep(t);if(r.push(e),r.err)throw r.msg||V2[r.err];return r.result}var QH=Ep,eV=ZH,tV={Inflate:QH,inflate:eV};const{Inflate:rV,inflate:nV}=tV;var MA=rV,iV=nV;const $T=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;$T[e]=t}const FA=4294967295;function aV(e,t,r){let n=e;for(let i=0;i<r;i++)n=$T[(n^t[i])&255]^n>>>8;return n}function sV(e,t){return(aV(FA,e,t)^FA)>>>0}function BA(e,t,r){const n=e.readUint32(),i=sV(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function UT(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function zT(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function qT(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function WT(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-i]+r[a]>>1)&255}}function HT(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+r[a]&255;for(;a<n;a++)t[a]=e[a]+oV(t[a-i],r[a],r[a-i])&255}}function oV(e,t,r){const n=e+t-r,i=Math.abs(n-e),a=Math.abs(n-t),s=Math.abs(n-r);return i<=a&&i<=s?e:a<=s?t:r}function lV(e,t,r,n,i,a){switch(e){case 0:UT(t,r,i);break;case 1:zT(t,r,i,a);break;case 2:qT(t,r,n,i);break;case 3:WT(t,r,n,i,a);break;case 4:HT(t,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const cV=new Uint16Array([255]),uV=new Uint8Array(cV.buffer),dV=uV[0]===255;function fV(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,c=new Uint8Array(n*r*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(p<=0||h<=0)continue;const y=p*o,v=new Uint8Array(y);for(let x=0;x<h;x++){const g=t[u++],_=t.subarray(u,u+y);u+=y;const S=new Uint8Array(y);lV(g,_,S,v,y,o),v.set(S);for(let j=0;j<p;j++){const A=f.x+j*f.xStep,N=f.y+x*f.yStep;if(!(A>=r||N>=n))for(let D=0;D<o;D++)c[(N*r+A)*o+D]=S[j*o+D]}}}if(a===16){const d=new Uint16Array(c.buffer);if(dV)for(let f=0;f<d.length;f++)d[f]=hV(d[f]);return d}else return c}function hV(e){return(e&255)<<8|e>>8&255}const pV=new Uint16Array([255]),mV=new Uint8Array(pV.buffer),vV=mV[0]===255,gV=new Uint8Array(0);function $A(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*r),c=new Uint8Array(n*o);let u=gV,d=0,f,p;for(let h=0;h<n;h++){switch(f=t.subarray(d+1,d+1+o),p=c.subarray(h*o,(h+1)*o),t[d]){case 0:UT(f,p,o);break;case 1:zT(f,p,o,s);break;case 2:qT(f,p,u,o);break;case 3:WT(f,p,u,o,s);break;case 4:HT(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=p,d+=o+1}if(a===16){const h=new Uint16Array(c.buffer);if(vV)for(let y=0;y<h.length;y++)h[y]=yV(h[y]);return h}else return c}function yV(e){return(e&255)<<8|e>>8&255}const Wv=Uint8Array.of(137,80,78,71,13,10,26,10);function UA(e){if(!xV(e.readBytes(Wv.length)))throw new Error("wrong PNG signature")}function xV(e){if(e.length<Wv.length)return!1;for(let t=0;t<Wv.length;t++)if(e[t]!==Wv[t])return!1;return!0}const bV="tEXt",wV=0,VT=new TextDecoder("latin1");function _V(e){if(SV(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const jV=/^[\u0000-\u00FF]*$/;function SV(e){if(!jV.test(e))throw new Error("invalid latin1 text")}function NV(e,t,r){const n=KT(t);e[n]=kV(t,r-n.length-1)}function KT(e){for(e.mark();e.readByte()!==wV;);const t=e.offset;e.reset();const r=VT.decode(e.readBytes(t-e.offset-1));return e.skip(1),_V(r),r}function kV(e,t){return VT.decode(e.readBytes(t))}const zi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},W1={UNKNOWN:-1,DEFLATE:0},zA={UNKNOWN:-1,ADAPTIVE:0},H1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},uv={NONE:0,BACKGROUND:1,PREVIOUS:2},V1={SOURCE:0,OVER:1};class AV extends u5{constructor(r,n={}){super(r);Vt(this,"_checkCrc");Vt(this,"_inflator");Vt(this,"_png");Vt(this,"_apng");Vt(this,"_end");Vt(this,"_hasPalette");Vt(this,"_palette");Vt(this,"_hasTransparency");Vt(this,"_transparency");Vt(this,"_compressionMethod");Vt(this,"_filterMethod");Vt(this,"_interlaceMethod");Vt(this,"_colorType");Vt(this,"_isAnimated");Vt(this,"_numberOfFrames");Vt(this,"_numberOfPlays");Vt(this,"_frames");Vt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new MA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=W1.UNKNOWN,this._filterMethod=zA.UNKNOWN,this._interlaceMethod=H1.UNKNOWN,this._colorType=zi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(UA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(UA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case bV:NV(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?BA(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?BA(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=EV(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case zi.GREYSCALE:i=1;break;case zi.TRUECOLOUR:i=3;break;case zi.INDEXED_COLOUR:i=1;break;case zi.GREYSCALE_ALPHA:i=2;break;case zi.TRUECOLOUR_ALPHA:i=4;break;case zi.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==W1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case zi.GREYSCALE:case zi.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case zi.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case zi.UNKNOWN:case zi.GREYSCALE_ALPHA:case zi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=KT(this),i=this.readUint8();if(i!==W1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:iV(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=$A({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case uv.NONE:break;case uv.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*r.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[o+c]=0}break;case uv.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(s,o)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(s*n.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case V1.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case V1.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*p+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==zA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===H1.NO_INTERLACE)this._png.data=$A({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===H1.ADAM7)this._png.data=fV({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:uv.NONE,blendOp:V1.SOURCE,data:r}),this._inflator=new MA,this._writingDataChunks=!1}}function EV(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var qA;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(qA||(qA={}));function PV(e,t){return new AV(e,t).decode()}var gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function K1(){gt.console&&typeof gt.console.log=="function"&&gt.console.log.apply(gt.console,arguments)}var ar={log:K1,warn:function(e){gt.console&&(typeof gt.console.warn=="function"?gt.console.warn.apply(gt.console,arguments):K1.call(null,arguments))},error:function(e){gt.console&&(typeof gt.console.error=="function"?gt.console.error.apply(gt.console,arguments):K1(e))}};function G1(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){pc(n.response,t,r)},n.onerror=function(){ar.error("could not download file")},n.send()}function WA(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function dv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var pc=gt.saveAs||((typeof window>"u"?"undefined":er(window))!=="object"||window!==gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=gt.URL||gt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?WA(i.href)?G1(e,t,r):dv(i,i.target="_blank"):dv(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){dv(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(WA(e))G1(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){dv(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:er(a)!=="object"&&(ar.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return G1(e,t,r);var i=e.type==="application/octet-stream",a=/constructor/i.test(gt.HTMLElement)||gt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":er(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=gt.URL||gt.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function GT(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,s=i.exec(e);s&&(t=a(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}var Hv=gt.atob.bind(gt),HA=gt.btoa.bind(gt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Y1(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];r=Qn(r,n,i,a,t[0],7,-680876936),a=Qn(a,r,n,i,t[1],12,-389564586),i=Qn(i,a,r,n,t[2],17,606105819),n=Qn(n,i,a,r,t[3],22,-1044525330),r=Qn(r,n,i,a,t[4],7,-176418897),a=Qn(a,r,n,i,t[5],12,1200080426),i=Qn(i,a,r,n,t[6],17,-1473231341),n=Qn(n,i,a,r,t[7],22,-45705983),r=Qn(r,n,i,a,t[8],7,1770035416),a=Qn(a,r,n,i,t[9],12,-1958414417),i=Qn(i,a,r,n,t[10],17,-42063),n=Qn(n,i,a,r,t[11],22,-1990404162),r=Qn(r,n,i,a,t[12],7,1804603682),a=Qn(a,r,n,i,t[13],12,-40341101),i=Qn(i,a,r,n,t[14],17,-1502002290),r=ei(r,n=Qn(n,i,a,r,t[15],22,1236535329),i,a,t[1],5,-165796510),a=ei(a,r,n,i,t[6],9,-1069501632),i=ei(i,a,r,n,t[11],14,643717713),n=ei(n,i,a,r,t[0],20,-373897302),r=ei(r,n,i,a,t[5],5,-701558691),a=ei(a,r,n,i,t[10],9,38016083),i=ei(i,a,r,n,t[15],14,-660478335),n=ei(n,i,a,r,t[4],20,-405537848),r=ei(r,n,i,a,t[9],5,568446438),a=ei(a,r,n,i,t[14],9,-1019803690),i=ei(i,a,r,n,t[3],14,-187363961),n=ei(n,i,a,r,t[8],20,1163531501),r=ei(r,n,i,a,t[13],5,-1444681467),a=ei(a,r,n,i,t[2],9,-51403784),i=ei(i,a,r,n,t[7],14,1735328473),r=ti(r,n=ei(n,i,a,r,t[12],20,-1926607734),i,a,t[5],4,-378558),a=ti(a,r,n,i,t[8],11,-2022574463),i=ti(i,a,r,n,t[11],16,1839030562),n=ti(n,i,a,r,t[14],23,-35309556),r=ti(r,n,i,a,t[1],4,-1530992060),a=ti(a,r,n,i,t[4],11,1272893353),i=ti(i,a,r,n,t[7],16,-155497632),n=ti(n,i,a,r,t[10],23,-1094730640),r=ti(r,n,i,a,t[13],4,681279174),a=ti(a,r,n,i,t[0],11,-358537222),i=ti(i,a,r,n,t[3],16,-722521979),n=ti(n,i,a,r,t[6],23,76029189),r=ti(r,n,i,a,t[9],4,-640364487),a=ti(a,r,n,i,t[12],11,-421815835),i=ti(i,a,r,n,t[15],16,530742520),r=ri(r,n=ti(n,i,a,r,t[2],23,-995338651),i,a,t[0],6,-198630844),a=ri(a,r,n,i,t[7],10,1126891415),i=ri(i,a,r,n,t[14],15,-1416354905),n=ri(n,i,a,r,t[5],21,-57434055),r=ri(r,n,i,a,t[12],6,1700485571),a=ri(a,r,n,i,t[3],10,-1894986606),i=ri(i,a,r,n,t[10],15,-1051523),n=ri(n,i,a,r,t[1],21,-2054922799),r=ri(r,n,i,a,t[8],6,1873313359),a=ri(a,r,n,i,t[15],10,-30611744),i=ri(i,a,r,n,t[6],15,-1560198380),n=ri(n,i,a,r,t[13],21,1309151649),r=ri(r,n,i,a,t[4],6,-145523070),a=ri(a,r,n,i,t[11],10,-1120210379),i=ri(i,a,r,n,t[2],15,718787259),n=ri(n,i,a,r,t[9],21,-343485551),e[0]=ml(r,e[0]),e[1]=ml(n,e[1]),e[2]=ml(i,e[2]),e[3]=ml(a,e[3])}function l0(e,t,r,n,i,a){return t=ml(ml(t,e),ml(n,a)),ml(t<<i|t>>>32-i,r)}function Qn(e,t,r,n,i,a,s){return l0(t&r|~t&n,e,t,i,a,s)}function ei(e,t,r,n,i,a,s){return l0(t&n|r&~n,e,t,i,a,s)}function ti(e,t,r,n,i,a,s){return l0(t^r^n,e,t,i,a,s)}function ri(e,t,r,n,i,a,s){return l0(r^(t|~n),e,t,i,a,s)}function YT(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Y1(n,CV(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Y1(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,Y1(n,i),n}function CV(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var VA="0123456789abcdef".split("");function OV(e){for(var t="",r=0;r<4;r++)t+=VA[e>>8*r+4&15]+VA[e>>8*r&15];return t}function TV(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function G2(e){return YT(e).map(TV).join("")}var IV=function(e){for(var t=0;t<e.length;t++)e[t]=OV(e[t]);return e.join("")}(YT("hello"))!="5d41402abc4b2a76b9719d911017c592";function ml(e,t){if(IV){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Y2(e,t){var r,n,i,a;if(e!==r){for(var s=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+s.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,p=0,h=0,y="";for(c=0;c<f;c++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],y+=String.fromCharCode(t.charCodeAt(c)^s);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var KA={print:4,modify:8,copy:16,"annot-forms":32};function Ku(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(o){if(KA.perm!==void 0)throw new Error("Invalid permission: "+o);i+=KA[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=G2(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Y2(this.encryptionKey,this.padding)}function Gu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function GA(e){if(er(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[r]){var s=t[r][a];try{s[0].apply(e,n)}catch(o){gt.console&&ar.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Dg(e){if(!(this instanceof Dg))return new Dg(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function JT(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function bc(e,t,r,n,i){if(!(this instanceof bc))return new bc(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,JT.call(this,n,i)}function cd(e,t,r,n,i){if(!(this instanceof cd))return new cd(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,JT.call(this,n,i)}function at(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,c=16,u="S",d=null;er(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,a=e.compress||e.compressPdf||a,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=GA;var y="1.3",v=h.__private__.getPdfVersion=function(){return y};h.__private__.setPdfVersion=function(k){y=k};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var g=h.__private__.getPageFormat=function(k){return x[k]};i=i||"a4";var _="compat",S="advanced",j=_;function A(){this.saveGraphicsState(),H(new ct(bt,0,0,-bt,0,Xl()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",j=S}function N(){this.restoreGraphicsState(),u="S",j=_}var D=h.__private__.combineFontStyleAndFontWeight=function(k,M){if(k=="bold"&&M=="normal"||k=="bold"&&M==400||k=="normal"&&M=="italic"||k=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(k=M==400||M==="normal"?k==="italic"?"italic":"normal":M!=700&&M!=="bold"||k!=="normal"?(M==700?"bold":M)+""+k:"bold"),k};h.advancedAPI=function(k){var M=j===_;return M&&A.call(this),typeof k!="function"||(k(this),M&&N.call(this)),this},h.compatAPI=function(k){var M=j===S;return M&&N.call(this),typeof k!="function"||(k(this),M&&A.call(this)),this},h.isAdvancedAPI=function(){return j===S};var E,C=function(k){if(j!==S)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=h.roundToPrecision=h.__private__.roundToPrecision=function(k,M){var Z=t||M;if(isNaN(k)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Z).replace(/0+$/,"")};E=h.hpf=h.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return L(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return L(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return L(k,16)};var I=h.f2=h.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return L(k,2)},O=h.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return L(k,3)},U=h.scale=h.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return j===_?k*bt:j===S?k:void 0},V=function(k){return U(function(M){return j===_?Xl()-M:j===S?M:void 0}(k))};h.__private__.setPrecision=h.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var ie,ne="00000000000000000000000000000000",ee=h.__private__.getFileId=function(){return ne},q=h.__private__.setFileId=function(k){return ne=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(dn=new Ku(d.userPermissions,d.userPassword,d.ownerPassword,ne)),ne};h.setFileId=function(k){return q(k),this},h.getFileId=function(){return ee()};var Y=h.__private__.convertDateToPDFDate=function(k){var M=k.getTimezoneOffset(),Z=M<0?"+":"-",se=Math.floor(Math.abs(M/60)),me=Math.abs(M%60),ke=[Z,G(se),"'",G(me),"'"].join("");return["D:",k.getFullYear(),G(k.getMonth()+1),G(k.getDate()),G(k.getHours()),G(k.getMinutes()),G(k.getSeconds()),ke].join("")},fe=h.__private__.convertPDFDateToDate=function(k){var M=parseInt(k.substr(2,4),10),Z=parseInt(k.substr(6,2),10)-1,se=parseInt(k.substr(8,2),10),me=parseInt(k.substr(10,2),10),ke=parseInt(k.substr(12,2),10),Oe=parseInt(k.substr(14,2),10);return new Date(M,Z,se,me,ke,Oe,0)},te=h.__private__.setCreationDate=function(k){var M;if(k===void 0&&(k=new Date),k instanceof Date)M=Y(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=k}return ie=M},R=h.__private__.getCreationDate=function(k){var M=ie;return k==="jsDate"&&(M=fe(ie)),M};h.setCreationDate=function(k){return te(k),this},h.getCreationDate=function(k){return R(k)};var z,G=h.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},re=h.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ae=0,ce=[],pe=[],Q=0,he=[],oe=[],ue=!1,Ce=pe;h.__private__.setCustomOutputDestination=function(k){ue=!0,Ce=k};var Ee=function(k){ue||(Ce=k)};h.__private__.resetCustomOutputDestination=function(){ue=!1,Ce=pe};var H=h.__private__.out=function(k){return k=k.toString(),Q+=k.length+1,Ce.push(k),Ce},je=h.__private__.write=function(k){return H(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Je=h.__private__.getArrayBuffer=function(k){for(var M=k.length,Z=new ArrayBuffer(M),se=new Uint8Array(Z);M--;)se[M]=k.charCodeAt(M);return Z},De=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return De};var Se=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(k){return Se=j===S?k/bt:k,this};var et,Fe=h.__private__.getFontSize=h.getFontSize=function(){return j===_?Se:Se*bt},Ke=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(k){return Ke=k,this},h.__private__.getR2L=h.getR2L=function(){return Ke};var tt,mt=h.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))et=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');et=k}else et=parseInt(k,10)};h.__private__.getZoomMode=function(){return et};var vt,Xe=h.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');tt=k};h.__private__.getPageMode=function(){return tt};var ot=h.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');vt=k};h.__private__.getLayoutMode=function(){return vt},h.__private__.setDisplayMode=h.setDisplayMode=function(k,M,Z){return mt(k),ot(M),Xe(Z),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(k){if(Object.keys(yt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[k]},h.__private__.getDocumentProperties=function(){return yt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(k){for(var M in yt)yt.hasOwnProperty(M)&&k[M]&&(yt[M]=k[M]);return this},h.__private__.setDocumentProperty=function(k,M){if(Object.keys(yt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[k]=M};var Ge,bt,qe,zt,Pt,Nt={},Ct={},wr=[],st={},lr={},dt={},jt={},_r=null,Ot=0,lt=[],Kt=new GA(h),ql=e.hotfixes||[],Yn={},Ds={},es=[],ct=function k(M,Z,se,me,ke,Oe){if(!(this instanceof k))return new k(M,Z,se,me,ke,Oe);isNaN(M)&&(M=1),isNaN(Z)&&(Z=0),isNaN(se)&&(se=0),isNaN(me)&&(me=1),isNaN(ke)&&(ke=0),isNaN(Oe)&&(Oe=0),this._matrix=[M,Z,se,me,ke,Oe]};Object.defineProperty(ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ct.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(k)},ct.prototype.multiply=function(k){var M=k.sx*this.sx+k.shy*this.shx,Z=k.sx*this.shy+k.shy*this.sy,se=k.shx*this.sx+k.sy*this.shx,me=k.shx*this.shy+k.sy*this.sy,ke=k.tx*this.sx+k.ty*this.shx+this.tx,Oe=k.tx*this.shy+k.ty*this.sy+this.ty;return new ct(M,Z,se,me,ke,Oe)},ct.prototype.decompose=function(){var k=this.sx,M=this.shy,Z=this.shx,se=this.sy,me=this.tx,ke=this.ty,Oe=Math.sqrt(k*k+M*M),Ye=(k/=Oe)*Z+(M/=Oe)*se;Z-=k*Ye,se-=M*Ye;var rt=Math.sqrt(Z*Z+se*se);return Ye/=rt,k*(se/=rt)<M*(Z/=rt)&&(k=-k,M=-M,Ye=-Ye,Oe=-Oe),{scale:new ct(Oe,0,0,rt,0,0),translate:new ct(1,0,0,1,me,ke),rotate:new ct(k,M,-M,k,0,0),skew:new ct(1,0,Ye,1,0,0)}},ct.prototype.toString=function(k){return this.join(" ")},ct.prototype.inversed=function(){var k=this.sx,M=this.shy,Z=this.shx,se=this.sy,me=this.tx,ke=this.ty,Oe=1/(k*se-M*Z),Ye=se*Oe,rt=-M*Oe,xt=-Z*Oe,kt=k*Oe;return new ct(Ye,rt,xt,kt,-Ye*me-xt*ke,-rt*me-kt*ke)},ct.prototype.applyToPoint=function(k){var M=k.x*this.sx+k.y*this.shx+this.tx,Z=k.x*this.shy+k.y*this.sy+this.ty;return new zs(M,Z)},ct.prototype.applyToRectangle=function(k){var M=this.applyToPoint(k),Z=this.applyToPoint(new zs(k.x+k.w,k.y+k.h));return new xf(M.x,M.y,Z.x-M.x,Z.y-M.y)},ct.prototype.clone=function(){var k=this.sx,M=this.shy,Z=this.shx,se=this.sy,me=this.tx,ke=this.ty;return new ct(k,M,Z,se,me,ke)},h.Matrix=ct;var Rs=h.matrixMult=function(k,M){return M.multiply(k)},Ms=new ct(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ms;var ra=function(k,M){if(!lr[k]){var Z=(M instanceof bc?"Sh":"P")+(Object.keys(st).length+1).toString(10);M.id=Z,lr[k]=Z,st[Z]=M,Kt.publish("addPattern",M)}};h.ShadingPattern=bc,h.TilingPattern=cd,h.addShadingPattern=function(k,M){return C("addShadingPattern()"),ra(k,M),this},h.beginTilingPattern=function(k){C("beginTilingPattern()"),bf(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},h.endTilingPattern=function(k,M){C("endTilingPattern()"),M.stream=oe[z].join(`
`),ra(k,M),Kt.publish("endTilingPattern",M),es.pop().restore()};var na,Dr=h.__private__.newObject=function(){var k=Sn();return Dn(k,!0),k},Sn=h.__private__.newObjectDeferred=function(){return ae++,ce[ae]=function(){return Q},ae},Dn=function(k,M){return M=typeof M=="boolean"&&M,ce[k]=Q,M&&H(k+" 0 obj"),k},Wl=h.__private__.newAdditionalObject=function(){var k={objId:Sn(),content:""};return he.push(k),k},Fo=Sn(),Aa=Sn(),ts=h.__private__.decodeColorString=function(k){var M=k.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var Z=parseFloat(M[0]);M=[Z,Z,Z,"r"]}for(var se="#",me=0;me<3;me++)se+=("0"+Math.floor(255*parseFloat(M[me])).toString(16)).slice(-2);return se},Ea=h.__private__.encodeColorString=function(k){var M;typeof k=="string"&&(k={ch1:k});var Z=k.ch1,se=k.ch2,me=k.ch3,ke=k.ch4,Oe=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var Ye=new GT(Z);if(Ye.ok)Z=Ye.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var rt=parseInt(Z.substr(1),16);Z=rt>>16&255,se=rt>>8&255,me=255&rt}if(se===void 0||ke===void 0&&Z===se&&se===me)M=typeof Z=="string"?Z+" "+Oe[0]:k.precision===2?I(Z/255)+" "+Oe[0]:O(Z/255)+" "+Oe[0];else if(ke===void 0||er(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",Oe[1]].join(" ");M=typeof Z=="string"?[Z,se,me,Oe[1]].join(" "):k.precision===2?[I(Z/255),I(se/255),I(me/255),Oe[1]].join(" "):[O(Z/255),O(se/255),O(me/255),Oe[1]].join(" ")}else M=typeof Z=="string"?[Z,se,me,ke,Oe[2]].join(" "):k.precision===2?[I(Z),I(se),I(me),I(ke),Oe[2]].join(" "):[O(Z),O(se),O(me),O(ke),Oe[2]].join(" ");return M},Pa=h.__private__.getFilters=function(){return s},ia=h.__private__.putStream=function(k){var M=(k=k||{}).data||"",Z=k.filters||Pa(),se=k.alreadyAppliedFilters||[],me=k.addLength1||!1,ke=M.length,Oe=k.objectId,Ye=function(fn){return fn};if(d!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ye=dn.encryptor(Oe,0));var rt={};Z===!0&&(Z=["FlateEncode"]);var xt=k.additionalKeyValues||[],kt=(rt=at.API.processDataByFilters!==void 0?at.API.processDataByFilters(M,Z):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(rt.data.length!==0&&(xt.push({key:"Length",value:rt.data.length}),me===!0&&xt.push({key:"Length1",value:ke})),kt.length!=0)if(kt.split("/").length-1==1)xt.push({key:"Filter",value:kt});else{xt.push({key:"Filter",value:"["+kt+"]"});for(var Ft=0;Ft<xt.length;Ft+=1)if(xt[Ft].key==="DecodeParms"){for(var Pr=[],rn=0;rn<rt.reverseChain.split("/").length-1;rn+=1)Pr.push("null");Pr.push(xt[Ft].value),xt[Ft].value="["+Pr.join(" ")+"]"}}H("<<");for(var cr=0;cr<xt.length;cr++)H("/"+xt[cr].key+" "+xt[cr].value);H(">>"),rt.data.length!==0&&(H("stream"),H(Ye(rt.data)),H("endstream"))},Hl=h.__private__.putPage=function(k){var M=k.number,Z=k.data,se=k.objId,me=k.contentsObjId;Dn(se,!0),H("<</Type /Page"),H("/Parent "+k.rootDictionaryObjId+" 0 R"),H("/Resources "+k.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(E(k.mediaBox.bottomLeftX))+" "+parseFloat(E(k.mediaBox.bottomLeftY))+" "+E(k.mediaBox.topRightX)+" "+E(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&H("/CropBox ["+E(k.cropBox.bottomLeftX)+" "+E(k.cropBox.bottomLeftY)+" "+E(k.cropBox.topRightX)+" "+E(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&H("/BleedBox ["+E(k.bleedBox.bottomLeftX)+" "+E(k.bleedBox.bottomLeftY)+" "+E(k.bleedBox.topRightX)+" "+E(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&H("/TrimBox ["+E(k.trimBox.bottomLeftX)+" "+E(k.trimBox.bottomLeftY)+" "+E(k.trimBox.topRightX)+" "+E(k.trimBox.topRightY)+"]"),k.artBox!==null&&H("/ArtBox ["+E(k.artBox.bottomLeftX)+" "+E(k.artBox.bottomLeftY)+" "+E(k.artBox.topRightX)+" "+E(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&H("/UserUnit "+k.userUnit),Kt.publish("putPage",{objId:se,pageContext:lt[M],pageNumber:M,page:Z}),H("/Contents "+me+" 0 R"),H(">>"),H("endobj");var ke=Z.join(`
`);return j===S&&(ke+=`
Q`),Dn(me,!0),ia({data:ke,filters:Pa(),objectId:me}),H("endobj"),se},rs=h.__private__.putPages=function(){var k,M,Z=[];for(k=1;k<=Ot;k++)lt[k].objId=Sn(),lt[k].contentsObjId=Sn();for(k=1;k<=Ot;k++)Z.push(Hl({number:k,data:oe[k],objId:lt[k].objId,contentsObjId:lt[k].contentsObjId,mediaBox:lt[k].mediaBox,cropBox:lt[k].cropBox,bleedBox:lt[k].bleedBox,trimBox:lt[k].trimBox,artBox:lt[k].artBox,userUnit:lt[k].userUnit,rootDictionaryObjId:Fo,resourceDictionaryObjId:Aa}));Dn(Fo,!0),H("<</Type /Pages");var se="/Kids [";for(M=0;M<Ot;M++)se+=Z[M]+" 0 R ";H(se+"]"),H("/Count "+Ot),H(">>"),H("endobj"),Kt.publish("postPutPages")},Vl=function(k){Kt.publish("putFont",{font:k,out:H,newObject:Dr,putStream:ia}),k.isAlreadyPutted!==!0&&(k.objectNumber=Dr(),H("<<"),H("/Type /Font"),H("/BaseFont /"+Gu(k.postScriptName)),H("/Subtype /Type1"),typeof k.encoding=="string"&&H("/Encoding /"+k.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},gu=function(k){k.objectNumber=Dr();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[E(k.x),E(k.y),E(k.x+k.width),E(k.y+k.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Z=k.pages[1].join(`
`);ia({data:Z,additionalKeyValues:M,objectId:k.objectNumber}),H("endobj")},yu=function(k,M){M||(M=21);var Z=Dr(),se=function(Oe,Ye){var rt,xt=[],kt=1/(Ye-1);for(rt=0;rt<1;rt+=kt)xt.push(rt);if(xt.push(1),Oe[0].offset!=0){var Ft={offset:0,color:Oe[0].color};Oe.unshift(Ft)}if(Oe[Oe.length-1].offset!=1){var Pr={offset:1,color:Oe[Oe.length-1].color};Oe.push(Pr)}for(var rn="",cr=0,fn=0;fn<xt.length;fn++){for(rt=xt[fn];rt>Oe[cr+1].offset;)cr++;var nn=Oe[cr].offset,Rn=(rt-nn)/(Oe[cr+1].offset-nn),Hs=Oe[cr].color,Oa=Oe[cr+1].color;rn+=re(Math.round((1-Rn)*Hs[0]+Rn*Oa[0]).toString(16))+re(Math.round((1-Rn)*Hs[1]+Rn*Oa[1]).toString(16))+re(Math.round((1-Rn)*Hs[2]+Rn*Oa[2]).toString(16))}return rn.trim()}(k.colors,M),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+M+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ia({data:se,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),H("endobj"),k.objectNumber=Dr(),H("<< /ShadingType "+k.type),H("/ColorSpace /DeviceRGB");var ke="/Coords ["+E(parseFloat(k.coords[0]))+" "+E(parseFloat(k.coords[1]))+" ";k.type===2?ke+=E(parseFloat(k.coords[2]))+" "+E(parseFloat(k.coords[3])):ke+=E(parseFloat(k.coords[2]))+" "+E(parseFloat(k.coords[3]))+" "+E(parseFloat(k.coords[4]))+" "+E(parseFloat(k.coords[5])),H(ke+="]"),k.matrix&&H("/Matrix ["+k.matrix.toString()+"]"),H("/Function "+Z+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},xu=function(k,M){var Z=Sn(),se=Dr();M.push({resourcesOid:Z,objectOid:se}),k.objectNumber=se;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+k.boundingBox.map(E).join(" ")+"]"}),me.push({key:"XStep",value:E(k.xStep)}),me.push({key:"YStep",value:E(k.yStep)}),me.push({key:"Resources",value:Z+" 0 R"}),k.matrix&&me.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),ia({data:k.stream,additionalKeyValues:me,objectId:k.objectNumber}),H("endobj")},bx=function(k){for(var M in k.objectNumber=Dr(),H("<<"),k)switch(M){case"opacity":H("/ca "+I(k[M]));break;case"stroke-opacity":H("/CA "+I(k[M]))}H(">>"),H("endobj")},df=function(k){Dn(k.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var M in H("/Font <<"),Nt)Nt.hasOwnProperty(M)&&(f===!1||f===!0&&p.hasOwnProperty(M))&&H("/"+M+" "+Nt[M].objectNumber+" 0 R");H(">>")}(),function(){if(Object.keys(st).length>0){for(var M in H("/Shading <<"),st)st.hasOwnProperty(M)&&st[M]instanceof bc&&st[M].objectNumber>=0&&H("/"+M+" "+st[M].objectNumber+" 0 R");Kt.publish("putShadingPatternDict"),H(">>")}}(),function(M){if(Object.keys(st).length>0){for(var Z in H("/Pattern <<"),st)st.hasOwnProperty(Z)&&st[Z]instanceof h.TilingPattern&&st[Z].objectNumber>=0&&st[Z].objectNumber<M&&H("/"+Z+" "+st[Z].objectNumber+" 0 R");Kt.publish("putTilingPatternDict"),H(">>")}}(k.objectOid),function(){if(Object.keys(dt).length>0){var M;for(M in H("/ExtGState <<"),dt)dt.hasOwnProperty(M)&&dt[M].objectNumber>=0&&H("/"+M+" "+dt[M].objectNumber+" 0 R");Kt.publish("putGStateDict"),H(">>")}}(),function(){for(var M in H("/XObject <<"),Yn)Yn.hasOwnProperty(M)&&Yn[M].objectNumber>=0&&H("/"+M+" "+Yn[M].objectNumber+" 0 R");Kt.publish("putXobjectDict"),H(">>")}(),H(">>"),H("endobj")},tm=function(k){Ct[k.fontName]=Ct[k.fontName]||{},Ct[k.fontName][k.fontStyle]=k.id},rm=function(k,M,Z,se,me){var ke={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:k,fontName:M,fontStyle:Z,encoding:se,isStandardFont:me||!1,metadata:{}};return Kt.publish("addFont",{font:ke,instance:this}),Nt[ke.id]=ke,tm(ke),ke.id},aa=h.__private__.pdfEscape=h.pdfEscape=function(k,M){return function(Z,se){var me,ke,Oe,Ye,rt,xt,kt,Ft,Pr;if(Oe=(se=se||{}).sourceEncoding||"Unicode",rt=se.outputEncoding,(se.autoencode||rt)&&Nt[Ge].metadata&&Nt[Ge].metadata[Oe]&&Nt[Ge].metadata[Oe].encoding&&(Ye=Nt[Ge].metadata[Oe].encoding,!rt&&Nt[Ge].encoding&&(rt=Nt[Ge].encoding),!rt&&Ye.codePages&&(rt=Ye.codePages[0]),typeof rt=="string"&&(rt=Ye[rt]),rt)){for(kt=!1,xt=[],me=0,ke=Z.length;me<ke;me++)(Ft=rt[Z.charCodeAt(me)])?xt.push(String.fromCharCode(Ft)):xt.push(Z[me]),xt[me].charCodeAt(0)>>8&&(kt=!0);Z=xt.join("")}for(me=Z.length;kt===void 0&&me!==0;)Z.charCodeAt(me-1)>>8&&(kt=!0),me--;if(!kt)return Z;for(xt=se.noBOM?[]:[254,255],me=0,ke=Z.length;me<ke;me++){if((Pr=(Ft=Z.charCodeAt(me))>>8)>>8)throw new Error("Character at position "+me+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xt.push(Pr),xt.push(Ft-(Pr<<8))}return String.fromCharCode.apply(void 0,xt)}(k,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ff=h.__private__.beginPage=function(k){oe[++Ot]=[],lt[Ot]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},im(Ot),Ee(oe[z])},nm=function(k,M){var Z,se,me;switch(r=M||r,typeof k=="string"&&(Z=g(k.toLowerCase()),Array.isArray(Z)&&(se=Z[0],me=Z[1])),Array.isArray(k)&&(se=k[0]*bt,me=k[1]*bt),isNaN(se)&&(se=i[0],me=i[1]),(se>14400||me>14400)&&(ar.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),me=Math.min(14400,me)),i=[se,me],r.substr(0,1)){case"l":me>se&&(i=[me,se]);break;case"p":se>me&&(i=[me,se])}ff(i),wt(mf),H(ju),gf!==0&&H(gf+" J"),yf!==0&&H(yf+" j"),Kt.publish("addPage",{pageNumber:Ot})},hf=function(k){k>0&&k<=Ot&&(oe.splice(k,1),lt.splice(k,1),Ot--,z>Ot&&(z=Ot),this.setPage(z))},im=function(k){k>0&&k<=Ot&&(z=k)},am=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return oe.length-1},sm=function(k,M,Z){var se,me=void 0;return Z=Z||{},k=k!==void 0?k:Nt[Ge].fontName,M=M!==void 0?M:Nt[Ge].fontStyle,se=k.toLowerCase(),Ct[se]!==void 0&&Ct[se][M]!==void 0?me=Ct[se][M]:Ct[k]!==void 0&&Ct[k][M]!==void 0?me=Ct[k][M]:Z.disableWarning===!1&&ar.warn("Unable to look up font label for font '"+k+"', '"+M+"'. Refer to getFontList() for available fonts."),me||Z.noFallback||(me=Ct.times[M])==null&&(me=Ct.times.normal),me},ns=h.__private__.putInfo=function(){var k=Dr(),M=function(se){return se};for(var Z in d!==null&&(M=dn.encryptor(k,0)),H("<<"),H("/Producer ("+aa(M("jsPDF "+at.version))+")"),yt)yt.hasOwnProperty(Z)&&yt[Z]&&H("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+aa(M(yt[Z]))+")");H("/CreationDate ("+aa(M(ie))+")"),H(">>"),H("endobj")},bu=h.__private__.putCatalog=function(k){var M=(k=k||{}).rootDictionaryObjId||Fo;switch(Dr(),H("<<"),H("/Type /Catalog"),H("/Pages "+M+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+et;Z.substr(Z.length-1)==="%"&&(et=parseInt(et)/100),typeof et=="number"&&H("/OpenAction [3 0 R /XYZ null null "+I(et)+"]")}switch(vt||(vt="continuous"),vt){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}tt&&H("/PageMode /"+tt),Kt.publish("putCatalog"),H(">>"),H("endobj")},wx=h.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(ae+1)),H("/Root "+ae+" 0 R"),H("/Info "+(ae-1)+" 0 R"),d!==null&&H("/Encrypt "+dn.oid+" 0 R"),H("/ID [ <"+ne+"> <"+ne+"> ]"),H(">>")},tn=h.__private__.putHeader=function(){H("%PDF-"+y),H("%")},om=h.__private__.putXRef=function(){var k="0000000000";H("xref"),H("0 "+(ae+1)),H("0000000000 65535 f ");for(var M=1;M<=ae;M++)typeof ce[M]=="function"?H((k+ce[M]()).slice(-10)+" 00000 n "):ce[M]!==void 0?H((k+ce[M]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},is=h.__private__.buildDocument=function(){var k;ae=0,Q=0,pe=[],ce=[],he=[],Fo=Sn(),Aa=Sn(),Ee(pe),Kt.publish("buildDocument"),tn(),rs(),function(){Kt.publish("putAdditionalObjects");for(var Z=0;Z<he.length;Z++){var se=he[Z];Dn(se.objId,!0),H(se.content),H("endobj")}Kt.publish("postPutAdditionalObjects")}(),k=[],function(){for(var Z in Nt)Nt.hasOwnProperty(Z)&&(f===!1||f===!0&&p.hasOwnProperty(Z))&&Vl(Nt[Z])}(),function(){var Z;for(Z in dt)dt.hasOwnProperty(Z)&&bx(dt[Z])}(),function(){for(var Z in Yn)Yn.hasOwnProperty(Z)&&gu(Yn[Z])}(),function(Z){var se;for(se in st)st.hasOwnProperty(se)&&(st[se]instanceof bc?yu(st[se]):st[se]instanceof cd&&xu(st[se],Z))}(k),Kt.publish("putResources"),k.forEach(df),df({resourcesOid:Aa,objectOid:Number.MAX_SAFE_INTEGER}),Kt.publish("postPutResources"),d!==null&&(dn.oid=Dr(),H("<<"),H("/Filter /Standard"),H("/V "+dn.v),H("/R "+dn.r),H("/U <"+dn.toHexString(dn.U)+">"),H("/O <"+dn.toHexString(dn.O)+">"),H("/P "+dn.P),H(">>"),H("endobj")),ns(),bu();var M=Q;return om(),wx(),H("startxref"),H(""+M),H("%%EOF"),Ee(oe[z]),pe.join(`
`)},wu=h.__private__.getBlob=function(k){return new Blob([Je(k)],{type:"application/pdf"})},lm=h.output=h.__private__.output=(na=function(k,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",k){case void 0:return is();case"save":h.save(M.filename);break;case"arraybuffer":return Je(is());case"blob":return wu(is());case"bloburi":case"bloburl":if(gt.URL!==void 0&&typeof gt.URL.createObjectURL=="function")return gt.URL&&gt.URL.createObjectURL(wu(is()))||void 0;ar.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",se=is();try{Z=HA(se)}catch{Z=HA(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+M.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(gt)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(me=M.pdfObjectUrl,ke="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",Ye=gt.open();return Ye!==null&&Ye.document.write(Oe),Ye}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(gt)==="[object Window]"){var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',xt=gt.open();if(xt!==null){xt.document.write(rt);var kt=this;xt.document.documentElement.querySelector("#pdfViewer").onload=function(){xt.document.title=M.filename,xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(kt.output("bloburl"))}}return xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',Pr=gt.open();if(Pr!==null&&(Pr.document.write(Ft),Pr.document.title=M.filename),Pr||typeof safari>"u")return Pr;break;case"datauri":case"dataurl":return gt.document.location.href=this.output("datauristring",M);default:return null}},na.foo=function(){try{return na.apply(this,arguments)}catch(Z){var k=Z.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var M="Error in function "+k.split(`
`)[0].split("<")[0]+": "+Z.message;if(!gt.console)throw new Error(M);gt.console.error(M,Z),gt.alert&&alert(M)}},na.foo.bar=na,na.foo),sa=function(k){return Array.isArray(ql)===!0&&ql.indexOf(k)>-1};switch(n){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=sa("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);bt=n}var dn=null;te(),q();var Fs=h.__private__.getPageInfo=h.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:lt[k].objId,pageNumber:k,pageContext:lt[k]}},cm=h.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in lt)if(lt[M].objId===k)break;return Fs(M)},_x=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:lt[z].objId,pageNumber:z,pageContext:lt[z]}};h.addPage=function(){return nm.apply(this,arguments),this},h.setPage=function(){return im.apply(this,arguments),Ee.call(this,oe[z]),this},h.insertPage=function(k){return this.addPage(),this.movePage(z,k),this},h.movePage=function(k,M){var Z,se;if(k>M){Z=oe[k],se=lt[k];for(var me=k;me>M;me--)oe[me]=oe[me-1],lt[me]=lt[me-1];oe[M]=Z,lt[M]=se,this.setPage(M)}else if(k<M){Z=oe[k],se=lt[k];for(var ke=k;ke<M;ke++)oe[ke]=oe[ke+1],lt[ke]=lt[ke+1];oe[M]=Z,lt[M]=se,this.setPage(M)}return this},h.deletePage=function(){return hf.apply(this,arguments),this},h.__private__.text=h.text=function(k,M,Z,se,me){var ke,Oe,Ye,rt,xt,kt,Ft,Pr,rn,cr=(se=se||{}).scope||this;if(typeof k=="number"&&typeof M=="number"&&(typeof Z=="string"||Array.isArray(Z))){var fn=Z;Z=M,M=k,k=fn}if(arguments[3]instanceof ct==0?(Ye=arguments[4],rt=arguments[5],er(Ft=arguments[3])==="object"&&Ft!==null||(typeof Ye=="string"&&(rt=Ye,Ye=null),typeof Ft=="string"&&(rt=Ft,Ft=null),typeof Ft=="number"&&(Ye=Ft,Ft=null),se={flags:Ft,angle:Ye,align:rt})):(C("The transform parameter of text() with a Matrix value"),rn=me),isNaN(M)||isNaN(Z)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return cr;var nn,Rn="",Hs=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:Gl,Oa=cr.internal.scaleFactor;function Vs(Gt){return Gt=Gt.split("	").join(Array(se.TabLen||9).join(" ")),aa(Gt,Ft)}function _f(Gt){for(var nr,Kr=Gt.concat(),hn=[],Ys=Kr.length;Ys--;)typeof(nr=Kr.shift())=="string"?hn.push(nr):Array.isArray(Gt)&&(nr.length===1||nr[1]===void 0&&nr[2]===void 0)?hn.push(nr[0]):hn.push([nr[0],nr[1],nr[2]]);return hn}function Nu(Gt,nr){var Kr;if(typeof Gt=="string")Kr=nr(Gt)[0];else if(Array.isArray(Gt)){for(var hn,Ys,Tf=Gt.concat(),Eu=[],bm=Tf.length;bm--;)typeof(hn=Tf.shift())=="string"?Eu.push(nr(hn)[0]):Array.isArray(hn)&&typeof hn[0]=="string"&&(Ys=nr(hn[0],hn[1],hn[2]),Eu.push([Ys[0],Ys[1],Ys[2]]));Kr=Eu}return Kr}var Bo=!1,Zl=!0;if(typeof k=="string")Bo=!0;else if(Array.isArray(k)){var Ql=k.concat();Oe=[];for(var $o,Mn=Ql.length;Mn--;)(typeof($o=Ql.shift())!="string"||Array.isArray($o)&&typeof $o[0]!="string")&&(Zl=!1);Bo=Zl}if(Bo===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var ec=Se/cr.internal.scaleFactor,tc=ec*(Hs-1);switch(se.baseline){case"bottom":Z-=tc;break;case"top":Z+=ec-tc;break;case"hanging":Z+=ec-2*tc;break;case"middle":Z+=ec/2-tc}if((kt=se.maxWidth||0)>0&&(typeof k=="string"?k=cr.splitTextToSize(k,kt):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Gt,nr){return Gt.concat(cr.splitTextToSize(nr,kt))},[]))),ke={text:k,x:M,y:Z,options:se,mutex:{pdfEscape:aa,activeFontKey:Ge,fonts:Nt,activeFontSize:Se}},Kt.publish("preProcessText",ke),k=ke.text,Ye=(se=ke.options).angle,rn instanceof ct==0&&Ye&&typeof Ye=="number"){Ye*=Math.PI/180,se.rotationDirection===0&&(Ye=-Ye),j===S&&(Ye=-Ye);var jf=Math.cos(Ye),Sf=Math.sin(Ye);rn=new ct(jf,Sf,-Sf,jf,0,0)}else Ye&&Ye instanceof ct&&(rn=Ye);j!==S||rn||(rn=Ms),(xt=se.charSpace||Us)!==void 0&&(Rn+=E(U(xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pr=se.horizontalScale)!==void 0&&(Rn+=E(100*Pr)+` Tz
`),se.lang;var ci=-1,Ks=se.renderingMode!==void 0?se.renderingMode:se.stroke,ku=cr.internal.getCurrentPageInfo().pageContext;switch(Ks){case 0:case!1:case"fill":ci=0;break;case 1:case!0:case"stroke":ci=1;break;case 2:case"fillThenStroke":ci=2;break;case 3:case"invisible":ci=3;break;case 4:case"fillAndAddForClipping":ci=4;break;case 5:case"strokeAndAddPathForClipping":ci=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ci=6;break;case 7:case"addToPathForClipping":ci=7}var ym=ku.usedRenderingMode!==void 0?ku.usedRenderingMode:-1;ci!==-1?Rn+=ci+` Tr
`:ym!==-1&&(Rn+=`0 Tr
`),ci!==-1&&(ku.usedRenderingMode=ci),rt=se.align||"left";var oa,rc=Se*Hs,Nf=cr.internal.pageSize.getWidth(),kf=Nt[Ge];xt=se.charSpace||Us,kt=se.maxWidth||0,Ft=Object.assign({autoencode:!0,noBOM:!0},se.flags);var Uo=[],nc=function(Gt){return cr.getStringUnitWidth(Gt,{font:kf,charSpace:xt,fontSize:Se,doKerning:!1})*Se/Oa};if(Object.prototype.toString.call(k)==="[object Array]"){var Li;Oe=_f(k),rt!=="left"&&(oa=Oe.map(nc));var Di,zo=0;if(rt==="right"){M-=oa[0],k=[],Mn=Oe.length;for(var Gs=0;Gs<Mn;Gs++)Gs===0?(Di=Bs(M),Li=$s(Z)):(Di=U(zo-oa[Gs]),Li=-rc),k.push([Oe[Gs],Di,Li]),zo=oa[Gs]}else if(rt==="center"){M-=oa[0]/2,k=[],Mn=Oe.length;for(var qo=0;qo<Mn;qo++)qo===0?(Di=Bs(M),Li=$s(Z)):(Di=U((zo-oa[qo])/2),Li=-rc),k.push([Oe[qo],Di,Li]),zo=oa[qo]}else if(rt==="left"){k=[],Mn=Oe.length;for(var Af=0;Af<Mn;Af++)k.push(Oe[Af])}else if(rt==="justify"&&kf.encoding==="Identity-H"){k=[],Mn=Oe.length,kt=kt!==0?kt:Nf;for(var Au=0,Vr=0;Vr<Mn;Vr++)if(Li=Vr===0?$s(Z):-rc,Di=Vr===0?Bs(M):Au,Vr<Mn-1){var xm=U((kt-oa[Vr])/(Oe[Vr].split(" ").length-1)),ss=Oe[Vr].split(" ");k.push([ss[0]+" ",Di,Li]),Au=0;for(var os=1;os<ss.length;os++){var Ef=(nc(ss[os-1]+" "+ss[os])-nc(ss[os]))*Oa+xm;os==ss.length-1?k.push([ss[os],Ef,0]):k.push([ss[os]+" ",Ef,0]),Au-=Ef}}else k.push([Oe[Vr],Di,Li]);k.push(["",Au,0])}else{if(rt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Mn=Oe.length,kt=kt!==0?kt:Nf,Vr=0;Vr<Mn;Vr++){Li=Vr===0?$s(Z):-rc,Di=Vr===0?Bs(M):0;var Pf=Oe[Vr].split(" ").length-1,Cf=Pf>0?(kt-oa[Vr])/Pf:0;Vr<Mn-1?Uo.push(E(U(Cf))):Uo.push(0),k.push([Oe[Vr],Di,Li])}}}(typeof se.R2L=="boolean"?se.R2L:Ke)===!0&&(k=Nu(k,function(Gt,nr,Kr){return[Gt.split("").reverse().join(""),nr,Kr]})),ke={text:k,x:M,y:Z,options:se,mutex:{pdfEscape:aa,activeFontKey:Ge,fonts:Nt,activeFontSize:Se}},Kt.publish("postProcessText",ke),k=ke.text,nn=ke.mutex.isHex||!1;var Of=Nt[Ge].encoding;Of!=="WinAnsiEncoding"&&Of!=="StandardEncoding"||(k=Nu(k,function(Gt,nr,Kr){return[Vs(Gt),nr,Kr]})),Oe=_f(k),k=[];for(var Wo,Ho,Vo,ic=Array.isArray(Oe[0])?1:0,Ko="",ac=function(Gt,nr,Kr){var hn="";return Kr instanceof ct?(Kr=typeof se.angle=="number"?Rs(Kr,new ct(1,0,0,1,Gt,nr)):Rs(new ct(1,0,0,1,Gt,nr),Kr),j===S&&(Kr=Rs(new ct(1,0,0,-1,0,0),Kr)),hn=Kr.join(" ")+` Tm
`):hn=E(Gt)+" "+E(nr)+` Td
`,hn},la=0;la<Oe.length;la++){switch(Ko="",ic){case 1:Vo=(nn?"<":"(")+Oe[la][0]+(nn?">":")"),Wo=parseFloat(Oe[la][1]),Ho=parseFloat(Oe[la][2]);break;case 0:Vo=(nn?"<":"(")+Oe[la]+(nn?">":")"),Wo=Bs(M),Ho=$s(Z)}Uo!==void 0&&Uo[la]!==void 0&&(Ko=Uo[la]+` Tw
`),la===0?k.push(Ko+ac(Wo,Ho,rn)+Vo):ic===0?k.push(Ko+Vo):ic===1&&k.push(Ko+ac(Wo,Ho,rn)+Vo)}k=ic===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var ls=`BT
/`;return ls+=Ge+" "+Se+` Tf
`,ls+=E(Se*Hs)+` TL
`,ls+=Yl+`
`,ls+=Rn,ls+=k,H(ls+="ET"),p[Ge]=!0,cr};var jx=h.__private__.clip=h.clip=function(k){return H(k==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return jx("evenodd")},h.__private__.discardPath=h.discardPath=function(){return H("n"),this};var as=h.__private__.isValidStyle=function(k){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(M=!0),M};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(k){return as(k)&&(u=k),this};var um=h.__private__.getStyle=h.getStyle=function(k){var M=u;switch(k){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=k}return M},dm=h.close=function(){return H("h"),this};h.stroke=function(){return H("S"),this},h.fill=function(k){return _u("f",k),this},h.fillEvenOdd=function(k){return _u("f*",k),this},h.fillStroke=function(k){return _u("B",k),this},h.fillStrokeEvenOdd=function(k){return _u("B*",k),this};var _u=function(k,M){er(M)==="object"?Nx(M,k):H(k)},Kl=function(k){k===null||j===S&&k===void 0||(k=um(k),H(k))};function Sx(k,M,Z,se,me){var ke=new cd(M||this.boundingBox,Z||this.xStep,se||this.yStep,this.gState,me||this.matrix);ke.stream=this.stream;var Oe=k+"$$"+this.cloneIndex+++"$$";return ra(Oe,ke),ke}var Nx=function(k,M){var Z=lr[k.key],se=st[Z];if(se instanceof bc)H("q"),H(kx(M)),se.gState&&h.setGState(se.gState),H(k.matrix.toString()+" cm"),H("/"+Z+" sh"),H("Q");else if(se instanceof cd){var me=new ct(1,0,0,-1,0,Xl());k.matrix&&(me=me.multiply(k.matrix||Ms),Z=Sx.call(se,k.key,k.boundingBox,k.xStep,k.yStep,me).id),H("q"),H("/Pattern cs"),H("/"+Z+" scn"),se.gState&&h.setGState(se.gState),H(M),H("Q")}},kx=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},pf=h.moveTo=function(k,M){return H(E(U(k))+" "+E(V(M))+" m"),this},fm=h.lineTo=function(k,M){return H(E(U(k))+" "+E(V(M))+" l"),this},Ca=h.curveTo=function(k,M,Z,se,me,ke){return H([E(U(k)),E(V(M)),E(U(Z)),E(V(se)),E(U(me)),E(V(ke)),"c"].join(" ")),this};h.__private__.line=h.line=function(k,M,Z,se,me){if(isNaN(k)||isNaN(M)||isNaN(Z)||isNaN(se)||!as(me))throw new Error("Invalid arguments passed to jsPDF.line");return j===_?this.lines([[Z-k,se-M]],k,M,[1,1],me||"S"):this.lines([[Z-k,se-M]],k,M,[1,1]).stroke()},h.__private__.lines=h.lines=function(k,M,Z,se,me,ke){var Oe,Ye,rt,xt,kt,Ft,Pr,rn,cr,fn,nn,Rn;if(typeof k=="number"&&(Rn=Z,Z=M,M=k,k=Rn),se=se||[1,1],ke=ke||!1,isNaN(M)||isNaN(Z)||!Array.isArray(k)||!Array.isArray(se)||!as(me)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pf(M,Z),Oe=se[0],Ye=se[1],xt=k.length,fn=M,nn=Z,rt=0;rt<xt;rt++)(kt=k[rt]).length===2?(fn=kt[0]*Oe+fn,nn=kt[1]*Ye+nn,fm(fn,nn)):(Ft=kt[0]*Oe+fn,Pr=kt[1]*Ye+nn,rn=kt[2]*Oe+fn,cr=kt[3]*Ye+nn,fn=kt[4]*Oe+fn,nn=kt[5]*Ye+nn,Ca(Ft,Pr,rn,cr,fn,nn));return ke&&dm(),Kl(me),this},h.path=function(k){for(var M=0;M<k.length;M++){var Z=k[M],se=Z.c;switch(Z.op){case"m":pf(se[0],se[1]);break;case"l":fm(se[0],se[1]);break;case"c":Ca.apply(this,se);break;case"h":dm()}}return this},h.__private__.rect=h.rect=function(k,M,Z,se,me){if(isNaN(k)||isNaN(M)||isNaN(Z)||isNaN(se)||!as(me))throw new Error("Invalid arguments passed to jsPDF.rect");return j===_&&(se=-se),H([E(U(k)),E(V(M)),E(U(Z)),E(U(se)),"re"].join(" ")),Kl(me),this},h.__private__.triangle=h.triangle=function(k,M,Z,se,me,ke,Oe){if(isNaN(k)||isNaN(M)||isNaN(Z)||isNaN(se)||isNaN(me)||isNaN(ke)||!as(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-k,se-M],[me-Z,ke-se],[k-me,M-ke]],k,M,[1,1],Oe,!0),this},h.__private__.roundedRect=h.roundedRect=function(k,M,Z,se,me,ke,Oe){if(isNaN(k)||isNaN(M)||isNaN(Z)||isNaN(se)||isNaN(me)||isNaN(ke)||!as(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ye=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*Z),ke=Math.min(ke,.5*se),this.lines([[Z-2*me,0],[me*Ye,0,me,ke-ke*Ye,me,ke],[0,se-2*ke],[0,ke*Ye,-me*Ye,ke,-me,ke],[2*me-Z,0],[-me*Ye,0,-me,-ke*Ye,-me,-ke],[0,2*ke-se],[0,-ke*Ye,me*Ye,-ke,me,-ke]],k+me,M,[1,1],Oe,!0),this},h.__private__.ellipse=h.ellipse=function(k,M,Z,se,me){if(isNaN(k)||isNaN(M)||isNaN(Z)||isNaN(se)||!as(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*Z,Oe=4/3*(Math.SQRT2-1)*se;return pf(k+Z,M),Ca(k+Z,M-Oe,k+ke,M-se,k,M-se),Ca(k-ke,M-se,k-Z,M-Oe,k-Z,M),Ca(k-Z,M+Oe,k-ke,M+se,k,M+se),Ca(k+ke,M+se,k+Z,M+Oe,k+Z,M),Kl(me),this},h.__private__.circle=h.circle=function(k,M,Z,se){if(isNaN(k)||isNaN(M)||isNaN(Z)||!as(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,M,Z,Z,se)},h.setFont=function(k,M,Z){return Z&&(M=D(M,Z)),Ge=sm(k,M,{disableWarning:!1}),this};var Ax=h.__private__.getFont=h.getFont=function(){return Nt[sm.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var k,M,Z={};for(k in Ct)if(Ct.hasOwnProperty(k))for(M in Z[k]=[],Ct[k])Ct[k].hasOwnProperty(M)&&Z[k].push(M);return Z},h.addFont=function(k,M,Z,se,me){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(Z=D(Z,se)),rm.call(this,k,M,Z,me=me||"Identity-H")};var Gl,mf=e.lineWidth||.200025,Ex=h.__private__.getLineWidth=h.getLineWidth=function(){return mf},wt=h.__private__.setLineWidth=h.setLineWidth=function(k){return mf=k,H(E(U(k))+" w"),this};h.__private__.setLineDash=at.API.setLineDash=at.API.setLineDashPattern=function(k,M){if(k=k||[],M=M||0,isNaN(M)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Z){return E(U(Z))}).join(" "),M=E(U(M)),H("["+k+"] "+M+" d"),this};var Px=h.__private__.getLineHeight=h.getLineHeight=function(){return Se*Gl};h.__private__.getLineHeight=h.getLineHeight=function(){return Se*Gl};var Cx=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(Gl=k),this},Ox=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Gl};Cx(e.lineHeight);var Bs=h.__private__.getHorizontalCoordinate=function(k){return U(k)},$s=h.__private__.getVerticalCoordinate=function(k){return j===S?k:lt[z].mediaBox.topRightY-lt[z].mediaBox.bottomLeftY-U(k)},Tx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(k){return E(Bs(k))},Ix=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(k){return E($s(k))},ju=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return ts(ju)},h.__private__.setStrokeColor=h.setDrawColor=function(k,M,Z,se){return ju=Ea({ch1:k,ch2:M,ch3:Z,ch4:se,pdfColorType:"draw",precision:2}),H(ju),this};var vf=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return ts(vf)},h.__private__.setFillColor=h.setFillColor=function(k,M,Z,se){return vf=Ea({ch1:k,ch2:M,ch3:Z,ch4:se,pdfColorType:"fill",precision:2}),H(vf),this};var Yl=e.textColor||"0 g",Lx=h.__private__.getTextColor=h.getTextColor=function(){return ts(Yl)};h.__private__.setTextColor=h.setTextColor=function(k,M,Z,se){return Yl=Ea({ch1:k,ch2:M,ch3:Z,ch4:se,pdfColorType:"text",precision:3}),this};var Us=e.charSpace,Dx=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Us||0)};h.__private__.setCharSpace=h.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Us=k,this};var gf=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(k){var M=h.CapJoinStyles[k];if(M===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gf=M,H(M+" J"),this};var yf=0;h.__private__.setLineJoin=h.setLineJoin=function(k){var M=h.CapJoinStyles[k];if(M===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yf=M,H(M+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(E(U(k))+" M"),this},h.GState=Dg,h.setGState=function(k){(k=typeof k=="string"?dt[jt[k]]:hm(null,k)).equals(_r)||(H("/"+k.id+" gs"),_r=k)};var hm=function(k,M){if(!k||!jt[k]){var Z=!1;for(var se in dt)if(dt.hasOwnProperty(se)&&dt[se].equals(M)){Z=!0;break}if(Z)M=dt[se];else{var me="GS"+(Object.keys(dt).length+1).toString(10);dt[me]=M,M.id=me}return k&&(jt[k]=M.id),Kt.publish("addGState",M),M}};h.addGState=function(k,M){return hm(k,M),this},h.saveGraphicsState=function(){return H("q"),wr.push({key:Ge,size:Se,color:Yl}),this},h.restoreGraphicsState=function(){H("Q");var k=wr.pop();return Ge=k.key,Se=k.size,Yl=k.color,_r=null,this},h.setCurrentTransformationMatrix=function(k){return H(k.toString()+" cm"),this},h.comment=function(k){return H("#"+k),this};var zs=function(k,M){var Z=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(ke){isNaN(ke)||(Z=parseFloat(ke))}});var se=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(ke){isNaN(ke)||(se=parseFloat(ke))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(ke){me=ke.toString()}}),this},xf=function(k,M,Z,se){zs.call(this,k,M),this.type="rect";var me=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Oe){isNaN(Oe)||(me=parseFloat(Oe))}});var ke=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(Oe){isNaN(Oe)||(ke=parseFloat(Oe))}}),this},Su=function(){this.page=Ot,this.currentPage=z,this.pages=oe.slice(0),this.pagesContext=lt.slice(0),this.x=qe,this.y=zt,this.matrix=Pt,this.width=wf(z),this.height=mm(z),this.outputDestination=Ce,this.id="",this.objectNumber=-1};Su.prototype.restore=function(){Ot=this.page,z=this.currentPage,lt=this.pagesContext,oe=this.pages,qe=this.x,zt=this.y,Pt=this.matrix,pm(z,this.width),qs(z,this.height),Ce=this.outputDestination};var bf=function(k,M,Z,se,me){es.push(new Su),Ot=z=0,oe=[],qe=k,zt=M,Pt=me,ff([Z,se])};for(var Jl in h.beginFormObject=function(k,M,Z,se,me){return bf(k,M,Z,se,me),this},h.endFormObject=function(k){return function(M){if(Ds[M])es.pop().restore();else{var Z=new Su,se="Xo"+(Object.keys(Yn).length+1).toString(10);Z.id=se,Ds[M]=se,Yn[se]=Z,Kt.publish("addFormObject",Z),es.pop().restore()}}(k),this},h.doFormObject=function(k,M){var Z=Yn[Ds[k]];return H("q"),H(M.toString()+" cm"),H("/"+Z.id+" Do"),H("Q"),this},h.getFormObject=function(k){var M=Yn[Ds[k]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},h.save=function(k,M){return k=k||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(pc(wu(is()),k),typeof pc.unload=="function"&&gt.setTimeout&&setTimeout(pc.unload,911),this):new Promise(function(Z,se){try{var me=pc(wu(is()),k);typeof pc.unload=="function"&&gt.setTimeout&&setTimeout(pc.unload,911),Z(me)}catch(ke){se(ke.message)}})},at.API)at.API.hasOwnProperty(Jl)&&(Jl==="events"&&at.API.events.length?function(k,M){var Z,se,me;for(me=M.length-1;me!==-1;me--)Z=M[me][0],se=M[me][1],k.subscribe.apply(k,[Z].concat(typeof se=="function"?[se]:se))}(Kt,at.API.events):h[Jl]=at.API[Jl]);function wf(k){return lt[k].mediaBox.topRightX-lt[k].mediaBox.bottomLeftX}function pm(k,M){lt[k].mediaBox.topRightX=M+lt[k].mediaBox.bottomLeftX}function mm(k){return lt[k].mediaBox.topRightY-lt[k].mediaBox.bottomLeftY}function qs(k,M){lt[k].mediaBox.topRightY=M+lt[k].mediaBox.bottomLeftY}var Ws=h.getPageWidth=function(k){return wf(k=k||z)/bt},vm=h.setPageWidth=function(k,M){pm(k,M*bt)},Xl=h.getPageHeight=function(k){return mm(k=k||z)/bt},gm=h.setPageHeight=function(k,M){qs(k,M*bt)};return h.internal={pdfEscape:aa,getStyle:um,getFont:Ax,getFontSize:Fe,getCharSpace:Dx,getTextColor:Lx,getLineHeight:Px,getLineHeightFactor:Ox,getLineWidth:Ex,write:je,getHorizontalCoordinate:Bs,getVerticalCoordinate:$s,getCoordinateString:Tx,getVerticalCoordinateString:Ix,collections:{},newObject:Dr,newAdditionalObject:Wl,newObjectDeferred:Sn,newObjectDeferredBegin:Dn,getFilters:Pa,putStream:ia,events:Kt,scaleFactor:bt,pageSize:{getWidth:function(){return Ws(z)},setWidth:function(k){vm(z,k)},getHeight:function(){return Xl(z)},setHeight:function(k){gm(z,k)}},encryptionOptions:d,encryption:dn,getEncryptor:function(k){return d!==null?dn.encryptor(k,0):function(M){return M}},output:lm,getNumberOfPages:am,get pages(){return oe},out:H,f2:I,f3:O,getPageInfo:Fs,getPageInfoByObjId:cm,getCurrentPageInfo:_x,getPDFVersion:v,Point:zs,Rectangle:xf,Matrix:ct,hasHotfix:sa},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Ws(z)},set:function(k){vm(z,k)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Xl(z)},set:function(k){gm(z,k)},enumerable:!0,configurable:!0}),(function(k){for(var M=0,Z=De.length;M<Z;M++){var se=rm.call(this,k[M][0],k[M][1],k[M][2],De[M][3],!0);f===!1&&(p[se]=!0);var me=k[M][0].split("-");tm({id:se,fontName:me[0],fontStyle:me[1]||""})}Kt.publish("addFonts",{fonts:Nt,dictionary:Ct})}).call(h,De),Ge="F1",nm(i,r),Kt.publish("initialized"),h}Ku.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ku.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ku.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Ku.prototype.processOwnerPassword=function(e,t){return Y2(G2(t).substr(0,5),e)},Ku.prototype.encryptor=function(e,t){var r=G2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Y2(r,n)}},Dg.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||er(e)!==er(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},at.API={events:[]},at.version="4.0.0";var Fr=at.API,d5=1,cu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fu=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_t=function(e){return e.toFixed(2)},rl=function(e){return e.toFixed(5)};Fr.__acroform__={};var Oi=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},YA=function(e){return e*d5},ms=function(e){var t=new ZT,r=We.internal.getHeight(e)||0,n=We.internal.getWidth(e)||0;return t.BBox=[0,0,Number(_t(n)),Number(_t(r))],t},LV=Fr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},DV=Fr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},RV=Fr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Xr=Fr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return RV(e,t-1)},Zr=Fr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return LV(e,t-1)},Qr=Fr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return DV(e,t-1)},MV=Fr.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],a=e[1],s=e[2],o=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(a+o)||0,c.upperRight_X=r(i+s)||0,c.upperRight_Y=n(a)||0,[Number(_t(c.lowerLeft_X)),Number(_t(c.lowerLeft_Y)),Number(_t(c.upperRight_X)),Number(_t(c.upperRight_Y))]},FV=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=J2(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+_t(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=ms(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},J2=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var a=r,s=We.internal.getHeight(e)||0;s=s<0?-s:s;var o=We.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(I,O,U){if(I+1<i.length){var V=O+" "+i[I+1][0];return fv(V,e,U).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var u,d,f=fv("3",e,a).height,p=e.multiline?s-a:(s-f)/2,h=p+=2,y=0,v=0,x=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+fv(t,e,a=12).width+", FieldWidth:"+o+`
`;break}for(var g="",_=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var j=!1;if(i[S].length!==1&&x!==i[S].length-1){if((f+2)*(_+2)+2>s)continue e;g+=i[S][x],j=!0,v=S,S--}else{g=(g+=i[S][x]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var A=parseInt(S),N=c(A,g,a),D=S>=i.length-1;if(N&&!D){g+=" ",x=0;continue}if(N||D){if(D)v=A;else if(e.multiline&&(f+2)*(_+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(_+2)+2>s)continue e;v=A}}for(var E="",C=y;C<=v;C++){var L=i[C];if(e.multiline){if(C===v){E+=L[x]+" ",x=(x+1)%L.length;continue}if(C===y){E+=L[L.length-1]+" ";continue}}E+=L[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=fv(E,e,a).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}t+=_t(u)+" "+_t(h)+` Td
`,t+="("+cu(E)+`) Tj
`,t+=-_t(u)+` 0 Td
`,h=-(a+2),d=0,y=j?v:v+1,_++,g=""}break}return n.text=t,n.fontSize=a,n},fv=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},BV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$V=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},UV=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Xa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(BV)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");d5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new QT,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&$V(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],c=[],u=o.Rect;if(o.Rect&&(o.Rect=MV(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=We.createDefaultAppearanceStream(o),er(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=FV(o);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var y=h[s];typeof y=="function"&&(y=y.call(i,o)),f+="/"+s+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=h)=="function"&&(y=y.call(i,o)),f+="/"+s+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}a&&function(v,x){for(var g in v)if(v.hasOwnProperty(g)){var _=g,S=v[g];x.internal.newObjectDeferredBegin(S.objId,!0),er(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete v[_]}}(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},XT=Fr.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),er(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+cu(n(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},J1=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+cu(n(e))+")"},bs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bs.prototype.toString=function(){return this.objId+" 0 R"},bs.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},bs.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:XT(i,this.objId,this.scope)}):i instanceof bs?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var ZT=function(){bs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Oi(ZT,bs);var QT=function(){bs.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+cu(r(e))+")"}},set:function(r){e=r}})};Oi(QT,bs);var Xa=function e(){bs.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');t=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xr(t,3)},set:function(g){g?this.F=Zr(t,3):this.F=Qr(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');r=g}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(g){n=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(g){n[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(g){n[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(g){n[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(g){n[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Rg)return;a="FieldObject"+e.FieldNum++}var g=function(_){return _};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+cu(g(a))+")"},set:function(g){a=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(g){a=g}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/d5:u},set:function(g){u=g}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(g){d=g}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Rg||this instanceof Oc))return J1(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=g}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Pn==0?J1(p,this.objId,this.scope):p},set:function(g){g=g.toString(),p=this instanceof Pn==0?g.substr(0,1)==="("?Fu(g.substr(1,g.length-2)):Fu(g):g}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn==1?Fu(p.substr(1,p.length-1)):p},set:function(g){g=g.toString(),p=this instanceof Pn==1?"/"+g:g}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Pn==0?J1(h,this.objId,this.scope):h},set:function(g){g=g.toString(),h=this instanceof Pn==0?g.substr(0,1)==="("?Fu(g.substr(1,g.length-2)):Fu(g):g}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn==1?Fu(h.substr(1,h.length-1)):h},set:function(g){g=g.toString(),h=this instanceof Pn==1?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(g){g=!!g,v=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(g){y=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,1)},set:function(g){g?this.Ff=Zr(this.Ff,1):this.Ff=Qr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,2)},set:function(g){g?this.Ff=Zr(this.Ff,2):this.Ff=Qr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,3)},set:function(g){g?this.Ff=Zr(this.Ff,3):this.Ff=Qr(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');x=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(x){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};Oi(Xa,bs);var xd=function(){Xa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XT(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,s,o){o||(o=1);for(var c,u=[];c=s.exec(a);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,18)},set:function(r){r?this.Ff=Zr(this.Ff,18):this.Ff=Qr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Zr(this.Ff,19):this.Ff=Qr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,20)},set:function(r){r?(this.Ff=Zr(this.Ff,20),t.sort()):this.Ff=Qr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,22)},set:function(r){r?this.Ff=Zr(this.Ff,22):this.Ff=Qr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,23)},set:function(r){r?this.Ff=Zr(this.Ff,23):this.Ff=Qr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,27)},set:function(r){r?this.Ff=Zr(this.Ff,27):this.Ff=Qr(this.Ff,27)}}),this.hasAppearanceStream=!1};Oi(xd,Xa);var bd=function(){xd.call(this),this.fontName="helvetica",this.combo=!1};Oi(bd,xd);var wd=function(){bd.call(this),this.combo=!0};Oi(wd,bd);var Vv=function(){wd.call(this),this.edit=!0};Oi(Vv,wd);var Pn=function(){Xa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,15)},set:function(r){r?this.Ff=Zr(this.Ff,15):this.Ff=Qr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,16)},set:function(r){r?this.Ff=Zr(this.Ff,16):this.Ff=Qr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,17)},set:function(r){r?this.Ff=Zr(this.Ff,17):this.Ff=Qr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,26)},set:function(r){r?this.Ff=Zr(this.Ff,26):this.Ff=Qr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+cu(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){er(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Oi(Pn,Xa);var Kv=function(){Pn.call(this),this.pushButton=!0};Oi(Kv,Pn);var _d=function(){Pn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Oi(_d,Pn);var Rg=function(){var e,t;Xa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+cu(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){er(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=We.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oi(Rg,Xa),_d.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},_d.prototype.createOption=function(e){var t=new Rg;return t.Parent=this,t.optionName=e,this.Kids.push(t),zV.call(this.scope,t),t};var Gv=function(){Pn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=We.CheckBox.createAppearanceStream()};Oi(Gv,Pn);var Oc=function(){Xa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,13)},set:function(t){t?this.Ff=Zr(this.Ff,13):this.Ff=Qr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,21)},set:function(t){t?this.Ff=Zr(this.Ff,21):this.Ff=Qr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,23)},set:function(t){t?this.Ff=Zr(this.Ff,23):this.Ff=Qr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,24)},set:function(t){t?this.Ff=Zr(this.Ff,24):this.Ff=Qr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,25)},set:function(t){t?this.Ff=Zr(this.Ff,25):this.Ff=Qr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,26)},set:function(t){t?this.Ff=Zr(this.Ff,26):this.Ff=Qr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oi(Oc,Xa);var Yv=function(){Oc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xr(this.Ff,14)},set:function(e){e?this.Ff=Zr(this.Ff,14):this.Ff=Qr(this.Ff,14)}}),this.password=!0};Oi(Yv,Oc);var We={CheckBox:{createAppearanceStream:function(){return{N:{On:We.CheckBox.YesNormal},D:{On:We.CheckBox.YesPushDown,Off:We.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=J2(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+_t(We.internal.getWidth(e))+" "+_t(We.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+_t(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ms(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],a=We.internal.getHeight(e),s=We.internal.getWidth(e),o=J2(e,e.caption);return i.push("1 g"),i.push("0 0 "+_t(s)+" "+_t(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+_t(s-1)+" "+_t(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+_t(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_t(We.internal.getWidth(e))+" "+_t(We.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:We.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=We.RadioButton.Circle.YesNormal,t.D[e]=We.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=We.internal.getWidth(e)<=We.internal.getHeight(e)?We.internal.getWidth(e)/4:We.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=We.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+rl(We.internal.getWidth(e)/2)+" "+rl(We.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=We.internal.getWidth(e)<=We.internal.getHeight(e)?We.internal.getWidth(e)/4:We.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*We.internal.Bezier_C).toFixed(5)),s=Number((n*We.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+rl(We.internal.getWidth(e)/2)+" "+rl(We.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+rl(We.internal.getWidth(e)/2)+" "+rl(We.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=We.internal.getWidth(e)<=We.internal.getHeight(e)?We.internal.getWidth(e)/4:We.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*We.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+rl(We.internal.getWidth(e)/2)+" "+rl(We.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:We.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=We.RadioButton.Cross.YesNormal,t.D[e]=We.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ms(e);t.scope=e.scope;var r=[],n=We.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+_t(We.internal.getWidth(e)-2)+" "+_t(We.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(_t(n.x1.x)+" "+_t(n.x1.y)+" m"),r.push(_t(n.x2.x)+" "+_t(n.x2.y)+" l"),r.push(_t(n.x4.x)+" "+_t(n.x4.y)+" m"),r.push(_t(n.x3.x)+" "+_t(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=We.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+_t(We.internal.getWidth(e))+" "+_t(We.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+_t(We.internal.getWidth(e)-2)+" "+_t(We.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(_t(r.x1.x)+" "+_t(r.x1.y)+" m"),n.push(_t(r.x2.x)+" "+_t(r.x2.y)+" l"),n.push(_t(r.x4.x)+" "+_t(r.x4.y)+" m"),n.push(_t(r.x3.x)+" "+_t(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ms(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_t(We.internal.getWidth(e))+" "+_t(We.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};We.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=We.internal.getWidth(e),r=We.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},We.internal.getWidth=function(e){var t=0;return er(e)==="object"&&(t=YA(e.Rect[2])),t},We.internal.getHeight=function(e){var t=0;return er(e)==="object"&&(t=YA(e.Rect[3])),t};var zV=Fr.addField=function(e){if(UV(this,e),!(e instanceof Xa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Fr.AcroFormChoiceField=xd,Fr.AcroFormListBox=bd,Fr.AcroFormComboBox=wd,Fr.AcroFormEditBox=Vv,Fr.AcroFormButton=Pn,Fr.AcroFormPushButton=Kv,Fr.AcroFormRadioButton=_d,Fr.AcroFormCheckBox=Gv,Fr.AcroFormTextField=Oc,Fr.AcroFormPasswordField=Yv,Fr.AcroFormAppearance=We,Fr.AcroForm={ChoiceField:xd,ListBox:bd,ComboBox:wd,EditBox:Vv,Button:Pn,PushButton:Kv,RadioButton:_d,CheckBox:Gv,TextField:Oc,PasswordField:Yv,Appearance:We},at.AcroForm={ChoiceField:xd,ListBox:bd,ComboBox:wd,EditBox:Vv,Button:Pn,PushButton:Kv,RadioButton:_d,CheckBox:Gv,TextField:Oc,PasswordField:Yv,Appearance:We};at.AcroForm;function eI(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(I,O){var U,V,ie,ne,ee,q=r;if((O=O||r)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(N(I))for(ee in n)for(ie=n[ee],U=0;U<ie.length;U+=1){for(ne=!0,V=0;V<ie[U].length;V+=1)if(ie[U][V]!==void 0&&ie[U][V]!==I[V]){ne=!1;break}if(ne===!0){q=ee;break}}else for(ee in n)for(ie=n[ee],U=0;U<ie.length;U+=1){for(ne=!0,V=0;V<ie[U].length;V+=1)if(ie[U][V]!==void 0&&ie[U][V]!==I.charCodeAt(V)){ne=!1;break}if(ne===!0){q=ee;break}}return q===r&&O!==r&&(q=O),q},a=function I(O){for(var U=this.internal.write,V=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:O.width}),ne.push({key:"Height",value:O.height}),O.colorSpace===g.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===g.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var ee="",q=0,Y=O.transparency.length;q<Y;q++)ee+=O.transparency[q]+" "+O.transparency[q]+" ";ne.push({key:"Mask",value:"["+ee+"]"})}O.sMask!==void 0&&ne.push({key:"SMask",value:O.objectId+1+" 0 R"});var fe=O.filter!==void 0?["/"+O.filter]:void 0;if(V({data:O.data,additionalKeyValues:ne,alreadyAppliedFilters:fe,objectId:O.objectId}),U("endobj"),"sMask"in O&&O.sMask!==void 0){var te,R=(te=O.sMaskBitsPerComponent)!==null&&te!==void 0?te:O.bitsPerComponent,z={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:O.sMask};"filter"in O&&(z.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(O.width),z.filter=O.filter),I.call(this,z)}if(O.colorSpace===g.INDEXED){var G=this.internal.newObject();V({data:E(new Uint8Array(O.palette)),objectId:G}),U("endobj")}},s=function(){var I=this.internal.collections[t+"images"];for(var O in I)a.call(this,I[O])},o=function(){var I,O=this.internal.collections[t+"images"],U=this.internal.write;for(var V in O)U("/I"+(I=O[V]).index,I.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var I=this.internal.collections[t+"images"];return c.call(this),I},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(I){return typeof e["process"+I.toUpperCase()]=="function"},p=function(I){return er(I)==="object"&&I.nodeType===1},h=function(I,O){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var U=""+I.getAttribute("src");if(U.indexOf("data:image/")===0)return Hv(unescape(U).split("base64,").pop());var V=e.loadFile(U,!0);if(V!==void 0)return V}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var ie;switch(O){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return Hv(I.toDataURL(ie,1).split("base64,").pop())}},y=function(I){var O=this.internal.collections[t+"images"];if(O){for(var U in O)if(I===O[U].alias)return O[U]}},v=function(I,O,U){return I||O||(I=-96,O=-96),I<0&&(I=-1*U.width*72/I/this.internal.scaleFactor),O<0&&(O=-1*U.height*72/O/this.internal.scaleFactor),I===0&&(I=O*U.width/U.height),O===0&&(O=I*U.height/U.width),[I,O]},x=function(I,O,U,V,ie,ne){var ee=v.call(this,U,V,ie),q=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,fe=u.call(this);if(U=ee[0],V=ee[1],fe[ie.index]=ie,ne){ne*=Math.PI/180;var te=Math.cos(ne),R=Math.sin(ne),z=function(re){return re.toFixed(4)},G=[z(te),z(R),z(-1*R),z(te),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,q(I),Y(O+V),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([q(U),"0","0",q(V),"0","0","cm"].join(" "))):this.internal.write([q(U),"0","0",q(V),q(I),Y(O+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(I){var O,U,V=0;if(typeof I=="string")for(U=I.length,O=0;O<U;O++)V=(V<<5)-V+I.charCodeAt(O),V|=0;else if(N(I))for(U=I.byteLength/2,O=0;O<U;O++)V=(V<<5)-V+I[O],V|=0;return V},j=e.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var O=!0;return I.length===0&&(O=!1),I.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(O=!1),O},A=e.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var O=I.indexOf(",");return O<0?null:I.substring(0,O).trim().endsWith("base64")?I.substring(O+1):null};e.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},D=e.__addimage__.binaryStringToUint8Array=function(I){for(var O=I.length,U=new Uint8Array(O),V=0;V<O;V++)U[V]=I.charCodeAt(V);return U},E=e.__addimage__.arrayBufferToBinaryString=function(I){for(var O="",U=N(I)?I:new Uint8Array(I),V=0;V<U.length;V+=8192)O+=String.fromCharCode.apply(null,U.subarray(V,V+8192));return O};e.addImage=function(){var I,O,U,V,ie,ne,ee,q,Y;if(typeof arguments[1]=="number"?(O=r,U=arguments[1],V=arguments[2],ie=arguments[3],ne=arguments[4],ee=arguments[5],q=arguments[6],Y=arguments[7]):(O=arguments[1],U=arguments[2],V=arguments[3],ie=arguments[4],ne=arguments[5],ee=arguments[6],q=arguments[7],Y=arguments[8]),er(I=arguments[0])==="object"&&!p(I)&&"imageData"in I){var fe=I;I=fe.imageData,O=fe.format||O||r,U=fe.x||U||0,V=fe.y||V||0,ie=fe.w||fe.width||ie,ne=fe.h||fe.height||ne,ee=fe.alias||ee,q=fe.compression||q,Y=fe.rotation||fe.angle||Y}var te=this.internal.getFilters();if(q===void 0&&te.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(U)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var R=C.call(this,I,O,ee,q);return x.call(this,U,V,ie,ne,R,Y),this};var C=function(I,O,U,V){var ie,ne,ee;if(typeof I=="string"&&i(I)===r){I=unescape(I);var q=L(I,!1);(q!==""||(q=e.loadFile(I,!0))!==void 0)&&(I=q)}if(p(I)&&(I=h(I,O)),O=i(I,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((ee=U)==null||ee.length===0)&&(U=function(Y){return typeof Y=="string"||N(Y)?S(Y):N(Y.data)?S(Y.data):null}(I)),(ie=y.call(this,U))||(I instanceof Uint8Array||O==="RGBA"||(ne=I,I=D(I)),ie=this["process"+O.toUpperCase()](I,d.call(this),U,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:_.NONE}(V),ne)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},L=e.__addimage__.convertBase64ToBinaryString=function(I,O){O=typeof O!="boolean"||O;var U,V="";if(typeof I=="string"){var ie;U=(ie=A(I))!==null&&ie!==void 0?ie:I;try{V=Hv(U)}catch(ne){if(O)throw j(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(I){var O,U,V="";if(p(I)&&(I=h(I)),typeof I=="string"&&i(I)===r&&((V=L(I,!1))===""&&(V=e.loadFile(I)||""),I=V),U=i(I),!f(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(I instanceof Uint8Array||(I=D(I)),!(O=this["process"+U.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=U,O}})(at.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};at.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var h=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(v.objId),_=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",a+=" /Popup "+x.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+h(g(_))+") >>",v.content=a;var S=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(a+=" /Open true"),a+=" >>",x.content=a,this.internal.write(v.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var A=this.annotations._nameMap[n.options.name];n.options.pageNumber=A.page,n.options.top=A.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var N=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+N+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,a,s){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+i),h:u(n+a)},options:s,type:"link"})},e.textWithLink=function(r,n,i,a){var s,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;s=Math.ceil(u*d)}else o=c,s=u;return this.text(r,n,i,a),i+=.2*u,a.align==="center"&&(n-=c/2),a.align==="right"&&(n-=c),this.link(n,i-u,o,s,a),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(at.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return s(v)&&a(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return s(v)&&i.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return s(v)&&a(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return s(v)&&a(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return s(v)&&a(v)&&t[v.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return s(v)&&a(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var x=0,g=r,_="",S=0;for(x=0;x<v.length;x+=1)g[v.charCodeAt(x)]!==void 0?(S++,typeof(g=g[v.charCodeAt(x)])=="number"&&(_+=String.fromCharCode(g),g=r,S=0),x===v.length-1&&(g=r,_+=v.charAt(x-(S-1)),x-=S-1,S=0)):(g=r,_+=v.charAt(x-S),x-=S,S=0);return _};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(v,x,g){return s(v)?a(v)===!1?-1:!u(v)||!s(x)&&!s(g)||!s(g)&&o(x)||o(v)&&!s(x)||o(v)&&c(x)||o(v)&&o(x)?0:d(v)&&s(x)&&!o(x)&&s(g)&&u(g)?3:o(v)||!s(g)?1:2:-1},h=function(v){var x=0,g=0,_=0,S="",j="",A="",N=(v=v||"").split("\\s+"),D=[];for(x=0;x<N.length;x+=1){for(D.push(""),g=0;g<N[x].length;g+=1)S=N[x][g],j=N[x][g-1],A=N[x][g+1],s(S)?(_=p(S,j,A),D[x]+=_!==-1?String.fromCharCode(t[S.charCodeAt(0)][_]):S):D[x]+=S;D[x]=f(D[x])}return D.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var v,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(x)){var _=0;for(g=[],_=0;_<x.length;_+=1)Array.isArray(x[_])?g.push([h(x[_][0]),x[_][1],x[_][2]]):g.push([h(x[_])]);v=g}else v=h(x);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",y])}(at.API),at.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(at.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,y=0,v=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var g=u.maxWidth;g>0?typeof c=="string"?c=this.splitTextToSize(c,g):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,j){return S.concat(x.splitTextToSize(j,g))},[])):c=Array.isArray(c)?c:[c];for(var _=0;_<c.length;_++)h<(v=this.getStringUnitWidth(c[_],{font:f})*d)&&(h=v);return h!==0&&(y=c.length),{w:h/=p,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,y,v,x,g=[],_=[],S=[],j={},A={},N=[],D=[],E=(p=p||{}).autoSize||!1,C=p.printHeaders!==!1,L=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,I=p.margins||Object.assign({width:this.getPageWidth()},t),O=typeof p.padding=="number"?p.padding:3,U=p.headerBackgroundColor||"#c8c8c8",V=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=V,this.setFontSize(L),f==null)_=g=Object.keys(d[0]),S=g.map(function(){return"left"});else if(Array.isArray(f)&&er(f[0])==="object")for(g=f.map(function(fe){return fe.name}),_=f.map(function(fe){return fe.prompt||fe.name||""}),S=f.map(function(fe){return fe.align||"left"}),h=0;h<f.length;h+=1)A[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(_=g=f,S=g.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<g.length;h+=1){for(j[x=g[h]]=d.map(function(fe){return fe[x]}),this.setFont(void 0,"bold"),N.push(this.getTextDimensions(_[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=j[x],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)N.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[x]=Math.max.apply(null,N)+O+O,N=[]}if(C){var ie={};for(h=0;h<g.length;h+=1)ie[g[h]]={},ie[g[h]].text=_[h],ie[g[h]].align=S[h];var ne=o.call(this,ie,A);D=g.map(function(fe){return new a(c,u,A[fe],ne,ie[fe].text,void 0,ie[fe].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var ee=f.reduce(function(fe,te){return fe[te.name]=te.align,fe},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var q=o.call(this,d[h],A);for(v=0;v<g.length;v+=1){var Y=d[h][g[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:v,data:Y},this),s.call(this,new a(c,u,A[g[v]],q,Y,h+2,ee[g[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var y=c[h];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,y){return Math.max(h,y)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(at.API);var tI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],X2=eI(rI),nI=[100,200,300,400,500,600,700,800,900],qV=eI(nI);function X1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return tI[a=a||"normal"]?a:"normal"}(e.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),i=function(a){return typeof X2[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function JA(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var WV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},XA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ZA(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function QA(e){return e.trimLeft()}function HV(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function VV(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var hv,e4,t4,Bu,pv,r4,n4,i4,Z1=["times"];function a4(e,t,r,n,i){var a=4,s=o4;switch(i){case at.API.image_compression.FAST:a=1,s=s4;break;case at.API.image_compression.MEDIUM:a=6,s=l4;break;case at.API.image_compression.SLOW:a=9,s=c4}e=function(c,u,d,f){for(var p,h=c.length/u,y=new Uint8Array(c.length+h),v=[KV,s4,o4,l4,c4],x=0;x<h;x+=1){var g=x*u,_=c.subarray(g,g+u);if(f)y.set(f(_,d,p),g+x);else{for(var S=v.length,j=[],A=0;A<S;A+=1)j[A]=v[A](_,d,p);var N=YV(j.concat());y.set(j[N],g+x)}p=_}return y}(e,t,Math.ceil(r*n/8),s);var o=W2(e,{level:a});return at.API.__addimage__.arrayBufferToBinaryString(o)}function KV(e){var t=Array.apply([],e);return t.unshift(0),t}function s4(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=e[i-t]||0;n[i+1]=e[i]-a+256&255}return n}function o4(e,t,r){var n=e.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var s=r&&r[a]||0;i[a+1]=e[a]-s+256&255}return i}function l4(e,t,r){var n=e.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var s=e[a-t]||0,o=r&&r[a]||0;i[a+1]=e[a]+256-(s+o>>>1)&255}return i}function c4(e,t,r){var n=e.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var s=GV(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);i[a+1]=e[a]-s+256&255}return i}function GV(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),a=Math.abs(e+t-r-r);return n<=i&&n<=a?e:i<=a?t:r}function YV(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function Q1(e,t,r){var n=t*r,i=Math.floor(n/8),a=16-(n-8*i+r),s=(1<<r)-1;return iI(e,i)>>a&s}function u4(e,t,r,n){var i=r*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1,c=(t&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(e,a,iI(e,a)&~(o<<s)&65535|c)}function iI(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function JV(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,s=1<<1+(7&i);e[t++],e[t++];var o=null,c=null;a&&(o=t,c=s,t+=3*s);var u=!0,d=[],f=0,p=null,h=0,y=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],1&v||(p=null),h=v>>2&7,t++;break;case 254:for(;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,j=e[t++],A=j>>6&1,N=1<<1+(7&j),D=o,E=c,C=!1;j>>7&&(C=!0,D=t,E=N,t+=3*N);var L=t;for(t++;;){var I;if(!((I=e[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}d.push({x,y:g,width:_,height:S,has_local_palette:C,palette_offset:D,palette_size:E,data_offset:L,data_length:t-L,transparent_index:p,interlaced:!!A,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,U){var V=this.frameInfo(O),ie=V.width*V.height,ne=new Uint8Array(ie);d4(e,V.data_offset,ne,ie);var ee=V.palette_offset,q=V.transparent_index;q===null&&(q=256);var Y=V.width,fe=r-Y,te=Y,R=4*(V.y*r+V.x),z=4*((V.y+V.height)*r+V.x),G=R,re=4*fe;V.interlaced===!0&&(re+=4*r*7);for(var ae=8,ce=0,pe=ne.length;ce<pe;++ce){var Q=ne[ce];if(te===0&&(te=Y,(G+=re)>=z&&(re=4*fe+4*r*(ae-1),G=R+(Y+fe)*(ae<<1),ae>>=1)),Q===q)G+=4;else{var he=e[ee+3*Q],oe=e[ee+3*Q+1],ue=e[ee+3*Q+2];U[G++]=ue,U[G++]=oe,U[G++]=he,U[G++]=255}--te}},this.decodeAndBlitFrameRGBA=function(O,U){var V=this.frameInfo(O),ie=V.width*V.height,ne=new Uint8Array(ie);d4(e,V.data_offset,ne,ie);var ee=V.palette_offset,q=V.transparent_index;q===null&&(q=256);var Y=V.width,fe=r-Y,te=Y,R=4*(V.y*r+V.x),z=4*((V.y+V.height)*r+V.x),G=R,re=4*fe;V.interlaced===!0&&(re+=4*r*7);for(var ae=8,ce=0,pe=ne.length;ce<pe;++ce){var Q=ne[ce];if(te===0&&(te=Y,(G+=re)>=z&&(re=4*fe+4*r*(ae-1),G=R+(Y+fe)*(ae<<1),ae>>=1)),Q===q)G+=4;else{var he=e[ee+3*Q],oe=e[ee+3*Q+1],ue=e[ee+3*Q+2];U[G++]=he,U[G++]=oe,U[G++]=ue,U[G++]=255}--te}}}function d4(e,t,r,n){for(var i=e[t++],a=1<<i,s=a+1,o=s+1,c=i+1,u=(1<<c)-1,d=0,f=0,p=0,h=e[t++],y=new Int32Array(4096),v=null;;){for(;d<16&&h!==0;)f|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==a){if(x===s)break;for(var g=x<o?x:v,_=0,S=g;S>a;)S=y[S]>>8,++_;var j=S;if(p+_+(g!==x?1:0)>n)return void ar.log("Warning, gif stream longer than expected.");r[p++]=j;var A=p+=_;for(g!==x&&(r[p++]=j),S=g;_--;)S=y[S],r[--A]=255&S,S>>=8;v!==null&&o<4096&&(y[o++]=v<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),v=x}else o=s+1,u=(1<<(c=i+1))-1,v=null}return p!==n&&ar.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function eb(e){var t,r,n,i,a,s=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),y=new Array(64),v=[],x=0,g=7,_=new Array(64),S=new Array(64),j=new Array(64),A=new Array(256),N=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(R,z){for(var G=0,re=0,ae=new Array,ce=1;ce<=16;ce++){for(var pe=1;pe<=R[ce];pe++)ae[z[re]]=[],ae[z[re]][0]=G,ae[z[re]][1]=ce,re++,G++;G*=2}return ae}function ee(R){for(var z=R[0],G=R[1]-1;G>=0;)z&1<<G&&(x|=1<<g),G--,--g<0&&(x==255?(q(255),q(0)):q(x),g=7,x=0)}function q(R){v.push(R)}function Y(R){q(R>>8&255),q(255&R)}function fe(R,z,G,re,ae){for(var ce,pe=ae[0],Q=ae[240],he=function(Se,et){var Fe,Ke,tt,mt,vt,Xe,ot,yt,Ge,bt,qe=0;for(Ge=0;Ge<8;++Ge){Fe=Se[qe],Ke=Se[qe+1],tt=Se[qe+2],mt=Se[qe+3],vt=Se[qe+4],Xe=Se[qe+5],ot=Se[qe+6];var zt=Fe+(yt=Se[qe+7]),Pt=Fe-yt,Nt=Ke+ot,Ct=Ke-ot,wr=tt+Xe,st=tt-Xe,lr=mt+vt,dt=mt-vt,jt=zt+lr,_r=zt-lr,Ot=Nt+wr,lt=Nt-wr;Se[qe]=jt+Ot,Se[qe+4]=jt-Ot;var Kt=.707106781*(lt+_r);Se[qe+2]=_r+Kt,Se[qe+6]=_r-Kt;var ql=.382683433*((jt=dt+st)-(lt=Ct+Pt)),Yn=.5411961*jt+ql,Ds=1.306562965*lt+ql,es=.707106781*(Ot=st+Ct),ct=Pt+es,Rs=Pt-es;Se[qe+5]=Rs+Yn,Se[qe+3]=Rs-Yn,Se[qe+1]=ct+Ds,Se[qe+7]=ct-Ds,qe+=8}for(qe=0,Ge=0;Ge<8;++Ge){Fe=Se[qe],Ke=Se[qe+8],tt=Se[qe+16],mt=Se[qe+24],vt=Se[qe+32],Xe=Se[qe+40],ot=Se[qe+48];var Ms=Fe+(yt=Se[qe+56]),ra=Fe-yt,na=Ke+ot,Dr=Ke-ot,Sn=tt+Xe,Dn=tt-Xe,Wl=mt+vt,Fo=mt-vt,Aa=Ms+Wl,ts=Ms-Wl,Ea=na+Sn,Pa=na-Sn;Se[qe]=Aa+Ea,Se[qe+32]=Aa-Ea;var ia=.707106781*(Pa+ts);Se[qe+16]=ts+ia,Se[qe+48]=ts-ia;var Hl=.382683433*((Aa=Fo+Dn)-(Pa=Dr+ra)),rs=.5411961*Aa+Hl,Vl=1.306562965*Pa+Hl,gu=.707106781*(Ea=Dn+Dr),yu=ra+gu,xu=ra-gu;Se[qe+40]=xu+rs,Se[qe+24]=xu-rs,Se[qe+8]=yu+Vl,Se[qe+56]=yu-Vl,qe++}for(Ge=0;Ge<64;++Ge)bt=Se[Ge]*et[Ge],h[Ge]=bt>0?bt+.5|0:bt-.5|0;return h}(R,z),oe=0;oe<64;++oe)y[D[oe]]=he[oe];var ue=y[0]-G;G=y[0],ue==0?ee(re[0]):(ee(re[p[ce=32767+ue]]),ee(f[ce]));for(var Ce=63;Ce>0&&y[Ce]==0;)Ce--;if(Ce==0)return ee(pe),G;for(var Ee,H=1;H<=Ce;){for(var je=H;y[H]==0&&H<=Ce;)++H;var Je=H-je;if(Je>=16){Ee=Je>>4;for(var De=1;De<=Ee;++De)ee(Q);Je&=15}ce=32767+y[H],ee(ae[(Je<<4)+p[ce]]),ee(f[ce]),H++}return Ce!=63&&ee(pe),G}function te(R){R=Math.min(Math.max(R,1),100),a!=R&&(function(z){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ae=s((G[re]*z+50)/100);ae=Math.min(Math.max(ae,1),255),o[D[re]]=ae}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var Q=s((ce[pe]*z+50)/100);Q=Math.min(Math.max(Q,1),255),c[D[pe]]=Q}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],oe=0,ue=0;ue<8;ue++)for(var Ce=0;Ce<8;Ce++)u[oe]=1/(o[D[oe]]*he[ue]*he[Ce]*8),d[oe]=1/(c[D[oe]]*he[ue]*he[Ce]*8),oe++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),a=R)}this.encode=function(R,z){z&&te(z),v=new Array,x=0,g=7,Y(65496),Y(65504),Y(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),Y(1),Y(1),q(0),q(0),function(){Y(65499),Y(132),q(0);for(var Ke=0;Ke<64;Ke++)q(o[Ke]);q(1);for(var tt=0;tt<64;tt++)q(c[tt])}(),function(Ke,tt){Y(65472),Y(17),q(8),Y(tt),Y(Ke),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(R.width,R.height),function(){Y(65476),Y(418),q(0);for(var Ke=0;Ke<16;Ke++)q(E[Ke+1]);for(var tt=0;tt<=11;tt++)q(C[tt]);q(16);for(var mt=0;mt<16;mt++)q(L[mt+1]);for(var vt=0;vt<=161;vt++)q(I[vt]);q(1);for(var Xe=0;Xe<16;Xe++)q(O[Xe+1]);for(var ot=0;ot<=11;ot++)q(U[ot]);q(17);for(var yt=0;yt<16;yt++)q(V[yt+1]);for(var Ge=0;Ge<=161;Ge++)q(ie[Ge])}(),Y(65498),Y(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var G=0,re=0,ae=0;x=0,g=7,this.encode.displayName="_encode_";for(var ce,pe,Q,he,oe,ue,Ce,Ee,H,je=R.data,Je=R.width,De=R.height,Se=4*Je,et=0;et<De;){for(ce=0;ce<Se;){for(oe=Se*et+ce,Ce=-1,Ee=0,H=0;H<64;H++)ue=oe+(Ee=H>>3)*Se+(Ce=4*(7&H)),et+Ee>=De&&(ue-=Se*(et+1+Ee-De)),ce+Ce>=Se&&(ue-=ce+Ce-Se+4),pe=je[ue++],Q=je[ue++],he=je[ue++],_[H]=(N[pe]+N[Q+256|0]+N[he+512|0]>>16)-128,S[H]=(N[pe+768|0]+N[Q+1024|0]+N[he+1280|0]>>16)-128,j[H]=(N[pe+1280|0]+N[Q+1536|0]+N[he+1792|0]>>16)-128;G=fe(_,u,G,t,n),re=fe(S,d,re,r,i),ae=fe(j,d,ae,r,i),ce+=32}et+=8}if(g>=0){var Fe=[];Fe[1]=g+1,Fe[0]=(1<<g+1)-1,ee(Fe)}return Y(65497),new Uint8Array(v)},e=e||50,function(){for(var R=String.fromCharCode,z=0;z<256;z++)A[z]=R(z)}(),t=ne(E,C),r=ne(O,U),n=ne(L,I),i=ne(V,ie),function(){for(var R=1,z=2,G=1;G<=15;G++){for(var re=R;re<z;re++)p[32767+re]=G,f[32767+re]=[],f[32767+re][1]=G,f[32767+re][0]=re;for(var ae=-(z-1);ae<=-R;ae++)p[32767+ae]=G,f[32767+ae]=[],f[32767+ae][1]=G,f[32767+ae][0]=z-1+ae;R<<=1,z<<=1}}(),function(){for(var R=0;R<256;R++)N[R]=19595*R,N[R+256|0]=38470*R,N[R+512|0]=7471*R+32768,N[R+768|0]=-11059*R,N[R+1024|0]=-21709*R,N[R+1280|0]=32768*R+8421375,N[R+1536|0]=-27439*R,N[R+1792|0]=-5329*R}(),te(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ra(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function f4(e){function t(C){if(!C)throw Error("assert :P")}function r(C,L,I){for(var O=0;4>O;O++)if(C[L+O]!=I.charCodeAt(O))return!0;return!1}function n(C,L,I,O,U){for(var V=0;V<U;V++)C[L+V]=I[O+V]}function i(C,L,I,O){for(var U=0;U<O;U++)C[L+U]=I}function a(C){return new Int32Array(C)}function s(C,L){for(var I=[],O=0;O<C;O++)I.push(new L);return I}function o(C,L){var I=[];return function O(U,V,ie){for(var ne=ie[V],ee=0;ee<ne&&(U.push(ie.length>V+1?[]:new L),!(ie.length<V+1));ee++)O(U[ee],V+1,ie)}(I,0,C),I}var c=function(){var C=this;function L(m,w){for(var P=1<<w-1>>>0;m&P;)P>>>=1;return P?(m&P-1)+P:m}function I(m,w,P,T,F){t(!(T%P));do m[w+(T-=P)]=F;while(0<T)}function O(m,w,P,T,F){if(t(2328>=F),512>=F)var B=a(512);else if((B=a(F))==null)return 0;return function($,W,K,J,le,xe){var X,de,ve=W,_e=1<<K,ye=a(16),Ne=a(16);for(t(le!=0),t(J!=null),t($!=null),t(0<K),de=0;de<le;++de){if(15<J[de])return 0;++ye[J[de]]}if(ye[0]==le)return 0;for(Ne[1]=0,X=1;15>X;++X){if(ye[X]>1<<X)return 0;Ne[X+1]=Ne[X]+ye[X]}for(de=0;de<le;++de)X=J[de],0<J[de]&&(xe[Ne[X]++]=de);if(Ne[15]==1)return(J=new U).g=0,J.value=xe[0],I($,ve,1,_e,J),_e;var Ae,Le=-1,Te=_e-1,it=0,ze=1,At=1,Ze=1<<K;for(de=0,X=1,le=2;X<=K;++X,le<<=1){if(ze+=At<<=1,0>(At-=ye[X]))return 0;for(;0<ye[X];--ye[X])(J=new U).g=X,J.value=xe[de++],I($,ve+it,le,Ze,J),it=L(it,X)}for(X=K+1,le=2;15>=X;++X,le<<=1){if(ze+=At<<=1,0>(At-=ye[X]))return 0;for(;0<ye[X];--ye[X]){if(J=new U,(it&Te)!=Le){for(ve+=Ze,Ae=1<<(Le=X)-K;15>Le&&!(0>=(Ae-=ye[Le]));)++Le,Ae<<=1;_e+=Ze=1<<(Ae=Le-K),$[W+(Le=it&Te)].g=Ae+K,$[W+Le].value=ve-W-Le}J.g=X-K,J.value=xe[de++],I($,ve+(it>>K),le,Ze,J),it=L(it,X)}}return ze!=2*Ne[15]-1?0:_e}(m,w,P,T,F,B)}function U(){this.value=this.g=0}function V(){this.value=this.g=0}function ie(){this.G=s(5,U),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(nc,V)}function ne(m,w,P,T){t(m!=null),t(w!=null),t(2147483648>T),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=w,m.pa=P,m.Jd=w,m.Yc=P+T,m.Zc=4<=T?P+T-4+1:P,pe(m)}function ee(m,w){for(var P=0;0<w--;)P|=he(m,128)<<w;return P}function q(m,w){var P=ee(m,w);return Q(m)?-P:P}function Y(m,w,P,T){var F,B=0;for(t(m!=null),t(w!=null),t(4294967288>T),m.Sb=T,m.Ra=0,m.u=0,m.h=0,4<T&&(T=4),F=0;F<T;++F)B+=w[P+F]<<8*F;m.Ra=B,m.bb=T,m.oa=w,m.pa=P}function fe(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<zo-8>>>0,++m.bb,m.u-=8;re(m)&&(m.h=1,m.u=0)}function te(m,w){if(t(0<=w),!m.h&&w<=Di){var P=G(m)&Li[w];return m.u+=w,fe(m),P}return m.h=1,m.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(m){return m.Ra>>>(m.u&zo-1)>>>0}function re(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>zo}function ae(m,w){m.u=w,m.h=re(m)}function ce(m){m.u>=Gs&&(t(m.u>=Gs),fe(m))}function pe(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function Q(m){return ee(m,1)}function he(m,w){var P=m.Ca;0>m.b&&pe(m);var T=m.b,F=P*w>>>8,B=(m.I>>>T>F)+0;for(B?(P-=F,m.I-=F+1<<T>>>0):P=F+1,T=P,F=0;256<=T;)F+=8,T>>=8;return T=7^F+qo[T],m.b-=T,m.Ca=(P<<T)-1,B}function oe(m,w,P){m[w+0]=P>>24&255,m[w+1]=P>>16&255,m[w+2]=P>>8&255,m[w+3]=255&P}function ue(m,w){return m[w+0]|m[w+1]<<8}function Ce(m,w){return ue(m,w)|m[w+2]<<16}function Ee(m,w){return ue(m,w)|ue(m,w+2)<<16}function H(m,w){var P=1<<w;return t(m!=null),t(0<w),m.X=a(P),m.X==null?0:(m.Mb=32-w,m.Xa=w,1)}function je(m,w){t(m!=null),t(w!=null),t(m.Xa==w.Xa),n(w.X,0,m.X,0,1<<w.Xa)}function Je(){this.X=[],this.Xa=this.Mb=0}function De(m,w,P,T){t(P!=null),t(T!=null);var F=P[0],B=T[0];return F==0&&(F=(m*B+w/2)/w),B==0&&(B=(w*F+m/2)/m),0>=F||0>=B?0:(P[0]=F,T[0]=B,1)}function Se(m,w){return m+(1<<w)-1>>>w}function et(m,w){return((4278255360&m)+(4278255360&w)>>>0&4278255360)+((16711935&m)+(16711935&w)>>>0&16711935)>>>0}function Fe(m,w){C[w]=function(P,T,F,B,$,W,K){var J;for(J=0;J<$;++J){var le=C[m](W[K+J-1],F,B+J);W[K+J]=et(P[T+J],le)}}}function Ke(){this.ud=this.hd=this.jd=0}function tt(m,w){return((4278124286&(m^w))>>>1)+(m&w)>>>0}function mt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function vt(m,w){return mt(m+(m-w+.5>>1))}function Xe(m,w,P){return Math.abs(w-P)-Math.abs(m-P)}function ot(m,w,P,T,F,B,$){for(T=B[$-1],P=0;P<F;++P)B[$+P]=T=et(m[w+P],T)}function yt(m,w,P,T,F){var B;for(B=0;B<P;++B){var $=m[w+B],W=$>>8&255,K=16711935&(K=(K=16711935&$)+((W<<16)+W));T[F+B]=(4278255360&$)+K>>>0}}function Ge(m,w){w.jd=255&m,w.hd=m>>8&255,w.ud=m>>16&255}function bt(m,w,P,T,F,B){var $;for($=0;$<T;++$){var W=w[P+$],K=W>>>8,J=W,le=255&(le=(le=W>>>16)+((m.jd<<24>>24)*(K<<24>>24)>>>5));J=255&(J=(J+=(m.hd<<24>>24)*(K<<24>>24)>>>5)+((m.ud<<24>>24)*(le<<24>>24)>>>5)),F[B+$]=(4278255360&W)+(le<<16)+J}}function qe(m,w,P,T,F){C[w]=function(B,$,W,K,J,le,xe,X,de){for(K=xe;K<X;++K)for(xe=0;xe<de;++xe)J[le++]=F(W[T(B[$++])])},C[m]=function(B,$,W,K,J,le,xe){var X=8>>B.b,de=B.Ea,ve=B.K[0],_e=B.w;if(8>X)for(B=(1<<B.b)-1,_e=(1<<X)-1;$<W;++$){var ye,Ne=0;for(ye=0;ye<de;++ye)ye&B||(Ne=T(K[J++])),le[xe++]=F(ve[Ne&_e]),Ne>>=X}else C["VP8LMapColor"+P](K,J,ve,_e,le,xe,$,W,de)}}function zt(m,w,P,T,F){for(P=w+P;w<P;){var B=m[w++];T[F++]=B>>16&255,T[F++]=B>>8&255,T[F++]=255&B}}function Pt(m,w,P,T,F){for(P=w+P;w<P;){var B=m[w++];T[F++]=B>>16&255,T[F++]=B>>8&255,T[F++]=255&B,T[F++]=B>>24&255}}function Nt(m,w,P,T,F){for(P=w+P;w<P;){var B=($=m[w++])>>16&240|$>>12&15,$=240&$|$>>28&15;T[F++]=B,T[F++]=$}}function Ct(m,w,P,T,F){for(P=w+P;w<P;){var B=($=m[w++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;T[F++]=B,T[F++]=$}}function wr(m,w,P,T,F){for(P=w+P;w<P;){var B=m[w++];T[F++]=255&B,T[F++]=B>>8&255,T[F++]=B>>16&255}}function st(m,w,P,T,F,B){if(B==0)for(P=w+P;w<P;)oe(T,((B=m[w++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),F+=32;else n(T,F,m,w,P)}function lr(m,w){C[w][0]=C[m+"0"],C[w][1]=C[m+"1"],C[w][2]=C[m+"2"],C[w][3]=C[m+"3"],C[w][4]=C[m+"4"],C[w][5]=C[m+"5"],C[w][6]=C[m+"6"],C[w][7]=C[m+"7"],C[w][8]=C[m+"8"],C[w][9]=C[m+"9"],C[w][10]=C[m+"10"],C[w][11]=C[m+"11"],C[w][12]=C[m+"12"],C[w][13]=C[m+"13"],C[w][14]=C[m+"0"],C[w][15]=C[m+"0"]}function dt(m){return m==Fx||m==Bx||m==km||m==$x}function jt(){this.eb=[],this.size=this.A=this.fb=0}function _r(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ot(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jt,this.f.kb=new _r,this.sd=null}function lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ql(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Yn(m,w){var P=m.T,T=w.ba.f.RGBA,F=T.eb,B=T.fb+m.ka*T.A,$=ua[w.ba.S],W=m.y,K=m.O,J=m.f,le=m.N,xe=m.ea,X=m.W,de=w.cc,ve=w.dc,_e=w.Mc,ye=w.Nc,Ne=m.ka,Ae=m.ka+m.T,Le=m.U,Te=Le+1>>1;for(Ne==0?$(W,K,null,null,J,le,xe,X,J,le,xe,X,F,B,null,null,Le):($(w.ec,w.fc,W,K,de,ve,_e,ye,J,le,xe,X,F,B-T.A,F,B,Le),++P);Ne+2<Ae;Ne+=2)de=J,ve=le,_e=xe,ye=X,le+=m.Rc,X+=m.Rc,B+=2*T.A,$(W,(K+=2*m.fa)-m.fa,W,K,de,ve,_e,ye,J,le,xe,X,F,B-T.A,F,B,Le);return K+=m.fa,m.j+Ae<m.o?(n(w.ec,w.fc,W,K,Le),n(w.cc,w.dc,J,le,Te),n(w.Mc,w.Nc,xe,X,Te),P--):1&Ae||$(W,K,null,null,J,le,xe,X,J,le,xe,X,F,B+T.A,null,null,Le),P}function Ds(m,w,P){var T=m.F,F=[m.J];if(T!=null){var B=m.U,$=w.ba.S,W=$==Nm||$==km;w=w.ba.f.RGBA;var K=[0],J=m.ka;K[0]=m.T,m.Kb&&(J==0?--K[0]:(--J,F[0]-=m.width),m.j+m.ka+m.T==m.o&&(K[0]=m.o-m.j-J));var le=w.eb;J=w.fb+J*w.A,m=DS(T,F[0],m.width,B,K,le,J+(W?0:3),w.A),t(P==K),m&&dt($)&&If(le,J,W,B,K,w.A)}return 0}function es(m){var w=m.ma,P=w.ba.S,T=11>P,F=P==jm||P==Sm||P==Nm||P==Mx||P==12||dt(P);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Nf(w.Oa,m,F?11:12))return 0;if(F&&dt(P)&&_f(),m.da)alert("todo:use_scaling");else{if(T){if(w.Ib=ql,m.Kb){if(P=m.U+1>>1,w.memory=a(m.U+2*P),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+m.U,w.Mc=w.cc,w.Nc=w.dc+P,w.Ib=Yn,_f()}}else alert("todo:EmitYUV");F&&(w.Jb=Ds,T&&Oa())}if(T&&!XS){for(m=0;256>m;++m)LM[m]=89858*(m-128)+Em>>Am,MM[m]=-22014*(m-128)+Em,RM[m]=-45773*(m-128),DM[m]=113618*(m-128)+Em>>Am;for(m=Df;m<qx;++m)w=76283*(m-16)+Em>>Am,FM[m-Df]=ns(w,255),BM[m-Df]=ns(w+8>>4,15);XS=1}return 1}function ct(m){var w=m.ma,P=m.U,T=m.T;return t(!(1&m.ka)),0>=P||0>=T?0:(P=w.Ib(m,w),w.Jb!=null&&w.Jb(m,w,P),w.Dc+=P,1)}function Rs(m){m.ma.memory=null}function Ms(m,w,P,T){return te(m,8)!=47?0:(w[0]=te(m,14)+1,P[0]=te(m,14)+1,T[0]=te(m,1),te(m,3)!=0?0:!m.h)}function ra(m,w){if(4>m)return m+1;var P=m-2>>1;return(2+(1&m)<<P)+te(w,P)+1}function na(m,w){return 120<w?w-120:1<=(P=((P=bM[w-1])>>4)*m+(8-(15&P)))?P:1;var P}function Dr(m,w,P){var T=G(P),F=m[w+=255&T].g-8;return 0<F&&(ae(P,P.u+8),T=G(P),w+=m[w].value,w+=T&(1<<F)-1),ae(P,P.u+m[w].g),m[w].value}function Sn(m,w,P){return P.g+=m.g,P.value+=m.value<<w>>>0,t(8>=P.g),m.g}function Dn(m,w,P){var T=m.xc;return t((w=T==0?0:m.vc[m.md*(P>>T)+(w>>T)])<m.Wb),m.Ya[w]}function Wl(m,w,P,T){var F=m.ab,B=m.c*w,$=m.C;w=$+w;var W=P,K=T;for(T=m.Ta,P=m.Ua;0<F--;){var J=m.gc[F],le=$,xe=w,X=W,de=K,ve=(K=T,W=P,J.Ea);switch(t(le<xe),t(xe<=J.nc),J.hc){case 2:Vr(X,de,(xe-le)*ve,K,W);break;case 0:var _e=le,ye=xe,Ne=K,Ae=W,Le=(Ze=J).Ea;_e==0&&(Af(X,de,null,null,1,Ne,Ae),ot(X,de+1,0,0,Le-1,Ne,Ae+1),de+=Le,Ae+=Le,++_e);for(var Te=1<<Ze.b,it=Te-1,ze=Se(Le,Ze.b),At=Ze.K,Ze=Ze.w+(_e>>Ze.b)*ze;_e<ye;){var Lt=At,pn=Ze,Et=1;for(Au(X,de,Ne,Ae-Le,1,Ne,Ae);Et<Le;){var Qe=(Et&~it)+Te;Qe>Le&&(Qe=Le),(0,Pf[Lt[pn++]>>8&15])(X,de+ +Et,Ne,Ae+Et-Le,Qe-Et,Ne,Ae+Et),Et=Qe}de+=Le,Ae+=Le,++_e&it||(Ze+=ze)}xe!=J.nc&&n(K,W-ve,K,W+(xe-le-1)*ve,ve);break;case 1:for(ve=X,ye=de,Le=(X=J.Ea)-(Ae=X&~(Ne=(de=1<<J.b)-1)),_e=Se(X,J.b),Te=J.K,J=J.w+(le>>J.b)*_e;le<xe;){for(it=Te,ze=J,At=new Ke,Ze=ye+Ae,Lt=ye+X;ye<Ze;)Ge(it[ze++],At),Cf(At,ve,ye,de,K,W),ye+=de,W+=de;ye<Lt&&(Ge(it[ze++],At),Cf(At,ve,ye,Le,K,W),ye+=Le,W+=Le),++le&Ne||(J+=_e)}break;case 3:if(X==K&&de==W&&0<J.b){for(ye=K,X=ve=W+(xe-le)*ve-(Ae=(xe-le)*Se(J.Ea,J.b)),de=K,Ne=W,_e=[],Ae=(Le=Ae)-1;0<=Ae;--Ae)_e[Ae]=de[Ne+Ae];for(Ae=Le-1;0<=Ae;--Ae)ye[X+Ae]=_e[Ae];xm(J,le,xe,K,ve,K,W)}else xm(J,le,xe,X,de,K,W)}W=T,K=P}K!=P&&n(T,P,W,K,B)}function Fo(m,w){var P=m.V,T=m.Ba+m.c*m.C,F=w-m.C;if(t(w<=m.l.o),t(16>=F),0<F){var B=m.l,$=m.Ta,W=m.Ua,K=B.width;if(Wl(m,F,P,T),F=W=[W],t((P=m.C)<(T=w)),t(B.v<B.va),T>B.o&&(T=B.o),P<B.j){var J=B.j-P;P=B.j,F[0]+=J*K}if(P>=T?P=0:(F[0]+=4*B.v,B.ka=P-B.j,B.U=B.va-B.v,B.T=T-P,P=1),P){if(W=W[0],11>(P=m.ca).S){var le=P.f.RGBA,xe=(T=P.S,F=B.U,B=B.T,J=le.eb,le.A),X=B;for(le=le.fb+m.Ma*le.A;0<X--;){var de=$,ve=W,_e=F,ye=J,Ne=le;switch(T){case _m:Of(de,ve,_e,ye,Ne);break;case jm:Wo(de,ve,_e,ye,Ne);break;case Fx:Wo(de,ve,_e,ye,Ne),If(ye,Ne,0,_e,1,0);break;case zS:ic(de,ve,_e,ye,Ne);break;case Sm:st(de,ve,_e,ye,Ne,1);break;case Bx:st(de,ve,_e,ye,Ne,1),If(ye,Ne,0,_e,1,0);break;case Nm:st(de,ve,_e,ye,Ne,0);break;case km:st(de,ve,_e,ye,Ne,0),If(ye,Ne,1,_e,1,0);break;case Mx:Ho(de,ve,_e,ye,Ne);break;case $x:Ho(de,ve,_e,ye,Ne),LS(ye,Ne,_e,1,0);break;case qS:Vo(de,ve,_e,ye,Ne);break;default:t(0)}W+=K,le+=xe}m.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=P.height)}}m.C=w,t(m.C<=m.i)}function Aa(m){var w;if(0<m.ua)return 0;for(w=0;w<m.Wb;++w){var P=m.Ya[w].G,T=m.Ya[w].H;if(0<P[1][T[1]+0].g||0<P[2][T[2]+0].g||0<P[3][T[3]+0].g)return 0}return 1}function ts(m,w,P,T,F,B){if(m.Z!=0){var $=m.qd,W=m.rd;for(t(Yo[m.Z]!=null);w<P;++w)Yo[m.Z]($,W,T,F,T,F,B),$=T,W=F,F+=B;m.qd=$,m.rd=W}}function Ea(m,w){var P=m.l.ma,T=P.Z==0||P.Z==1?m.l.j:m.C;if(T=m.C<T?T:m.C,t(w<=m.l.o),w>T){var F=m.l.width,B=P.ca,$=P.tb+F*T,W=m.V,K=m.Ba+m.c*T,J=m.gc;t(m.ab==1),t(J[0].hc==3),os(J[0],T,w,W,K,B,$),ts(P,T,w,B,$,F)}m.C=m.Ma=w}function Pa(m,w,P,T,F,B,$){var W=m.$/T,K=m.$%T,J=m.m,le=m.s,xe=P+m.$,X=xe;F=P+T*F;var de=P+T*B,ve=280+le.ua,_e=m.Pb?W:16777216,ye=0<le.ua?le.Wa:null,Ne=le.wc,Ae=xe<de?Dn(le,K,W):null;t(m.C<B),t(de<=F);var Le=!1;e:for(;;){for(;Le||xe<de;){var Te=0;if(W>=_e){var it=xe-P;t((_e=m).Pb),_e.wd=_e.m,_e.xd=it,0<_e.s.ua&&je(_e.s.Wa,_e.s.vb),_e=W+_M}if(K&Ne||(Ae=Dn(le,K,W)),t(Ae!=null),Ae.Qb&&(w[xe]=Ae.qb,Le=!0),!Le)if(ce(J),Ae.jc){Te=J,it=w;var ze=xe,At=Ae.pd[G(Te)&nc-1];t(Ae.jc),256>At.g?(ae(Te,Te.u+At.g),it[ze]=At.value,Te=0):(ae(Te,Te.u+At.g-256),t(256<=At.value),Te=At.value),Te==0&&(Le=!0)}else Te=Dr(Ae.G[0],Ae.H[0],J);if(J.h)break;if(Le||256>Te){if(!Le)if(Ae.nd)w[xe]=(Ae.qb|Te<<8)>>>0;else{if(ce(J),Le=Dr(Ae.G[1],Ae.H[1],J),ce(J),it=Dr(Ae.G[2],Ae.H[2],J),ze=Dr(Ae.G[3],Ae.H[3],J),J.h)break;w[xe]=(ze<<24|Le<<16|Te<<8|it)>>>0}if(Le=!1,++xe,++K>=T&&(K=0,++W,$!=null&&W<=B&&!(W%16)&&$(m,W),ye!=null))for(;X<xe;)Te=w[X++],ye.X[(506832829*Te&4294967295)>>>ye.Mb]=Te}else if(280>Te){if(Te=ra(Te-256,J),it=Dr(Ae.G[4],Ae.H[4],J),ce(J),it=na(T,it=ra(it,J)),J.h)break;if(xe-P<it||F-xe<Te)break e;for(ze=0;ze<Te;++ze)w[xe+ze]=w[xe+ze-it];for(xe+=Te,K+=Te;K>=T;)K-=T,++W,$!=null&&W<=B&&!(W%16)&&$(m,W);if(t(xe<=F),K&Ne&&(Ae=Dn(le,K,W)),ye!=null)for(;X<xe;)Te=w[X++],ye.X[(506832829*Te&4294967295)>>>ye.Mb]=Te}else{if(!(Te<ve))break e;for(Le=Te-280,t(ye!=null);X<xe;)Te=w[X++],ye.X[(506832829*Te&4294967295)>>>ye.Mb]=Te;Te=xe,t(!(Le>>>(it=ye).Xa)),w[Te]=it.X[Le],Le=!0}Le||t(J.h==re(J))}if(m.Pb&&J.h&&xe<F)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&je(m.s.vb,m.s.Wa);else{if(J.h)break e;$!=null&&$(m,W>B?B:W),m.a=0,m.$=xe-P}return 1}return m.a=3,0}function ia(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var w=m.Wa;w!=null&&(w.X=null),m.vb=null,t(m!=null)}function Hl(){var m=new xt;return m==null?null:(m.a=0,m.xb=VS,lr("Predictor","VP8LPredictors"),lr("Predictor","VP8LPredictors_C"),lr("PredictorAdd","VP8LPredictorsAdd"),lr("PredictorAdd","VP8LPredictorsAdd_C"),Vr=yt,Cf=bt,Of=zt,Wo=Pt,Ho=Nt,Vo=Ct,ic=wr,C.VP8LMapColor32b=ss,C.VP8LMapColor8b=Ef,m)}function rs(m,w,P,T,F){var B=1,$=[m],W=[w],K=T.m,J=T.s,le=null,xe=0;e:for(;;){if(P)for(;B&&te(K,1);){var X=$,de=W,ve=T,_e=1,ye=ve.m,Ne=ve.gc[ve.ab],Ae=te(ye,2);if(ve.Oc&1<<Ae)B=0;else{switch(ve.Oc|=1<<Ae,Ne.hc=Ae,Ne.Ea=X[0],Ne.nc=de[0],Ne.K=[null],++ve.ab,t(4>=ve.ab),Ae){case 0:case 1:Ne.b=te(ye,3)+2,_e=rs(Se(Ne.Ea,Ne.b),Se(Ne.nc,Ne.b),0,ve,Ne.K),Ne.K=Ne.K[0];break;case 3:var Le,Te=te(ye,8)+1,it=16<Te?0:4<Te?1:2<Te?2:3;if(X[0]=Se(Ne.Ea,it),Ne.b=it,Le=_e=rs(Te,1,0,ve,Ne.K)){var ze,At=Te,Ze=Ne,Lt=1<<(8>>Ze.b),pn=a(Lt);if(pn==null)Le=0;else{var Et=Ze.K[0],Qe=Ze.w;for(pn[0]=Ze.K[0][0],ze=1;ze<1*At;++ze)pn[ze]=et(Et[Qe+ze],pn[ze-1]);for(;ze<4*Lt;++ze)pn[ze]=0;Ze.K[0]=null,Ze.K[0]=pn,Le=1}}_e=Le;break;case 2:break;default:t(0)}B=_e}}if($=$[0],W=W[0],B&&te(K,1)&&!(B=1<=(xe=te(K,4))&&11>=xe)){T.a=3;break e}var Me;if(Me=B)t:{var Gr,St,Mt,vr=T,Fn=$,ui=W,Rr=xe,Jn=P,di=vr.m,mn=vr.s,Bt=[null],Jt=1,Mr=0,Xt=wM[Rr];r:for(;;){if(Jn&&te(di,1)){var Bn=te(di,3)+2,Ia=Se(Fn,Bn),Yr=Se(ui,Bn),_i=Ia*Yr;if(!rs(Ia,Yr,0,vr,Bt))break r;for(Bt=Bt[0],mn.xc=Bn,Gr=0;Gr<_i;++Gr){var ir=Bt[Gr]>>8&65535;Bt[Gr]=ir,ir>=Jt&&(Jt=ir+1)}}if(di.h)break r;for(St=0;5>St;++St){var vn=WS[St];!St&&0<Rr&&(vn+=1<<Rr),Mr<vn&&(Mr=vn)}var Mi=s(Jt*Xt,U),fi=Jt,Fi=s(fi,ie);if(Fi==null)var Bi=null;else t(65536>=fi),Bi=Fi;var ji=a(Mr);if(Bi==null||ji==null||Mi==null){vr.a=1;break r}var $i=Mi;for(Gr=Mt=0;Gr<Jt;++Gr){var ur=Bi[Gr],Ui=ur.G,La=ur.H,sc=0,Xs=1,$n=0;for(St=0;5>St;++St){vn=WS[St],Ui[St]=$i,La[St]=Mt,!St&&0<Rr&&(vn+=1<<Rr);i:{var Cm,Wx=vn,Om=vr,Rf=ji,zM=$i,qM=Mt,Hx=0,Jo=Om.m,WM=te(Jo,1);if(i(Rf,0,0,Wx),WM){var HM=te(Jo,1)+1,VM=te(Jo,1),eN=te(Jo,VM==0?1:8);Rf[eN]=1,HM==2&&(Rf[eN=te(Jo,8)]=1);var Tm=1}else{var tN=a(19),rN=te(Jo,4)+4;if(19<rN){Om.a=3;var Im=0;break i}for(Cm=0;Cm<rN;++Cm)tN[xM[Cm]]=te(Jo,3);var Vx=void 0,Mf=void 0,nN=Om,KM=tN,Lm=Wx,iN=Rf,Kx=0,Xo=nN.m,aN=8,sN=s(128,U);n:for(;O(sN,0,7,KM,19);){if(te(Xo,1)){var GM=2+2*te(Xo,3);if((Vx=2+te(Xo,GM))>Lm)break n}else Vx=Lm;for(Mf=0;Mf<Lm&&Vx--;){ce(Xo);var oN=sN[0+(127&G(Xo))];ae(Xo,Xo.u+oN.g);var Pu=oN.value;if(16>Pu)iN[Mf++]=Pu,Pu!=0&&(aN=Pu);else{var YM=Pu==16,lN=Pu-16,JM=gM[lN],cN=te(Xo,vM[lN])+JM;if(Mf+cN>Lm)break n;for(var XM=YM?aN:0;0<cN--;)iN[Mf++]=XM}}Kx=1;break n}Kx||(nN.a=3),Tm=Kx}(Tm=Tm&&!Jo.h)&&(Hx=O(zM,qM,8,Rf,Wx)),Tm&&Hx!=0?Im=Hx:(Om.a=3,Im=0)}if(Im==0)break r;if(Xs&&yM[St]==1&&(Xs=$i[Mt].g==0),sc+=$i[Mt].g,Mt+=Im,3>=St){var Ff,Gx=ji[0];for(Ff=1;Ff<vn;++Ff)ji[Ff]>Gx&&(Gx=ji[Ff]);$n+=Gx}}if(ur.nd=Xs,ur.Qb=0,Xs&&(ur.qb=(Ui[3][La[3]+0].value<<24|Ui[1][La[1]+0].value<<16|Ui[2][La[2]+0].value)>>>0,sc==0&&256>Ui[0][La[0]+0].value&&(ur.Qb=1,ur.qb+=Ui[0][La[0]+0].value<<8)),ur.jc=!ur.Qb&&6>$n,ur.jc){var Dm,Zs=ur;for(Dm=0;Dm<nc;++Dm){var Zo=Dm,Qo=Zs.pd[Zo],Rm=Zs.G[0][Zs.H[0]+Zo];256<=Rm.value?(Qo.g=Rm.g+256,Qo.value=Rm.value):(Qo.g=0,Qo.value=0,Zo>>=Sn(Rm,8,Qo),Zo>>=Sn(Zs.G[1][Zs.H[1]+Zo],16,Qo),Zo>>=Sn(Zs.G[2][Zs.H[2]+Zo],0,Qo),Sn(Zs.G[3][Zs.H[3]+Zo],24,Qo))}}}mn.vc=Bt,mn.Wb=Jt,mn.Ya=Bi,mn.yc=Mi,Me=1;break t}Me=0}if(!(B=Me)){T.a=3;break e}if(0<xe){if(J.ua=1<<xe,!H(J.Wa,xe)){T.a=1,B=0;break e}}else J.ua=0;var Yx=T,uN=$,ZM=W,Jx=Yx.s,Xx=Jx.xc;if(Yx.c=uN,Yx.i=ZM,Jx.md=Se(uN,Xx),Jx.wc=Xx==0?-1:(1<<Xx)-1,P){T.xb=PM;break e}if((le=a($*W))==null){T.a=1,B=0;break e}B=(B=Pa(T,le,0,$,W,W,null))&&!K.h;break e}return B?(F!=null?F[0]=le:(t(le==null),t(P)),T.$=0,P||ia(J)):ia(J),B}function Vl(m,w){var P=m.c*m.i,T=P+w+16*w;return t(m.c<=w),m.V=a(T),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+P+w,1)}function gu(m,w){var P=m.C,T=w-P,F=m.V,B=m.Ba+m.c*P;for(t(w<=m.l.o);0<T;){var $=16<T?16:T,W=m.l.ma,K=m.l.width,J=K*$,le=W.ca,xe=W.tb+K*P,X=m.Ta,de=m.Ua;Wl(m,$,F,B),RS(X,de,le,xe,J),ts(W,P,P+$,le,xe,K),T-=$,F+=$*m.c,P+=$}t(P==w),m.C=m.Ma=w}function yu(){this.ub=this.yd=this.td=this.Rb=0}function xu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bx(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function df(){this.Yb=function(){var m=[];return function w(P,T,F){for(var B=F[T],$=0;$<B&&(P.push(F.length>T+1?[]:0),!(F.length<T+1));$++)w(P[$],T+1,F)}(m,0,[3,11]),m}()}function tm(){this.jb=a(3),this.Wc=o([4,8],df),this.Xc=o([4,17],df)}function rm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function aa(){this.ld=this.La=this.dd=this.tc=0}function ff(){this.Na=this.la=0}function nm(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hf(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function im(){this.uc=this.M=this.Nb=0,this.wa=Array(new aa),this.Y=0,this.ya=Array(new hf),this.aa=0,this.l=new bu}function am(){this.y=a(16),this.f=a(8),this.ea=a(8)}function sm(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new yu,this.Kc=new xu,this.ed=new rm,this.Qa=new bx,this.Ic=this.$c=this.Aa=0,this.D=new im,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,R),this.ia=0,this.pb=s(4,nm),this.Pa=new tm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new am),this.Hd=0,this.rb=Array(new ff),this.sb=0,this.wa=Array(new aa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hf),this.L=this.aa=0,this.gd=o([4,2],aa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ns(m,w){return 0>m?0:m>w?w:m}function bu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wx(){var m=new sm;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Lf||(Lf=wu)),m}function tn(m,w,P){return m.a==0&&(m.a=w,m.sc=P,m.cb=0),0}function om(m,w,P){return 3<=P&&m[w+0]==157&&m[w+1]==1&&m[w+2]==42}function is(m,w){if(m==null)return 0;if(m.a=0,m.sc="OK",w==null)return tn(m,2,"null VP8Io passed to VP8GetHeaders()");var P=w.data,T=w.w,F=w.ha;if(4>F)return tn(m,7,"Truncated header.");var B=P[T+0]|P[T+1]<<8|P[T+2]<<16,$=m.Od;if($.Rb=!(1&B),$.td=B>>1&7,$.yd=B>>4&1,$.ub=B>>5,3<$.td)return tn(m,3,"Incorrect keyframe parameters.");if(!$.yd)return tn(m,4,"Frame not displayable.");T+=3,F-=3;var W=m.Kc;if($.Rb){if(7>F)return tn(m,7,"cannot parse picture header");if(!om(P,T,F))return tn(m,3,"Bad code word");W.c=16383&(P[T+4]<<8|P[T+3]),W.Td=P[T+4]>>6,W.i=16383&(P[T+6]<<8|P[T+5]),W.Ud=P[T+6]>>6,T+=7,F-=7,m.za=W.c+15>>4,m.Ub=W.i+15>>4,w.width=W.c,w.height=W.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((B=m.Pa).jb,0,255,B.jb.length),t((B=m.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,i(B.Zb,0,0,B.Zb.length),i(B.Lb,0,0,B.Lb)}if($.ub>F)return tn(m,7,"bad partition length");ne(B=m.m,P,T,$.ub),T+=$.ub,F-=$.ub,$.Rb&&(W.Ld=Q(B),W.Kd=Q(B)),W=m.Qa;var K,J=m.Pa;if(t(B!=null),t(W!=null),W.Cb=Q(B),W.Cb){if(W.Bb=Q(B),Q(B)){for(W.Fb=Q(B),K=0;4>K;++K)W.Zb[K]=Q(B)?q(B,7):0;for(K=0;4>K;++K)W.Lb[K]=Q(B)?q(B,6):0}if(W.Bb)for(K=0;3>K;++K)J.jb[K]=Q(B)?ee(B,8):255}else W.Bb=0;if(B.Ka)return tn(m,3,"cannot parse segment header");if((W=m.ed).zd=Q(B),W.Tb=ee(B,6),W.wb=ee(B,3),W.Pc=Q(B),W.Pc&&Q(B)){for(J=0;4>J;++J)Q(B)&&(W.vd[J]=q(B,6));for(J=0;4>J;++J)Q(B)&&(W.od[J]=q(B,6))}if(m.L=W.Tb==0?0:W.zd?1:2,B.Ka)return tn(m,3,"cannot parse filter header");var le=F;if(F=K=T,T=K+le,W=le,m.Xb=(1<<ee(m.m,2))-1,le<3*(J=m.Xb))P=7;else{for(K+=3*J,W-=3*J,le=0;le<J;++le){var xe=P[F+0]|P[F+1]<<8|P[F+2]<<16;xe>W&&(xe=W),ne(m.Jc[+le],P,K,xe),K+=xe,W-=xe,F+=3}ne(m.Jc[+J],P,K,W),P=K<T?0:5}if(P!=0)return tn(m,P,"cannot parse partitions");for(P=ee(K=m.m,7),F=Q(K)?q(K,4):0,T=Q(K)?q(K,4):0,W=Q(K)?q(K,4):0,J=Q(K)?q(K,4):0,K=Q(K)?q(K,4):0,le=m.Qa,xe=0;4>xe;++xe){if(le.Cb){var X=le.Zb[xe];le.Fb||(X+=P)}else{if(0<xe){m.pb[xe]=m.pb[0];continue}X=P}var de=m.pb[xe];de.Sc[0]=Ux[ns(X+F,127)],de.Sc[1]=zx[ns(X+0,127)],de.Eb[0]=2*Ux[ns(X+T,127)],de.Eb[1]=101581*zx[ns(X+W,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=Ux[ns(X+J,117)],de.Qc[1]=zx[ns(X+K,127)],de.lc=X+K}if(!$.Rb)return tn(m,4,"Not a key frame.");for(Q(B),$=m.Pa,P=0;4>P;++P){for(F=0;8>F;++F)for(T=0;3>T;++T)for(W=0;11>W;++W)J=he(B,AM[P][F][T][W])?ee(B,8):NM[P][F][T][W],$.Wc[P][F].Yb[T][W]=J;for(F=0;17>F;++F)$.Xc[P][F]=$.Wc[P][EM[F]]}return m.kc=Q(B),m.kc&&(m.Bd=ee(B,8)),m.cb=1}function wu(m,w,P,T,F,B,$){var W=w[F].Yb[P];for(P=0;16>F;++F){if(!he(m,W[P+0]))return F;for(;!he(m,W[P+1]);)if(W=w[++F].Yb[0],P=0,F==16)return 16;var K=w[F+1].Yb;if(he(m,W[P+2])){var J=m,le=0;if(he(J,(X=W)[(xe=P)+3]))if(he(J,X[xe+6])){for(W=0,xe=2*(le=he(J,X[xe+8]))+(X=he(J,X[xe+9+le])),le=0,X=jM[xe];X[W];++W)le+=le+he(J,X[W]);le+=3+(8<<xe)}else he(J,X[xe+7])?(le=7+2*he(J,165),le+=he(J,145)):le=5+he(J,159);else le=he(J,X[xe+4])?3+he(J,X[xe+5]):2;W=K[2]}else le=1,W=K[1];K=$+SM[F],0>(J=m).b&&pe(J);var xe,X=J.b,de=(xe=J.Ca>>1)-(J.I>>X)>>31;--J.b,J.Ca+=de,J.Ca|=1,J.I-=(xe+1&de)<<X,B[K]=((le^de)-de)*T[(0<F)+0]}return 16}function lm(m){var w=m.rb[m.sb-1];w.la=0,w.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function sa(m,w,P,T,F){F=m[w+P+32*T]+(F>>3),m[w+P+32*T]=-256&F?0>F?0:255:F}function dn(m,w,P,T,F,B){sa(m,w,0,P,T+F),sa(m,w,1,P,T+B),sa(m,w,2,P,T-B),sa(m,w,3,P,T-F)}function Fs(m){return(20091*m>>16)+m}function cm(m,w,P,T){var F,B=0,$=a(16);for(F=0;4>F;++F){var W=m[w+0]+m[w+8],K=m[w+0]-m[w+8],J=(35468*m[w+4]>>16)-Fs(m[w+12]),le=Fs(m[w+4])+(35468*m[w+12]>>16);$[B+0]=W+le,$[B+1]=K+J,$[B+2]=K-J,$[B+3]=W-le,B+=4,w++}for(F=B=0;4>F;++F)W=(m=$[B+0]+4)+$[B+8],K=m-$[B+8],J=(35468*$[B+4]>>16)-Fs($[B+12]),sa(P,T,0,0,W+(le=Fs($[B+4])+(35468*$[B+12]>>16))),sa(P,T,1,0,K+J),sa(P,T,2,0,K-J),sa(P,T,3,0,W-le),B++,T+=32}function _x(m,w,P,T){var F=m[w+0]+4,B=35468*m[w+4]>>16,$=Fs(m[w+4]),W=35468*m[w+1]>>16;dn(P,T,0,F+$,m=Fs(m[w+1]),W),dn(P,T,1,F+B,m,W),dn(P,T,2,F-B,m,W),dn(P,T,3,F-$,m,W)}function jx(m,w,P,T,F){cm(m,w,P,T),F&&cm(m,w+16,P,T+4)}function as(m,w,P,T){ac(m,w+0,P,T,1),ac(m,w+32,P,T+128,1)}function um(m,w,P,T){var F;for(m=m[w+0]+4,F=0;4>F;++F)for(w=0;4>w;++w)sa(P,T,w,F,m)}function dm(m,w,P,T){m[w+0]&&Gt(m,w+0,P,T),m[w+16]&&Gt(m,w+16,P,T+4),m[w+32]&&Gt(m,w+32,P,T+128),m[w+48]&&Gt(m,w+48,P,T+128+4)}function _u(m,w,P,T){var F,B=a(16);for(F=0;4>F;++F){var $=m[w+0+F]+m[w+12+F],W=m[w+4+F]+m[w+8+F],K=m[w+4+F]-m[w+8+F],J=m[w+0+F]-m[w+12+F];B[0+F]=$+W,B[8+F]=$-W,B[4+F]=J+K,B[12+F]=J-K}for(F=0;4>F;++F)$=(m=B[0+4*F]+3)+B[3+4*F],W=B[1+4*F]+B[2+4*F],K=B[1+4*F]-B[2+4*F],J=m-B[3+4*F],P[T+0]=$+W>>3,P[T+16]=J+K>>3,P[T+32]=$-W>>3,P[T+48]=J-K>>3,T+=64}function Kl(m,w,P){var T,F=w-32,B=Ri,$=255-m[F-1];for(T=0;T<P;++T){var W,K=B,J=$+m[w-1];for(W=0;W<P;++W)m[w+W]=K[J+m[F+W]];w+=32}}function Sx(m,w){Kl(m,w,4)}function Nx(m,w){Kl(m,w,8)}function kx(m,w){Kl(m,w,16)}function pf(m,w){var P;for(P=0;16>P;++P)n(m,w+32*P,m,w-32,16)}function fm(m,w){var P;for(P=16;0<P;--P)i(m,w,m[w-1],16),w+=32}function Ca(m,w,P){var T;for(T=0;16>T;++T)i(w,P+32*T,m,16)}function Ax(m,w){var P,T=16;for(P=0;16>P;++P)T+=m[w-1+32*P]+m[w+P-32];Ca(T>>5,m,w)}function Gl(m,w){var P,T=8;for(P=0;16>P;++P)T+=m[w-1+32*P];Ca(T>>4,m,w)}function mf(m,w){var P,T=8;for(P=0;16>P;++P)T+=m[w+P-32];Ca(T>>4,m,w)}function Ex(m,w){Ca(128,m,w)}function wt(m,w,P){return m+2*w+P+2>>2}function Px(m,w){var P,T=w-32;for(T=new Uint8Array([wt(m[T-1],m[T+0],m[T+1]),wt(m[T+0],m[T+1],m[T+2]),wt(m[T+1],m[T+2],m[T+3]),wt(m[T+2],m[T+3],m[T+4])]),P=0;4>P;++P)n(m,w+32*P,T,0,T.length)}function Cx(m,w){var P=m[w-1],T=m[w-1+32],F=m[w-1+64],B=m[w-1+96];oe(m,w+0,16843009*wt(m[w-1-32],P,T)),oe(m,w+32,16843009*wt(P,T,F)),oe(m,w+64,16843009*wt(T,F,B)),oe(m,w+96,16843009*wt(F,B,B))}function Ox(m,w){var P,T=4;for(P=0;4>P;++P)T+=m[w+P-32]+m[w-1+32*P];for(T>>=3,P=0;4>P;++P)i(m,w+32*P,T,4)}function Bs(m,w){var P=m[w-1+0],T=m[w-1+32],F=m[w-1+64],B=m[w-1-32],$=m[w+0-32],W=m[w+1-32],K=m[w+2-32],J=m[w+3-32];m[w+0+96]=wt(T,F,m[w-1+96]),m[w+1+96]=m[w+0+64]=wt(P,T,F),m[w+2+96]=m[w+1+64]=m[w+0+32]=wt(B,P,T),m[w+3+96]=m[w+2+64]=m[w+1+32]=m[w+0+0]=wt($,B,P),m[w+3+64]=m[w+2+32]=m[w+1+0]=wt(W,$,B),m[w+3+32]=m[w+2+0]=wt(K,W,$),m[w+3+0]=wt(J,K,W)}function $s(m,w){var P=m[w+1-32],T=m[w+2-32],F=m[w+3-32],B=m[w+4-32],$=m[w+5-32],W=m[w+6-32],K=m[w+7-32];m[w+0+0]=wt(m[w+0-32],P,T),m[w+1+0]=m[w+0+32]=wt(P,T,F),m[w+2+0]=m[w+1+32]=m[w+0+64]=wt(T,F,B),m[w+3+0]=m[w+2+32]=m[w+1+64]=m[w+0+96]=wt(F,B,$),m[w+3+32]=m[w+2+64]=m[w+1+96]=wt(B,$,W),m[w+3+64]=m[w+2+96]=wt($,W,K),m[w+3+96]=wt(W,K,K)}function Tx(m,w){var P=m[w-1+0],T=m[w-1+32],F=m[w-1+64],B=m[w-1-32],$=m[w+0-32],W=m[w+1-32],K=m[w+2-32],J=m[w+3-32];m[w+0+0]=m[w+1+64]=B+$+1>>1,m[w+1+0]=m[w+2+64]=$+W+1>>1,m[w+2+0]=m[w+3+64]=W+K+1>>1,m[w+3+0]=K+J+1>>1,m[w+0+96]=wt(F,T,P),m[w+0+64]=wt(T,P,B),m[w+0+32]=m[w+1+96]=wt(P,B,$),m[w+1+32]=m[w+2+96]=wt(B,$,W),m[w+2+32]=m[w+3+96]=wt($,W,K),m[w+3+32]=wt(W,K,J)}function Ix(m,w){var P=m[w+0-32],T=m[w+1-32],F=m[w+2-32],B=m[w+3-32],$=m[w+4-32],W=m[w+5-32],K=m[w+6-32],J=m[w+7-32];m[w+0+0]=P+T+1>>1,m[w+1+0]=m[w+0+64]=T+F+1>>1,m[w+2+0]=m[w+1+64]=F+B+1>>1,m[w+3+0]=m[w+2+64]=B+$+1>>1,m[w+0+32]=wt(P,T,F),m[w+1+32]=m[w+0+96]=wt(T,F,B),m[w+2+32]=m[w+1+96]=wt(F,B,$),m[w+3+32]=m[w+2+96]=wt(B,$,W),m[w+3+64]=wt($,W,K),m[w+3+96]=wt(W,K,J)}function ju(m,w){var P=m[w-1+0],T=m[w-1+32],F=m[w-1+64],B=m[w-1+96];m[w+0+0]=P+T+1>>1,m[w+2+0]=m[w+0+32]=T+F+1>>1,m[w+2+32]=m[w+0+64]=F+B+1>>1,m[w+1+0]=wt(P,T,F),m[w+3+0]=m[w+1+32]=wt(T,F,B),m[w+3+32]=m[w+1+64]=wt(F,B,B),m[w+3+64]=m[w+2+64]=m[w+0+96]=m[w+1+96]=m[w+2+96]=m[w+3+96]=B}function vf(m,w){var P=m[w-1+0],T=m[w-1+32],F=m[w-1+64],B=m[w-1+96],$=m[w-1-32],W=m[w+0-32],K=m[w+1-32],J=m[w+2-32];m[w+0+0]=m[w+2+32]=P+$+1>>1,m[w+0+32]=m[w+2+64]=T+P+1>>1,m[w+0+64]=m[w+2+96]=F+T+1>>1,m[w+0+96]=B+F+1>>1,m[w+3+0]=wt(W,K,J),m[w+2+0]=wt($,W,K),m[w+1+0]=m[w+3+32]=wt(P,$,W),m[w+1+32]=m[w+3+64]=wt(T,P,$),m[w+1+64]=m[w+3+96]=wt(F,T,P),m[w+1+96]=wt(B,F,T)}function Yl(m,w){var P;for(P=0;8>P;++P)n(m,w+32*P,m,w-32,8)}function Lx(m,w){var P;for(P=0;8>P;++P)i(m,w,m[w-1],8),w+=32}function Us(m,w,P){var T;for(T=0;8>T;++T)i(w,P+32*T,m,8)}function Dx(m,w){var P,T=8;for(P=0;8>P;++P)T+=m[w+P-32]+m[w-1+32*P];Us(T>>4,m,w)}function gf(m,w){var P,T=4;for(P=0;8>P;++P)T+=m[w+P-32];Us(T>>3,m,w)}function yf(m,w){var P,T=4;for(P=0;8>P;++P)T+=m[w-1+32*P];Us(T>>3,m,w)}function hm(m,w){Us(128,m,w)}function zs(m,w,P){var T=m[w-P],F=m[w+0],B=3*(F-T)+Rx[1020+m[w-2*P]-m[w+P]],$=wm[112+(B+4>>3)];m[w-P]=Ri[255+T+wm[112+(B+3>>3)]],m[w+0]=Ri[255+F-$]}function xf(m,w,P,T){var F=m[w+0],B=m[w+P];return ca[255+m[w-2*P]-m[w-P]]>T||ca[255+B-F]>T}function Su(m,w,P,T){return 4*ca[255+m[w-P]-m[w+0]]+ca[255+m[w-2*P]-m[w+P]]<=T}function bf(m,w,P,T,F){var B=m[w-3*P],$=m[w-2*P],W=m[w-P],K=m[w+0],J=m[w+P],le=m[w+2*P],xe=m[w+3*P];return 4*ca[255+W-K]+ca[255+$-J]>T?0:ca[255+m[w-4*P]-B]<=F&&ca[255+B-$]<=F&&ca[255+$-W]<=F&&ca[255+xe-le]<=F&&ca[255+le-J]<=F&&ca[255+J-K]<=F}function Jl(m,w,P,T){var F=2*T+1;for(T=0;16>T;++T)Su(m,w+T,P,F)&&zs(m,w+T,P)}function wf(m,w,P,T){var F=2*T+1;for(T=0;16>T;++T)Su(m,w+T*P,1,F)&&zs(m,w+T*P,1)}function pm(m,w,P,T){var F;for(F=3;0<F;--F)Jl(m,w+=4*P,P,T)}function mm(m,w,P,T){var F;for(F=3;0<F;--F)wf(m,w+=4,P,T)}function qs(m,w,P,T,F,B,$,W){for(B=2*B+1;0<F--;){if(bf(m,w,P,B,$))if(xf(m,w,P,W))zs(m,w,P);else{var K=m,J=w,le=P,xe=K[J-2*le],X=K[J-le],de=K[J+0],ve=K[J+le],_e=K[J+2*le],ye=27*(Ae=Rx[1020+3*(de-X)+Rx[1020+xe-ve]])+63>>7,Ne=18*Ae+63>>7,Ae=9*Ae+63>>7;K[J-3*le]=Ri[255+K[J-3*le]+Ae],K[J-2*le]=Ri[255+xe+Ne],K[J-le]=Ri[255+X+ye],K[J+0]=Ri[255+de-ye],K[J+le]=Ri[255+ve-Ne],K[J+2*le]=Ri[255+_e-Ae]}w+=T}}function Ws(m,w,P,T,F,B,$,W){for(B=2*B+1;0<F--;){if(bf(m,w,P,B,$))if(xf(m,w,P,W))zs(m,w,P);else{var K=m,J=w,le=P,xe=K[J-le],X=K[J+0],de=K[J+le],ve=wm[112+(4+(_e=3*(X-xe))>>3)],_e=wm[112+(_e+3>>3)],ye=ve+1>>1;K[J-2*le]=Ri[255+K[J-2*le]+ye],K[J-le]=Ri[255+xe+_e],K[J+0]=Ri[255+X-ve],K[J+le]=Ri[255+de-ye]}w+=T}}function vm(m,w,P,T,F,B){qs(m,w,P,1,16,T,F,B)}function Xl(m,w,P,T,F,B){qs(m,w,1,P,16,T,F,B)}function gm(m,w,P,T,F,B){var $;for($=3;0<$;--$)Ws(m,w+=4*P,P,1,16,T,F,B)}function k(m,w,P,T,F,B){var $;for($=3;0<$;--$)Ws(m,w+=4,1,P,16,T,F,B)}function M(m,w,P,T,F,B,$,W){qs(m,w,F,1,8,B,$,W),qs(P,T,F,1,8,B,$,W)}function Z(m,w,P,T,F,B,$,W){qs(m,w,1,F,8,B,$,W),qs(P,T,1,F,8,B,$,W)}function se(m,w,P,T,F,B,$,W){Ws(m,w+4*F,F,1,8,B,$,W),Ws(P,T+4*F,F,1,8,B,$,W)}function me(m,w,P,T,F,B,$,W){Ws(m,w+4,1,F,8,B,$,W),Ws(P,T+4,1,F,8,B,$,W)}function ke(){this.ba=new Ot,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Oe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ye(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rt(){this.ua=0,this.Wa=new Je,this.vb=new Je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new U}function xt(){this.xb=this.a=0,this.l=new bu,this.ca=new Ot,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rt,this.ab=0,this.gc=s(4,Ye),this.Oc=0}function kt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ft(m,w,P,T,F,B,$){for(m=m==null?0:m[w+0],w=0;w<$;++w)F[B+w]=m+P[T+w]&255,m=F[B+w]}function Pr(m,w,P,T,F,B,$){var W;if(m==null)Ft(null,null,P,T,F,B,$);else for(W=0;W<$;++W)F[B+W]=m[w+W]+P[T+W]&255}function rn(m,w,P,T,F,B,$){if(m==null)Ft(null,null,P,T,F,B,$);else{var W,K=m[w+0],J=K,le=K;for(W=0;W<$;++W)J=le+(K=m[w+W])-J,le=P[T+W]+(-256&J?0>J?0:255:J)&255,J=K,F[B+W]=le}}function cr(m,w,P,T){var F=w.width,B=w.o;if(t(m!=null&&w!=null),0>P||0>=T||P+T>B)return null;if(!m.Cc){if(m.ga==null){var $;if(m.ga=new kt,($=m.ga==null)||($=w.width*w.o,t(m.Gb.length==0),m.Gb=a($),m.Uc=0,m.Gb==null?$=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,$=1),$=!$),!$){$=m.ga;var W=m.Fa,K=m.P,J=m.qc,le=m.mb,xe=m.nb,X=K+1,de=J-1,ve=$.l;if(t(W!=null&&le!=null&&w!=null),Yo[0]=null,Yo[1]=Ft,Yo[2]=Pr,Yo[3]=rn,$.ca=le,$.tb=xe,$.c=w.width,$.i=w.height,t(0<$.c&&0<$.i),1>=J)w=0;else if($.$a=3&W[K+0],$.Z=W[K+0]>>2&3,$.Lc=W[K+0]>>4&3,K=W[K+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||K)w=0;else if(ve.put=ct,ve.ac=es,ve.bc=Rs,ve.ma=$,ve.width=w.width,ve.height=w.height,ve.Da=w.Da,ve.v=w.v,ve.va=w.va,ve.j=w.j,ve.o=w.o,$.$a)e:{t($.$a==1),w=Hl();t:for(;;){if(w==null){w=0;break e}if(t($!=null),$.mc=w,w.c=$.c,w.i=$.i,w.l=$.l,w.l.ma=$,w.l.width=$.c,w.l.height=$.i,w.a=0,Y(w.m,W,X,de),!rs($.c,$.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Aa(w.s)?($.ic=1,W=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(W),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):($.ic=0,w=Vl(w,$.c)),!w))break t;w=1;break e}$.mc=null,w=0}else w=de>=$.c*$.i;$=!w}if($)return null;m.ga.Lc!=1?m.Ga=0:T=B-P}t(m.ga!=null),t(P+T<=B);e:{if(w=(W=m.ga).c,B=W.l.o,W.$a==0){if(X=m.rc,de=m.Vc,ve=m.Fa,K=m.P+1+P*w,J=m.mb,le=m.nb+P*w,t(K<=m.P+m.qc),W.Z!=0)for(t(Yo[W.Z]!=null),$=0;$<T;++$)Yo[W.Z](X,de,ve,K,J,le,w),X=J,de=le,le+=w,K+=w;else for($=0;$<T;++$)n(J,le,ve,K,w),X=J,de=le,le+=w,K+=w;m.rc=X,m.Vc=de}else{if(t(W.mc!=null),w=P+T,t(($=W.mc)!=null),t(w<=$.i),$.C>=w)w=1;else if(W.ic||Oa(),W.ic){W=$.V,X=$.Ba,de=$.c;var _e=$.i,ye=(ve=1,K=$.$/de,J=$.$%de,le=$.m,xe=$.s,$.$),Ne=de*_e,Ae=de*w,Le=xe.wc,Te=ye<Ae?Dn(xe,J,K):null;t(ye<=Ne),t(w<=_e),t(Aa(xe));t:for(;;){for(;!le.h&&ye<Ae;){if(J&Le||(Te=Dn(xe,J,K)),t(Te!=null),ce(le),256>(_e=Dr(Te.G[0],Te.H[0],le)))W[X+ye]=_e,++ye,++J>=de&&(J=0,++K<=w&&!(K%16)&&Ea($,K));else{if(!(280>_e)){ve=0;break t}_e=ra(_e-256,le);var it,ze=Dr(Te.G[4],Te.H[4],le);if(ce(le),!(ye>=(ze=na(de,ze=ra(ze,le)))&&Ne-ye>=_e)){ve=0;break t}for(it=0;it<_e;++it)W[X+ye+it]=W[X+ye+it-ze];for(ye+=_e,J+=_e;J>=de;)J-=de,++K<=w&&!(K%16)&&Ea($,K);ye<Ae&&J&Le&&(Te=Dn(xe,J,K))}t(le.h==re(le))}Ea($,K>w?w:K);break t}!ve||le.h&&ye<Ne?(ve=0,$.a=le.h?5:3):$.$=ye,w=ve}else w=Pa($,$.V,$.Ba,$.c,$.i,w,gu);if(!w){T=0;break e}}P+T>=B&&(m.Cc=1),T=1}if(!T)return null;if(m.Cc&&((T=m.ga)!=null&&(T.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+P*F}function fn(m,w,P,T,F,B){for(;0<F--;){var $,W=m,K=w+(P?1:0),J=m,le=w+(P?0:3);for($=0;$<T;++$){var xe=J[le+4*$];xe!=255&&(xe*=32897,W[K+4*$+0]=W[K+4*$+0]*xe>>23,W[K+4*$+1]=W[K+4*$+1]*xe>>23,W[K+4*$+2]=W[K+4*$+2]*xe>>23)}w+=B}}function nn(m,w,P,T,F){for(;0<T--;){var B;for(B=0;B<P;++B){var $=m[w+2*B+0],W=15&(J=m[w+2*B+1]),K=4369*W,J=(240&J|J>>4)*K>>16;m[w+2*B+0]=(240&$|$>>4)*K>>16&240|(15&$|$<<4)*K>>16>>4&15,m[w+2*B+1]=240&J|W}w+=F}}function Rn(m,w,P,T,F,B,$,W){var K,J,le=255;for(J=0;J<F;++J){for(K=0;K<T;++K){var xe=m[w+K];B[$+4*K]=xe,le&=xe}w+=P,$+=W}return le!=255}function Hs(m,w,P,T,F){var B;for(B=0;B<F;++B)P[T+B]=m[w+B]>>8}function Oa(){If=fn,LS=nn,DS=Rn,RS=Hs}function Vs(m,w,P){C[m]=function(T,F,B,$,W,K,J,le,xe,X,de,ve,_e,ye,Ne,Ae,Le){var Te,it=Le-1>>1,ze=W[K+0]|J[le+0]<<16,At=xe[X+0]|de[ve+0]<<16;t(T!=null);var Ze=3*ze+At+131074>>2;for(w(T[F+0],255&Ze,Ze>>16,_e,ye),B!=null&&(Ze=3*At+ze+131074>>2,w(B[$+0],255&Ze,Ze>>16,Ne,Ae)),Te=1;Te<=it;++Te){var Lt=W[K+Te]|J[le+Te]<<16,pn=xe[X+Te]|de[ve+Te]<<16,Et=ze+Lt+At+pn+524296,Qe=Et+2*(Lt+At)>>3;Ze=Qe+ze>>1,ze=(Et=Et+2*(ze+pn)>>3)+Lt>>1,w(T[F+2*Te-1],255&Ze,Ze>>16,_e,ye+(2*Te-1)*P),w(T[F+2*Te-0],255&ze,ze>>16,_e,ye+(2*Te-0)*P),B!=null&&(Ze=Et+At>>1,ze=Qe+pn>>1,w(B[$+2*Te-1],255&Ze,Ze>>16,Ne,Ae+(2*Te-1)*P),w(B[$+2*Te+0],255&ze,ze>>16,Ne,Ae+(2*Te+0)*P)),ze=Lt,At=pn}1&Le||(Ze=3*ze+At+131074>>2,w(T[F+Le-1],255&Ze,Ze>>16,_e,ye+(Le-1)*P),B!=null&&(Ze=3*At+ze+131074>>2,w(B[$+Le-1],255&Ze,Ze>>16,Ne,Ae+(Le-1)*P)))}}function _f(){ua[_m]=CM,ua[jm]=KS,ua[zS]=OM,ua[Sm]=GS,ua[Nm]=YS,ua[Mx]=JS,ua[qS]=TM,ua[Fx]=KS,ua[Bx]=GS,ua[km]=YS,ua[$x]=JS}function Nu(m){return m&-16384?0>m?0:255:m>>IM}function Bo(m,w){return Nu((19077*m>>8)+(26149*w>>8)-14234)}function Zl(m,w,P){return Nu((19077*m>>8)-(6419*w>>8)-(13320*P>>8)+8708)}function Ql(m,w){return Nu((19077*m>>8)+(33050*w>>8)-17685)}function $o(m,w,P,T,F){T[F+0]=Bo(m,P),T[F+1]=Zl(m,w,P),T[F+2]=Ql(m,w)}function Mn(m,w,P,T,F){T[F+0]=Ql(m,w),T[F+1]=Zl(m,w,P),T[F+2]=Bo(m,P)}function ec(m,w,P,T,F){var B=Zl(m,w,P);w=B<<3&224|Ql(m,w)>>3,T[F+0]=248&Bo(m,P)|B>>5,T[F+1]=w}function tc(m,w,P,T,F){var B=240&Ql(m,w)|15;T[F+0]=240&Bo(m,P)|Zl(m,w,P)>>4,T[F+1]=B}function jf(m,w,P,T,F){T[F+0]=255,$o(m,w,P,T,F+1)}function Sf(m,w,P,T,F){Mn(m,w,P,T,F),T[F+3]=255}function ci(m,w,P,T,F){$o(m,w,P,T,F),T[F+3]=255}function Ks(m,w,P){C[m]=function(T,F,B,$,W,K,J,le,xe){for(var X=le+(-2&xe)*P;le!=X;)w(T[F+0],B[$+0],W[K+0],J,le),w(T[F+1],B[$+0],W[K+0],J,le+P),F+=2,++$,++K,le+=2*P;1&xe&&w(T[F+0],B[$+0],W[K+0],J,le)}}function ku(m,w,P){return P==0?m==0?w==0?6:5:w==0?4:0:P}function ym(m,w,P,T,F){switch(m>>>30){case 3:ac(w,P,T,F,0);break;case 2:la(w,P,T,F);break;case 1:Gt(w,P,T,F)}}function oa(m,w){var P,T,F=w.M,B=w.Nb,$=m.oc,W=m.pc+40,K=m.oc,J=m.pc+584,le=m.oc,xe=m.pc+600;for(P=0;16>P;++P)$[W+32*P-1]=129;for(P=0;8>P;++P)K[J+32*P-1]=129,le[xe+32*P-1]=129;for(0<F?$[W-1-32]=K[J-1-32]=le[xe-1-32]=129:(i($,W-32-1,127,21),i(K,J-32-1,127,9),i(le,xe-32-1,127,9)),T=0;T<m.za;++T){var X=w.ya[w.aa+T];if(0<T){for(P=-1;16>P;++P)n($,W+32*P-4,$,W+32*P+12,4);for(P=-1;8>P;++P)n(K,J+32*P-4,K,J+32*P+4,4),n(le,xe+32*P-4,le,xe+32*P+4,4)}var de=m.Gd,ve=m.Hd+T,_e=X.ad,ye=X.Hc;if(0<F&&(n($,W-32,de[ve].y,0,16),n(K,J-32,de[ve].f,0,8),n(le,xe-32,de[ve].ea,0,8)),X.Za){var Ne=$,Ae=W-32+16;for(0<F&&(T>=m.za-1?i(Ne,Ae,de[ve].y[15],4):n(Ne,Ae,de[ve+1].y,0,4)),P=0;4>P;P++)Ne[Ae+128+P]=Ne[Ae+256+P]=Ne[Ae+384+P]=Ne[Ae+0+P];for(P=0;16>P;++P,ye<<=2)Ne=$,Ae=W+ZS[P],Ta[X.Ob[P]](Ne,Ae),ym(ye,_e,16*+P,Ne,Ae)}else if(Ne=ku(T,F,X.Ob[0]),Go[Ne]($,W),ye!=0)for(P=0;16>P;++P,ye<<=2)ym(ye,_e,16*+P,$,W+ZS[P]);for(P=X.Gc,Ne=ku(T,F,X.Dd),Js[Ne](K,J),Js[Ne](le,xe),ye=_e,Ne=K,Ae=J,255&(X=0|P)&&(170&X?ls(ye,256,Ne,Ae):nr(ye,256,Ne,Ae)),X=le,ye=xe,255&(P>>=8)&&(170&P?ls(_e,320,X,ye):nr(_e,320,X,ye)),F<m.Ub-1&&(n(de[ve].y,0,$,W+480,16),n(de[ve].f,0,K,J+224,8),n(de[ve].ea,0,le,xe+224,8)),P=8*B*m.B,de=m.sa,ve=m.ta+16*T+16*B*m.R,_e=m.qa,X=m.ra+8*T+P,ye=m.Ha,Ne=m.Ia+8*T+P,P=0;16>P;++P)n(de,ve+P*m.R,$,W+32*P,16);for(P=0;8>P;++P)n(_e,X+P*m.B,K,J+32*P,8),n(ye,Ne+P*m.B,le,xe+32*P,8)}}function rc(m,w,P,T,F,B,$,W,K){var J=[0],le=[0],xe=0,X=K!=null?K.kd:0,de=K??new Oe;if(m==null||12>P)return 7;de.data=m,de.w=w,de.ha=P,w=[w],P=[P],de.gb=[de.gb];e:{var ve=w,_e=P,ye=de.gb;if(t(m!=null),t(_e!=null),t(ye!=null),ye[0]=0,12<=_e[0]&&!r(m,ve[0],"RIFF")){if(r(m,ve[0]+8,"WEBP")){ye=3;break e}var Ne=Ee(m,ve[0]+4);if(12>Ne||4294967286<Ne){ye=3;break e}if(X&&Ne>_e[0]-8){ye=7;break e}ye[0]=Ne,ve[0]+=12,_e[0]-=12}ye=0}if(ye!=0)return ye;for(Ne=0<de.gb[0],P=P[0];;){e:{var Ae=m;_e=w,ye=P;var Le=J,Te=le,it=ve=[0];if((Ze=xe=[xe])[0]=0,8>ye[0])ye=7;else{if(!r(Ae,_e[0],"VP8X")){if(Ee(Ae,_e[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var ze=Ee(Ae,_e[0]+8),At=1+Ce(Ae,_e[0]+12);if(2147483648<=At*(Ae=1+Ce(Ae,_e[0]+15))){ye=3;break e}it!=null&&(it[0]=ze),Le!=null&&(Le[0]=At),Te!=null&&(Te[0]=Ae),_e[0]+=18,ye[0]-=18,Ze[0]=1}ye=0}}if(xe=xe[0],ve=ve[0],ye!=0)return ye;if(_e=!!(2&ve),!Ne&&xe)return 3;if(B!=null&&(B[0]=!!(16&ve)),$!=null&&($[0]=_e),W!=null&&(W[0]=0),$=J[0],ve=le[0],xe&&_e&&K==null){ye=0;break}if(4>P){ye=7;break}if(Ne&&xe||!Ne&&!xe&&!r(m,w[0],"ALPH")){P=[P],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{ze=m,ye=w,Ne=P;var Ze=de.gb;Le=de.na,Te=de.P,it=de.Sa,At=22,t(ze!=null),t(Ne!=null),Ae=ye[0];var Lt=Ne[0];for(t(Le!=null),t(it!=null),Le[0]=null,Te[0]=null,it[0]=0;;){if(ye[0]=Ae,Ne[0]=Lt,8>Lt){ye=7;break e}var pn=Ee(ze,Ae+4);if(4294967286<pn){ye=3;break e}var Et=8+pn+1&-2;if(At+=Et,0<Ze&&At>Ze){ye=3;break e}if(!r(ze,Ae,"VP8 ")||!r(ze,Ae,"VP8L")){ye=0;break e}if(Lt[0]<Et){ye=7;break e}r(ze,Ae,"ALPH")||(Le[0]=ze,Te[0]=Ae+8,it[0]=pn),Ae+=Et,Lt-=Et}}if(P=P[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],ye!=0)break}P=[P],de.Ja=[de.Ja],de.xa=[de.xa];e:if(Ze=m,ye=w,Ne=P,Le=de.gb[0],Te=de.Ja,it=de.xa,ze=ye[0],Ae=!r(Ze,ze,"VP8 "),At=!r(Ze,ze,"VP8L"),t(Ze!=null),t(Ne!=null),t(Te!=null),t(it!=null),8>Ne[0])ye=7;else{if(Ae||At){if(Ze=Ee(Ze,ze+4),12<=Le&&Ze>Le-12){ye=3;break e}if(X&&Ze>Ne[0]-8){ye=7;break e}Te[0]=Ze,ye[0]+=8,Ne[0]-=8,it[0]=At}else it[0]=5<=Ne[0]&&Ze[ze+0]==47&&!(Ze[ze+4]>>5),Te[0]=Ne[0];ye=0}if(P=P[0],de.Ja=de.Ja[0],de.xa=de.xa[0],w=w[0],ye!=0)break;if(4294967286<de.Ja)return 3;if(W==null||_e||(W[0]=de.xa?2:1),$=[$],ve=[ve],de.xa){if(5>P){ye=7;break}W=$,X=ve,_e=B,m==null||5>P?m=0:5<=P&&m[w+0]==47&&!(m[w+4]>>5)?(Ne=[0],Ze=[0],Le=[0],Y(Te=new z,m,w,P),Ms(Te,Ne,Ze,Le)?(W!=null&&(W[0]=Ne[0]),X!=null&&(X[0]=Ze[0]),_e!=null&&(_e[0]=Le[0]),m=1):m=0):m=0}else{if(10>P){ye=7;break}W=ve,m==null||10>P||!om(m,w+3,P-3)?m=0:(X=m[w+0]|m[w+1]<<8|m[w+2]<<16,_e=16383&(m[w+7]<<8|m[w+6]),m=16383&(m[w+9]<<8|m[w+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=de.Ja||!_e||!m?m=0:($&&($[0]=_e),W&&(W[0]=m),m=1))}if(!m||($=$[0],ve=ve[0],xe&&(J[0]!=$||le[0]!=ve)))return 3;K!=null&&(K[0]=de,K.offset=w-K.w,t(4294967286>w-K.w),t(K.offset==K.ha-P));break}return ye==0||ye==7&&xe&&K==null?(B!=null&&(B[0]|=de.na!=null&&0<de.na.length),T!=null&&(T[0]=$),F!=null&&(F[0]=ve),0):ye}function Nf(m,w,P){var T=w.width,F=w.height,B=0,$=0,W=T,K=F;if(w.Da=m!=null&&0<m.Da,w.Da&&(W=m.cd,K=m.bd,B=m.v,$=m.j,11>P||(B&=-2,$&=-2),0>B||0>$||0>=W||0>=K||B+W>T||$+K>F))return 0;if(w.v=B,w.j=$,w.va=B+W,w.o=$+K,w.U=W,w.T=K,w.da=m!=null&&0<m.da,w.da){if(!De(W,K,P=[m.ib],B=[m.hb]))return 0;w.ib=P[0],w.hb=B[0]}return w.ob=m!=null&&m.ob,w.Kb=m==null||!m.Sd,w.da&&(w.ob=w.ib<3*T/4&&w.hb<3*F/4,w.Kb=0),1}function kf(m){if(m==null)return 2;if(11>m.S){var w=m.f.RGBA;w.fb+=(m.height-1)*w.A,w.A=-w.A}else w=m.f.kb,m=m.height,w.O+=(m-1)*w.fa,w.fa=-w.fa,w.N+=(m-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(m-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(m-1)*w.lb,w.lb=-w.lb);return 0}function Uo(m,w,P,T){if(T==null||0>=m||0>=w)return 2;if(P!=null){if(P.Da){var F=P.cd,B=P.bd,$=-2&P.v,W=-2&P.j;if(0>$||0>W||0>=F||0>=B||$+F>m||W+B>w)return 2;m=F,w=B}if(P.da){if(!De(m,w,F=[P.ib],B=[P.hb]))return 2;m=F[0],w=B[0]}}T.width=m,T.height=w;e:{var K=T.width,J=T.height;if(m=T.S,0>=K||0>=J||!(m>=_m&&13>m))m=2;else{if(0>=T.Rd&&T.sd==null){$=B=F=w=0;var le=(W=K*QS[m])*J;if(11>m||(B=(J+1)/2*(w=(K+1)/2),m==12&&($=(F=K)*J)),(J=a(le+2*B+$))==null){m=1;break e}T.sd=J,11>m?((K=T.f.RGBA).eb=J,K.fb=0,K.A=W,K.size=le):((K=T.f.kb).y=J,K.O=0,K.fa=W,K.Fd=le,K.f=J,K.N=0+le,K.Ab=w,K.Cd=B,K.ea=J,K.W=0+le+B,K.Db=w,K.Ed=B,m==12&&(K.F=J,K.J=0+le+2*B),K.Tc=$,K.lb=F)}if(w=1,F=T.S,B=T.width,$=T.height,F>=_m&&13>F)if(11>F)m=T.f.RGBA,w&=(W=Math.abs(m.A))*($-1)+B<=m.size,w&=W>=B*QS[F],w&=m.eb!=null;else{m=T.f.kb,W=(B+1)/2,le=($+1)/2,K=Math.abs(m.fa),J=Math.abs(m.Ab);var xe=Math.abs(m.Db),X=Math.abs(m.lb),de=X*($-1)+B;w&=K*($-1)+B<=m.Fd,w&=J*(le-1)+W<=m.Cd,w=(w&=xe*(le-1)+W<=m.Ed)&K>=B&J>=W&xe>=W,w&=m.y!=null,w&=m.f!=null,w&=m.ea!=null,F==12&&(w&=X>=B,w&=de<=m.Tc,w&=m.F!=null)}else w=0;m=w?0:2}}return m!=0||P!=null&&P.fd&&(m=kf(T)),m}var nc=64,Li=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Di=24,zo=32,Gs=8,qo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Fe("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(m){return m},C.Predictor2=function(m,w,P){return w[P+0]},C.Predictor3=function(m,w,P){return w[P+1]},C.Predictor4=function(m,w,P){return w[P-1]},C.Predictor5=function(m,w,P){return tt(tt(m,w[P+1]),w[P+0])},C.Predictor6=function(m,w,P){return tt(m,w[P-1])},C.Predictor7=function(m,w,P){return tt(m,w[P+0])},C.Predictor8=function(m,w,P){return tt(w[P-1],w[P+0])},C.Predictor9=function(m,w,P){return tt(w[P+0],w[P+1])},C.Predictor10=function(m,w,P){return tt(tt(m,w[P-1]),tt(w[P+0],w[P+1]))},C.Predictor11=function(m,w,P){var T=w[P+0];return 0>=Xe(T>>24&255,m>>24&255,(w=w[P-1])>>24&255)+Xe(T>>16&255,m>>16&255,w>>16&255)+Xe(T>>8&255,m>>8&255,w>>8&255)+Xe(255&T,255&m,255&w)?T:m},C.Predictor12=function(m,w,P){var T=w[P+0];return(mt((m>>24&255)+(T>>24&255)-((w=w[P-1])>>24&255))<<24|mt((m>>16&255)+(T>>16&255)-(w>>16&255))<<16|mt((m>>8&255)+(T>>8&255)-(w>>8&255))<<8|mt((255&m)+(255&T)-(255&w)))>>>0},C.Predictor13=function(m,w,P){var T=w[P-1];return(vt((m=tt(m,w[P+0]))>>24&255,T>>24&255)<<24|vt(m>>16&255,T>>16&255)<<16|vt(m>>8&255,T>>8&255)<<8|vt(255&m,255&T))>>>0};var Af=C.PredictorAdd0;C.PredictorAdd1=ot,Fe("Predictor2","PredictorAdd2"),Fe("Predictor3","PredictorAdd3"),Fe("Predictor4","PredictorAdd4"),Fe("Predictor5","PredictorAdd5"),Fe("Predictor6","PredictorAdd6"),Fe("Predictor7","PredictorAdd7"),Fe("Predictor8","PredictorAdd8"),Fe("Predictor9","PredictorAdd9"),Fe("Predictor10","PredictorAdd10"),Fe("Predictor11","PredictorAdd11"),Fe("Predictor12","PredictorAdd12"),Fe("Predictor13","PredictorAdd13");var Au=C.PredictorAdd2;qe("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Vr,xm=C.ColorIndexInverseTransform,ss=C.MapARGB,os=C.VP8LColorIndexInverseTransformAlpha,Ef=C.MapAlpha,Pf=C.VP8LPredictorsAdd=[];Pf.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Cf,Of,Wo,Ho,Vo,ic,Ko,ac,la,ls,Gt,nr,Kr,hn,Ys,Tf,Eu,bm,ES,PS,CS,OS,TS,IS,If,LS,DS,RS,MS=a(511),FS=a(2041),BS=a(225),$S=a(767),US=0,Rx=FS,wm=BS,Ri=$S,ca=MS,_m=0,jm=1,zS=2,Sm=3,Nm=4,Mx=5,qS=6,Fx=7,Bx=8,km=9,$x=10,vM=[2,3,7],gM=[3,3,11],WS=[280,256,256,256,40],yM=[0,1,1,1,0],xM=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],bM=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wM=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_M=8,Ux=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Lf=null,jM=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],SM=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],HS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],NM=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],kM=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],AM=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],EM=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Go=[],Ta=[],Js=[],PM=1,VS=2,Yo=[],ua=[];Vs("UpsampleRgbLinePair",$o,3),Vs("UpsampleBgrLinePair",Mn,3),Vs("UpsampleRgbaLinePair",ci,4),Vs("UpsampleBgraLinePair",Sf,4),Vs("UpsampleArgbLinePair",jf,4),Vs("UpsampleRgba4444LinePair",tc,2),Vs("UpsampleRgb565LinePair",ec,2);var CM=C.UpsampleRgbLinePair,OM=C.UpsampleBgrLinePair,KS=C.UpsampleRgbaLinePair,GS=C.UpsampleBgraLinePair,YS=C.UpsampleArgbLinePair,JS=C.UpsampleRgba4444LinePair,TM=C.UpsampleRgb565LinePair,Am=16,Em=1<<Am-1,Df=-227,qx=482,IM=6,XS=0,LM=a(256),DM=a(256),RM=a(256),MM=a(256),FM=a(qx-Df),BM=a(qx-Df);Ks("YuvToRgbRow",$o,3),Ks("YuvToBgrRow",Mn,3),Ks("YuvToRgbaRow",ci,4),Ks("YuvToBgraRow",Sf,4),Ks("YuvToArgbRow",jf,4),Ks("YuvToRgba4444Row",tc,2),Ks("YuvToRgb565Row",ec,2);var ZS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pm=[0,2,8],$M=[8,7,6,4,4,2,2,2,1,1,1,1],UM=1;this.WebPDecodeRGBA=function(m,w,P,T,F){var B=jm,$=new ke,W=new Ot;$.ba=W,W.S=B,W.width=[W.width],W.height=[W.height];var K=W.width,J=W.height,le=new lt;if(le==null||m==null)var xe=2;else t(le!=null),xe=rc(m,w,P,le.width,le.height,le.Pd,le.Qd,le.format,null);if(xe!=0?K=0:(K!=null&&(K[0]=le.width[0]),J!=null&&(J[0]=le.height[0]),K=1),K){W.width=W.width[0],W.height=W.height[0],T!=null&&(T[0]=W.width),F!=null&&(F[0]=W.height);e:{if(T=new bu,(F=new Oe).data=m,F.w=w,F.ha=P,F.kd=1,w=[0],t(F!=null),((m=rc(F.data,F.w,F.ha,null,null,null,w,null,F))==0||m==7)&&w[0]&&(m=4),(w=m)==0){if(t($!=null),T.data=F.data,T.w=F.w+F.offset,T.ha=F.ha-F.offset,T.put=ct,T.ac=es,T.bc=Rs,T.ma=$,F.xa){if((m=Hl())==null){$=1;break e}if(function(X,de){var ve=[0],_e=[0],ye=[0];t:for(;;){if(X==null)return 0;if(de==null)return X.a=2,0;if(X.l=de,X.a=0,Y(X.m,de.data,de.w,de.ha),!Ms(X.m,ve,_e,ye)){X.a=3;break t}if(X.xb=VS,de.width=ve[0],de.height=_e[0],!rs(ve[0],_e[0],1,X,null))break t;return 1}return t(X.a!=0),0}(m,T)){if(T=(w=Uo(T.width,T.height,$.Oa,$.ba))==0){t:{T=m;r:for(;;){if(T==null){T=0;break t}if(t(T.s.yc!=null),t(T.s.Ya!=null),t(0<T.s.Wb),t((P=T.l)!=null),t((F=P.ma)!=null),T.xb!=0){if(T.ca=F.ba,T.tb=F.tb,t(T.ca!=null),!Nf(F.Oa,P,Sm)){T.a=2;break r}if(!Vl(T,P.width)||P.da)break r;if((P.da||dt(T.ca.S))&&Oa(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&Oa()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!H(T.s.vb,T.s.Wa.Xa)){T.a=1;break r}T.xb=0}if(!Pa(T,T.V,T.Ba,T.c,T.i,P.o,Fo))break r;F.Dc=T.Ma,T=1;break t}t(T.a!=0),T=0}T=!T}T&&(w=m.a)}else w=m.a}else{if((m=new wx)==null){$=1;break e}if(m.Fa=F.na,m.P=F.P,m.qc=F.Sa,is(m,T)){if((w=Uo(T.width,T.height,$.Oa,$.ba))==0){if(m.Aa=0,P=$.Oa,t((F=m)!=null),P!=null){if(0<(K=0>(K=P.Md)?0:100<K?255:255*K/100)){for(J=le=0;4>J;++J)12>(xe=F.pb[J]).lc&&(xe.ia=K*$M[0>xe.lc?0:xe.lc]>>3),le|=xe.ia;le&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=P.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}(function(X,de){if(X==null)return 0;if(de==null)return tn(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!is(X,de))return 0;if(t(X.cb),de.ac==null||de.ac(de)){de.ob&&(X.L=0);var ve=Pm[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=de.v-ve>>4,X.zb=de.j-ve>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=de.o+15+ve>>4,X.Hb=de.va+15+ve>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var _e=X.ed;for(ve=0;4>ve;++ve){var ye;if(X.Qa.Cb){var Ne=X.Qa.Lb[ve];X.Qa.Fb||(Ne+=_e.Tb)}else Ne=_e.Tb;for(ye=0;1>=ye;++ye){var Ae=X.gd[ve][ye],Le=Ne;if(_e.Pc&&(Le+=_e.vd[0],ye&&(Le+=_e.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var Te=Le;0<_e.wb&&(Te=4<_e.wb?Te>>2:Te>>1)>9-_e.wb&&(Te=9-_e.wb),1>Te&&(Te=1),Ae.dd=Te,Ae.tc=2*Le+Te,Ae.ld=40<=Le?2:15<=Le?1:0}else Ae.tc=0;Ae.La=ye}}}ve=0}else tn(X,6,"Frame setup failed"),ve=X.a;if(ve=ve==0){if(ve){X.$c=0,0<X.Aa||(X.Ic=UM);t:{ve=X.Ic,_e=4*(Te=X.za);var it=32*Te,ze=Te+1,At=0<X.L?Te*(0<X.Aa?2:1):0,Ze=(X.Aa==2?2:1)*Te;if((Ae=_e+832+(ye=3*(16*ve+Pm[X.L])/2*it)+(Ne=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Ae)ve=0;else{if(Ae>X.Vb){if(X.Vb=0,X.Ec=a(Ae),X.Fc=0,X.Ec==null){ve=tn(X,1,"no memory during frame initialization.");break t}X.Vb=Ae}Ae=X.Ec,Le=X.Fc,X.Ac=Ae,X.Bc=Le,Le+=_e,X.Gd=s(it,am),X.Hd=0,X.rb=s(ze+1,ff),X.sb=1,X.wa=At?s(At,aa):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=Te),t(!0),X.oc=Ae,X.pc=Le,Le+=832,X.ya=s(Ze,hf),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=Te),X.R=16*Te,X.B=8*Te,Te=(it=Pm[X.L])*X.R,it=it/2*X.B,X.sa=Ae,X.ta=Le+Te,X.qa=X.sa,X.ra=X.ta+16*ve*X.R+it,X.Ha=X.qa,X.Ia=X.ra+8*ve*X.B+it,X.$c=0,Le+=ye,X.mb=Ne?Ae:null,X.nb=Ne?Le:null,t(Le+Ne<=X.Fc+X.Vb),lm(X),i(X.Ac,X.Bc,0,_e),ve=1}}if(ve){if(de.ka=0,de.y=X.sa,de.O=X.ta,de.f=X.qa,de.N=X.ra,de.ea=X.Ha,de.Vd=X.Ia,de.fa=X.R,de.Rc=X.B,de.F=null,de.J=0,!US){for(ve=-255;255>=ve;++ve)MS[255+ve]=0>ve?-ve:ve;for(ve=-1020;1020>=ve;++ve)FS[1020+ve]=-128>ve?-128:127<ve?127:ve;for(ve=-112;112>=ve;++ve)BS[112+ve]=-16>ve?-16:15<ve?15:ve;for(ve=-255;510>=ve;++ve)$S[255+ve]=0>ve?0:255<ve?255:ve;US=1}Ko=_u,ac=jx,ls=as,Gt=um,nr=dm,la=_x,Kr=vm,hn=Xl,Ys=M,Tf=Z,Eu=gm,bm=k,ES=se,PS=me,CS=Jl,OS=wf,TS=pm,IS=mm,Ta[0]=Ox,Ta[1]=Sx,Ta[2]=Px,Ta[3]=Cx,Ta[4]=Bs,Ta[5]=Tx,Ta[6]=$s,Ta[7]=Ix,Ta[8]=vf,Ta[9]=ju,Go[0]=Ax,Go[1]=kx,Go[2]=pf,Go[3]=fm,Go[4]=Gl,Go[5]=mf,Go[6]=Ex,Js[0]=Dx,Js[1]=Nx,Js[2]=Yl,Js[3]=Lx,Js[4]=yf,Js[5]=gf,Js[6]=hm,ve=1}else ve=0}ve&&(ve=function(Lt,pn){for(Lt.M=0;Lt.M<Lt.Va;++Lt.M){var Et,Qe=Lt.Jc[Lt.M&Lt.Xb],Me=Lt.m,Gr=Lt;for(Et=0;Et<Gr.za;++Et){var St=Me,Mt=Gr,vr=Mt.Ac,Fn=Mt.Bc+4*Et,ui=Mt.zc,Rr=Mt.ya[Mt.aa+Et];if(Mt.Qa.Bb?Rr.$b=he(St,Mt.Pa.jb[0])?2+he(St,Mt.Pa.jb[2]):he(St,Mt.Pa.jb[1]):Rr.$b=0,Mt.kc&&(Rr.Ad=he(St,Mt.Bd)),Rr.Za=!he(St,145)+0,Rr.Za){var Jn=Rr.Ob,di=0;for(Mt=0;4>Mt;++Mt){var mn,Bt=ui[0+Mt];for(mn=0;4>mn;++mn){Bt=kM[vr[Fn+mn]][Bt];for(var Jt=HS[he(St,Bt[0])];0<Jt;)Jt=HS[2*Jt+he(St,Bt[Jt])];Bt=-Jt,vr[Fn+mn]=Bt}n(Jn,di,vr,Fn,4),di+=4,ui[0+Mt]=Bt}}else Bt=he(St,156)?he(St,128)?1:3:he(St,163)?2:0,Rr.Ob[0]=Bt,i(vr,Fn,Bt,4),i(ui,0,Bt,4);Rr.Dd=he(St,142)?he(St,114)?he(St,183)?1:3:2:0}if(Gr.m.Ka)return tn(Lt,7,"Premature end-of-partition0 encountered.");for(;Lt.ja<Lt.za;++Lt.ja){if(Gr=Qe,St=(Me=Lt).rb[Me.sb-1],vr=Me.rb[Me.sb+Me.ja],Et=Me.ya[Me.aa+Me.ja],Fn=Me.kc?Et.Ad:0)St.la=vr.la=0,Et.Za||(St.Na=vr.Na=0),Et.Hc=0,Et.Gc=0,Et.ia=0;else{var Mr,Xt;if(St=vr,vr=Gr,Fn=Me.Pa.Xc,ui=Me.ya[Me.aa+Me.ja],Rr=Me.pb[ui.$b],Mt=ui.ad,Jn=0,di=Me.rb[Me.sb-1],Bt=mn=0,i(Mt,Jn,0,384),ui.Za)var Bn=0,Ia=Fn[3];else{Jt=a(16);var Yr=St.Na+di.Na;if(Yr=Lf(vr,Fn[1],Yr,Rr.Eb,0,Jt,0),St.Na=di.Na=(0<Yr)+0,1<Yr)Ko(Jt,0,Mt,Jn);else{var _i=Jt[0]+3>>3;for(Jt=0;256>Jt;Jt+=16)Mt[Jn+Jt]=_i}Bn=1,Ia=Fn[0]}var ir=15&St.la,vn=15&di.la;for(Jt=0;4>Jt;++Jt){var Mi=1&vn;for(_i=Xt=0;4>_i;++_i)ir=ir>>1|(Mi=(Yr=Lf(vr,Ia,Yr=Mi+(1&ir),Rr.Sc,Bn,Mt,Jn))>Bn)<<7,Xt=Xt<<2|(3<Yr?3:1<Yr?2:Mt[Jn+0]!=0),Jn+=16;ir>>=4,vn=vn>>1|Mi<<7,mn=(mn<<8|Xt)>>>0}for(Ia=ir,Bn=vn>>4,Mr=0;4>Mr;Mr+=2){for(Xt=0,ir=St.la>>4+Mr,vn=di.la>>4+Mr,Jt=0;2>Jt;++Jt){for(Mi=1&vn,_i=0;2>_i;++_i)Yr=Mi+(1&ir),ir=ir>>1|(Mi=0<(Yr=Lf(vr,Fn[2],Yr,Rr.Qc,0,Mt,Jn)))<<3,Xt=Xt<<2|(3<Yr?3:1<Yr?2:Mt[Jn+0]!=0),Jn+=16;ir>>=2,vn=vn>>1|Mi<<5}Bt|=Xt<<4*Mr,Ia|=ir<<4<<Mr,Bn|=(240&vn)<<Mr}St.la=Ia,di.la=Bn,ui.Hc=mn,ui.Gc=Bt,ui.ia=43690&Bt?0:Rr.ia,Fn=!(mn|Bt)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[Et.$b][Et.Za],Me.wa[Me.Y+Me.ja].La|=!Fn),Gr.Ka)return tn(Lt,7,"Premature end-of-file encountered.")}if(lm(Lt),Me=pn,Gr=1,Et=(Qe=Lt).D,St=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)t:{if(Et.M=Qe.M,Et.uc=St,oa(Qe,Et),Gr=1,Et=(Xt=Qe.D).Nb,St=(Bt=Pm[Qe.L])*Qe.R,vr=Bt/2*Qe.B,Jt=16*Et*Qe.R,_i=8*Et*Qe.B,Fn=Qe.sa,ui=Qe.ta-St+Jt,Rr=Qe.qa,Mt=Qe.ra-vr+_i,Jn=Qe.Ha,di=Qe.Ia-vr+_i,vn=(ir=Xt.M)==0,mn=ir>=Qe.Va-1,Qe.Aa==2&&oa(Qe,Xt),Xt.uc)for(Mi=(Yr=Qe).D.M,t(Yr.D.uc),Xt=Yr.yb;Xt<Yr.Hb;++Xt){Bn=Xt,Ia=Mi;var fi=(Fi=($n=Yr).D).Nb;Mr=$n.R;var Fi=Fi.wa[Fi.Y+Bn],Bi=$n.sa,ji=$n.ta+16*fi*Mr+16*Bn,$i=Fi.dd,ur=Fi.tc;if(ur!=0)if(t(3<=ur),$n.L==1)0<Bn&&OS(Bi,ji,Mr,ur+4),Fi.La&&IS(Bi,ji,Mr,ur),0<Ia&&CS(Bi,ji,Mr,ur+4),Fi.La&&TS(Bi,ji,Mr,ur);else{var Ui=$n.B,La=$n.qa,sc=$n.ra+8*fi*Ui+8*Bn,Xs=$n.Ha,$n=$n.Ia+8*fi*Ui+8*Bn;fi=Fi.ld,0<Bn&&(hn(Bi,ji,Mr,ur+4,$i,fi),Tf(La,sc,Xs,$n,Ui,ur+4,$i,fi)),Fi.La&&(bm(Bi,ji,Mr,ur,$i,fi),PS(La,sc,Xs,$n,Ui,ur,$i,fi)),0<Ia&&(Kr(Bi,ji,Mr,ur+4,$i,fi),Ys(La,sc,Xs,$n,Ui,ur+4,$i,fi)),Fi.La&&(Eu(Bi,ji,Mr,ur,$i,fi),ES(La,sc,Xs,$n,Ui,ur,$i,fi))}}if(Qe.ia&&alert("todo:DitherRow"),Me.put!=null){if(Xt=16*ir,ir=16*(ir+1),vn?(Me.y=Qe.sa,Me.O=Qe.ta+Jt,Me.f=Qe.qa,Me.N=Qe.ra+_i,Me.ea=Qe.Ha,Me.W=Qe.Ia+_i):(Xt-=Bt,Me.y=Fn,Me.O=ui,Me.f=Rr,Me.N=Mt,Me.ea=Jn,Me.W=di),mn||(ir-=Bt),ir>Me.o&&(ir=Me.o),Me.F=null,Me.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Xt<ir&&(Me.J=cr(Qe,Me,Xt,ir-Xt),Me.F=Qe.mb,Me.F==null&&Me.F.length==0)){Gr=tn(Qe,3,"Could not decode alpha data.");break t}Xt<Me.j&&(Bt=Me.j-Xt,Xt=Me.j,t(!(1&Bt)),Me.O+=Qe.R*Bt,Me.N+=Qe.B*(Bt>>1),Me.W+=Qe.B*(Bt>>1),Me.F!=null&&(Me.J+=Me.width*Bt)),Xt<ir&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=Xt-Me.j,Me.U=Me.va-Me.v,Me.T=ir-Xt,Gr=Me.put(Me))}Et+1!=Qe.Ic||mn||(n(Qe.sa,Qe.ta-St,Fn,ui+16*Qe.R,St),n(Qe.qa,Qe.ra-vr,Rr,Mt+8*Qe.B,vr),n(Qe.Ha,Qe.Ia-vr,Jn,di+8*Qe.B,vr))}if(!Gr)return tn(Lt,6,"Output aborted.")}return 1}(X,de)),de.bc!=null&&de.bc(de),ve&=1}return ve?(X.cb=0,ve):0})(m,T)||(w=m.a)}}else w=m.a}w==0&&$.Oa!=null&&$.Oa.fd&&(w=kf($.ba))}$=w}B=$!=0?null:11>B?W.f.RGBA.eb:W.f.kb.y}else B=null;return B};var QS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,L){for(var I="",O=0;O<4;O++)I+=String.fromCharCode(C[L++]);return I}function d(C,L){return C[L+0]|C[L+1]<<8}function f(C,L){return(C[L+0]|C[L+1]<<8|C[L+2]<<16)>>>0}function p(C,L){return(C[L+0]|C[L+1]<<8|C[L+2]<<16|C[L+3]<<24)>>>0}new c;var h=[0],y=[0],v=[],x=new c,g=e,_=function(C,L){var I={},O=0,U=!1,V=0,ie=0;if(I.frames=[],!function(R,z){for(var G=0;G<4;G++)if(R[z+G]!="RIFF".charCodeAt(G))return!0;return!1}(C,L)){for(p(C,L+=4),L+=8;L<C.length;){var ne=u(C,L),ee=p(C,L+=4);L+=4;var q=ee+(1&ee);switch(ne){case"VP8 ":case"VP8L":I.frames[O]===void 0&&(I.frames[O]={}),(te=I.frames[O]).src_off=U?ie:L-8,te.src_size=V+ee+8,O++,U&&(U=!1,V=0,ie=0);break;case"VP8X":(te=I.header={}).feature_flags=C[L];var Y=L+4;te.canvas_width=1+f(C,Y),Y+=3,te.canvas_height=1+f(C,Y),Y+=3;break;case"ALPH":U=!0,V=q+8,ie=L-8;break;case"ANIM":(te=I.header).bgcolor=p(C,L),Y=L+4,te.loop_count=d(C,Y),Y+=2;break;case"ANMF":var fe,te;(te=I.frames[O]={}).offset_x=2*f(C,L),L+=3,te.offset_y=2*f(C,L),L+=3,te.width=1+f(C,L),L+=3,te.height=1+f(C,L),L+=3,te.duration=f(C,L),L+=3,fe=C[L++],te.dispose=1&fe,te.blend=fe>>1&1}ne!="ANMF"&&(L+=q)}return I}}(g,0);_.response=g,_.rgbaoutput=!0,_.dataurl=!1;var S=_.header?_.header:null,j=_.frames?_.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],y=[S.canvas_width];for(var A=0;A<j.length&&j[A].blend!=0;A++);}var N=j[0],D=x.WebPDecodeRGBA(g,N.src_off,N.src_size,y,h);N.rgba=D,N.imgwidth=y[0],N.imgheight=h[0];for(var E=0;E<y[0]*h[0]*4;E++)v[E]=D[E];return this.width=y,this.height=h,this.data=v,this}(function(e){var t,r,n,i,a,s,o,c,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new s,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new s,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=R;Object.defineProperty(this,"pdf",{get:function(){return z}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(H){G=!!H}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(H){re=!!H}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(H){isNaN(H)||(ae=H)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(H){isNaN(H)||(ce=H)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(H){var je;typeof H=="number"?je=[H,H,H,H]:((je=new Array(4))[0]=H[0],je[1]=H.length>=2?H[1]:je[0],je[2]=H.length>=3?H[2]:je[0],je[3]=H.length>=4?H[3]:je[1]),u.margin=je}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(H){pe=H}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(H){Q=H}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(H){he=H}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(H){H instanceof d&&(u=H)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(H){u.path=H}});var oe=[];Object.defineProperty(this,"ctxStack",{get:function(){return oe},set:function(H){oe=H}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(H){var je;je=p(H),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(H){var je=p(H);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(H){["butt","round","square"].indexOf(H)!==-1&&(this.ctx.lineCap=H,this.pdf.setLineCap(H))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(H){isNaN(H)||(this.ctx.lineWidth=H,this.pdf.setLineWidth(H))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(H){["bevel","round","miter"].indexOf(H)!==-1&&(this.ctx.lineJoin=H,this.pdf.setLineJoin(H))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(H){isNaN(H)||(this.ctx.miterLimit=H,this.pdf.setMiterLimit(H))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(H){this.ctx.textBaseline=H}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(H){["right","end","center","left","start"].indexOf(H)!==-1&&(this.ctx.textAlign=H)}});var ue=null,Ce=null,Ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ee},set:function(H){ue=null,Ce=null,Ee=H}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(H){var je;if(this.ctx.font=H,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(H))!==null){var Je=je[1];je[2];var De=je[3],Se=je[4];je[5];var et=je[6],Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Se)[2];Se=Math.floor(Fe==="px"?parseFloat(Se)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(Se)*this.pdf.getFontSize():parseFloat(Se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Se);var Ke=function(qe){var zt,Pt,Nt=[],Ct=qe.trim();if(Ct==="")return Z1;if(Ct in XA)return[XA[Ct]];for(;Ct!=="";){switch(Pt=null,zt=(Ct=QA(Ct)).charAt(0)){case'"':case"'":Pt=HV(Ct.substring(1),zt);break;default:Pt=VV(Ct)}if(Pt===null||(Nt.push(Pt[0]),(Ct=QA(Pt[1]))!==""&&Ct.charAt(0)!==","))return Z1;Ct=Ct.replace(/^,/,"")}return Nt}(et);if(this.fontFaces){var tt=function(qe,zt){var Pt=qe.getFontList(),Nt=JSON.stringify(Pt);if(ue===null||Ce!==Nt){var Ct=function(wr){var st=[];return Object.keys(wr).forEach(function(lr){wr[lr].forEach(function(dt){var jt=null;switch(dt){case"bold":jt={family:lr,weight:"bold"};break;case"italic":jt={family:lr,style:"italic"};break;case"bolditalic":jt={family:lr,weight:"bold",style:"italic"};break;case"":case"normal":jt={family:lr}}jt!==null&&(jt.ref={name:lr,style:dt},st.push(jt))})}),st}(Pt);ue=function(wr){for(var st={},lr=0;lr<wr.length;++lr){var dt=X1(wr[lr]),jt=dt.family,_r=dt.stretch,Ot=dt.style,lt=dt.weight;st[jt]=st[jt]||{},st[jt][_r]=st[jt][_r]||{},st[jt][_r][Ot]=st[jt][_r][Ot]||{},st[jt][_r][Ot][lt]=dt}return st}(Ct.concat(zt)),Ce=Nt}return ue}(this.pdf,this.fontFaces),mt=Ke.map(function(qe){return{family:qe,stretch:"normal",weight:De,style:Je}}),vt=function(qe,zt,Pt){for(var Nt=(Pt=Pt||{}).defaultFontFamily||"times",Ct=Object.assign({},WV,Pt.genericFontFamilies||{}),wr=null,st=null,lr=0;lr<zt.length;++lr)if(Ct[(wr=X1(zt[lr])).family]&&(wr.family=Ct[wr.family]),qe.hasOwnProperty(wr.family)){st=qe[wr.family];break}if(!(st=st||qe[Nt]))throw new Error("Could not find a font-family for the rule '"+ZA(wr)+"' and default family '"+Nt+"'.");if(st=function(dt,jt){if(jt[dt])return jt[dt];var _r=X2[dt],Ot=_r<=X2.normal?-1:1,lt=JA(jt,rI,_r,Ot);if(!lt)throw new Error("Could not find a matching font-stretch value for "+dt);return lt}(wr.stretch,st),st=function(dt,jt){if(jt[dt])return jt[dt];for(var _r=tI[dt],Ot=0;Ot<_r.length;++Ot)if(jt[_r[Ot]])return jt[_r[Ot]];throw new Error("Could not find a matching font-style for "+dt)}(wr.style,st),!(st=function(dt,jt){if(jt[dt])return jt[dt];if(dt===400&&jt[500])return jt[500];if(dt===500&&jt[400])return jt[400];var _r=qV[dt],Ot=JA(jt,nI,_r,dt<400?-1:1);if(!Ot)throw new Error("Could not find a matching font-weight for value "+dt);return Ot}(wr.weight,st)))throw new Error("Failed to resolve a font for the rule '"+ZA(wr)+"'.");return st}(tt,mt);this.pdf.setFont(vt.ref.name,vt.ref.style)}else{var Xe="";(De==="bold"||parseInt(De,10)>=700||Je==="bold")&&(Xe="bold"),Je==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var ot="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ge=0;Ge<Ke.length;Ge++){if(this.pdf.internal.getFont(Ke[Ge],Xe,{noFallback:!0,disableWarning:!0})!==void 0){ot=Ke[Ge];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(Ke[Ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Ke[Ge],Xe="bold";else if(this.pdf.internal.getFont(Ke[Ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Ke[Ge],Xe="normal";break}}if(ot===""){for(var bt=0;bt<Ke.length;bt++)if(yt[Ke[bt]]){ot=yt[Ke[bt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(H){this.ctx.globalCompositeOperation=H}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(H){this.ctx.globalAlpha=H}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(H){this.ctx.lineDashOffset=H,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(H){this.ctx.lineDash=H,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(H){this.ctx.ignoreClearRect=!!H}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new s(R,z));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new s(R,z)},f.prototype.closePath=function(){var R=new s(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&er(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){R=new s(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(R.x,R.y)},f.prototype.lineTo=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new s(R,z));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new s(G.x,G.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,z,G,re){if(isNaN(G)||isNaN(re)||isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(G,re)),ce=this.ctx.transform.applyToPoint(new s(R,z));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},f.prototype.bezierCurveTo=function(R,z,G,re,ae,ce){if(isNaN(ae)||isNaN(ce)||isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re))throw ar.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new s(ae,ce)),Q=this.ctx.transform.applyToPoint(new s(R,z)),he=this.ctx.transform.applyToPoint(new s(G,re));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:he.x,y2:he.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new s(pe.x,pe.y)},f.prototype.arc=function(R,z,G,re,ae,ce){if(isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re)||isNaN(ae))throw ar.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new s(R,z));R=pe.x,z=pe.y;var Q=this.ctx.transform.applyToPoint(new s(0,G)),he=this.ctx.transform.applyToPoint(new s(0,0));G=Math.sqrt(Math.pow(Q.x-he.x,2)+Math.pow(Q.y-he.y,2))}Math.abs(ae-re)>=2*Math.PI&&(re=0,ae=2*Math.PI),this.path.push({type:"arc",x:R,y:z,radius:G,startAngle:re,endAngle:ae,counterclockwise:ce})},f.prototype.arcTo=function(R,z,G,re,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,z,G,re){if(isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re))throw ar.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,z),this.lineTo(R+G,z),this.lineTo(R+G,z+re),this.lineTo(R,z+re),this.lineTo(R,z),this.lineTo(R+G,z),this.lineTo(R,z)},f.prototype.fillRect=function(R,z,G,re){if(isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re))throw ar.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,z,G,re),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(R,z,G,re){if(isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re))throw ar.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(R,z,G,re),this.stroke())},f.prototype.clearRect=function(R,z,G,re){if(isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re))throw ar.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,z,G,re))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(z),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(R){var z,G,re,ae;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))z=0,G=0,re=0,ae=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(ce!==null)z=parseInt(ce[1]),G=parseInt(ce[2]),re=parseInt(ce[3]),ae=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)z=parseInt(ce[1]),G=parseInt(ce[2]),re=parseInt(ce[3]),ae=parseFloat(ce[4]);else{if(ae=1,typeof R=="string"&&R.charAt(0)!=="#"){var pe=new GT(R);R=pe.ok?pe.toHex():"#000000"}R.length===4?(z=R.substring(1,2),z+=z,G=R.substring(2,3),G+=G,re=R.substring(3,4),re+=re):(z=R.substring(1,3),G=R.substring(3,5),re=R.substring(5,7)),z=parseInt(z,16),G=parseInt(G,16),re=parseInt(re,16)}}return{r:z,g:G,b:re,a:ae,style:R}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,z,G,re){if(isNaN(z)||isNaN(G)||typeof R!="string")throw ar.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!h.call(this)){var ae=q(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;O.call(this,{text:R,x:z,y:G,scale:ce,angle:ae,align:this.textAlign,maxWidth:re})}},f.prototype.strokeText=function(R,z,G,re){if(isNaN(z)||isNaN(G)||typeof R!="string")throw ar.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){re=isNaN(re)?void 0:re;var ae=q(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;O.call(this,{text:R,x:z,y:G,scale:ce,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:re})}},f.prototype.measureText=function(R){if(typeof R!="string")throw ar.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,G=this.pdf.internal.scaleFactor,re=z.internal.getFontSize(),ae=z.getStringUnitWidth(R)*re/z.internal.scaleFactor;return new function(ce){var pe=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this}({width:ae*=Math.round(96*G/72*1e4)/1e4})},f.prototype.scale=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(R,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.rotate=function(R){if(isNaN(R))throw ar.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.translate=function(R,z){if(isNaN(R)||isNaN(z))throw ar.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,R,z);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.transform=function(R,z,G,re,ae,ce){if(isNaN(R)||isNaN(z)||isNaN(G)||isNaN(re)||isNaN(ae)||isNaN(ce))throw ar.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new c(R,z,G,re,ae,ce);this.ctx.transform=this.ctx.transform.multiply(pe)},f.prototype.setTransform=function(R,z,G,re,ae,ce){R=isNaN(R)?1:R,z=isNaN(z)?0:z,G=isNaN(G)?0:G,re=isNaN(re)?1:re,ae=isNaN(ae)?0:ae,ce=isNaN(ce)?0:ce,this.ctx.transform=new c(R,z,G,re,ae,ce)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,z,G,re,ae,ce,pe,Q,he){var oe=this.pdf.getImageProperties(R),ue=1,Ce=1,Ee=1,H=1;re!==void 0&&Q!==void 0&&(Ee=Q/re,H=he/ae,ue=oe.width/re*Q/re,Ce=oe.height/ae*he/ae),ce===void 0&&(ce=z,pe=G,z=0,G=0),re!==void 0&&Q===void 0&&(Q=re,he=ae),re===void 0&&Q===void 0&&(Q=oe.width,he=oe.height);var je=this.ctx.transform.decompose(),Je=q(je.rotate.shx),De=new c,Se=(De=(De=(De=De.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(ce-z*Ee,pe-G*H,re*ue,ae*Ce));if(this.autoPaging){for(var et,Fe=x.call(this,Se),Ke=[],tt=0;tt<Fe.length;tt+=1)Ke.indexOf(Fe[tt])===-1&&Ke.push(Fe[tt]);S(Ke);for(var mt=Ke[0],vt=Ke[Ke.length-1],Xe=mt;Xe<vt+1;Xe++){this.pdf.setPage(Xe);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=Xe===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=Xe===1?0:Ge+(Xe-2)*bt;if(this.ctx.clip_path.length!==0){var zt=this.path;et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(et,this.posX+this.margin[3],-qe+yt+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=zt}var Pt=JSON.parse(JSON.stringify(Se));Pt=_([Pt],this.posX+this.margin[3],-qe+yt+this.ctx.prevPageLastElemOffset)[0];var Nt=(Xe>mt||Xe<vt)&&v.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,bt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Je),Nt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",Se.x,Se.y,Se.w,Se.h,null,null,Je)};var x=function(R,z,G){var re=[];z=z||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":re.push(Math.floor((R.y+ae)/G)+1);break;case"arc":re.push(Math.floor((R.y+ae-R.radius)/G)+1),re.push(Math.floor((R.y+ae+R.radius)/G)+1);break;case"qct":var ce=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);re.push(Math.floor((ce.y+ae)/G)+1),re.push(Math.floor((ce.y+ce.h+ae)/G)+1);break;case"bct":var pe=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);re.push(Math.floor((pe.y+ae)/G)+1),re.push(Math.floor((pe.y+pe.h+ae)/G)+1);break;case"rect":re.push(Math.floor((R.y+ae)/G)+1),re.push(Math.floor((R.y+R.h+ae)/G)+1)}for(var Q=0;Q<re.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<re[Q];)g.call(this);return re},g=function(){var R=this.fillStyle,z=this.strokeStyle,G=this.font,re=this.lineCap,ae=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=z,this.font=G,this.lineCap=re,this.lineWidth=ae,this.lineJoin=ce},_=function(R,z,G){for(var re=0;re<R.length;re++)switch(R[re].type){case"bct":R[re].x2+=z,R[re].y2+=G;case"qct":R[re].x1+=z,R[re].y1+=G;default:R[re].x+=z,R[re].y+=G}return R},S=function(R){return R.sort(function(z,G){return z-G})},j=function(R,z){var G=this.fillStyle,re=this.strokeStyle,ae=this.lineCap,ce=this.lineWidth,pe=Math.abs(ce*this.ctx.transform.scaleX),Q=this.lineJoin;if(this.autoPaging){for(var he,oe,ue=JSON.parse(JSON.stringify(this.path)),Ce=JSON.parse(JSON.stringify(this.path)),Ee=[],H=0;H<Ce.length;H++)if(Ce[H].x!==void 0)for(var je=x.call(this,Ce[H]),Je=0;Je<je.length;Je+=1)Ee.indexOf(je[Je])===-1&&Ee.push(je[Je]);for(var De=0;De<Ee.length;De++)for(;this.pdf.internal.getNumberOfPages()<Ee[De];)g.call(this);S(Ee);for(var Se=Ee[0],et=Ee[Ee.length-1],Fe=Se;Fe<et+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=G,this.strokeStyle=re,this.lineCap=ae,this.lineWidth=pe,this.lineJoin=Q;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Fe===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Fe===1?0:mt+(Fe-2)*vt;if(this.ctx.clip_path.length!==0){var ot=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(he,this.posX+this.margin[3],-Xe+tt+this.ctx.prevPageLastElemOffset),A.call(this,R,!0),this.path=ot}if(oe=JSON.parse(JSON.stringify(ue)),this.path=_(oe,this.posX+this.margin[3],-Xe+tt+this.ctx.prevPageLastElemOffset),z===!1||Fe===0){var yt=(Fe>Se||Fe<et)&&v.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,vt,null).clip().discardPath()),A.call(this,R,z),yt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}this.path=ue}else this.lineWidth=pe,A.call(this,R,z),this.lineWidth=ce},A=function(R,z){if((R!=="stroke"||z||!y.call(this))&&(R==="stroke"||z||!h.call(this))){for(var G,re,ae=[],ce=this.path,pe=0;pe<ce.length;pe++){var Q=ce[pe];switch(Q.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:Q,deltas:[],abs:[]});break;case"lt":var he=ae.length;if(ce[pe-1]&&!isNaN(ce[pe-1].x)&&(G=[Q.x-ce[pe-1].x,Q.y-ce[pe-1].y],he>0)){for(;he>=0;he--)if(ae[he-1].close!==!0&&ae[he-1].begin!==!0){ae[he-1].deltas.push(G),ae[he-1].abs.push(Q);break}}break;case"bct":G=[Q.x1-ce[pe-1].x,Q.y1-ce[pe-1].y,Q.x2-ce[pe-1].x,Q.y2-ce[pe-1].y,Q.x-ce[pe-1].x,Q.y-ce[pe-1].y],ae[ae.length-1].deltas.push(G);break;case"qct":var oe=ce[pe-1].x+2/3*(Q.x1-ce[pe-1].x),ue=ce[pe-1].y+2/3*(Q.y1-ce[pe-1].y),Ce=Q.x+2/3*(Q.x1-Q.x),Ee=Q.y+2/3*(Q.y1-Q.y),H=Q.x,je=Q.y;G=[oe-ce[pe-1].x,ue-ce[pe-1].y,Ce-ce[pe-1].x,Ee-ce[pe-1].y,H-ce[pe-1].x,je-ce[pe-1].y],ae[ae.length-1].deltas.push(G);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(Q)}}re=z?null:R==="stroke"?"stroke":"fill";for(var Je=!1,De=0;De<ae.length;De++)if(ae[De].arc)for(var Se=ae[De].abs,et=0;et<Se.length;et++){var Fe=Se[et];Fe.type==="arc"?E.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,z,!Je):U.call(this,Fe.x,Fe.y),Je=!0}else if(ae[De].close===!0)this.pdf.internal.out("h"),Je=!1;else if(ae[De].begin!==!0){var Ke=ae[De].start.x,tt=ae[De].start.y;V.call(this,ae[De].deltas,Ke,tt),Je=!0}re&&C.call(this,re),z&&L.call(this)}},N=function(R){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-G;case"top":return R+z-G;case"hanging":return R+z-2*G;case"middle":return R+z/2-G;default:return R}},D=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(z,G){this.colorStops.push([z,G])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(R,z,G,re,ae,ce,pe,Q,he){for(var oe=ne.call(this,G,re,ae,ce),ue=0;ue<oe.length;ue++){var Ce=oe[ue];ue===0&&(he?I.call(this,Ce.x1+R,Ce.y1+z):U.call(this,Ce.x1+R,Ce.y1+z)),ie.call(this,R,z,Ce.x2,Ce.y2,Ce.x3,Ce.y3,Ce.x4,Ce.y4)}Q?L.call(this):C.call(this,pe)},C=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(R,z){this.pdf.internal.out(r(R)+" "+n(z)+" m")},O=function(R){var z;switch(R.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var G,re,ae,ce=this.pdf.getTextDimensions(R.text),pe=N.call(this,R.y),Q=D.call(this,pe)-ce.h,he=this.ctx.transform.applyToPoint(new s(R.x,pe));if(this.autoPaging){var oe=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var Ce=this.ctx.transform.applyToRectangle(new o(R.x,pe,ce.w,ce.h)),Ee=ue.applyToRectangle(new o(R.x,Q,ce.w,ce.h)),H=x.call(this,Ee),je=[],Je=0;Je<H.length;Je+=1)je.indexOf(H[Je])===-1&&je.push(H[Je]);S(je);for(var De=je[0],Se=je[je.length-1],et=De;et<Se+1;et++){this.pdf.setPage(et);var Fe=et===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],mt=tt-this.margin[0],vt=this.pdf.internal.pageSize.width-this.margin[1],Xe=vt-this.margin[3],ot=et===1?0:Ke+(et-2)*mt;if(this.ctx.clip_path.length!==0){var yt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(G,this.posX+this.margin[3],-1*ot+Fe),A.call(this,"fill",!0),this.path=yt}var Ge=_([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-ot+Fe+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*R.scale),ae=this.lineWidth,this.lineWidth=ae*R.scale);var bt=this.autoPaging!=="text";if(bt||Ge.y+Ge.h<=tt){if(bt||Ge.y>=Fe&&Ge.x<=vt){var qe=bt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||vt-Ge.x)[0],zt=_([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-ot+Fe+this.ctx.prevPageLastElemOffset)[0],Pt=bt&&(et>De||et<Se)&&v.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,mt,null).clip().discardPath()),this.pdf.text(qe,zt.x,zt.y,{angle:R.angle,align:z,renderingMode:R.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else Ge.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Ge.y);R.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ae)}}else R.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*R.scale),ae=this.lineWidth,this.lineWidth=ae*R.scale),this.pdf.text(R.text,he.x+this.posX,he.y+this.posY,{angle:R.angle,align:z,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ae)},U=function(R,z,G,re){G=G||0,re=re||0,this.pdf.internal.out(r(R+G)+" "+n(z+re)+" l")},V=function(R,z,G){return this.pdf.lines(R,z,G,null,null)},ie=function(R,z,G,re,ae,ce,pe,Q){this.pdf.internal.out([t(i(G+R)),t(a(re+z)),t(i(ae+R)),t(a(ce+z)),t(i(pe+R)),t(a(Q+z)),"c"].join(" "))},ne=function(R,z,G,re){for(var ae=2*Math.PI,ce=Math.PI/2;z>G;)z-=ae;var pe=Math.abs(G-z);pe<ae&&re&&(pe=ae-pe);for(var Q=[],he=re?-1:1,oe=z;pe>1e-5;){var ue=oe+he*Math.min(pe,ce);Q.push(ee.call(this,R,oe,ue)),pe-=Math.abs(ue-oe),oe=ue}return Q},ee=function(R,z,G){var re=(G-z)/2,ae=R*Math.cos(re),ce=R*Math.sin(re),pe=ae,Q=-ce,he=pe*pe+Q*Q,oe=he+pe*ae+Q*ce,ue=4/3*(Math.sqrt(2*he*oe)-oe)/(pe*ce-Q*ae),Ce=pe-ue*Q,Ee=Q+ue*pe,H=Ce,je=-Ee,Je=re+z,De=Math.cos(Je),Se=Math.sin(Je);return{x1:R*Math.cos(z),y1:R*Math.sin(z),x2:Ce*De-Ee*Se,y2:Ce*Se+Ee*De,x3:H*De-je*Se,y3:H*Se+je*De,x4:R*Math.cos(G),y4:R*Math.sin(G)}},q=function(R){return 180*R/Math.PI},Y=function(R,z,G,re,ae,ce){var pe=R+.5*(G-R),Q=z+.5*(re-z),he=ae+.5*(G-ae),oe=ce+.5*(re-ce),ue=Math.min(R,ae,pe,he),Ce=Math.max(R,ae,pe,he),Ee=Math.min(z,ce,Q,oe),H=Math.max(z,ce,Q,oe);return new o(ue,Ee,Ce-ue,H-Ee)},fe=function(R,z,G,re,ae,ce,pe,Q){var he,oe,ue,Ce,Ee,H,je,Je,De,Se,et,Fe,Ke,tt,mt=G-R,vt=re-z,Xe=ae-G,ot=ce-re,yt=pe-ae,Ge=Q-ce;for(oe=0;oe<41;oe++)De=(je=(ue=R+(he=oe/40)*mt)+he*((Ee=G+he*Xe)-ue))+he*(Ee+he*(ae+he*yt-Ee)-je),Se=(Je=(Ce=z+he*vt)+he*((H=re+he*ot)-Ce))+he*(H+he*(ce+he*Ge-H)-Je),oe==0?(et=De,Fe=Se,Ke=De,tt=Se):(et=Math.min(et,De),Fe=Math.min(Fe,Se),Ke=Math.max(Ke,De),tt=Math.max(tt,Se));return new o(Math.round(et),Math.round(Fe),Math.round(Ke-et),Math.round(tt-Fe))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,z,G=(R=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:z}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(at.API),function(e){var t=function(s){var o,c,u,d,f,p,h,y,v,x;for(c=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(v=f%85))/85)-(y=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,y+33,v+33,x+33)):c.push(122);return function(g,_){for(var S=_;S>0;S--)g.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var o,c,u,d,f,p=String,h="length",y=255,v="charCodeAt",x="slice",g="replace";for(s[x](-2),s=s[x](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[x](s[h]%5||5))[h];f>d;d+=5)c=52200625*(s[v](d)-33)+614125*(s[v](d+1)-33)+7225*(s[v](d+2)-33)+85*(s[v](d+3)-33)+(s[v](d+4)-33),u.push(y&c>>24,y&c>>16,y&c>>8,y&c);return function(_,S){for(var j=S;j>0;j--)_.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},a=function(s){for(var o=new Uint8Array(s.length),c=s.length;c--;)o[c]=s.charCodeAt(c);return(o=W2(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var c=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(at.API),function(e){e.loadFile=function(t,r,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,p=0,h=function(y){var v=y.length,x=[],g=String.fromCharCode;for(p=0;p<v;p+=1)x.push(g(255&y.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(t,r,n)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}(at.API),function(e){function t(){return(gt.html2canvas?Promise.resolve(gt.html2canvas):I1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(gt.DOMPurify?Promise.resolve(gt.DOMPurify):I1(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=er(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(o,c){var u=document.createElement(o);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},a=function o(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},s=function o(c){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,c){return o.__proto__=c||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var y=d[h],v=y.src.find(function(x){return x.format==="truetype"});v&&u.addFont(v.url,y.ref.name,y.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},s.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(o,c){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return c?c(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||at.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,c,u,d){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,c,u,d){return this.setProgress(o?this.progress.val+o:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,c){var u=this;return this.thenCore(o,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,c,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,c);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},s.prototype.thenList=function(o){var c=this;return o.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return s.convert(c,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,at.getPageSize=function(o,c,u){if(er(o)==="object"){var d=o;o=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var y,v=0,x=0;if(h.hasOwnProperty(p))v=h[p][1]/f,x=h[p][0]/f;else try{v=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",x>v&&(y=x,x=v,v=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>x&&(y=x,x=v,v=y)}return{width:x,height:v,unit:c,k:f,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(X1):null;var u=new s(c);return c.worker?u:u.from(o).doCallback()}}(at.API),at.API.addJS=function(e){return t4=e,this.internal.events.subscribe("postPutResources",function(){hv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+t4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hv!==void 0&&e4!==void 0&&this.internal.out("/Names <</JavaScript "+hv+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var f=r.internal.newObject();d.push(f);var p=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(at.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,a,s,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,v={width:0,height:0,numcomponents:1},x=4;x<y;x+=2){if(x+=h,t.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),v={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return d}}(at.API),at.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=PV(e,{checkCrc:!0}),s=a.width,o=a.height,c=a.channels,u=a.palette,d=a.depth;i=u&&c===1?function(E){for(var C=E.width,L=E.height,I=E.data,O=E.palette,U=E.depth,V=!1,ie=[],ne=[],ee=void 0,q=!1,Y=0,fe=0;fe<O.length;fe++){var te=aA(O[fe],4),R=te[0],z=te[1],G=te[2],re=te[3];ie.push(R,z,G),re!=null&&(re===0?(Y++,ne.length<1&&ne.push(fe)):re<255&&(q=!0))}if(q||Y>1){V=!0,ne=void 0;var ae=C*L;ee=new Uint8Array(ae);for(var ce=new DataView(I.buffer),pe=0;pe<ae;pe++){var Q=Q1(ce,pe,U),he=aA(O[Q],4)[3];ee[pe]=he}}else Y===0&&(ne=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:V?8:void 0,colorBytes:I,alphaBytes:ee,needSMask:V,palette:ie,mask:ne}}(a):c===2||c===4?function(E){for(var C=E.data,L=E.width,I=E.height,O=E.channels,U=E.depth,V=O===2?"DeviceGray":"DeviceRGB",ie=O-1,ne=L*I,ee=ie,q=ne*ee,Y=1*ne,fe=Math.ceil(q*U/8),te=Math.ceil(Y*U/8),R=new Uint8Array(fe),z=new Uint8Array(te),G=new DataView(C.buffer),re=new DataView(R.buffer),ae=new DataView(z.buffer),ce=!1,pe=0;pe<ne;pe++){for(var Q=pe*O,he=0;he<ee;he++)u4(re,Q1(G,Q+he,U),pe*ee+he,U);var oe=Q1(G,Q+ee,U);oe<(1<<U)-1&&(ce=!0),u4(ae,oe,1*pe,U)}return{colorSpace:V,colorsPerPixel:ie,sMaskBitsPerComponent:ce?U:void 0,colorBytes:R,alphaBytes:z,needSMask:ce}}(a):function(E){var C=E.data,L=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:C instanceof Uint16Array?function(I){for(var O=I.length,U=new Uint8Array(2*O),V=new DataView(U.buffer,U.byteOffset,U.byteLength),ie=0;ie<O;ie++)V.setUint16(2*ie,I[ie],!1);return U}(C):C,needSMask:!1}}(a);var f,p,h,y=i,v=y.colorSpace,x=y.colorsPerPixel,g=y.sMaskBitsPerComponent,_=y.colorBytes,S=y.alphaBytes,j=y.needSMask,A=y.palette,N=y.mask,D=null;return n!==at.API.image_compression.NONE&&typeof W2=="function"?(D=function(E){var C;switch(E){case at.API.image_compression.FAST:C=11;break;case at.API.image_compression.MEDIUM:C=13;break;case at.API.image_compression.SLOW:C=14;break;default:C=12}return C}(n),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(D," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=a4(_,Math.ceil(s*x*d/8),x,d,n),j&&(h=a4(S,Math.ceil(s*g/8),1,g,n))):(f=void 0,p=void 0,e=_,j&&(h=S)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:p,transparency:N,palette:A,sMask:h,predictor:D,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:g,colorSpace:v}}},function(e){e.processGIF89A=function(t,r,n,i){var a=new JV(t),s=a.width,o=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:o},d=new eb(100).encode(u,100);return e.processJPEG.call(this,d,r,n,i)},e.processGIF87A=e.processGIF89A}(at.API),Ra.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ra.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ar.log("bit decode error:"+r)}},Ra.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[a>>7-o&1];this.data[s+4*o]=c.blue,this.data[s+4*o+1]=c.green,this.data[s+4*o+2]=c.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ra.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,c=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Ra.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Ra.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,u=a>>15?255:0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},Ra.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Ra.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Ra.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},Ra.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,i){var a=new Ra(t,!1),s=a.width,o=a.height,c={data:a.getData(),width:s,height:o},u=new eb(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)}}(at.API),f4.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,i){var a=new f4(t),s=a.width,o=a.height,c={data:a.getData(),width:s,height:o},u=new eb(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)}}(at.API),at.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var d=n[u],f=n[u+1],p=n[u+2],h=n[u+3];a[o++]=d,a[o++]=f,a[o++]=p,s[c++]=h}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},at.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bu=at.API,pv=Bu.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,p=0,h=e.length,y=0,v=o[0]||c,x=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(p=f&&er(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/d:0,x.push((o[n]||v)/c+p)),y=n;return x},r4=Bu.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Bu.processArabic&&(e=Bu.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:pv.apply(this,arguments).reduce(function(a,s){return a+s},0)},n4=function(e,t,r,n){for(var i=[],a=0,s=e.length,o=0;a!==s&&o+t[a]<r;)o+=t[a],a++;i.push(e.slice(0,a));var c=a;for(o=0;a!==s;)o+t[a]>n&&(i.push(e.slice(c,a)),o=0,c=a),o+=t[a],a++;return c!==a&&i.push(e.slice(c,a)),i},i4=function(e,t,r){r||(r={});var n,i,a,s,o,c,u,d=[],f=[d],p=r.textIndent||0,h=0,y=0,v=e.split(" "),x=pv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var g=Array(c).join(" "),_=[];v.map(function(j){(j=j.split(/\s*\n/)).length>1?_=_.concat(j.map(function(A,N){return(N&&A.length?`
`:"")+A})):_.push(j[0])}),v=_,c=r4.apply(this,[g,r])}for(a=0,s=v.length;a<s;a++){var S=0;if(n=v[a],c&&n[0]==`
`&&(n=n.substr(1),S=1),p+h+(y=(i=pv.apply(this,[n,r])).reduce(function(j,A){return j+A},0))>t||S){if(y>t){for(o=n4.apply(this,[n,i,t-(p+h),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);y=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,A){return j+A},0)}else d=[n];f.push(d),p=y+c,h=x}else d.push(n),p+=h+y,h=x}return u=c?function(j,A){return(A?g:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},Bu.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(i4.apply(this,[n[o],s,a]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=t[a],i[t[a]]=r[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=e.__fontmetrics__.compress=function(p){var h,y,v,x,g=["{"];for(var _ in p){if(h=p[_],isNaN(parseInt(_,10))?y="'"+_+"'":(_=parseInt(_,10),y=(y=s(_).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof h=="number")h<0?(v=s(h).slice(3),x="-"):(v=s(h).slice(2),x=""),v=x+v.slice(0,-1)+i[v.slice(-1)];else{if(er(h)!=="object")throw new Error("Don't know what to do with value type "+er(h)+".");v=o(h)}g.push(y+v)}return g.push("}"),g.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,y,v,x,g={},_=1,S=g,j=[],A="",N="",D=p.length-1,E=1;E<D;E+=1)(x=p[E])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(j.push([S,v]),S={},v=void 0):x=="}"?((y=j.pop())[0][y[1]]=S,v=void 0,S=y[0]):x=="-"?_=-1:v===void 0?n.hasOwnProperty(x)?(A+=n[x],v=parseInt(A,16)*_,_=1,A=""):A+=x:n.hasOwnProperty(x)?(N+=n[x],S[v]=parseInt(N,16)*_,_=1,v=void 0,N=""):N+=x;return g},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var h=p.font,y=f.Unicode[h.postScriptName];y&&(h.metadata.Unicode={},h.metadata.Unicode.widths=y.widths,h.metadata.Unicode.kerning=y.kerning);var v=d.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(at.API),function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Hv(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(at),at.API.addSvgAsImage=function(e,t,r,n,i,a,s,o){if(isNaN(t)||isNaN(r))throw ar.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw ar.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(gt.canvg?Promise.resolve(gt.canvg):I1(()=>import("./index.es-Dji0stQm.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,i,s,o)})},at.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},at.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),c=[],u=0,d=0,f=0;function p(y,v){var x,g=!1;for(x=0;x<y.length;x+=1)y[x]===v&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=o.length;for(f=0;f<h;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(er(e)==="object"){for(i in e)if(a=e[i],p(o,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&p(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(at.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,s){for(var o,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=a.length;f<p;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(a){var s,o,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(o=Object.keys(a).sort(function(h,y){return h-y})).length;f<p;f++)s=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",y=0;y<p.length;y++)h+=String.fromCharCode(p[y]);var v=u();d({data:h,addLength1:!0,objectId:v}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var g=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Gu(o.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var _=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Gu(o.fontName)),c("/FontDescriptor "+g+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Gu(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+_+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var y=u();d({data:p,addLength1:!0,objectId:y}),c("endobj");var v=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var x=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Gu(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var g=0;g<o.metadata.hmtx.widths.length;g++)o.metadata.hmtx.widths[g]=parseInt(o.metadata.hmtx.widths[g]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Gu(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",c=a.x,u=a.y,d=a.options||{},f=a.mutex||{},p=f.pdfEscape,h=f.activeFontKey,y=f.fonts,v=h,x="",g=0,_="",S=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(_=o,v=h,Array.isArray(o)&&(_=o[0]),g=0;g<_.length;g+=1)y[v].metadata.hasOwnProperty("cmap")&&(s=y[v].metadata.cmap.unicode.codeMap[_[g].charCodeAt(0)]),s||_[g].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?x+=_[g]:x+="";var j="";return parseInt(v.slice(1))<14||S==="WinAnsiEncoding"?j=p(x,v).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(j=r(x,y[v])),f.isHex=!0,{text:j,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(a){var s=a.text||"",o=[],c={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([i(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(i(Object.assign({},c,{text:s[u]})).text);a.text=o}else a.text=i(Object.assign({},c,{text:s})).text}])}(at),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(at.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,a,s,o,c,u,d,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var j=function(I){var O=I.charCodeAt(),U=O>>8,V=v[U];return V!==void 0?f[256*V+(255&O)]:U===252||U===253?"AL":g.test(U)?"L":U===8?"R":"N"},A=function(I){for(var O,U=0;U<I.length;U++){if((O=j(I.charAt(U)))==="L")return!1;if(O==="R")return!0}return!1},N=function(I,O,U,V){var ie,ne,ee,q,Y=O[V];switch(Y){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"N":case"AN":break;case"EN":_&&(Y="AN");break;case"AL":_=!0,Y="R";break;case"WS":case"BN":Y="N";break;case"CS":V<1||V+1>=O.length||(ie=U[V-1])!=="EN"&&ie!=="AN"||(ne=O[V+1])!=="EN"&&ne!=="AN"?Y="N":_&&(ne="AN"),Y=ne===ie?ne:"N";break;case"ES":Y=(ie=V>0?U[V-1]:"B")==="EN"&&V+1<O.length&&O[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&U[V-1]==="EN"){Y="EN";break}if(_){Y="N";break}for(ee=V+1,q=O.length;ee<q&&O[ee]==="ET";)ee++;Y=ee<q&&O[ee]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(q=O.length,ee=V+1;ee<q&&O[ee]==="NSM";)ee++;if(ee<q){var fe=I[V],te=fe>=1425&&fe<=2303||fe===64286;if(ie=O[ee],te&&(ie==="R"||ie==="AL")){Y="R";break}}}Y=V<1||(ie=O[V-1])==="B"?"N":U[V-1];break;case"B":_=!1,i=!0,Y=S;break;case"S":a=!0,Y="N"}return Y},D=function(I,O,U){var V=I.split("");return U&&E(V,U,{hiLevel:S}),V.reverse(),O&&O.reverse(),V.join("")},E=function(I,O,U){var V,ie,ne,ee,q,Y=-1,fe=I.length,te=0,R=[],z=S?h:p,G=[];for(_=!1,i=!1,a=!1,ie=0;ie<fe;ie++)G[ie]=j(I[ie]);for(ne=0;ne<fe;ne++){if(q=te,R[ne]=N(I,G,R,ne),V=240&(te=z[q][y[R[ne]]]),te&=15,O[ne]=ee=z[te][5],V>0)if(V===16){for(ie=Y;ie<ne;ie++)O[ie]=1;Y=-1}else Y=-1;if(z[te][6])Y===-1&&(Y=ne);else if(Y>-1){for(ie=Y;ie<ne;ie++)O[ie]=ee;Y=-1}G[ne]==="B"&&(O[ne]=0),U.hiLevel|=ee}a&&function(re,ae,ce){for(var pe=0;pe<ce;pe++)if(re[pe]==="S"){ae[pe]=S;for(var Q=pe-1;Q>=0&&re[Q]==="WS";Q--)ae[Q]=S}}(G,O,fe)},C=function(I,O,U,V,ie){if(!(ie.hiLevel<I)){if(I===1&&S===1&&!i)return O.reverse(),void(U&&U.reverse());for(var ne,ee,q,Y,fe=O.length,te=0;te<fe;){if(V[te]>=I){for(q=te+1;q<fe&&V[q]>=I;)q++;for(Y=te,ee=q-1;Y<ee;Y++,ee--)ne=O[Y],O[Y]=O[ee],O[ee]=ne,U&&(ne=U[Y],U[Y]=U[ee],U[ee]=ne);te=q}te++}}},L=function(I,O,U){var V=I.split(""),ie={hiLevel:S};return U||(U=[]),E(V,U,ie),function(ne,ee,q){if(q.hiLevel!==0&&d)for(var Y,fe=0;fe<ne.length;fe++)ee[fe]===1&&(Y=x.indexOf(ne[fe]))>=0&&(ne[fe]=x[Y+1])}(V,U,ie),C(2,V,O,U,ie),C(1,V,O,U,ie),V.join("")};return this.__bidiEngine__.doBidiReorder=function(I,O,U){if(function(ie,ne){if(ne)for(var ee=0;ee<ie.length;ee++)ne[ee]=ee;o===void 0&&(o=A(ie)),u===void 0&&(u=A(ie))}(I,O),s||!c||u)if(s&&c&&o^u)S=o?1:0,I=D(I,O,U);else if(!s&&c&&u)S=o?1:0,I=L(I,O,U),I=D(I,O);else if(!s||o||c||u){if(s&&!c&&o^u)I=D(I,O),o?(S=0,I=L(I,O,U)):(S=1,I=L(I,O,U),I=D(I,O));else if(s&&o&&!c&&u)S=1,I=L(I,O,U),I=D(I,O);else if(!s&&!c&&o^u){var V=d;o?(S=1,I=L(I,O,U),S=0,d=!1,I=L(I,O,U),d=V):(S=0,I=L(I,O,U),I=D(I,O),S=1,d=!1,I=L(I,O,U),d=V,I=D(I,O))}}else S=0,I=L(I,O,U);else S=o?1:0,I=L(I,O,U);return I},this.__bidiEngine__.setOptions=function(I){I&&(s=I.isInputVisual,c=I.isOutputVisual,o=I.isInputRtl,u=I.isOutputRtl,d=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([r.doBidiReorder(i[o])]);n.text=s}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(at),at.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Cl(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new dK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new XV(this.contents),this.head=new QV(this),this.name=new iK(this),this.cmap=new aI(this),this.toUnicode={},this.hhea=new eK(this),this.maxp=new aK(this),this.hmtx=new sK(this),this.post=new rK(this),this.os2=new tK(this),this.loca=new uK(this),this.glyf=new oK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,c,u;for(u=[],s=0,o=(c=this.bbox).length;s<o;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,a,s,o;for(s=0,a=0,o=(t=""+t).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=t.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Za,Cl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,a,s,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)r=t[n],a.push(this.writeByte(r));return a},e}(),XV=function(){var e;function t(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,a,s,o,c,u,d,f,p,h,y,v;for(v in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),s=Math.floor(f/c),d=16*h-f,(i=new Cl).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(d),a=16*h,u=i.pos+a,o=null,y=[],r)for(p=r[v],i.writeString(v),i.writeInt(e(p)),i.writeInt(u),i.writeInt(p.length),y=y.concat(p),v==="head"&&(o=u),u+=p.length;u%4;)y.push(0),u++;return i.write(y),n=2981146554-e(i.data),i.pos=o+8,i.writeUInt32(n),i.data},e=function(r){var n,i,a,s;for(r=sI.call(r);r.length%4;)r.push(0);for(a=new Cl(r),i=0,n=0,s=r.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),ZV={}.hasOwnProperty,Ls=function(e,t){for(var r in t)ZV.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Za=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var QV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Cl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),h4=function(){function e(t,r){var n,i,a,s,o,c,u,d,f,p,h,y,v,x,g,_,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,a=function(){var j,A;for(A=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)A.push(t.readUInt16());return A}(),t.pos+=2,v=function(){var j,A;for(A=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)A.push(t.readUInt16());return A}(),u=function(){var j,A;for(A=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)A.push(t.readUInt16());return A}(),d=function(){var j,A;for(A=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)A.push(t.readUInt16());return A}(),i=(this.length-t.pos+this.offset)/2,o=function(){var j,A;for(A=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)A.push(t.readUInt16());return A}(),c=g=0,S=a.length;g<S;c=++g)for(x=a[c],n=_=y=v[c];y<=x?_<=x:_>=x;n=y<=x?++_:--_)d[c]===0?s=n+u[c]:(s=o[d[c]/2+(n-y)-(p-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,i,a,s,o,c,u,d,f,p,h,y,v,x,g,_,S,j,A,N,D,E,C,L,I,O,U,V,ie,ne,ee,q,Y,fe,te,R,z,G,re,ae,ce,pe,Q,he,oe,ue;switch(V=new Cl,s=Object.keys(t).sort(function(Ce,Ee){return Ce-Ee}),r){case"macroman":for(v=0,x=function(){var Ce=[];for(y=0;y<256;++y)Ce.push(0);return Ce}(),_={0:0},a={},ie=0,Y=s.length;ie<Y;ie++)_[Q=t[i=s[ie]]]==null&&(_[Q]=++v),a[i]={old:t[i],new:_[t[i]]},x[i]=_[t[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(x),{charMap:a,subtable:V.data,maxGlyphID:v+1};case"unicode":for(O=[],f=[],S=0,_={},n={},g=u=null,ne=0,fe=s.length;ne<fe;ne++)_[A=t[i=s[ne]]]==null&&(_[A]=++S),n[i]={old:A,new:_[A]},o=_[A]-i,g!=null&&o===u||(g&&f.push(g),O.push(i),u=o),g=i;for(g&&f.push(g),f.push(65535),O.push(65535),L=2*(C=O.length),E=2*Math.pow(Math.log(C)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,D=2*C-E,c=[],N=[],h=[],y=ee=0,te=O.length;ee<te;y=++ee){if(I=O[y],d=f[y],I===65535){c.push(0),N.push(0);break}if(I-(U=n[I].new)>=32768)for(c.push(0),N.push(2*(h.length+C-y)),i=q=I;I<=d?q<=d:q>=d;i=I<=d?++q:--q)h.push(n[i].new);else c.push(U-I),N.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*C+2*h.length),V.writeUInt16(0),V.writeUInt16(L),V.writeUInt16(E),V.writeUInt16(p),V.writeUInt16(D),ce=0,R=f.length;ce<R;ce++)i=f[ce],V.writeUInt16(i);for(V.writeUInt16(0),pe=0,z=O.length;pe<z;pe++)i=O[pe],V.writeUInt16(i);for(he=0,G=c.length;he<G;he++)o=c[he],V.writeUInt16(o);for(oe=0,re=N.length;oe<re;oe++)j=N[oe],V.writeUInt16(j);for(ue=0,ae=h.length;ue<ae;ue++)v=h[ue],V.writeUInt16(v);return{charMap:n,subtable:V.data,maxGlyphID:S+1}}},e}(),aI=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new h4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=h4.encode(t,r),(i=new Cl).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),eK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),tK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),rK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var s,o,c;for(c=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)c.push(t.readUInt32());return c}).call(this)}},e}(),nK=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},iK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,a,s,o,c,u,d,f,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},a=d=0,f=n.length;d<f;a=++d)i=n[a],t.pos=i.offset,u=t.readString(i.length),s=new nK(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),aK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),sK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,a,s,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)a=f[u],p.push(a.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),sI=[].slice,oK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,a,s,o,c,u,d,f;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(o=new Cl(r.read(i))).readShort(),u=o.readShort(),f=o.readShort(),c=o.readShort(),d=o.readShort(),this.cache[t]=s===-1?new cK(o,u,f,c,d):new lK(o,s,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,a,s,o,c;for(s=[],a=[],o=0,c=r.length;o<c;o++)i=t[r[o]],a.push(s.length),i&&(s=s.concat(i.encode(n)));return a.push(s.length),{table:s,offsets:a}},e}(),lK=function(){function e(t,r,n,i,a,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),cK=function(){function e(t,r,n,i,a){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Cl(sI.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),uK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ls(e,Za),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<n.length;++s)if(n[s]=i,a<r.length&&r[a]==s){++a,n[s]=i;var o=this.offsets[s],c=this.offsets[s+1]-o;c>0&&(i+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),dK=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,a,s,o,c;for(i={},s=0,o=t.length;s<o;s++)i[a=t[s]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))n=c[a],i[a]=n;return i},e.prototype.encode=function(t,r){var n,i,a,s,o,c,u,d,f,p,h,y,v,x,g;for(i in n=aI.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},g=n.charMap)h[(c=g[i]).old]=c.new;for(y in p=n.maxGlyphID,s)y in h||(h[y]=p++);return d=function(_){var S,j;for(S in j={},_)j[_[S]]=S;return j}(h),f=Object.keys(d).sort(function(_,S){return _-S}),v=function(){var _,S,j;for(j=[],_=0,S=f.length;_<S;_++)o=f[_],j.push(d[o]);return j}(),a=this.font.glyf.encode(s,v,h),u=this.font.loca.encode(a.offsets,v),x={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();at.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,a,s;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)s=r[i],a.push("/"+i+" "+t.convert(s));return a.push(">>"),a.join(`
`)}return""+r},t}();function oI(e,t,r,n,i){n=n||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,c=i.getLineHeightFactor?i.getLineHeightFactor():a,u=o*c,d=/\r\n|\r|\n/g,f="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,p=f.length||1),r+=o*(2-a),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),f&&p>=1){for(var y=0;y<f.length;y++)i.text(f[y],t-i.getStringUnitWidth(f[y])*h,r),r+=u;return i}t-=i.getStringUnitWidth(e)*h}return n.halign==="justify"?i.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(e,t,r),i}var p4={},jd=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:p4=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,i,a;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=e.unifyColor(t.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,i,a){return this.jsPDFDocument.rect(t,r,n,i,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return p4||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Z2=function(e,t){return Z2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Z2(e,t)};function lI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Z2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var cI=function(e){lI(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function fK(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function hK(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Mg(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],i=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function uI(e,t,r,n){var i=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:a});var s=dI(i,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function dI(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function c0(e,t){var r,n,i,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function fI(e,t){var r=c0(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function pK(e,t,r,n,i){var a={},s=1.3333333333333333,o=tb(t,function(S){return i.getComputedStyle(S).backgroundColor});o!=null&&(a.fillColor=o);var c=tb(t,function(S){return i.getComputedStyle(S).color});c!=null&&(a.textColor=c);var u=vK(n,r);u&&(a.cellPadding=u);var d="borderTopColor",f=s*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var y=tb(t,function(S){return i.getComputedStyle(S)[d]});y!=null&&(a.lineColor=y);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(a.fontSize=x/s);var g=mK(n);g&&(a.fontStyle=g);var _=(n.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(a.font=_),a}function mK(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function tb(e,t){var r=hI(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function hI(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:hI(e.parentElement,t):r}function vK(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(o){return parseInt(o||"0")/n}),s=c0(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function pI(e,t,r,n,i){var a,s;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var y=o.rows[h],v=(s=(a=y==null?void 0:y.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=gK(c,u,r,y,n,i);x&&(v==="thead"?d.push(x):v==="tfoot"?p.push(x):f.push(x))}return{head:d,body:f,foot:p}}function gK(e,t,r,n,i,a){for(var s=new cI(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(i||u.display!=="none"){var d=void 0;a&&(d=pK(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:yK(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(i||f.display!=="none"))return s}function yK(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function xK(e,t,r){for(var n=0,i=[e,t,r];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function co(e,t,r,n,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a}function mI(e,t){var r=new jd(e),n=r.getDocumentOptions(),i=r.getGlobalOptions();xK(i,n,t);var a=co({},i,n,t),s;typeof window<"u"&&(s=window);var o=bK(i,n,t),c=wK(i,n,t),u=_K(r,a),d=SK(r,a,s);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function bK(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=co({},u,d,f)}else{var p=[e,t,r],h=p.map(function(y){return y[c]||{}});n[c]=co({},h[0],h[1],h[2])}},a=0,s=Object.keys(n);a<s.length;a++){var o=s[a];i(o)}return n}function wK(e,t,r){for(var n=[e,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=n;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function _K(e,t){var r,n,i,a,s,o,c,u,d,f,p,h,y=c0(t.margin,40/e.scaleFactor()),v=(r=jK(e,t.startY))!==null&&r!==void 0?r:y.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var g;t.showHead===!0?g="everyPage":t.showHead===!1?g="never":g=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var _=(a=t.useCss)!==null&&a!==void 0?a:!1,S=t.theme||(_?"plain":"striped"),j=!!t.horizontalPageBreak,A=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:_,theme:S,startY:v,margin:y,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:g,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:j,horizontalPageBreakRepeat:A,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function jK(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),i=e.pageNumber(),a=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;a=s===i}return typeof t=="number"?t:(t==null||t===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function SK(e,t,r){var n=t.head||[],i=t.body||[],a=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=pI(e,t.html,r,s,t.useCss)||{};n=o.head||n,i=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||NK(n,i,a);return{columns:c,head:n,body:i,foot:a}}function NK(e,t,r){var n=e[0]||t[0]||r[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=i.length:u=a+(c>0?"_".concat(c):"");var d={dataKey:u};i.push(d)}}),i}var Q2=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),kK=function(e){lI(t,e);function t(r,n,i,a,s,o){var c=e.call(this,r,n,o)||this;return c.cell=i,c.row=a,c.column=s,c.section=a.section,c}return t}(Q2),AK=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,i,a,s){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new kK(t,this,n,i,a,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new Q2(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new Q2(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),vI=function(){function e(t,r,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof cI&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,i){var a;return Math.max(n,((a=r.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(i,a){var s=n.cells[a.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+o;return u>i?u:i},0)},e}(),gI=function(){function e(t,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=c0(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),EK=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,i=t.allRows();n<i.length;n++){var a=i[n],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function PK(e,t){CK(e,t);var r=[],n=0;t.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(t);s?a.width=s:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var i=t.getWidth(e.pageSize().width)-n;i&&(i=ew(r,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=ew(r,i,function(a){return a.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),TK(t),IK(t,e),OK(t)}function CK(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,i=fI(e,t);t.allRows().forEach(function(a){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=a.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,a,c,null);var f=u.padding("horizontal");u.contentWidth=Mg(u.text,u.styles,e)+f;var p=Mg(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(a){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=a.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function ew(e,t,r){for(var n=t,i=e.reduce(function(h,y){return h+y.wrappedWidth},0),a=0;a<e.length;a++){var s=e[a],o=s.wrappedWidth/i,c=n*o,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(h){return t<0?h.width>r(h):!0});p.length&&(t=ew(p,t,r))}return t}function OK(e){for(var t={},r=1,n=e.allRows(),i=0;i<n.length;i++)for(var a=n[i],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=t[c.index];if(r>1)r--,delete a.cells[c.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var f=n.length-i,p=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:p,row:a}}}}}function TK(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],i=null,a=0,s=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(s-=1,s>1&&e.columns[o+1])a+=c.width,delete n.cells[c.index];else if(i){var u=i;delete n.cells[c.index],i=null,u.width=c.width+a}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,a=0,u.colSpan>1){i=u,a+=c.width;continue}u.width=c.width+a}}}function IK(e,t){for(var r={count:0,height:0},n=0,i=e.allRows();n<i.length;n++){for(var a=i[n],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=a.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=m4(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=m4(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>a.height&&(a.height=p)}}r.count--}}function m4(e,t,r,n,i){return e.map(function(a){return LK(a,t,r,n,i)})}function LK(e,t,r,n,i){var a=1e4*n.scaleFactor();if(t=Math.ceil(t*a)/a,t>=Mg(e,r,n))return e;for(;t<Mg(e+i,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function yI(e,t){var r=new jd(e),n=DK(t,r.scaleFactor()),i=new AK(t,n);return PK(r,i),r.applyStyles(r.userStyles),i}function DK(e,t){var r=e.content,n=MK(r.columns);if(r.head.length===0){var i=v4(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=v4(n,"foot");i&&r.foot.push(i)}var a=e.settings.theme,s=e.styles;return{columns:n,head:rb("head",r.head,n,s,a,t),body:rb("body",r.body,n,s,a,t),foot:rb("foot",r.foot,n,s,a,t)}}function rb(e,t,r,n,i,a){var s={},o=t.map(function(c,u){for(var d=0,f={},p=0,h=0,y=0,v=r;y<v.length;y++){var x=v[y];if(s[x.index]==null||s[x.index].left===0)if(h===0){var g=void 0;Array.isArray(c)?g=c[x.index-p-d]:g=c[x.dataKey];var _={};typeof g=="object"&&!Array.isArray(g)&&(_=(g==null?void 0:g.styles)||{});var S=FK(e,x,u,i,n,a,_),j=new gI(g,S,e);f[x.dataKey]=j,f[x.index]=j,h=j.colSpan-1,s[x.index]={left:j.rowSpan-1,times:h}}else h--,p++;else s[x.index].left--,h=s[x.index].times,d++}return new vI(c,u,e,f)});return o}function v4(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var i=RK(t,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function RK(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function MK(e){return e.map(function(t,r){var n,i;return typeof t=="object"?i=(n=t.dataKey)!==null&&n!==void 0?n:r:i=r,new EK(i,t,r)})}function FK(e,t,r,n,i,a,s){var o=hK(n),c;e==="head"?c=i.headStyles:e==="body"?c=i.bodyStyles:e==="foot"&&(c=i.footStyles);var u=co({},o.table,o[e],i.styles,c),d=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},f=e==="body"?d:{},p=e==="body"&&r%2===0?co({},o.alternateRow,i.alternateRowStyles):{},h=fK(a),y=co({},h,u,p,f);return co(y,s)}function BK(e,t,r){var n;r===void 0&&(r={});var i=fI(e,t),a=new Map,s=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var h=t.columns.find(function(y){return y.dataKey===p||y.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(t.columns[h.index]),i-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(a.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||i>=f)u=!1,s.push(d),o.push(t.columns[d]),i-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function $K(e,t){for(var r=[],n=0;n<t.columns.length;n++){var i=BK(e,t,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function xI(e,t){var r=t.settings,n=r.startY,i=r.margin,a={x:i.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+i.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(p,h){return p+h.height},0);o+=u}var d=new jd(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(wI(d),a.y=i.top),t.callWillDrawPageHooks(d,a);var f=co({},a);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?UK(d,t,f,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return bo(d,t,p,a,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(p,h){var y=h===t.body.length-1;Fg(d,t,p,y,f,a,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return bo(d,t,p,a,t.columns)})),uI(d,t,f,a),t.callEndPageHooks(d,a),t.finalY=a.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function UK(e,t,r,n){var i=$K(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Ah(e,t,r,n,u.columns,!0):g4(e,t,n,u.columns),zK(e,t,r,n,u.columns),nb(e,t,n,u.columns)});else for(var s=-1,o=i[0],c=function(){var u=s;if(o){e.applyStyles(e.userStyles);var d=o.columns;s>=0?Ah(e,t,r,n,d,!0):g4(e,t,n,d),u=y4(e,t,s+1,n,d),nb(e,t,n,d)}var f=u-s;i.slice(1).forEach(function(p){e.applyStyles(e.userStyles),Ah(e,t,r,n,p.columns,!0),y4(e,t,s+1,n,p.columns,f),nb(e,t,n,p.columns)}),s=u};s<t.body.length-1;)c()}function g4(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(a){return bo(e,t,a,r,n)})}function zK(e,t,r,n,i){e.applyStyles(e.userStyles),t.body.forEach(function(a,s){var o=s===t.body.length-1;Fg(e,t,a,o,r,n,i)})}function y4(e,t,r,n,i,a){e.applyStyles(e.userStyles),a=a??t.body.length;var s=Math.min(r+a,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=bI(e,t,d,n);c.canEntireRowFit(f,i)&&(bo(e,t,c,n,i),o=r+u)}),o}function nb(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(a){return bo(e,t,a,r,n)})}function qK(e,t,r){var n=r.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),a=Math.floor((t-i)/n);return Math.max(0,a)}function WK(e,t,r,n){var i={};e.spansMultiplePages=!0,e.height=0;for(var a=0,s=0,o=r.columns;s<o.length;s++){var c=o[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new gI(u.raw,u.styles,u.section);d=co(d,u),d.text=[];var f=qK(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var y=new vI(e.raw,-1,e.section,i,!0);y.height=a;for(var v=0,x=r.columns;v<x.length;v++){var c=x[v],d=y.cells[c.index];d&&(d.height=y.height);var u=e.cells[c.index];u&&(u.height=e.height)}return y}function HK(e,t,r,n){var i=e.pageSize().height,a=n.settings.margin,s=a.top+a.bottom,o=i-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.log("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.log("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Fg(e,t,r,n,i,a,s){var o=bI(e,t,n,a);if(r.canEntireRowFit(o,s))bo(e,t,r,a,s);else if(HK(e,r,o,t)){var c=WK(r,o,t,e);bo(e,t,r,a,s),Ah(e,t,i,a,s),Fg(e,t,c,n,i,a,s)}else Ah(e,t,i,a,s),Fg(e,t,r,n,i,a,s)}function bo(e,t,r,n,i){n.x=t.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}VK(e,c,n);var d=c.getTextPos();oI(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function VK(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=dI(n.lineWidth,n.fillColor);i&&e.rect(t.x,r.y,t.width,t.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),KK(e,t,r,n.lineWidth))}function KK(e,t,r,n){var i,a,s,o;n.top&&(i=r.x,a=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,a,s,o)),n.bottom&&(i=r.x,a=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,a,s,o)),n.left&&(i=r.x,a=r.y,s=r.x,o=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,i,a,s,o)),n.right&&(i=r.x+t.width,a=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,i,a,s,o));function c(u,d,f,p,h){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,p,h,"S")}}function bI(e,t,r,n){var i=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-i}function Ah(e,t,r,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(o){return bo(e,t,o,n,i)}),t.callEndPageHooks(e,n);var s=t.settings.margin;uI(e,t,r,n),wI(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return bo(e,t,o,n,i)}),e.applyStyles(e.userStyles))}function wI(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function GK(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=mI(this,n),a=yI(this,i);return xI(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,i){oI(t,r,n,i,this)},e.API.autoTableSetDefaults=function(t){return jd.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){jd.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new jd(this),a=pI(i,t,window,r,!1),s=a.head,o=a.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var ib;function YK(e,t){var r=mI(e,t),n=yI(e,r);xI(e,n)}try{if(typeof window<"u"&&window){var x4=window,b4=x4.jsPDF||((ib=x4.jspdf)===null||ib===void 0?void 0:ib.jsPDF);b4&&GK(b4)}}catch(e){console.error("Could not apply autoTable plugin",e)}function ds(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function w4(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"}function JK(e){switch(e){case"domestic":return"Domestic (Intra-State)";case"sez":return"SEZ (Special Economic Zone)";case"export":return"Export";default:return"Domestic (Default)"}}function XK(e,t){return t==="sez"||t==="export"?{cgst:0,sgst:0,igst:e}:{cgst:Math.round(e/2*100)/100,sgst:Math.round(e/2*100)/100,igst:0}}function ZK(e){var y,v,x,g,_;const{invoice:t,companyDetails:r}=e,n=new at,i=n.internal.pageSize.getWidth();let a=20;n.setFontSize(18),n.setFont("helvetica","bold"),n.text(r.name,14,a),a+=8,n.setFontSize(10),n.setFont("helvetica","normal"),n.text(r.address,14,a),a+=5,n.text(`GSTIN: ${r.gstin}`,14,a),a+=5,n.text(`Phone: ${r.phone} | Email: ${r.email}`,14,a),a+=15,n.setFontSize(14),n.setFont("helvetica","bold"),n.text("TAX INVOICE",i/2,a,{align:"center"}),n.setFontSize(10),n.setFont("helvetica","normal");const s=[`Invoice No: ${t.invoice_number}`,`Date: ${w4(t.issued_at||t.created_at)}`,`Type: ${t.invoice_type.charAt(0).toUpperCase()+t.invoice_type.slice(1)}`];let o=a-20;s.forEach(S=>{o+=6,n.text(S,i-14,o,{align:"right"})}),a+=15,n.setDrawColor(200,200,200),n.line(14,a,i-14,a),a+=10,n.setFontSize(11),n.setFont("helvetica","bold"),n.text("Bill To:",14,a),a+=7,n.setFontSize(10),n.setFont("helvetica","normal"),n.text(((y=t.clients)==null?void 0:y.name)||"N/A",14,a),(v=t.clients)!=null&&v.billing_address&&(a+=5,n.splitTextToSize(t.clients.billing_address,80).forEach(j=>{n.text(j,14,a),a+=5})),(x=t.clients)!=null&&x.gstin&&(n.text(`GSTIN: ${t.clients.gstin}`,14,a),a+=5),(g=t.clients)!=null&&g.phone&&(n.text(`Phone: ${t.clients.phone}`,14,a),a+=5);const c=(_=t.clients)==null?void 0:_.gst_type;a+=2,n.setFont("helvetica","bold"),n.text(`GST Type: ${JK(c)}`,14,a),n.setFont("helvetica","normal"),t.invoice_type==="event"&&t.events&&(a+=10,n.setFont("helvetica","bold"),n.text("Event Details:",14,a),a+=5,n.setFont("helvetica","normal"),n.text(`${t.events.event_name} - ${w4(t.events.event_date)}`,14,a),a+=5),a+=10;const d=(t.invoice_items||[]).map((S,j)=>[(j+1).toString(),S.description,S.quantity.toString(),ds(S.unit_price),ds(S.line_total),`${S.tax_rate}%`,ds(S.tax_amount),ds(S.line_total+S.tax_amount)]);YK(n,{startY:a,head:[["#","Description","Qty","Rate","Amount","Tax %","Tax","Total"]],body:d,theme:"grid",headStyles:{fillColor:[60,60,60],textColor:[255,255,255],fontStyle:"bold",halign:"center"},columnStyles:{0:{halign:"center",cellWidth:10},1:{cellWidth:50},2:{halign:"center",cellWidth:15},3:{halign:"right",cellWidth:22},4:{halign:"right",cellWidth:22},5:{halign:"center",cellWidth:18},6:{halign:"right",cellWidth:22},7:{halign:"right",cellWidth:25}},styles:{fontSize:9,cellPadding:3},margin:{left:14,right:14}}),a=n.lastAutoTable.finalY+10;const f=i-80,p=i-14,h=XK(t.tax_total,c);return n.setFontSize(10),n.text("Subtotal:",f,a),n.text(ds(t.subtotal),p,a,{align:"right"}),a+=6,h.igst>0?(n.text("IGST:",f,a),n.text(ds(h.igst),p,a,{align:"right"})):(n.text("CGST:",f,a),n.text(ds(h.cgst),p,a,{align:"right"}),a+=6,n.text("SGST:",f,a),n.text(ds(h.sgst),p,a,{align:"right"})),a+=6,n.text("Total Tax:",f,a),n.text(ds(t.tax_total),p,a,{align:"right"}),a+=8,n.setDrawColor(0,0,0),n.line(f-5,a-2,p,a-2),n.setFontSize(12),n.setFont("helvetica","bold"),n.text("Grand Total:",f,a+5),n.text(ds(t.grand_total),p,a+5,{align:"right"}),a+=25,n.setFontSize(9),n.setFont("helvetica","italic"),n.setTextColor(100,100,100),n.text("This is a system generated invoice.",14,a),a+=5,n.text("No signature required.",14,a),n}function QK(e){var n,i,a,s,o,c,u,d;const t={name:((n=e.outlets)==null?void 0:n.name)||"Company Name",address:[(i=e.outlets)==null?void 0:i.address,(a=e.outlets)==null?void 0:a.city,(s=e.outlets)==null?void 0:s.state,(o=e.outlets)==null?void 0:o.pincode].filter(Boolean).join(", ")||"Address not available",gstin:((c=e.outlets)==null?void 0:c.gstin)||"GSTIN not available",phone:((u=e.outlets)==null?void 0:u.phone)||"-",email:((d=e.outlets)==null?void 0:d.email)||"-"};ZK({invoice:e,companyDetails:t}).save(`Invoice_${e.invoice_number}.pdf`)}function eG({invoice:e,maxAmount:t,onClose:r,onSuccess:n}){var j;const{user:i}=Wt(),[a,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,p]=b.useState("cash"),[h,y]=b.useState(new Date().toISOString().split("T")[0]),[v,x]=b.useState(""),[g,_]=b.useState("");async function S(A){if(A.preventDefault(),!(i!=null&&i.id))return;const N=parseFloat(u);if(!N||N<=0){c("Please enter a valid payment amount");return}if(N>t+1){c(`Payment amount cannot exceed balance due (${Ie(t)})`);return}try{s(!0),c(null),await xW(i.id,{invoice_id:e.id,amount:N,payment_method:f,payment_date:h,reference_number:v||void 0,notes:g||void 0}),n()}catch(D){c(D instanceof Error?D.message:"Failed to record payment")}finally{s(!1)}}return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs(we,{className:"max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Record Payment"}),l.jsx("div",{className:"bg-muted p-4 rounded-md mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Invoice"}),l.jsx("p",{className:"font-semibold",children:e.invoice_number})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Client"}),l.jsx("p",{className:"font-semibold",children:(j=e.clients)==null?void 0:j.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Invoice Total"}),l.jsx("p",{className:"font-semibold",children:Ie(e.grand_total)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Balance Due"}),l.jsx("p",{className:"font-semibold text-orange-600",children:Ie(t)})]})]})}),o&&l.jsx(ht,{variant:"error",className:"mb-4",children:o}),l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsx(He,{label:"Payment Amount",type:"number",min:"0.01",step:"0.01",max:t,value:u,onChange:A=>d(A.target.value),placeholder:"0.00",required:!0,helperText:`Maximum: ${Ie(t)}`}),l.jsxs(pt,{label:"Payment Method",value:f,onChange:A=>p(A.target.value),required:!0,children:[l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"upi",children:"UPI"}),l.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),l.jsx("option",{value:"card",children:"Card"}),l.jsx("option",{value:"cheque",children:"Cheque"})]}),l.jsx(He,{label:"Payment Date",type:"date",value:h,onChange:A=>y(A.target.value),max:new Date().toISOString().split("T")[0],required:!0}),l.jsx(He,{label:"Reference Number",value:v,onChange:A=>x(A.target.value),placeholder:"Transaction ID, Cheque number, etc.",helperText:"Optional"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),l.jsx("textarea",{className:"w-full border rounded-md p-2 min-h-[80px]",value:g,onChange:A=>_(A.target.value),placeholder:"Additional notes (optional)"})]}),l.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:a,children:a?"Recording...":"Record Payment"})]})]})]})})}function tG(){var C,L,I,O,U,V,ie,ne,ee,q,Y,fe,te,R,z,G,re,ae,ce,pe,Q,he;const{id:e}=ou(),t=wi(),{user:r}=Wt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(null),[h,y]=b.useState([]),[v,x]=b.useState(null),[g,_]=b.useState(!1);b.useEffect(()=>{S(),j()},[e]);async function S(){if(e)try{s(!0);const oe=await Tg(e);if(!oe){c("Invoice not found or you do not have access");return}i(oe)}catch(oe){c(oe instanceof Error?oe.message:"Failed to load invoice")}finally{s(!1)}}async function j(){if(e)try{const oe=await wW(e);y(oe.payments),x({amount_paid:oe.amount_paid,balance_due:oe.balance_due,payment_status:oe.payment_status})}catch(oe){console.error("Failed to load payments:",oe)}}async function A(oe){if(!(!(r!=null&&r.id)||!e))try{d(!0),c(null),oe==="issue"?await fT(r.id,e):oe==="cancel"&&await hT(r.id,e),p(null),await S()}catch(ue){c(ue instanceof Error?ue.message:`Failed to ${oe} invoice`)}finally{d(!1)}}function N(){_(!1),j()}function D(oe){const ue={unpaid:"destructive",partially_paid:"default",paid:"success"};return l.jsx(Yt,{variant:ue[oe],children:oe.replace("_"," ").toUpperCase()})}if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})});if(!n)return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(ht,{variant:"error",children:o||"Invoice not found"}),l.jsx("div",{className:"mt-4",children:l.jsx(Pe,{variant:"outline",onClick:()=>t("/invoices"),children:"Back to Invoices"})})]});const E={draft:"default",issued:"success",cancelled:"secondary"};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold",children:["Invoice ",n.invoice_number]}),l.jsxs("p",{className:"text-muted-foreground mt-1 capitalize",children:[n.invoice_type," Invoice"]})]}),l.jsxs("div",{className:"flex gap-2",children:[n.status==="issued"&&l.jsxs(Pe,{variant:"outline",onClick:()=>QK(n),children:[l.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),(r==null?void 0:r.role)!=="accountant"&&n.status==="draft"&&l.jsxs(l.Fragment,{children:[l.jsx(Pe,{variant:"outline",onClick:()=>p("issue"),disabled:u,children:"Issue Invoice"}),l.jsx(Pe,{variant:"destructive",onClick:()=>p("cancel"),disabled:u,children:"Cancel"})]})]})]}),o&&l.jsx(ht,{variant:"error",children:o}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Status"}),l.jsx(Yt,{variant:E[n.status],className:"mt-2",children:n.status.toUpperCase()})]}),n.issued_at&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Issued On"}),l.jsx("p",{className:"font-medium",children:Ns(n.issued_at,"long")})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Bill To"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-lg",children:(C=n.clients)==null?void 0:C.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(L=n.clients)==null?void 0:L.phone}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(I=n.clients)==null?void 0:I.email}),((O=n.clients)==null?void 0:O.gstin)&&l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"GSTIN:"})," ",(U=n.clients)==null?void 0:U.gstin]}),((V=n.clients)==null?void 0:V.billing_address)&&l.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:(ie=n.clients)==null?void 0:ie.billing_address}),l.jsxs("p",{className:"text-sm mt-2",children:[l.jsx("span",{className:"font-medium",children:"GST Type:"})," ",l.jsx(Yt,{variant:((ne=n.clients)==null?void 0:ne.gst_type)==="sez"?"default":((ee=n.clients)==null?void 0:ee.gst_type)==="export"?"secondary":"success",children:((Y=(q=n.clients)==null?void 0:q.gst_type)==null?void 0:Y.toUpperCase())||"DOMESTIC"})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"From"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-lg",children:(fe=n.outlets)==null?void 0:fe.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(te=n.outlets)==null?void 0:te.code}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(R=n.outlets)==null?void 0:R.phone}),l.jsx("p",{className:"text-sm text-muted-foreground",children:(z=n.outlets)==null?void 0:z.email}),((G=n.outlets)==null?void 0:G.gstin)&&l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"GSTIN:"})," ",(re=n.outlets)==null?void 0:re.gstin]}),((ae=n.outlets)==null?void 0:ae.address)&&l.jsxs("p",{className:"text-sm text-muted-foreground",children:[(ce=n.outlets)==null?void 0:ce.address,", ",(pe=n.outlets)==null?void 0:pe.city,", ",(Q=n.outlets)==null?void 0:Q.state]})]})]})]}),n.invoice_type==="event"&&n.events&&l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Event Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Name"}),l.jsx("p",{className:"font-medium",children:n.events.event_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Date"}),l.jsx("p",{className:"font-medium",children:Ns(n.events.event_date,"long")})]}),n.events.event_type&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Type"}),l.jsx("p",{className:"font-medium",children:n.events.event_type})]})]})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Description"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Qty"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Unit Price"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Amount"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Tax %"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Tax"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"})]})}),l.jsx("tbody",{children:(he=n.invoice_items)==null?void 0:he.map(oe=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2",children:oe.description}),l.jsx("td",{className:"text-right py-2 px-2",children:oe.quantity}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(oe.unit_price)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(oe.line_total)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[oe.tax_rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(oe.tax_amount)}),l.jsx("td",{className:"text-right py-2 px-2 font-medium",children:Ie(oe.line_total+oe.tax_amount)})]},oe.id))})]})}),l.jsxs("div",{className:"mt-6 space-y-2 border-t pt-4",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{className:"font-medium",children:Ie(n.subtotal)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Tax Total:"}),l.jsx("span",{className:"font-medium",children:Ie(n.tax_total)})]}),l.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-2",children:[l.jsx("span",{children:"Grand Total:"}),l.jsx("span",{className:"font-bold",children:Ie(n.grand_total)})]})]})]}),n.status==="issued"&&l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Payments Received"}),v&&l.jsx("div",{className:"flex items-center gap-2 mt-1",children:D(v.payment_status)})]}),(r==null?void 0:r.role)!=="accountant"&&v&&v.balance_due>0&&l.jsx(Pe,{onClick:()=>_(!0),children:"Record Payment"})]}),v&&l.jsx("div",{className:"bg-muted p-4 rounded-md mb-4",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Paid"}),l.jsx("p",{className:"text-lg font-semibold text-green-600",children:Ie(v.amount_paid)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Balance Due"}),l.jsx("p",{className:"text-lg font-semibold text-orange-600",children:Ie(v.balance_due)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice Total"}),l.jsx("p",{className:"text-lg font-semibold",children:Ie(n.grand_total)})]})]})}),h.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Method"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Amount"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Balance After"})]})}),l.jsx("tbody",{children:h.map((oe,ue)=>{const Ee=h.slice(ue).reduce((je,Je)=>je+Je.amount,0),H=n.grand_total-Ee;return l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:Ns(oe.payment_date,"short")}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:oe.payment_method.replace("_"," ")}),l.jsx("td",{className:"text-right py-2 px-2 font-medium text-green-600",children:Ie(oe.amount)}),l.jsx("td",{className:"py-2 px-2 text-sm text-muted-foreground",children:oe.reference_number||"-"}),l.jsx("td",{className:"text-right py-2 px-2 font-medium",children:Ie(H)})]},oe.id)})})]})}):l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No payments recorded yet"})]}),l.jsxs(we,{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Audit Trail"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"})," ",l.jsx("span",{className:"font-medium",children:new Date(n.updated_at).toLocaleString()})]})]})]}),g&&n&&l.jsx(eG,{invoice:n,maxAmount:(v==null?void 0:v.balance_due)||0,onClose:()=>_(!1),onSuccess:N}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Confirm ",f==="issue"?"Issue":"Cancel"]}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to ",f," this invoice?",f==="issue"&&l.jsx("span",{className:"block mt-2 text-muted-foreground",children:"Once issued, the invoice cannot be edited."}),f==="cancel"&&l.jsx("span",{className:"block mt-2 text-destructive font-medium",children:"This action cannot be undone. The invoice will be marked as cancelled."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>p(null),disabled:u,children:"Cancel"}),l.jsx(Pe,{variant:f==="cancel"?"destructive":"default",onClick:()=>A(f),disabled:u,children:u?"Processing...":`Yes, ${f}`})]})]})})]})}function rG(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(!1),[v,x]=b.useState(null),[g,_]=b.useState(null);b.useEffect(()=>{S()},[e==null?void 0:e.id,o,u,f,h]);async function S(){if(e!=null&&e.id)try{i(!0),s(null);const L={is_active:h?void 0:!0};o&&(L.payment_method=o),u&&(L.date_from=u),f&&(L.date_to=f);const I=await gW(e.id,L);r(I)}catch(L){s(L instanceof Error?L.message:"Failed to load payments")}finally{i(!1)}}async function j(L){if(e!=null&&e.id)try{x(L),s(null),await bW(e.id,L),_(null),await S()}catch(I){s(I instanceof Error?I.message:"Failed to delete payment")}finally{x(null)}}function A(){c(""),d(""),p("")}if(n)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})});const N=t.filter(L=>L.is_active),D=N.reduce((L,I)=>L+I.amount,0),E=N.filter(L=>L.payment_date===new Date().toISOString().split("T")[0]),C=E.reduce((L,I)=>L+I.amount,0);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Payments"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and manage payments received"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Today's Payments"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(C)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.length," transactions"]})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total (Filtered)"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(D)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.length," payments"]})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"All Records"}),l.jsx("p",{className:"text-2xl font-bold",children:t.length}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.filter(L=>!L.is_active).length," deleted"]})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs(pt,{label:"Payment Method",value:o,onChange:L=>c(L.target.value),children:[l.jsx("option",{value:"",children:"All Methods"}),l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"upi",children:"UPI"}),l.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),l.jsx("option",{value:"card",children:"Card"}),l.jsx("option",{value:"cheque",children:"Cheque"})]}),l.jsx(He,{label:"From Date",type:"date",value:u,onChange:L=>d(L.target.value)}),l.jsx(He,{label:"To Date",type:"date",value:f,onChange:L=>p(L.target.value)}),l.jsxs("div",{className:"flex flex-col justify-between",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:h,onChange:L=>y(L.target.checked),className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:"Show deleted"})]}),(o||u||f)&&l.jsx(Pe,{variant:"outline",size:"sm",onClick:A,children:"Clear Filters"})]})]})}),a&&l.jsx(ht,{variant:"error",children:a}),l.jsx(we,{children:t.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-muted-foreground",children:"No payments found"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Invoice #"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Client"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Method"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Amount"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Reference"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:t.map(L=>l.jsxs("tr",{className:`border-b hover:bg-muted/50 ${L.is_active?"":"opacity-50"}`,children:[l.jsx("td",{className:"py-3 px-4 text-sm",children:Ns(L.payment_date,"short")}),l.jsx("td",{className:"py-3 px-4",children:l.jsx(pr,{to:`/invoices/${L.invoice_id}`,className:"text-primary hover:underline font-medium",children:L.invoice_number})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:L.client_name}),l.jsx("td",{className:"py-3 px-4 text-sm capitalize",children:L.payment_method.replace("_"," ")}),l.jsx("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:Ie(L.amount)}),l.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:L.reference_number||"-"}),l.jsx("td",{className:"py-3 px-4",children:L.is_active?l.jsx(Yt,{variant:"success",children:"Active"}):l.jsx(Yt,{variant:"secondary",children:"Deleted"})}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("div",{className:"flex items-center justify-center gap-2",children:(e==null?void 0:e.role)!=="accountant"&&L.is_active&&l.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>_({id:L.id,amount:L.amount,invoiceNumber:L.invoice_number||"Unknown"}),disabled:v===L.id,children:"Delete"})})})]},L.id))})]})})}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(we,{className:"max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirm Delete"}),l.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to delete this payment?",l.jsxs("span",{className:"block mt-2 font-medium",children:["Amount: ",Ie(g.amount)]}),l.jsxs("span",{className:"block",children:["Invoice: ",g.invoiceNumber]}),l.jsx("span",{className:"block mt-2 text-orange-600",children:"This will mark the payment as inactive. The invoice balance will be recalculated."})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(Pe,{variant:"outline",onClick:()=>_(null),disabled:!!v,children:"Cancel"}),l.jsx(Pe,{variant:"destructive",onClick:()=>j(g.id),disabled:!!v,children:v?"Deleting...":"Yes, Delete"})]})]})})]})}async function uu(e){const{data:t}=await be.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}function Xd(e,t,r){if(t.role==="manager"&&t.outletIds)if(t.outletIds.length>0)e=e.in("outlet_id",t.outletIds);else return null;return r.outlet_id&&["admin","accountant"].includes(t.role)&&(e=e.eq("outlet_id",r.outlet_id)),e}async function _I(e,t){const r=await uu(e);let n=be.from("report_revenue_daily").select("*").order("report_date",{ascending:!1});if(n=Xd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to)),t.invoice_type&&(n=n.eq("invoice_type",t.invoice_type));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function nG(e,t){const r=await _I(e,t),n=new Map;r.forEach(o=>{const c=n.get(o.report_date)||{invoiced:0,collected:0};n.set(o.report_date,{invoiced:c.invoiced+o.total_invoiced,collected:c.collected+o.total_collected})});const i=Array.from(n.entries()).map(([o,c])=>({name:o,invoiced:c.invoiced,collected:c.collected,value:c.invoiced})).sort((o,c)=>o.name.localeCompare(c.name)),a=new Map;r.forEach(o=>{const c=a.get(o.outlet_name)||{invoiced:0,collected:0};a.set(o.outlet_name,{invoiced:c.invoiced+o.total_invoiced,collected:c.collected+o.total_collected})});const s=Array.from(a.entries()).map(([o,c])=>({name:o,invoiced:c.invoiced,collected:c.collected,value:c.invoiced}));return{trendData:i,outletData:s}}async function jI(e,t){const r=await uu(e);let n=be.from("report_payments_daily").select("*").order("report_date",{ascending:!1});if(n=Xd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to)),t.payment_method&&(n=n.eq("payment_method",t.payment_method));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function iG(e,t){const r=await jI(e,t),n=new Map;r.forEach(o=>{const c=n.get(o.payment_method)||0;n.set(o.payment_method,c+o.total_amount)});const i=Array.from(n.entries()).map(([o,c])=>({name:o.replace("_"," ").toUpperCase(),value:c})),a=new Map;r.forEach(o=>{const c=a.get(o.report_date)||0;a.set(o.report_date,c+o.total_amount)});const s=Array.from(a.entries()).map(([o,c])=>({name:o,value:c})).sort((o,c)=>o.name.localeCompare(c.name));return{methodData:i,dailyData:s}}async function SI(e,t){const r=await uu(e);let n=be.from("report_outstanding_aging").select("*").order("days_outstanding",{ascending:!1});if(n=Xd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to)),t.aging_bucket&&(n=n.eq("aging_bucket",t.aging_bucket));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function aG(e,t){const r=await SI(e,t),n=new Map([["0-30",0],["31-60",0],["61-90",0],["90+",0]]);return r.forEach(a=>{const s=n.get(a.aging_bucket)||0;n.set(a.aging_bucket,s+a.balance_due)}),{bucketData:[{name:"0-30 days",value:n.get("0-30")||0},{name:"31-60 days",value:n.get("31-60")||0},{name:"61-90 days",value:n.get("61-90")||0},{name:"90+ days",value:n.get("90+")||0}]}}async function NI(e,t){const r=await uu(e);let n=be.from("report_subscription_mrr").select("*").order("mrr",{ascending:!1});if(n=Xd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("next_billing_date",t.date_from)),t.date_to&&(n=n.lte("next_billing_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function sG(e,t){const r=await NI(e,t),n=new Map;return r.forEach(a=>{const s=n.get(a.outlet_name)||0;n.set(a.outlet_name,s+a.mrr)}),{outletData:Array.from(n.entries()).map(([a,s])=>({name:a,value:s}))}}async function kI(e,t){const r=await uu(e);let n=be.from("report_revenue_daily").select("*").eq("invoice_type","event").order("report_date",{ascending:!1});if(n=Xd(n,r,t),n===null)return[];t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function oG(e,t){const r=await kI(e,t),n=new Map;return r.forEach(a=>{const s=n.get(a.outlet_name)||0;n.set(a.outlet_name,s+a.total_invoiced)}),{outletData:Array.from(n.entries()).map(([a,s])=>({name:a,value:s}))}}async function lG(e,t){const r=await uu(e);let n=be.from("report_client_revenue").select("*").order("total_invoiced",{ascending:!1});if(n=Xd(n,r,t),n===null)return[];const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function cG(e,t){const r=await uu(e);let n=be.from("report_outlet_performance").select("*").order("total_invoiced",{ascending:!1});if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}function uG(e){const t=["Date","Outlet","Invoice Type","Invoice Count","Total Invoiced","Total Collected","Outstanding"],r=e.map(n=>[n.report_date,n.outlet_name,n.invoice_type,n.invoice_count,n.total_invoiced,n.total_collected,n.outstanding]);return[t,...r].map(n=>n.join(",")).join(`
`)}function dG(e){const t=["Date","Outlet","Payment Method","Payment Count","Total Amount"],r=e.map(n=>[n.report_date,n.outlet_name,n.payment_method.replace("_"," ").toUpperCase(),n.payment_count,n.total_amount]);return[t,...r].map(n=>n.join(",")).join(`
`)}function fG(e){const t=["Invoice Number","Invoice Date","Client","Outlet","Invoice Total","Amount Paid","Balance Due","Days Outstanding","Aging Bucket"],r=e.map(n=>[n.invoice_number,n.invoice_date,n.client_name,n.outlet_name,n.grand_total,n.amount_paid,n.balance_due,n.days_outstanding,n.aging_bucket]);return[t,...r].map(n=>n.join(",")).join(`
`)}function hG(e){const t=["Client","Outlet","Billing Cycle","Status","Quantity","Price Per Unit","Cycle Amount","MRR","Annual Value","Next Billing Date"],r=e.map(n=>[n.client_name,n.outlet_name,n.billing_cycle,n.status,n.quantity,n.price_per_unit,n.cycle_amount,n.mrr,n.annual_value,n.next_billing_date]);return[t,...r].map(n=>n.join(",")).join(`
`)}function pG(e){const t=["Date","Outlet","Invoice Count","Total Invoiced","Total Collected","Outstanding"],r=e.map(n=>[n.report_date,n.outlet_name,n.invoice_count,n.total_invoiced,n.total_collected,n.outstanding]);return[t,...r].map(n=>n.join(",")).join(`
`)}function mG(e){const t=["Client Name","Client Type","Outlet","Invoice Count","Total Invoiced","Total Collected","Outstanding","Subscription Revenue","Event Revenue","Active Subscriptions","Completed Events"],r=e.map(n=>[n.client_name,n.client_type,n.outlet_name,n.invoice_count,n.total_invoiced,n.total_collected,n.outstanding,n.subscription_revenue,n.event_revenue,n.active_subscriptions,n.completed_events]);return[t,...r].map(n=>n.join(",")).join(`
`)}function vG(e){const t=["Outlet Name","Code","City","Active Clients","Total Invoices","Total Invoiced","Total Collected","Outstanding","Collection Rate %","Active Subscriptions","MRR","Completed Events"],r=e.map(n=>[n.outlet_name,n.outlet_code,n.city||"",n.active_clients,n.total_invoices,n.total_invoiced,n.total_collected,n.outstanding,n.collection_rate_percent,n.active_subscriptions,n.mrr,n.completed_events]);return[t,...r].map(n=>n.join(",")).join(`
`)}var gG=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function f5(e){if(typeof e!="string")return!1;var t=gG;return t.includes(e)}var yG=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xG=new Set(yG);function AI(e){return typeof e!="string"?!1:xG.has(e)}function EI(e){return typeof e=="string"&&e.startsWith("data-")}function Zi(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(AI(r)||EI(r))&&(t[r]=e[r]);return t}function qc(e){if(e==null)return null;if(b.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Zi(t)}return typeof e=="object"&&!Array.isArray(e)?Zi(e):null}function gi(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(AI(r)||EI(r)||f5(r))&&(t[r]=e[r]);return t}function bG(e){return e==null?null:b.isValidElement(e)?gi(e.props):typeof e=="object"&&!Array.isArray(e)?gi(e):null}var wG=["children","width","height","viewBox","className","style","title","desc"];function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tw.apply(null,arguments)}function _G(e,t){if(e==null)return{};var r,n,i=jG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var h5=b.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=e,d=_G(e,wG),f=a||{width:n,height:i,x:0,y:0},p=Ut("recharts-surface",s);return b.createElement("svg",tw({},gi(d),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,c),b.createElement("desc",null,u),r)}),SG=["children","className"];function rw(){return rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rw.apply(null,arguments)}function NG(e,t){if(e==null)return{};var r,n,i=kG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Tn=b.forwardRef((e,t)=>{var{children:r,className:n}=e,i=NG(e,SG),a=Ut("recharts-layer",n);return b.createElement("g",rw({className:a},gi(i),{ref:t}),r)}),PI=b.createContext(null),AG=()=>b.useContext(PI);function fr(e){return function(){return e}}const CI=Math.cos,Bg=Math.sin,Qa=Math.sqrt,$g=Math.PI,u0=2*$g,nw=Math.PI,iw=2*nw,mc=1e-6,EG=iw-mc;function OI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function PG(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return OI;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class CG{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?OI:PG(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=n-t,u=i-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>mc)if(!(Math.abs(f*c-u*d)>mc)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,y=i-o,v=c*c+u*u,x=h*h+y*y,g=Math.sqrt(v),_=Math.sqrt(p),S=a*Math.tan((nw-Math.acos((v+p-x)/(2*g*_)))/2),j=S/_,A=S/g;Math.abs(j-1)>mc&&this._append`L${t+j*d},${r+j*f}`,this._append`A${a},${a},0,0,${+(f*h>d*y)},${this._x1=t+A*c},${this._y1=r+A*u}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),c=n*Math.sin(i),u=t+o,d=r+c,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>mc||Math.abs(this._y1-d)>mc)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%iw+iw),p>EG?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>mc&&this._append`A${n},${n},0,${+(p>=nw)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function p5(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new CG(t)}function m5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TI(e){this._context=e}TI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function d0(e){return new TI(e)}function II(e){return e[0]}function LI(e){return e[1]}function DI(e,t){var r=fr(!0),n=null,i=d0,a=null,s=p5(o);e=typeof e=="function"?e:e===void 0?II:fr(e),t=typeof t=="function"?t:t===void 0?LI:fr(t);function o(c){var u,d=(c=m5(c)).length,f,p=!1,h;for(n==null&&(a=i(h=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,u,c),+t(f,u,c));if(h)return a=null,h+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:fr(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:fr(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:fr(!!c),o):r},o.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),o):i},o.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),o):n},o}function mv(e,t,r){var n=null,i=fr(!0),a=null,s=d0,o=null,c=p5(u);e=typeof e=="function"?e:e===void 0?II:fr(+e),t=typeof t=="function"?t:fr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?LI:fr(+r);function u(f){var p,h,y,v=(f=m5(f)).length,x,g=!1,_,S=new Array(v),j=new Array(v);for(a==null&&(o=s(_=c())),p=0;p<=v;++p){if(!(p<v&&i(x=f[p],p,f))===g)if(g=!g)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=h;--y)o.point(S[y],j[y]);o.lineEnd(),o.areaEnd()}g&&(S[p]=+e(x,p,f),j[p]=+t(x,p,f),o.point(n?+n(x,p,f):S[p],r?+r(x,p,f):j[p]))}if(_)return o=null,_+""||null}function d(){return DI().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:fr(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:fr(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:fr(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:fr(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:fr(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:fr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:fr(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class RI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function OG(e){return new RI(e,!0)}function TG(e){return new RI(e,!1)}const v5={draw(e,t){const r=Qa(t/$g);e.moveTo(r,0),e.arc(0,0,r,0,u0)}},IG={draw(e,t){const r=Qa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},MI=Qa(1/3),LG=MI*2,DG={draw(e,t){const r=Qa(t/LG),n=r*MI;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},RG={draw(e,t){const r=Qa(t),n=-r/2;e.rect(n,n,r,r)}},MG=.8908130915292852,FI=Bg($g/10)/Bg(7*$g/10),FG=Bg(u0/10)*FI,BG=-CI(u0/10)*FI,$G={draw(e,t){const r=Qa(t*MG),n=FG*r,i=BG*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=u0*a/5,o=CI(s),c=Bg(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*i,c*n+o*i)}e.closePath()}},ab=Qa(3),UG={draw(e,t){const r=-Qa(t/(ab*3));e.moveTo(0,r*2),e.lineTo(-ab*r,-r),e.lineTo(ab*r,-r),e.closePath()}},da=-.5,fa=Qa(3)/2,aw=1/Qa(12),zG=(aw/2+1)*3,qG={draw(e,t){const r=Qa(t/zG),n=r/2,i=r*aw,a=n,s=r*aw+r,o=-a,c=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,c),e.lineTo(da*n-fa*i,fa*n+da*i),e.lineTo(da*a-fa*s,fa*a+da*s),e.lineTo(da*o-fa*c,fa*o+da*c),e.lineTo(da*n+fa*i,da*i-fa*n),e.lineTo(da*a+fa*s,da*s-fa*a),e.lineTo(da*o+fa*c,da*c-fa*o),e.closePath()}};function WG(e,t){let r=null,n=p5(i);e=typeof e=="function"?e:fr(e||v5),t=typeof t=="function"?t:fr(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:fr(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:fr(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Ug(){}function zg(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function BI(e){this._context=e}BI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HG(e){return new BI(e)}function $I(e){this._context=e}$I.prototype={areaStart:Ug,areaEnd:Ug,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:zg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VG(e){return new $I(e)}function UI(e){this._context=e}UI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:zg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KG(e){return new UI(e)}function zI(e){this._context=e}zI.prototype={areaStart:Ug,areaEnd:Ug,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function GG(e){return new zI(e)}function _4(e){return e<0?-1:1}function j4(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(_4(a)+_4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function S4(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function sb(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function qg(e){this._context=e}qg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sb(this,this._t0,S4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sb(this,S4(this,r=j4(this,e,t)),r);break;default:sb(this,this._t0,r=j4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qI(e){this._context=new WI(e)}(qI.prototype=Object.create(qg.prototype)).point=function(e,t){qg.prototype.point.call(this,t,e)};function WI(e){this._context=e}WI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function YG(e){return new qg(e)}function JG(e){return new qI(e)}function HI(e){this._context=e}HI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=N4(e),i=N4(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function N4(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function XG(e){return new HI(e)}function f0(e,t){this._context=e,this._t=t}f0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ZG(e){return new f0(e,.5)}function QG(e){return new f0(e,0)}function eY(e){return new f0(e,1)}function Wc(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function sw(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function tY(e,t){return e[t]}function rY(e){const t=[];return t.key=e,t}function nY(){var e=fr([]),t=sw,r=Wc,n=tY;function i(a){var s=Array.from(e.apply(this,arguments),rY),o,c=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,d=m5(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:fr(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:fr(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?sw:typeof a=="function"?a:fr(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Wc,i):r},i}function iY(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Wc(e,t)}}function aY(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Wc(e,t)}}function sY(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,h=(f-p)/2,y=0;y<o;++y){var v=e[t[y]],x=v[n][1]||0,g=v[n-1][1]||0;h+=x-g}c+=f,u+=h*f}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Wc(e,t)}}var h0={},VI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(VI);var g5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(g5);var p0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(p0);var m0={},KI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(KI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KI,r=p0;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];u?f==="\\"&&o+1<s?(o++,c+=i[o]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,a.push(c),c=""):c+=f:f==="["?(d=!0,c&&(a.push(c),c="")):f==="."?c&&(a.push(c),c=""):c+=f,o++}return c&&a.push(c),a}e.toPath=n})(m0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VI,r=g5,n=p0,i=m0;function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?a(o,i.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function s(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=a})(h0);var oY=h0.get;const Hc=Ts(oY);var lY=4;function vl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lY,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ur(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,a,s)=>{var o=r[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+vl(o)+a:i+a},"")}var Cn=e=>e===0?0:e>0?1:-1,Es=e=>typeof e=="number"&&e!=+e,Vc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,$e=e=>(typeof e=="number"||e instanceof Number)&&!Es(e),Ps=e=>$e(e)||typeof e=="string",cY=0,np=e=>{var t=++cY;return"".concat(e||"").concat(t)},si=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!$e(t)&&typeof t!="string")return n;var a;if(Vc(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return Es(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},GI=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function kr(e,t,r){return $e(e)&&$e(t)?vl(e+r*(t-e)):t}function YI(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Hc(n,t))===r)}var Ir=e=>e===null||typeof e>"u",Pp=e=>Ir(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function ki(e){return e!=null}function du(){}var uY=["type","size","sizeType"];function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ow.apply(null,arguments)}function k4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function A4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k4(Object(r),!0).forEach(function(n){dY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dY(e,t,r){return(t=fY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fY(e){var t=hY(e,"string");return typeof t=="symbol"?t:t+""}function hY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pY(e,t){if(e==null)return{};var r,n,i=mY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JI={symbolCircle:v5,symbolCross:IG,symbolDiamond:DG,symbolSquare:RG,symbolStar:$G,symbolTriangle:UG,symbolWye:qG},vY=Math.PI/180,gY=e=>{var t="symbol".concat(Pp(e));return JI[t]||v5},yY=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*vY;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xY=(e,t)=>{JI["symbol".concat(Pp(e))]=t},y5=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=pY(e,uY),a=A4(A4({},i),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var p=gY(s),h=WG().type(p).size(yY(r,n,s)),y=h();if(y!==null)return y},{className:c,cx:u,cy:d}=a,f=gi(a);return $e(u)&&$e(d)&&$e(r)?b.createElement("path",ow({},f,{className:Ut("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};y5.registerSymbol=xY;var XI=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,x5=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{f5(i)&&(n[i]=a=>r[i](r,a))}),n},bY=(e,t,r)=>n=>(e(t,r,n),null),Cp=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];f5(i)&&typeof a=="function"&&(n||(n={}),n[i]=bY(a,t,r))}),n};function E4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(r),!0).forEach(function(n){_Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Y(e,t,r){return(t=jY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jY(e){var t=SY(e,"string");return typeof t=="symbol"?t:t+""}function SY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function un(e,t){var r=wY({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wg.apply(null,arguments)}function P4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(r),!0).forEach(function(n){kY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kY(e,t,r){return(t=AY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pa=32,PY={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function CY(e){var{data:t,iconType:r,inactiveColor:n}=e,i=pa/2,a=pa/6,s=pa/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline"){var u;return b.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:pa,y2:i,className:"recharts-legend-icon"})}if(c==="line")return b.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(pa,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return b.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(pa/8,"h").concat(pa,"v").concat(pa*3/4,"h").concat(-pa,"z"),className:"recharts-legend-icon"});if(b.isValidElement(t.legendIcon)){var d=NY({},t);return delete d.legendIcon,b.cloneElement(t.legendIcon,d)}return b.createElement(y5,{fill:o,cx:i,cy:i,size:pa,sizeType:"diameter",type:c})}function OY(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:s}=e,o={x:0,y:0,width:pa,height:pa},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var p=d.formatter||i,h=Ut({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var y=d.inactive?a:d.color,v=p?p(d.value,d,f):d.value;return b.createElement("li",Wg({className:h,style:c,key:"legend-item-".concat(f)},Cp(e,d,f)),b.createElement(h5,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(v," legend icon")},b.createElement(CY,{data:d,iconType:s,inactiveColor:a})),b.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},v))})}var TY=e=>{var t=un(e,PY),{payload:r,layout:n,align:i}=t;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return b.createElement("ul",{className:"recharts-default-legend",style:a},b.createElement(OY,Wg({},t,{payload:r})))},ZI={},QI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s,a,r);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(QI);var eL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...i){return r.apply(this,i.slice(0,n))}}e.ary=t})(eL);var b5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(b5);var tL={},v0={},rL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(rL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(v0);var nL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(nL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v0,r=nL;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(tL);var iL={},aL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h0;function r(n){return function(i){return t.get(i,n)}}e.property=r})(aL);var sL={},w5={},oL={},_5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(_5);var j5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(j5);var S5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(S5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_5,r=j5,n=S5;function i(d,f,p){return typeof p!="function"?i(d,f,()=>{}):a(d,f,function h(y,v,x,g,_,S){const j=p(y,v,x,g,_,S);return j!==void 0?!!j:a(y,v,h,S)},new Map)}function a(d,f,p,h){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,p,h);case"function":return Object.keys(f).length>0?a(d,{...f},p,h):n.isEqualsSameValueZero(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.isEqualsSameValueZero(d,f)}}function s(d,f,p,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,p,h);if(f instanceof Map)return o(d,f,p,h);if(f instanceof Set)return u(d,f,p,h);const y=Object.keys(f);if(d==null||r.isPrimitive(d))return y.length===0;if(y.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let v=0;v<y.length;v++){const x=y[v];if(!r.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!p(d[x],f[x],x,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function o(d,f,p,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[y,v]of f.entries()){const x=d.get(y);if(p(x,v,y,d,f,h)===!1)return!1}return!0}function c(d,f,p,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const y=new Set;for(let v=0;v<f.length;v++){const x=f[v];let g=!1;for(let _=0;_<d.length;_++){if(y.has(_))continue;const S=d[_];let j=!1;if(p(S,x,v,d,f,h)&&(j=!0),j){y.add(_),g=!0;break}}if(!g)return!1}return!0}function u(d,f,p,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],p,h):!1}e.isMatchWith=i,e.isSetMatch=u})(oL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oL;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(w5);var lL={},N5={},cL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(cL);var g0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(g0);var k5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",h="[object Object]",y="[object Error]",v="[object DataView]",x="[object Uint8Array]",g="[object Uint8ClampedArray]",_="[object Uint16Array]",S="[object Uint32Array]",j="[object BigUint64Array]",A="[object Int8Array]",N="[object Int16Array]",D="[object Int32Array]",E="[object BigInt64Array]",C="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=v,e.dateTag=o,e.errorTag=y,e.float32ArrayTag=C,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=D,e.int8ArrayTag=A,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=_,e.uint32ArrayTag=S,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=g})(k5);var uL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(uL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cL,r=g0,n=k5,i=j5,a=uL;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,p,h=new Map,y=void 0){const v=y==null?void 0:y(d,f,p,h);if(v!==void 0)return v;if(i.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const x=new Array(d.length);h.set(d,x);for(let g=0;g<d.length;g++)x[g]=o(d[g],g,p,h,y);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;h.set(d,x);for(const[g,_]of d)x.set(g,o(_,g,p,h,y));return x}if(d instanceof Set){const x=new Set;h.set(d,x);for(const g of d)x.add(o(g,void 0,p,h,y));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,x);for(let g=0;g<d.length;g++)x[g]=o(d[g],g,p,h,y);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,x),c(x,d,p,h,y),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return h.set(d,x),c(x,d,p,h,y),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return h.set(d,x),c(x,d,p,h,y),x}if(d instanceof Error){const x=new d.constructor;return h.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,p,h,y),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return h.set(d,x),c(x,d,p,h,y),x}if(d instanceof Number){const x=new Number(d.valueOf());return h.set(d,x),c(x,d,p,h,y),x}if(d instanceof String){const x=new String(d.valueOf());return h.set(d,x),c(x,d,p,h,y),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return h.set(d,x),c(x,d,p,h,y),x}return d}function c(d,f,p=d,h,y){const v=[...Object.keys(f),...t.getSymbols(f)];for(let x=0;x<v.length;x++){const g=v[x],_=Object.getOwnPropertyDescriptor(d,g);(_==null||_.writable)&&(d[g]=o(f[g],g,p,h,y))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=c})(N5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(lL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w5,r=lL;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(sL);var dL={},fL={},hL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5,r=g0,n=k5;function i(a,s){return t.cloneDeepWith(a,(o,c,u,d)=>{const f=s==null?void 0:s(o,c,u,d);if(f!==void 0)return f;if(typeof a=="object"){if(r.getTag(a)===n.objectTag&&typeof a.constructor!="function"){const p={};return d.set(a,p),t.copyProperties(p,a,u,d),p}switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(p,a),p}case n.argumentsTag:{const p={};return t.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}}})}e.cloneDeepWith=i})(hL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hL;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(fL);var pL={},A5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(A5);var mL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g0;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(mL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g5,r=A5,n=mL,i=m0;function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(pL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w5,r=p0,n=fL,i=h0,a=pL;function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=i.get(u,o);return d===void 0?a.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=s})(dL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b5,r=aL,n=sL,i=dL;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(iL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QI,r=eL,n=b5,i=tL,a=iL;function s(o,c=n.identity){return i.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.ary(a.iteratee(c),1)):[]}e.uniqBy=s})(ZI);var IY=ZI.uniqBy;const C4=Ts(IY);function vL(e,t,r){return t===!0?C4(e,r):typeof t=="function"?C4(e,t):e}var gL={exports:{}},yL={},xL={exports:{}},bL={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld=b;function LY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var DY=typeof Object.is=="function"?Object.is:LY,RY=Ld.useState,MY=Ld.useEffect,FY=Ld.useLayoutEffect,BY=Ld.useDebugValue;function $Y(e,t){var r=t(),n=RY({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return FY(function(){i.value=r,i.getSnapshot=t,ob(i)&&a({inst:i})},[e,r,t]),MY(function(){return ob(i)&&a({inst:i}),e(function(){ob(i)&&a({inst:i})})},[e]),BY(r),r}function ob(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!DY(e,r)}catch{return!0}}function UY(e,t){return t()}var zY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?UY:$Y;bL.useSyncExternalStore=Ld.useSyncExternalStore!==void 0?Ld.useSyncExternalStore:zY;xL.exports=bL;var qY=xL.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0=b,WY=qY;function HY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VY=typeof Object.is=="function"?Object.is:HY,KY=WY.useSyncExternalStore,GY=y0.useRef,YY=y0.useEffect,JY=y0.useMemo,XY=y0.useDebugValue;yL.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=GY(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=JY(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),i!==void 0&&s.hasValue){var y=s.value;if(i(y,h))return f=y}return f=h}if(y=f,VY(d,h))return y;var v=n(h);return i!==void 0&&i(y,v)?(d=h,y):(d=h,f=v)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,i]);var o=KY(e,a[0],a[1]);return YY(function(){s.hasValue=!0,s.value=o},[o]),XY(o),o};gL.exports=yL;var ZY=gL.exports,E5=b.createContext(null),QY=e=>e,mr=()=>{var e=b.useContext(E5);return e?e.store.dispatch:QY},Jv=()=>{},eJ=()=>Jv,tJ=(e,t)=>e===t;function Ve(e){var t=b.useContext(E5),r=b.useMemo(()=>t?n=>{if(n!=null)return e(n)}:Jv,[t,e]);return ZY.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:eJ,t?t.store.getState:Jv,t?t.store.getState:Jv,r,tJ)}function rJ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function nJ(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function iJ(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var O4=e=>Array.isArray(e)?e:[e];function aJ(e){const t=Array.isArray(e[0])?e[0]:e;return iJ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function sJ(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var oJ=class{constructor(e){this.value=e}deref(){return this.value}},lJ=typeof WeakRef<"u"?WeakRef:oJ,cJ=0,T4=1;function vv(){return{s:cJ,v:void 0,o:null,p:null}}function wL(e,t={}){let r=vv();const{resultEqualityCheck:n}=t;let i,a=0;function s(){var f;let o=r;const{length:c}=arguments;for(let p=0,h=c;p<h;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const x=v.get(y);x===void 0?(o=vv(),v.set(y,o)):o=x}else{let v=o.p;v===null&&(o.p=v=new Map);const x=v.get(y);x===void 0?(o=vv(),v.set(y,o)):o=x}}const u=o;let d;if(o.s===T4)d=o.v;else if(d=e.apply(null,arguments),a++,n){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new lJ(d):d}return u.s=T4,u.v=d,d}return s.clearCache=()=>{r=vv(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function uJ(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),rJ(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:h=wL,argsMemoizeOptions:y=[]}=d,v=O4(p),x=O4(y),g=aJ(i),_=f(function(){return a++,u.apply(null,arguments)},...v),S=h(function(){s++;const A=sJ(g,arguments);return o=_.apply(null,A),o},...x);return Object.assign(S,{resultFunc:u,memoizedResultFunc:_,dependencies:g,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var ge=uJ(wL),dJ=Object.assign((e,t=ge)=>{nJ(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,c)=>(s[r[c]]=o,s),{}))},{withTypes:()=>dJ}),_L={},jL={},SL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(SL);var NL={},P5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(P5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P5,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(NL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SL,r=NL,n=m0;function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(h=>String(h));const u=(h,y)=>{let v=h;for(let x=0;x<y.length&&v!=null;++x)v=v[y[x]];return v},d=(h,y)=>y==null||h==null?y:typeof h=="object"&&"key"in h?Object.hasOwn(y,h.key)?y[h.key]:u(y,h.path):typeof h=="function"?h(y):Array.isArray(h)?u(y,h):typeof y=="object"?y[h]:y,f=s.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return a.map(h=>({original:h,criteria:f.map(y=>d(y,h))})).slice().sort((h,y)=>{for(let v=0;v<f.length;v++){const x=t.compareValues(h.criteria[v],y.criteria[v],o[v]);if(x!==0)return x}return 0}).map(h=>h.original)}e.orderBy=i})(jL);var kL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<a?s(d,c+1):i.push(d)}};return s(r,0),i}e.flatten=t})(kL);var C5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5,r=v0,n=_5,i=S5;function a(s,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}e.isIterateeCall=a})(C5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jL,r=kL,n=C5;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(_L);var fJ=_L.sortBy;const x0=Ts(fJ);var AL=e=>e.legend.settings,hJ=e=>e.legend.size,pJ=e=>e.legend.payload,mJ=ge([pJ,AL],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?x0(n,r):n});function vJ(){return Ve(mJ)}var gv=1;function EL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),n=b.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>gv||Math.abs(s.left-t.left)>gv||Math.abs(s.top-t.top)>gv||Math.abs(s.width-t.width)>gv)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function qn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",I4=gJ,lb=()=>Math.random().toString(36).substring(7).split("").join("."),yJ={INIT:`@@redux/INIT${lb()}`,REPLACE:`@@redux/REPLACE${lb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${lb()}`},Hg=yJ;function O5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function PL(e,t,r){if(typeof e!="function")throw new Error(qn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(qn(1));return r(PL)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((x,g)=>{s.set(g,x)}))}function d(){if(c)throw new Error(qn(3));return i}function f(x){if(typeof x!="function")throw new Error(qn(4));if(c)throw new Error(qn(5));let g=!0;u();const _=o++;return s.set(_,x),function(){if(g){if(c)throw new Error(qn(6));g=!1,u(),s.delete(_),a=null}}}function p(x){if(!O5(x))throw new Error(qn(7));if(typeof x.type>"u")throw new Error(qn(8));if(typeof x.type!="string")throw new Error(qn(17));if(c)throw new Error(qn(9));try{c=!0,i=n(i,x)}finally{c=!1}return(a=s).forEach(_=>{_()}),x}function h(x){if(typeof x!="function")throw new Error(qn(10));n=x,p({type:Hg.REPLACE})}function y(){const x=f;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(qn(11));function _(){const j=g;j.next&&j.next(d())}return _(),{unsubscribe:x(_)}},[I4](){return this}}}return p({type:Hg.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:h,[I4]:y}}function xJ(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Hg.INIT})>"u")throw new Error(qn(12));if(typeof r(void 0,{type:Hg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qn(13))})}function CL(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{xJ(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],p=r[f],h=s[f],y=p(h,o);if(typeof y>"u")throw o&&o.type,new Error(qn(14));u[f]=y,c=c||y!==h}return c=c||n.length!==Object.keys(s).length,c?u:s}}function Vg(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function bJ(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(qn(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=e.map(c=>c(s));return a=Vg(...o)(i.dispatch),{...i,dispatch:a}}}function OL(e){return O5(e)&&"type"in e&&typeof e.type=="string"}var TL=Symbol.for("immer-nothing"),L4=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function za(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Gi=Object,Dd=Gi.getPrototypeOf,Kg="constructor",b0="prototype",lw="configurable",Gg="enumerable",Xv="writable",ip="value",wo=e=>!!e&&!!e[yi];function Ja(e){var t;return e?IL(e)||_0(e)||!!e[L4]||!!((t=e[Kg])!=null&&t[L4])||j0(e)||S0(e):!1}var wJ=Gi[b0][Kg].toString(),D4=new WeakMap;function IL(e){if(!e||!T5(e))return!1;const t=Dd(e);if(t===null||t===Gi[b0])return!0;const r=Gi.hasOwnProperty.call(t,Kg)&&t[Kg];if(r===Object)return!0;if(!Yu(r))return!1;let n=D4.get(r);return n===void 0&&(n=Function.toString.call(r),D4.set(r,n)),n===wJ}function w0(e,t,r=!0){Op(e)===0?(r?Reflect.ownKeys(e):Gi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Op(e){const t=e[yi];return t?t.type_:_0(e)?1:j0(e)?2:S0(e)?3:0}var R4=(e,t,r=Op(e))=>r===2?e.has(t):Gi[b0].hasOwnProperty.call(e,t),cw=(e,t,r=Op(e))=>r===2?e.get(t):e[t],Yg=(e,t,r,n=Op(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function _J(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var _0=Array.isArray,j0=e=>e instanceof Map,S0=e=>e instanceof Set,T5=e=>typeof e=="object",Yu=e=>typeof e=="function",cb=e=>typeof e=="boolean";function jJ(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ao=e=>e.copy_||e.base_,I5=e=>e.modified_?e.copy_:e.base_;function uw(e,t){if(j0(e))return new Map(e);if(S0(e))return new Set(e);if(_0(e))return Array[b0].slice.call(e);const r=IL(e);if(t===!0||t==="class_only"&&!r){const n=Gi.getOwnPropertyDescriptors(e);delete n[yi];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[Xv]===!1&&(o[Xv]=!0,o[lw]=!0),(o.get||o.set)&&(n[s]={[lw]:!0,[Xv]:!0,[Gg]:o[Gg],[ip]:e[s]})}return Gi.create(Dd(e),n)}else{const n=Dd(e);if(n!==null&&r)return{...e};const i=Gi.create(n);return Gi.assign(i,e)}}function L5(e,t=!1){return N0(e)||wo(e)||!Ja(e)||(Op(e)>1&&Gi.defineProperties(e,{set:yv,add:yv,clear:yv,delete:yv}),Gi.freeze(e),t&&w0(e,(r,n)=>{L5(n,!0)},!1)),e}function SJ(){za(2)}var yv={[ip]:SJ};function N0(e){return e===null||!T5(e)?!0:Gi.isFrozen(e)}var Jg="MapSet",dw="Patches",M4="ArrayMethods",LL={};function Kc(e){const t=LL[e];return t||za(0,e),t}var F4=e=>!!LL[e],ap,DL=()=>ap,NJ=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:F4(Jg)?Kc(Jg):void 0,arrayMethodsPlugin_:F4(M4)?Kc(M4):void 0});function B4(e,t){t&&(e.patchPlugin_=Kc(dw),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fw(e){hw(e),e.drafts_.forEach(kJ),e.drafts_=null}function hw(e){e===ap&&(ap=e.parent_)}var $4=e=>ap=NJ(ap,e);function kJ(e){const t=e[yi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function U4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[yi].modified_&&(fw(t),za(4)),Ja(e)&&(e=z4(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[yi].base_,e,t)}else e=z4(t,r);return AJ(t,e,!0),fw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==TL?e:void 0}function z4(e,t){if(N0(t))return t;const r=t[yi];if(!r)return Xg(t,e.handledSet_,e);if(!k0(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);FL(r,e)}return r.copy_}function AJ(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&L5(t,r)}function RL(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var k0=(e,t)=>e.scope_===t,EJ=[];function ML(e,t,r,n){const i=ao(e),a=e.type_;if(n!==void 0&&cw(i,n,a)===t){Yg(i,n,r,a);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;w0(i,(c,u)=>{if(wo(u)){const d=o.get(u)||[];d.push(c),o.set(u,d)}})}const s=e.draftLocations_.get(t)??EJ;for(const o of s)Yg(i,o,r,a)}function PJ(e,t,r){e.callbacks_.push(function(i){var o;const a=t;if(!a||!k0(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=I5(a);ML(e,a.draft_??a,s,r),FL(a,i)})}function FL(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}RL(e)}}function CJ(e,t,r){const{scope_:n}=e;if(wo(r)){const i=r[yi];k0(i,n)&&i.callbacks_.push(function(){Zv(e);const s=I5(i);ML(e,r,s,t)})}else Ja(r)&&e.callbacks_.push(function(){const a=ao(e);e.type_===3?a.has(r)&&Xg(r,n.handledSet_,n):cw(a,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Xg(cw(e.copy_,t,e.type_),n.handledSet_,n)})}function Xg(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||wo(e)||t.has(e)||!Ja(e)||N0(e)||(t.add(e),w0(e,(n,i)=>{if(wo(i)){const a=i[yi];if(k0(a,r)){const s=I5(a);Yg(e,n,s,e.type_),RL(a)}}else Ja(i)&&Xg(i,t,r)})),e}function OJ(e,t){const r=_0(e),n={type_:r?1:0,scope_:t?t.scope_:DL(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=Zg;r&&(i=[n],a=sp);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var Zg={get(e,t){if(t===yi)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=ao(e);if(!R4(i,t,e.type_))return TJ(e,i,t);const a=i[t];if(e.finalized_||!Ja(a)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&jJ(t))return a;if(a===ub(e.base_,t)){Zv(e);const s=e.type_===1?+t:t,o=mw(e.scope_,a,e,s);return e.copy_[s]=o}return a},has(e,t){return t in ao(e)},ownKeys(e){return Reflect.ownKeys(ao(e))},set(e,t,r){const n=BL(ao(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=ub(ao(e),t),a=i==null?void 0:i[yi];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(_J(r,i)&&(r!==void 0||R4(e.base_,t,e.type_)))return!0;Zv(e),pw(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),CJ(e,t,r)),!0},deleteProperty(e,t){return Zv(e),ub(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),pw(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ao(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Xv]:!0,[lw]:e.type_!==1||t!=="length",[Gg]:n[Gg],[ip]:r[t]}},defineProperty(){za(11)},getPrototypeOf(e){return Dd(e.base_)},setPrototypeOf(){za(12)}},sp={};for(let e in Zg){let t=Zg[e];sp[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}sp.deleteProperty=function(e,t){return sp.set.call(this,e,t,void 0)};sp.set=function(e,t,r){return Zg.set.call(this,e[0],t,r,e[0])};function ub(e,t){const r=e[yi];return(r?ao(r):e)[t]}function TJ(e,t,r){var i;const n=BL(t,r);return n?ip in n?n[ip]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function BL(e,t){if(!(t in e))return;let r=Dd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Dd(r)}}function pw(e){e.modified_||(e.modified_=!0,e.parent_&&pw(e.parent_))}function Zv(e){e.copy_||(e.assigned_=new Map,e.copy_=uw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var IJ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Yu(r)&&!Yu(n)){const s=n;n=r;const o=this;return function(u=s,...d){return o.produce(u,f=>n.call(this,f,...d))}}Yu(n)||za(6),i!==void 0&&!Yu(i)&&za(7);let a;if(Ja(r)){const s=$4(this),o=mw(s,r,void 0);let c=!0;try{a=n(o),c=!1}finally{c?fw(s):hw(s)}return B4(s,i),U4(a,s)}else if(!r||!T5(r)){if(a=n(r),a===void 0&&(a=r),a===TL&&(a=void 0),this.autoFreeze_&&L5(a,!0),i){const s=[],o=[];Kc(dw).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else za(1,r)},this.produceWithPatches=(r,n)=>{if(Yu(r))return(o,...c)=>this.produceWithPatches(o,u=>r(u,...c));let i,a;return[this.produce(r,n,(o,c)=>{i=o,a=c}),i,a]},cb(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),cb(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),cb(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ja(t)||za(8),wo(t)&&(t=Ka(t));const r=$4(this),n=mw(r,t,void 0);return n[yi].isManual_=!0,hw(r),n}finishDraft(t,r){const n=t&&t[yi];(!n||!n.isManual_)&&za(9);const{scope_:i}=n;return B4(i,r),U4(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const i=Kc(dw).applyPatches_;return wo(t)?i(t,r):this.produce(t,a=>i(a,r))}};function mw(e,t,r,n){const[i,a]=j0(t)?Kc(Jg).proxyMap_(t,r):S0(t)?Kc(Jg).proxySet_(t,r):OJ(t,r);return((r==null?void 0:r.scope_)??DL()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?PJ(r,a,n):a.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Ka(e){return wo(e)||za(10,e),$L(e)}function $L(e){if(!Ja(e)||N0(e))return e;const t=e[yi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=uw(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=uw(e,!0);return w0(r,(i,a)=>{Yg(r,i,$L(a))},n),t&&(t.finalized_=!1),r}var LJ=new IJ,UL=LJ.produce;function zL(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var DJ=zL(),RJ=zL,MJ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Vg:Vg.apply(null,arguments)};function ja(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Ji(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>OL(n)&&n.type===e,r}var qL=class dh extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,dh.prototype)}static get[Symbol.species](){return dh}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new dh(...t[0].concat(this)):new dh(...t.concat(this))}};function q4(e){return Ja(e)?UL(e,()=>{}):e}function xv(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function FJ(e){return typeof e=="boolean"}var BJ=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new qL;return r&&(FJ(r)?s.push(DJ):s.push(RJ(r.extraArgument))),s},WL="RTK_autoBatch",Sr=()=>e=>({payload:e,meta:{[WL]:!0}}),W4=e=>t=>{setTimeout(t,e)},HL=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:W4(10):e.type==="callback"?e.queueNotification:W4(e.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),p=n.subscribe(f);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[WL]),a=!i,a&&(s||(s=!0,c(u))),n.dispatch(d)}finally{i=!0}}})},$J=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new qL(e);return n&&i.push(HL(typeof n=="object"?n:void 0)),i};function UJ(e){const t=BJ(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(O5(r))o=CL(r);else throw new Error(Ji(1));let c;typeof n=="function"?c=n(t):c=t();let u=Vg;i&&(u=MJ({trace:!1,...typeof i=="object"&&i}));const d=bJ(...c),f=$J(d);let p=typeof s=="function"?s(f):f();const h=u(...p);return PL(o,a,h)}function VL(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Ji(28));if(o in t)throw new Error(Ji(29));return t[o]=s,i},addAsyncThunk(a,s){return s.pending&&(t[a.pending.type]=s.pending),s.rejected&&(t[a.rejected.type]=s.rejected),s.fulfilled&&(t[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function zJ(e){return typeof e=="function"}function qJ(e,t){let[r,n,i]=VL(t),a;if(zJ(e))a=()=>q4(e());else{const o=q4(e);a=()=>o}function s(o=a(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,f)=>{if(f)if(wo(d)){const h=f(d,c);return h===void 0?d:h}else{if(Ja(d))return UL(d,p=>f(p,c));{const p=f(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},o)}return s.getInitialState=a,s}var WJ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",HJ=(e=21)=>{let t="",r=e;for(;r--;)t+=WJ[Math.random()*64|0];return t},VJ=Symbol.for("rtk-slice-createasyncthunk");function KJ(e,t){return`${e}/${t}`}function GJ({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[VJ];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Ji(11));const o=(typeof i.reducers=="function"?i.reducers(JJ()):i.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,A){const N=typeof j=="string"?j:j.type;if(!N)throw new Error(Ji(12));if(N in u.sliceCaseReducersByType)throw new Error(Ji(13));return u.sliceCaseReducersByType[N]=A,d},addMatcher(j,A){return u.sliceMatchers.push({matcher:j,reducer:A}),d},exposeAction(j,A){return u.actionCreators[j]=A,d},exposeCaseReducer(j,A){return u.sliceCaseReducersByName[j]=A,d}};c.forEach(j=>{const A=o[j],N={reducerName:j,type:KJ(a,j),createNotation:typeof i.reducers=="function"};ZJ(A)?eX(N,A,d,t):XJ(N,A,d)});function f(){const[j={},A=[],N=void 0]=typeof i.extraReducers=="function"?VL(i.extraReducers):[i.extraReducers],D={...j,...u.sliceCaseReducersByType};return qJ(i.initialState,E=>{for(let C in D)E.addCase(C,D[C]);for(let C of u.sliceMatchers)E.addMatcher(C.matcher,C.reducer);for(let C of A)E.addMatcher(C.matcher,C.reducer);N&&E.addDefaultCase(N)})}const p=j=>j,h=new Map,y=new WeakMap;let v;function x(j,A){return v||(v=f()),v(j,A)}function g(){return v||(v=f()),v.getInitialState()}function _(j,A=!1){function N(E){let C=E[j];return typeof C>"u"&&A&&(C=xv(y,N,g)),C}function D(E=p){const C=xv(h,A,()=>new WeakMap);return xv(C,E,()=>{const L={};for(const[I,O]of Object.entries(i.selectors??{}))L[I]=YJ(O,E,()=>xv(y,E,g),A);return L})}return{reducerPath:j,getSelectors:D,get selectors(){return D(N)},selectSlice:N}}const S={name:a,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,..._(s),injectInto(j,{reducerPath:A,...N}={}){const D=A??s;return j.inject({reducerPath:D,reducer:x},N),{...S,..._(D,!0)}}};return S}}function YJ(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var Ti=GJ();function JJ(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function XJ({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!QJ(n))throw new Error(Ji(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?ja(e,s):ja(e))}function ZJ(e){return e._reducerDefinitionType==="asyncThunk"}function QJ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eX({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Ji(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:d}=r,f=i(e,a,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:s||bv,pending:o||bv,rejected:c||bv,settled:u||bv})}function bv(){}var tX="task",KL="listener",GL="completed",D5="cancelled",rX=`task-${D5}`,nX=`task-${GL}`,vw=`${KL}-${D5}`,iX=`${KL}-${GL}`,A0=class{constructor(e){Vt(this,"name","TaskAbortError");Vt(this,"message");this.code=e,this.message=`${tX} ${D5} (reason: ${e})`}},R5=(e,t)=>{if(typeof e!="function")throw new TypeError(Ji(32))},Qg=()=>{},YL=(e,t=Qg)=>(e.catch(t),e),JL=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Tc=e=>{if(e.aborted)throw new A0(e.reason)};function XL(e,t){let r=Qg;return new Promise((n,i)=>{const a=()=>i(new A0(e.reason));if(e.aborted){a();return}r=JL(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Qg})}var aX=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof A0?"cancelled":"rejected",error:r}}finally{t==null||t()}},ey=e=>t=>YL(XL(e,t).then(r=>(Tc(e),r))),ZL=e=>{const t=ey(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Sd}=Object,H4={},E0="listenerMiddleware",sX=(e,t)=>{const r=n=>JL(e,()=>n.abort(e.reason));return(n,i)=>{R5(n);const a=new AbortController;r(a);const s=aX(async()=>{Tc(e),Tc(a.signal);const o=await n({pause:ey(a.signal),delay:ZL(a.signal),signal:a.signal});return Tc(a.signal),o},()=>a.abort(nX));return i!=null&&i.autoJoin&&t.push(s.catch(Qg)),{result:ey(e)(s),cancel(){a.abort(rX)}}}},oX=(e,t)=>{const r=async(n,i)=>{Tc(t);let a=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});a=()=>{d(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await XL(t,Promise.race(o));return Tc(t),c}finally{a()}};return(n,i)=>YL(r(n,i))},QL=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=ja(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Ji(21));return R5(a),{predicate:i,type:t,effect:a}},e8=Sd(e=>{const{type:t,predicate:r,effect:n}=QL(e);return{id:HJ(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ji(22))}}},{withTypes:()=>e8}),V4=(e,t)=>{const{type:r,effect:n,predicate:i}=QL(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},gw=e=>{e.pending.forEach(t=>{t.abort(vw)})},lX=(e,t)=>()=>{for(const r of t.keys())gw(r);e.clear()},K4=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},t8=Sd(ja(`${E0}/add`),{withTypes:()=>t8}),cX=ja(`${E0}/removeAll`),r8=Sd(ja(`${E0}/remove`),{withTypes:()=>r8}),uX=(...e)=>{console.error(`${E0}/error`,...e)},Tp=(e={})=>{const t=new Map,r=new Map,n=h=>{const y=r.get(h)??0;r.set(h,y+1)},i=h=>{const y=r.get(h)??1;y===1?r.delete(h):r.set(h,y-1)},{extra:a,onError:s=uX}=e;R5(s);const o=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),y=>{h.unsubscribe(),y!=null&&y.cancelActive&&gw(h)}),c=h=>{const y=V4(t,h)??e8(h);return o(y)};Sd(c,{withTypes:()=>c});const u=h=>{const y=V4(t,h);return y&&(y.unsubscribe(),h.cancelActive&&gw(y)),!!y};Sd(u,{withTypes:()=>u});const d=async(h,y,v,x)=>{const g=new AbortController,_=oX(c,g.signal),S=[];try{h.pending.add(g),n(h),await Promise.resolve(h.effect(y,Sd({},v,{getOriginalState:x,condition:(j,A)=>_(j,A).then(Boolean),take:_,delay:ZL(g.signal),pause:ey(g.signal),extra:a,signal:g.signal,fork:sX(g.signal,S),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((j,A,N)=>{j!==g&&(j.abort(vw),N.delete(j))})},cancel:()=>{g.abort(vw),h.pending.delete(g)},throwIfCancelled:()=>{Tc(g.signal)}})))}catch(j){j instanceof A0||K4(s,j,{raisedBy:"effect"})}finally{await Promise.all(S),g.abort(iX),i(h),h.pending.delete(g)}},f=lX(t,r);return{middleware:h=>y=>v=>{if(!OL(v))return y(v);if(t8.match(v))return c(v.payload);if(cX.match(v)){f();return}if(r8.match(v))return u(v.payload);let x=h.getState();const g=()=>{if(x===H4)throw new Error(Ji(23));return x};let _;try{if(_=y(v),t.size>0){const S=h.getState(),j=Array.from(t.values());for(const A of j){let N=!1;try{N=A.predicate(v,S,x)}catch(D){N=!1,K4(s,D,{raisedBy:"predicate"})}N&&d(A,v,h,g)}}}finally{x=H4}return _},startListening:c,stopListening:u,clearListeners:f}};function Ji(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dX={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},n8=Ti({name:"chartLayout",initialState:dX,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:fX,setLayout:hX,setChartSize:pX,setScale:mX}=n8.actions,vX=n8.reducer;function i8(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Rt(e){return Number.isFinite(e)}function Cs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function G4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ud(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G4(Object(r),!0).forEach(function(n){gX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gX(e,t,r){return(t=yX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=xX(e,"string");return typeof t=="symbol"?t:t+""}function xX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rr(e,t,r){return Ir(e)||Ir(t)?r:Ps(t)?Hc(e,t,r):typeof t=="function"?t(e):r}var bX=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&$e(e[a]))return ud(ud({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&$e(e[s]))return ud(ud({},e),{},{[s]:e[s]+(i||0)})}return e},Co=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",a8=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},s8=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:p,axisType:h}=e;if(!s)return null;var y=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,v=i==="category"&&s.bandwidth?s.bandwidth()/y:0;if(v=h==="angleAxis"&&a&&a.length>=2?Cn(a[0]-a[1])*2*v:v,f||p){var x=(f||p||[]).map((g,_)=>{var S=n?n.indexOf(g):g,j=s.map(S);return Rt(j)?{coordinate:j+v,value:g,offset:v,index:_}:null}).filter(ki);return x}return c&&u?u.map((g,_)=>{var S=s.map(g);return Rt(S)?{coordinate:S+v,value:g,index:_,offset:v}:null}).filter(ki):s.ticks&&d!=null?s.ticks(d).map((g,_)=>{var S=s.map(g);return Rt(S)?{coordinate:S+v,value:g,index:_,offset:v}:null}).filter(ki):s.domain().map((g,_)=>{var S=s.map(g);return Rt(S)?{coordinate:S+v,value:n?n[g]:g,index:_,offset:v}:null}).filter(ki)},wX=(e,t)=>{if(!t||t.length!==2||!$e(t[0])||!$e(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!$e(e[0])||e[0]<r)&&(i[0]=r),(!$e(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},_X=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var a=0,s=0,o=0;o<r;++o){var c=e[o],u=c==null?void 0:c[i];if(u!=null){var d=u[1],f=u[0],p=Es(d)?f:d;p>=0?(u[0]=a,a+=p,u[1]=a):(u[0]=s,s+=p,u[1]=s)}}}},jX=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var a=0,s=0;s<r;++s){var o=e[s],c=o==null?void 0:o[i];if(c!=null){var u=Es(c[1])?c[0]:c[1];u>=0?(c[0]=a,a+=u,c[1]=a):(c[0]=0,c[1]=0)}}}},SX={sign:_X,expand:iY,none:Wc,silhouette:aY,wiggle:sY,positive:jX},NX=(e,t,r)=>{var n,i=(n=SX[r])!==null&&n!==void 0?n:Wc,a=nY().keys(t).value((o,c)=>Number(rr(o,c,0))).order(sw).offset(i),s=a(e);return s.forEach((o,c)=>{o.forEach((u,d)=>{var f=rr(e[d],t[c],0);Array.isArray(f)&&f.length===2&&$e(f[0])&&$e(f[1])&&(u[0]=f[0],u[1]=f[1])})}),s};function kX(e){return e==null?void 0:String(e)}function Y4(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ir(i[t.dataKey])){var o=YI(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r!=null&&r[a]?r[a].coordinate+n/2:null}var c=rr(i,Ir(s)?t.dataKey:s),u=t.scale.map(c);return $e(u)?u:null}var J4=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=rr(a,t.dataKey,t.scale.domain()[s]);if(Ir(o))return null;var c=t.scale.map(o);return $e(c)?c-i/2+n:null},AX=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},EX=e=>{var t=e.flat(2).filter($e);return[Math.min(...t),Math.max(...t)]},PX=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],CX=(e,t,r)=>{if(e!=null)return PX(Object.keys(e).reduce((n,i)=>{var a=e[i];if(!a)return n;var{stackedData:s}=a,o=s.reduce((c,u)=>{var d=i8(u,t,r),f=EX(d);return!Rt(f[0])||!Rt(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},X4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Z4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rd=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=x0(t,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),a)}return a===1/0?0:a}return r?void 0:0};function Q4(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return ud(ud({},t),{},{dataKey:r,payload:n,value:i,name:a})}function Zd(e,t){if(e)return String(e);if(typeof t=="string")return t}var OX=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},TX=(e,t)=>t==="centric"?e.angle:e.radius,Oo=e=>e.layout.width,To=e=>e.layout.height,IX=e=>e.layout.scale,o8=e=>e.layout.margin,P0=ge(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),C0=ge(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),l8="data-recharts-item-index",c8="data-recharts-item-id",Ip=60;function eE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(r),!0).forEach(function(n){LX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LX(e,t,r){return(t=DX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DX(e){var t=RX(e,"string");return typeof t=="symbol"?t:t+""}function RX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MX=e=>e.brush.height;function FX(e){var t=C0(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ip;return r+i}return r},0)}function BX(e){var t=C0(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ip;return r+i}return r},0)}function $X(e){var t=P0(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function UX(e){var t=P0(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var wn=ge([Oo,To,o8,MX,FX,BX,$X,UX,AL,hJ],(e,t,r,n,i,a,s,o,c,u)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},p=wv(wv({},f),d),h=p.bottom;p.bottom+=n,p=bX(p,c,u);var y=e-p.left-p.right,v=t-p.top-p.bottom;return wv(wv({brushBottom:h},p),{},{width:Math.max(y,0),height:Math.max(v,0)})}),zX=ge(wn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),M5=ge(Oo,To,(e,t)=>({x:0,y:0,width:e,height:t})),qX=b.createContext(null),li=()=>b.useContext(qX)!=null,O0=e=>e.brush,T0=ge([O0,wn,o8],(e,t,r)=>({height:e.height,x:$e(e.x)?e.x:t.left,y:$e(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:$e(e.width)?e.width:t.width})),u8={},d8={},f8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),v()};let p=null;const h=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},n)},y=()=>{p!==null&&(clearTimeout(p),p=null)},v=()=>{y(),s=void 0,o=null},x=()=>{d()},g=function(..._){if(i!=null&&i.aborted)return;s=this,o=_;const S=p==null;h(),c&&S&&d()};return g.schedule=h,g.cancel=v,g.flush=x,i==null||i.addEventListener("abort",v,{once:!0}),g}e.debounce=t})(f8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f8;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const p=t.debounce(function(...v){d=n.apply(this,v),f=null},i,{edges:u}),h=function(...v){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,v),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,v),d)},y=()=>(p.flush(),d);return h.cancel=p.cancel,h.flush=y,h}e.debounce=r})(d8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d8;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(u8);var WX=u8.throttle;const HX=Ts(WX);var ty=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},ws={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},h8=(e,t,r)=>{var{width:n=ws.width,height:i=ws.height,aspect:a,maxHeight:s}=r,o=Vc(n)?e:Number(n),c=Vc(i)?t:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},VX={width:0,height:0,overflow:"visible"},KX={width:0,overflowX:"visible"},GX={height:0,overflowY:"visible"},YX={},JX=e=>{var{width:t,height:r}=e,n=Vc(t),i=Vc(r);return n&&i?VX:n?KX:i?GX:YX};function XX(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return i===void 0&&a===void 0?(i=ws.width,a=ws.height):i===void 0?i=n&&n>0?void 0:ws.width:a===void 0&&(a=n&&n>0?void 0:ws.height),{width:i,height:a}}function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yw.apply(null,arguments)}function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tE(Object(r),!0).forEach(function(n){ZX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZX(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=eZ(e,"string");return typeof t=="symbol"?t:t+""}function eZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p8=b.createContext(ws.initialDimension);function tZ(e){return Cs(e.width)&&Cs(e.height)}function m8(e){var{children:t,width:r,height:n}=e,i=b.useMemo(()=>({width:r,height:n}),[r,n]);return tZ(i)?b.createElement(p8.Provider,{value:i},t):null}var F5=()=>b.useContext(p8),rZ=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=ws.initialDimension,width:i,height:a,minWidth:s=ws.minWidth,minHeight:o,maxHeight:c,children:u,debounce:d=ws.debounce,id:f,className:p,onResize:h,style:y={}}=e,v=b.useRef(null),x=b.useRef();x.current=h,b.useImperativeHandle(t,()=>v.current);var[g,_]=b.useState({containerWidth:n.width,containerHeight:n.height}),S=b.useCallback((E,C)=>{_(L=>{var I=Math.round(E),O=Math.round(C);return L.containerWidth===I&&L.containerHeight===O?L:{containerWidth:I,containerHeight:O}})},[]);b.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return du;var E=O=>{var U,V=O[0];if(V!=null){var{width:ie,height:ne}=V.contentRect;S(ie,ne),(U=x.current)===null||U===void 0||U.call(x,ie,ne)}};d>0&&(E=HX(E,d,{trailing:!0,leading:!1}));var C=new ResizeObserver(E),{width:L,height:I}=v.current.getBoundingClientRect();return S(L,I),C.observe(v.current),()=>{C.disconnect()}},[S,d]);var{containerWidth:j,containerHeight:A}=g;ty(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:D}=h8(j,A,{width:i,height:a,aspect:r,maxHeight:c});return ty(N!=null&&N>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,D,i,a,s,o,r),b.createElement("div",{id:f?"".concat(f):void 0,className:Ut("recharts-responsive-container",p),style:rE(rE({},y),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:v},b.createElement("div",{style:JX({width:i,height:a})},b.createElement(m8,{width:N,height:D},u)))}),Gc=b.forwardRef((e,t)=>{var r=F5();if(Cs(r.width)&&Cs(r.height))return e.children;var{width:n,height:i}=XX({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=h8(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return $e(a)&&$e(s)?b.createElement(m8,{width:a,height:s},e.children):b.createElement(rZ,yw({},e,{width:n,height:i,ref:t}))});function B5(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var I0=()=>{var e,t=li(),r=Ve(zX),n=Ve(T0),i=(e=Ve(O0))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},nZ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},v8=()=>{var e;return(e=Ve(wn))!==null&&e!==void 0?e:nZ},$5=()=>Ve(Oo),U5=()=>Ve(To),iZ=()=>Ve(e=>e.layout.margin),Ht=e=>e.layout.layoutType,fu=()=>Ve(Ht),g8=()=>{var e=fu();if(e==="horizontal"||e==="vertical")return e},y8=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},aZ=()=>{var e=fu();return e!==void 0},Lp=e=>{var t=mr(),r=li(),{width:n,height:i}=e,a=F5(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),b.useEffect(()=>{!r&&Cs(s)&&Cs(o)&&t(pX({width:s,height:o}))},[t,r,s,o]),null},x8=Symbol.for("immer-nothing"),nE=Symbol.for("immer-draftable"),Qi=Symbol.for("immer-state");function qa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var op=Object.getPrototypeOf;function Md(e){return!!e&&!!e[Qi]}function Yc(e){var t;return e?b8(e)||Array.isArray(e)||!!e[nE]||!!((t=e.constructor)!=null&&t[nE])||Dp(e)||D0(e):!1}var sZ=Object.prototype.constructor.toString(),iE=new WeakMap;function b8(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=iE.get(r);return n===void 0&&(n=Function.toString.call(r),iE.set(r,n)),n===sZ}function ry(e,t,r=!0){L0(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function L0(e){const t=e[Qi];return t?t.type_:Array.isArray(e)?1:Dp(e)?2:D0(e)?3:0}function xw(e,t){return L0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function w8(e,t,r){const n=L0(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function oZ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dp(e){return e instanceof Map}function D0(e){return e instanceof Set}function vc(e){return e.copy_||e.base_}function bw(e,t){if(Dp(e))return new Map(e);if(D0(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=b8(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Qi];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(op(e),n)}else{const n=op(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function z5(e,t=!1){return R0(e)||Md(e)||!Yc(e)||(L0(e)>1&&Object.defineProperties(e,{set:_v,add:_v,clear:_v,delete:_v}),Object.freeze(e),t&&Object.values(e).forEach(r=>z5(r,!0))),e}function lZ(){qa(2)}var _v={value:lZ};function R0(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var cZ={};function Jc(e){const t=cZ[e];return t||qa(0,e),t}var lp;function _8(){return lp}function uZ(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function aE(e,t){t&&(Jc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ww(e){_w(e),e.drafts_.forEach(dZ),e.drafts_=null}function _w(e){e===lp&&(lp=e.parent_)}function sE(e){return lp=uZ(lp,e)}function dZ(e){const t=e[Qi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function oE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Qi].modified_&&(ww(t),qa(4)),Yc(e)&&(e=ny(t,e),t.parent_||iy(t,e)),t.patches_&&Jc("Patches").generateReplacementPatches_(r[Qi].base_,e,t.patches_,t.inversePatches_)):e=ny(t,r,[]),ww(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==x8?e:void 0}function ny(e,t,r){if(R0(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[Qi];if(!i)return ry(t,(a,s)=>lE(e,i,t,a,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return iy(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),ry(s,(c,u)=>lE(e,i,a,c,u,r,o),n),iy(e,a,!1),r&&e.patches_&&Jc("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function lE(e,t,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=R0(i);if(!(o&&!s)){if(Md(i)){const c=a&&t&&t.type_!==3&&!xw(t.assigned_,n)?a.concat(n):void 0,u=ny(e,i,c);if(w8(r,n,u),Md(u))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Yc(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&o)return;ny(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Dp(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&iy(e,i)}}}function iy(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&z5(t,r)}function fZ(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:_8(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=q5;r&&(i=[n],a=cp);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var q5={get(e,t){if(t===Qi)return e;const r=vc(e);if(!xw(r,t))return hZ(e,r,t);const n=r[t];return e.finalized_||!Yc(n)?n:n===db(e.base_,t)?(fb(e),e.copy_[t]=Sw(n,e)):n},has(e,t){return t in vc(e)},ownKeys(e){return Reflect.ownKeys(vc(e))},set(e,t,r){const n=j8(vc(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=db(vc(e),t),a=i==null?void 0:i[Qi];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(oZ(r,i)&&(r!==void 0||xw(e.base_,t)))return!0;fb(e),jw(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return db(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,fb(e),jw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=vc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){qa(11)},getPrototypeOf(e){return op(e.base_)},setPrototypeOf(){qa(12)}},cp={};ry(q5,(e,t)=>{cp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});cp.deleteProperty=function(e,t){return cp.set.call(this,e,t,void 0)};cp.set=function(e,t,r){return q5.set.call(this,e[0],t,r,e[0])};function db(e,t){const r=e[Qi];return(r?vc(r):e)[t]}function hZ(e,t,r){var i;const n=j8(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function j8(e,t){if(!(t in e))return;let r=op(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=op(r)}}function jw(e){e.modified_||(e.modified_=!0,e.parent_&&jw(e.parent_))}function fb(e){e.copy_||(e.copy_=bw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var pZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(c=a,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&qa(6),n!==void 0&&typeof n!="function"&&qa(7);let i;if(Yc(t)){const a=sE(this),s=Sw(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?ww(a):_w(a)}return aE(a,n),oE(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===x8&&(i=void 0),this.autoFreeze_&&z5(i,!0),n){const a=[],s=[];Jc("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else qa(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,c=>t(c,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Yc(e)||qa(8),Md(e)&&(e=mZ(e));const t=sE(this),r=Sw(e,void 0);return r[Qi].isManual_=!0,_w(t),r}finishDraft(e,t){const r=e&&e[Qi];(!r||!r.isManual_)&&qa(9);const{scope_:n}=r;return aE(n,t),oE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Jc("Patches").applyPatches_;return Md(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Sw(e,t){const r=Dp(e)?Jc("MapSet").proxyMap_(e,t):D0(e)?Jc("MapSet").proxySet_(e,t):fZ(e,t);return(t?t.scope_:_8()).drafts_.push(r),r}function mZ(e){return Md(e)||qa(10,e),S8(e)}function S8(e){if(!Yc(e)||R0(e))return e;const t=e[Qi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=bw(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=bw(e,!0);return ry(r,(i,a)=>{w8(r,i,S8(a))},n),t&&(t.finalized_=!1),r}var vZ=new pZ;vZ.produce;var gZ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},N8=Ti({name:"legend",initialState:gZ,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Sr()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ka(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Sr()},removeLegendPayload:{reducer(e,t){var r=Ka(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Sr()}}}),{setLegendSize:cE,setLegendSettings:yZ,addLegendPayload:k8,replaceLegendPayload:A8,removeLegendPayload:E8}=N8.actions,xZ=N8.reducer,bZ=["contextPayload"];function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nw.apply(null,arguments)}function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(r),!0).forEach(function(n){wZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wZ(e,t,r){return(t=_Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e){var t=jZ(e,"string");return typeof t=="symbol"?t:t+""}function jZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SZ(e,t){if(e==null)return{};var r,n,i=NZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function NZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kZ(e){return e.value}function AZ(e){var{contextPayload:t}=e,r=SZ(e,bZ),n=vL(t,e.payloadUniqBy,kZ),i=Fd(Fd({},r),{},{payload:n});return b.isValidElement(e.content)?b.cloneElement(e.content,i):typeof e.content=="function"?b.createElement(e.content,i):b.createElement(TY,i)}function EZ(e,t,r,n,i,a){var{layout:s,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&s==="vertical"?u={left:((n||0)-a.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((i||0)-a.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Fd(Fd({},u),d)}function PZ(e){var t=mr();return b.useEffect(()=>{t(yZ(e))},[t,e]),null}function CZ(e){var t=mr();return b.useEffect(()=>(t(cE(e)),()=>{t(cE({width:0,height:0}))}),[t,e]),null}function OZ(e,t,r,n){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:r||n}:null}var TZ={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function kw(e){var t=un(e,TZ),r=vJ(),n=AG(),i=iZ(),{width:a,height:s,wrapperStyle:o,portal:c}=t,[u,d]=EL([r]),f=$5(),p=U5();if(f==null||p==null)return null;var h=f-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),y=OZ(t.layout,s,a,h),v=c?o:Fd(Fd({position:"absolute",width:(y==null?void 0:y.width)||a||"auto",height:(y==null?void 0:y.height)||s||"auto"},EZ(o,t,i,f,p,u)),o),x=c??n;if(x==null||r==null)return null;var g=b.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:d},b.createElement(PZ,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&b.createElement(CZ,{width:u.width,height:u.height}),b.createElement(AZ,Nw({},t,y,{margin:i,chartWidth:f,chartHeight:p,contextPayload:r})));return Xy.createPortal(g,x)}kw.displayName="Legend";function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aw.apply(null,arguments)}function dE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(r),!0).forEach(function(n){IZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IZ(e,t,r){return(t=LZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LZ(e){var t=DZ(e,"string");return typeof t=="symbol"?t:t+""}function DZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RZ(e){return Array.isArray(e)&&Ps(e[0])&&Ps(e[1])?e.join(" ~ "):e}var $u={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},MZ=e=>{var{separator:t=$u.separator,contentStyle:r,itemStyle:n,labelStyle:i=$u.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:p=$u.accessibilityLayer}=e,h=()=>{if(a&&a.length){var A={padding:0,margin:0},N=(o?x0(a,o):a).map((D,E)=>{if(D.type==="none")return null;var C=D.formatter||s||RZ,{value:L,name:I}=D,O=L,U=I;if(C){var V=C(L,I,D,E,a);if(Array.isArray(V))[O,U]=V;else if(V!=null)O=V;else return null}var ie=Xf(Xf({},$u.itemStyle),{},{color:D.color||$u.itemStyle.color},n);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:ie},Ps(U)?b.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Ps(U)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},O),b.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:A},N)}return null},y=Xf(Xf({},$u.contentStyle),r),v=Xf({margin:0},i),x=!Ir(d),g=x?d:"",_=Ut("recharts-default-tooltip",c),S=Ut("recharts-tooltip-label",u);x&&f&&a!==void 0&&a!==null&&(g=f(d,a));var j=p?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",Aw({className:_,style:y},j),b.createElement("p",{className:S,style:v},b.isValidElement(g)?g:"".concat(g)),h())},Zf="recharts-tooltip-wrapper",FZ={visibility:"hidden"};function BZ(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ut(Zf,{["".concat(Zf,"-right")]:$e(r)&&t&&$e(t.x)&&r>=t.x,["".concat(Zf,"-left")]:$e(r)&&t&&$e(t.x)&&r<t.x,["".concat(Zf,"-bottom")]:$e(n)&&t&&$e(t.y)&&n>=t.y,["".concat(Zf,"-top")]:$e(n)&&t&&$e(t.y)&&n<t.y})}function fE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(a&&$e(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),f=r[n]+i;if(t[n])return s[n]?d:f;var p=c[n];if(p==null)return 0;if(s[n]){var h=d,y=p;return h<y?Math.max(f,p):Math.max(d,p)}if(u==null)return 0;var v=f+o,x=p+u;return v>x?Math.max(d,p):Math.max(f,p)}function $Z(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function UZ(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:u}=e,d,f,p;return o.height>0&&o.width>0&&r?(f=fE({allowEscapeViewBox:t,coordinate:r,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=fE({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=$Z({translateX:f,translateY:p,useTranslate3d:c})):d=FZ,{cssProperties:d,cssClasses:BZ({translateX:f,translateY:p,coordinate:r})}}function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(r),!0).forEach(function(n){Ew(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ew(e,t,r){return(t=zZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zZ(e){var t=qZ(e,"string");return typeof t=="symbol"?t:t+""}function qZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class WZ extends b.PureComponent{constructor(){super(...arguments),Ew(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ew(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:p,viewBox:h,wrapperStyle:y,lastBoundingBox:v,innerRef:x,hasPortalFromProps:g}=this.props,_=typeof u=="number"?u:u.x,S=typeof u=="number"?u:u.y,{cssClasses:j,cssProperties:A}=UZ({allowEscapeViewBox:r,coordinate:s,offsetLeft:_,offsetTop:S,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:p,viewBox:h}),N=g?{}:jv(jv({transition:c&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),D=jv(jv({},N),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},y);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:D,ref:x},a)}}var P8=()=>{var e;return(e=Ve(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pw.apply(null,arguments)}function pE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(r),!0).forEach(function(n){HZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HZ(e,t,r){return(t=VZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VZ(e){var t=KZ(e,"string");return typeof t=="symbol"?t:t+""}function KZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vE={curveBasisClosed:VG,curveBasisOpen:KG,curveBasis:HG,curveBumpX:OG,curveBumpY:TG,curveLinearClosed:GG,curveLinear:d0,curveMonotoneX:YG,curveMonotoneY:JG,curveNatural:XG,curveStep:ZG,curveStepAfter:eY,curveStepBefore:QG},ay=e=>Rt(e.x)&&Rt(e.y),gE=e=>e.base!=null&&ay(e.base)&&ay(e),Qf=e=>e.x,eh=e=>e.y,GZ=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Pp(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=vE["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return vE[r]||d0},yE={connectNulls:!1,type:"linear"},YZ=e=>{var{type:t=yE.type,points:r=[],baseLine:n,layout:i,connectNulls:a=yE.connectNulls}=e,s=GZ(t,i),o=a?r.filter(ay):r;if(Array.isArray(n)){var c,u=r.map((y,v)=>mE(mE({},y),{},{base:n[v]}));i==="vertical"?c=mv().y(eh).x1(Qf).x0(y=>y.base.x):c=mv().x(Qf).y1(eh).y0(y=>y.base.y);var d=c.defined(gE).curve(s),f=a?u.filter(gE):u;return d(f)}var p;i==="vertical"&&$e(n)?p=mv().y(eh).x1(Qf).x0(n):$e(n)?p=mv().x(Qf).y1(eh).y0(n):p=DI().x(Qf).y(eh);var h=p.defined(ay).curve(s);return h(o)},W5=e=>{var{className:t,points:r,path:n,pathRef:i}=e,a=fu();if((!r||!r.length)&&!n)return null;var s={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||a,connectNulls:e.connectNulls},o=r&&r.length?YZ(s):n;return b.createElement("path",Pw({},Zi(e),x5(e),{className:Ut("recharts-curve",t),d:o===null?void 0:o,ref:i}))},JZ=["x","y","top","left","width","height","className"];function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(null,arguments)}function xE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(r),!0).forEach(function(n){ZZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZZ(e,t,r){return(t=QZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QZ(e){var t=eQ(e,"string");return typeof t=="symbol"?t:t+""}function eQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tQ(e,t){if(e==null)return{};var r,n,i=rQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nQ=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),iQ=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,c=tQ(e,JZ),u=XZ({x:t,y:r,top:n,left:i,width:a,height:s},c);return!$e(t)||!$e(r)||!$e(a)||!$e(s)||!$e(n)||!$e(i)?null:b.createElement("path",Cw({},gi(u),{className:Ut("recharts-cross",o),d:nQ(t,r,a,s,n,i)}))};function aQ(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function bE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(r),!0).forEach(function(n){sQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sQ(e,t,r){return(t=oQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oQ(e){var t=lQ(e,"string");return typeof t=="symbol"?t:t+""}function lQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cQ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),C8=(e,t,r)=>e.map(n=>"".concat(cQ(n)," ").concat(t,"ms ").concat(r)).join(","),uQ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),up=(e,t)=>Object.keys(t).reduce((r,n)=>wE(wE({},r),{},{[n]:e(n,t[n])}),{});function _E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_E(Object(r),!0).forEach(function(n){dQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dQ(e,t,r){return(t=fQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fQ(e){var t=hQ(e,"string");return typeof t=="symbol"?t:t+""}function hQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sy=(e,t,r)=>e+(t-e)*r,Ow=e=>{var{from:t,to:r}=e;return t!==r},O8=(e,t,r)=>{var n=up((i,a)=>{if(Ow(a)){var[s,o]=e(a.from,a.to,a.velocity);return xn(xn({},a),{},{from:s,velocity:o})}return a},t);return r<1?up((i,a)=>Ow(a)&&n[i]!=null?xn(xn({},a),{},{velocity:sy(a.velocity,n[i].velocity,r),from:sy(a.from,n[i].from,r)}):a,t):O8(e,n,r-1)};function pQ(e,t,r,n,i,a){var s,o=n.reduce((p,h)=>xn(xn({},p),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>up((p,h)=>h.from,o),u=()=>!Object.values(o).filter(Ow).length,d=null,f=p=>{s||(s=p);var h=p-s,y=h/r.dt;o=O8(r,o,y),i(xn(xn(xn({},e),t),c())),s=p,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function mQ(e,t,r,n,i,a,s){var o=null,c=i.reduce((f,p)=>{var h=e[p],y=t[p];return h==null||y==null?f:xn(xn({},f),{},{[p]:[h,y]})},{}),u,d=f=>{u||(u=f);var p=(f-u)/n,h=up((v,x)=>sy(...x,r(p)),c);if(a(xn(xn(xn({},e),t),h)),p<1)o=s.setTimeout(d);else{var y=up((v,x)=>sy(...x,r(1)),c);a(xn(xn(xn({},e),t),y))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const vQ=(e,t,r,n,i,a)=>{var s=uQ(e,t);return r==null?()=>(i(xn(xn({},e),t)),()=>{}):r.isStepper===!0?pQ(e,t,r,s,i,a):mQ(e,t,r,n,s,i,a)};var oy=1e-4,T8=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],I8=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),jE=(e,t)=>r=>{var n=T8(e,t);return I8(n,r)},gQ=(e,t)=>r=>{var n=T8(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return I8(i,r)},yQ=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},xQ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=yQ(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},bQ=(e,t,r,n)=>{var i=jE(e,r),a=jE(t,n),s=gQ(e,r),o=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,p=0;p<8;++p){var h=i(f)-d,y=s(f);if(Math.abs(h-d)<oy||y<oy)return a(f);f=o(f-h/y)}return a(f)};return c.isStepper=!1,c},SE=function(){return bQ(...xQ(...arguments))},wQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,c)=>{var u=-(s-o)*r,d=c*n,f=c+(u-d)*i/1e3,p=c*i/1e3+s;return Math.abs(p-o)<oy&&Math.abs(f)<oy?[o,0]:[p,f]};return a.isStepper=!0,a.dt=i,a},_Q=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SE(e);case"spring":return wQ();default:if(e.split("(")[0]==="cubic-bezier")return SE(e)}return typeof e=="function"?e:null};function jQ(e){var t,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=e.setTimeout(a.bind(null,u),c);return}a(c),i=e.setTimeout(a.bind(null,u));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class SQ{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function NQ(){return jQ(new SQ)}var kQ=b.createContext(NQ);function AQ(e,t){var r=b.useContext(kQ);return b.useMemo(()=>t??r(e),[e,t,r])}var EQ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),M0={isSsr:EQ()},PQ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},NE={t:0},hb={t:1};function Rp(e){var t=un(e,PQ),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=r==="auto"?!M0.isSsr:r,f=AQ(t.animationId,t.animationManager),[p,h]=b.useState(d?NE:hb),y=b.useRef(null);return b.useEffect(()=>{d||h(hb)},[d]),b.useEffect(()=>{if(!d||!n)return du;var v=vQ(NE,hb,_Q(a),i,h,f.getTimeoutController()),x=()=>{y.current=v()};return f.start([c,s,x,i,o]),()=>{f.stop(),y.current&&y.current(),o()}},[d,n,i,a,s,c,o,f]),u(p.t)}function Mp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(np(t)),n=b.useRef(e);return n.current!==e&&(r.current=np(t),n.current=e),r.current}var CQ=["radius"],OQ=["radius"],kE,AE,EE,PE,CE,OE,TE,IE,LE,DE;function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ME(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(n){TQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=LQ(e,"string");return typeof t=="symbol"?t:t+""}function LQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(null,arguments)}function FE(e,t){if(e==null)return{};var r,n,i=DQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var BE=(e,t,r,n,i)=>{var a=vl(r),s=vl(n),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&Array.isArray(i)){for(var p=[0,0,0,0],h=0,y=4;h<y;h++){var v,x=(v=i[h])!==null&&v!==void 0?v:0;p[h]=x>o?o:x}f=Ur(kE||(kE=fs(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=Ur(AE||(AE=fs(["A ",",",",0,0,",",",",",""])),p[0],p[0],d,e+u*p[0],t)),f+=Ur(EE||(EE=fs(["L ",",",""])),e+r-u*p[1],t),p[1]>0&&(f+=Ur(PE||(PE=fs(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],d,e+r,t+c*p[1])),f+=Ur(CE||(CE=fs(["L ",",",""])),e+r,t+n-c*p[2]),p[2]>0&&(f+=Ur(OE||(OE=fs(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],d,e+r-u*p[2],t+n)),f+=Ur(TE||(TE=fs(["L ",",",""])),e+u*p[3],t+n),p[3]>0&&(f+=Ur(IE||(IE=fs(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],d,e,t+n-c*p[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);f=Ur(LE||(LE=fs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*g,g,g,d,e+u*g,t,e+r-u*g,t,g,g,d,e+r,t+c*g,e+r,t+n-c*g,g,g,d,e+r-u*g,t+n,e+u*g,t+n,g,g,d,e,t+n-c*g)}else f=Ur(DE||(DE=fs(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return f},$E={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},L8=e=>{var t=un(e,$E),r=b.useRef(null),[n,i]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ee=r.current.getTotalLength();ee&&i(ee)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:h,isAnimationActive:y,isUpdateAnimationActive:v}=t,x=b.useRef(o),g=b.useRef(c),_=b.useRef(a),S=b.useRef(s),j=b.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),A=Mp(j,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var N=Ut("recharts-rectangle",d);if(!v){var D=gi(t),{radius:E}=D,C=FE(D,CQ);return b.createElement("path",ly({},C,{x:vl(a),y:vl(s),width:vl(o),height:vl(c),radius:typeof u=="number"?u:void 0,className:N,d:BE(a,s,o,c,u)}))}var L=x.current,I=g.current,O=_.current,U=S.current,V="0px ".concat(n===-1?1:n,"px"),ie="".concat(n,"px 0px"),ne=C8(["strokeDasharray"],p,typeof f=="string"?f:$E.animationEasing);return b.createElement(Rp,{animationId:A,key:A,canBegin:n>0,duration:p,easing:f,isActive:v,begin:h},ee=>{var q=kr(L,o,ee),Y=kr(I,c,ee),fe=kr(O,a,ee),te=kr(U,s,ee);r.current&&(x.current=q,g.current=Y,_.current=fe,S.current=te);var R;y?ee>0?R={transition:ne,strokeDasharray:ie}:R={strokeDasharray:V}:R={strokeDasharray:ie};var z=gi(t),{radius:G}=z,re=FE(z,OQ);return b.createElement("path",ly({},re,{radius:typeof u=="number"?u:void 0,className:N,d:BE(fe,te,q,Y,u),ref:r,style:ME(ME({},R),t.style)}))})};function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(r),!0).forEach(function(n){RQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RQ(e,t,r){return(t=MQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MQ(e){var t=FQ(e,"string");return typeof t=="symbol"?t:t+""}function FQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cy=Math.PI/180,BQ=e=>e*180/Math.PI,on=(e,t,r,n)=>({x:e+Math.cos(-cy*n)*r,y:t+Math.sin(-cy*n)*r}),D8=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},$Q=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},UQ=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=$Q({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:s,angle:BQ(c),angleInRadian:c}},zQ=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},qQ=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},WQ=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:a}=UQ({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=zQ(t),d=a,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?zE(zE({},t),{},{radius:i,angle:qQ(d,t)}):null};function R8(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=on(t,r,n,i),o=on(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}var qE,WE,HE,VE,KE,GE,YE;function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tw.apply(null,arguments)}function Nc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var HQ=(e,t)=>{var r=Cn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Sv=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=e,u=o*(s?1:-1)+n,d=Math.asin(o/u)/cy,f=c?i:i+a*d,p=on(t,r,u,f),h=on(t,r,n,f),y=c?i-a*d:i,v=on(t,r,u*Math.cos(d*cy),y);return{center:p,circleTangency:h,lineTangency:v,theta:d}},M8=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=HQ(a,s),c=a+o,u=on(t,r,i,a),d=on(t,r,i,c),f=Ur(qE||(qE=Nc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),d.x,d.y);if(n>0){var p=on(t,r,n,a),h=on(t,r,n,c);f+=Ur(WE||(WE=Nc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(o)>180),+(a<=c),p.x,p.y)}else f+=Ur(HE||(HE=Nc(["L ",","," Z"])),t,r);return f},VQ=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Cn(u-c),{circleTangency:f,lineTangency:p,theta:h}=Sv({cx:t,cy:r,radius:i,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:y,lineTangency:v,theta:x}=Sv({cx:t,cy:r,radius:i,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),g=o?Math.abs(c-u):Math.abs(c-u)-h-x;if(g<0)return s?Ur(VE||(VE=Nc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,a,a,a*2,a,a,-a*2):M8({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:u});var _=Ur(KE||(KE=Nc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,a,a,+(d<0),f.x,f.y,i,i,+(g>180),+(d<0),y.x,y.y,a,a,+(d<0),v.x,v.y);if(n>0){var{circleTangency:S,lineTangency:j,theta:A}=Sv({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:N,lineTangency:D,theta:E}=Sv({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-A-E;if(C<0&&a===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+=Ur(GE||(GE=Nc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,a,a,+(d<0),N.x,N.y,n,n,+(C>180),+(d>0),S.x,S.y,a,a,+(d<0),j.x,j.y)}else _+=Ur(YE||(YE=Nc(["L",",","Z"])),t,r);return _},KQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},F8=e=>{var t=un(e,KQ),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(a<i||u===d)return null;var p=Ut("recharts-sector",f),h=a-i,y=si(s,h,0,!0),v;return y>0&&Math.abs(u-d)<360?v=VQ({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(y,h/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):v=M8({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d}),b.createElement("path",Tw({},gi(t),{className:p,d:v}))};function GQ(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(XI(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=t,c=on(n,i,a,o),u=on(n,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return R8(t)}}var B8={},$8={},U8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P5;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(U8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U8;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})($8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5,r=$8;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}e.range=n})(B8);var YQ=B8.range;const z8=Ts(YQ);function kl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JQ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function H5(e){let t,r,n;e.length!==2?(t=kl,r=(o,c)=>kl(e(o),c),n=(o,c)=>e(o)-c):(t=e===kl||e===JQ?e:XQ,r=e,n=e);function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=i(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:i,center:s,right:a}}function XQ(){return 0}function q8(e){return e===null?NaN:+e}function*ZQ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const QQ=H5(kl),Fp=QQ.right;H5(q8).center;class JE extends Map{constructor(t,r=ree){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(XE(this,t))}has(t){return super.has(XE(this,t))}set(t,r){return super.set(eee(this,t),r)}delete(t){return super.delete(tee(this,t))}}function XE({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function eee({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function tee({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ree(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nee(e=kl){if(e===kl)return W8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function W8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const iee=Math.sqrt(50),aee=Math.sqrt(10),see=Math.sqrt(2);function uy(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=iee?10:a>=aee?5:a>=see?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?uy(e,t,r*2):[o,c,u]}function Iw(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?uy(t,e,r):uy(e,t,r);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function Lw(e,t,r){return t=+t,e=+e,r=+r,uy(e,t,r)[2]}function Dw(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Lw(t,e,r):Lw(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function ZE(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function QE(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function H8(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?W8:nee(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+p)),y=Math.min(n,Math.floor(t+(c-u)*f/c+p));H8(e,t,h,y,i)}const a=e[t];let s=r,o=n;for(th(e,r,t),i(e[n],a)>0&&th(e,r,n);s<o;){for(th(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?th(e,r,o):(++o,th(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function th(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function oee(e,t,r){if(e=Float64Array.from(ZQ(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return QE(e);if(t>=1)return ZE(e);var n,i=(n-1)*t,a=Math.floor(i),s=ZE(H8(e,a).subarray(0,a+1)),o=QE(e.subarray(a+1));return s+(o-s)*(i-a)}}function lee(e,t,r=q8){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function cee(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function Na(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Io(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Rw=Symbol("implicit");function V5(){var e=new JE,t=[],r=[],n=Rw;function i(a){let s=e.get(a);if(s===void 0){if(n!==Rw)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new JE;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return V5(t,r).unknown(n)},Na.apply(i,arguments),i}function K5(){var e=V5().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,h=i<n,y=h?i:n,v=h?n:i;a=(v-y)/Math.max(1,p-c+u*2),o&&(a=Math.floor(a)),y+=(v-y-a*(p-c))*d,s=a*(1-c),o&&(y=Math.round(y),s=Math.round(s));var x=cee(p).map(function(g){return y+a*g});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return K5(t(),[n,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},Na.apply(f(),arguments)}function V8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return V8(t())},e}function uee(){return V8(K5.apply(null,arguments).paddingInner(1))}function G5(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function K8(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Bp(){}var dp=.7,dy=1/dp,Nd="\\s*([+-]?\\d+)\\s*",fp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dee=/^#([0-9a-f]{3,8})$/,fee=new RegExp(`^rgb\\(${Nd},${Nd},${Nd}\\)$`),hee=new RegExp(`^rgb\\(${ks},${ks},${ks}\\)$`),pee=new RegExp(`^rgba\\(${Nd},${Nd},${Nd},${fp}\\)$`),mee=new RegExp(`^rgba\\(${ks},${ks},${ks},${fp}\\)$`),vee=new RegExp(`^hsl\\(${fp},${ks},${ks}\\)$`),gee=new RegExp(`^hsla\\(${fp},${ks},${ks},${fp}\\)$`),e3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};G5(Bp,hp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t3,formatHex:t3,formatHex8:yee,formatHsl:xee,formatRgb:r3,toString:r3});function t3(){return this.rgb().formatHex()}function yee(){return this.rgb().formatHex8()}function xee(){return G8(this).formatHsl()}function r3(){return this.rgb().formatRgb()}function hp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dee.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?n3(t):r===3?new Ai(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Nv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Nv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fee.exec(e))?new Ai(t[1],t[2],t[3],1):(t=hee.exec(e))?new Ai(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pee.exec(e))?Nv(t[1],t[2],t[3],t[4]):(t=mee.exec(e))?Nv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vee.exec(e))?s3(t[1],t[2]/100,t[3]/100,1):(t=gee.exec(e))?s3(t[1],t[2]/100,t[3]/100,t[4]):e3.hasOwnProperty(e)?n3(e3[e]):e==="transparent"?new Ai(NaN,NaN,NaN,0):null}function n3(e){return new Ai(e>>16&255,e>>8&255,e&255,1)}function Nv(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ai(e,t,r,n)}function bee(e){return e instanceof Bp||(e=hp(e)),e?(e=e.rgb(),new Ai(e.r,e.g,e.b,e.opacity)):new Ai}function Mw(e,t,r,n){return arguments.length===1?bee(e):new Ai(e,t,r,n??1)}function Ai(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}G5(Ai,Mw,K8(Bp,{brighter(e){return e=e==null?dy:Math.pow(dy,e),new Ai(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dp:Math.pow(dp,e),new Ai(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ai(Ic(this.r),Ic(this.g),Ic(this.b),fy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i3,formatHex:i3,formatHex8:wee,formatRgb:a3,toString:a3}));function i3(){return`#${kc(this.r)}${kc(this.g)}${kc(this.b)}`}function wee(){return`#${kc(this.r)}${kc(this.g)}${kc(this.b)}${kc((isNaN(this.opacity)?1:this.opacity)*255)}`}function a3(){const e=fy(this.opacity);return`${e===1?"rgb(":"rgba("}${Ic(this.r)}, ${Ic(this.g)}, ${Ic(this.b)}${e===1?")":`, ${e})`}`}function fy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ic(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kc(e){return e=Ic(e),(e<16?"0":"")+e.toString(16)}function s3(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Wa(e,t,r,n)}function G8(e){if(e instanceof Wa)return new Wa(e.h,e.s,e.l,e.opacity);if(e instanceof Bp||(e=hp(e)),!e)return new Wa;if(e instanceof Wa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,c=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Wa(s,o,c,e.opacity)}function _ee(e,t,r,n){return arguments.length===1?G8(e):new Wa(e,t,r,n??1)}function Wa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}G5(Wa,_ee,K8(Bp,{brighter(e){return e=e==null?dy:Math.pow(dy,e),new Wa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dp:Math.pow(dp,e),new Wa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Ai(pb(e>=240?e-240:e+120,i,n),pb(e,i,n),pb(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Wa(o3(this.h),kv(this.s),kv(this.l),fy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fy(this.opacity);return`${e===1?"hsl(":"hsla("}${o3(this.h)}, ${kv(this.s)*100}%, ${kv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function o3(e){return e=(e||0)%360,e<0?e+360:e}function kv(e){return Math.max(0,Math.min(1,e||0))}function pb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Y5=e=>()=>e;function jee(e,t){return function(r){return e+r*t}}function See(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Nee(e){return(e=+e)==1?Y8:function(t,r){return r-t?See(t,r,e):Y5(isNaN(t)?r:t)}}function Y8(e,t){var r=t-e;return r?jee(e,r):Y5(isNaN(e)?t:e)}const l3=function e(t){var r=Nee(t);function n(i,a){var s=r((i=Mw(i)).r,(a=Mw(a)).r),o=r(i.g,a.g),c=r(i.b,a.b),u=Y8(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function kee(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function Aee(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Eee(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Qd(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function Pee(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Cee(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Qd(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Fw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mb=new RegExp(Fw.source,"g");function Oee(e){return function(){return e}}function Tee(e){return function(t){return e(t)+""}}function Iee(e,t){var r=Fw.lastIndex=mb.lastIndex=0,n,i,a,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Fw.exec(e))&&(i=mb.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:hy(n,i)})),r=mb.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Tee(c[0].x):Oee(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Qd(e,t){var r=typeof t,n;return t==null||r==="boolean"?Y5(t):(r==="number"?hy:r==="string"?(n=hp(t))?(t=n,l3):Iee:t instanceof hp?l3:t instanceof Date?Pee:Aee(t)?kee:Array.isArray(t)?Eee:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cee:hy)(e,t)}function J5(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Lee(e,t){t===void 0&&(t=e,e=Qd);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function Dee(e){return function(){return e}}function py(e){return+e}var c3=[0,1];function mi(e){return e}function Bw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Dee(isNaN(t)?NaN:.5)}function Ree(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Mee(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=Bw(i,n),a=r(s,a)):(n=Bw(n,i),a=r(a,s)),function(o){return a(n(o))}}function Fee(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=Bw(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var c=Fp(e,o,1,n)-1;return a[c](i[c](o))}}function $p(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function F0(){var e=c3,t=c3,r=Qd,n,i,a,s=mi,o,c,u;function d(){var p=Math.min(e.length,t.length);return s!==mi&&(s=Ree(e[0],e[p-1])),o=p>2?Fee:Mee,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(c||(c=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(i((u||(u=o(t,e.map(n),hy)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,py),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=J5,d()},f.clamp=function(p){return arguments.length?(s=p?!0:mi,d()):s!==mi},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,h){return n=p,i=h,d()}}function X5(){return F0()(mi,mi)}function Bee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function my(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Bd(e){return e=my(Math.abs(e)),e?e[1]:NaN}function $ee(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],c=0;i>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(i-=o,i+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Uee(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var zee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pp(e){if(!(t=zee.exec(e)))throw new Error("invalid format: "+e);var t;return new Z5({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pp.prototype=Z5.prototype;function Z5(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Z5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qee(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var vy;function Wee(e,t){var r=my(e,t);if(!r)return vy=void 0,e.toPrecision(t);var n=r[0],i=r[1],a=i-(vy=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+my(e,Math.max(0,t+a-1))[0]}function u3(e,t){var r=my(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const d3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Bee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u3(e*100,t),r:u3,s:Wee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function f3(e){return e}var h3=Array.prototype.map,p3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Hee(e){var t=e.grouping===void 0||e.thousands===void 0?f3:$ee(h3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?f3:Uee(h3.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f,p){f=pp(f);var h=f.fill,y=f.align,v=f.sign,x=f.symbol,g=f.zero,_=f.width,S=f.comma,j=f.precision,A=f.trim,N=f.type;N==="n"?(S=!0,N="g"):d3[N]||(j===void 0&&(j=12),A=!0,N="g"),(g||h==="0"&&y==="=")&&(g=!0,h="0",y="=");var D=(p&&p.prefix!==void 0?p.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():""),E=(x==="$"?n:/[%p]/.test(N)?s:"")+(p&&p.suffix!==void 0?p.suffix:""),C=d3[N],L=/[defgprs%]/.test(N);j=j===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function I(O){var U=D,V=E,ie,ne,ee;if(N==="c")V=C(O)+V,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?c:C(Math.abs(O),j),A&&(O=qee(O)),q&&+O==0&&v!=="+"&&(q=!1),U=(q?v==="("?v:o:v==="-"||v==="("?"":v)+U,V=(N==="s"&&!isNaN(O)&&vy!==void 0?p3[8+vy/3]:"")+V+(q&&v==="("?")":""),L){for(ie=-1,ne=O.length;++ie<ne;)if(ee=O.charCodeAt(ie),48>ee||ee>57){V=(ee===46?i+O.slice(ie+1):O.slice(ie))+V,O=O.slice(0,ie);break}}}S&&!g&&(O=t(O,1/0));var Y=U.length+O.length+V.length,fe=Y<_?new Array(_-Y+1).join(h):"";switch(S&&g&&(O=t(fe+O,fe.length?_-V.length:1/0),fe=""),y){case"<":O=U+O+V+fe;break;case"=":O=U+fe+O+V;break;case"^":O=fe.slice(0,Y=fe.length>>1)+U+O+V+fe.slice(Y);break;default:O=fe+U+O+V;break}return a(O)}return I.toString=function(){return f+""},I}function d(f,p){var h=Math.max(-8,Math.min(8,Math.floor(Bd(p)/3)))*3,y=Math.pow(10,-h),v=u((f=pp(f),f.type="f",f),{suffix:p3[8+h/3]});return function(x){return v(y*x)}}return{format:u,formatPrefix:d}}var Av,Q5,J8;Vee({thousands:",",grouping:[3],currency:["$",""]});function Vee(e){return Av=Hee(e),Q5=Av.format,J8=Av.formatPrefix,Av}function Kee(e){return Math.max(0,-Bd(Math.abs(e)))}function Gee(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bd(t)/3)))*3-Bd(Math.abs(e)))}function Yee(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bd(t)-Bd(e))+1}function X8(e,t,r,n){var i=Dw(e,t,r),a;switch(n=pp(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=Gee(i,s))&&(n.precision=a),J8(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Yee(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Kee(i))&&(n.precision=a-(n.type==="%")*2);break}}return Q5(n)}function Bl(e){var t=e.domain;return e.ticks=function(r){var n=t();return Iw(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return X8(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=Lw(s,o,r),u===c)return n[i]=s,n[a]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function Z8(){var e=X5();return e.copy=function(){return $p(e,Z8())},Na.apply(e,arguments),Bl(e)}function Q8(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,py),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Q8(e).unknown(t)},e=arguments.length?Array.from(e,py):[0,1],Bl(r)}function eD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function m3(e){return Math.log(e)}function v3(e){return Math.exp(e)}function Jee(e){return-Math.log(-e)}function Xee(e){return-Math.exp(-e)}function Zee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qee(e){return e===10?Zee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ete(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function g3(e){return(t,r)=>-e(-t,r)}function ej(e){const t=e(m3,v3),r=t.domain;let n=10,i,a;function s(){return i=ete(n),a=Qee(n),r()[0]<0?(i=g3(i),a=g3(a),e(Jee,Xee)):e(m3,v3),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),h=i(d),y,v;const x=o==null?10:+o;let g=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(y=1;y<n;++y)if(v=p<0?y/a(-p):y*a(p),!(v<u)){if(v>d)break;g.push(v)}}else for(;p<=h;++p)for(y=n-1;y>=1;--y)if(v=p>0?y/a(-p):y*a(p),!(v<u)){if(v>d)break;g.push(v)}g.length*2<x&&(g=Iw(u,d,x))}else g=Iw(p,h,Math.min(h-p,x)).map(a);return f?g.reverse():g},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=pp(c)).precision==null&&(c.trim=!0),c=Q5(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(eD(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function tD(){const e=ej(F0()).domain([1,10]);return e.copy=()=>$p(e,tD()).base(e.base()),Na.apply(e,arguments),e}function y3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function x3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tj(e){var t=1,r=e(y3(t),x3(t));return r.constant=function(n){return arguments.length?e(y3(t=+n),x3(t)):t},Bl(r)}function rD(){var e=tj(F0());return e.copy=function(){return $p(e,rD()).constant(e.constant())},Na.apply(e,arguments)}function b3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tte(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rte(e){return e<0?-e*e:e*e}function rj(e){var t=e(mi,mi),r=1;function n(){return r===1?e(mi,mi):r===.5?e(tte,rte):e(b3(r),b3(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Bl(t)}function nj(){var e=rj(F0());return e.copy=function(){return $p(e,nj()).exponent(e.exponent())},Na.apply(e,arguments),e}function nte(){return nj.apply(null,arguments).exponent(.5)}function w3(e){return Math.sign(e)*e*e}function ite(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function nD(){var e=X5(),t=[0,1],r=!1,n;function i(a){var s=ite(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(w3(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,py)).map(w3)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return nD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Na.apply(i,arguments),Bl(i)}function iD(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=lee(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[Fp(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(kl),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return iD().domain(e).range(t).unknown(n)},Na.apply(a,arguments)}function aD(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Fp(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return aD().domain([e,t]).range(i).unknown(a)},Na.apply(Bl(s),arguments)}function sD(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[Fp(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return sD().domain(e).range(t).unknown(r)},Na.apply(i,arguments)}const vb=new Date,gb=new Date;function _n(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<s);return c},i.filter=a=>_n(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(vb.setTime(+a),gb.setTime(+s),e(vb),e(gb),Math.floor(r(vb,gb))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const gy=_n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gy.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_n(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):gy);gy.range;const uo=1e3,ya=uo*60,fo=ya*60,_o=fo*24,ij=_o*7,_3=_o*30,yb=_o*365,Ac=_n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*uo)},(e,t)=>(t-e)/uo,e=>e.getUTCSeconds());Ac.range;const aj=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uo)},(e,t)=>{e.setTime(+e+t*ya)},(e,t)=>(t-e)/ya,e=>e.getMinutes());aj.range;const sj=_n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ya)},(e,t)=>(t-e)/ya,e=>e.getUTCMinutes());sj.range;const oj=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uo-e.getMinutes()*ya)},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getHours());oj.range;const lj=_n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getUTCHours());lj.range;const Up=_n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ya)/_o,e=>e.getDate()-1);Up.range;const B0=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>e.getUTCDate()-1);B0.range;const oD=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>Math.floor(e/_o));oD.range;function hu(e){return _n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ya)/ij)}const $0=hu(0),yy=hu(1),ate=hu(2),ste=hu(3),$d=hu(4),ote=hu(5),lte=hu(6);$0.range;yy.range;ate.range;ste.range;$d.range;ote.range;lte.range;function pu(e){return _n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ij)}const U0=pu(0),xy=pu(1),cte=pu(2),ute=pu(3),Ud=pu(4),dte=pu(5),fte=pu(6);U0.range;xy.range;cte.range;ute.range;Ud.range;dte.range;fte.range;const cj=_n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cj.range;const uj=_n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());uj.range;const jo=_n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());jo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});jo.range;const So=_n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());So.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});So.range;function lD(e,t,r,n,i,a){const s=[[Ac,1,uo],[Ac,5,5*uo],[Ac,15,15*uo],[Ac,30,30*uo],[a,1,ya],[a,5,5*ya],[a,15,15*ya],[a,30,30*ya],[i,1,fo],[i,3,3*fo],[i,6,6*fo],[i,12,12*fo],[n,1,_o],[n,2,2*_o],[r,1,ij],[t,1,_3],[t,3,3*_3],[e,1,yb]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),y=h?h.range(u,+d+1):[];return p?y.reverse():y}function c(u,d,f){const p=Math.abs(d-u)/f,h=H5(([,,x])=>x).right(s,p);if(h===s.length)return e.every(Dw(u/yb,d/yb,f));if(h===0)return gy.every(Math.max(Dw(u,d,f),1));const[y,v]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return y.every(v)}return[o,c]}const[hte,pte]=lD(So,uj,U0,oD,lj,sj),[mte,vte]=lD(jo,cj,$0,Up,oj,aj);function xb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function rh(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function gte(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=nh(i),d=ih(i),f=nh(a),p=ih(a),h=nh(s),y=ih(s),v=nh(o),x=ih(o),g=nh(c),_=ih(c),S={a:ee,A:q,b:Y,B:fe,c:null,d:E3,e:E3,f:$te,g:Jte,G:Zte,H:Mte,I:Fte,j:Bte,L:cD,m:Ute,M:zte,p:te,q:R,Q:O3,s:T3,S:qte,u:Wte,U:Hte,V:Vte,w:Kte,W:Gte,x:null,X:null,y:Yte,Y:Xte,Z:Qte,"%":C3},j={a:z,A:G,b:re,B:ae,c:null,d:P3,e:P3,f:nre,g:hre,G:mre,H:ere,I:tre,j:rre,L:dD,m:ire,M:are,p:ce,q:pe,Q:O3,s:T3,S:sre,u:ore,U:lre,V:cre,w:ure,W:dre,x:null,X:null,y:fre,Y:pre,Z:vre,"%":C3},A={a:L,A:I,b:O,B:U,c:V,d:k3,e:k3,f:Ite,g:N3,G:S3,H:A3,I:A3,j:Pte,L:Tte,m:Ete,M:Cte,p:C,q:Ate,Q:Dte,s:Rte,S:Ote,u:_te,U:jte,V:Ste,w:wte,W:Nte,x:ie,X:ne,y:N3,Y:S3,Z:kte,"%":Lte};S.x=N(r,S),S.X=N(n,S),S.c=N(t,S),j.x=N(r,j),j.X=N(n,j),j.c=N(t,j);function N(Q,he){return function(oe){var ue=[],Ce=-1,Ee=0,H=Q.length,je,Je,De;for(oe instanceof Date||(oe=new Date(+oe));++Ce<H;)Q.charCodeAt(Ce)===37&&(ue.push(Q.slice(Ee,Ce)),(Je=j3[je=Q.charAt(++Ce)])!=null?je=Q.charAt(++Ce):Je=je==="e"?" ":"0",(De=he[je])&&(je=De(oe,Je)),ue.push(je),Ee=Ce+1);return ue.push(Q.slice(Ee,Ce)),ue.join("")}}function D(Q,he){return function(oe){var ue=rh(1900,void 0,1),Ce=E(ue,Q,oe+="",0),Ee,H;if(Ce!=oe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(he&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Ee=bb(rh(ue.y,0,1)),H=Ee.getUTCDay(),Ee=H>4||H===0?xy.ceil(Ee):xy(Ee),Ee=B0.offset(Ee,(ue.V-1)*7),ue.y=Ee.getUTCFullYear(),ue.m=Ee.getUTCMonth(),ue.d=Ee.getUTCDate()+(ue.w+6)%7):(Ee=xb(rh(ue.y,0,1)),H=Ee.getDay(),Ee=H>4||H===0?yy.ceil(Ee):yy(Ee),Ee=Up.offset(Ee,(ue.V-1)*7),ue.y=Ee.getFullYear(),ue.m=Ee.getMonth(),ue.d=Ee.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),H="Z"in ue?bb(rh(ue.y,0,1)).getUTCDay():xb(rh(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(H+5)%7:ue.w+ue.U*7-(H+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,bb(ue)):xb(ue)}}function E(Q,he,oe,ue){for(var Ce=0,Ee=he.length,H=oe.length,je,Je;Ce<Ee;){if(ue>=H)return-1;if(je=he.charCodeAt(Ce++),je===37){if(je=he.charAt(Ce++),Je=A[je in j3?he.charAt(Ce++):je],!Je||(ue=Je(Q,oe,ue))<0)return-1}else if(je!=oe.charCodeAt(ue++))return-1}return ue}function C(Q,he,oe){var ue=u.exec(he.slice(oe));return ue?(Q.p=d.get(ue[0].toLowerCase()),oe+ue[0].length):-1}function L(Q,he,oe){var ue=h.exec(he.slice(oe));return ue?(Q.w=y.get(ue[0].toLowerCase()),oe+ue[0].length):-1}function I(Q,he,oe){var ue=f.exec(he.slice(oe));return ue?(Q.w=p.get(ue[0].toLowerCase()),oe+ue[0].length):-1}function O(Q,he,oe){var ue=g.exec(he.slice(oe));return ue?(Q.m=_.get(ue[0].toLowerCase()),oe+ue[0].length):-1}function U(Q,he,oe){var ue=v.exec(he.slice(oe));return ue?(Q.m=x.get(ue[0].toLowerCase()),oe+ue[0].length):-1}function V(Q,he,oe){return E(Q,t,he,oe)}function ie(Q,he,oe){return E(Q,r,he,oe)}function ne(Q,he,oe){return E(Q,n,he,oe)}function ee(Q){return s[Q.getDay()]}function q(Q){return a[Q.getDay()]}function Y(Q){return c[Q.getMonth()]}function fe(Q){return o[Q.getMonth()]}function te(Q){return i[+(Q.getHours()>=12)]}function R(Q){return 1+~~(Q.getMonth()/3)}function z(Q){return s[Q.getUTCDay()]}function G(Q){return a[Q.getUTCDay()]}function re(Q){return c[Q.getUTCMonth()]}function ae(Q){return o[Q.getUTCMonth()]}function ce(Q){return i[+(Q.getUTCHours()>=12)]}function pe(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var he=N(Q+="",S);return he.toString=function(){return Q},he},parse:function(Q){var he=D(Q+="",!1);return he.toString=function(){return Q},he},utcFormat:function(Q){var he=N(Q+="",j);return he.toString=function(){return Q},he},utcParse:function(Q){var he=D(Q+="",!0);return he.toString=function(){return Q},he}}}var j3={"-":"",_:" ",0:"0"},In=/^\s*\d+/,yte=/^%/,xte=/[\\^$*+?|[\]().{}]/g;function qt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function bte(e){return e.replace(xte,"\\$&")}function nh(e){return new RegExp("^(?:"+e.map(bte).join("|")+")","i")}function ih(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function wte(e,t,r){var n=In.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function _te(e,t,r){var n=In.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function jte(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Ste(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Nte(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function S3(e,t,r){var n=In.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function N3(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kte(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ate(e,t,r){var n=In.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Ete(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function k3(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Pte(e,t,r){var n=In.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function A3(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Cte(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Ote(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Tte(e,t,r){var n=In.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ite(e,t,r){var n=In.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Lte(e,t,r){var n=yte.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Dte(e,t,r){var n=In.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Rte(e,t,r){var n=In.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function E3(e,t){return qt(e.getDate(),t,2)}function Mte(e,t){return qt(e.getHours(),t,2)}function Fte(e,t){return qt(e.getHours()%12||12,t,2)}function Bte(e,t){return qt(1+Up.count(jo(e),e),t,3)}function cD(e,t){return qt(e.getMilliseconds(),t,3)}function $te(e,t){return cD(e,t)+"000"}function Ute(e,t){return qt(e.getMonth()+1,t,2)}function zte(e,t){return qt(e.getMinutes(),t,2)}function qte(e,t){return qt(e.getSeconds(),t,2)}function Wte(e){var t=e.getDay();return t===0?7:t}function Hte(e,t){return qt($0.count(jo(e)-1,e),t,2)}function uD(e){var t=e.getDay();return t>=4||t===0?$d(e):$d.ceil(e)}function Vte(e,t){return e=uD(e),qt($d.count(jo(e),e)+(jo(e).getDay()===4),t,2)}function Kte(e){return e.getDay()}function Gte(e,t){return qt(yy.count(jo(e)-1,e),t,2)}function Yte(e,t){return qt(e.getFullYear()%100,t,2)}function Jte(e,t){return e=uD(e),qt(e.getFullYear()%100,t,2)}function Xte(e,t){return qt(e.getFullYear()%1e4,t,4)}function Zte(e,t){var r=e.getDay();return e=r>=4||r===0?$d(e):$d.ceil(e),qt(e.getFullYear()%1e4,t,4)}function Qte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qt(t/60|0,"0",2)+qt(t%60,"0",2)}function P3(e,t){return qt(e.getUTCDate(),t,2)}function ere(e,t){return qt(e.getUTCHours(),t,2)}function tre(e,t){return qt(e.getUTCHours()%12||12,t,2)}function rre(e,t){return qt(1+B0.count(So(e),e),t,3)}function dD(e,t){return qt(e.getUTCMilliseconds(),t,3)}function nre(e,t){return dD(e,t)+"000"}function ire(e,t){return qt(e.getUTCMonth()+1,t,2)}function are(e,t){return qt(e.getUTCMinutes(),t,2)}function sre(e,t){return qt(e.getUTCSeconds(),t,2)}function ore(e){var t=e.getUTCDay();return t===0?7:t}function lre(e,t){return qt(U0.count(So(e)-1,e),t,2)}function fD(e){var t=e.getUTCDay();return t>=4||t===0?Ud(e):Ud.ceil(e)}function cre(e,t){return e=fD(e),qt(Ud.count(So(e),e)+(So(e).getUTCDay()===4),t,2)}function ure(e){return e.getUTCDay()}function dre(e,t){return qt(xy.count(So(e)-1,e),t,2)}function fre(e,t){return qt(e.getUTCFullYear()%100,t,2)}function hre(e,t){return e=fD(e),qt(e.getUTCFullYear()%100,t,2)}function pre(e,t){return qt(e.getUTCFullYear()%1e4,t,4)}function mre(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ud(e):Ud.ceil(e),qt(e.getUTCFullYear()%1e4,t,4)}function vre(){return"+0000"}function C3(){return"%"}function O3(e){return+e}function T3(e){return Math.floor(+e/1e3)}var Uu,hD,pD;gre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gre(e){return Uu=gte(e),hD=Uu.format,Uu.parse,pD=Uu.utcFormat,Uu.utcParse,Uu}function yre(e){return new Date(e)}function xre(e){return e instanceof Date?+e:+new Date(+e)}function dj(e,t,r,n,i,a,s,o,c,u){var d=X5(),f=d.invert,p=d.domain,h=u(".%L"),y=u(":%S"),v=u("%I:%M"),x=u("%I %p"),g=u("%a %d"),_=u("%b %d"),S=u("%B"),j=u("%Y");function A(N){return(c(N)<N?h:o(N)<N?y:s(N)<N?v:a(N)<N?x:n(N)<N?i(N)<N?g:_:r(N)<N?S:j)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?p(Array.from(N,xre)):p().map(yre)},d.ticks=function(N){var D=p();return e(D[0],D[D.length-1],N??10)},d.tickFormat=function(N,D){return D==null?A:u(D)},d.nice=function(N){var D=p();return(!N||typeof N.range!="function")&&(N=t(D[0],D[D.length-1],N??10)),N?p(eD(D,N)):d},d.copy=function(){return $p(d,dj(e,t,r,n,i,a,s,o,c,u))},d}function bre(){return Na.apply(dj(mte,vte,jo,cj,$0,Up,oj,aj,Ac,hD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wre(){return Na.apply(dj(hte,pte,So,uj,U0,B0,lj,sj,Ac,pD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function z0(){var e=0,t=1,r,n,i,a,s=mi,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,y;return arguments.length?([h,y]=p,s=f(h,y),u):[s(0),s(1)]}}return u.range=d(Qd),u.rangeRound=d(J5),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),u}}function $l(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mD(){var e=Bl(z0()(mi));return e.copy=function(){return $l(e,mD())},Io.apply(e,arguments)}function vD(){var e=ej(z0()).domain([1,10]);return e.copy=function(){return $l(e,vD()).base(e.base())},Io.apply(e,arguments)}function gD(){var e=tj(z0());return e.copy=function(){return $l(e,gD()).constant(e.constant())},Io.apply(e,arguments)}function fj(){var e=rj(z0());return e.copy=function(){return $l(e,fj()).exponent(e.exponent())},Io.apply(e,arguments)}function _re(){return fj.apply(null,arguments).exponent(.5)}function yD(){var e=[],t=mi;function r(n){if(n!=null&&!isNaN(n=+n))return t((Fp(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(kl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>oee(e,a/n))},r.copy=function(){return yD(t).domain(e)},Io.apply(r,arguments)}function q0(){var e=0,t=.5,r=1,n=1,i,a,s,o,c,u=mi,d,f=!1,p;function h(v){return isNaN(v=+v)?p:(v=.5+((v=+d(v))-a)*(n*v<n*a?o:c),u(f?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t,r]=v,i=d(e=+e),a=d(t=+t),s=d(r=+r),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,h):[e,t,r]},h.clamp=function(v){return arguments.length?(f=!!v,h):f},h.interpolator=function(v){return arguments.length?(u=v,h):u};function y(v){return function(x){var g,_,S;return arguments.length?([g,_,S]=x,u=Lee(v,[g,_,S]),h):[u(0),u(.5),u(1)]}}return h.range=y(Qd),h.rangeRound=y(J5),h.unknown=function(v){return arguments.length?(p=v,h):p},function(v){return d=v,i=v(e),a=v(t),s=v(r),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,h}}function xD(){var e=Bl(q0()(mi));return e.copy=function(){return $l(e,xD())},Io.apply(e,arguments)}function bD(){var e=ej(q0()).domain([.1,1,10]);return e.copy=function(){return $l(e,bD()).base(e.base())},Io.apply(e,arguments)}function wD(){var e=tj(q0());return e.copy=function(){return $l(e,wD()).constant(e.constant())},Io.apply(e,arguments)}function hj(){var e=rj(q0());return e.copy=function(){return $l(e,hj()).exponent(e.exponent())},Io.apply(e,arguments)}function jre(){return hj.apply(null,arguments).exponent(.5)}const fh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:K5,scaleDiverging:xD,scaleDivergingLog:bD,scaleDivergingPow:hj,scaleDivergingSqrt:jre,scaleDivergingSymlog:wD,scaleIdentity:Q8,scaleImplicit:Rw,scaleLinear:Z8,scaleLog:tD,scaleOrdinal:V5,scalePoint:uee,scalePow:nj,scaleQuantile:iD,scaleQuantize:aD,scaleRadial:nD,scaleSequential:mD,scaleSequentialLog:vD,scaleSequentialPow:fj,scaleSequentialQuantile:yD,scaleSequentialSqrt:_re,scaleSequentialSymlog:gD,scaleSqrt:nte,scaleSymlog:rD,scaleThreshold:sD,scaleTime:bre,scaleUtc:wre,tickFormat:X8},Symbol.toStringTag,{value:"Module"}));var Lo=e=>e.chartData,W0=ge([Lo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),pj=(e,t,r,n)=>n?W0(e):Lo(e),Sre=(e,t,r)=>r?W0(e):Lo(e);function No(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Rt(t)&&Rt(r))return!0}return!1}function I3(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function _D(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(Rt(r))i=r;else if(typeof r=="function")return;if(Rt(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(No(s))return s}}function Nre(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(No(n))return I3(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if($e(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&X4.test(i)){var c=X4.exec(i);if(c==null||c[1]==null||t==null)s=void 0;else{var u=+c[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if($e(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&Z4.test(a)){var d=Z4.exec(a);if(d==null||d[1]==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var p=[s,o];if(No(p))return t==null?p:I3(p,t,r)}}}var ef=1e9,kre={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vj,Er=!0,Sa="[DecimalError] ",Lc=Sa+"Invalid argument: ",mj=Sa+"Exponent out of range: ",tf=Math.floor,gc=Math.pow,Are=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hi,An=1e7,yr=7,jD=9007199254740991,by=tf(jD/yr),Ue={};Ue.absoluteValue=Ue.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ue.comparedTo=Ue.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ue.dividedBy=Ue.div=function(e){return po(this,new this.constructor(e))};Ue.dividedToIntegerBy=Ue.idiv=function(e){var t=this,r=t.constructor;return sr(po(t,new r(e),0,1),r.precision)};Ue.equals=Ue.eq=function(e){return!this.cmp(e)};Ue.exponent=function(){return cn(this)};Ue.greaterThan=Ue.gt=function(e){return this.cmp(e)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(e){return this.cmp(e)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(e){return this.cmp(e)<0};Ue.lessThanOrEqualTo=Ue.lte=function(e){return this.cmp(e)<1};Ue.logarithm=Ue.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Hi))throw Error(Sa+"NaN");if(r.s<1)throw Error(Sa+(r.s?"NaN":"-Infinity"));return r.eq(Hi)?new n(0):(Er=!1,t=po(mp(r,a),mp(e,a),a),Er=!0,sr(t,i))};Ue.minus=Ue.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kD(t,e):SD(t,(e.s=-e.s,e))};Ue.modulo=Ue.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Sa+"NaN");return r.s?(Er=!1,t=po(r,e,0,1).times(e),Er=!0,r.minus(t)):sr(new n(r),i)};Ue.naturalExponential=Ue.exp=function(){return ND(this)};Ue.naturalLogarithm=Ue.ln=function(){return mp(this)};Ue.negated=Ue.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ue.plus=Ue.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?SD(t,e):kD(t,(e.s=-e.s,e))};Ue.precision=Ue.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lc+e);if(t=cn(i)+1,n=i.d.length-1,r=n*yr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ue.squareRoot=Ue.sqrt=function(){var e,t,r,n,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Sa+"NaN")}for(e=cn(o),Er=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=_s(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=tf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=s=r+3;;)if(a=n,n=a.plus(po(o,a,s+2)).times(.5),_s(a.d).slice(0,s)===(t=_s(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(sr(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return Er=!0,sr(n,r)};Ue.times=Ue.mul=function(e){var t,r,n,i,a,s,o,c,u,d=this,f=d.constructor,p=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=p.length,u=h.length,c<u&&(a=p,p=h,h=a,s=c,c=u,u=s),a=[],s=c+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)o=a[i]+h[n]*p[i-n-1]+t,a[i--]=o%An|0,t=o/An|0;a[i]=(a[i]+t)%An|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Er?sr(e,f.precision):e};Ue.toDecimalPlaces=Ue.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Os(e,0,ef),t===void 0?t=n.rounding:Os(t,0,8),sr(r,e+cn(r)+1,t))};Ue.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Xc(n,!0):(Os(e,0,ef),t===void 0?t=i.rounding:Os(t,0,8),n=sr(new i(n),e+1,t),r=Xc(n,!0,e+1)),r};Ue.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?Xc(i):(Os(e,0,ef),t===void 0?t=a.rounding:Os(t,0,8),n=sr(new a(i),e+cn(i)+1,t),r=Xc(n.abs(),!1,e+cn(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ue.toInteger=Ue.toint=function(){var e=this,t=e.constructor;return sr(new t(e),cn(e)+1,t.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(e){var t,r,n,i,a,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Hi);if(o=new c(o),!o.s){if(e.s<1)throw Error(Sa+"Infinity");return o}if(o.eq(Hi))return o;if(n=c.precision,e.eq(Hi))return sr(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=d<0?-d:d)<=jD){for(i=new c(Hi),t=Math.ceil(n/yr+4),Er=!1;r%2&&(i=i.times(o),D3(i.d,t)),r=tf(r/2),r!==0;)o=o.times(o),D3(o.d,t);return Er=!0,e.s<0?new c(Hi).div(i):sr(i,n)}}else if(a<0)throw Error(Sa+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Er=!1,i=e.times(mp(o,n+u)),Er=!0,i=ND(i),i.s=a,i};Ue.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=cn(i),n=Xc(i,r<=a.toExpNeg||r>=a.toExpPos)):(Os(e,1,ef),t===void 0?t=a.rounding:Os(t,0,8),i=sr(new a(i),e,t),r=cn(i),n=Xc(i,e<=r||r<=a.toExpNeg,e)),n};Ue.toSignificantDigits=Ue.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Os(e,1,ef),t===void 0?t=n.rounding:Os(t,0,8)),sr(new n(r),e,t)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=cn(e),r=e.constructor;return Xc(e,t<=r.toExpNeg||t>=r.toExpPos)};function SD(e,t){var r,n,i,a,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Er?sr(t,f):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i,a){for(a<0?(n=c,a=-a,o=u.length):(n=u,i=s,o=c.length),s=Math.ceil(f/yr),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/An|0,c[a]%=An;for(r&&(c.unshift(r),++i),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=i,Er?sr(t,f):t}function Os(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Lc+e)}function _s(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=yr-n.length,r&&(a+=sl(r)),a+=n;s=e[t],n=s+"",r=yr-n.length,r&&(a+=sl(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var po=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%An|0,s=a/An|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=i[o]){c=n[o]>i[o]?1:-1;break}return c}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*An+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,c,u,d,f,p,h,y,v,x,g,_,S,j,A,N,D,E,C=n.constructor,L=n.s==i.s?1:-1,I=n.d,O=i.d;if(!n.s)return new C(n);if(!i.s)throw Error(Sa+"Division by zero");for(c=n.e-i.e,D=O.length,A=I.length,h=new C(L),y=h.d=[],u=0;O[u]==(I[u]||0);)++u;if(O[u]>(I[u]||0)&&--c,a==null?_=a=C.precision:s?_=a+(cn(n)-cn(i))+1:_=a,_<0)return new C(0);if(_=_/yr+2|0,u=0,D==1)for(d=0,O=O[0],_++;(u<A||d)&&_--;u++)S=d*An+(I[u]||0),y[u]=S/O|0,d=S%O|0;else{for(d=An/(O[0]+1)|0,d>1&&(O=e(O,d),I=e(I,d),D=O.length,A=I.length),j=D,v=I.slice(0,D),x=v.length;x<D;)v[x++]=0;E=O.slice(),E.unshift(0),N=O[0],O[1]>=An/2&&++N;do d=0,o=t(O,v,D,x),o<0?(g=v[0],D!=x&&(g=g*An+(v[1]||0)),d=g/N|0,d>1?(d>=An&&(d=An-1),f=e(O,d),p=f.length,x=v.length,o=t(f,v,p,x),o==1&&(d--,r(f,D<p?E:O,p))):(d==0&&(o=d=1),f=O.slice()),p=f.length,p<x&&f.unshift(0),r(v,f,x),o==-1&&(x=v.length,o=t(O,v,D,x),o<1&&(d++,r(v,D<x?E:O,x))),x=v.length):o===0&&(d++,v=[0]),y[u++]=d,o&&v[0]?v[x++]=I[j]||0:(v=[I[j]],x=1);while((j++<A||v[0]!==void 0)&&_--)}return y[0]||y.shift(),h.e=c,sr(h,s?a+cn(h)+1:a)}}();function ND(e,t){var r,n,i,a,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(cn(e)>16)throw Error(mj+cn(e));if(!e.s)return new d(Hi);for(Er=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(gc(2,u))/Math.LN10*2+5|0,o+=n,r=i=a=new d(Hi),d.precision=o;;){if(i=sr(i.times(e),o),r=r.times(++c),s=a.plus(po(i,r,o)),_s(s.d).slice(0,o)===_s(a.d).slice(0,o)){for(;u--;)a=sr(a.times(a),o);return d.precision=f,t==null?(Er=!0,sr(a,f)):a}a=s}}function cn(e){for(var t=e.e*yr,r=e.d[0];r>=10;r/=10)t++;return t}function wb(e,t,r){if(t>e.LN10.sd())throw Er=!0,r&&(e.precision=r),Error(Sa+"LN10 precision limit exceeded");return sr(new e(e.LN10),t)}function sl(e){for(var t="";e--;)t+="0";return t}function mp(e,t){var r,n,i,a,s,o,c,u,d,f=1,p=10,h=e,y=h.d,v=h.constructor,x=v.precision;if(h.s<1)throw Error(Sa+(h.s?"NaN":"-Infinity"));if(h.eq(Hi))return new v(0);if(t==null?(Er=!1,u=x):u=t,h.eq(10))return t==null&&(Er=!0),wb(v,u);if(u+=p,v.precision=u,r=_s(y),n=r.charAt(0),a=cn(h),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=_s(h.d),n=r.charAt(0),f++;a=cn(h),n>1?(h=new v("0."+r),a++):h=new v(n+"."+r.slice(1))}else return c=wb(v,u+2,x).times(a+""),h=mp(new v(n+"."+r.slice(1)),u-p).plus(c),v.precision=x,t==null?(Er=!0,sr(h,x)):h;for(o=s=h=po(h.minus(Hi),h.plus(Hi),u),d=sr(h.times(h),u),i=3;;){if(s=sr(s.times(d),u),c=o.plus(po(s,new v(i),u)),_s(c.d).slice(0,u)===_s(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(wb(v,u+2,x).times(a+""))),o=po(o,new v(f),u),v.precision=x,t==null?(Er=!0,sr(o,x)):o;o=c,i+=2}}function L3(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=tf(r/yr),e.d=[],n=(r+1)%yr,r<0&&(n+=yr),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=yr;n<i;)e.d.push(+t.slice(n,n+=yr));t=t.slice(n),n=yr-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Er&&(e.e>by||e.e<-by))throw Error(mj+r)}else e.s=0,e.e=0,e.d=[0];return e}function sr(e,t,r){var n,i,a,s,o,c,u,d,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=yr,i=t,u=f[d=0];else{if(d=Math.ceil((n+1)/yr),a=f.length,d>=a)return e;for(u=a=f[d],s=1;a>=10;a/=10)s++;n%=yr,i=n-yr+s}if(r!==void 0&&(a=gc(10,s-i-1),o=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?i>0?u/gc(10,s-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(a=cn(e),f.length=1,t=t-a-1,f[0]=gc(10,(yr-t%yr)%yr),e.e=tf(-t/yr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=gc(10,yr-n),f[d]=i>0?(u/gc(10,s-i)%gc(10,i)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==An&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=An)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Er&&(e.e>by||e.e<-by))throw Error(mj+cn(e));return e}function kD(e,t){var r,n,i,a,s,o,c,u,d,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Er?sr(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),i=Math.max(Math.ceil(h/yr),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>s;){if(c[--i]<f[i]){for(a=i;a&&c[--a]===0;)c[a]=An-1;--c[a],c[i]+=An}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Er?sr(t,h):t):new p(0)}function Xc(e,t,r){var n,i=cn(e),a=_s(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+sl(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+sl(-i-1)+a,r&&(n=r-s)>0&&(a+=sl(n))):i>=s?(a+=sl(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+sl(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=sl(n))),e.s<0?"-"+a:a}function D3(e,t){if(e.length>t)return e.length=t,!0}function AD(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Lc+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return L3(s,a.toString())}else if(typeof a!="string")throw Error(Lc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Are.test(a))L3(s,a);else throw Error(Lc+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=AD,i.config=i.set=Ere,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Ere(e){if(!e||typeof e!="object")throw Error(Sa+"Object expected");var t,r,n,i=["precision",1,ef,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(tf(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Lc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Lc+r+": "+n);return this}var vj=AD(kre);Hi=new vj(1);const Qt=vj;function ED(e){var t;return e===0?t=1:t=Math.floor(new Qt(e).abs().log(10).toNumber())+1,t}function PD(e,t,r){for(var n=new Qt(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var CD=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},OD=(e,t,r)=>{if(e.lte(0))return new Qt(0);var n=ED(e.toNumber()),i=new Qt(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new Qt(Math.ceil(a.div(s).toNumber())).add(r).mul(s),c=o.mul(i);return t?new Qt(c.toNumber()):new Qt(Math.ceil(c.toNumber()))},Pre=(e,t,r)=>{var n=new Qt(1),i=new Qt(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new Qt(10).pow(ED(e)-1),i=new Qt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Qt(Math.floor(e)))}else e===0?i=new Qt(Math.floor((t-1)/2)):r||(i=new Qt(Math.floor(e)));for(var s=Math.floor((t-1)/2),o=[],c=0;c<t;c++)o.push(i.add(new Qt(c-s).mul(n)).toNumber());return o},TD=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Qt(0),tickMin:new Qt(0),tickMax:new Qt(0)};var s=OD(new Qt(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new Qt(0):(o=new Qt(t).add(r).div(2),o=o.sub(new Qt(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),u=Math.ceil(new Qt(r).sub(o).div(s).toNumber()),d=c+u+1;return d>n?TD(t,r,n,i,a+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:s,tickMin:o.sub(new Qt(c).mul(s)),tickMax:o.add(new Qt(u).mul(s))})},Cre=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=CD([r,n]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return r>n?u.reverse():u}if(o===c)return Pre(o,i,a);var{step:d,tickMin:f,tickMax:p}=TD(o,c,s,a,0),h=PD(f,p.add(new Qt(.1).mul(d)),d);return r>n?h.reverse():h},Ore=function(t,r){var[n,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=CD([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var c=Math.max(r,2),u=OD(new Qt(o).sub(s).div(c-1),a,0),d=[...PD(new Qt(s),new Qt(o),u),o];return a===!1&&(d=d.map(f=>Math.round(f))),n>i?d.reverse():d},ID=e=>e.rootProps.maxBarSize,Tre=e=>e.rootProps.barGap,LD=e=>e.rootProps.barCategoryGap,Ire=e=>e.rootProps.barSize,zp=e=>e.rootProps.stackOffset,DD=e=>e.rootProps.reverseStackOrder,gj=e=>e.options.chartName,yj=e=>e.rootProps.syncId,RD=e=>e.rootProps.syncMethod,xj=e=>e.options.eventEmitter,ln={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},uc={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},hs={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},H0=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function V0(e,t,r){if(r!=="auto")return r;if(e!=null)return Co(e,t)?"category":"number"}function R3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R3(Object(r),!0).forEach(function(n){Lre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lre(e,t,r){return(t=Dre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dre(e){var t=Rre(e,"string");return typeof t=="symbol"?t:t+""}function Rre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M3={allowDataOverflow:uc.allowDataOverflow,allowDecimals:uc.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:uc.angleAxisId,includeHidden:!1,name:void 0,reversed:uc.reversed,scale:uc.scale,tick:uc.tick,tickCount:void 0,ticks:void 0,type:uc.type,unit:void 0},F3={allowDataOverflow:hs.allowDataOverflow,allowDecimals:hs.allowDecimals,allowDuplicatedCategory:hs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hs.radiusAxisId,includeHidden:hs.includeHidden,name:void 0,reversed:hs.reversed,scale:hs.scale,tick:hs.tick,tickCount:hs.tickCount,ticks:void 0,type:hs.type,unit:void 0},Mre=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},bj=ge([Mre,y8],(e,t)=>{var r;if(e!=null)return e;var n=(r=V0(t,"angleAxis",M3.type))!==null&&r!==void 0?r:"category";return wy(wy({},M3),{},{type:n})}),Fre=(e,t)=>e.polarAxis.radiusAxis[t],wj=ge([Fre,y8],(e,t)=>{var r;if(e!=null)return e;var n=(r=V0(t,"radiusAxis",F3.type))!==null&&r!==void 0?r:"category";return wy(wy({},F3),{},{type:n})}),K0=e=>e.polarOptions,_j=ge([Oo,To,wn],D8),MD=ge([K0,_j],(e,t)=>{if(e!=null)return si(e.innerRadius,t,0)}),FD=ge([K0,_j],(e,t)=>{if(e!=null)return si(e.outerRadius,t,t*.8)}),Bre=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},BD=ge([K0],Bre);ge([bj,BD],H0);var $D=ge([_j,MD,FD],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ge([wj,$D],H0);var UD=ge([Ht,K0,MD,FD,Oo,To],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=t;return{cx:si(s,i,i/2),cy:si(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Lr=(e,t)=>t,qp=(e,t,r)=>r;function jj(e){return e==null?void 0:e.id}function zD(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=jj(o);u.forEach((f,p)=>{var h=a==null||i?p:String(rr(f,a,null)),y=rr(f,o.dataKey,0),v;s.has(h)?v=s.get(h):v={},Object.assign(v,{[d]:y}),s.set(h,v)})}}),Array.from(s.values())}function G0(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Y0=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function J0(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function $re(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ln=e=>{var t=Ht(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},rf=e=>e.tooltip.settings.axisId;function Ure(e){if(e in fh)return fh[e]();var t="scale".concat(Pp(e));if(t in fh)return fh[t]()}function B3(e){var t=e.ticks,r=e.bandwidth,n=e.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s}(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:r?()=>r.call(e):void 0,ticks:t?a=>t.call(e,a):void 0,map:(a,s)=>{var o=e(a);if(o!=null){if(e.bandwidth&&s!==null&&s!==void 0&&s.position){var c=e.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function $3(e,t,r){if(typeof e=="function")return B3(e.copy().domain(t).range(r));if(e!=null){var n=Ure(e);if(n!=null)return n.domain(t).range(r),B3(n)}}var qD=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!No(t)){for(var r,n,i=0;i<t.length;i++){var a=t[i];Rt(a)&&((r===void 0||a<r)&&(r=a),(n===void 0||a>n)&&(n=a))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function U3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(r),!0).forEach(function(n){zre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zre(e,t,r){return(t=qre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qre(e){var t=Wre(e,"string");return typeof t=="symbol"?t:t+""}function Wre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $w=[0,"auto"],Nn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},WD=(e,t)=>e.cartesianAxis.xAxis[t],Do=(e,t)=>{var r=WD(e,t);return r??Nn},kn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:$w,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ip},HD=(e,t)=>e.cartesianAxis.yAxis[t],Ro=(e,t)=>{var r=HD(e,t);return r??kn},Hre={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Sj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Hre},Hr=(e,t,r)=>{switch(t){case"xAxis":return Do(e,r);case"yAxis":return Ro(e,r);case"zAxis":return Sj(e,r);case"angleAxis":return bj(e,r);case"radiusAxis":return wj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Vre=(e,t,r)=>{switch(t){case"xAxis":return Do(e,r);case"yAxis":return Ro(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},nf=(e,t,r)=>{switch(t){case"xAxis":return Do(e,r);case"yAxis":return Ro(e,r);case"angleAxis":return bj(e,r);case"radiusAxis":return wj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},VD=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Nj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var X0=e=>e.graphicalItems.cartesianItems,Kre=ge([Lr,qp],Nj),kj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Wp=ge([X0,Hr,Kre],kj,{memoizeOptions:{resultEqualityCheck:J0}}),KD=ge([Wp],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(G0)),GD=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Gre=ge([Wp],GD),Aj=e=>e.map(t=>t.data).filter(Boolean).flat(1),Yre=ge([Wp],Aj,{memoizeOptions:{resultEqualityCheck:J0}}),Ej=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},Pj=ge([Yre,pj],Ej),Cj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:rr(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:rr(i,n)}))):e.map(n=>({value:n})),Z0=ge([Pj,Hr,Wp],Cj);function YD(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Qv(e){if(Ps(e)||e instanceof Date){var t=Number(e);if(Rt(t))return t}}function z3(e){if(Array.isArray(e)){var t=[Qv(e[0]),Qv(e[1])];return No(t)?t:void 0}var r=Qv(e);if(r!=null)return[r,r]}function ko(e){return e.map(Qv).filter(ki)}function Jre(e,t,r){return!r||typeof t!="number"||Es(t)?[]:r.length?ko(r.flatMap(n=>{var i=rr(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Rt(a)||!Rt(s)))return[t-a,t+s]})):[]}var jn=e=>{var t=Ln(e),r=rf(e);return nf(e,t,r)},Hp=ge([jn],e=>e==null?void 0:e.dataKey),Xre=ge([KD,pj,jn],zD),JD=(e,t,r,n)=>{var i={},a=t.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=n?[...c].reverse():c,d=u.map(jj);return[o,{stackedData:NX(e,d,r),graphicalItems:u}]}))},Uw=ge([Xre,KD,zp,DD],JD),XD=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var s=CX(e,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Zre=ge([Hr],e=>e.allowDataOverflow),Oj=e=>{var t;if(e==null||!("domain"in e))return $w;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ko(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:$w},Tj=ge([Hr],Oj),Ij=ge([Tj,Zre],_D),Qre=ge([Uw,Lo,Lr,Ij],XD,{memoizeOptions:{resultEqualityCheck:Y0}}),Q0=e=>e.errorBars,ene=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>YD(r,n)),jy=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},Lj=(e,t,r,n,i)=>{var a,s;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(g=>YD(i,g)),p=rr(o,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),h=Jre(o,p,f);if(h.length>=2){var y=Math.min(...h),v=Math.max(...h);(a==null||y<a)&&(a=y),(s==null||v>s)&&(s=v)}var x=z3(p);x!=null&&(a=a==null?x[0]:Math.min(a,x[0]),s=s==null?x[1]:Math.max(s,x[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=z3(rr(o,t.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Rt(a)&&Rt(s))return[a,s]},tne=ge([Pj,Hr,Gre,Q0,Lr],Lj,{memoizeOptions:{resultEqualityCheck:Y0}});function rne(e){var{value:t}=e;if(Ps(t)||t instanceof Date)return t}var nne=(e,t,r)=>{var n=e.map(rne).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&GI(n))?z8(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},ZD=e=>e.referenceElements.dots,af=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),ine=ge([ZD,Lr,qp],af),QD=e=>e.referenceElements.areas,ane=ge([QD,Lr,qp],af),eR=e=>e.referenceElements.lines,sne=ge([eR,Lr,qp],af),tR=(e,t)=>{if(e!=null){var r=ko(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},one=ge(ine,Lr,tR),rR=(e,t)=>{if(e!=null){var r=ko(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},lne=ge([ane,Lr],rR);function cne(e){var t;if(e.x!=null)return ko([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ko(r)}function une(e){var t;if(e.y!=null)return ko([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ko(r)}var nR=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?cne(n):une(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},dne=ge([sne,Lr],nR),fne=ge(one,dne,lne,(e,t,r)=>jy(e,r,t)),Dj=(e,t,r,n,i,a,s,o)=>{if(r!=null)return r;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?jy(n,a,i):jy(a,i);return Nre(t,u,e.allowDataOverflow)},hne=ge([Hr,Tj,Ij,Qre,tne,fne,Ht,Lr],Dj,{memoizeOptions:{resultEqualityCheck:Y0}}),pne=[0,1],Rj=(e,t,r,n,i,a,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:c}=e,u=Co(t,a);if(u&&o==null){var d;return z8(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?nne(n,e,u):i==="expand"?pne:s}},Mj=ge([Hr,Ht,Pj,Z0,zp,Lr,hne],Rj);function mne(e){return e in fh}var iR=(e,t,r)=>{if(e!=null){var{scale:n,type:i}=e;if(n==="auto")return i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":i==="category"?"band":"linear";if(typeof n=="string"){var a="scale".concat(Pp(n));return mne(a)?a:"point"}}},Ul=ge([Hr,VD,gj],iR);function Fj(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?$3(e.scale,r,n):$3(t,r,n)}var Bj=(e,t,r)=>{var n=Oj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&No(e))return Cre(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&No(e))return Ore(e,t.tickCount,t.allowDecimals)}},$j=ge([Mj,nf,Ul],Bj),Uj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&No(t)&&Array.isArray(r)&&r.length>0){var i,a,s=t[0],o=(i=r[0])!==null&&i!==void 0?i:0,c=t[1],u=(a=r[r.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,u)]}return t},vne=ge([Hr,Mj,$j,Lr],Uj),gne=ge(Z0,Hr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ko(e.map(f=>f.value))).sort((f,p)=>f-p),i=n[0],a=n[n.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<n.length-1;o++){var c=n[o],u=n[o+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/s}}),aR=ge(gne,Ht,LD,wn,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!Rt(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=si(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),yne=(e,t,r)=>{var n=Do(e,t);return n==null||typeof n.padding!="string"?0:aR(e,"xAxis",t,r,n.padding)},xne=(e,t,r)=>{var n=Ro(e,t);return n==null||typeof n.padding!="string"?0:aR(e,"yAxis",t,r,n.padding)},bne=ge(Do,yne,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),wne=ge(Ro,xne,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),_ne=ge([wn,bne,T0,O0,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),jne=ge([wn,Ht,wne,T0,O0,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Vp=(e,t,r,n)=>{var i;switch(t){case"xAxis":return _ne(e,r,n);case"yAxis":return jne(e,r,n);case"zAxis":return(i=Sj(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return BD(e);case"radiusAxis":return $D(e,r);default:return}},sR=ge([Hr,Vp],H0),Sne=ge([Ul,vne],qD),ex=ge([Hr,Ul,Sne,sR],Fj);ge([Wp,Q0,Lr],ene);function oR(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var tx=(e,t)=>t,rx=(e,t,r)=>r,Nne=ge(P0,tx,rx,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(oR)),kne=ge(C0,tx,rx,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(oR)),lR=(e,t)=>({width:e.width,height:t.height}),Ane=(e,t)=>{var r=typeof t.width=="number"?t.width:Ip;return{width:r,height:e.height}},cR=ge(wn,Do,lR),Ene=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Pne=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Cne=ge(To,wn,Nne,tx,rx,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var c=lR(t,o);s==null&&(s=Ene(t,n,e));var u=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),One=ge(Oo,wn,kne,tx,rx,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var c=Ane(t,o);s==null&&(s=Pne(t,n,e));var u=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),Tne=(e,t)=>{var r=Do(e,t);if(r!=null)return Cne(e,r.orientation,r.mirror)},Ine=ge([wn,Do,Tne,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Lne=(e,t)=>{var r=Ro(e,t);if(r!=null)return One(e,r.orientation,r.mirror)},Dne=ge([wn,Ro,Lne,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),uR=ge(wn,Ro,(e,t)=>{var r=typeof t.width=="number"?t.width:Ip;return{width:r,height:e.height}}),q3=(e,t,r)=>{switch(t){case"xAxis":return cR(e,r).width;case"yAxis":return uR(e,r).height;default:return}},dR=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=Co(e,n),c=t.map(u=>u.value);if(s&&o&&a==="category"&&i&&GI(c))return c}},zj=ge([Ht,Z0,Hr,Lr],dR),fR=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=Co(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},qj=ge([Ht,Z0,nf,Lr],fR),W3=ge([Ht,Vre,Ul,ex,zj,qj,Vp,$j,Lr],(e,t,r,n,i,a,s,o,c)=>{if(t!=null){var u=Co(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),Rne=(e,t,r,n,i,a,s,o,c)=>{if(!(t==null||n==null)){var u=Co(e,c),{type:d,ticks:f,tickCount:p}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=d==="category"&&n.bandwidth?n.bandwidth()/h:0;y=c==="angleAxis"&&a!=null&&a.length>=2?Cn(a[0]-a[1])*2*y:y;var v=f||i;return v?v.map((x,g)=>{var _=s?s.indexOf(x):x,S=n.map(_);return Rt(S)?{index:g,coordinate:S+y,value:x,offset:y}:null}).filter(ki):u&&o?o.map((x,g)=>{var _=n.map(x);return Rt(_)?{coordinate:_+y,value:x,index:g,offset:y}:null}).filter(ki):n.ticks?n.ticks(p).map((x,g)=>{var _=n.map(x);return Rt(_)?{coordinate:_+y,value:x,index:g,offset:y}:null}).filter(ki):n.domain().map((x,g)=>{var _=n.map(x);return Rt(_)?{coordinate:_+y,value:s?s[x]:x,index:g,offset:y}:null}).filter(ki)}},hR=ge([Ht,nf,Ul,ex,$j,Vp,zj,qj,Lr],Rne),Mne=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Co(e,s),{tickCount:c}=t,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?Cn(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>{var p=r.map(d);return Rt(p)?{coordinate:p+u,value:d,index:f,offset:u}:null}).filter(ki):r.ticks?r.ticks(c).map((d,f)=>{var p=r.map(d);return Rt(p)?{coordinate:p+u,value:d,index:f,offset:u}:null}).filter(ki):r.domain().map((d,f)=>{var p=r.map(d);return Rt(p)?{coordinate:p+u,value:i?i[d]:d,index:f,offset:u}:null}).filter(ki)}},Ol=ge([Ht,nf,ex,Vp,zj,qj,Lr],Mne),Tl=ge(Hr,ex,(e,t)=>{if(!(e==null||t==null))return _y(_y({},e),{},{scale:t})}),Fne=ge([Hr,Ul,Mj,sR],Fj);ge((e,t,r)=>Sj(e,r),Fne,(e,t)=>{if(!(e==null||t==null))return _y(_y({},e),{},{scale:t})});var Bne=ge([Ht,P0,C0],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),pR=e=>e.options.defaultTooltipEventType,mR=e=>e.options.validateTooltipEventTypes;function vR(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Wj(e,t){var r=pR(e),n=mR(e);return vR(t,r,n)}function $ne(e){return Ve(t=>Wj(t,e))}var gR=(e,t)=>{var r,n=Number(t);if(!(Es(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Une=e=>e.tooltip.settings,dl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},zne={itemInteraction:{click:dl,hover:dl},axisInteraction:{click:dl,hover:dl},keyboardInteraction:dl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},yR=Ti({name:"tooltip",initialState:zne,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Sr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ka(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Sr()},removeTooltipEntrySettings:{reducer(e,t){var r=Ka(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Sr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:qne,replaceTooltipEntrySettings:Wne,removeTooltipEntrySettings:Hne,setTooltipSettingsState:Vne,setActiveMouseOverItemIndex:xR,mouseLeaveItem:Kne,mouseLeaveChart:bR,setActiveClickItemIndex:Gne,setMouseOverAxisIndex:wR,setMouseClickAxisIndex:Yne,setSyncInteraction:zw,setKeyboardInteraction:qw}=yR.actions,Jne=yR.reducer;function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ev(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){Xne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xne(e,t,r){return(t=Zne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zne(e){var t=Qne(e,"string");return typeof t=="symbol"?t:t+""}function Qne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eie(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function tie(e){return e.index!=null}var _R=(e,t,r,n)=>{if(t==null)return dl;var i=eie(e,t,r);if(i==null)return dl;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(tie(i)){if(a)return Ev(Ev({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Ev(Ev({},dl),{},{coordinate:i.coordinate})};function rie(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function nie(e,t){var r=rie(e),n=t[0],i=t[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function iie(e,t,r){if(r==null||t==null)return!0;var n=rr(e,t);return n==null||!No(r)?!0:nie(n,r)}var Hj=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!Rt(a))return i;var s=0,o=1/0;t.length>0&&(o=t.length-1);var c=Math.max(s,Math.min(a,o)),u=t[c];return u==null||iie(u,r,n)?String(c):null},jR=(e,t,r,n,i,a,s)=>{if(a!=null){var o=s[0],c=o==null?void 0:o.getPosition(a);if(c!=null)return c;var u=i==null?void 0:i[Number(a)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},SR=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var a=e.tooltipItemPayloads[0];return a!=null?[a]:[]}return e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},NR=e=>e.options.tooltipPayloadSearcher,sf=e=>e.tooltip;function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function K3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){aie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aie(e,t,r){return(t=sie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sie(e){var t=oie(e,"string");return typeof t=="symbol"?t:t+""}function oie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lie(e,t){return e??t}var kR=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((p,h)=>{var y,{dataDefinedOnItem:v,settings:x}=h,g=lie(v,o),_=Array.isArray(g)?i8(g,u,d):g,S=(y=x==null?void 0:x.dataKey)!==null&&y!==void 0?y:n,j=x==null?void 0:x.nameKey,A;if(n&&Array.isArray(_)&&!Array.isArray(_[0])&&s==="axis"?A=YI(_,n,i):A=a(_,t,c,j),Array.isArray(A))A.forEach(D=>{var E=K3(K3({},x),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});p.push(Q4({tooltipEntrySettings:E,dataKey:D.dataKey,payload:D.payload,value:rr(D.payload,D.dataKey),name:D.name}))});else{var N;p.push(Q4({tooltipEntrySettings:x,dataKey:S,payload:A,value:rr(A,S),name:(N=rr(A,j))!==null&&N!==void 0?N:x==null?void 0:x.name}))}return p},f)}},Vj=ge([jn,VD,gj],iR),cie=ge([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),uie=ge([Ln,rf],Nj),of=ge([cie,jn,uie],kj,{memoizeOptions:{resultEqualityCheck:J0}}),die=ge([of],e=>e.filter(G0)),fie=ge([of],Aj,{memoizeOptions:{resultEqualityCheck:J0}}),lf=ge([fie,Lo],Ej),hie=ge([die,Lo,jn],zD),Kj=ge([lf,jn,of],Cj),AR=ge([jn],Oj),pie=ge([jn],e=>e.allowDataOverflow),ER=ge([AR,pie],_D),mie=ge([of],e=>e.filter(G0)),vie=ge([hie,mie,zp,DD],JD),gie=ge([vie,Lo,Ln,ER],XD),yie=ge([of],GD),xie=ge([lf,jn,yie,Q0,Ln],Lj,{memoizeOptions:{resultEqualityCheck:Y0}}),bie=ge([ZD,Ln,rf],af),wie=ge([bie,Ln],tR),_ie=ge([QD,Ln,rf],af),jie=ge([_ie,Ln],rR),Sie=ge([eR,Ln,rf],af),Nie=ge([Sie,Ln],nR),kie=ge([wie,Nie,jie],jy),Aie=ge([jn,AR,ER,gie,xie,kie,Ht,Ln],Dj),Kp=ge([jn,Ht,lf,Kj,zp,Ln,Aie],Rj),Eie=ge([Kp,jn,Vj],Bj),Pie=ge([jn,Kp,Eie,Ln],Uj),PR=e=>{var t=Ln(e),r=rf(e),n=!1;return Vp(e,t,r,n)},CR=ge([jn,PR],H0),OR=ge([jn,Vj,Pie,CR],Fj),Cie=ge([Ht,Kj,jn,Ln],dR),Oie=ge([Ht,Kj,jn,Ln],fR),Tie=(e,t,r,n,i,a,s,o)=>{if(t){var{type:c}=t,u=Co(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Cn(i[0]-i[1])*2*f:f,u&&s?s.map((p,h)=>{var y=n.map(p);return Rt(y)?{coordinate:y+f,value:p,index:h,offset:f}:null}).filter(ki):n.domain().map((p,h)=>{var y=n.map(p);return Rt(y)?{coordinate:y+f,value:a?a[p]:p,index:h,offset:f}:null}).filter(ki)}}},Mo=ge([Ht,jn,Vj,OR,PR,Cie,Oie,Ln],Tie),Gj=ge([pR,mR,Une],(e,t,r)=>vR(r.shared,e,t)),TR=e=>e.tooltip.settings.trigger,Yj=e=>e.tooltip.settings.defaultIndex,Gp=ge([sf,Gj,TR,Yj],_R),Il=ge([Gp,lf,Hp,Kp],Hj),IR=ge([Mo,Il],gR),Jj=ge([Gp],e=>{if(e)return e.dataKey}),Iie=ge([Gp],e=>{if(e)return e.graphicalItemId}),LR=ge([sf,Gj,TR,Yj],SR),Lie=ge([Oo,To,Ht,wn,Mo,Yj,LR],jR),Die=ge([Gp,Lie],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Rie=ge([Gp],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),Mie=ge([LR,Il,Lo,Hp,IR,NR,Gj],kR),Fie=ge([Mie],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Y3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(n){Bie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bie(e,t,r){return(t=$ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ie(e){var t=Uie(e,"string");return typeof t=="symbol"?t:t+""}function Uie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zie=()=>Ve(jn),qie=()=>{var e=zie(),t=Ve(Mo),r=Ve(OR);return Rd(!e||!r?void 0:Y3(Y3({},e),{},{scale:r}),t)};function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){Wie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wie(e,t,r){return(t=Hie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hie(e){var t=Vie(e,"string");return typeof t=="symbol"?t:t+""}function Vie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kie=(e,t,r,n)=>{var i=t.find(a=>a&&a.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},Gie=(e,t,r,n)=>{var i=t.find(u=>u&&u.index===r);if(i){if(e==="centric"){var a=i.coordinate,{radius:s}=n;return zu(zu(zu({},n),on(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=n;return zu(zu(zu({},n),on(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Yie(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var DR=(e,t,r,n,i)=>{var a,s=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(s<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,d,f,p,h=o>0?(c=r[o-1])===null||c===void 0?void 0:c.coordinate:(u=r[s-1])===null||u===void 0?void 0:u.coordinate,y=(d=r[o])===null||d===void 0?void 0:d.coordinate,v=o>=s-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(p=r[o+1])===null||p===void 0?void 0:p.coordinate,x=void 0;if(!(h==null||y==null||v==null))if(Cn(y-h)!==Cn(v-y)){var g=[];if(Cn(v-y)===Cn(i[1]-i[0])){x=v;var _=y+i[1]-i[0];g[0]=Math.min(_,(_+h)/2),g[1]=Math.max(_,(_+h)/2)}else{x=h;var S=v+i[1]-i[0];g[0]=Math.min(y,(S+y)/2),g[1]=Math.max(y,(S+y)/2)}var j=[Math.min(y,(x+y)/2),Math.max(y,(x+y)/2)];if(e>j[0]&&e<=j[1]||e>=g[0]&&e<=g[1]){var A;return(A=r[o])===null||A===void 0?void 0:A.index}}else{var N=Math.min(h,v),D=Math.max(h,v);if(e>(N+y)/2&&e<=(D+y)/2){var E;return(E=r[o])===null||E===void 0?void 0:E.index}}}else if(t)for(var C=0;C<s;C++){var L=t[C];if(L!=null){var I=t[C+1],O=t[C-1];if(C===0&&I!=null&&e<=(L.coordinate+I.coordinate)/2||C===s-1&&O!=null&&e>(L.coordinate+O.coordinate)/2||C>0&&C<s-1&&O!=null&&I!=null&&e>(L.coordinate+O.coordinate)/2&&e<=(L.coordinate+I.coordinate)/2)return L.index}}return-1},Jie=()=>Ve(gj),Xj=(e,t)=>t,RR=(e,t,r)=>r,Zj=(e,t,r,n)=>n,Xie=ge(Mo,e=>x0(e,t=>t.coordinate)),Qj=ge([sf,Xj,RR,Zj],_R),eS=ge([Qj,lf,Hp,Kp],Hj),Zie=(e,t,r)=>{if(t!=null){var n=sf(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},MR=ge([sf,Xj,RR,Zj],SR),Sy=ge([Oo,To,Ht,wn,Mo,Zj,MR],jR),Qie=ge([Qj,Sy],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),FR=ge([Mo,eS],gR),eae=ge([MR,eS,Lo,Hp,FR,NR,Xj],kR),tae=ge([Qj,eS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),rae=(e,t,r,n,i,a,s)=>{if(!(!e||!r||!n||!i)&&Yie(e,s)){var o=OX(e,t),c=DR(o,a,i,r,n),u=Kie(t,i,c,e);return{activeIndex:String(c),activeCoordinate:u}}},nae=(e,t,r,n,i,a,s)=>{if(!(!e||!n||!i||!a||!r)){var o=WQ(e,r);if(o){var c=TX(o,t),u=DR(c,s,a,n,i),d=Gie(t,a,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},iae=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a))return t==="horizontal"||t==="vertical"?rae(e,t,n,i,a,s,o):nae(e,t,r,n,i,a,s)},aae=ge(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),sae=ge(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ln)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:$re}});function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Z3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(n){oae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oae(e,t,r){return(t=lae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lae(e){var t=cae(e,"string");return typeof t=="symbol"?t:t+""}function cae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uae={},dae={zIndexMap:Object.values(ln).reduce((e,t)=>Z3(Z3({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),uae)},fae=new Set(Object.values(ln));function hae(e){return fae.has(e)}var BR=Ti({name:"zIndex",initialState:dae,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Sr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!hae(r)&&delete e.zIndexMap[r])},prepare:Sr()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Sr()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Sr()}}}),{registerZIndexPortal:pae,unregisterZIndexPortal:mae,registerZIndexPortalElement:vae,unregisterZIndexPortalElement:gae}=BR.actions,yae=BR.reducer;function Ii(e){var{zIndex:t,children:r}=e,n=aZ(),i=n&&t!==void 0&&t!==0,a=li(),s=mr();b.useLayoutEffect(()=>i?(s(pae({zIndex:t})),()=>{s(mae({zIndex:t}))}):du,[s,t,i]);var o=Ve(c=>aae(c,t,a));return i?o?Xy.createPortal(r,o):null:r}function Ww(){return Ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ww.apply(null,arguments)}function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(n){xae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xae(e,t,r){return(t=bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bae(e){var t=wae(e,"string");return typeof t=="symbol"?t:t+""}function wae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ae(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return b.isValidElement(t)?b.cloneElement(t,n):b.createElement(r,n)}function jae(e){var t,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:d}=e,f=r,p=n,h=i;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var y,v,x;if(d==="ScatterChart")y=f,v=iQ,x=ln.cursorLine;else if(d==="BarChart")y=aQ(o,f,a,s),v=L8,x=ln.cursorRectangle;else if(o==="radial"&&XI(f)){var{cx:g,cy:_,radius:S,startAngle:j,endAngle:A}=R8(f);y={cx:g,cy:_,startAngle:j,endAngle:A,innerRadius:S,outerRadius:S},v=F8,x=ln.cursorLine}else y={points:GQ(o,f,a)},v=W5,x=ln.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,D=Pv(Pv(Pv(Pv({stroke:"#ccc",pointerEvents:"none"},a),y),qc(c)),{},{payload:p,payloadIndex:h,className:Ut("recharts-tooltip-cursor",N)});return b.createElement(Ii,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:x},b.createElement(_ae,{cursor:c,cursorComp:v,cursorProps:D}))}function Sae(e){var t=qie(),r=v8(),n=fu(),i=Jie();return t==null||r==null||n==null||i==null?null:b.createElement(jae,Ww({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var $R=b.createContext(null),Nae=()=>b.useContext($R),UR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||c,p),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],h]:c._events[y].push(h):(c._events[y]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,y=new Array(h);p<h;p++)y[p]=f[p].fn;return y},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,y){var v=r?r+u:u;if(!this._events[v])return!1;var x=this._events[v],g=arguments.length,_,S;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),g){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,h),!0;case 6:return x.fn.call(x.context,d,f,p,h,y),!0}for(S=1,_=new Array(g-1);S<g;S++)_[S-1]=arguments[S];x.fn.apply(x.context,_)}else{var j=x.length,A;for(S=0;S<j;S++)switch(x[S].once&&this.removeListener(u,x[S].fn,void 0,!0),g){case 1:x[S].fn.call(x[S].context);break;case 2:x[S].fn.call(x[S].context,d);break;case 3:x[S].fn.call(x[S].context,d,f);break;case 4:x[S].fn.call(x[S].context,d,f,p);break;default:if(!_)for(A=1,_=new Array(g-1);A<g;A++)_[A-1]=arguments[A];x[S].fn.apply(x[S].context,_)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var y=this._events[h];if(y.fn)y.fn===d&&(!p||y.once)&&(!f||y.context===f)&&s(this,h);else{for(var v=0,x=[],g=y.length;v<g;v++)(y[v].fn!==d||p&&!y[v].once||f&&y[v].context!==f)&&x.push(y[v]);x.length?this._events[h]=x.length===1?x[0]:x:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(UR);var kae=UR.exports;const Aae=Ts(kae);var vp=new Aae,Hw="recharts.syncEvent.tooltip",eP="recharts.syncEvent.brush",tS=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!Es(r))return e[r]}},Eae={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},zR=Ti({name:"options",initialState:Eae,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Pae=zR.reducer,{createEventEmitter:Cae}=zR.actions;function Oae(e){return e.tooltip.syncInteraction}var Tae={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},qR=Ti({name:"chartData",initialState:Tae,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:tP,setDataStartEndIndexes:Iae,setComputedData:Upe}=qR.actions,Lae=qR.reducer,Dae=["x","y"];function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(r),!0).forEach(function(n){Rae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rae(e,t,r){return(t=Mae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mae(e){var t=Fae(e,"string");return typeof t=="symbol"?t:t+""}function Fae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bae(e,t){if(e==null)return{};var r,n,i=$ae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $ae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uae(){var e=Ve(yj),t=Ve(xj),r=mr(),n=Ve(RD),i=Ve(Mo),a=fu(),s=I0(),o=Ve(c=>c.rootProps.className);b.useEffect(()=>{if(e==null)return du;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var p;if(s&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:y,y:v}=h,x=Bae(h,Dae),{x:g,y:_,width:S,height:j}=d.payload.sourceViewBox,A=qu(qu({},x),{},{x:s.x+(S?(y-g)/S:0)*s.width,y:s.y+(j?(v-_)/j:0)*s.height});r(qu(qu({},d),{},{payload:qu(qu({},d.payload),{},{coordinate:A})}))}else r(d);return}if(i!=null){var N;if(typeof n=="function"){var D={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(i,D);N=i[E]}else n==="value"&&(N=i.find(ne=>String(ne.value)===d.payload.label));var{coordinate:C}=d.payload;if(N==null||d.payload.active===!1||C==null||s==null){r(zw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:I}=C,O=Math.min(L,s.x+s.width),U=Math.min(I,s.y+s.height),V={x:a==="horizontal"?N.coordinate:O,y:a==="horizontal"?U:N.coordinate},ie=zw({active:d.payload.active,coordinate:V,dataKey:d.payload.dataKey,index:String(N.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(ie)}}};return vp.on(Hw,c),()=>{vp.off(Hw,c)}},[o,r,t,e,n,i,a,s])}function zae(){var e=Ve(yj),t=Ve(xj),r=mr();b.useEffect(()=>{if(e==null)return du;var n=(i,a,s)=>{t!==s&&e===i&&r(Iae(a))};return vp.on(eP,n),()=>{vp.off(eP,n)}},[r,t,e])}function qae(){var e=mr();b.useEffect(()=>{e(Cae())},[e]),Uae(),zae()}function Wae(e,t,r,n,i,a){var s=Ve(h=>Zie(h,e,t)),o=Ve(xj),c=Ve(yj),u=Ve(RD),d=Ve(Oae),f=d==null?void 0:d.active,p=I0();b.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=zw({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});vp.emit(Hw,c,h,o)}},[f,r,s,i,n,o,c,u,a,p])}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(n){Hae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hae(e,t,r){return(t=Vae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=Kae(e,"string");return typeof t=="symbol"?t:t+""}function Kae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gae(e){return e.dataKey}function Yae(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(MZ,t)}var aP=[],Jae={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zc(e){var t,r,n=un(e,Jae),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:p,position:h,reverseDirection:y,useTranslate3d:v,wrapperStyle:x,cursor:g,shared:_,trigger:S,defaultIndex:j,portal:A,axisId:N}=n,D=mr(),E=typeof j=="number"?String(j):j;b.useEffect(()=>{D(Vne({shared:_,trigger:S,axisId:N,active:i,defaultIndex:E}))},[D,_,S,N,i,E]);var C=I0(),L=P8(),I=$ne(_),{activeIndex:O,isActive:U}=(t=Ve(ce=>tae(ce,I,S,E)))!==null&&t!==void 0?t:{},V=Ve(ce=>eae(ce,I,S,E)),ie=Ve(ce=>FR(ce,I,S,E)),ne=Ve(ce=>Qie(ce,I,S,E)),ee=V,q=Nae(),Y=(r=i??U)!==null&&r!==void 0?r:!1,[fe,te]=EL([ee,Y]),R=I==="axis"?ie:void 0;Wae(I,S,ne,R,O,Y);var z=A??q;if(z==null||C==null||I==null)return null;var G=ee??aP;Y||(G=aP),u&&G.length&&(G=vL(G.filter(ce=>ce.value!=null&&(ce.hide!==!0||n.includeHidden)),p,Gae));var re=G.length>0,ae=b.createElement(WZ,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:Y,coordinate:ne,hasPayload:re,offset:f,position:h,reverseDirection:y,useTranslate3d:v,viewBox:C,wrapperStyle:x,lastBoundingBox:fe,innerRef:te,hasPortalFromProps:!!A},Yae(c,iP(iP({},n),{},{payload:G,label:R,active:Y,activeIndex:O,coordinate:ne,accessibilityLayer:L})));return b.createElement(b.Fragment,null,Xy.createPortal(ae,z),Y&&b.createElement(Sae,{cursor:g,tooltipEventType:I,coordinate:ne,payload:G,index:O}))}var Yp=e=>null;Yp.displayName="Cell";function Xae(e,t,r){return(t=Zae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zae(e){var t=Qae(e,"string");return typeof t=="symbol"?t:t+""}function Qae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ese{constructor(t){Xae(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tse(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){rse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rse(e,t,r){return(t=nse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nse(e){var t=ise(e,"string");return typeof t=="symbol"?t:t+""}function ise(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ase={cacheSize:2e3,enableCache:!0},WR=tse({},ase),oP=new ese(WR.cacheSize),sse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lP="recharts_measurement_span";function ose(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var cP=(e,t)=>{try{var r=document.getElementById(lP);r||(r=document.createElement("span"),r.setAttribute("id",lP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,sse,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Eh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||M0.isSsr)return{width:0,height:0};if(!WR.enableCache)return cP(t,r);var n=ose(t,r),i=oP.get(n);if(i)return i;var a=cP(t,r);return oP.set(n,a),a},HR;function lse(e,t,r){return(t=cse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cse(e){var t=use(e,"string");return typeof t=="symbol"?t:t+""}function use(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hse={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pse=["cm","mm","pt","pc","in","Q","px"];function mse(e){return pse.includes(e)}var dd="NaN";function vse(e,t){return e*hse[t]}class Hn{static parse(t){var r,[,n,i]=(r=fse.exec(t))!==null&&r!==void 0?r:[];return n==null?Hn.NaN:new Hn(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Es(t)&&(this.unit=""),r!==""&&!dse.test(r)&&(this.num=NaN,this.unit=""),mse(r)&&(this.num=vse(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Hn(NaN,""):new Hn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Hn(NaN,""):new Hn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hn(NaN,""):new Hn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hn(NaN,""):new Hn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Es(this.num)}}HR=Hn;lse(Hn,"NaN",new HR(NaN,""));function VR(e){if(e==null||e.includes(dd))return dd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=uP.exec(t))!==null&&r!==void 0?r:[],s=Hn.parse(n??""),o=Hn.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return dd;t=t.replace(uP,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,p]=(u=dP.exec(t))!==null&&u!==void 0?u:[],h=Hn.parse(d??""),y=Hn.parse(p??""),v=f==="+"?h.add(y):h.subtract(y);if(v.isNaN())return dd;t=t.replace(dP,v.toString())}return t}var fP=/\(([^()]*)\)/;function gse(e){for(var t=e,r;(r=fP.exec(t))!=null;){var[,n]=r;t=t.replace(fP,VR(n))}return t}function yse(e){var t=e.replace(/\s+/g,"");return t=gse(t),t=VR(t),t}function xse(e){try{return yse(e)}catch{return dd}}function _b(e){var t=xse(e.slice(5,-1));return t===dd?"":t}var bse=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],wse=["dx","dy","angle","className","breakAll"];function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vw.apply(null,arguments)}function hP(e,t){if(e==null)return{};var r,n,i=_se(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _se(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KR=/[ \f\n\r\t\v\u2028\u2029]+/,GR=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Ir(t)||(r?i=t.toString().split(""):i=t.toString().split(KR));var a=i.map(o=>({word:o,width:Eh(o,n).width})),s=r?0:Eh("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function jse(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var YR=(e,t,r,n)=>e.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(t==null||n||c.width+o+r<Number(t)))c.words.push(s),c.width+=o+r;else{var u={words:[s],width:o};i.push(u)}return i},[]),JR=e=>e.reduce((t,r)=>t.width>r.width?t:r),Sse="",pP=(e,t,r,n,i,a,s,o)=>{var c=e.slice(0,t),u=GR({breakAll:r,style:n,children:c+Sse});if(!u)return[!1,[]];var d=YR(u.wordsWithComputedWidth,a,s,o),f=d.length>i||JR(d).width>Number(a);return[f,d]},Nse=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=e,u=$e(a),d=String(s),f=YR(t,n,r,i);if(!u||i)return f;var p=f.length>a||JR(f).width>Number(n);if(!p)return f;for(var h=0,y=d.length-1,v=0,x;h<=y&&v<=d.length-1;){var g=Math.floor((h+y)/2),_=g-1,[S,j]=pP(d,_,c,o,a,n,r,i),[A]=pP(d,g,c,o,a,n,r,i);if(!S&&!A&&(h=g+1),S&&A&&(y=g-1),!S&&A){x=j;break}v++}return x||f},mP=e=>{var t=Ir(e)?[]:e.toString().split(KR);return[{words:t,width:void 0}]},kse=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!M0.isSsr){var o,c,u=GR({breakAll:a,children:n,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return mP(n);return Nse({breakAll:a,children:n,maxLines:s,style:i},o,c,t,!!r)}return mP(n)},XR="#808080",Ase={angle:0,breakAll:!1,capHeight:"0.71em",fill:XR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},nx=b.forwardRef((e,t)=>{var r=un(e,Ase),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=hP(r,bse),p=b.useMemo(()=>kse({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:y,angle:v,className:x,breakAll:g}=f,_=hP(f,wse);if(!Ps(n)||!Ps(i)||p.length===0)return null;var S=Number(n)+($e(h)?h:0),j=Number(i)+($e(y)?y:0);if(!Rt(S)||!Rt(j))return null;var A;switch(d){case"start":A=_b("calc(".concat(s,")"));break;case"middle":A=_b("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:A=_b("calc(".concat(p.length-1," * -").concat(a,")"));break}var N=[],D=p[0];if(c&&D!=null){var E=D.width,{width:C}=f;N.push("scale(".concat($e(C)&&$e(E)?C/E:1,")"))}return v&&N.push("rotate(".concat(v,", ").concat(S,", ").concat(j,")")),N.length&&(_.transform=N.join(" ")),b.createElement("text",Vw({},gi(_),{ref:t,x:S,y:j,className:Ut("recharts-text",x),textAnchor:u,fill:o.includes("url")?XR:o}),p.map((L,I)=>{var O=L.words.join(g?"":" ");return b.createElement("tspan",{x:S,dy:I===0?A:a,key:"".concat(O,"-").concat(I)},O)}))});nx.displayName="Text";function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){Ese(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ese(e,t,r){return(t=Pse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pse(e){var t=Cse(e,"string");return typeof t=="symbol"?t:t+""}function Cse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ose=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:i}=e,{x:a,y:s,height:o,upperWidth:c,lowerWidth:u}=B5(t),d=a,f=a+(c-u)/2,p=(d+f)/2,h=(c+u)/2,y=d+c/2,v=o>=0?1:-1,x=v*n,g=v>0?"end":"start",_=v>0?"start":"end",S=c>=0?1:-1,j=S*n,A=S>0?"end":"start",N=S>0?"start":"end",D=i;if(r==="top"){var E={x:d+c/2,y:s-x,horizontalAnchor:"middle",verticalAnchor:g};return D&&(E.height=Math.max(s-D.y,0),E.width=c),E}if(r==="bottom"){var C={x:f+u/2,y:s+o+x,horizontalAnchor:"middle",verticalAnchor:_};return D&&(C.height=Math.max(D.y+D.height-(s+o),0),C.width=u),C}if(r==="left"){var L={x:p-j,y:s+o/2,horizontalAnchor:A,verticalAnchor:"middle"};return D&&(L.width=Math.max(L.x-D.x,0),L.height=o),L}if(r==="right"){var I={x:p+h+j,y:s+o/2,horizontalAnchor:N,verticalAnchor:"middle"};return D&&(I.width=Math.max(D.x+D.width-I.x,0),I.height=o),I}var O=D?{width:h,height:o}:{};return r==="insideLeft"?ps({x:p+j,y:s+o/2,horizontalAnchor:N,verticalAnchor:"middle"},O):r==="insideRight"?ps({x:p+h-j,y:s+o/2,horizontalAnchor:A,verticalAnchor:"middle"},O):r==="insideTop"?ps({x:d+c/2,y:s+x,horizontalAnchor:"middle",verticalAnchor:_},O):r==="insideBottom"?ps({x:f+u/2,y:s+o-x,horizontalAnchor:"middle",verticalAnchor:g},O):r==="insideTopLeft"?ps({x:d+j,y:s+x,horizontalAnchor:N,verticalAnchor:_},O):r==="insideTopRight"?ps({x:d+c-j,y:s+x,horizontalAnchor:A,verticalAnchor:_},O):r==="insideBottomLeft"?ps({x:f+j,y:s+o-x,horizontalAnchor:N,verticalAnchor:g},O):r==="insideBottomRight"?ps({x:f+u-j,y:s+o-x,horizontalAnchor:A,verticalAnchor:g},O):r&&typeof r=="object"&&($e(r.x)||Vc(r.x))&&($e(r.y)||Vc(r.y))?ps({x:a+si(r.x,h),y:s+si(r.y,o),horizontalAnchor:"end",verticalAnchor:"end"},O):ps({x:y,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},O)},Tse=["labelRef"],Ise=["content"];function gP(e,t){if(e==null)return{};var r,n,i=Lse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Lse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(n){Dse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dse(e,t,r){return(t=Rse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rse(e){var t=Mse(e,"string");return typeof t=="symbol"?t:t+""}function Mse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},so.apply(null,arguments)}var ZR=b.createContext(null),Fse=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=e,c=b.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[t,r,n,i,a,s]);return b.createElement(ZR.Provider,{value:c},o)},QR=()=>{var e=b.useContext(ZR),t=I0();return e||(t?B5(t):void 0)},Bse=b.createContext(null),$se=()=>{var e=b.useContext(Bse),t=Ve(UD);return e||t},Use=e=>{var{value:t,formatter:r}=e,n=Ir(e.children)?t:e.children;return typeof r=="function"?r(n):n},rS=e=>e!=null&&typeof e=="function",zse=(e,t)=>{var r=Cn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},qse=(e,t,r,n,i)=>{var{offset:a,className:s}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:p,clockWise:h}=i,y=(u+d)/2,v=zse(f,p),x=v>=0?1:-1,g,_;switch(t){case"insideStart":g=f+x*a,_=h;break;case"insideEnd":g=p-x*a,_=!h;break;case"end":g=p+x*a,_=h;break;default:throw new Error("Unsupported position ".concat(t))}_=v<=0?_:!_;var S=on(o,c,y,g),j=on(o,c,y,g+(_?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),N=Ir(e.id)?np("recharts-radial-line-"):e.id;return b.createElement("text",so({},n,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",s)}),b.createElement("defs",null,b.createElement("path",{id:N,d:A})),b.createElement("textPath",{xlinkHref:"#".concat(N)},r))},Wse=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=on(n,i,s+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:h,y}=on(n,i,p,u);return{x:h,y,textAnchor:"middle",verticalAnchor:"middle"}},eg=e=>e!=null&&"cx"in e&&$e(e.cx),Hse={angle:0,offset:5,zIndex:ln.label,position:"middle",textBreakAll:!1};function Vse(e){if(!eg(e))return e;var{cx:t,cy:r,outerRadius:n}=e,i=n*2;return{x:t-n,y:r-n,width:i,upperWidth:i,lowerWidth:i,height:i}}function ol(e){var t=un(e,Hse),{viewBox:r,parentViewBox:n,position:i,value:a,children:s,content:o,className:c="",textBreakAll:u,labelRef:d}=t,f=$se(),p=QR(),h=i==="center"?p:f??p,y,v,x;r==null?y=h:eg(r)?y=r:y=B5(r);var g=Vse(y);if(!y||Ir(a)&&Ir(s)&&!b.isValidElement(o)&&typeof o!="function")return null;var _=hh(hh({},t),{},{viewBox:y});if(b.isValidElement(o)){var{labelRef:S}=_,j=gP(_,Tse);return b.cloneElement(o,j)}if(typeof o=="function"){var{content:A}=_,N=gP(_,Ise);if(v=b.createElement(o,N),b.isValidElement(v))return v}else v=Use(t);var D=gi(t);if(eg(y)){if(i==="insideStart"||i==="insideEnd"||i==="end")return qse(t,i,v,D,y);x=Wse(y,t.offset,t.position)}else{if(!g)return null;var E=Ose({viewBox:g,position:i,offset:t.offset,parentViewBox:eg(n)?void 0:n});x=hh(hh({x:E.x,y:E.y,textAnchor:E.horizontalAnchor,verticalAnchor:E.verticalAnchor},E.width!==void 0?{width:E.width}:{}),E.height!==void 0?{height:E.height}:{})}return b.createElement(Ii,{zIndex:t.zIndex},b.createElement(nx,so({ref:d,className:Ut("recharts-label",c)},D,x,{textAnchor:jse(D.textAnchor)?D.textAnchor:x.textAnchor,breakAll:u}),v))}ol.displayName="Label";var Kse=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?b.createElement(ol,so({key:"label-implicit"},n)):Ps(e)?b.createElement(ol,so({key:"label-implicit",value:e},n)):b.isValidElement(e)?e.type===ol?b.cloneElement(e,hh({key:"label-implicit"},n)):b.createElement(ol,so({key:"label-implicit",content:e},n)):rS(e)?b.createElement(ol,so({key:"label-implicit",content:e},n)):e&&typeof e=="object"?b.createElement(ol,so({},e,{key:"label-implicit"},n)):null};function Gse(e){var{label:t,labelRef:r}=e,n=QR();return Kse(t,n,r)||null}var e7={},t7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(t7);var r7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(r7);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t7,r=r7,n=v0;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(e7);var Yse=e7.last;const Jse=Ts(Yse);var Xse=["valueAccessor"],Zse=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(null,arguments)}function xP(e,t){if(e==null)return{};var r,n,i=Qse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Qse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eoe=e=>Array.isArray(e.value)?Jse(e.value):e.value,n7=b.createContext(void 0),i7=n7.Provider,a7=b.createContext(void 0),toe=a7.Provider;function roe(){return b.useContext(n7)}function noe(){return b.useContext(a7)}function tg(e){var{valueAccessor:t=eoe}=e,r=xP(e,Xse),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,c=xP(r,Zse),u=roe(),d=noe(),f=u||d;return!f||!f.length?null:b.createElement(Ii,{zIndex:o??ln.label},b.createElement(Tn,{className:"recharts-label-list"},f.map((p,h)=>{var y,v=Ir(n)?t(p,h):rr(p.payload,n),x=Ir(a)?{}:{id:"".concat(a,"-").concat(h)};return b.createElement(ol,Ny({key:"label-".concat(h)},gi(p),c,x,{fill:(y=r.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:v,textBreakAll:s,viewBox:p.viewBox,index:h,zIndex:0}))})))}tg.displayName="LabelList";function nS(e){var{label:t}=e;return t?t===!0?b.createElement(tg,{key:"labelList-implicit"}):b.isValidElement(t)||rS(t)?b.createElement(tg,{key:"labelList-implicit",content:t}):typeof t=="object"?b.createElement(tg,Ny({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Kw(){return Kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kw.apply(null,arguments)}var s7=e=>{var{cx:t,cy:r,r:n,className:i}=e,a=Ut("recharts-dot",i);return $e(t)&&$e(r)&&$e(n)?b.createElement("circle",Kw({},Zi(e),x5(e),{className:a,cx:t,cy:r,r:n})):null},o7=e=>e.graphicalItems.polarItems,ioe=ge([Lr,qp],Nj),ix=ge([o7,Hr,ioe],kj),aoe=ge([ix],Aj),ax=ge([aoe,W0],Ej),soe=ge([ax,Hr,ix],Cj);ge([ax,Hr,ix],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var a,s=rr(n,(a=t.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:rr(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var bP=()=>{},ooe=ge([ax,Hr,ix,Q0,Lr],Lj),loe=ge([Hr,Tj,Ij,bP,ooe,bP,Ht,Lr],Dj),l7=ge([Hr,Ht,ax,soe,zp,Lr,loe],Rj),coe=ge([l7,nf,Ul],Bj),uoe=ge([Hr,l7,coe,Lr],Uj);ge([Ul,uoe],qD);var doe={radiusAxis:{},angleAxis:{}},c7=Ti({name:"polarAxis",initialState:doe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zpe,removeRadiusAxis:qpe,addAngleAxis:Wpe,removeAngleAxis:Hpe}=c7.actions,foe=c7.reducer;function u7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(n){hoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hoe(e,t,r){return(t=poe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function poe(e){var t=moe(e,"string");return typeof t=="symbol"?t:t+""}function moe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var voe=(e,t)=>t,iS=ge([o7,voe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),goe=[],aS=(e,t,r)=>(r==null?void 0:r.length)===0?goe:r,d7=ge([W0,iS,aS],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>_P(_P({},t.presentationProps),a.props))),i!=null)return i}}),yoe=ge([d7,iS,aS],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var a,s=rr(n,t.nameKey,t.name),o;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:Zd(s,t.dataKey),color:o,payload:n,type:t.legendType}})}),xoe=ge([d7,iS,aS,wn],(e,t,r,n)=>{if(!(t==null||e==null))return yle({offset:n,pieSettings:t,displayedData:e,cells:r})}),f7={exports:{}},or={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=Symbol.for("react.transitional.element"),oS=Symbol.for("react.portal"),sx=Symbol.for("react.fragment"),ox=Symbol.for("react.strict_mode"),lx=Symbol.for("react.profiler"),cx=Symbol.for("react.consumer"),ux=Symbol.for("react.context"),dx=Symbol.for("react.forward_ref"),fx=Symbol.for("react.suspense"),hx=Symbol.for("react.suspense_list"),px=Symbol.for("react.memo"),mx=Symbol.for("react.lazy"),boe=Symbol.for("react.view_transition"),woe=Symbol.for("react.client.reference");function ka(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sS:switch(e=e.type,e){case sx:case lx:case ox:case fx:case hx:case boe:return e;default:switch(e=e&&e.$$typeof,e){case ux:case dx:case mx:case px:return e;case cx:return e;default:return t}}case oS:return t}}}or.ContextConsumer=cx;or.ContextProvider=ux;or.Element=sS;or.ForwardRef=dx;or.Fragment=sx;or.Lazy=mx;or.Memo=px;or.Portal=oS;or.Profiler=lx;or.StrictMode=ox;or.Suspense=fx;or.SuspenseList=hx;or.isContextConsumer=function(e){return ka(e)===cx};or.isContextProvider=function(e){return ka(e)===ux};or.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sS};or.isForwardRef=function(e){return ka(e)===dx};or.isFragment=function(e){return ka(e)===sx};or.isLazy=function(e){return ka(e)===mx};or.isMemo=function(e){return ka(e)===px};or.isPortal=function(e){return ka(e)===oS};or.isProfiler=function(e){return ka(e)===lx};or.isStrictMode=function(e){return ka(e)===ox};or.isSuspense=function(e){return ka(e)===fx};or.isSuspenseList=function(e){return ka(e)===hx};or.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sx||e===lx||e===ox||e===fx||e===hx||typeof e=="object"&&e!==null&&(e.$$typeof===mx||e.$$typeof===px||e.$$typeof===ux||e.$$typeof===cx||e.$$typeof===dx||e.$$typeof===woe||e.getModuleId!==void 0)};or.typeOf=ka;f7.exports=or;var _oe=f7.exports,jP=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",SP=null,jb=null,h7=e=>{if(e===SP&&Array.isArray(jb))return jb;var t=[];return b.Children.forEach(e,r=>{Ir(r)||(_oe.isFragment(r)?t=t.concat(h7(r.props.children)):t.push(r))}),jb=t,SP=e,t};function lS(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>jP(i)):n=[jP(t)],h7(e).forEach(i=>{var a=Hc(i,"type.displayName")||Hc(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var p7=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,m7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(m7);var joe=m7.isPlainObject;const Soe=Ts(joe);var NP,kP,AP,EP,PP;function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(n){Noe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Noe(e,t,r){return(t=koe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function koe(e){var t=Aoe(e,"string");return typeof t=="symbol"?t:t+""}function Aoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ky.apply(null,arguments)}function ah(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var TP=(e,t,r,n,i)=>{var a=r-n,s;return s=Ur(NP||(NP=ah(["M ",",",""])),e,t),s+=Ur(kP||(kP=ah(["L ",",",""])),e+r,t),s+=Ur(AP||(AP=ah(["L ",",",""])),e+r-a/2,t+i),s+=Ur(EP||(EP=ah(["L ",",",""])),e+r-a/2-n,t+i),s+=Ur(PP||(PP=ah(["L ",","," Z"])),e,t),s},Eoe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Poe=e=>{var t=un(e,Eoe),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,p=b.useRef(null),[h,y]=b.useState(-1),v=b.useRef(i),x=b.useRef(a),g=b.useRef(s),_=b.useRef(r),S=b.useRef(n),j=Mp(e,"trapezoid-");if(b.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var V=p.current.getTotalLength();V&&y(V)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var A=Ut("recharts-trapezoid",o);if(!f)return b.createElement("g",null,b.createElement("path",ky({},gi(t),{className:A,d:TP(r,n,i,a,s)})));var N=v.current,D=x.current,E=g.current,C=_.current,L=S.current,I="0px ".concat(h===-1?1:h,"px"),O="".concat(h,"px 0px"),U=C8(["strokeDasharray"],u,c);return b.createElement(Rp,{animationId:j,key:j,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},V=>{var ie=kr(N,i,V),ne=kr(D,a,V),ee=kr(E,s,V),q=kr(C,r,V),Y=kr(L,n,V);p.current&&(v.current=ie,x.current=ne,g.current=ee,_.current=q,S.current=Y);var fe=V>0?{transition:U,strokeDasharray:O}:{strokeDasharray:I};return b.createElement("path",ky({},gi(t),{className:A,d:TP(q,Y,ie,ne,ee),ref:p,style:OP(OP({},fe),t.style)}))})},Coe=["option","shapeType","activeClassName"];function Ooe(e,t){if(e==null)return{};var r,n,i=Toe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Toe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){Ioe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ioe(e,t,r){return(t=Loe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Loe(e){var t=Doe(e,"string");return typeof t=="symbol"?t:t+""}function Doe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Roe(e,t){return Ay(Ay({},t),e)}function Moe(e,t){return e==="symbols"}function LP(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(L8,r);case"trapezoid":return b.createElement(Poe,r);case"sector":return b.createElement(F8,r);case"symbols":if(Moe(t))return b.createElement(y5,r);break;case"curve":return b.createElement(W5,r);default:return null}}function Foe(e){return b.isValidElement(e)?e.props:e}function cS(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=Ooe(e,Coe),a;if(b.isValidElement(t))a=b.cloneElement(t,Ay(Ay({},i),Foe(t)));else if(typeof t=="function")a=t(i,i.index);else if(Soe(t)&&typeof t!="boolean"){var s=Roe(t,i);a=b.createElement(LP,{shapeType:r,elementProps:s})}else{var o=i;a=b.createElement(LP,{shapeType:r,elementProps:o})}return i.isActive?b.createElement(Tn,{className:n},a):a}var uS=(e,t,r)=>{var n=mr();return(i,a)=>s=>{e==null||e(i,a,s),n(xR({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},dS=e=>{var t=mr();return(r,n)=>i=>{e==null||e(r,n,i),t(Kne())}},fS=(e,t,r)=>{var n=mr();return(i,a)=>s=>{e==null||e(i,a,s),n(Gne({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function hS(e){var{tooltipEntrySettings:t}=e,r=mr(),n=li(),i=b.useRef(null);return b.useLayoutEffect(()=>{n||(i.current===null?r(qne(t)):i.current!==t&&r(Wne({prev:i.current,next:t})),i.current=t)},[t,r,n]),b.useLayoutEffect(()=>()=>{i.current&&(r(Hne(i.current)),i.current=null)},[r]),null}function v7(e){var{legendPayload:t}=e,r=mr(),n=li(),i=b.useRef(null);return b.useLayoutEffect(()=>{n||(i.current===null?r(k8(t)):i.current!==t&&r(A8({prev:i.current,next:t})),i.current=t)},[r,n,t]),b.useLayoutEffect(()=>()=>{i.current&&(r(E8(i.current)),i.current=null)},[r]),null}function Boe(e){var{legendPayload:t}=e,r=mr(),n=Ve(Ht),i=b.useRef(null);return b.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(k8(t)):i.current!==t&&r(A8({prev:i.current,next:t})),i.current=t)},[r,n,t]),b.useLayoutEffect(()=>()=>{i.current&&(r(E8(i.current)),i.current=null)},[r]),null}var Sb,$oe=()=>{var[e]=b.useState(()=>np("uid-"));return e},Uoe=(Sb=jC.useId)!==null&&Sb!==void 0?Sb:$oe;function zoe(e,t){var r=Uoe();return t||(e?"".concat(e,"-").concat(r):r)}var qoe=b.createContext(void 0),pS=e=>{var{id:t,type:r,children:n}=e,i=zoe("recharts-".concat(r),t);return b.createElement(qoe.Provider,{value:i},n(i))},Woe={cartesianItems:[],polarItems:[]},g7=Ti({name:"graphicalItems",initialState:Woe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Sr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ka(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Sr()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ka(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Sr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Sr()},removePolarGraphicalItem:{reducer(e,t){var r=Ka(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Sr()}}}),{addCartesianGraphicalItem:Hoe,replaceCartesianGraphicalItem:Voe,removeCartesianGraphicalItem:Koe,addPolarGraphicalItem:Goe,removePolarGraphicalItem:Yoe}=g7.actions,Joe=g7.reducer,Xoe=e=>{var t=mr(),r=b.useRef(null);return b.useLayoutEffect(()=>{r.current===null?t(Hoe(e)):r.current!==e&&t(Voe({prev:r.current,next:e})),r.current=e},[t,e]),b.useLayoutEffect(()=>()=>{r.current&&(t(Koe(r.current)),r.current=null)},[t]),null},y7=b.memo(Xoe);function Zoe(e){var t=mr();return b.useLayoutEffect(()=>(t(Goe(e)),()=>{t(Yoe(e))}),[t,e]),null}var Qoe=["key"],ele=["onMouseEnter","onClick","onMouseLeave"],tle=["id"],rle=["id"];function DP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(r),!0).forEach(function(n){nle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nle(e,t,r){return(t=ile(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ile(e){var t=ale(e,"string");return typeof t=="symbol"?t:t+""}function ale(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ll.apply(null,arguments)}function vx(e,t){if(e==null)return{};var r,n,i=sle(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function sle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ole(e){var t=b.useMemo(()=>lS(e.children,Yp),[e.children]),r=Ve(n=>yoe(n,e.id,t));return r==null?null:b.createElement(Boe,{legendPayload:r})}var lle=b.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:n.map(p=>p.tooltipPayload),getPosition:p=>{var h;return(h=n[Number(p)])===null||h===void 0?void 0:h.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:s,dataKey:t,nameKey:r,name:Zd(o,t),hide:c,type:u,color:s,unit:"",graphicalItemId:d}};return b.createElement(hS,{tooltipEntrySettings:f})}),cle=(e,t)=>e>t?"start":e<t?"end":"middle",ule=(e,t,r)=>si(typeof t=="function"?t(e):t,r,r*.8),dle=(e,t,r)=>{var{top:n,left:i,width:a,height:s}=t,o=D8(a,s),c=i+si(e.cx,a,a/2),u=n+si(e.cy,s,s/2),d=si(e.innerRadius,o,0),f=ule(r,e.outerRadius,o),p=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}},fle=(e,t)=>{var r=Cn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},hle=(e,t)=>{if(b.isValidElement(e))return b.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Ut("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=vx(t,Qoe);return b.createElement(W5,Ll({},i,{type:"linear",className:r}))},ple=(e,t,r)=>{if(b.isValidElement(e))return b.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),b.isValidElement(n)))return n;var i=Ut("recharts-pie-label-text",u7(e));return b.createElement(nx,Ll({},t,{alignmentBaseline:"middle",className:i}),n)};function mle(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:a,dataKey:s}=r;if(!n||!i||!t)return null;var o=Zi(r),c=qc(i),u=qc(a),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=t.map((p,h)=>{var y=(p.startAngle+p.endAngle)/2,v=on(p.cx,p.cy,p.outerRadius+d,y),x=qr(qr(qr(qr({},o),p),{},{stroke:"none"},c),{},{index:h,textAnchor:cle(v.x,p.cx)},v),g=qr(qr(qr(qr({},o),p),{},{fill:"none",stroke:p.fill},u),{},{index:h,points:[on(p.cx,p.cy,p.outerRadius,y),v],key:"line"});return b.createElement(Ii,{zIndex:ln.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(h)},b.createElement(Tn,null,a&&hle(a,g),ple(i,x,rr(p,s))))});return b.createElement(Tn,{className:"recharts-pie-labels"},f)}function vle(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?b.createElement(nS,{label:i}):b.createElement(mle,{sectors:t,props:r,showLabels:n})}function gle(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:a,id:s}=e,o=Ve(Il),c=Ve(Jj),u=Ve(Iie),{onMouseEnter:d,onClick:f,onMouseLeave:p}=i,h=vx(i,ele),y=uS(d,i.dataKey,s),v=dS(p),x=fS(f,i.dataKey,s);return t==null||t.length===0?null:b.createElement(b.Fragment,null,t.map((g,_)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var S=u==null||u===s,j=String(_)===o&&(c==null||i.dataKey===c)&&S,A=o?n:null,N=r&&j?r:A,D=qr(qr({},g),{},{stroke:g.stroke,tabIndex:-1,[l8]:_,[c8]:s});return b.createElement(Tn,Ll({key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(_),tabIndex:-1,className:"recharts-pie-sector"},Cp(h,g,_),{onMouseEnter:y(g,_),onMouseLeave:v(g,_),onClick:x(g,_)}),b.createElement(cS,Ll({option:a??N,index:_,shapeType:"sector",isActive:j},D)))}))}function yle(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:a}=e,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,p=Math.abs(r.minAngle),h=fle(o,c),y=Math.abs(h),v=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,x=n.filter(N=>rr(N,u,0)!==0).length,g=(y>=360?x:x-1)*v,_=y-x*p-g,S=n.reduce((N,D)=>{var E=rr(D,u,0);return N+($e(E)?E:0)},0),j;if(S>0){var A;j=n.map((N,D)=>{var E=rr(N,u,0),C=rr(N,d,D),L=dle(r,a,N),I=($e(E)?E:0)/S,O,U=qr(qr({},N),i&&i[D]&&i[D].props);D?O=A.endAngle+Cn(h)*v*(E!==0?1:0):O=o;var V=O+Cn(h)*((E!==0?p:0)+I*_),ie=(O+V)/2,ne=(L.innerRadius+L.outerRadius)/2,ee=[{name:C,value:E,payload:U,dataKey:u,type:f,graphicalItemId:r.id}],q=on(L.cx,L.cy,ne,ie);return A=qr(qr(qr(qr({},r.presentationProps),{},{percent:I,cornerRadius:typeof s=="string"?parseFloat(s):s,name:C,tooltipPayload:ee,midAngle:ie,middleRadius:ne,tooltipPosition:q},U),L),{},{value:E,dataKey:u,startAngle:O,endAngle:V,payload:U,paddingAngle:Cn(h)*v}),A})}return j}function xle(e){var{showLabels:t,sectors:r,children:n}=e,i=b.useMemo(()=>!t||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,t]);return b.createElement(toe,{value:t?i:void 0},n)}function ble(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:p}=t,h=Mp(t,"recharts-pie-"),y=r.current,[v,x]=b.useState(!1),g=b.useCallback(()=>{typeof p=="function"&&p(),x(!1)},[p]),_=b.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return b.createElement(xle,{showLabels:!v,sectors:i},b.createElement(Rp,{animationId:h,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:_,onAnimationEnd:g,key:h},S=>{var j,A=[],N=i&&i[0],D=(j=N==null?void 0:N.startAngle)!==null&&j!==void 0?j:0;return i==null||i.forEach((E,C)=>{var L=y&&y[C],I=C>0?Hc(E,"paddingAngle",0):0;if(L){var O=kr(L.endAngle-L.startAngle,E.endAngle-E.startAngle,S),U=qr(qr({},E),{},{startAngle:D+I,endAngle:D+O+I});A.push(U),D=U.endAngle}else{var{endAngle:V,startAngle:ie}=E,ne=kr(0,V-ie,S),ee=qr(qr({},E),{},{startAngle:D+I,endAngle:D+ne+I});A.push(ee),D=ee.endAngle}}),r.current=A,b.createElement(Tn,null,b.createElement(gle,{sectors:A,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:n}))}),b.createElement(vle,{showLabels:!v,sectors:i,props:t}),t.children)}var wle={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ln.area};function _le(e){var{id:t}=e,r=vx(e,tle),{hide:n,className:i,rootTabIndex:a}=e,s=b.useMemo(()=>lS(e.children,Yp),[e.children]),o=Ve(d=>xoe(d,t,s)),c=b.useRef(null),u=Ut("recharts-pie",i);return n||o==null?(c.current=null,b.createElement(Tn,{tabIndex:a,className:u})):b.createElement(Ii,{zIndex:e.zIndex},b.createElement(lle,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),b.createElement(Tn,{tabIndex:a,className:u},b.createElement(ble,{props:qr(qr({},r),{},{sectors:o}),previousSectorsRef:c,id:t})))}function x7(e){var t=un(e,wle),{id:r}=t,n=vx(t,rle),i=Zi(n);return b.createElement(pS,{id:r,type:"pie"},a=>b.createElement(b.Fragment,null,b.createElement(Zoe,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),b.createElement(ole,Ll({},n,{id:a})),b.createElement(_le,Ll({},n,{id:a}))))}x7.displayName="Pie";var jle=["points"];function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(n){Sle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sle(e,t,r){return(t=Nle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nle(e){var t=kle(e,"string");return typeof t=="symbol"?t:t+""}function kle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ey.apply(null,arguments)}function Ale(e,t){if(e==null)return{};var r,n,i=Ele(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ele(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ple(e){var{option:t,dotProps:r,className:n}=e;if(b.isValidElement(t))return b.cloneElement(t,r);if(typeof t=="function")return t(r);var i=Ut(n,typeof t!="boolean"?t.className:""),a=r??{},{points:s}=a,o=Ale(a,jle);return b.createElement(s7,Ey({},o,{className:i}))}function Cle(e,t){return e==null?!1:t?!0:e.length===1}function Ole(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:c,zIndex:u=ln.scatter}=e;if(!Cle(t,r))return null;var d=p7(r),f=bG(r),p=t.map((y,v)=>{var x,g,_=Nb(Nb(Nb({r:3},s),f),{},{index:v,cx:(x=y.x)!==null&&x!==void 0?x:void 0,cy:(g=y.y)!==null&&g!==void 0?g:void 0,dataKey:a,value:y.value,payload:y.payload,points:t});return b.createElement(Ple,{key:"dot-".concat(v),option:r,dotProps:_,className:i})}),h={};return o&&c!=null&&(h.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),b.createElement(Ii,{zIndex:u},b.createElement(Tn,Ey({className:n},h),p))}function MP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(r),!0).forEach(function(n){Tle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tle(e,t,r){return(t=Ile(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ile(e){var t=Lle(e,"string");return typeof t=="symbol"?t:t+""}function Lle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b7=0,Dle={xAxis:{},yAxis:{},zAxis:{}},w7=Ti({name:"cartesianAxis",initialState:Dle,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Sr()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Sr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Sr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Sr()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Sr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Sr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Sr()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Sr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Sr()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,n].slice(-3);e.yAxis[r]=FP(FP({},i),{},{width:n,widthHistory:o})}}}}),{addXAxis:Rle,replaceXAxis:Mle,removeXAxis:Fle,addYAxis:Ble,replaceYAxis:$le,removeYAxis:Ule,addZAxis:Vpe,replaceZAxis:Kpe,removeZAxis:Gpe,updateYAxisWidth:zle}=w7.actions,qle=w7.reducer,Wle=ge([wn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Hle=ge([Wle,Oo,To],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),mS=()=>Ve(Hle),Vle=()=>Ve(Fie);function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(n){Kle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kle(e,t,r){return(t=Gle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gle(e){var t=Yle(e,"string");return typeof t=="symbol"?t:t+""}function Yle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jle=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:a,clipPath:s}=e;if(i===!1||t.x==null||t.y==null)return null;var o={index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=kb(kb(kb({},o),qc(i)),x5(i)),u;return b.isValidElement(i)?u=b.cloneElement(i,c):typeof i=="function"?u=i(c):u=b.createElement(s7,c),b.createElement(Tn,{className:"recharts-active-dot",clipPath:s},u)};function Xle(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:a,zIndex:s=ln.activeDot}=e,o=Ve(Il),c=Vle();if(t==null||c==null)return null;var u=t.find(d=>c.includes(d.payload));return Ir(u)?null:b.createElement(Ii,{zIndex:s},b.createElement(Jle,{point:u,childIndex:Number(o),mainColor:r,dataKey:i,activeDot:n,clipPath:a}))}var $P=(e,t,r)=>{var n=r??e;if(!Ir(n))return si(n,t,0)},Zle=(e,t,r)=>{var n={},i=e.filter(G0),a=e.filter(u=>u.stackId==null),s=i.reduce((u,d)=>{var f=u[d.stackId];return f==null&&(f=[]),f.push(d),u[d.stackId]=f,u},n),o=Object.entries(s).map(u=>{var d,[f,p]=u,h=p.map(v=>v.dataKey),y=$P(t,r,(d=p[0])===null||d===void 0?void 0:d.barSize);return{stackId:f,dataKeys:h,barSize:y}}),c=a.map(u=>{var d=[u.dataKey].filter(p=>p!=null),f=$P(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]};function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(n){Qle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qle(e,t,r){return(t=ece(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ece(e){var t=tce(e,"string");return typeof t=="symbol"?t:t+""}function tce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rce(e,t,r,n,i){var a,s=n.length;if(!(s<1)){var o=si(e,r,0,!0),c,u=[];if(Rt((a=n[0])===null||a===void 0?void 0:a.barSize)){var d=!1,f=r/s,p=n.reduce((_,S)=>_+(S.barSize||0),0);p+=(s-1)*o,p>=r&&(p-=(s-1)*o,o=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var h=(r-p)/2>>0,y={offset:h-o,size:0};c=n.reduce((_,S)=>{var j,A={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:y.offset+y.size+o,size:d?f:(j=S.barSize)!==null&&j!==void 0?j:0}},N=[..._,A];return y=A.position,N},u)}else{var v=si(t,r,0,!0);r-2*v-(s-1)*o<=0&&(o=0);var x=(r-2*v-(s-1)*o)/s;x>1&&(x>>=0);var g=Rt(i)?Math.min(x,i):x;c=n.reduce((_,S,j)=>[..._,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:v+(x+o)*j+(x-g)/2,size:g}}],u)}return c}}var nce=(e,t,r,n,i,a,s)=>{var o=Ir(s)?t:s,c=rce(r,n,i!==a?i:a,e,o);return i!==a&&c!=null&&(c=c.map(u=>Cv(Cv({},u),{},{position:Cv(Cv({},u.position),{},{offset:u.position.offset-i/2})}))),c},ice=(e,t)=>{var r=jj(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},ace=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function sce(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Rt(e.zIndex)?e.zIndex:t}var _7=e=>{var{chartData:t}=e,r=mr(),n=li();return b.useEffect(()=>n?()=>{}:(r(tP(t)),()=>{r(tP(void 0))}),[t,r,n]),null},zP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},j7=Ti({name:"brush",initialState:zP,reducers:{setBrushSettings(e,t){return t.payload==null?zP:t.payload}}}),{setBrushSettings:Ype}=j7.actions,oce=j7.reducer;function lce(e){return(e%180+180)%180}var cce=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=lce(i),s=a*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},uce={dots:[],areas:[],lines:[]},S7=Ti({name:"referenceElements",initialState:uce,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ka(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ka(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ka(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Jpe,removeDot:Xpe,addArea:Zpe,removeArea:Qpe,addLine:eme,removeLine:tme}=S7.actions,dce=S7.reducer,fce=b.createContext(void 0),hce=e=>{var{children:t}=e,[r]=b.useState("".concat(np("recharts"),"-clip")),n=mS();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return b.createElement(fce.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:i,y:a,height:o,width:s}))),t)};function N7(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function pce(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return cce(n,r)}function mce(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function gp(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function vce(e,t){return N7(e,t+1)}function gce(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,c=0,u=1,d=s,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:N7(n,u)};var v=c,x,g=()=>(x===void 0&&(x=r(y,v)),x),_=y.coordinate,S=c===0||gp(e,_,g,d,o);S||(c=0,d=s,u+=1),S&&(d=_+e*(g()/2+i),c+=u)},p;u<=a.length;)if(p=f(),p)return p.v;return[]}function yce(e,t,r,n,i){var a=(n||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=t,u=1;u<=s;u++){for(var d=(s-1)%u,f=o,p=!0,h=function(){var j=n[v];if(j==null)return 0;var A=v,N,D=()=>(N===void 0&&(N=r(j,A)),N),E=j.coordinate,C=v===d||gp(e,E,D,f,c);if(!C)return p=!1,1;C&&(f=E+e*(D()/2+i))},y,v=d;v<s&&(y=h(),!(y!==0&&y===1));v+=u);if(p){for(var x=[],g=d;g<s;g+=u){var _=n[g];_!=null&&x.push(_)}return x}}return[]}function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(n){xce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xce(e,t,r){return(t=bce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bce(e){var t=wce(e,"string");return typeof t=="symbol"?t:t+""}function wce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ce(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:c}=t,u=function(p){var h=a[p];if(h==null)return 1;var y=h,v,x=()=>(v===void 0&&(v=r(h,p)),v);if(p===s-1){var g=e*(y.coordinate+e*x()/2-c);a[p]=y=ni(ni({},y),{},{tickCoord:g>0?y.coordinate-g*e:y.coordinate})}else a[p]=y=ni(ni({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var _=gp(e,y.tickCoord,x,o,c);_&&(c=y.tickCoord-e*(x()/2+i),a[p]=ni(ni({},y),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return a}function jce(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:c,end:u}=t;if(a){var d=n[o-1];if(d!=null){var f=r(d,o-1),p=e*(d.coordinate+e*f/2-u);if(s[o-1]=d=ni(ni({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var h=gp(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+i),s[o-1]=ni(ni({},d),{},{isShow:!0}))}}}for(var y=a?o-1:o,v=function(_){var S=s[_];if(S==null)return 1;var j=S,A,N=()=>(A===void 0&&(A=r(S,_)),A);if(_===0){var D=e*(j.coordinate-e*N()/2-c);s[_]=j=ni(ni({},j),{},{tickCoord:D<0?j.coordinate-D*e:j.coordinate})}else s[_]=j=ni(ni({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var E=gp(e,j.tickCoord,N,c,u);E&&(c=j.tickCoord+e*(N()/2+i),s[_]=ni(ni({},j),{},{isShow:!0}))}},x=0;x<y;x++)v(x);return s}function vS(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!i||!i.length||!n)return[];if($e(c)||M0.isSsr){var p;return(p=vce(i,$e(c)?c:0))!==null&&p!==void 0?p:[]}var h=[],y=o==="top"||o==="bottom"?"width":"height",v=d&&y==="width"?Eh(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=(A,N)=>{var D=typeof u=="function"?u(A.value,N):A.value;return y==="width"?pce(Eh(D,{fontSize:t,letterSpacing:r}),v,f):Eh(D,{fontSize:t,letterSpacing:r})[y]},g=i[0],_=i[1],S=i.length>=2&&g!=null&&_!=null?Cn(_.coordinate-g.coordinate):1,j=mce(a,S,y);return c==="equidistantPreserveStart"?gce(S,j,x,i,s):c==="equidistantPreserveEnd"?yce(S,j,x,i,s):(c==="preserveStart"||c==="preserveStartEnd"?h=jce(S,j,x,i,s,c==="preserveStartEnd"):h=_ce(S,j,x,i,s),h.filter(A=>A.isShow))}var Sce=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(r?n:0);return Math.round(u)}return 0},Nce=["axisLine","width","height","className","hide","ticks","axisType"];function kce(e,t){if(e==null)return{};var r,n,i=Ace(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ace(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qc.apply(null,arguments)}function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(n){Ece(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ece(e,t,r){return(t=Pce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pce(e){var t=Cce(e,"string");return typeof t=="symbol"?t:t+""}function Cce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mo={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ln.axis};function Oce(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=$r($r($r({},c),Zi(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);u=$r($r({},u),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);u=$r($r({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+i})}return b.createElement("line",Qc({},u,{className:Ut("recharts-cartesian-axis-line",Hc(o,"className"))}))}function Tce(e,t,r,n,i,a,s,o,c){var u,d,f,p,h,y,v=o?-1:1,x=e.tickSize||s,g=$e(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,p=r+ +!o*i,f=p-v*x,y=f-v*c,h=g;break;case"left":f=p=e.coordinate,d=t+ +!o*n,u=d-v*x,h=u-v*c,y=g;break;case"right":f=p=e.coordinate,d=t+ +o*n,u=d+v*x,h=u+v*c,y=g;break;default:u=d=e.coordinate,p=r+ +o*i,f=p+v*x,y=f+v*c,h=g;break}return{line:{x1:u,y1:f,x2:d,y2:p},tick:{x:h,y}}}function Ice(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Lce(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Dce(e){var{option:t,tickProps:r,value:n}=e,i,a=Ut(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))i=b.cloneElement(t,$r($r({},r),{},{className:a}));else if(typeof t=="function")i=t($r($r({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=Ut(s,u7(t))),i=b.createElement(nx,Qc({},r,{className:s}),n)}return i}var Rce=b.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:f,x:p,y:h,width:y,height:v,tickSize:x,tickMargin:g,fontSize:_,letterSpacing:S,getTicksConfig:j,events:A,axisType:N}=e,D=vS($r($r({},j),{},{ticks:r}),_,S),E=Ice(d,f),C=Lce(d,f),L=Zi(j),I=qc(n),O={};typeof i=="object"&&(O=i);var U=$r($r({},L),{},{fill:"none"},O),V=D.map(ee=>$r({entry:ee},Tce(ee,p,h,y,v,d,x,f,g))),ie=V.map(ee=>{var{entry:q,line:Y}=ee;return b.createElement(Tn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},i&&b.createElement("line",Qc({},U,Y,{className:Ut("recharts-cartesian-axis-tick-line",Hc(i,"className"))})))}),ne=V.map((ee,q)=>{var Y,fe,{entry:te,tick:R}=ee,z=$r($r($r($r({verticalAnchor:C},L),{},{textAnchor:E,stroke:"none",fill:a},R),{},{index:q,payload:te,visibleTicksCount:D.length,tickFormatter:s,padding:c},u),{},{angle:(Y=(fe=u==null?void 0:u.angle)!==null&&fe!==void 0?fe:L.angle)!==null&&Y!==void 0?Y:0}),G=$r($r({},z),I);return b.createElement(Tn,Qc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},Cp(A,te,q)),n&&b.createElement(Dce,{option:n,tickProps:G,value:"".concat(typeof s=="function"?s(te.value,q):te.value).concat(o||"")}))});return b.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},ne.length>0&&b.createElement(Ii,{zIndex:ln.label},b.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},ne)),ie.length>0&&b.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},ie))}),Mce=b.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:c}=e,u=kce(e,Nce),[d,f]=b.useState(""),[p,h]=b.useState(""),y=b.useRef(null);b.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var x;return Sce({ticks:y.current,label:(x=e.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var v=b.useCallback(x=>{if(x){var g=x.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=g;var _=g[0];if(_){var S=window.getComputedStyle(_),j=S.fontSize,A=S.letterSpacing;(j!==d||A!==p)&&(f(j),h(A))}}},[d,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:b.createElement(Ii,{zIndex:e.zIndex},b.createElement(Tn,{className:Ut("recharts-cartesian-axis",a)},b.createElement(Oce,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Zi(e)}),b.createElement(Rce,{ref:v,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),b.createElement(Fse,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},b.createElement(Gse,{label:e.label,labelRef:e.labelRef}),e.children)))}),gS=b.forwardRef((e,t)=>{var r=un(e,mo);return b.createElement(Mce,Qc({},r,{ref:t}))});gS.displayName="CartesianAxis";var Fce=["x1","y1","x2","y2","key"],Bce=["offset"],$ce=["xAxisId","yAxisId"],Uce=["xAxisId","yAxisId"];function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(n){zce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zce(e,t,r){return(t=qce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qce(e){var t=Wce(e,"string");return typeof t=="symbol"?t:t+""}function Wce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ec.apply(null,arguments)}function Py(e,t){if(e==null)return{};var r,n,i=Hce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Hce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vce=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return b.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function k7(e){var{option:t,lineItemProps:r}=e,n;if(b.isValidElement(t))n=b.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=r,d=Py(r,Fce),f=(i=Zi(d))!==null&&i!==void 0?i:{},{offset:p}=f,h=Py(f,Bce);n=b.createElement("line",Ec({},h,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return n}function Kce(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=Py(e,$ce),c=i.map((u,d)=>{var f=ai(ai({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return b.createElement(k7,{key:"line-".concat(d),option:n,lineItemProps:f})});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Gce(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=Py(e,Uce),c=i.map((u,d)=>{var f=ai(ai({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return b.createElement(k7,{option:n,lineItemProps:f,key:"line-".concat(d)})});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Yce(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var h=u[p+1],y=h==null,v=y?i+s-f:h-f;if(v<=0)return null;var x=p%t.length;return b.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:v,width:a,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Jce(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var h=u[p+1],y=h==null,v=y?i+s-f:h-f;if(v<=0)return null;var x=p%r.length;return b.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:v,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Xce=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return a8(vS(ai(ai(ai({},mo),r),{},{ticks:s8(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},Zce=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return a8(vS(ai(ai(ai({},mo),r),{},{ticks:s8(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},Qce={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ln.grid};function eu(e){var t=$5(),r=U5(),n=v8(),i=ai(ai({},un(e,Qce)),{},{x:$e(e.x)?e.x:n.left,y:$e(e.y)?e.y:n.top,width:$e(e.width)?e.width:n.width,height:$e(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:h}=i,y=li(),v=Ve(C=>W3(C,"xAxis",a,y)),x=Ve(C=>W3(C,"yAxis",s,y));if(!Cs(u)||!Cs(d)||!$e(o)||!$e(c))return null;var g=i.verticalCoordinatesGenerator||Xce,_=i.horizontalCoordinatesGenerator||Zce,{horizontalPoints:S,verticalPoints:j}=i;if((!S||!S.length)&&typeof _=="function"){var A=p&&p.length,N=_({yAxis:x?ai(ai({},x),{},{ticks:A?p:x.ticks}):void 0,width:t??u,height:r??d,offset:n},A?!0:f);ty(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(S=N)}if((!j||!j.length)&&typeof g=="function"){var D=h&&h.length,E=g({xAxis:v?ai(ai({},v),{},{ticks:D?h:v.ticks}):void 0,width:t??u,height:r??d,offset:n},D?!0:f);ty(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(j=E)}return b.createElement(Ii,{zIndex:i.zIndex},b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(Vce,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),b.createElement(Yce,Ec({},i,{horizontalPoints:S})),b.createElement(Jce,Ec({},i,{verticalPoints:j})),b.createElement(Kce,Ec({},i,{offset:n,horizontalPoints:S,xAxis:v,yAxis:x})),b.createElement(Gce,Ec({},i,{offset:n,verticalPoints:j,xAxis:v,yAxis:x}))))}eu.displayName="CartesianGrid";var eue={},A7=Ti({name:"errorBars",initialState:eue,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:rme,replaceErrorBar:nme,removeErrorBar:ime}=A7.actions,tue=A7.reducer,rue=["children"];function nue(e,t){if(e==null)return{};var r,n,i=iue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function iue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aue={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},sue=b.createContext(aue);function E7(e){var{children:t}=e,r=nue(e,rue);return b.createElement(sue.Provider,{value:r},t)}function yS(e,t){var r,n,i=Ve(u=>Do(u,e)),a=Ve(u=>Ro(u,t)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Nn.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:kn.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function P7(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=mS(),{needClipX:a,needClipY:s,needClip:o}=yS(t,r);if(!o||!i)return null;var{x:c,y:u,width:d,height:f}=i;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:a?c:c-d/2,y:s?u:u-f/2,width:a?d:d*2,height:s?f:f*2}))}var C7=(e,t,r,n)=>Tl(e,"xAxis",t,n),O7=(e,t,r,n)=>Ol(e,"xAxis",t,n),T7=(e,t,r,n)=>Tl(e,"yAxis",r,n),I7=(e,t,r,n)=>Ol(e,"yAxis",r,n),oue=ge([Ht,C7,T7,O7,I7],(e,t,r,n,i)=>Co(e,"xAxis")?Rd(t,n,!1):Rd(r,i,!1)),lue=(e,t,r,n,i)=>i;function cue(e){return e.type==="line"}var uue=ge([X0,lue],(e,t)=>e.filter(cue).find(r=>r.id===t)),due=ge([Ht,C7,T7,O7,I7,uue,oue,pj],(e,t,r,n,i,a,s,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||s==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=a,h;if(p!=null&&p.length>0?h=p:h=c==null?void 0:c.slice(u,d+1),h!=null)return rde({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:f,bandSize:s,displayedData:h})}});function fue(e){var t=qc(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:a}=t,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var hue={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=b;function pue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mue=typeof Object.is=="function"?Object.is:pue,vue=Jp.useSyncExternalStore,gue=Jp.useRef,yue=Jp.useEffect,xue=Jp.useMemo,bue=Jp.useDebugValue;hue.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=gue(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=xue(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),i!==void 0&&s.hasValue){var y=s.value;if(i(y,h))return f=y}return f=h}if(y=f,mue(d,h))return y;var v=n(h);return i!==void 0&&i(y,v)?(d=h,y):(d=h,f=v)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,i]);var o=vue(e,a[0],a[1]);return yue(function(){s.hasValue=!0,s.value=o},[o]),bue(o),o};function wue(e){e()}function _ue(){let e=null,t=null;return{clear(){e=null,t=null},notify(){wue(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var VP={notify(){},get:()=>[]};function jue(e,t){let r,n=VP,i=0,a=!1;function s(v){d();const x=n.subscribe(v);let g=!1;return()=>{g||(g=!0,x(),f())}}function o(){n.notify()}function c(){y.onStateChange&&y.onStateChange()}function u(){return a}function d(){i++,r||(r=e.subscribe(c),n=_ue())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=VP)}function p(){a||(a=!0,d())}function h(){a&&(a=!1,f())}const y={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:h,getListeners:()=>n};return y}var Sue=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nue=Sue(),kue=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Aue=kue(),Eue=()=>Nue||Aue?b.useLayoutEffect:b.useEffect,Pue=Eue();function KP(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Cue(e,t){if(KP(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!KP(e[r[i]],t[r[i]]))return!1;return!0}var Ab=Symbol.for("react-redux-context"),Eb=typeof globalThis<"u"?globalThis:{};function Oue(){if(!b.createContext)return{};const e=Eb[Ab]??(Eb[Ab]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var Tue=Oue();function Iue(e){const{children:t,context:r,serverState:n,store:i}=e,a=b.useMemo(()=>{const c=jue(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),s=b.useMemo(()=>i.getState(),[i]);Pue(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=r||Tue;return b.createElement(o.Provider,{value:a},t)}var Lue=Iue,Due=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Rue(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function gx(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(Due.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Cue(e[n],t[n]))return!1}else if(!Rue(e[n],t[n]))return!1;return!0}var Mue=["id"],Fue=["type","layout","connectNulls","needClip","shape"],Bue=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yp.apply(null,arguments)}function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(n){$ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $ue(e,t,r){return(t=Uue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uue(e){var t=zue(e,"string");return typeof t=="symbol"?t:t+""}function zue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xS(e,t){if(e==null)return{};var r,n,i=que(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function que(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wue=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:Zd(r,t),payload:e}]},Hue=b.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:r,getPosition:du,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Zd(s,t),hide:o,type:u,color:n,unit:c,graphicalItemId:d}};return b.createElement(hS,{tooltipEntrySettings:f})}),L7=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Vue(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var Kue=(e,t,r)=>{var n=r.reduce((h,y)=>h+y);if(!n)return L7(t,e);for(var i=Math.floor(e/n),a=e%n,s=t-e,o=[],c=0,u=0;c<r.length;u+=(d=r[c])!==null&&d!==void 0?d:0,++c){var d,f=r[c];if(f!=null&&u+f>a){o=[...r.slice(0,c),a-u];break}}var p=o.length%2===0?[0,s]:[s];return[...Vue(r,i),...o,...p].map(h=>"".concat(h,"px")).join(", ")};function Gue(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,c=xS(n,Mue),u=Zi(c);return b.createElement(Ole,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:u,needClip:s,clipPathId:t})}function Yue(e){var{showLabels:t,children:r,points:n}=e,i=b.useMemo(()=>n==null?void 0:n.map(a=>{var s,o,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return gs(gs({},c),{},{value:a.value,payload:a.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return b.createElement(i7,{value:t?i:void 0},r)}function YP(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:a}=e,{type:s,layout:o,connectNulls:c,needClip:u,shape:d}=a,f=xS(a,Fue),p=gs(gs({},gi(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:s,layout:o,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return b.createElement(b.Fragment,null,(n==null?void 0:n.length)>1&&b.createElement(cS,yp({shapeType:"curve",option:d},p,{pathRef:r})),b.createElement(Gue,{points:n,clipPathId:t,props:a}))}function Jue(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Xue(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:s,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:p,width:h,height:y,onAnimationEnd:v,onAnimationStart:x}=r,g=i.current,_=Mp(s,"recharts-line-"),S=b.useRef(_),[j,A]=b.useState(!1),N=!j,D=b.useCallback(()=>{typeof v=="function"&&v(),A(!1)},[v]),E=b.useCallback(()=>{typeof x=="function"&&x(),A(!0)},[x]),C=Jue(n.current),L=b.useRef(0);S.current!==_&&(L.current=a.current,S.current=_);var I=L.current;return b.createElement(Yue,{points:s,showLabels:N},r.children,b.createElement(Rp,{animationId:_,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:D,onAnimationStart:E,key:_},O=>{var U=kr(I,C+I,O),V=Math.min(U,C),ie;if(c)if(o){var ne="".concat(o).split(/[,\s]+/gim).map(Y=>parseFloat(Y));ie=Kue(V,C,ne)}else ie=L7(C,V);else ie=o==null?void 0:String(o);if(O>0&&C>0&&(i.current=s,a.current=Math.max(a.current,V)),g){var ee=g.length/s.length,q=O===1?s:s.map((Y,fe)=>{var te=Math.floor(fe*ee);if(g[te]){var R=g[te];return gs(gs({},Y),{},{x:kr(R.x,Y.x,O),y:kr(R.y,Y.y,O)})}return p?gs(gs({},Y),{},{x:kr(h*2,Y.x,O),y:kr(y/2,Y.y,O)}):gs(gs({},Y),{},{x:Y.x,y:Y.y})});return i.current=q,b.createElement(YP,{props:r,points:q,clipPathId:t,pathRef:n,strokeDasharray:ie})}return b.createElement(YP,{props:r,points:s,clipPathId:t,pathRef:n,strokeDasharray:ie})}),b.createElement(nS,{label:r.label}))}function Zue(e){var{clipPathId:t,props:r}=e,n=b.useRef(null),i=b.useRef(0),a=b.useRef(null);return b.createElement(Xue,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var Que=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:rr(e.payload,t)}};class ede extends b.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:c,width:u,height:d,id:f,needClip:p,zIndex:h}=this.props;if(t)return null;var y=Ut("recharts-line",i),v=f,{r:x,strokeWidth:g}=fue(r),_=p7(r),S=x*2+g,j=p?"url(#clipPath-".concat(_?"":"dots-").concat(v,")"):void 0;return b.createElement(Ii,{zIndex:h},b.createElement(Tn,{className:y},p&&b.createElement("defs",null,b.createElement(P7,{clipPathId:v,xAxisId:a,yAxisId:s}),!_&&b.createElement("clipPath",{id:"clipPath-dots-".concat(v)},b.createElement("rect",{x:c-S/2,y:o-S/2,width:u+S,height:d+S}))),b.createElement(E7,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:Que,errorBarOffset:0},b.createElement(Zue,{props:this.props,clipPathId:v}))),b.createElement(Xle,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:j}))}}var D7={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ln.line,type:"linear"};function tde(e){var t=un(e,D7),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:p,xAxisId:h,yAxisId:y,id:v}=t,x=xS(t,Bue),{needClip:g}=yS(h,y),_=mS(),S=fu(),j=li(),A=Ve(L=>due(L,h,y,j,v));if(S!=="horizontal"&&S!=="vertical"||A==null||_==null)return null;var{height:N,width:D,x:E,y:C}=_;return b.createElement(ede,yp({},x,{id:v,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:d,hide:u,label:f,legendType:p,xAxisId:h,yAxisId:y,points:A,layout:S,height:N,width:D,left:E,top:C,needClip:g}))}function rde(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=rr(u,s);if(t==="horizontal"){var p=Y4({axis:r,ticks:i,bandSize:o,entry:u,index:d}),h=Ir(f)?null:n.scale.map(f);return{x:p,y:h??null,value:f,payload:u}}var y=Ir(f)?null:r.scale.map(f),v=Y4({axis:n,ticks:a,bandSize:o,entry:u,index:d});return y==null||v==null?null:{x:y,y:v,value:f,payload:u}}).filter(Boolean)}function nde(e){var t=un(e,D7),r=li();return b.createElement(pS,{id:t.id,type:"line"},n=>b.createElement(b.Fragment,null,b.createElement(v7,{legendPayload:Wue(t)}),b.createElement(Hue,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),b.createElement(y7,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),b.createElement(tde,yp({},t,{id:n}))))}var Gw=b.memo(nde,gx);Gw.displayName="Line";function mu(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:b7}function vu(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:b7}var ide="Invariant failed";function ade(e,t){throw new Error(ide)}function Yw(){return Yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yw.apply(null,arguments)}function Cy(e){return b.createElement(cS,Yw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var sde=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if($e(t))return t;var a=$e(n)||Ir(n);return a?t(n,i):(a||ade(),r)}},ode=(e,t,r)=>r,lde=(e,t)=>t,Xp=ge([X0,lde],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),cde=ge([Xp],e=>e==null?void 0:e.maxBarSize),ude=(e,t,r,n)=>n,dde=ge([Ht,X0,mu,vu,ode],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),fde=(e,t,r)=>{var n=Ht(e),i=mu(e,t),a=vu(e,t);if(!(i==null||a==null))return n==="horizontal"?Uw(e,"yAxis",a,r):Uw(e,"xAxis",i,r)},hde=(e,t)=>{var r=Ht(e),n=mu(e,t),i=vu(e,t);if(!(n==null||i==null))return r==="horizontal"?q3(e,"xAxis",n):q3(e,"yAxis",i)},pde=ge([dde,Ire,hde],Zle),mde=(e,t,r)=>{var n,i,a=Xp(e,t);if(a==null)return 0;var s=mu(e,t),o=vu(e,t);if(s==null||o==null)return 0;var c=Ht(e),u=ID(e),{maxBarSize:d}=a,f=Ir(d)?u:d,p,h;return c==="horizontal"?(p=Tl(e,"xAxis",s,r),h=Ol(e,"xAxis",s,r)):(p=Tl(e,"yAxis",o,r),h=Ol(e,"yAxis",o,r)),(n=(i=Rd(p,h,!0))!==null&&i!==void 0?i:f)!==null&&n!==void 0?n:0},R7=(e,t,r)=>{var n=Ht(e),i=mu(e,t),a=vu(e,t);if(!(i==null||a==null)){var s,o;return n==="horizontal"?(s=Tl(e,"xAxis",i,r),o=Ol(e,"xAxis",i,r)):(s=Tl(e,"yAxis",a,r),o=Ol(e,"yAxis",a,r)),Rd(s,o)}},vde=ge([pde,ID,Tre,LD,mde,R7,cde],nce),gde=(e,t,r)=>{var n=mu(e,t);if(n!=null)return Tl(e,"xAxis",n,r)},yde=(e,t,r)=>{var n=vu(e,t);if(n!=null)return Tl(e,"yAxis",n,r)},xde=(e,t,r)=>{var n=mu(e,t);if(n!=null)return Ol(e,"xAxis",n,r)},bde=(e,t,r)=>{var n=vu(e,t);if(n!=null)return Ol(e,"yAxis",n,r)},wde=ge([vde,Xp],ace),_de=ge([fde,Xp],ice),jde=ge([wn,M5,gde,yde,xde,bde,wde,Ht,Sre,R7,_de,Xp,ude],(e,t,r,n,i,a,s,o,c,u,d,f,p)=>{var{chartData:h,dataStartIndex:y,dataEndIndex:v}=c;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||u==null)){var{data:x}=f,g;if(x!=null&&x.length>0?g=x:g=h==null?void 0:h.slice(y,v+1),g!=null)return Xde({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:g,offset:e,cells:p,dataStartIndex:y})}}),Sde=["index"];function Jw(){return Jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jw.apply(null,arguments)}function Nde(e,t){if(e==null)return{};var r,n,i=kde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var M7=b.createContext(void 0),Ade=e=>{var t=b.useContext(M7);if(t!=null)return t.stackId;if(e!=null)return kX(e)},Ede=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Pde=e=>{var t=b.useContext(M7);if(t!=null){var{stackId:r}=t;return"url(#".concat(Ede(r,e),")")}},F7=e=>{var{index:t}=e,r=Nde(e,Sde),n=Pde(t);return b.createElement(Tn,Jw({className:"recharts-bar-stack-layer",clipPath:n},r))},Cde=["onMouseEnter","onMouseLeave","onClick"],Ode=["value","background","tooltipPosition"],Tde=["id"],Ide=["onMouseEnter","onClick","onMouseLeave"];function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(null,arguments)}function JP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(r),!0).forEach(function(n){Lde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lde(e,t,r){return(t=Dde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dde(e){var t=Rde(e,"string");return typeof t=="symbol"?t:t+""}function Rde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oy(e,t){if(e==null)return{};var r,n,i=Mde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Mde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Fde=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:Zd(r,t),payload:e}]},Bde=b.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,getPosition:du,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Zd(a,t),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return b.createElement(hS,{tooltipEntrySettings:d})});function $de(e){var t=Ve(Il),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=Oy(a,Cde),d=uS(s,n,a.id),f=dS(o),p=fS(c,n,a.id);if(!i||r==null)return null;var h=qc(i);return b.createElement(Ii,{zIndex:sce(i,ln.barBackground)},r.map((y,v)=>{var{value:x,background:g,tooltipPosition:_}=y,S=Oy(y,Ode);if(!g)return null;var j=d(y,v),A=f(y,v),N=p(y,v),D=pi(pi(pi(pi(pi({option:i,isActive:String(v)===t},S),{},{fill:"#eee"},g),h),Cp(u,y,v)),{},{onMouseEnter:j,onMouseLeave:A,onClick:N,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return b.createElement(Cy,Ao({key:"background-bar-".concat(v)},D))}))}function Ude(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return pi(pi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return b.createElement(i7,{value:t?i:void 0},r)}function zde(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=e,o=Ve(Il),c=Ve(Jj),u=r&&String(a)===o&&(c==null||s===c),d=u?r:t;return u?b.createElement(Ii,{zIndex:ln.activeBar},b.createElement(F7,{index:a},b.createElement(Cy,Ao({},n,{name:String(n.name)},i,{isActive:u,option:d,index:a,dataKey:s})))):b.createElement(Cy,Ao({},n,{name:String(n.name)},i,{isActive:u,option:d,index:a,dataKey:s}))}function qde(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return b.createElement(Cy,Ao({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:a}))}function Wde(e){var t,{data:r,props:n}=e,i=(t=Zi(n))!==null&&t!==void 0?t:{},{id:a}=i,s=Oy(i,Tde),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:p}=n,h=Oy(n,Ide),y=uS(d,c,a),v=dS(p),x=fS(f,c,a);return r?b.createElement(b.Fragment,null,r.map((g,_)=>b.createElement(F7,Ao({index:_,key:"rectangle-".concat(g==null?void 0:g.x,"-").concat(g==null?void 0:g.y,"-").concat(g==null?void 0:g.value,"-").concat(_),className:"recharts-bar-rectangle"},Cp(h,g,_),{onMouseEnter:y(g,_),onMouseLeave:v(g,_),onClick:x(g,_)}),u?b.createElement(zde,{shape:o,activeBar:u,baseProps:s,entry:g,index:_,dataKey:c}):b.createElement(qde,{shape:o,baseProps:s,entry:g,index:_,dataKey:c})))):null}function Hde(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,p=Mp(t,"recharts-bar-"),[h,y]=b.useState(!1),v=!h,x=b.useCallback(()=>{typeof u=="function"&&u(),y(!1)},[u]),g=b.useCallback(()=>{typeof d=="function"&&d(),y(!0)},[d]);return b.createElement(Ude,{showLabels:v,rects:n},b.createElement(Rp,{animationId:p,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:x,onAnimationStart:g,key:p},_=>{var S=_===1?n:n==null?void 0:n.map((j,A)=>{var N=f&&f[A];if(N)return pi(pi({},j),{},{x:kr(N.x,j.x,_),y:kr(N.y,j.y,_),width:kr(N.width,j.width,_),height:kr(N.height,j.height,_)});if(i==="horizontal"){var D=kr(0,j.height,_),E=kr(j.stackedBarStart,j.y,_);return pi(pi({},j),{},{y:E,height:D})}var C=kr(0,j.width,_),L=kr(j.stackedBarStart,j.x,_);return pi(pi({},j),{},{width:C,x:L})});return _>0&&(r.current=S??null),S==null?null:b.createElement(Tn,null,b.createElement(Wde,{props:t,data:S}))}),b.createElement(nS,{label:t.label}),t.children)}function Vde(e){var t=b.useRef(null);return b.createElement(Hde,{previousRectanglesRef:t,props:e})}var B7=0,Kde=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:rr(e,t)}};class Gde extends b.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(t||r==null)return null;var d=Ut("recharts-bar",i),f=u;return b.createElement(Tn,{className:d,id:u},o&&b.createElement("defs",null,b.createElement(P7,{clipPathId:f,xAxisId:a,yAxisId:s})),b.createElement(Tn,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},b.createElement($de,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),b.createElement(Vde,this.props)))}}var Yde={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:B7,xAxisId:0,yAxisId:0,zIndex:ln.bar};function Jde(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=yS(t,r),p=fu(),h=li(),y=lS(e.children,Yp),v=Ve(_=>jde(_,e.id,h,y));if(p!=="vertical"&&p!=="horizontal")return null;var x,g=v==null?void 0:v[0];return g==null||g.height==null||g.width==null?x=0:x=p==="vertical"?g.height/2:g.width/2,b.createElement(E7,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Kde,errorBarOffset:x},b.createElement(Gde,Ao({},e,{layout:p,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Xde(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:p,cells:h,parentViewBox:y,dataStartIndex:v}=e,x=t==="horizontal"?o:s,g=d?x.scale.domain():null,_=AX({numericAxis:x}),S=x.scale.map(_);return f.map((j,A)=>{var N,D,E,C,L,I;if(d){var O=d[A+v];if(O==null)return null;N=wX(O,g)}else N=rr(j,r),Array.isArray(N)||(N=[_,N]);var U=sde(n,B7)(N[1],A);if(t==="horizontal"){var V,ie=o.scale.map(N[0]),ne=o.scale.map(N[1]);if(ie==null||ne==null)return null;D=J4({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:j,index:A}),E=(V=ne??ie)!==null&&V!==void 0?V:void 0,C=i.size;var ee=ie-ne;if(L=Es(ee)?0:ee,I={x:D,y:p.top,width:C,height:p.height},Math.abs(U)>0&&Math.abs(L)<Math.abs(U)){var q=Cn(L||U)*(Math.abs(U)-Math.abs(L));E-=q,L+=q}}else{var Y=s.scale.map(N[0]),fe=s.scale.map(N[1]);if(Y==null||fe==null)return null;if(D=Y,E=J4({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:j,index:A}),C=fe-Y,L=i.size,I={x:p.left,y:E,width:p.width,height:L},Math.abs(U)>0&&Math.abs(C)<Math.abs(U)){var te=Cn(C||U)*(Math.abs(U)-Math.abs(C));C+=te}}if(D==null||E==null||C==null||L==null)return null;var R=pi(pi({},j),{},{stackedBarStart:S,x:D,y:E,width:C,height:L,value:d?N:N[1],payload:j,background:I,tooltipPosition:{x:D+C/2,y:E+L/2},parentViewBox:y},h&&h[A]&&h[A].props);return R}).filter(Boolean)}function Zde(e){var t=un(e,Yde),r=Ade(t.stackId),n=li();return b.createElement(pS,{id:t.id,type:"bar"},i=>b.createElement(b.Fragment,null,b.createElement(v7,{legendPayload:Fde(t)}),b.createElement(Bde,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),b.createElement(y7,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),b.createElement(Ii,{zIndex:t.zIndex},b.createElement(Jde,Ao({},t,{id:i})))))}var tu=b.memo(Zde,gx);tu.displayName="Bar";var Qde=["domain","range"],efe=["domain","range"];function XP(e,t){if(e==null)return{};var r,n,i=tfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZP(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function $7(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=XP(e,Qde),{domain:a,range:s}=t,o=XP(t,efe);return!ZP(r,a)||!ZP(n,s)?!1:gx(i,o)}var rfe=["type"],nfe=["dangerouslySetInnerHTML","ticks","scale"],ife=["id","scale"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xw.apply(null,arguments)}function QP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(r),!0).forEach(function(n){afe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function afe(e,t,r){return(t=sfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sfe(e){var t=ofe(e,"string");return typeof t=="symbol"?t:t+""}function ofe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zw(e,t){if(e==null)return{};var r,n,i=lfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cfe(e){var t=mr(),r=b.useRef(null),n=g8(),{type:i}=e,a=Zw(e,rfe),s=V0(n,"xAxis",i),o=b.useMemo(()=>{if(s!=null)return eC(eC({},a),{},{type:s})},[a,s]);return b.useLayoutEffect(()=>{o!=null&&(r.current===null?t(Rle(o)):r.current!==o&&t(Mle({prev:r.current,next:o})),r.current=o)},[o,t]),b.useLayoutEffect(()=>()=>{r.current&&(t(Fle(r.current)),r.current=null)},[t]),null}var ufe=e=>{var{xAxisId:t,className:r}=e,n=Ve(M5),i=li(),a="xAxis",s=Ve(g=>hR(g,a,t,i)),o=Ve(g=>cR(g,t)),c=Ve(g=>Ine(g,t)),u=Ve(g=>WD(g,t));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:p}=e,h=Zw(e,nfe),{id:y,scale:v}=u,x=Zw(u,ife);return b.createElement(gS,Xw({},h,x,{x:c.x,y:c.y,width:o.width,height:o.height,className:Ut("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:s,axisType:a}))},dfe={allowDataOverflow:Nn.allowDataOverflow,allowDecimals:Nn.allowDecimals,allowDuplicatedCategory:Nn.allowDuplicatedCategory,angle:Nn.angle,axisLine:mo.axisLine,height:Nn.height,hide:!1,includeHidden:Nn.includeHidden,interval:Nn.interval,label:!1,minTickGap:Nn.minTickGap,mirror:Nn.mirror,orientation:Nn.orientation,padding:Nn.padding,reversed:Nn.reversed,scale:Nn.scale,tick:Nn.tick,tickCount:Nn.tickCount,tickLine:mo.tickLine,tickSize:mo.tickSize,type:Nn.type,xAxisId:0},ffe=e=>{var t=un(e,dfe);return b.createElement(b.Fragment,null,b.createElement(cfe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),b.createElement(ufe,t))},ru=b.memo(ffe,$7);ru.displayName="XAxis";var hfe=["type"],pfe=["dangerouslySetInnerHTML","ticks","scale"],mfe=["id","scale"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qw.apply(null,arguments)}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){vfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vfe(e,t,r){return(t=gfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gfe(e){var t=yfe(e,"string");return typeof t=="symbol"?t:t+""}function yfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e_(e,t){if(e==null)return{};var r,n,i=xfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bfe(e){var t=mr(),r=b.useRef(null),n=g8(),{type:i}=e,a=e_(e,hfe),s=V0(n,"yAxis",i),o=b.useMemo(()=>{if(s!=null)return rC(rC({},a),{},{type:s})},[s,a]);return b.useLayoutEffect(()=>{o!=null&&(r.current===null?t(Ble(o)):r.current!==o&&t($le({prev:r.current,next:o})),r.current=o)},[o,t]),b.useLayoutEffect(()=>()=>{r.current&&(t(Ule(r.current)),r.current=null)},[t]),null}function wfe(e){var{yAxisId:t,className:r,width:n,label:i}=e,a=b.useRef(null),s=b.useRef(null),o=Ve(M5),c=li(),u=mr(),d="yAxis",f=Ve(N=>uR(N,t)),p=Ve(N=>Dne(N,t)),h=Ve(N=>hR(N,d,t,c)),y=Ve(N=>HD(N,t));if(b.useLayoutEffect(()=>{if(!(n!=="auto"||!f||rS(i)||b.isValidElement(i)||y==null)){var N=a.current;if(N){var D=N.getCalculatedWidth();Math.round(f.width)!==Math.round(D)&&u(zle({id:t,width:D}))}}},[h,f,u,i,t,n,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:x,scale:g}=e,_=e_(e,pfe),{id:S,scale:j}=y,A=e_(y,mfe);return b.createElement(gS,Qw({},_,A,{ref:a,labelRef:s,x:p.x,y:p.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Ut("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:h,axisType:d}))}var _fe={allowDataOverflow:kn.allowDataOverflow,allowDecimals:kn.allowDecimals,allowDuplicatedCategory:kn.allowDuplicatedCategory,angle:kn.angle,axisLine:mo.axisLine,hide:!1,includeHidden:kn.includeHidden,interval:kn.interval,label:!1,minTickGap:kn.minTickGap,mirror:kn.mirror,orientation:kn.orientation,padding:kn.padding,reversed:kn.reversed,scale:kn.scale,tick:kn.tick,tickCount:kn.tickCount,tickLine:mo.tickLine,tickSize:mo.tickSize,type:kn.type,width:kn.width,yAxisId:0},jfe=e=>{var t=un(e,_fe);return b.createElement(b.Fragment,null,b.createElement(bfe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),b.createElement(wfe,t))},nu=b.memo(jfe,$7);nu.displayName="YAxis";var Sfe=(e,t)=>t,bS=ge([Sfe,Ht,UD,Ln,CR,Mo,Xie,wn],iae),wS=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},U7=ja("mouseClick"),z7=Tp();z7.startListening({actionCreator:U7,effect:(e,t)=>{var r=e.payload,n=bS(t.getState(),wS(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Yne({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var t_=ja("mouseMove"),q7=Tp(),Ov=null;q7.startListening({actionCreator:t_,effect:(e,t)=>{var r=e.payload;Ov!==null&&cancelAnimationFrame(Ov);var n=wS(r);Ov=requestAnimationFrame(()=>{var i=t.getState(),a=Wj(i,i.tooltip.settings.shared);if(a==="axis"){var s=bS(i,n);(s==null?void 0:s.activeIndex)!=null?t.dispatch(wR({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(bR())}Ov=null})}});function Nfe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var nC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},W7=Ti({name:"rootProps",initialState:nC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:nC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),kfe=W7.reducer,{updateOptions:Afe}=W7.actions,Efe=null,Pfe={updatePolarOptions:(e,t)=>t.payload},H7=Ti({name:"polarOptions",initialState:Efe,reducers:Pfe}),{updatePolarOptions:Cfe}=H7.actions,Ofe=H7.reducer,V7=ja("keyDown"),K7=ja("focus"),_S=Tp();_S.startListening({actionCreator:V7,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Hj(i,lf(r),Hp(r),Kp(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Mo(r);if(a==="Enter"){var u=Sy(r,"axis","hover",String(i.index));t.dispatch(qw({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var d=Bne(r),f=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,h=o+p*f;if(!(c==null||h>=c.length||h<0)){var y=Sy(r,"axis","hover",String(h));t.dispatch(qw({active:!0,activeIndex:h.toString(),activeCoordinate:y}))}}}}}});_S.startListening({actionCreator:K7,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=Sy(r,"axis","hover",String(a));t.dispatch(qw({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var ha=ja("externalEvent"),G7=Tp(),Pb=new Map;G7.startListening({actionCreator:ha,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,a=Pb.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=t.getState(),c={activeCoordinate:Die(o),activeDataKey:Jj(o),activeIndex:Il(o),activeLabel:IR(o),activeTooltipIndex:Il(o),isTooltipActive:Rie(o)};r(c,n)}finally{Pb.delete(i)}});Pb.set(i,s)}}});var Tfe=ge([sf],e=>e.tooltipItemPayloads),Ife=ge([Tfe,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(a=>a.settings.graphicalItemId===r);if(n!=null){var{getPosition:i}=n;if(i!=null)return i(t)}}}),Y7=ja("touchMove"),J7=Tp();J7.startListening({actionCreator:Y7,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=Wj(n,n.tooltip.settings.shared);if(i==="axis"){var a=r.touches[0];if(a==null)return;var s=bS(n,wS({clientX:a.clientX,clientY:a.clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(wR({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(l8),f=(o=u.getAttribute(c8))!==null&&o!==void 0?o:void 0,p=of(n).find(v=>v.id===f);if(d==null||p==null||f==null)return;var{dataKey:h}=p,y=Ife(n,d,f);t.dispatch(xR({activeDataKey:h,activeIndex:d,activeCoordinate:y,activeGraphicalItemId:f}))}}}});var Lfe=CL({brush:oce,cartesianAxis:qle,chartData:Lae,errorBars:tue,graphicalItems:Joe,layout:vX,legend:xZ,options:Pae,polarAxis:foe,polarOptions:Ofe,referenceElements:dce,rootProps:kfe,tooltip:Jne,zIndex:yae}),Dfe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return UJ({reducer:Lfe,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([z7.middleware,q7.middleware,_S.middleware,G7.middleware,J7.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(HL({type:"raf"}))},devTools:{serialize:{replacer:Nfe},name:"recharts-".concat(r)}})};function X7(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=li(),a=b.useRef(null);if(i)return r;a.current==null&&(a.current=Dfe(t,n));var s=E5;return b.createElement(Lue,{context:s,store:a.current},r)}function Rfe(e){var{layout:t,margin:r}=e,n=mr(),i=li();return b.useEffect(()=>{i||(n(hX(t)),n(fX(r)))},[n,i,t,r]),null}var Z7=b.memo(Rfe,gx);function Q7(e){var t=mr();return b.useEffect(()=>{t(Afe(e))},[t,e]),null}function iC(e){var{zIndex:t,isPanorama:r}=e,n=b.useRef(null),i=mr();return b.useLayoutEffect(()=>(n.current&&i(vae({zIndex:t,element:n.current,isPanorama:r})),()=>{i(gae({zIndex:t,isPanorama:r}))}),[i,t,r]),b.createElement("g",{tabIndex:-1,ref:n})}function aC(e){var{children:t,isPanorama:r}=e,n=Ve(sae);if(!n||n.length===0)return t;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return b.createElement(b.Fragment,null,i.map(s=>b.createElement(iC,{key:s,zIndex:s,isPanorama:r})),t,a.map(s=>b.createElement(iC,{key:s,zIndex:s,isPanorama:r})))}var Mfe=["children"];function Ffe(e,t){if(e==null)return{};var r,n,i=Bfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Bfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ty.apply(null,arguments)}var $fe={width:"100%",height:"100%",display:"block"},Ufe=b.forwardRef((e,t)=>{var r=$5(),n=U5(),i=P8();if(!Cs(r)||!Cs(n))return null;var{children:a,otherAttributes:s,title:o,desc:c}=e,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),b.createElement(h5,Ty({},s,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:$fe,ref:t}),a)}),zfe=e=>{var{children:t}=e,r=Ve(T0);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return b.createElement(h5,{width:n,height:i,x:s,y:a},t)},sC=b.forwardRef((e,t)=>{var{children:r}=e,n=Ffe(e,Mfe),i=li();return i?b.createElement(zfe,null,b.createElement(aC,{isPanorama:!0},r)):b.createElement(Ufe,Ty({ref:t},n),b.createElement(aC,{isPanorama:!1},r))});function qfe(){var e=mr(),[t,r]=b.useState(null),n=Ve(IX);return b.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Rt(a)&&a!==n&&e(mX(a))}},[t,e,n]),r}function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wfe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(n){Hfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hfe(e,t,r){return(t=Vfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vfe(e){var t=Kfe(e,"string");return typeof t=="symbol"?t:t+""}function Kfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Al.apply(null,arguments)}var Gfe=()=>(qae(),null);function Iy(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Yfe=b.forwardRef((e,t)=>{var r,n,i=b.useRef(null),[a,s]=b.useState({containerWidth:Iy((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Iy((n=e.style)===null||n===void 0?void 0:n.height)}),o=b.useCallback((u,d)=>{s(f=>{var p=Math.round(u),h=Math.round(d);return f.containerWidth===p&&f.containerHeight===h?f:{containerWidth:p,containerHeight:h}})},[]),c=b.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var p=y=>{var v=y[0];if(v!=null){var{width:x,height:g}=v.contentRect;o(x,g)}},h=new ResizeObserver(p);h.observe(u),i.current=h}},[t,o]);return b.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[o]),b.createElement(b.Fragment,null,b.createElement(Lp,{width:a.containerWidth,height:a.containerHeight}),b.createElement("div",Al({ref:c},e)))}),Jfe=b.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,a]=b.useState({containerWidth:Iy(r),containerHeight:Iy(n)}),s=b.useCallback((c,u)=>{a(d=>{var f=Math.round(c),p=Math.round(u);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),o=b.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();s(u,d)}},[t,s]);return b.createElement(b.Fragment,null,b.createElement(Lp,{width:i.containerWidth,height:i.containerHeight}),b.createElement("div",Al({ref:o},e)))}),Xfe=b.forwardRef((e,t)=>{var{width:r,height:n}=e;return b.createElement(b.Fragment,null,b.createElement(Lp,{width:r,height:n}),b.createElement("div",Al({ref:t},e)))}),Zfe=b.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?b.createElement(Jfe,Al({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?b.createElement(Xfe,Al({},e,{width:r,height:n,ref:t})):b.createElement(b.Fragment,null,b.createElement(Lp,{width:r,height:n}),b.createElement("div",Al({ref:t},e)))});function Qfe(e){return e?Yfe:Zfe}var ehe=b.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:h,onTouchMove:y,onTouchStart:v,style:x,width:g,responsive:_,dispatchTouchEvents:S=!0}=e,j=b.useRef(null),A=mr(),[N,D]=b.useState(null),[E,C]=b.useState(null),L=qfe(),I=F5(),O=(I==null?void 0:I.width)>0?I.width:g,U=(I==null?void 0:I.height)>0?I.height:i,V=b.useCallback(Q=>{L(Q),typeof t=="function"&&t(Q),D(Q),C(Q),Q!=null&&(j.current=Q)},[L,t,D,C]),ie=b.useCallback(Q=>{A(U7(Q)),A(ha({handler:a,reactEvent:Q}))},[A,a]),ne=b.useCallback(Q=>{A(t_(Q)),A(ha({handler:u,reactEvent:Q}))},[A,u]),ee=b.useCallback(Q=>{A(bR()),A(ha({handler:d,reactEvent:Q}))},[A,d]),q=b.useCallback(Q=>{A(t_(Q)),A(ha({handler:f,reactEvent:Q}))},[A,f]),Y=b.useCallback(()=>{A(K7())},[A]),fe=b.useCallback(Q=>{A(V7(Q.key))},[A]),te=b.useCallback(Q=>{A(ha({handler:s,reactEvent:Q}))},[A,s]),R=b.useCallback(Q=>{A(ha({handler:o,reactEvent:Q}))},[A,o]),z=b.useCallback(Q=>{A(ha({handler:c,reactEvent:Q}))},[A,c]),G=b.useCallback(Q=>{A(ha({handler:p,reactEvent:Q}))},[A,p]),re=b.useCallback(Q=>{A(ha({handler:v,reactEvent:Q}))},[A,v]),ae=b.useCallback(Q=>{S&&A(Y7(Q)),A(ha({handler:y,reactEvent:Q}))},[A,S,y]),ce=b.useCallback(Q=>{A(ha({handler:h,reactEvent:Q}))},[A,h]),pe=Qfe(_);return b.createElement($R.Provider,{value:N},b.createElement(PI.Provider,{value:E},b.createElement(pe,{width:O??(x==null?void 0:x.width),height:U??(x==null?void 0:x.height),className:Ut("recharts-wrapper",n),style:Wfe({position:"relative",cursor:"default",width:O,height:U},x),onClick:ie,onContextMenu:te,onDoubleClick:R,onFocus:Y,onKeyDown:fe,onMouseDown:z,onMouseEnter:ne,onMouseLeave:ee,onMouseMove:q,onMouseUp:G,onTouchEnd:ce,onTouchMove:ae,onTouchStart:re,ref:V},b.createElement(Gfe,null),r)))}),the=["width","height","responsive","children","className","style","compact","title","desc"];function rhe(e,t){if(e==null)return{};var r,n,i=nhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eM=b.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:d}=e,f=rhe(e,the),p=Zi(f);return c?b.createElement(b.Fragment,null,b.createElement(Lp,{width:r,height:n}),b.createElement(sC,{otherAttributes:p,title:u,desc:d},a)):b.createElement(ehe,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(sC,{otherAttributes:p,title:u,desc:d,ref:t},b.createElement(hce,null,a)))});function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r_.apply(null,arguments)}var ihe={top:5,right:5,bottom:5,left:5},ahe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:ihe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},tM=b.forwardRef(function(t,r){var n,i=un(t.categoricalChartProps,ahe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return b.createElement(X7,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:a},b.createElement(_7,{chartData:u.data}),b.createElement(Z7,{layout:i.layout,margin:i.margin}),b.createElement(Q7,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),b.createElement(eM,r_({},i,{ref:r})))}),she=["axis"],ohe=b.forwardRef((e,t)=>b.createElement(tM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:she,tooltipPayloadSearcher:tS,categoricalChartProps:e,ref:t})),lhe=["axis","item"],Zp=b.forwardRef((e,t)=>b.createElement(tM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lhe,tooltipPayloadSearcher:tS,categoricalChartProps:e,ref:t}));function che(e){var t=mr();return b.useEffect(()=>{t(Cfe(e))},[t,e]),null}var uhe=["layout"];function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n_.apply(null,arguments)}function dhe(e,t){if(e==null)return{};var r,n,i=fhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hhe={top:5,right:5,bottom:5,left:5},rM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:hhe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},phe=b.forwardRef(function(t,r){var n,i=un(t.categoricalChartProps,rM),{layout:a}=i,s=dhe(i,uhe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=t,f={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return b.createElement(X7,{preloadedState:{options:f},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:o},b.createElement(_7,{chartData:i.data}),b.createElement(Z7,{layout:a,margin:i.margin}),b.createElement(Q7,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),b.createElement(che,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),b.createElement(eM,n_({},s,{ref:r})))});function lC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(r),!0).forEach(function(n){mhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mhe(e,t,r){return(t=vhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vhe(e){var t=ghe(e,"string");return typeof t=="symbol"?t:t+""}function ghe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yhe=["item"],xhe=cC(cC({},rM),{},{layout:"centric",startAngle:0,endAngle:360}),bhe=b.forwardRef((e,t)=>{var r=un(e,xhe);return b.createElement(phe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:yhe,tooltipPayloadSearcher:tS,categoricalChartProps:r,ref:t})});const uC=["#58B692","#348D74","#1A382E","#11241E","#58B692","#348D74"];function whe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState("revenue"),[i,a]=b.useState(!1),[s,o]=b.useState(null),[c,u]=b.useState(""),[d,f]=b.useState(""),[p,h]=b.useState(""),y=t||[],v=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="accountant",x=[{id:"revenue",label:"Revenue"},{id:"payments",label:"Payments"},{id:"outstanding",label:"Outstanding & Aging"},{id:"subscriptions",label:"Subscriptions"},{id:"events",label:"Events"},{id:"clients",label:"Client Revenue"},{id:"outlets",label:"Outlet Performance"}];function g(_,S){const j=new Blob([_],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a"),N=URL.createObjectURL(j);A.setAttribute("href",N),A.setAttribute("download",S),A.style.visibility="hidden",document.body.appendChild(A),A.click(),document.body.removeChild(A)}return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-brand-primary",children:"Reports"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Production-ready reporting and analytics"})]}),l.jsx(we,{children:l.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:x.map(_=>l.jsx("button",{onClick:()=>n(_.id),className:`px-4 py-2 rounded-md font-medium transition-colors ${r===_.id?"bg-brand-primary text-white":"bg-brand-bg text-brand-text hover:bg-brand-border/50"}`,children:_.label},_.id))})}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Filters"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(He,{label:"From Date",type:"date",value:c,onChange:_=>u(_.target.value)}),l.jsx(He,{label:"To Date",type:"date",value:d,onChange:_=>f(_.target.value)}),v&&l.jsxs(pt,{label:"Outlet",value:p,onChange:_=>h(_.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),y.map(_=>l.jsx("option",{value:_.id,children:_.name},_.id))]}),(c||d||p)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Pe,{variant:"outline",onClick:()=>{u(""),f(""),h("")},children:"Clear Filters"})})]})]}),s&&l.jsx(ht,{variant:"error",children:s}),r==="revenue"&&l.jsx(_he,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="payments"&&l.jsx(jhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="outstanding"&&l.jsx(She,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="subscriptions"&&l.jsx(Nhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="events"&&l.jsx(khe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="clients"&&l.jsx(Ahe,{userId:(e==null?void 0:e.id)||"",outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="outlets"&&l.jsx(Ehe,{userId:(e==null?void 0:e.id)||"",outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g})]})}function _he({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{h()},[e,t,r,n,f]);async function h(){try{i(!0),a(null);const g={date_from:t,date_to:r,outlet_id:n};f&&(g.invoice_type=f);const[_,S]=await Promise.all([_I(e,g),nG(e,{date_from:t,date_to:r,outlet_id:n})]);c(_),d(S)}catch(g){a(g instanceof Error?g.message:"Failed to load report")}finally{i(!1)}}const y=o.reduce((g,_)=>g+_.total_invoiced,0),v=o.reduce((g,_)=>g+_.total_collected,0),x=o.reduce((g,_)=>g+_.outstanding,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Invoiced"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(y)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Collected"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(v)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Ie(x)})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(pt,{label:"Invoice Type",value:f,onChange:g=>p(g.target.value),className:"max-w-xs",children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),l.jsxs(Pe,{onClick:()=>s(uG(o),"revenue-report.csv"),disabled:o.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),u&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Revenue Trend"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(ohe,{data:u.trendData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:g=>g!==void 0?Ie(g):"-"}),l.jsx(kw,{}),l.jsx(Gw,{type:"monotone",dataKey:"invoiced",stroke:"#8884d8",name:"Invoiced"}),l.jsx(Gw,{type:"monotone",dataKey:"collected",stroke:"#82ca9d",name:"Collected"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outlet-wise Revenue"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Zp,{data:u.outletData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:g=>g!==void 0?Ie(g):"-"}),l.jsx(kw,{}),l.jsx(tu,{dataKey:"invoiced",fill:"#8884d8",name:"Invoiced"}),l.jsx(tu,{dataKey:"collected",fill:"#82ca9d",name:"Collected"})]})})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Revenue Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No data found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Count"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoiced"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"})]})}),l.jsx("tbody",{children:o.map((g,_)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:g.report_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:g.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:g.invoice_type}),l.jsx("td",{className:"text-right py-2 px-2",children:g.invoice_count}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(g.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(g.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(g.outstanding)})]},_))})]})})]})]})}function jhe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{h()},[e,t,r,n,f]);async function h(){try{i(!0),a(null);const x={date_from:t,date_to:r,outlet_id:n};f&&(x.payment_method=f);const[g,_]=await Promise.all([jI(e,x),iG(e,{date_from:t,date_to:r,outlet_id:n})]);c(g),d(_)}catch(x){a(x instanceof Error?x.message:"Failed to load report")}finally{i(!1)}}const y=o.reduce((x,g)=>x+g.total_amount,0),v=o.reduce((x,g)=>x+g.payment_count,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Payments"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(y)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment Count"}),l.jsx("p",{className:"text-2xl font-bold",children:v})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(pt,{label:"Payment Method",value:f,onChange:x=>p(x.target.value),className:"max-w-xs",children:[l.jsx("option",{value:"",children:"All Methods"}),l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"upi",children:"UPI"}),l.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),l.jsx("option",{value:"card",children:"Card"}),l.jsx("option",{value:"cheque",children:"Cheque"})]}),l.jsxs(Pe,{onClick:()=>s(dG(o),"payments-report.csv"),disabled:o.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),u&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Payment Method Split"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(bhe,{children:[l.jsx(x7,{data:u.methodData,cx:"50%",cy:"50%",labelLine:!1,label:x=>`${x.name}: ${Ie(x.value)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:u.methodData.map((x,g)=>l.jsx(Yp,{fill:uC[g%uC.length]},`cell-${g}`))}),l.jsx(Zc,{formatter:x=>x!==void 0?Ie(x):"-"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Daily Collections"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Zp,{data:u.dailyData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:x=>x!==void 0?Ie(x):"-"}),l.jsx(tu,{dataKey:"value",fill:"#82ca9d",name:"Collections"})]})})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Payment Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No data found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Method"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Count"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Amount"})]})}),l.jsx("tbody",{children:o.map((x,g)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:x.report_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:x.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:x.payment_method.replace("_"," ")}),l.jsx("td",{className:"text-right py-2 px-2",children:x.payment_count}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600 font-semibold",children:Ie(x.total_amount)})]},g))})]})})]})]})}function She({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{h()},[e,t,r,n,f]);async function h(){try{i(!0),a(null);const v={date_from:t,date_to:r,outlet_id:n};f&&(v.aging_bucket=f);const[x,g]=await Promise.all([SI(e,v),aG(e,{date_from:t,date_to:r,outlet_id:n})]);c(x),d(g)}catch(v){a(v instanceof Error?v.message:"Failed to load report")}finally{i(!1)}}const y=o.reduce((v,x)=>v+x.balance_due,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Ie(y)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"0-30 Days"}),l.jsx("p",{className:"text-xl font-bold",children:o.filter(v=>v.aging_bucket==="0-30").length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"31-60 Days"}),l.jsx("p",{className:"text-xl font-bold",children:o.filter(v=>v.aging_bucket==="31-60").length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"90+ Days"}),l.jsx("p",{className:"text-xl font-bold text-red-600",children:o.filter(v=>v.aging_bucket==="90+").length})]})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(pt,{label:"Aging Bucket",value:f,onChange:v=>p(v.target.value),className:"max-w-xs",children:[l.jsx("option",{value:"",children:"All Buckets"}),l.jsx("option",{value:"0-30",children:"0-30 Days"}),l.jsx("option",{value:"31-60",children:"31-60 Days"}),l.jsx("option",{value:"61-90",children:"61-90 Days"}),l.jsx("option",{value:"90+",children:"90+ Days"})]}),l.jsxs(Pe,{onClick:()=>s(fG(o),"outstanding-aging-report.csv"),disabled:o.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),u&&l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Aging Analysis"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Zp,{data:u.bucketData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:v=>v!==void 0?Ie(v):"-"}),l.jsx(tu,{dataKey:"value",fill:"#FF8042",name:"Outstanding"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outstanding Invoices"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No outstanding invoices"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice #"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Client"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Paid"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Balance"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Days"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Bucket"})]})}),l.jsx("tbody",{children:o.map(v=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm font-medium",children:v.invoice_number}),l.jsx("td",{className:"py-2 px-2 text-sm",children:v.invoice_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:v.client_name}),l.jsx("td",{className:"py-2 px-2 text-sm",children:v.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.grand_total)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(v.amount_paid)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-orange-600",children:Ie(v.balance_due)}),l.jsx("td",{className:"text-center py-2 px-2",children:v.days_outstanding}),l.jsx("td",{className:"text-center py-2 px-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${v.aging_bucket==="90+"?"bg-red-100 text-red-800":v.aging_bucket==="61-90"?"bg-orange-100 text-orange-800":v.aging_bucket==="31-60"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:v.aging_bucket})})]},v.invoice_id))})]})})]})]})}function Nhe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null);b.useEffect(()=>{f()},[e,t,r,n]);async function f(){try{i(!0),a(null);const y={date_from:t,date_to:r,outlet_id:n},[v,x]=await Promise.all([NI(e,y),sG(e,y)]);c(v),d(x)}catch(y){a(y instanceof Error?y.message:"Failed to load report")}finally{i(!1)}}const p=o.reduce((y,v)=>y+v.mrr,0),h=o.reduce((y,v)=>y+v.annual_value,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Subscriptions"}),l.jsx("p",{className:"text-2xl font-bold",children:o.length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Recurring Revenue (MRR)"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(p)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Annual Value"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(h)})]})]}),l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:()=>s(hG(o),"subscriptions-report.csv"),disabled:o.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),u&&l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outlet-wise MRR"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Zp,{data:u.outletData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:y=>y!==void 0?Ie(y):"-"}),l.jsx(tu,{dataKey:"value",fill:"#8884d8",name:"MRR"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Subscription Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No active subscriptions"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Client"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Cycle"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Qty"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Price/Unit"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Cycle Amount"}),l.jsx("th",{className:"text-right py-2 px-2",children:"MRR"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Next Billing"})]})}),l.jsx("tbody",{children:o.map(y=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:y.client_name}),l.jsx("td",{className:"py-2 px-2 text-sm",children:y.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:y.billing_cycle}),l.jsx("td",{className:"text-right py-2 px-2",children:y.quantity}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(y.price_per_unit)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(y.cycle_amount)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-green-600",children:Ie(y.mrr)}),l.jsx("td",{className:"py-2 px-2 text-sm",children:y.next_billing_date})]},y.subscription_id))})]})})]})]})}function khe({userId:e,dateFrom:t,dateTo:r,outletId:n,setLoading:i,setError:a,downloadCSV:s}){const[o,c]=b.useState([]),[u,d]=b.useState(null);b.useEffect(()=>{f()},[e,t,r,n]);async function f(){try{i(!0),a(null);const v={date_from:t,date_to:r,outlet_id:n},[x,g]=await Promise.all([kI(e,v),oG(e,v)]);c(x),d(g)}catch(v){a(v instanceof Error?v.message:"Failed to load report")}finally{i(!1)}}const p=o.reduce((v,x)=>v+x.total_invoiced,0),h=o.reduce((v,x)=>v+x.total_collected,0),y=o.reduce((v,x)=>v+x.invoice_count,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Invoices"}),l.jsx("p",{className:"text-2xl font-bold",children:y})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Revenue"}),l.jsx("p",{className:"text-2xl font-bold",children:Ie(p)})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Collected"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ie(h)})]})]}),l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:()=>s(pG(o),"events-revenue-report.csv"),disabled:o.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),u&&l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Event Revenue by Outlet"}),l.jsx(Gc,{width:"100%",height:300,children:l.jsxs(Zp,{data:u.outletData,children:[l.jsx(eu,{strokeDasharray:"3 3"}),l.jsx(ru,{dataKey:"name"}),l.jsx(nu,{}),l.jsx(Zc,{formatter:v=>v!==void 0?Ie(v):"-"}),l.jsx(tu,{dataKey:"value",fill:"#FFBB28",name:"Revenue"})]})})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Event Revenue Details"}),o.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No event revenue data"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Events"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Revenue"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"})]})}),l.jsx("tbody",{children:o.map((v,x)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:v.report_date}),l.jsx("td",{className:"py-2 px-2 text-sm",children:v.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:v.invoice_count}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(v.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(v.outstanding)})]},x))})]})})]})]})}function Ahe({userId:e,outletId:t,setLoading:r,setError:n,downloadCSV:i}){const[a,s]=b.useState([]);b.useEffect(()=>{o()},[e,t]);async function o(){try{r(!0),n(null);const u=await lG(e,{outlet_id:t});s(u)}catch(u){n(u instanceof Error?u.message:"Failed to load report")}finally{r(!1)}}const c=a.slice(0,10);return l.jsxs(l.Fragment,{children:[l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:()=>i(mG(a),"client-revenue-report.csv"),disabled:a.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Top 10 Clients by Revenue"}),c.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No client data"}):l.jsx("div",{className:"space-y-2",children:c.map((u,d)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-2xl font-bold text-muted-foreground",children:["#",d+1]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:u.client_name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.outlet_name,"  ",u.client_type]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-lg font-bold text-green-600",children:Ie(u.total_invoiced)}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.invoice_count," invoices"]})]})]},u.client_id))})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"All Clients"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No client data"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Client"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoices"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Subscription"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Event"})]})}),l.jsx("tbody",{children:a.map(u=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm font-medium",children:u.client_name}),l.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:u.client_type}),l.jsx("td",{className:"py-2 px-2 text-sm",children:u.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:u.invoice_count}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(u.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(u.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(u.outstanding)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(u.subscription_revenue)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(u.event_revenue)})]},u.client_id))})]})})]})]})}function Ehe({userId:e,outletId:t,setLoading:r,setError:n,downloadCSV:i}){const[a,s]=b.useState([]);b.useEffect(()=>{o()},[e,t]);async function o(){try{r(!0),n(null);const c=await cG(e,{outlet_id:t});s(c)}catch(c){n(c instanceof Error?c.message:"Failed to load report")}finally{r(!1)}}return l.jsxs(l.Fragment,{children:[l.jsx(we,{children:l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:()=>i(vG(a),"outlet-performance-report.csv"),disabled:a.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Outlet Performance Comparison"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No outlet data"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Clients"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoices"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Invoiced"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collected"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Collection %"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Subs"}),l.jsx("th",{className:"text-right py-2 px-2",children:"MRR"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Events"})]})}),l.jsx("tbody",{children:a.map(c=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 font-medium",children:l.jsxs("div",{children:[l.jsx("p",{children:c.outlet_name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.outlet_code,"  ",c.city]})]})}),l.jsx("td",{className:"text-right py-2 px-2",children:c.active_clients}),l.jsx("td",{className:"text-right py-2 px-2",children:c.total_invoices}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(c.total_invoiced)}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600",children:Ie(c.total_collected)}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:Ie(c.outstanding)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[c.collection_rate_percent,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:c.active_subscriptions}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-green-600",children:Ie(c.mrr)}),l.jsx("td",{className:"text-right py-2 px-2",children:c.completed_events})]},c.outlet_id))})]})})]})]})}async function jS(e){const{data:t}=await be.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}function SS(e,t,r){if(t.role==="manager"&&t.outletIds)if(t.outletIds.length>0)e=e.in("outlet_id",t.outletIds);else return null;return r.outlet_id&&["admin","accountant"].includes(t.role)&&(e=e.eq("outlet_id",r.outlet_id)),e}async function nM(e,t){const r=await jS(e);let n=be.from("gst_working_domestic").select("*").order("invoice_date",{ascending:!1});if(n=SS(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Phe(e,t){const r=await nM(e,t);return r.length===0?null:{outlet_id:t.outlet_id||"all",total_taxable_value:r.reduce((n,i)=>n+i.taxable_value,0),total_igst:r.reduce((n,i)=>n+i.igst,0),total_cgst:r.reduce((n,i)=>n+i.cgst,0),total_sgst:r.reduce((n,i)=>n+i.sgst,0),grand_total:r.reduce((n,i)=>n+i.total,0)}}async function iM(e,t){const r=await jS(e);let n=be.from("gst_working_sez").select("*").order("invoice_date",{ascending:!1});if(n=SS(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Che(e,t){const r=await iM(e,t);return r.length===0?null:{outlet_id:t.outlet_id||"all",total_taxable_value:r.reduce((n,i)=>n+i.taxable_value,0),total_igst:r.reduce((n,i)=>n+i.igst,0),total_cgst:r.reduce((n,i)=>n+i.cgst,0),total_sgst:r.reduce((n,i)=>n+i.sgst,0),grand_total:r.reduce((n,i)=>n+i.total,0)}}async function aM(e,t){const r=await jS(e);let n=be.from("gst_working_export").select("*").order("invoice_date",{ascending:!1});if(n=SS(n,r,t),n===null)return[];t.date_from&&(n=n.gte("invoice_date",t.date_from)),t.date_to&&(n=n.lte("invoice_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function Ohe(e,t){const r=await aM(e,t);return r.length===0?null:{outlet_id:t.outlet_id||"all",total_taxable_value:r.reduce((n,i)=>n+i.taxable_value,0),total_igst:r.reduce((n,i)=>n+i.igst,0),total_cgst:r.reduce((n,i)=>n+i.cgst,0),total_sgst:r.reduce((n,i)=>n+i.sgst,0),grand_total:r.reduce((n,i)=>n+i.total,0)}}function The(e,t){const r=["Invoice Date","Invoice Number","Party Name","GST NUMBER","HSN/SAC CODE","As per your Invoice","Taxable Value","RATE","IGST","CGST","SGST","TOTAL"],n=e.map(i=>[i.invoice_date,i.invoice_number,`"${i.party_name.replace(/"/g,'""')}"`,i.gst_number,i.hsn_sac_code,i.as_per_your_invoice.toFixed(2),i.taxable_value.toFixed(2),`${i.rate}%`,i.igst.toFixed(2),i.cgst.toFixed(2),i.sgst.toFixed(2),i.total.toFixed(2)]);return t&&n.push(["","","Total","","","",t.total_taxable_value.toFixed(2),"",t.total_igst.toFixed(2),t.total_cgst.toFixed(2),t.total_sgst.toFixed(2),t.grand_total.toFixed(2)]),[r.join(","),...n.map(i=>i.join(","))].join(`
`)}function Ihe(e,t){const r=["Invoice Date","Invoice Number","Party Name","GST NUMBER","HSN CODE","As per your Invoice","Taxable Value","RATE","IGST","CGST","SGST","TOTAL"],n=e.map(i=>[i.invoice_date,i.invoice_number,`"${i.party_name.replace(/"/g,'""')}"`,i.gst_number,i.hsn_sac_code,i.as_per_your_invoice.toFixed(2),i.taxable_value.toFixed(2),`${i.rate}%`,i.igst.toFixed(2),i.cgst.toFixed(2),i.sgst.toFixed(2),i.total.toFixed(2)]);return t&&n.push(["","","Total","","","",t.total_taxable_value.toFixed(2),"",t.total_igst.toFixed(2),t.total_cgst.toFixed(2),t.total_sgst.toFixed(2),t.grand_total.toFixed(2)]),[r.join(","),...n.map(i=>i.join(","))].join(`
`)}function Lhe(e,t){const r=["Invoice Date","Invoice Number","Party Name","GST NUMBER","HSN CODE","As per your Invoice","Taxable Value","RATE","IGST","CGST","SGST","TOTAL","Currency"],n=e.map(i=>[i.invoice_date,i.invoice_number,`"${i.party_name.replace(/"/g,'""')}"`,i.gst_number,i.hsn_sac_code,i.as_per_your_invoice.toFixed(2),i.taxable_value.toFixed(2),`${i.rate}%`,i.igst.toFixed(2),i.cgst.toFixed(2),i.sgst.toFixed(2),i.total.toFixed(2),i.currency]);return t&&n.push(["","","Total","","","",t.total_taxable_value.toFixed(2),"",t.total_igst.toFixed(2),t.total_cgst.toFixed(2),t.total_sgst.toFixed(2),t.grand_total.toFixed(2),""]),[r.join(","),...n.map(i=>i.join(","))].join(`
`)}function Dhe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState("domestic"),[i,a]=b.useState(!1),[s,o]=b.useState(null),[c,u]=b.useState(""),[d,f]=b.useState(""),[p,h]=b.useState(""),y=t||[],v=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="accountant",x=[{id:"domestic",label:"Domestic"},{id:"sez",label:"SEZ"},{id:"export",label:"Export"}];function g(_,S){const j=new Blob([_],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a"),N=URL.createObjectURL(j);A.setAttribute("href",N),A.setAttribute("download",S),A.style.visibility="hidden",document.body.appendChild(A),A.click(),document.body.removeChild(A)}return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Nq,{className:"w-8 h-8 text-brand-primary"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-brand-text",children:"GST Working Reports"}),l.jsx("p",{className:"text-sm text-brand-text/60",children:"Download GST reports matching accountant's Excel format"})]})]}),s&&l.jsx(ht,{variant:"error",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:s}),l.jsx("button",{onClick:()=>o(null),className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"Dismiss"})]})}),l.jsx("div",{className:"border-b border-brand-border",children:l.jsx("nav",{className:"flex gap-2",children:x.map(_=>l.jsx("button",{onClick:()=>n(_.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${r===_.id?"border-brand-primary text-brand-primary":"border-transparent text-brand-text/60 hover:text-brand-text"}`,children:_.label},_.id))})}),l.jsx(we,{className:"p-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(He,{type:"date",label:"From Date",value:c,onChange:_=>u(_.target.value)}),l.jsx(He,{type:"date",label:"To Date",value:d,onChange:_=>f(_.target.value)}),v&&l.jsxs(pt,{label:"Outlet",value:p,onChange:_=>h(_.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),y.map(_=>l.jsx("option",{value:_.id,children:_.name},_.id))]})]})}),r==="domestic"&&l.jsx(Rhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="sez"&&l.jsx(Mhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g}),r==="export"&&l.jsx(Fhe,{userId:(e==null?void 0:e.id)||"",dateFrom:c,dateTo:d,outletId:p,loading:i,setLoading:a,setError:o,downloadCSV:g})]})}function Rhe({userId:e,dateFrom:t,dateTo:r,outletId:n,loading:i,setLoading:a,setError:s,downloadCSV:o}){const[c,u]=b.useState([]),[d,f]=b.useState(null),p={date_from:t||void 0,date_to:r||void 0,outlet_id:n||void 0};b.useEffect(()=>{h()},[t,r,n]);async function h(){if(e){a(!0),s(null);try{const[v,x]=await Promise.all([nM(e,p),Phe(e,p)]);u(v),f(x)}catch(v){s(v.message||"Failed to load domestic GST report")}finally{a(!1)}}}function y(){const v=The(c,d),x=new Date().toISOString().split("T")[0];o(v,`gst_working_domestic_${x}.csv`)}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:y,disabled:i||c.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Download CSV"]})}),l.jsxs(we,{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Domestic GST Working"}),i?l.jsx("p",{className:"text-center py-8",children:"Loading..."}):c.length===0?l.jsx("p",{className:"text-center text-brand-text/60 py-8",children:'No domestic GST data found. Ensure clients have GST Type set to "Domestic".'}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b bg-brand-surface",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Number"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Party Name"}),l.jsx("th",{className:"text-left py-2 px-2",children:"GST NUMBER"}),l.jsx("th",{className:"text-left py-2 px-2",children:"HSN/SAC CODE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"As per your Invoice"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Taxable Value"}),l.jsx("th",{className:"text-right py-2 px-2",children:"RATE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"IGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"CGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"SGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"TOTAL"})]})}),l.jsxs("tbody",{children:[c.map(v=>l.jsxs("tr",{className:"border-b hover:bg-brand-surface/50",children:[l.jsx("td",{className:"py-2 px-2",children:v.invoice_date}),l.jsx("td",{className:"py-2 px-2 font-medium",children:v.invoice_number}),l.jsx("td",{className:"py-2 px-2",children:v.party_name}),l.jsx("td",{className:"py-2 px-2",children:v.gst_number||"-"}),l.jsx("td",{className:"py-2 px-2",children:v.hsn_sac_code||"-"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.as_per_your_invoice)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.taxable_value)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[v.rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.sgst)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(v.total)})]},v.invoice_id)),d&&l.jsxs("tr",{className:"bg-brand-primary/10 font-semibold",children:[l.jsx("td",{colSpan:6,className:"py-2 px-2 text-right",children:"Total"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_taxable_value)}),l.jsx("td",{className:"py-2 px-2"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_sgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.grand_total)})]})]})]})})]})]})}function Mhe({userId:e,dateFrom:t,dateTo:r,outletId:n,loading:i,setLoading:a,setError:s,downloadCSV:o}){const[c,u]=b.useState([]),[d,f]=b.useState(null),p={date_from:t||void 0,date_to:r||void 0,outlet_id:n||void 0};b.useEffect(()=>{h()},[t,r,n]);async function h(){if(e){a(!0),s(null);try{const[v,x]=await Promise.all([iM(e,p),Che(e,p)]);u(v),f(x)}catch(v){s(v.message||"Failed to load SEZ GST report")}finally{a(!1)}}}function y(){const v=Ihe(c,d),x=new Date().toISOString().split("T")[0];o(v,`gst_working_sez_${x}.csv`)}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:y,disabled:i||c.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Download CSV"]})}),l.jsxs(we,{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SEZ GST Working"}),i?l.jsx("p",{className:"text-center py-8",children:"Loading..."}):c.length===0?l.jsx("p",{className:"text-center text-brand-text/60 py-8",children:'No SEZ GST data found. Ensure clients have GST Type set to "SEZ".'}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b bg-brand-surface",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Number"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Party Name"}),l.jsx("th",{className:"text-left py-2 px-2",children:"GST NUMBER"}),l.jsx("th",{className:"text-left py-2 px-2",children:"HSN CODE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"As per your Invoice"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Taxable Value"}),l.jsx("th",{className:"text-right py-2 px-2",children:"RATE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"IGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"CGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"SGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"TOTAL"})]})}),l.jsxs("tbody",{children:[c.map(v=>l.jsxs("tr",{className:"border-b hover:bg-brand-surface/50",children:[l.jsx("td",{className:"py-2 px-2",children:v.invoice_date}),l.jsx("td",{className:"py-2 px-2 font-medium",children:v.invoice_number}),l.jsx("td",{className:"py-2 px-2",children:v.party_name}),l.jsx("td",{className:"py-2 px-2",children:v.gst_number||"-"}),l.jsx("td",{className:"py-2 px-2",children:v.hsn_sac_code||"-"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.as_per_your_invoice)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.taxable_value)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[v.rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.sgst)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(v.total)})]},v.invoice_id)),d&&l.jsxs("tr",{className:"bg-brand-primary/10 font-semibold",children:[l.jsx("td",{colSpan:6,className:"py-2 px-2 text-right",children:"Total"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_taxable_value)}),l.jsx("td",{className:"py-2 px-2"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_sgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.grand_total)})]})]})]})})]})]})}function Fhe({userId:e,dateFrom:t,dateTo:r,outletId:n,loading:i,setLoading:a,setError:s,downloadCSV:o}){const[c,u]=b.useState([]),[d,f]=b.useState(null),p={date_from:t||void 0,date_to:r||void 0,outlet_id:n||void 0};b.useEffect(()=>{h()},[t,r,n]);async function h(){if(e){a(!0),s(null);try{const[v,x]=await Promise.all([aM(e,p),Ohe(e,p)]);u(v),f(x)}catch(v){s(v.message||"Failed to load export GST report")}finally{a(!1)}}}function y(){const v=Lhe(c,d),x=new Date().toISOString().split("T")[0];o(v,`gst_working_export_${x}.csv`)}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(Pe,{onClick:y,disabled:i||c.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Download CSV"]})}),l.jsxs(we,{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export GST Working"}),i?l.jsx("p",{className:"text-center py-8",children:"Loading..."}):c.length===0?l.jsx("p",{className:"text-center text-brand-text/60 py-8",children:'No export GST data found. Ensure clients have GST Type set to "Export".'}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b bg-brand-surface",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Invoice Number"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Party Name"}),l.jsx("th",{className:"text-left py-2 px-2",children:"GST NUMBER"}),l.jsx("th",{className:"text-left py-2 px-2",children:"HSN CODE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"As per your Invoice"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Taxable Value"}),l.jsx("th",{className:"text-right py-2 px-2",children:"RATE"}),l.jsx("th",{className:"text-right py-2 px-2",children:"IGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"CGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"SGST"}),l.jsx("th",{className:"text-right py-2 px-2",children:"TOTAL"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Currency"})]})}),l.jsxs("tbody",{children:[c.map(v=>l.jsxs("tr",{className:"border-b hover:bg-brand-surface/50",children:[l.jsx("td",{className:"py-2 px-2",children:v.invoice_date}),l.jsx("td",{className:"py-2 px-2 font-medium",children:v.invoice_number}),l.jsx("td",{className:"py-2 px-2",children:v.party_name}),l.jsx("td",{className:"py-2 px-2",children:v.gst_number||"-"}),l.jsx("td",{className:"py-2 px-2",children:v.hsn_sac_code||"-"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.as_per_your_invoice)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.taxable_value)}),l.jsxs("td",{className:"text-right py-2 px-2",children:[v.rate,"%"]}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(v.sgst)}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:Ie(v.total)}),l.jsx("td",{className:"py-2 px-2",children:v.currency})]},v.invoice_id)),d&&l.jsxs("tr",{className:"bg-brand-primary/10 font-semibold",children:[l.jsx("td",{colSpan:6,className:"py-2 px-2 text-right",children:"Total"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_taxable_value)}),l.jsx("td",{className:"py-2 px-2"}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_igst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_cgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.total_sgst)}),l.jsx("td",{className:"text-right py-2 px-2",children:Ie(d.grand_total)}),l.jsx("td",{className:"py-2 px-2"})]})]})]})})]})]})}async function Qp(e){const{data:t}=await be.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");return t.role}async function Bhe(e,t={}){let r=be.from("inventory_movements_with_details").select("*").order("created_at",{ascending:!1});t.outlet_id&&(r=r.eq("outlet_id",t.outlet_id)),t.inventory_item_id&&(r=r.eq("inventory_item_id",t.inventory_item_id)),t.movement_type&&(r=r.eq("movement_type",t.movement_type)),t.reference_type&&(r=r.eq("reference_type",t.reference_type)),t.reference_id&&(r=r.eq("reference_id",t.reference_id)),t.date_from&&(r=r.gte("created_at",t.date_from)),t.date_to&&(r=r.lte("created_at",t.date_to));const{data:n,error:i}=await r;if(i)throw new Error(i.message);return n||[]}async function $he(e,t){if(await Qp(e)==="accountant")throw new Error("Accountants cannot create stock movements");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");const{data:n,error:i}=await be.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"stock_in",quantity:t.quantity,reference_type:"manual",reference_id:null,notes:t.notes||null,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function Uhe(e,t){if(await Qp(e)==="accountant")throw new Error("Accountants cannot allocate inventory");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await be.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"allocation",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes||null,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function zhe(e,t){if(await Qp(e)==="accountant")throw new Error("Accountants cannot return inventory");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await be.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"return",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes||null,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function qhe(e,t){if(await Qp(e)==="accountant")throw new Error("Accountants cannot mark damage");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!t.notes||t.notes.trim()==="")throw new Error("Notes are required when marking damage");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await be.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"damage",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function Whe(e,t){if(await Qp(e)==="accountant")throw new Error("Accountants cannot mark loss");if(t.quantity<=0)throw new Error("Quantity must be greater than zero");if(!t.notes||t.notes.trim()==="")throw new Error("Notes are required when marking loss");if(!["subscription","event"].includes(t.reference_type))throw new Error("Reference type must be subscription or event");const{data:n,error:i}=await be.from("inventory_movements").insert({outlet_id:t.outlet_id,inventory_item_id:t.inventory_item_id,movement_type:"loss",quantity:t.quantity,reference_type:t.reference_type,reference_id:t.reference_id,notes:t.notes,created_by:e}).select().single();if(i)throw new Error(i.message);return n}async function em(e){const{data:t}=await be.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}async function cf(e,t={}){await em(e);let r=be.from("inventory_items").select(`
      *,
      outlets:outlet_id (
        name,
        code
      )
    `).order("name");t.outlet_id&&(r=r.eq("outlet_id",t.outlet_id)),t.category&&(r=r.eq("category",t.category)),t.is_active!==void 0?r=r.eq("is_active",t.is_active):r=r.eq("is_active",!0);const{data:n,error:i}=await r;if(i)throw new Error(i.message);return(n||[]).map(a=>{var s,o;return{...a,outlet_name:(s=a.outlets)==null?void 0:s.name,outlet_code:(o=a.outlets)==null?void 0:o.code}})}async function Ly(e,t){var i,a;const{data:r,error:n}=await be.from("inventory_items").select(`
      *,
      outlets:outlet_id (
        name,
        code
      )
    `).eq("id",t).single();if(n)throw new Error(n.message);if(!r)throw new Error("Inventory item not found");return{...r,outlet_name:(i=r.outlets)==null?void 0:i.name,outlet_code:(a=r.outlets)==null?void 0:a.code}}async function Hhe(e,t){const r=await em(e);if(r.role==="accountant")throw new Error("Accountants cannot create inventory items");if(r.role==="manager"&&(!r.outletIds||!r.outletIds.includes(t.outlet_id)))throw new Error("You can only create items for your assigned outlets");if(t.initial_stock<0)throw new Error("Initial stock cannot be negative");const{data:n,error:i}=await be.from("inventory_items").insert({outlet_id:t.outlet_id,name:t.name,category:t.category,material:t.material||null,unit:t.unit||"pcs",total_quantity:0,available_quantity:0,allocated_quantity:0,damaged_quantity:0,lost_quantity:0,created_by:e}).select().single();if(i)throw new Error(i.message);return t.initial_stock>0&&await $he(e,{outlet_id:t.outlet_id,inventory_item_id:n.id,quantity:t.initial_stock,notes:"Initial stock"}),Ly(e,n.id)}async function Vhe(e,t,r){const n=await em(e);if(n.role==="accountant")throw new Error("Accountants cannot update inventory items");const i=await Ly(e,t);if(n.role==="manager"&&(!n.outletIds||!n.outletIds.includes(i.outlet_id)))throw new Error("You can only update items for your assigned outlets");const{error:a}=await be.from("inventory_items").update({name:r.name,category:r.category,material:r.material,unit:r.unit}).eq("id",t).select().single();if(a)throw new Error(a.message);return Ly(e,t)}async function Khe(e,t){const r=await em(e);if(r.role==="accountant")throw new Error("Accountants cannot deactivate inventory items");const n=await Ly(e,t);if(r.role==="manager"&&(!r.outletIds||!r.outletIds.includes(n.outlet_id)))throw new Error("You can only deactivate items for your assigned outlets");const{error:i}=await be.from("inventory_items").update({is_active:!1}).eq("id",t);if(i)throw new Error(i.message)}async function Ghe(e){const t=await em(e);let r=be.from("inventory_items").select("category").eq("is_active",!0);if(t.role==="manager"&&t.outletIds)if(t.outletIds.length>0)r=r.in("outlet_id",t.outletIds);else return[];const{data:n,error:i}=await r;if(i)throw new Error(i.message);return[...new Set((n==null?void 0:n.map(s=>s.category))||[])].sort()}function Yhe({items:e}){const t=e.length,r=e.reduce((o,c)=>o+c.total_quantity,0),n=e.reduce((o,c)=>o+c.available_quantity,0),i=e.reduce((o,c)=>o+c.allocated_quantity,0),a=e.reduce((o,c)=>o+c.damaged_quantity,0),s=e.reduce((o,c)=>o+c.lost_quantity,0);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),l.jsx("p",{className:"text-2xl font-bold",children:t})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity"}),l.jsx("p",{className:"text-2xl font-bold",children:r})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Available"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:n})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:i})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Damaged"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Lost"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:s})]})]})}function Jhe({showOutletFilter:e,outlets:t,outletId:r,category:n,isActive:i,categories:a,onOutletChange:s,onCategoryChange:o,onIsActiveChange:c}){return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e&&l.jsxs(pt,{label:"Outlet",value:r,onChange:u=>s(u.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),t.map(u=>l.jsx("option",{value:u.id,children:u.name},u.id))]}),l.jsxs(pt,{label:"Category",value:n,onChange:u=>o(u.target.value),children:[l.jsx("option",{value:"",children:"All Categories"}),a.map(u=>l.jsx("option",{value:u,children:u},u))]}),l.jsxs(pt,{label:"Status",value:i,onChange:u=>c(u.target.value),children:[l.jsx("option",{value:"true",children:"Active"}),l.jsx("option",{value:"false",children:"Inactive"}),l.jsx("option",{value:"",children:"All"})]}),(r||n||i!=="true")&&l.jsx("div",{className:"flex items-end",children:l.jsx("button",{onClick:()=>{s(""),o(""),c("true")},className:"text-sm text-primary hover:underline",children:"Clear Filters"})})]})}function NS({isOpen:e,onClose:t,title:r,children:n,maxWidth:i="lg"}){if(!e)return null;const a={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"};return l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),l.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:l.jsxs("div",{className:`relative w-full ${a[i]} bg-white rounded-lg shadow-xl`,onClick:s=>s.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-brand-text",children:r}),l.jsx("button",{onClick:t,className:"text-brand-text/60 hover:text-brand-text transition-colors",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6",children:n})]})})]})}function Xhe({isOpen:e,onClose:t,onSuccess:r,userId:n,userRole:i,outlets:a,defaultOutletId:s,editItem:o}){var I;const c=!!o,u=i==="manager",[d,f]=b.useState(""),[p,h]=b.useState(""),[y,v]=b.useState(""),[x,g]=b.useState(""),[_,S]=b.useState("pcs"),[j,A]=b.useState(""),[N,D]=b.useState(!1),[E,C]=b.useState(null);b.useEffect(()=>{e&&(c&&o?(f(o.outlet_id),h(o.name),v(o.category),g(o.material||""),S(o.unit),A("")):(f(s||""),h(""),v(""),g(""),S("pcs"),A("0")),C(null))},[e,c,o,s]);async function L(O){if(O.preventDefault(),C(null),!d){C("Outlet is required");return}if(!p.trim()){C("Item name is required");return}if(!y.trim()){C("Category is required");return}if(!c){const U=parseInt(j);if(isNaN(U)||U<0){C("Initial stock must be a non-negative number");return}}try{D(!0),c&&o?await Vhe(n,o.id,{name:p.trim(),category:y.trim(),material:x.trim()||void 0,unit:_||"pcs"}):await Hhe(n,{outlet_id:d,name:p.trim(),category:y.trim(),material:x.trim()||void 0,unit:_||"pcs",initial_stock:parseInt(j)}),r(),t()}catch(U){C(U instanceof Error?U.message:"Failed to save item")}finally{D(!1)}}return l.jsx(NS,{isOpen:e,onClose:t,title:c?"Edit Inventory Item":"Add Inventory Item",children:l.jsxs("form",{onSubmit:L,className:"space-y-4",children:[E&&l.jsx(ht,{variant:"error",children:E}),u?l.jsx(He,{label:"Outlet",value:((I=a.find(O=>O.id===d))==null?void 0:I.name)||"Your Outlet",disabled:!0}):l.jsxs(pt,{label:"Outlet",value:d,onChange:O=>f(O.target.value),required:!0,disabled:c,children:[l.jsx("option",{value:"",children:"Select Outlet"}),a.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))]}),l.jsx(He,{label:"Item Name",value:p,onChange:O=>h(O.target.value),placeholder:"e.g., Plate 10-inch",required:!0}),l.jsx(He,{label:"Category",value:y,onChange:O=>v(O.target.value),placeholder:"e.g., Plate, Glass, Bowl",required:!0}),l.jsx(He,{label:"Material",value:x,onChange:O=>g(O.target.value),placeholder:"e.g., Steel, Ceramic, Melamine (optional)"}),l.jsx(He,{label:"Unit",value:_,onChange:O=>S(O.target.value),placeholder:"e.g., pcs, dozen"}),!c&&l.jsxs(l.Fragment,{children:[l.jsx(He,{type:"number",label:"Initial Stock",value:j,onChange:O=>A(O.target.value),min:"0",required:!0}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Initial stock will create a stock_in movement."})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:t,disabled:N,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:N,children:N?"Saving...":c?"Update Item":"Add Item"})]})]})})}function Zhe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState([]),[s,o]=b.useState(!0),[c,u]=b.useState(null),[d,f]=b.useState(""),[p,h]=b.useState(""),[y,v]=b.useState("true"),[x,g]=b.useState(!1),[_,S]=b.useState(null),[j,A]=b.useState(null),[N,D]=b.useState(!1),[E,C]=b.useState(null),L=(e==null?void 0:e.role)||"",I=L==="accountant",O=L==="manager",U=L==="admin"||L==="accountant",V=t||[];b.useEffect(()=>{ie()},[e==null?void 0:e.id,d,p,y]),b.useEffect(()=>{ne()},[e==null?void 0:e.id]);async function ie(){if(e!=null&&e.id)try{o(!0),u(null);const q={};d&&(q.outlet_id=d),p&&(q.category=p),y!==""&&(q.is_active=y==="true");const Y=await cf(e.id,q);n(Y)}catch(q){u(q instanceof Error?q.message:"Failed to load inventory items")}finally{o(!1)}}async function ne(){if(e!=null&&e.id)try{const q=await Ghe(e.id);a(q)}catch(q){console.error("Failed to load categories:",q)}}async function ee(q){if(e!=null&&e.id)try{D(!0),C(null),await Khe(e.id,q.id),A(null),await ie()}catch(Y){C(Y instanceof Error?Y.message:"Failed to deactivate item")}finally{D(!1)}}return s&&r.length===0?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(ep,{className:"w-8 h-8"}),"Inventory Management"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Dishware inventory tracking and allocation"})]}),!I&&l.jsxs(Pe,{onClick:()=>g(!0),children:[l.jsx($c,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),c&&l.jsx(ht,{variant:"error",children:c}),l.jsx(Yhe,{items:r}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Filters"}),l.jsx(Jhe,{userRole:L,showOutletFilter:U,outlets:V,outletId:d,category:p,isActive:y,categories:i,onOutletChange:f,onCategoryChange:h,onIsActiveChange:v})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Inventory Items"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," items"]})]}),r.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(ep,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No inventory items found"}),!I&&l.jsxs(Pe,{onClick:()=>g(!0),className:"mt-4",children:[l.jsx($c,{className:"w-4 h-4 mr-2"}),"Add First Item"]})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Item Name"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Category"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Material"}),U&&l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Total"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Available"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Allocated"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Damaged"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Lost"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:r.map(q=>l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:q.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Unit: ",q.unit]})]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsx(Yt,{variant:"default",children:q.category})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:q.material||"-"}),U&&l.jsx("td",{className:"py-3 px-4 text-sm",children:q.outlet_name||"-"}),l.jsx("td",{className:"text-right py-3 px-4 font-semibold",children:q.total_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-green-600 font-semibold",children:q.available_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-brand-primary",children:q.allocated_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-orange-600",children:q.damaged_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-red-600",children:q.lost_quantity}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx(pr,{to:`/inventory/movements?item=${q.id}`,children:l.jsx(Pe,{variant:"ghost",size:"sm",title:"View Movement History",children:l.jsx($2,{className:"w-4 h-4"})})}),!I&&l.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>S(q),title:"Edit Item",children:l.jsx(n0,{className:"w-4 h-4"})}),!I&&q.is_active&&l.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>A(q),title:"Deactivate Item",children:l.jsx(nT,{className:"w-4 h-4 text-red-600"})}),!q.is_active&&l.jsx(Yt,{variant:"secondary",children:"Inactive"})]})})]},q.id))})]})})]}),(x||_)&&l.jsx(Xhe,{isOpen:x||!!_,onClose:()=>{g(!1),S(null)},onSuccess:()=>{ie(),ne()},userId:(e==null?void 0:e.id)||"",userRole:L,outlets:V,defaultOutletId:O&&V.length>0?V[0].id:void 0,editItem:_}),j&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Deactivate Inventory Item"}),E&&l.jsx(ht,{variant:"error",className:"mb-4",children:E}),l.jsxs("p",{className:"text-muted-foreground mb-4",children:["Are you sure you want to deactivate ",l.jsx("strong",{children:j.name}),"?"]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Note: Items with movement history cannot be deactivated. If this item has been used in allocations, the system will prevent deactivation."}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Pe,{variant:"outline",onClick:()=>{A(null),C(null)},disabled:N,children:"Cancel"}),l.jsx(Pe,{variant:"destructive",onClick:()=>ee(j),disabled:N,children:N?"Deactivating...":"Deactivate"})]})]})})]})}var sM={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(rF,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,a=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,o={},c=0,u={};function d(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var L=A(C);L.chunkSize=parseInt(L.chunkSize),C.step||C.chunk||(L.chunkSize=null),this._handle=new v(L),(this._handle.streamer=this)._config=L}).call(this,E),this.parseChunk=function(C,L){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let U=this._config.newline;U||(O=this._config.quoteChar||'"',U=this._handle.guessLineEndings(C,O)),C=[...C.split(U).slice(I)].join(U)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(C))!==void 0&&(C=O),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+C,O=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=O.meta.cursor,I=(this._finished||(this._partialLine=I.substring(C-this._baseIndex),this._baseIndex=C),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)n.postMessage({results:O,workerId:u.WORKER_ID,finished:I});else if(D(this._config.chunk)&&!L){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!I||!D(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(C){D(this._config.error)?this._config.error(C):s&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:C,finished:!1})}}function f(E){var C;(E=E||{}).chunkSize||(E.chunkSize=u.RemoteChunkSize),d.call(this,E),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),a||(C.onload=N(this._chunkLoaded,this),C.onerror=N(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var L,I=this._config.downloadRequestHeaders;for(L in I)C.setRequestHeader(L,I[L])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+O));try{C.send(this._config.downloadRequestBody)}catch(U){this._chunkError(U.message)}a&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(L){L=C.statusText||L,this._sendError(new Error(L))}}function p(E){(E=E||{}).chunkSize||(E.chunkSize=u.LocalChunkSize),d.call(this,E);var C,L,I=typeof FileReader<"u";this.stream=function(O){this._input=O,L=O.slice||O.webkitSlice||O.mozSlice,I?((C=new FileReader).onload=N(this._chunkLoaded,this),C.onerror=N(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,U=(this._config.chunkSize&&(U=Math.min(this._start+this._config.chunkSize,this._input.size),O=L.call(O,this._start,U)),C.readAsText(O,this._config.encoding));I||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(C.error)}}function h(E){var C;d.call(this,E=E||{}),this.stream=function(L){return C=L,this._nextChunk()},this._nextChunk=function(){var L,I;if(!this._finished)return L=this._config.chunkSize,C=L?(I=C.substring(0,L),C.substring(L)):(I=C,""),this._finished=!C,this.parseChunk(I)}}function y(E){d.call(this,E=E||{});var C=[],L=!0,I=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):L=!0},this._streamData=N(function(O){try{C.push(typeof O=="string"?O:O.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(U){this._streamError(U)}},this),this._streamError=N(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=N(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(E){var C,L,I,O,U=Math.pow(2,53),V=-U,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ee=this,q=0,Y=0,fe=!1,te=!1,R=[],z={data:[],errors:[],meta:{}};function G(pe){return E.skipEmptyLines==="greedy"?pe.join("").trim()==="":pe.length===1&&pe[0].length===0}function re(){if(z&&I&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),I=!1),E.skipEmptyLines&&(z.data=z.data.filter(function(oe){return!G(oe)})),ae()){let oe=function(ue,Ce){D(E.transformHeader)&&(ue=E.transformHeader(ue,Ce)),R.push(ue)};if(z)if(Array.isArray(z.data[0])){for(var pe=0;ae()&&pe<z.data.length;pe++)z.data[pe].forEach(oe);z.data.splice(0,1)}else z.data.forEach(oe)}function Q(oe,ue){for(var Ce=E.header?{}:[],Ee=0;Ee<oe.length;Ee++){var H=Ee,je=oe[Ee],je=((Je,De)=>(Se=>(E.dynamicTypingFunction&&E.dynamicTyping[Se]===void 0&&(E.dynamicTyping[Se]=E.dynamicTypingFunction(Se)),(E.dynamicTyping[Se]||E.dynamicTyping)===!0))(Je)?De==="true"||De==="TRUE"||De!=="false"&&De!=="FALSE"&&((Se=>{if(ie.test(Se)&&(Se=parseFloat(Se),V<Se&&Se<U))return 1})(De)?parseFloat(De):ne.test(De)?new Date(De):De===""?null:De):De)(H=E.header?Ee>=R.length?"__parsed_extra":R[Ee]:H,je=E.transform?E.transform(je,H):je);H==="__parsed_extra"?(Ce[H]=Ce[H]||[],Ce[H].push(je)):Ce[H]=je}return E.header&&(Ee>R.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+Ee,Y+ue):Ee<R.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+Ee,Y+ue)),Ce}var he;z&&(E.header||E.dynamicTyping||E.transform)&&(he=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(Q),he=z.data.length):z.data=Q(z.data,0),E.header&&z.meta&&(z.meta.fields=R),Y+=he)}function ae(){return E.header&&R.length===0}function ce(pe,Q,he,oe){pe={type:pe,code:Q,message:he},oe!==void 0&&(pe.row=oe),z.errors.push(pe)}D(E.step)&&(O=E.step,E.step=function(pe){z=pe,ae()?re():(re(),z.data.length!==0&&(q+=pe.data.length,E.preview&&q>E.preview?L.abort():(z.data=z.data[0],O(z,ee))))}),this.parse=function(pe,Q,he){var oe=E.quoteChar||'"',oe=(E.newline||(E.newline=this.guessLineEndings(pe,oe)),I=!1,E.delimiter?D(E.delimiter)&&(E.delimiter=E.delimiter(pe),z.meta.delimiter=E.delimiter):((oe=((ue,Ce,Ee,H,je)=>{var Je,De,Se,et;je=je||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Fe=0;Fe<je.length;Fe++){for(var Ke,tt=je[Fe],mt=0,vt=0,Xe=0,ot=(Se=void 0,new g({comments:H,delimiter:tt,newline:Ce,preview:10}).parse(ue)),yt=0;yt<ot.data.length;yt++)Ee&&G(ot.data[yt])?Xe++:(Ke=ot.data[yt].length,vt+=Ke,Se===void 0?Se=Ke:0<Ke&&(mt+=Math.abs(Ke-Se),Se=Ke));0<ot.data.length&&(vt/=ot.data.length-Xe),(De===void 0||mt<=De)&&(et===void 0||et<vt)&&1.99<vt&&(De=mt,Je=tt,et=vt)}return{successful:!!(E.delimiter=Je),bestDelimiter:Je}})(pe,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess)).successful?E.delimiter=oe.bestDelimiter:(I=!0,E.delimiter=u.DefaultDelimiter),z.meta.delimiter=E.delimiter),A(E));return E.preview&&E.header&&oe.preview++,C=pe,L=new g(oe),z=L.parse(C,Q,he),re(),fe?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return fe},this.pause=function(){fe=!0,L.abort(),C=D(E.chunk)?"":C.substring(L.getCharIndex())},this.resume=function(){ee.streamer._halted?(fe=!1,ee.streamer.parseChunk(C,!0)):setTimeout(ee.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,L.abort(),z.meta.aborted=!0,D(E.complete)&&E.complete(z),C=""},this.guessLineEndings=function(ue,oe){ue=ue.substring(0,1048576);var oe=new RegExp(x(oe)+"([^]*?)"+x(oe),"gm"),he=(ue=ue.replace(oe,"")).split("\r"),oe=ue.split(`
`),ue=1<oe.length&&oe[0].length<he[0].length;if(he.length===1||ue)return`
`;for(var Ce=0,Ee=0;Ee<he.length;Ee++)he[Ee][0]===`
`&&Ce++;return Ce>=he.length/2?`\r
`:"\r"}}function x(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(E){var C=(E=E||{}).delimiter,L=E.newline,I=E.comments,O=E.step,U=E.preview,V=E.fastMode,ie=null,ne=!1,ee=E.quoteChar==null?'"':E.quoteChar,q=ee;if(E.escapeChar!==void 0&&(q=E.escapeChar),(typeof C!="string"||-1<u.BAD_DELIMITERS.indexOf(C))&&(C=","),I===C)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<u.BAD_DELIMITERS.indexOf(I))&&(I=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var Y=0,fe=!1;this.parse=function(te,R,z){if(typeof te!="string")throw new Error("Input must be a string");var G=te.length,re=C.length,ae=L.length,ce=I.length,pe=D(O),Q=[],he=[],oe=[],ue=Y=0;if(!te)return mt();if(V||V!==!1&&te.indexOf(ee)===-1){for(var Ce=te.split(L),Ee=0;Ee<Ce.length;Ee++){if(oe=Ce[Ee],Y+=oe.length,Ee!==Ce.length-1)Y+=L.length;else if(z)return mt();if(!I||oe.substring(0,ce)!==I){if(pe){if(Q=[],et(oe.split(C)),vt(),fe)return mt()}else et(oe.split(C));if(U&&U<=Ee)return Q=Q.slice(0,U),mt(!0)}}return mt()}for(var H=te.indexOf(C,Y),je=te.indexOf(L,Y),Je=new RegExp(x(q)+x(ee),"g"),De=te.indexOf(ee,Y);;)if(te[Y]===ee)for(De=Y,Y++;;){if((De=te.indexOf(ee,De+1))===-1)return z||he.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Q.length,index:Y}),Ke();if(De===G-1)return Ke(te.substring(Y,De).replace(Je,ee));if(ee===q&&te[De+1]===q)De++;else if(ee===q||De===0||te[De-1]!==q){H!==-1&&H<De+1&&(H=te.indexOf(C,De+1));var Se=Fe((je=je!==-1&&je<De+1?te.indexOf(L,De+1):je)===-1?H:Math.min(H,je));if(te.substr(De+1+Se,re)===C){oe.push(te.substring(Y,De).replace(Je,ee)),te[Y=De+1+Se+re]!==ee&&(De=te.indexOf(ee,Y)),H=te.indexOf(C,Y),je=te.indexOf(L,Y);break}if(Se=Fe(je),te.substring(De+1+Se,De+1+Se+ae)===L){if(oe.push(te.substring(Y,De).replace(Je,ee)),tt(De+1+Se+ae),H=te.indexOf(C,Y),De=te.indexOf(ee,Y),pe&&(vt(),fe))return mt();if(U&&Q.length>=U)return mt(!0);break}he.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Q.length,index:Y}),De++}}else if(I&&oe.length===0&&te.substring(Y,Y+ce)===I){if(je===-1)return mt();Y=je+ae,je=te.indexOf(L,Y),H=te.indexOf(C,Y)}else if(H!==-1&&(H<je||je===-1))oe.push(te.substring(Y,H)),Y=H+re,H=te.indexOf(C,Y);else{if(je===-1)break;if(oe.push(te.substring(Y,je)),tt(je+ae),pe&&(vt(),fe))return mt();if(U&&Q.length>=U)return mt(!0)}return Ke();function et(Xe){Q.push(Xe),ue=Y}function Fe(Xe){var ot=0;return ot=Xe!==-1&&(Xe=te.substring(De+1,Xe))&&Xe.trim()===""?Xe.length:ot}function Ke(Xe){return z||(Xe===void 0&&(Xe=te.substring(Y)),oe.push(Xe),Y=G,et(oe),pe&&vt()),mt()}function tt(Xe){Y=Xe,et(oe),oe=[],je=te.indexOf(L,Y)}function mt(Xe){if(E.header&&!R&&Q.length&&!ne){var ot=Q[0],yt=Object.create(null),Ge=new Set(ot);let bt=!1;for(let qe=0;qe<ot.length;qe++){let zt=ot[qe];if(yt[zt=D(E.transformHeader)?E.transformHeader(zt,qe):zt]){let Pt,Nt=yt[zt];for(;Pt=zt+"_"+Nt,Nt++,Ge.has(Pt););Ge.add(Pt),ot[qe]=Pt,yt[zt]++,bt=!0,(ie=ie===null?{}:ie)[Pt]=zt}else yt[zt]=1,ot[qe]=zt;Ge.add(zt)}bt&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:Q,errors:he,meta:{delimiter:C,linebreak:L,aborted:fe,truncated:!!Xe,cursor:ue+(R||0),renamedHeaders:ie}}}function vt(){O(mt()),Q=[],he=[]}},this.abort=function(){fe=!0},this.getCharIndex=function(){return Y}}function _(E){var C=E.data,L=o[C.workerId],I=!1;if(C.error)L.userError(C.error,C.file);else if(C.results&&C.results.data){var O={abort:function(){I=!0,S(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(D(L.userStep)){for(var U=0;U<C.results.data.length&&(L.userStep({data:C.results.data[U],errors:C.results.errors,meta:C.results.meta},O),!I);U++);delete C.results}else D(L.userChunk)&&(L.userChunk(C.results,O,C.file),delete C.results)}C.finished&&!I&&S(C.workerId,C.results)}function S(E,C){var L=o[E];D(L.userComplete)&&L.userComplete(C),L.terminate(),delete o[E]}function j(){throw new Error("Not implemented.")}function A(E){if(typeof E!="object"||E===null)return E;var C,L=Array.isArray(E)?[]:{};for(C in E)L[C]=A(E[C]);return L}function N(E,C){return function(){E.apply(C,arguments)}}function D(E){return typeof E=="function"}return u.parse=function(E,C){var L=(C=C||{}).dynamicTyping||!1;if(D(L)&&(C.dynamicTypingFunction=L,L={}),C.dynamicTyping=L,C.transform=!!D(C.transform)&&C.transform,!C.worker||!u.WORKERS_SUPPORTED)return L=null,u.NODE_STREAM_INPUT,typeof E=="string"?(E=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(E),L=new(C.download?f:h)(C)):E.readable===!0&&D(E.read)&&D(E.on)?L=new y(C):(n.File&&E instanceof File||E instanceof Object)&&(L=new p(C)),L.stream(E);(L=(()=>{var I;return!!u.WORKERS_SUPPORTED&&(I=(()=>{var O=n.URL||n.webkitURL||null,U=r.toString();return u.BLOB_URL||(u.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",U,")();"],{type:"text/javascript"})))})(),(I=new n.Worker(I)).onmessage=_,I.id=c++,o[I.id]=I)})()).userStep=C.step,L.userChunk=C.chunk,L.userComplete=C.complete,L.userError=C.error,C.step=D(C.step),C.chunk=D(C.chunk),C.complete=D(C.complete),C.error=D(C.error),delete C.worker,L.postMessage({input:E,config:C,workerId:L.id})},u.unparse=function(E,C){var L=!1,I=!0,O=",",U=`\r
`,V='"',ie=V+V,ne=!1,ee=null,q=!1,Y=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||u.BAD_DELIMITERS.filter(function(R){return C.delimiter.indexOf(R)!==-1}).length||(O=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(L=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(ne=C.skipEmptyLines),typeof C.newline=="string"&&(U=C.newline),typeof C.quoteChar=="string"&&(V=C.quoteChar),typeof C.header=="boolean"&&(I=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");ee=C.columns}C.escapeChar!==void 0&&(ie=C.escapeChar+V),C.escapeFormulae instanceof RegExp?q=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(q=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(V),"g"));if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return fe(null,E,ne);if(typeof E[0]=="object")return fe(ee||Object.keys(E[0]),E,ne)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||ee),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),fe(E.fields||[],E.data||[],ne);throw new Error("Unable to serialize unrecognized input");function fe(R,z,G){var re="",ae=(typeof R=="string"&&(R=JSON.parse(R)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(R)&&0<R.length),ce=!Array.isArray(z[0]);if(ae&&I){for(var pe=0;pe<R.length;pe++)0<pe&&(re+=O),re+=te(R[pe],pe);0<z.length&&(re+=U)}for(var Q=0;Q<z.length;Q++){var he=(ae?R:z[Q]).length,oe=!1,ue=ae?Object.keys(z[Q]).length===0:z[Q].length===0;if(G&&!ae&&(oe=G==="greedy"?z[Q].join("").trim()==="":z[Q].length===1&&z[Q][0].length===0),G==="greedy"&&ae){for(var Ce=[],Ee=0;Ee<he;Ee++){var H=ce?R[Ee]:Ee;Ce.push(z[Q][H])}oe=Ce.join("").trim()===""}if(!oe){for(var je=0;je<he;je++){0<je&&!ue&&(re+=O);var Je=ae&&ce?R[je]:je;re+=te(z[Q][Je],je)}Q<z.length-1&&(!G||0<he&&!ue)&&(re+=U)}}return re}function te(R,z){var G,re;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(re=!1,q&&typeof R=="string"&&q.test(R)&&(R="'"+R,re=!0),G=R.toString().replace(Y,ie),(re=re||L===!0||typeof L=="function"&&L(R,z)||Array.isArray(L)&&L[z]||((ae,ce)=>{for(var pe=0;pe<ce.length;pe++)if(-1<ae.indexOf(ce[pe]))return!0;return!1})(G,u.BAD_DELIMITERS)||-1<G.indexOf(O)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?V+G+V:G)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!a&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=g,u.ParserHandle=v,u.NetworkStreamer=f,u.FileStreamer=p,u.StringStreamer=h,u.ReadableStreamStreamer=y,n.jQuery&&((i=n.jQuery).fn.parse=function(E){var C=E.config||{},L=[];return this.each(function(U){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)L.push({file:this.files[V],inputElem:this,instanceConfig:i.extend({},C)})}),I(),this;function I(){if(L.length===0)D(E.complete)&&E.complete();else{var U,V,ie,ne,ee=L[0];if(D(E.before)){var q=E.before(ee.file,ee.inputElem);if(typeof q=="object"){if(q.action==="abort")return U="AbortError",V=ee.file,ie=ee.inputElem,ne=q.reason,void(D(E.error)&&E.error({name:U},V,ie,ne));if(q.action==="skip")return void O();typeof q.config=="object"&&(ee.instanceConfig=i.extend(ee.instanceConfig,q.config))}else if(q==="skip")return void O()}var Y=ee.instanceConfig.complete;ee.instanceConfig.complete=function(fe){D(Y)&&Y(fe,ee.file,ee.inputElem),O()},u.parse(ee.file,ee.instanceConfig)}}function O(){L.splice(0,1),I()}}),s&&(n.onmessage=function(E){E=E.data,u.WORKER_ID===void 0&&E&&(u.WORKER_ID=E.workerId),typeof E.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(E.input,E.config),finished:!0}):(n.File&&E.input instanceof File||E.input instanceof Object)&&(E=u.parse(E.input,E.config))&&n.postMessage({workerId:u.WORKER_ID,results:E,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(d.prototype)).constructor=p,(h.prototype=Object.create(h.prototype)).constructor=h,(y.prototype=Object.create(d.prototype)).constructor=y,u})})(sM);var Qhe=sM.exports;const uf=Ts(Qhe);function epe(){const{user:e,outlets:t}=Wt(),[r]=I9(),[n,i]=b.useState([]),[a,s]=b.useState([]),[o,c]=b.useState(!0),[u,d]=b.useState(null),[f,p]=b.useState(""),[h,y]=b.useState(r.get("item")||""),[v,x]=b.useState(""),[g,_]=b.useState(""),[S,j]=b.useState(""),A=(e==null?void 0:e.role)||"",N=A==="admin"||A==="accountant",D=t||[];b.useEffect(()=>{E()},[e==null?void 0:e.id]),b.useEffect(()=>{C()},[e==null?void 0:e.id,f,h,v,g,S]);async function E(){if(e!=null&&e.id)try{const O=await cf(e.id,{is_active:!0});s(O)}catch(O){console.error("Failed to load items:",O)}}async function C(){if(e!=null&&e.id)try{c(!0),d(null);const O={};f&&(O.outlet_id=f),h&&(O.inventory_item_id=h),v&&(O.movement_type=v),g&&(O.date_from=g),S&&(O.date_to=S);const U=await Bhe(e.id,O);i(U)}catch(O){d(O instanceof Error?O.message:"Failed to load movements")}finally{c(!1)}}function L(O){const U={stock_in:"bg-green-100 text-green-800",allocation:"bg-brand-primary/20 text-brand-primary",return:"bg-purple-100 text-purple-800",damage:"bg-orange-100 text-orange-800",loss:"bg-red-100 text-red-800",adjustment:"bg-yellow-100 text-yellow-800"};return l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${U[O]}`,children:O.replace("_"," ").toUpperCase()})}function I(){const O=n.map(ee=>({Date:new Date(ee.created_at).toLocaleDateString(),Time:new Date(ee.created_at).toLocaleTimeString(),Item:ee.item_name||"",Category:ee.item_category||"",Outlet:ee.outlet_name||"","Movement Type":ee.movement_type,Quantity:ee.quantity,"Reference Type":ee.reference_type,"Reference Name":ee.reference_name||"",Notes:ee.notes||"","Created By":ee.created_by_name||""})),U=uf.unparse(O),V=new Blob([U],{type:"text/csv;charset=utf-8;"}),ie=document.createElement("a"),ne=URL.createObjectURL(V);ie.setAttribute("href",ne),ie.setAttribute("download",`inventory-movements-${new Date().toISOString().split("T")[0]}.csv`),ie.style.visibility="hidden",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)}return o&&n.length===0?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx(Wr,{size:"lg"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx($2,{className:"w-8 h-8"}),"Inventory Movements"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete movement history (read-only)"})]}),n.length>0&&l.jsxs(Pe,{onClick:I,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),u&&l.jsx(ht,{variant:"error",children:u}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Filters"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[N&&l.jsxs(pt,{label:"Outlet",value:f,onChange:O=>p(O.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),D.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))]}),l.jsxs(pt,{label:"Item",value:h,onChange:O=>y(O.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),a.map(O=>l.jsxs("option",{value:O.id,children:[O.name," (",O.category,")"]},O.id))]}),l.jsxs(pt,{label:"Movement Type",value:v,onChange:O=>x(O.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"stock_in",children:"Stock In"}),l.jsx("option",{value:"allocation",children:"Allocation"}),l.jsx("option",{value:"return",children:"Return"}),l.jsx("option",{value:"damage",children:"Damage"}),l.jsx("option",{value:"loss",children:"Loss"}),l.jsx("option",{value:"adjustment",children:"Adjustment"})]}),l.jsx(He,{type:"date",label:"From Date",value:g,onChange:O=>_(O.target.value)}),l.jsx(He,{type:"date",label:"To Date",value:S,onChange:O=>j(O.target.value)}),(f||h||v||g||S)&&l.jsx("div",{className:"flex items-end",children:l.jsx(Pe,{variant:"outline",onClick:()=>{p(""),y(""),x(""),_(""),j("")},children:"Clear Filters"})})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Movement History"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.length," movements"]})]}),n.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx($2,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No movements found"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Date/Time"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Item"}),N&&l.jsx("th",{className:"text-left py-3 px-4",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Quantity"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Reference"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Notes"}),l.jsx("th",{className:"text-left py-3 px-4",children:"User"})]})}),l.jsx("tbody",{children:n.map(O=>l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4 text-sm",children:l.jsxs("div",{children:[l.jsx("p",{children:new Date(O.created_at).toLocaleDateString()}),l.jsx("p",{className:"text-muted-foreground text-xs",children:new Date(O.created_at).toLocaleTimeString()})]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm",children:O.item_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:O.item_category})]})}),N&&l.jsx("td",{className:"py-3 px-4 text-sm",children:O.outlet_name}),l.jsx("td",{className:"py-3 px-4",children:L(O.movement_type)}),l.jsx("td",{className:"text-right py-3 px-4 font-semibold",children:O.quantity}),l.jsxs("td",{className:"py-3 px-4 text-sm",children:[O.reference_type!=="manual"&&l.jsxs("div",{children:[l.jsx(Yt,{variant:"default",children:O.reference_type}),O.reference_name&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:O.reference_name})]}),O.reference_type==="manual"&&l.jsx("span",{className:"text-muted-foreground",children:"Manual"})]}),l.jsx("td",{className:"py-3 px-4 text-sm",children:O.notes||"-"}),l.jsx("td",{className:"py-3 px-4 text-sm",children:O.created_by_name||"-"})]},O.id))})]})})]})]})}async function oM(e,t,r){const{data:n,error:i}=await be.from("inventory_allocations_with_details").select("*").eq("reference_type",t).eq("reference_id",r).eq("is_active",!0);if(i)throw new Error(i.message);return n||[]}async function tpe(e,t,r){const n=await oM(e,t,r),i=n.reduce((o,c)=>o+c.allocated_quantity,0),a=n.reduce((o,c)=>o+(c.outstanding_quantity||0),0),s=n.length;return{totalAllocated:i,totalOutstanding:a,itemCount:s}}function rpe({isOpen:e,onClose:t,onSuccess:r,userId:n,outletId:i,referenceType:a,referenceId:s,referenceName:o}){const[c,u]=b.useState([]),[d,f]=b.useState(!1),[p,h]=b.useState(""),[y,v]=b.useState(""),[x,g]=b.useState(""),[_,S]=b.useState(!1),[j,A]=b.useState(null),N=c.find(L=>L.id===p),D=(N==null?void 0:N.available_quantity)||0;b.useEffect(()=>{e&&(E(),h(""),v(""),g(""),A(null))},[e]);async function E(){try{f(!0);const I=(await cf(n,{outlet_id:i,is_active:!0})).filter(O=>O.available_quantity>0);u(I)}catch(L){A(L instanceof Error?L.message:"Failed to load items")}finally{f(!1)}}async function C(L){if(L.preventDefault(),A(null),!p){A("Please select an item");return}const I=parseInt(y);if(isNaN(I)||I<=0){A("Quantity must be a positive number");return}if(I>D){A(`Quantity cannot exceed available stock (${D})`);return}try{S(!0),await Uhe(n,{outlet_id:i,inventory_item_id:p,quantity:I,reference_type:a,reference_id:s,notes:x.trim()||void 0}),r(),t()}catch(O){A(O instanceof Error?O.message:"Failed to allocate inventory")}finally{S(!1)}}return l.jsx(NS,{isOpen:e,onClose:t,title:"Allocate Inventory",children:l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[j&&l.jsx(ht,{variant:"error",children:j}),l.jsxs("div",{className:"bg-muted p-4 rounded",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocating To"}),l.jsx("p",{className:"font-semibold capitalize",children:a}),l.jsx("p",{className:"text-sm",children:o})]}),d?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(Wr,{})}):c.length===0?l.jsx(ht,{variant:"warning",children:"No inventory items with available stock found for this outlet."}):l.jsxs(l.Fragment,{children:[l.jsxs(pt,{label:"Inventory Item",value:p,onChange:L=>h(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Select Item"}),c.map(L=>l.jsxs("option",{value:L.id,children:[L.name," - ",L.category," (Available: ",L.available_quantity,")"]},L.id))]}),N&&l.jsxs("div",{className:"bg-brand-primary/10 p-3 rounded",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Available Stock"}),l.jsxs("p",{className:"text-lg font-bold text-brand-primary",children:[D," ",N.unit]})]}),l.jsx(He,{type:"number",label:"Quantity to Allocate",value:y,onChange:L=>v(L.target.value),min:"1",max:D,required:!0,disabled:!p,placeholder:N?`Max: ${D}`:"Select an item first"}),l.jsx(He,{label:"Notes (optional)",value:x,onChange:L=>g(L.target.value),placeholder:"Optional notes about this allocation"})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:t,disabled:_,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:_||c.length===0,children:_?"Allocating...":"Allocate"})]})]})})}const lM=bp.forwardRef(({className:e,label:t,error:r,...n},i)=>l.jsxs("div",{className:"w-full",children:[t&&l.jsx("label",{className:"block text-sm font-medium text-brand-text mb-1",children:t}),l.jsx("textarea",{className:As("flex min-h-[80px] w-full rounded-md border border-brand-border bg-white px-3 py-2 text-sm","placeholder:text-brand-text/50","focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50","resize-vertical",r&&"border-red-500 focus:ring-red-500",e),ref:i,...n}),r&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}));lM.displayName="Textarea";function npe({isOpen:e,onClose:t,onSuccess:r,userId:n,outletId:i,inventoryItemId:a,itemName:s,referenceType:o,referenceId:c,outstandingQuantity:u}){const[d,f]=b.useState("return"),[p,h]=b.useState(""),[y,v]=b.useState(""),[x,g]=b.useState(!1),[_,S]=b.useState(null);b.useEffect(()=>{e&&(f("return"),h(""),v(""),S(null))},[e]);async function j(A){A.preventDefault(),S(null);const N=parseInt(p);if(isNaN(N)||N<=0){S("Quantity must be a positive number");return}if(N>u){S(`Quantity cannot exceed outstanding (${u})`);return}if((d==="damage"||d==="loss")&&!y.trim()){S("Notes are required when marking damage or loss");return}try{g(!0);const D={outlet_id:i,inventory_item_id:a,quantity:N,reference_type:o,reference_id:c,notes:y.trim()||void 0};d==="return"?await zhe(n,{...D,reference_type:o}):d==="damage"?await qhe(n,{...D,reference_type:o,notes:y.trim()}):d==="loss"&&await Whe(n,{...D,reference_type:o,notes:y.trim()}),r(),t()}catch(D){S(D instanceof Error?D.message:"Failed to process")}finally{g(!1)}}return l.jsx(NS,{isOpen:e,onClose:t,title:"Return / Damage / Loss",children:l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[_&&l.jsx(ht,{variant:"error",children:_}),l.jsxs("div",{className:"bg-muted p-4 rounded",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Item"}),l.jsx("p",{className:"font-semibold",children:s}),l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Outstanding Quantity"}),l.jsx("p",{className:"text-lg font-bold text-orange-600",children:u})]}),l.jsxs(pt,{label:"Action",value:d,onChange:A=>f(A.target.value),required:!0,children:[l.jsx("option",{value:"return",children:"Return (Good Condition)"}),l.jsx("option",{value:"damage",children:"Mark as Damaged"}),l.jsx("option",{value:"loss",children:"Mark as Lost"})]}),l.jsx(He,{type:"number",label:"Quantity",value:p,onChange:A=>h(A.target.value),min:"1",max:u,required:!0,placeholder:`Max: ${u}`}),l.jsx(lM,{label:d==="return"?"Notes (optional)":"Notes (required)",value:y,onChange:A=>v(A.target.value),placeholder:d==="return"?"Optional notes about the return":"Explain what happened (mandatory)",required:d!=="return",rows:4}),d!=="return"&&l.jsxs(ht,{variant:"warning",children:[l.jsx("strong",{children:"Note:"})," ",d==="damage"?"Damaged":"Lost"," items will be tracked separately and reduce available stock."]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(Pe,{type:"button",variant:"outline",onClick:t,disabled:x,children:"Cancel"}),l.jsx(Pe,{type:"submit",disabled:x,children:x?"Processing...":d==="return"?"Return":`Mark as ${d}`})]})]})})}function ipe(){const{user:e}=Wt(),[t,r]=b.useState(""),[n,i]=b.useState(""),[a,s]=b.useState(null),[o,c]=b.useState([]),[u,d]=b.useState(!1),[f,p]=b.useState([]),[h,y]=b.useState(null),[v,x]=b.useState(!1),[g,_]=b.useState(null),[S,j]=b.useState(!1),[A,N]=b.useState(null),D=(e==null?void 0:e.role)==="accountant";b.useEffect(()=>{n&&t?E():c([])},[n,t]),b.useEffect(()=>{a&&t&&C()},[a,t]);async function E(){if(!n.trim()){c([]);return}try{if(d(!0),t==="subscription"){const{data:O}=await be.from("subscriptions").select("id, client_id, outlet_id, status, clients(name)").ilike("clients.name",`%${n}%`).eq("is_active",!0).limit(10);c((O==null?void 0:O.map(U=>{var V;return{id:U.id,name:((V=U.clients)==null?void 0:V.name)||"Unknown",outlet_id:U.outlet_id,status:U.status}}))||[])}else if(t==="event"){const{data:O}=await be.from("events").select("id, event_name, outlet_id, status").ilike("event_name",`%${n}%`).eq("is_active",!0).limit(10);c((O==null?void 0:O.map(U=>({id:U.id,name:U.event_name,outlet_id:U.outlet_id,status:U.status})))||[])}}catch(O){console.error("Search failed:",O)}finally{d(!1)}}async function C(){if(!(!(e!=null&&e.id)||!a||!t))try{x(!0),_(null);const[O,U]=await Promise.all([oM(e.id,t,a.id),tpe(e.id,t,a.id)]);p(O),y(U)}catch(O){_(O instanceof Error?O.message:"Failed to load allocations")}finally{x(!1)}}function L(O){s(O),i(""),c([])}function I(){s(null),p([]),y(null)}return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(ep,{className:"w-8 h-8"}),"Inventory Allocation"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Allocate dishware to subscriptions or events"})]}),a&&!D&&l.jsxs(Pe,{onClick:()=>j(!0),children:[l.jsx($c,{className:"w-4 h-4 mr-2"}),"Allocate Items"]})]}),g&&l.jsx(ht,{variant:"error",children:g}),a?l.jsxs(l.Fragment,{children:[l.jsxs(Pe,{variant:"outline",onClick:I,children:[l.jsx(Id,{className:"w-4 h-4 mr-2"}),"Back to Search"]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t}),l.jsx("h3",{className:"text-xl font-bold",children:a.name})]}),h&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:h.totalAllocated}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Outstanding"}),l.jsx("p",{className:"text-lg font-semibold text-orange-600",children:h.totalOutstanding})]})]})}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Allocated Items"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.length," item",f.length!==1?"s":""]})]}),v?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Wr,{size:"lg"})}):f.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(ep,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No items allocated yet"}),!D&&l.jsxs(Pe,{onClick:()=>j(!0),className:"mt-4",children:[l.jsx($c,{className:"w-4 h-4 mr-2"}),"Allocate Items"]})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4",children:"Item"}),l.jsx("th",{className:"text-left py-3 px-4",children:"Category"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Allocated"}),l.jsx("th",{className:"text-right py-3 px-4",children:"Outstanding"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Status"}),l.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),l.jsx("tbody",{children:f.map(O=>l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"py-3 px-4 font-medium",children:O.item_name}),l.jsx("td",{className:"py-3 px-4",children:l.jsx(Yt,{variant:"default",children:O.item_category})}),l.jsx("td",{className:"text-right py-3 px-4 font-semibold",children:O.allocated_quantity}),l.jsx("td",{className:"text-right py-3 px-4 text-orange-600 font-semibold",children:O.outstanding_quantity||0}),l.jsx("td",{className:"text-center py-3 px-4",children:O.is_active?l.jsx(Yt,{variant:"success",children:"Active"}):l.jsx(Yt,{variant:"secondary",children:"Closed"})}),l.jsx("td",{className:"text-center py-3 px-4",children:O.is_active&&(O.outstanding_quantity||0)>0&&!D&&l.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>N(O),children:"Return/Damage/Loss"})})]},O.id))})]})})]})]}):l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Select Subscription or Event"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs(pt,{label:"Reference Type",value:t,onChange:O=>r(O.target.value),children:[l.jsx("option",{value:"",children:"Select Type"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),t&&l.jsx(He,{label:`Search ${t==="subscription"?"by client name":"by event name"}`,value:n,onChange:O=>i(O.target.value),placeholder:"Type to search..."}),u&&l.jsx("div",{className:"flex items-center justify-center py-4",children:l.jsx(Wr,{})}),o.length>0&&l.jsx("div",{className:"border rounded divide-y",children:o.map(O=>l.jsx("button",{onClick:()=>L(O),className:"w-full text-left p-4 hover:bg-muted transition-colors",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:O.name}),l.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[t," - ",O.status]})]}),l.jsx(Yt,{variant:"default",children:"Select"})]})},O.id))})]})]}),S&&a&&t&&l.jsx(rpe,{isOpen:S,onClose:()=>j(!1),onSuccess:C,userId:(e==null?void 0:e.id)||"",outletId:a.outlet_id,referenceType:t,referenceId:a.id,referenceName:a.name}),A&&a&&t&&l.jsx(npe,{isOpen:!!A,onClose:()=>N(null),onSuccess:C,userId:(e==null?void 0:e.id)||"",outletId:a.outlet_id,inventoryItemId:A.inventory_item_id,itemName:A.item_name||"",referenceType:t,referenceId:a.id,outstandingQuantity:A.outstanding_quantity||0})]})}async function yx(e){const{data:t}=await be.from("user_profiles").select("role").eq("id",e).single();if(!t)throw new Error("User profile not found");if(t.role==="manager"){const{data:r}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e),n=(r==null?void 0:r.map(i=>i.outlet_id))||[];return{role:t.role,outletIds:n}}return{role:t.role,outletIds:null}}async function cM(e,t={}){const r=await yx(e);let n=be.from("inventory_stock_summary").select("*").order("item_name");if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.category&&(n=n.eq("category",t.category)),t.is_active!==void 0&&(n=n.eq("is_active",t.is_active));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function ape(e,t={}){const n=(await cM(e,t)).map(i=>({"Item Name":i.item_name,Category:i.category,Material:i.material||"",Unit:i.unit,Outlet:i.outlet_name,"Outlet Code":i.outlet_code,"Total Quantity":i.total_quantity,Available:i.available_quantity,Allocated:i.allocated_quantity,Damaged:i.damaged_quantity,Lost:i.lost_quantity,Status:i.is_active?"Active":"Inactive"}));return uf.unparse(n)}async function uM(e,t={}){const r=await yx(e);let n=be.from("inventory_allocations_with_details").select("*").order("item_name");if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.reference_type&&(n=n.eq("reference_type",t.reference_type)),t.inventory_item_id&&(n=n.eq("inventory_item_id",t.inventory_item_id));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function spe(e,t={}){const n=(await uM(e,t)).map(i=>({"Item Name":i.item_name,Category:i.item_category,Outlet:i.outlet_name,"Reference Type":i.reference_type,Reference:i.reference_name||"","Allocated Quantity":i.allocated_quantity,"Outstanding Quantity":i.outstanding_quantity,Status:i.is_active?"Active":"Closed","Created At":new Date(i.created_at).toLocaleString()}));return uf.unparse(n)}async function dM(e,t={}){const r=await yx(e);let n=be.from("inventory_damage_loss_report").select("*").order("report_date",{ascending:!1});if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.movement_type&&(n=n.eq("movement_type",t.movement_type)),t.inventory_item_id&&(n=n.eq("inventory_item_id",t.inventory_item_id)),t.date_from&&(n=n.gte("report_date",t.date_from)),t.date_to&&(n=n.lte("report_date",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function ope(e,t={}){const n=(await dM(e,t)).map(i=>({Date:i.report_date,"Item Name":i.item_name,Category:i.item_category,Outlet:i.outlet_name,Type:i.movement_type.toUpperCase(),"Incident Count":i.incident_count,"Total Quantity":i.total_quantity,"Reference Type":i.reference_type,Reference:i.reference_name||"Manual"}));return uf.unparse(n)}async function fM(e,t={}){const r=await yx(e);let n=be.from("inventory_movements_with_details").select("*").order("created_at",{ascending:!1});if(r.role==="manager"&&r.outletIds)if(r.outletIds.length>0)n=n.in("outlet_id",r.outletIds);else return[];t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.inventory_item_id&&(n=n.eq("inventory_item_id",t.inventory_item_id)),t.movement_type&&(n=n.eq("movement_type",t.movement_type)),t.date_from&&(n=n.gte("created_at",t.date_from)),t.date_to&&(n=n.lte("created_at",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i||[]}async function lpe(e,t={}){const n=(await fM(e,t)).map(i=>({Date:new Date(i.created_at).toLocaleDateString(),Time:new Date(i.created_at).toLocaleTimeString(),"Item Name":i.item_name,Category:i.item_category,Outlet:i.outlet_name,"Movement Type":i.movement_type.toUpperCase(),Quantity:i.quantity,"Reference Type":i.reference_type,Reference:i.reference_name||"Manual",Notes:i.notes||"",User:i.created_by_name}));return uf.unparse(n)}function cpe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState("stock"),[i,a]=b.useState(!1),[s,o]=b.useState(null),c=(e==null?void 0:e.role)||"",u=c==="admin"||c==="accountant",d=t||[],f=[{id:"stock",label:"Stock Summary"},{id:"allocation",label:"Allocation"},{id:"damage",label:"Damage & Loss"},{id:"movements",label:"Movements"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(xq,{className:"w-8 h-8"}),"Inventory Reports"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Production-grade inventory reporting with CSV exports"})]}),s&&l.jsx(ht,{variant:"error",children:s}),l.jsx(we,{children:l.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:f.map(p=>l.jsx("button",{onClick:()=>n(p.id),className:`px-4 py-2 rounded-md font-medium transition-colors ${r===p.id?"bg-primary text-white":"bg-muted hover:bg-muted/80"}`,children:p.label},p.id))})}),r==="stock"&&l.jsx(upe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o}),r==="allocation"&&l.jsx(dpe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o}),r==="damage"&&l.jsx(fpe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o}),r==="movements"&&l.jsx(hpe,{userId:(e==null?void 0:e.id)||"",userRole:c,showOutletFilter:u,outlets:d,loading:i,setLoading:a,setError:o})]})}function upe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState("true");b.useEffect(()=>{h()},[e,o,u,f]);async function h(){try{n(!0),i(null);const j={};o&&(j.outlet_id=o),u&&(j.category=u),f!==""&&(j.is_active=f==="true");const A=await cM(e,j);s(A)}catch(j){i(j instanceof Error?j.message:"Failed to load report")}finally{n(!1)}}async function y(){try{const j={};o&&(j.outlet_id=o),u&&(j.category=u),f!==""&&(j.is_active=f==="true");const A=await ape(e,j),N=new Blob([A],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),E=URL.createObjectURL(N);D.setAttribute("href",E),D.setAttribute("download",`stock-summary-${new Date().toISOString().split("T")[0]}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}catch(j){i(j instanceof Error?j.message:"Failed to export CSV")}}const v=a.length,x=a.reduce((j,A)=>j+(A.available_quantity||0),0),g=a.reduce((j,A)=>j+(A.allocated_quantity||0),0),_=a.reduce((j,A)=>j+(A.damaged_quantity||0),0),S=a.reduce((j,A)=>j+(A.lost_quantity||0),0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),l.jsx("p",{className:"text-2xl font-bold",children:v})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Available"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:x})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:g})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Damaged"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:_})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Lost"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:S})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Pe,{onClick:y,disabled:a.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(pt,{label:"Outlet",value:o,onChange:j=>c(j.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(j=>l.jsx("option",{value:j.id,children:j.name},j.id))]}),l.jsx(He,{label:"Category",value:u,onChange:j=>d(j.target.value),placeholder:"Filter by category"}),l.jsxs(pt,{label:"Status",value:f,onChange:j=>p(j.target.value),children:[l.jsx("option",{value:"true",children:"Active"}),l.jsx("option",{value:"false",children:"Inactive"}),l.jsx("option",{value:"",children:"All"})]})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Stock Summary"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No data found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Category"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Available"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Allocated"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Damaged"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Lost"})]})}),l.jsx("tbody",{children:a.map((j,A)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 font-medium",children:j.item_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:"default",children:j.category})}),t&&l.jsx("td",{className:"py-2 px-2 text-sm",children:j.outlet_name}),l.jsx("td",{className:"text-right py-2 px-2",children:j.total_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-green-600 font-semibold",children:j.available_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-brand-primary",children:j.allocated_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600",children:j.damaged_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-red-600",children:j.lost_quantity})]},A))})]})})]})]})}function dpe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState("");b.useEffect(()=>{v()},[e]),b.useEffect(()=>{x()},[e,u,f,h]);async function v(){try{const j=await cf(e,{is_active:!0});c(j)}catch(j){console.error("Failed to load items:",j)}}async function x(){try{n(!0),i(null);const j={};u&&(j.outlet_id=u),f&&(j.reference_type=f),h&&(j.inventory_item_id=h);const A=await uM(e,j);s(A)}catch(j){i(j instanceof Error?j.message:"Failed to load report")}finally{n(!1)}}async function g(){try{const j={};u&&(j.outlet_id=u),f&&(j.reference_type=f),h&&(j.inventory_item_id=h);const A=await spe(e,j),N=new Blob([A],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),E=URL.createObjectURL(N);D.setAttribute("href",E),D.setAttribute("download",`allocation-report-${new Date().toISOString().split("T")[0]}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}catch(j){i(j instanceof Error?j.message:"Failed to export CSV")}}const _=a.reduce((j,A)=>j+(A.allocated_quantity||0),0),S=a.reduce((j,A)=>j+(A.outstanding_quantity||0),0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Allocations"}),l.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Allocated"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:_})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-orange-600",children:S})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Pe,{onClick:g,disabled:a.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(pt,{label:"Outlet",value:u,onChange:j=>d(j.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(j=>l.jsx("option",{value:j.id,children:j.name},j.id))]}),l.jsxs(pt,{label:"Reference Type",value:f,onChange:j=>p(j.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"subscription",children:"Subscription"}),l.jsx("option",{value:"event",children:"Event"})]}),l.jsxs(pt,{label:"Item",value:h,onChange:j=>y(j.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),o.map(j=>l.jsxs("option",{value:j.id,children:[j.name," (",j.category,")"]},j.id))]})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Current Allocations"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No allocations found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Category"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Allocated"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Outstanding"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Status"})]})}),l.jsx("tbody",{children:a.map((j,A)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 font-medium",children:j.item_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:"default",children:j.item_category})}),t&&l.jsx("td",{className:"py-2 px-2 text-sm",children:j.outlet_name}),l.jsx("td",{className:"py-2 px-2 text-sm",children:l.jsxs("div",{children:[l.jsx(Yt,{variant:"default",children:j.reference_type}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j.reference_name})]})}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:j.allocated_quantity}),l.jsx("td",{className:"text-right py-2 px-2 text-orange-600 font-semibold",children:j.outstanding_quantity}),l.jsx("td",{className:"text-center py-2 px-2",children:j.is_active?l.jsx(Yt,{variant:"success",children:"Active"}):l.jsx(Yt,{variant:"secondary",children:"Closed"})})]},A))})]})})]})]})}function fpe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(""),[v,x]=b.useState(""),[g,_]=b.useState("");b.useEffect(()=>{S()},[e]),b.useEffect(()=>{j()},[e,u,f,h,v,g]);async function S(){try{const E=await cf(e,{is_active:!0});c(E)}catch(E){console.error("Failed to load items:",E)}}async function j(){try{n(!0),i(null);const E={};u&&(E.outlet_id=u),f&&(E.movement_type=f),h&&(E.inventory_item_id=h),v&&(E.date_from=v),g&&(E.date_to=g);const C=await dM(e,E);s(C)}catch(E){i(E instanceof Error?E.message:"Failed to load report")}finally{n(!1)}}async function A(){try{const E={};u&&(E.outlet_id=u),f&&(E.movement_type=f),h&&(E.inventory_item_id=h),v&&(E.date_from=v),g&&(E.date_to=g);const C=await ope(e,E),L=new Blob([C],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),O=URL.createObjectURL(L);I.setAttribute("href",O),I.setAttribute("download",`damage-loss-report-${new Date().toISOString().split("T")[0]}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)}catch(E){i(E instanceof Error?E.message:"Failed to export CSV")}}const N=a.reduce((E,C)=>E+(C.incident_count||0),0),D=a.reduce((E,C)=>E+(C.total_quantity||0),0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Incidents"}),l.jsx("p",{className:"text-2xl font-bold",children:N})]}),l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity Affected"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:D})]})]}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Pe,{onClick:A,disabled:a.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(pt,{label:"Outlet",value:u,onChange:E=>d(E.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(E=>l.jsx("option",{value:E.id,children:E.name},E.id))]}),l.jsxs(pt,{label:"Type",value:f,onChange:E=>p(E.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"damage",children:"Damage"}),l.jsx("option",{value:"loss",children:"Loss"})]}),l.jsxs(pt,{label:"Item",value:h,onChange:E=>y(E.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),o.map(E=>l.jsxs("option",{value:E.id,children:[E.name," (",E.category,")"]},E.id))]}),l.jsx(He,{type:"date",label:"From Date",value:v,onChange:E=>x(E.target.value)}),l.jsx(He,{type:"date",label:"To Date",value:g,onChange:E=>_(E.target.value)})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Damage & Loss History"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No incidents found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Incidents"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Quantity"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"})]})}),l.jsx("tbody",{children:a.map((E,C)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2 text-sm",children:E.report_date}),l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:E.item_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:E.item_category})]})}),t&&l.jsx("td",{className:"py-2 px-2 text-sm",children:E.outlet_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:E.movement_type==="loss"?"destructive":"warning",children:E.movement_type.toUpperCase()})}),l.jsx("td",{className:"text-right py-2 px-2",children:E.incident_count}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold text-red-600",children:E.total_quantity}),l.jsx("td",{className:"py-2 px-2 text-sm",children:l.jsxs("div",{children:[l.jsx(Yt,{variant:"default",children:E.reference_type}),E.reference_name&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:E.reference_name})]})})]},C))})]})})]})]})}function hpe({userId:e,showOutletFilter:t,outlets:r,setLoading:n,setError:i}){const[a,s]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(""),[f,p]=b.useState(""),[h,y]=b.useState(""),[v,x]=b.useState(""),[g,_]=b.useState("");b.useEffect(()=>{S()},[e]),b.useEffect(()=>{j()},[e,u,f,h,v,g]);async function S(){try{const N=await cf(e,{is_active:!0});c(N)}catch(N){console.error("Failed to load items:",N)}}async function j(){try{n(!0),i(null);const N={};u&&(N.outlet_id=u),f&&(N.movement_type=f),h&&(N.inventory_item_id=h),v&&(N.date_from=v),g&&(N.date_to=g);const D=await fM(e,N);s(D)}catch(N){i(N instanceof Error?N.message:"Failed to load report")}finally{n(!1)}}async function A(){try{const N={};u&&(N.outlet_id=u),f&&(N.movement_type=f),h&&(N.inventory_item_id=h),v&&(N.date_from=v),g&&(N.date_to=g);const D=await lpe(e,N),E=new Blob([D],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a"),L=URL.createObjectURL(E);C.setAttribute("href",L),C.setAttribute("download",`movement-history-${new Date().toISOString().split("T")[0]}.csv`),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)}catch(N){i(N instanceof Error?N.message:"Failed to export CSV")}}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:l.jsxs(we,{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Movements"}),l.jsx("p",{className:"text-2xl font-bold",children:a.length})]})}),l.jsxs(we,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-semibold",children:"Filters"}),l.jsxs(Pe,{onClick:A,disabled:a.length===0,children:[l.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t&&l.jsxs(pt,{label:"Outlet",value:u,onChange:N=>d(N.target.value),children:[l.jsx("option",{value:"",children:"All Outlets"}),r.map(N=>l.jsx("option",{value:N.id,children:N.name},N.id))]}),l.jsxs(pt,{label:"Movement Type",value:f,onChange:N=>p(N.target.value),children:[l.jsx("option",{value:"",children:"All Types"}),l.jsx("option",{value:"stock_in",children:"Stock In"}),l.jsx("option",{value:"allocation",children:"Allocation"}),l.jsx("option",{value:"return",children:"Return"}),l.jsx("option",{value:"damage",children:"Damage"}),l.jsx("option",{value:"loss",children:"Loss"}),l.jsx("option",{value:"adjustment",children:"Adjustment"})]}),l.jsxs(pt,{label:"Item",value:h,onChange:N=>y(N.target.value),children:[l.jsx("option",{value:"",children:"All Items"}),o.map(N=>l.jsxs("option",{value:N.id,children:[N.name," (",N.category,")"]},N.id))]}),l.jsx(He,{type:"date",label:"From Date",value:v,onChange:N=>x(N.target.value)}),l.jsx(He,{type:"date",label:"To Date",value:g,onChange:N=>_(N.target.value)})]})]}),l.jsxs(we,{children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Complete Movement History (Immutable Audit Trail)"}),a.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No movements found"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Date/Time"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Item"}),t&&l.jsx("th",{className:"text-left py-2 px-2",children:"Outlet"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Type"}),l.jsx("th",{className:"text-right py-2 px-2",children:"Qty"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Reference"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Notes"}),l.jsx("th",{className:"text-left py-2 px-2",children:"User"})]})}),l.jsx("tbody",{children:a.map((N,D)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx("p",{children:new Date(N.created_at).toLocaleDateString()}),l.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(N.created_at).toLocaleTimeString()})]})}),l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:N.item_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:N.item_category})]})}),t&&l.jsx("td",{className:"py-2 px-2",children:N.outlet_name}),l.jsx("td",{className:"py-2 px-2",children:l.jsx(Yt,{variant:"default",children:N.movement_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"text-right py-2 px-2 font-semibold",children:N.quantity}),l.jsx("td",{className:"py-2 px-2",children:l.jsxs("div",{children:[l.jsx(Yt,{variant:"secondary",children:N.reference_type}),N.reference_name&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N.reference_name})]})}),l.jsx("td",{className:"py-2 px-2 max-w-xs truncate",children:N.notes||"-"}),l.jsx("td",{className:"py-2 px-2",children:N.created_by_name})]},D))})]})})]})]})}async function xx(e){const{data:t,error:r}=await be.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(t.role!=="admin")throw new Error("Permission denied: Admin access required");if(!t.is_active)throw new Error("Permission denied: User account is inactive")}async function ppe(e){await xx(e);const{data:t,error:r}=await be.from("admin_users_summary").select("*").order("created_at",{ascending:!1});if(r)throw new Error(`Failed to fetch users: ${r.message}`);return t||[]}async function mpe(e,t){if(await xx(e),t.role!=="manager"&&t.outlet_ids&&t.outlet_ids.length>0)throw new Error("Only managers can be assigned to outlets");if(t.role==="manager"&&(!t.outlet_ids||t.outlet_ids.length===0))throw new Error("Managers must be assigned to at least one outlet");const{data:r,error:n}=await be.auth.admin.inviteUserByEmail(t.email,{data:{full_name:t.full_name,role:t.role}});if(n)throw new Error(`Failed to create auth user: ${n.message}`);const i=r.user.id,{error:a}=await be.from("user_profiles").insert({id:i,email:t.email,full_name:t.full_name,phone:t.phone||null,role:t.role,is_active:!0,created_by:e});if(a)throw new Error(`Failed to create user profile: ${a.message}`);if(t.role==="manager"&&t.outlet_ids&&t.outlet_ids.length>0){const s=t.outlet_ids.map(c=>({user_id:i,outlet_id:c})),{error:o}=await be.from("user_outlet_assignments").insert(s);if(o)throw new Error(`Failed to assign outlets: ${o.message}`)}return{user_id:i}}async function vpe(e,t,r){if(await xx(e),e===t&&!r)throw new Error("Cannot deactivate your own account");if(!r){const{data:i}=await be.from("user_profiles").select("role").eq("id",t).single();if((i==null?void 0:i.role)==="admin"){const{count:a,error:s}=await be.from("user_profiles").select("id",{count:"exact",head:!0}).eq("role","admin").eq("is_active",!0);if(s)throw new Error(`Failed to check admin count: ${s.message}`);if(a&&a<=1)throw new Error("Cannot deactivate the last active admin")}}const{error:n}=await be.from("user_profiles").update({is_active:r}).eq("id",t);if(n)throw new Error(`Failed to update user status: ${n.message}`)}async function gpe(e,t,r){await xx(e);const{data:n,error:i}=await be.from("user_profiles").select("role").eq("id",t).single();if(i)throw new Error(`Failed to fetch user profile: ${i.message}`);if(n.role!=="manager")throw new Error("Only managers can be assigned to outlets");const{error:a}=await be.from("user_outlet_assignments").delete().eq("user_id",t);if(a)throw new Error(`Failed to remove existing outlet assignments: ${a.message}`);if(r.length>0){const s=r.map(c=>({user_id:t,outlet_id:c})),{error:o}=await be.from("user_outlet_assignments").insert(s);if(o)throw new Error(`Failed to assign outlets: ${o.message}`)}}function ype({isOpen:e,onClose:t,onSubmit:r,user:n,outlets:i,mode:a}){const[s,o]=b.useState({email:"",full_name:"",phone:"",role:"accountant",outlet_ids:[]}),[c,u]=b.useState(!1),[d,f]=b.useState(null);b.useEffect(()=>{e&&n&&a==="edit"?o({email:n.email,full_name:n.full_name,phone:"",role:n.role,outlet_ids:[]}):e&&a==="create"&&o({email:"",full_name:"",phone:"",role:"accountant",outlet_ids:[]}),f(null)},[e,n,a]);const p=async h=>{if(h.preventDefault(),f(null),!s.email||!s.full_name){f("Email and full name are required");return}if(s.role==="manager"&&(!s.outlet_ids||s.outlet_ids.length===0)){f("Managers must be assigned to at least one outlet");return}try{u(!0),await r(s),t()}catch(y){f(y instanceof Error?y.message:"Failed to save user")}finally{u(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-brand-border sticky top-0 bg-white",children:[l.jsx("h2",{className:"text-lg font-semibold",children:a==="create"?"Add New User":"Edit User"}),l.jsx("button",{onClick:t,disabled:c,className:"text-brand-text/60 hover:text-brand-text",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[d&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm",children:d}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Email ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"email",value:s.email,onChange:h=>o({...s,email:h.target.value}),disabled:a==="edit"||c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg",required:!0}),a==="edit"&&l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Email cannot be changed"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:s.full_name,onChange:h=>o({...s,full_name:h.target.value}),disabled:c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),l.jsx("input",{type:"tel",value:s.phone,onChange:h=>o({...s,phone:h.target.value}),disabled:c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Role ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:s.role,onChange:h=>o({...s,role:h.target.value,outlet_ids:h.target.value!=="manager"?[]:s.outlet_ids}),disabled:c,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0,children:[l.jsx("option",{value:"accountant",children:"Accountant"}),l.jsx("option",{value:"manager",children:"Manager"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),s.role==="manager"&&l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Assigned Outlets ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"border border-brand-border rounded-md p-3 space-y-2 max-h-40 overflow-y-auto",children:i.filter(h=>h.is_active).map(h=>{var y;return l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:((y=s.outlet_ids)==null?void 0:y.includes(h.id))||!1,onChange:v=>{const x=v.target.checked?[...s.outlet_ids||[],h.id]:(s.outlet_ids||[]).filter(g=>g!==h.id);o({...s,outlet_ids:x})},disabled:c,className:"rounded"}),l.jsxs("span",{className:"text-sm",children:[h.name," (",h.code,")"]})]},h.id)})}),l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Managers can only access assigned outlets"})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t ",children:[l.jsx("button",{type:"button",onClick:t,disabled:c,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:c?"Saving...":a==="create"?"Create User":"Save Changes"})]})]})]})}):null}function i_({isOpen:e,onClose:t,onConfirm:r,title:n,message:i,confirmText:a="Confirm",cancelText:s="Cancel",variant:o="danger",isLoading:c=!1}){if(!e)return null;const u={danger:"bg-red-600 hover:bg-red-700",warning:"bg-orange-600 hover:bg-orange-700",info:"bg-brand-primary hover:bg-brand-primaryDark"};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white  rounded-lg shadow-xl max-w-md w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b ",children:[l.jsx("h2",{className:"text-lg font-semibold",children:n}),l.jsx("button",{onClick:t,disabled:c,className:"text-brand-text/60 hover:text-brand-text",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6",children:l.jsx("p",{className:"text-brand-text whitespace-pre-line",children:i})}),l.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t ",children:[l.jsx("button",{onClick:t,disabled:c,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:s}),l.jsx("button",{onClick:r,disabled:c,className:`px-4 py-2 text-white rounded-md ${u[o]} disabled:opacity-50`,children:c?"Processing...":a})]})]})})}function xpe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(null),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[p,h]=b.useState(!1),[y,v]=b.useState(null),[x,g]=b.useState("deactivate");b.useEffect(()=>{_()},[e]);async function _(){if(e!=null&&e.id)try{a(!0),o(null);const E=await ppe(e.id);n(E)}catch(E){o(E instanceof Error?E.message:"Failed to load users")}finally{a(!1)}}async function S(E){if(!(e!=null&&e.id))return;const C={email:E.email,full_name:E.full_name,phone:E.phone,role:E.role,outlet_ids:E.outlet_ids};await mpe(e.id,C),await _()}async function j(){if(!(e!=null&&e.id)||!y)return;const E=x==="activate";await vpe(e.id,y.user_id,E),await _(),f(!1),v(null)}async function A(E){!(e!=null&&e.id)||!y||(await gpe(e.id,y.user_id,E),await _(),h(!1),v(null))}function N(E,C){v(E),g(C),f(!0)}const D=E=>{switch(E){case"admin":return"bg-brand-deep/20 text-brand-deep";case"manager":return"bg-brand-primary/20 text-brand-primary";case"accountant":return"bg-brand-primary/20 text-brand-primary";default:return"bg-brand-border/50 text-brand-text"}};return i?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading users..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(i0,{className:"w-8 h-8"}),"User Management"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage users, roles, and outlet assignments"})]}),l.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark",children:[l.jsx($c,{className:"w-5 h-5"}),"Add User"]})]}),s&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:s}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:r.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Active Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:r.filter(E=>E.is_active).length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Admins"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:r.filter(E=>E.role==="admin"&&E.is_active).length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Managers"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:r.filter(E=>E.role==="manager"&&E.is_active).length})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Name"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Email"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Role"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Outlets"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Status"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-brand-text",children:"Last Login"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium text-brand-text",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:r.map(E=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-3 px-4 font-medium",children:E.full_name}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/80",children:E.email}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(E.role)}`,children:E.role.toUpperCase()})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:E.role==="manager"?E.assigned_outlets.length>0?l.jsxs("span",{className:"text-brand-text/80",children:[E.assigned_outlets.length," outlet(s)"]}):l.jsx("span",{className:"text-red-600 dark:text-red-400",children:"No outlets"}):l.jsx("span",{className:"text-brand-text/60",children:"-"})}),l.jsx("td",{className:"py-3 px-4",children:E.is_active?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-primary/20 text-brand-primary",children:"Active"}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/80",children:E.last_login?new Date(E.last_login).toLocaleDateString():"Never"}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E.role==="manager"&&l.jsx("button",{onClick:()=>{v(E),h(!0)},className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded",title:"Assign Outlets",children:l.jsx(Tq,{className:"w-4 h-4"})}),E.is_active?l.jsx("button",{onClick:()=>N(E,"deactivate"),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Deactivate User",children:l.jsx(Cg,{className:"w-4 h-4"})}):l.jsx("button",{onClick:()=>N(E,"activate"),className:"p-1.5 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:"Activate User",children:l.jsx(Cg,{className:"w-4 h-4"})})]})})]},E.user_id))})]})})}),l.jsx(ype,{isOpen:c,onClose:()=>u(!1),onSubmit:S,outlets:t||[],mode:"create"}),l.jsx(i_,{isOpen:d,onClose:()=>{f(!1),v(null)},onConfirm:j,title:x==="activate"?"Activate User":"Deactivate User",message:x==="activate"?`Are you sure you want to activate ${y==null?void 0:y.full_name}?`:`Are you sure you want to deactivate ${y==null?void 0:y.full_name}?

This user will lose access to the system.`,confirmText:x==="activate"?"Activate":"Deactivate",variant:x==="activate"?"info":"danger"}),p&&y&&l.jsx(bpe,{isOpen:p,onClose:()=>{h(!1),v(null)},onSubmit:A,user:y,outlets:t||[]})]})}function bpe({isOpen:e,onClose:t,onSubmit:r,user:n,outlets:i}){const[a,s]=b.useState([]),[o,c]=b.useState(!1);b.useEffect(()=>{e&&s([])},[e,n]);const u=async d=>{if(d.preventDefault(),a.length===0){alert("Please select at least one outlet for this manager");return}try{c(!0),await r(a)}finally{c(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-brand-border",children:[l.jsx("h2",{className:"text-lg font-semibold text-brand-text",children:"Assign Outlets"}),l.jsx("button",{onClick:t,className:"text-brand-text/60 hover:text-brand-text",children:l.jsx(i0,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:u,className:"p-6",children:[l.jsxs("p",{className:"text-sm text-brand-text/70 mb-4",children:["Assign outlets to ",l.jsx("strong",{children:n.full_name})]}),l.jsx("div",{className:"border border-brand-border rounded-md p-3 space-y-2 max-h-60 overflow-y-auto",children:i.filter(d=>d.is_active).map(d=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a.includes(d.id),onChange:f=>{f.target.checked?s([...a,d.id]):s(a.filter(p=>p!==d.id))},className:"rounded"}),l.jsxs("span",{className:"text-sm",children:[d.name," (",d.code,")"]})]},d.id))}),l.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[l.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:o?"Saving...":"Save Assignments"})]})]})]})}):null}async function zl(e){const{data:t,error:r}=await be.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(t.role!=="admin")throw new Error("Permission denied: Admin access required");if(!t.is_active)throw new Error("Permission denied: User account is inactive")}async function dC(e){await zl(e);const{data:t,error:r}=await be.from("admin_outlets_summary").select("*").order("is_active",{ascending:!1}).order("outlet_name");if(r)throw new Error(`Failed to fetch outlets: ${r.message}`);return t||[]}async function wpe(e,t){await zl(e);const{data:r,error:n}=await be.from("outlets").select("id").eq("code",t.code).maybeSingle();if(n)throw new Error(`Failed to check outlet code: ${n.message}`);if(r)throw new Error(`Outlet code '${t.code}' already exists`);const{data:i,error:a}=await be.from("outlets").insert({name:t.name,code:t.code,city:t.city,address:t.address||null,phone:t.phone||null,email:t.email||null,is_active:!0,created_by:e}).select("id").single();if(a)throw new Error(`Failed to create outlet: ${a.message}`);return{outlet_id:i.id}}async function _pe(e,t,r){if(await zl(e),r.code){const{data:i,error:a}=await be.from("outlets").select("id").eq("code",r.code).neq("id",t).maybeSingle();if(a)throw new Error(`Failed to check outlet code: ${a.message}`);if(i)throw new Error(`Outlet code '${r.code}' already exists`)}const{error:n}=await be.from("outlets").update(r).eq("id",t);if(n)throw new Error(`Failed to update outlet: ${n.message}`)}async function jpe(e,t){await zl(e);const r=await hM(e,t);if(!r.canDeactivate)throw new Error(r.reason||"Cannot deactivate outlet");const{error:n}=await be.from("outlets").update({is_active:!1}).eq("id",t);if(n)throw new Error(`Failed to deactivate outlet: ${n.message}`)}async function hM(e,t){await zl(e);const{data:r}=await be.from("outlets").select("is_active").eq("id",t).single();if(!(r!=null&&r.is_active))return{canDeactivate:!1,reason:"Outlet is already inactive"};const{count:n,error:i}=await be.from("subscriptions").select("id",{count:"exact",head:!0}).eq("outlet_id",t).eq("status","active");if(i)throw new Error(`Failed to check subscriptions: ${i.message}`);if(n&&n>0)return{canDeactivate:!1,reason:`Cannot deactivate: ${n} active subscription(s) found. Please cancel or move subscriptions first.`};const{count:a,error:s}=await be.from("inventory_allocations").select("id",{count:"exact",head:!0}).eq("outlet_id",t).eq("is_active",!0);if(s)throw new Error(`Failed to check inventory allocations: ${s.message}`);if(a&&a>0)return{canDeactivate:!1,reason:`Cannot deactivate: ${a} active inventory allocation(s) found. Please return all allocated items first.`};const{count:o,error:c}=await be.from("events").select("id",{count:"exact",head:!0}).eq("outlet_id",t).eq("status","planned");if(c)throw new Error(`Failed to check events: ${c.message}`);return o&&o>0?{canDeactivate:!1,reason:`Cannot deactivate: ${o} active event(s) found. Please complete or cancel events first.`}:{canDeactivate:!0}}async function Spe(e,t){await zl(e);const{error:r}=await be.from("outlets").update({is_active:!0}).eq("id",t);if(r)throw new Error(`Failed to activate outlet: ${r.message}`)}async function Npe(e,t){await zl(e);const r=await pM(e,t);if(!r.canDelete)throw new Error(r.reason||"Cannot delete outlet");const{error:n}=await be.from("outlets").delete().eq("id",t);if(n)throw new Error(`Failed to delete outlet: ${n.message}`)}async function pM(e,t){await zl(e);const{count:r}=await be.from("clients").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(r&&r>0)return{canDelete:!1,reason:`Cannot delete: ${r} client(s) linked to this outlet.`};const{count:n}=await be.from("subscriptions").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(n&&n>0)return{canDelete:!1,reason:`Cannot delete: ${n} subscription(s) linked to this outlet.`};const{count:i}=await be.from("events").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(i&&i>0)return{canDelete:!1,reason:`Cannot delete: ${i} event(s) linked to this outlet.`};const{count:a}=await be.from("inventory_items").select("id",{count:"exact",head:!0}).eq("outlet_id",t);if(a&&a>0)return{canDelete:!1,reason:`Cannot delete: ${a} inventory item(s) linked to this outlet.`};const{count:s}=await be.from("user_outlet_assignments").select("id",{count:"exact",head:!0}).eq("outlet_id",t);return s&&s>0?{canDelete:!1,reason:`Cannot delete: ${s} user(s) assigned to this outlet.`}:{canDelete:!0}}function fC({isOpen:e,onClose:t,onSubmit:r,outlet:n,mode:i}){const[a,s]=b.useState({name:"",code:"",city:"",address:"",phone:"",email:""}),[o,c]=b.useState(!1),[u,d]=b.useState(null);b.useEffect(()=>{e&&n&&i==="edit"?s({name:n.outlet_name,code:n.outlet_code,city:n.city,address:n.address||"",phone:"",email:""}):e&&i==="create"&&s({name:"",code:"",city:"",address:"",phone:"",email:""}),d(null)},[e,n,i]);const f=async p=>{if(p.preventDefault(),d(null),!a.name||!a.code||!a.city){d("Name, code, and city are required");return}try{c(!0),await r(a),t()}catch(h){d(h instanceof Error?h.message:"Failed to save outlet")}finally{c(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white  rounded-lg shadow-xl max-w-2xl w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b ",children:[l.jsx("h2",{className:"text-lg font-semibold",children:i==="create"?"Add New Outlet":"Edit Outlet"}),l.jsx("button",{onClick:t,disabled:o,className:"text-brand-text/60 hover:text-brand-text ",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[u&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm",children:u}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Outlet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:a.name,onChange:p=>s({...a,name:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Outlet Code ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:a.code,onChange:p=>s({...a,code:p.target.value.toUpperCase()}),disabled:i==="edit"||o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg uppercase",placeholder:"e.g., MUM01, DEL01",required:!0}),i==="edit"&&l.jsx("p",{className:"text-xs text-brand-text/60 mt-1",children:"Code cannot be changed"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:a.city,onChange:p=>s({...a,city:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),l.jsx("textarea",{value:a.address,onChange:p=>s({...a,address:p.target.value}),disabled:o,rows:3,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),l.jsx("input",{type:"tel",value:a.phone,onChange:p=>s({...a,phone:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{type:"email",value:a.email,onChange:p=>s({...a,email:p.target.value}),disabled:o,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50"})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t ",children:[l.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:o?"Saving...":i==="create"?"Create Outlet":"Save Changes"})]})]})]})}):null}function kpe(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,p]=b.useState(!1),[h,y]=b.useState(!1),[v,x]=b.useState(!1),[g,_]=b.useState(null),[S,j]=b.useState("deactivate"),[A,N]=b.useState(""),[D,E]=b.useState("");b.useEffect(()=>{C()},[e]);async function C(){if(e!=null&&e.id)try{i(!0),c(null);const te=await dC(e.id);r(te)}catch(te){c(te instanceof Error?te.message:"Failed to load outlets")}finally{i(!1)}}async function L(){if(e!=null&&e.id)try{s(!0),c(null);const te=await dC(e.id);r(te)}catch(te){c(te instanceof Error?te.message:"Failed to refresh outlets")}finally{s(!1)}}async function I(te){if(!(e!=null&&e.id))return;const R={name:te.name,code:te.code,city:te.city,address:te.address,phone:te.phone,email:te.email};await wpe(e.id,R),await C()}async function O(te){if(!(e!=null&&e.id)||!g)return;const R={name:te.name,city:te.city,address:te.address,phone:te.phone,email:te.email};await _pe(e.id,g.outlet_id,R),await C()}async function U(){!(e!=null&&e.id)||!g||(S==="deactivate"?await jpe(e.id,g.outlet_id):await Spe(e.id,g.outlet_id),await C(),y(!1),_(null),N(""))}async function V(){if(!(!(e!=null&&e.id)||!g))try{await Npe(e.id,g.outlet_id),await C(),x(!1),_(null),E("")}catch(te){E(te instanceof Error?te.message:"Failed to delete outlet")}}async function ie(te,R){if(_(te),j(R),R==="deactivate"&&(e!=null&&e.id))try{const z=await hM(e.id,te.outlet_id);z.canDeactivate?N(""):N(z.reason||"Cannot deactivate outlet")}catch(z){N(z instanceof Error?z.message:"Failed to validate outlet")}y(!0)}async function ne(te){if(_(te),E(""),e!=null&&e.id)try{const R=await pM(e.id,te.outlet_id);R.canDelete||E(R.reason||"Cannot delete outlet")}catch(R){E(R instanceof Error?R.message:"Failed to validate")}x(!0)}const ee=t.reduce((te,R)=>te+R.user_count,0),q=t.reduce((te,R)=>te+R.client_count,0),Y=t.reduce((te,R)=>te+R.active_subscription_count,0),fe=t.reduce((te,R)=>te+R.allocated_inventory_count,0);return n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading outlets..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(eT,{className:"w-8 h-8"}),"Outlet Management"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage outlets and operational metrics"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:L,disabled:a,className:"flex items-center gap-2 px-4 py-2 border border-brand-border text-brand-text rounded-md hover:bg-brand-bg disabled:opacity-50",title:"Refresh from database",children:[l.jsx(Iq,{className:`w-5 h-5 ${a?"animate-spin":""}`}),"Refresh"]}),l.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark",children:[l.jsx($c,{className:"w-5 h-5"}),"Add Outlet"]})]})]}),o&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:o}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Outlets"}),l.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:ee})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Clients"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:q})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Active Subscriptions"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:Y})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Allocated Inventory"}),l.jsx("p",{className:"text-2xl font-bold text-brand-text",children:fe})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Code"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"City"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Users"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Clients"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Subscriptions"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium",children:"Inventory"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Status"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:t.map(te=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-3 px-4 font-medium",children:te.outlet_name}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:"font-mono text-sm bg-brand-bg px-2 py-1 rounded text-brand-text",children:te.outlet_code})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:te.city}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:te.user_count}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:te.client_count}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:te.active_subscription_count}),l.jsx("td",{className:"py-3 px-4 text-center text-sm",children:te.allocated_inventory_count}),l.jsx("td",{className:"py-3 px-4",children:te.is_active?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-primary/20 text-brand-primary",children:"Active"}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx("button",{onClick:()=>{_(te),p(!0)},className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded",title:"Edit Outlet",children:l.jsx(n0,{className:"w-4 h-4"})}),te.is_active?l.jsx("button",{onClick:()=>ie(te,"deactivate"),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Deactivate Outlet",children:l.jsx(Cg,{className:"w-4 h-4"})}):l.jsx("button",{onClick:()=>ie(te,"activate"),className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded",title:"Activate Outlet",children:l.jsx(Cg,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>ne(te),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Delete Outlet",children:l.jsx(nT,{className:"w-4 h-4"})})]})})]},te.outlet_id))})]})})}),l.jsx(fC,{isOpen:u,onClose:()=>d(!1),onSubmit:I,mode:"create"}),l.jsx(fC,{isOpen:f,onClose:()=>{p(!1),_(null)},onSubmit:O,outlet:g,mode:"edit"}),l.jsx(i_,{isOpen:h,onClose:()=>{y(!1),_(null),N("")},onConfirm:U,title:S==="activate"?"Activate Outlet":"Deactivate Outlet",message:S==="activate"?`Are you sure you want to activate ${g==null?void 0:g.outlet_name}?`:A?`${A}

Please resolve these issues before deactivating.`:`Are you sure you want to deactivate ${g==null?void 0:g.outlet_name}?

This outlet will no longer be accessible.`,confirmText:S==="activate"?"Activate":"Deactivate",variant:A?"warning":S==="activate"?"info":"danger"}),l.jsx(i_,{isOpen:v,onClose:()=>{x(!1),_(null),E("")},onConfirm:V,title:"Delete Outlet Permanently",message:D?`${D}

Please remove all linked data before deleting.`:`Are you sure you want to permanently delete ${g==null?void 0:g.outlet_name}?

This action cannot be undone.`,confirmText:"Delete",variant:D?"warning":"danger"})]})}function Ape(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null);b.useEffect(()=>{o()},[e]);async function o(){if(e!=null&&e.id)try{i(!0),s(null);const{data:d,error:f}=await be.from("admin_role_permission_matrix").select("*").order("role").order("module");if(f)throw f;r(d||[])}catch(d){s(d instanceof Error?d.message:"Failed to load permission matrix")}finally{i(!1)}}const c=d=>{switch(d){case"admin":return"bg-brand-deep/20 text-brand-deep";case"manager":return"bg-brand-primary/20 text-brand-primary";case"accountant":return"bg-brand-primary/20 text-brand-primary";default:return"bg-brand-border/50 text-brand-text"}},u=d=>d.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading access matrix..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(rT,{className:"w-8 h-8"}),"Access Control Matrix"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Read-only permission matrix showing role-based access control"})]}),a&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:a}),l.jsxs("div",{className:"p-4 bg-brand-primary/10 border border-brand-primary/30 rounded",children:[l.jsx("h3",{className:"font-semibold text-brand-text mb-2",children:" About This Matrix"}),l.jsxs("ul",{className:"text-sm text-brand-text space-y-1 list-disc list-inside",children:[l.jsx("li",{children:"This matrix reflects the actual enforced permissions in the system"}),l.jsx("li",{children:"Permissions are hardcoded and cannot be edited"}),l.jsxs("li",{children:[l.jsx("strong",{children:"Manager"})," permissions are further restricted to assigned outlets only"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Accountant"})," has read-only access across all modules"]})]})]}),["admin","manager","accountant"].map(d=>{const f=t.filter(p=>p.role===d);return l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:[l.jsxs("div",{className:"p-4 bg-brand-bg border-b border-brand-border",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(d)}`,children:d.toUpperCase()}),d==="manager"&&l.jsx("span",{className:"ml-3 text-sm text-brand-text/70",children:"(Outlet-scoped access)"}),d==="accountant"&&l.jsx("span",{className:"ml-3 text-sm text-brand-text/70",children:"(Read-only across all outlets)"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-4 font-medium w-1/3",children:"Module"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"View"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"Create"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"Edit"}),l.jsx("th",{className:"text-center py-2 px-4 font-medium",children:"Delete"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map((p,h)=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-2 px-4 font-medium",children:u(p.module)}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_view?l.jsx(Gf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_create?l.jsx(Gf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_edit?l.jsx(Gf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-4 text-center",children:p.can_delete?l.jsx(Gf,{className:"w-5 h-5 text-green-600 mx-auto"}):l.jsx(xs,{className:"w-5 h-5 text-red-400 mx-auto"})})]},h))})]})})]},d)}),l.jsxs("div",{className:"bg-brand-bg p-4 rounded-lg border border-brand-border",children:[l.jsx("h3",{className:"font-semibold mb-3",children:"Legend"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Gf,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{children:"Permission granted"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xs,{className:"w-5 h-5 text-red-400"}),l.jsx("span",{children:"Permission denied"})]})]})]})]})}async function kS(e){const{data:t,error:r}=await be.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(!t.is_active)throw new Error("User account is inactive");if(!["admin","manager","accountant"].includes(t.role))throw new Error("Permission denied: Insufficient privileges to view activity logs");if(t.role==="manager"){const{data:n,error:i}=await be.from("user_outlet_assignments").select("outlet_id").eq("user_id",e);if(i)throw new Error(`Failed to fetch outlet assignments: ${i.message}`);const a=(n==null?void 0:n.map(s=>s.outlet_id))||[];return{role:t.role,outletIds:a}}return{role:t.role,outletIds:null}}async function AS(e,t={}){const r=await kS(e);let n=be.from("admin_activity_log_unified").select("*").order("occurred_at",{ascending:!1}).limit(1e3);if(r.role==="manager"&&r.outletIds){if(r.outletIds.length===0)return[];n=n.in("outlet_id",r.outletIds)}t.outlet_id&&["admin","accountant"].includes(r.role)&&(n=n.eq("outlet_id",t.outlet_id)),t.user_id&&(n=n.eq("user_id",t.user_id)),t.module&&(n=n.eq("module",t.module)),t.action_type&&(n=n.eq("action_type",t.action_type)),t.date_from&&(n=n.gte("occurred_at",t.date_from)),t.date_to&&(n=n.lte("occurred_at",t.date_to));const{data:i,error:a}=await n;if(a)throw new Error(`Failed to fetch activity logs: ${a.message}`);return i||[]}async function Epe(e,t={}){const n=(await AS(e,t)).map(i=>({Date:new Date(i.occurred_at).toLocaleDateString(),Time:new Date(i.occurred_at).toLocaleTimeString(),User:i.user_name||"System",Outlet:i.outlet_name,Module:i.module.toUpperCase(),Action:i.action_type.replace(/_/g," ").toUpperCase(),Description:i.description}));return uf.unparse(n)}async function Ppe(e){const t=await kS(e);let r=be.from("admin_activity_log_unified").select("module");if(t.role==="manager"&&t.outletIds){if(t.outletIds.length===0)return[];r=r.in("outlet_id",t.outletIds)}const{data:n,error:i}=await r;if(i)throw new Error(`Failed to fetch modules: ${i.message}`);return[...new Set((n==null?void 0:n.map(s=>s.module))||[])].sort()}async function Cpe(e,t){const r=await kS(e);let n=be.from("admin_activity_log_unified").select("action_type");if(r.role==="manager"&&r.outletIds){if(r.outletIds.length===0)return[];n=n.in("outlet_id",r.outletIds)}t&&(n=n.eq("module",t));const{data:i,error:a}=await n;if(a)throw new Error(`Failed to fetch action types: ${a.message}`);return[...new Set((i==null?void 0:i.map(o=>o.action_type))||[])].sort()}async function Ope(e,t={}){const r=await AS(e,t),n=new Set(r.map(a=>a.user_id).filter(Boolean)),i=new Set(r.map(a=>a.module));return{total_activities:r.length,unique_users:n.size,modules_active:i.size}}function Tpe(){const{user:e,outlets:t}=Wt(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(null),[c,u]=b.useState(!1),[d,f]=b.useState({total_activities:0,unique_users:0,modules_active:0}),[p,h]=b.useState({outlet_id:"",user_id:"",module:"",action_type:"",date_from:"",date_to:""}),[y,v]=b.useState([]),[x,g]=b.useState([]),_=(e==null?void 0:e.role)||"",S=_==="admin"||_==="accountant",j=t||[];b.useEffect(()=>{e!=null&&e.id&&(A(),N())},[e,p]);async function A(){if(e!=null&&e.id)try{a(!0),o(null);const[L,I]=await Promise.all([AS(e.id,p),Ope(e.id,p)]);n(L),f(I)}catch(L){o(L instanceof Error?L.message:"Failed to load activity logs")}finally{a(!1)}}async function N(){if(e!=null&&e.id)try{const[L,I]=await Promise.all([Ppe(e.id),Cpe(e.id,p.module)]);v(L),g(I)}catch(L){console.error("Failed to load filter options:",L)}}async function D(){if(e!=null&&e.id)try{u(!0);const L=await Epe(e.id,p),I=new Blob([L],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),U=URL.createObjectURL(I);O.setAttribute("href",U),O.setAttribute("download",`activity-logs-${new Date().toISOString().split("T")[0]}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)}catch(L){o(L instanceof Error?L.message:"Failed to export CSV")}finally{u(!1)}}function E(){h({outlet_id:"",user_id:"",module:"",action_type:"",date_from:"",date_to:""})}const C=L=>{switch(L){case"inventory":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"payment":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"subscription":return"bg-brand-primary/20 text-brand-primary";case"event":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"invoice":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-brand-border/50 text-brand-text"}};return i&&r.length===0?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading activity logs..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(Q6,{className:"w-8 h-8"}),"Activity Logs"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Unified audit trail across all system modules"})]}),l.jsxs("button",{onClick:D,disabled:r.length===0||c,className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:[l.jsx(Gn,{className:"w-5 h-5"}),c?"Exporting...":"Export CSV"]})]}),s&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:s}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Total Activities"}),l.jsx("p",{className:"text-2xl font-bold",children:d.total_activities})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Unique Users"}),l.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:d.unique_users})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-brand-border",children:[l.jsx("p",{className:"text-sm text-brand-text/70",children:"Active Modules"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.modules_active})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[l.jsx(kq,{className:"w-5 h-5"}),"Filters"]}),l.jsx("button",{onClick:E,className:"text-sm text-brand-primary hover:text-brand-primaryDark",children:"Clear Filters"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Outlet"}),l.jsxs("select",{value:p.outlet_id,onChange:L=>h({...p,outlet_id:L.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white",children:[l.jsx("option",{value:"",children:"All Outlets"}),j.map(L=>l.jsx("option",{value:L.id,children:L.name},L.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Module"}),l.jsxs("select",{value:p.module,onChange:L=>h({...p,module:L.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white",children:[l.jsx("option",{value:"",children:"All Modules"}),y.map(L=>l.jsx("option",{value:L,children:L.toUpperCase()},L))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Action Type"}),l.jsxs("select",{value:p.action_type,onChange:L=>h({...p,action_type:L.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white",children:[l.jsx("option",{value:"",children:"All Actions"}),x.map(L=>l.jsx("option",{value:L,children:L.replace(/_/g," ").toUpperCase()},L))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"From Date"}),l.jsx("input",{type:"date",value:p.date_from,onChange:L=>h({...p,date_from:L.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"To Date"}),l.jsx("input",{type:"date",value:p.date_to,onChange:L=>h({...p,date_to:L.target.value}),className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Date/Time"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"User"}),S&&l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Outlet"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Module"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Action"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Description"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:r.map((L,I)=>l.jsxs("tr",{className:"hover:bg-brand-primary/5",children:[l.jsx("td",{className:"py-3 px-4 text-sm",children:l.jsxs("div",{children:[l.jsx("p",{children:new Date(L.occurred_at).toLocaleDateString()}),l.jsx("p",{className:"text-xs text-brand-text/70",children:new Date(L.occurred_at).toLocaleTimeString()})]})}),l.jsx("td",{className:"py-3 px-4 text-sm",children:L.user_name||"System"}),S&&l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:L.outlet_name}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C(L.module)}`,children:L.module.toUpperCase()})}),l.jsx("td",{className:"py-3 px-4 text-xs font-mono",children:L.action_type.replace(/_/g," ").toUpperCase()}),l.jsx("td",{className:"py-3 px-4 text-sm max-w-md truncate",children:L.description})]},I))})]})}),r.length===0&&!i&&l.jsx("div",{className:"text-center py-12 text-brand-text/70",children:"No activity logs found for the selected filters"})]})]})}async function mM(e){const{data:t,error:r}=await be.from("user_profiles").select("role, is_active").eq("id",e).single();if(r||!t)throw new Error("User profile not found");if(t.role!=="admin")throw new Error("Permission denied: Admin access required");if(!t.is_active)throw new Error("Permission denied: User account is inactive")}async function Ipe(e){await mM(e);const{data:t,error:r}=await be.from("system_settings").select("*").order("key");if(r)throw new Error(`Failed to fetch settings: ${r.message}`);return t||[]}async function Lpe(e,t,r){await mM(e);const{data:n,error:i}=await be.from("system_settings").select("value").eq("key",t).maybeSingle();if(i)throw new Error(`Failed to check setting: ${i.message}`);if(!n)throw new Error(`Setting '${t}' does not exist. Cannot update non-existent setting.`);if(["inventory_negative_stock_tolerance"].includes(t))throw new Error(`Setting '${t}' is locked and cannot be modified`);const s=n.value;console.log(`[SYSTEM SETTINGS] User ${e} changing '${t}' from`,s,"to",r);const{error:o}=await be.from("system_settings").update({value:r,updated_at:new Date().toISOString(),updated_by:e}).eq("key",t);if(o)throw new Error(`Failed to update setting: ${o.message}`)}function Dpe({isOpen:e,onClose:t,onSubmit:r,setting:n}){const[i,a]=b.useState(""),[s,o]=b.useState(!1),[c,u]=b.useState(null);b.useEffect(()=>{if(e&&n){const h=typeof n.value=="string"?n.value:JSON.stringify(n.value);a(h)}u(null)},[e,n]);const d=async h=>{if(h.preventDefault(),!!n){if(u(null),!i){u("Value cannot be empty");return}try{o(!0),await r(n.key,i),t()}catch(y){u(y instanceof Error?y.message:"Failed to update setting")}finally{o(!1)}}};if(!e||!n)return null;const f=n.key==="inventory_negative_stock_tolerance",p=["invoice_auto_number","subscription_auto_renewal"].includes(n.key);return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white  rounded-lg shadow-xl max-w-lg w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b ",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Edit Setting"}),l.jsx("button",{onClick:t,disabled:s,className:"text-brand-text/60 hover:text-brand-text dark:hover:text-gray-300",children:l.jsx(xs,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[c&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm",children:c}),f&&l.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded flex items-start gap-2",children:[l.jsx(yq,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[l.jsx("strong",{children:"Locked Setting:"})," This setting is locked for production safety and cannot be modified."]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Setting Key"}),l.jsx("input",{type:"text",value:n.key,disabled:!0,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-brand-bg text-brand-text/80"})]}),n.description&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),l.jsx("p",{className:"text-sm text-brand-text/70 p-3 bg-brand-bg rounded",children:n.description})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Current Value"}),l.jsx("input",{type:"text",value:typeof n.value=="string"?n.value:JSON.stringify(n.value),disabled:!0,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-brand-bg text-brand-text/80"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["New Value ",l.jsx("span",{className:"text-red-500",children:"*"})]}),p?l.jsxs("select",{value:i,onChange:h=>a(h.target.value),disabled:s||f,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg",required:!0,children:[l.jsx("option",{value:"true",children:"True (Enabled)"}),l.jsx("option",{value:"false",children:"False (Disabled)"})]}):l.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),disabled:s||f,className:"w-full px-3 py-2 border border-brand-border rounded-md bg-white disabled:opacity-50 disabled:bg-brand-bg",required:!0})]}),!f&&l.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded",children:l.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:[l.jsx("strong",{children:"Warning:"})," Changing system settings may affect application behavior. Proceed with caution."]})}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t ",children:[l.jsx("button",{type:"button",onClick:t,disabled:s,className:"px-4 py-2 border border-brand-border rounded-md hover:bg-brand-bg disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:s||f,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryDark disabled:opacity-50",children:s?"Updating...":"Update Setting"})]})]})]})})}function Rpe(){const{user:e}=Wt(),[t,r]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,c]=b.useState(!1),[u,d]=b.useState(null);b.useEffect(()=>{f()},[e]);async function f(){if(e!=null&&e.id)try{i(!0),s(null);const _=await Ipe(e.id);r(_)}catch(_){s(_ instanceof Error?_.message:"Failed to load settings")}finally{i(!1)}}async function p(_,S){e!=null&&e.id&&(await Lpe(e.id,_,S),await f())}function h(_){d(_),c(!0)}const y=_=>_==="inventory_negative_stock_tolerance",v=_=>typeof _=="string"?_==="true"?"Enabled":_==="false"?"Disabled":_:JSON.stringify(_),x=_=>_.startsWith("inventory_")?"Inventory":_.startsWith("payment_")?"Payments":_.startsWith("invoice_")?"Invoices":_.startsWith("subscription_")?"Subscriptions":"General",g=t.reduce((_,S)=>{const j=x(S.key);return _[j]||(_[j]=[]),_[j].push(S),_},{});return n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-brand-text/70",children:"Loading settings..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(tT,{className:"w-8 h-8"}),"System Settings"]}),l.jsx("p",{className:"text-brand-text/70 mt-1",children:"Manage system configuration and feature toggles"})]}),a&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400",children:a}),l.jsx("div",{className:"p-4 bg-brand-primary/10 border border-brand-border rounded",children:l.jsxs("p",{className:"text-sm text-brand-text",children:[l.jsx("strong",{children:" Warning:"})," Changing system settings may affect application behavior. All changes are logged and can be audited. Locked settings cannot be modified for production safety."]})}),Object.entries(g).map(([_,S])=>l.jsxs("div",{className:"bg-white rounded-lg border border-brand-border overflow-hidden",children:[l.jsx("div",{className:"p-4 bg-brand-bg border-b border-brand-border",children:l.jsx("h2",{className:"text-lg font-semibold",children:_})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-brand-bg border-b border-brand-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/4",children:"Setting"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/3",children:"Description"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/6",children:"Current Value"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium w-1/6",children:"Last Updated"}),l.jsx("th",{className:"text-right py-3 px-4 font-medium w-1/12",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-brand-border",children:S.map(j=>{const A=y(j.key);return l.jsxs("tr",{className:`hover:bg-brand-primary/5 ${A?"bg-brand-bg":""}`,children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-mono text-sm font-medium",children:j.key}),A&&l.jsx("span",{title:"Locked setting",children:l.jsx(Cq,{className:"w-4 h-4 text-brand-text/60"})})]})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:j.description||"-"}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-primary/20 text-brand-primary",children:v(j.value)})}),l.jsx("td",{className:"py-3 px-4 text-sm text-brand-text/70",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(jq,{className:"w-3 h-3"}),new Date(j.updated_at).toLocaleDateString()]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("div",{className:"flex items-center justify-end",children:l.jsx("button",{onClick:()=>h(j),disabled:A,className:"p-1.5 text-brand-primary hover:bg-brand-primary/10 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:A?"Setting is locked":"Edit setting",children:l.jsx(n0,{className:"w-4 h-4"})})})})]},j.key)})})]})})]},_)),l.jsxs("div",{className:"bg-brand-primary/10 border border-brand-primary/30 rounded p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-text mb-2",children:" About System Settings"}),l.jsxs("ul",{className:"text-sm text-brand-text space-y-1 list-disc list-inside",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Locked Settings:"})," Cannot be modified for production safety and data integrity"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Audit Trail:"})," All changes are logged with user ID and timestamp"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Boolean Values:"}),' Use "true" or "false" for enable/disable toggles']}),l.jsxs("li",{children:[l.jsx("strong",{children:"Numeric Values:"})," Ensure values are within acceptable ranges"]})]})]}),l.jsx(Dpe,{isOpen:o,onClose:()=>{c(!1),d(null)},onSubmit:p,setting:u})]})}function Mpe(){return l.jsxs(w9,{children:[l.jsx(Dt,{element:l.jsx(mq,{}),children:l.jsx(Dt,{path:"/login",element:l.jsx(Uq,{})})}),l.jsxs(Dt,{element:l.jsx(Zt,{children:l.jsx($q,{})}),children:[l.jsx(Dt,{path:"/dashboard",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(qq,{})})}),l.jsx(Dt,{path:"/clients",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Vq,{})})}),l.jsx(Dt,{path:"/clients/new",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(Kq,{})})}),l.jsx(Dt,{path:"/clients/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Gq,{})})}),l.jsx(Dt,{path:"/clients/:id/edit",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(Yq,{})})}),l.jsx(Dt,{path:"/subscriptions",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(tW,{})})}),l.jsx(Dt,{path:"/subscriptions/add",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(rW,{})})}),l.jsx(Dt,{path:"/subscriptions/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(iW,{})})}),l.jsx(Dt,{path:"/subscriptions/:id/edit",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(nW,{})})}),l.jsx(Dt,{path:"/events",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(oW,{})})}),l.jsx(Dt,{path:"/events/add",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(lW,{})})}),l.jsx(Dt,{path:"/events/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(uW,{})})}),l.jsx(Dt,{path:"/events/:id/edit",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(cW,{})})}),l.jsx(Dt,{path:"/invoices",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(mW,{})})}),l.jsx(Dt,{path:"/invoices/create",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(vW,{})})}),l.jsx(Dt,{path:"/invoices/:id",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(tG,{})})}),l.jsx(Dt,{path:"/payments",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(rG,{})})}),l.jsx(Dt,{path:"/reports",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(whe,{})})}),l.jsx(Dt,{path:"/reports/gst-working",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Dhe,{})})}),l.jsx(Dt,{path:"/inventory",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Zhe,{})})}),l.jsx(Dt,{path:"/inventory/movements",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(epe,{})})}),l.jsx(Dt,{path:"/inventory/allocate",element:l.jsx(Zt,{allowedRoles:["admin","manager"],children:l.jsx(ipe,{})})}),l.jsx(Dt,{path:"/inventory/reports",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(cpe,{})})}),l.jsx(Dt,{path:"/admin/users",element:l.jsx(Zt,{allowedRoles:["admin"],children:l.jsx(xpe,{})})}),l.jsx(Dt,{path:"/admin/outlets",element:l.jsx(Zt,{allowedRoles:["admin"],children:l.jsx(kpe,{})})}),l.jsx(Dt,{path:"/admin/access-matrix",element:l.jsx(Zt,{allowedRoles:["admin","accountant"],children:l.jsx(Ape,{})})}),l.jsx(Dt,{path:"/admin/activity-logs",element:l.jsx(Zt,{allowedRoles:["admin","manager","accountant"],children:l.jsx(Tpe,{})})}),l.jsx(Dt,{path:"/admin/settings",element:l.jsx(Zt,{allowedRoles:["admin"],children:l.jsx(Rpe,{})})})]}),l.jsx(Dt,{path:"/",element:l.jsx(S2,{to:"/dashboard",replace:!0})}),l.jsx(Dt,{path:"/unauthorized",element:l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-brand-text",children:"403"}),l.jsx("p",{className:"text-brand-text/70 mt-2",children:"You don't have permission to access this page"})]})})}),l.jsx(Dt,{path:"*",element:l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-brand-text",children:"404"}),l.jsx("p",{className:"text-brand-text/70 mt-2",children:"Page not found"})]})})})]})}function Fpe(){return l.jsx(P9,{children:l.jsx(pq,{children:l.jsx(Mpe,{})})})}Cb.createRoot(document.getElementById("root")).render(l.jsx(bp.StrictMode,{children:l.jsx(Fpe,{})}));export{er as _,rF as c,Ts as g};
